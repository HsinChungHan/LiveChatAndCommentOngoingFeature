# 各角色文件規範

本文檔定義各角色（PM、BE、Designer、Client Side RD、QA）需要提供的文件格式和內容要求。

---

## 📋 目錄

1. [PM（Product Manager）需提供的文件](#pmproduct-manager需提供的文件)
2. [BE（Backend Engineer）需提供的文件](#bebackend-engineer需提供的文件)
3. [Designer（UI/UX Designer）需提供的文件](#designeruiux-designer需提供的文件)
4. [Client Side RD 需提供的文件](#client-side-rd-需提供的文件)
5. [QA（Quality Assurance）需提供的文件](#qaquality-assurance需提供的文件)
6. [文件範本與檢查清單](#文件範本與檢查清單)
6. [文件格式建議總結](#文件格式建議總結)
7. [文件格式轉換工具](#文件格式轉換工具)
8. [快速參考](#快速參考)
9. [關鍵成功因素](#關鍵成功因素)

---

## PM（Product Manager）需提供的文件 {#pmproduct-manager需提供的文件}

### 1.1 PRD（Product Requirements Document）

**推薦文件格式**：

- ✅ **YAML**（推薦）
  - 結構化、易於 AI 解析、版本控制友好
- ✅ **Markdown**
  - 易於閱讀和編輯
- ⚠️ **Word / PDF**
  - 不推薦，難以自動化處理

**為什麼推薦 YAML**：

- ✅ **結構化格式**
  - 易於 AI 解析和提取資訊
- ✅ **版本控制友好**
  - Git diff 清晰
- ✅ **自動驗證**
  - 可以自動驗證格式和完整性
- ✅ **易於轉換**
  - 易於轉換為其他格式

**必備內容**：

| 章節 | 內容要求 | 範例 |
|------|---------|------|
| **功能概述** | Feature 的目的、目標用戶、使用情境 | "提供賽事前評論功能，讓用戶可以在賽事開始前發表評論和互動" |
| **使用者故事** | User Story 格式，包含角色、行為、目標 | "作為用戶，我想要在賽事開始前發表評論，以便與其他用戶互動" |
| **功能規格** | 詳細的功能描述、操作流程、業務規則 | "用戶可以發表評論、點讚、回覆、查看回覆列表" |
| **使用者流程** | 使用者操作的完整流程（可用流程圖或文字描述） | "進入頁面 → 查看評論列表 → 點擊輸入框 → 輸入評論 → 送出" |
| **業務規則** | 業務邏輯、限制條件、特殊情況 | "未登入用戶需先登入才能發表評論"、"nickname 為必填" |
| **驗收條件** | 功能完成的驗收標準 | "用戶可以成功發表評論並看到自己的評論出現在列表中" |
| **優先級** | 功能的優先級（P0/P1/P2/P3） | P0：核心功能，P1：重要功能，P2：次要功能，P3：可選功能 |

**範例結構**：

```markdown
# PrematchComment Feature PRD

## 1. 功能概述
- **目的**：提供賽事前評論功能
- **目標用戶**：所有註冊用戶
- **使用情境**：用戶在賽事開始前可以發表評論、點讚、回覆

## 2. 使用者故事
- 作為用戶，我想要在賽事開始前發表評論
- 作為用戶，我想要點讚其他用戶的評論
- 作為用戶，我想要回覆其他用戶的評論

## 3. 功能規格
### 3.1 評論列表
- 顯示熱門評論（Top tab）
- 顯示最新評論（Newest tab）
- 支援下拉刷新

### 3.2 發表評論
- 點擊輸入框觸發登入檢查
- 檢查 nickname 是否存在
- 支援發表評論和回覆

## 4. 使用者流程
1. 進入 Race Detail Page
2. 點擊進入 Prematch Comment Page
3. 查看評論列表（預設 Top tab）
4. 切換到 Newest tab
5. 點擊輸入框發表評論
6. 輸入評論內容並送出

## 5. 業務規則
- 未登入用戶需先登入才能發表評論
- 發表評論前需檢查 nickname 是否存在
- 如果沒有 nickname，需先建立 nickname
- 評論列表支援分頁載入（每次最多 5 筆）

## 6. 驗收條件
- [ ] 用戶可以成功發表評論
- [ ] 用戶可以點讚評論
- [ ] 用戶可以回覆評論
- [ ] 評論列表可以正常顯示和刷新
```

#### 1.2 使用者流程圖（可選但建議）

**格式**：Mermaid Flowchart / Figma / Draw.io

**內容**：

- 使用者操作的完整流程
- 決策點和分支
- 錯誤處理流程

---

## BE（Backend Engineer）需提供的文件 {#bebackend-engineer需提供的文件}

### 2.1 API Spec（API 規格文件）

**推薦文件格式**：

- ✅ **OpenAPI 3.0 (YAML)**（強烈推薦）
  - 標準格式、結構化、易於 AI 解析
- ✅ **OpenAPI 3.0 (JSON)**
  - 與 YAML 等價，但 YAML 更易讀
- ⚠️ **Swagger 2.0**
  - 舊版格式，建議升級到 OpenAPI 3.0
- ⚠️ **Markdown**
  - 不推薦，難以自動化處理

**為什麼推薦 OpenAPI 3.0 YAML**：

- ✅ **業界標準格式**
  - 工具支援完善
- ✅ **結構化格式**
  - 易於 AI 解析和驗證
- ✅ **自動生成代碼**
  - 可以自動生成 API Client 代碼
- ✅ **版本控制友好**
  - Git 追蹤清晰

**必備內容**：

| 項目 | 內容要求 | 範例 |
|------|---------|------|
| **Base URL** | API 基礎路徑 | `https://api.example.com/v1` |
| **Endpoints** | 所有 API 端點 | `GET /chat/match/comment/popular` |
| **HTTP Method** | 請求方法 | GET / POST / PUT / DELETE |
| **Request Parameters** | 路徑參數、查詢參數、請求體 | `refId: String`, `cursor: String?` |
| **Request Body Schema** | 請求體結構（JSON Schema） | `{ content: String, parentId: String? }` |
| **Response Schema** | 回應結構（JSON Schema） | `{ comments: [CommentDTO], nextCursor: String? }` |
| **HTTP Status Codes** | 所有可能的狀態碼和對應情況 | `200 OK`, `201 Created`, `400 Bad Request`, `401 Unauthorized`, `500 Internal Server Error` |
| **錯誤回應格式** | 錯誤回應的統一格式 | `{ error: { code: String, message: String } }` |
| **認證方式** | API 認證方式 | Bearer Token / API Key |
| **Rate Limiting** | 速率限制 | 100 requests/minute |
| **WebSocket** | WebSocket 端點和訊息格式（如適用） | `wss://api.example.com/chat/websocket` |

**範例結構（OpenAPI 3.0）**：

```yaml
openapi: 3.0.0
info:
  title: PrematchComment API
  version: 1.0.0

paths:
  /chat/match/comment/popular:
    get:
      summary: 取得熱門評論列表
      parameters:
        - name: refId
          in: path
          required: true
          schema:
            type: string
        - name: cursor
          in: query
          required: false
          schema:
            type: string
      responses:
        '200':
          description: 成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  comments:
                    type: array
                    items:
                      $ref: '#/components/schemas/CommentDTO'
                  nextCursor:
                    type: string
                    nullable: true
        '400':
          description: 請求參數錯誤
        '401':
          description: 未授權
        '500':
          description: 伺服器錯誤

components:
  schemas:
    CommentDTO:
      type: object
      properties:
        id:
          type: string
        content:
          type: string
        authorId:
          type: string
        authorName:
          type: string
        likeCount:
          type: integer
        replyCount:
          type: integer
        createdAt:
          type: string
          format: date-time
```

#### 2.2 WebSocket Spec（如適用）

**必備內容**：

- WebSocket 端點 URL
- 連線方式（認證、參數）
- 訊息格式（訂閱、取消訂閱、接收訊息）
- 事件類型定義
- 錯誤處理

**範例**：

```markdown
# Chat WebSocket API

## 端點
wss://api.example.com/chat/websocket/web-chat

## 連線方式
1. 建立 WebSocket 連線
2. 發送認證訊息（如需要）
3. 訂閱特定頻道

## 訊息格式

### 訂閱訊息
（JSON 格式，見下方範例）

### 接收訊息
（JSON 格式，見下方範例）
```

**訂閱訊息 JSON 範例**：

```json
{
  "type": "subscribe",
  "channel": "chatroom:{chatroomId}"
}
```

**接收訊息 JSON 範例**：

```json
{
  "type": "message",
  "data": {
    "messageId": "msg_123",
    "content": "Hello",
    "authorId": "user_456",
    "timestamp": "2024-01-01T00:00:00Z"
  }
}
```

#### 2.3 資料模型說明（可選但建議）

**內容**：

- DTO（Data Transfer Object）的完整定義
- 欄位說明和資料類型
- 必填/選填欄位
- 預設值
- 資料驗證規則

---

## Designer（UI/UX Designer）需提供的文件 {#designeruiux-designer需提供的文件}

### 3.1 UI/UX Design Spec

**推薦文件格式**：

- ✅ **YAML + Figma**（推薦）
  - YAML 提供結構化規格，Figma 提供視覺設計稿
- ✅ **JSON + Figma**
  - 與 YAML 等價
- ✅ **Markdown + Figma**
  - Markdown 提供文字描述，Figma 提供視覺設計稿
- ⚠️ **僅 Figma / Sketch**
  - 不推薦，難以自動化提取結構化資訊

**為什麼推薦 YAML + Figma**：

- ✅ **結構化 UI 規格**
  - YAML 提供結構化的 UI 規格（狀態、互動、元件），易於 AI 解析
- ✅ **視覺設計稿**
  - Figma 提供視覺設計稿，便於設計師和開發者查看
- ✅ **兩者結合**
  - 結構化規格 + 視覺參考
- ✅ **版本控制友好**
  - YAML 可以 Git 追蹤

**必備內容**：

| 項目 | 內容要求 | 範例 |
|------|---------|------|
| **畫面設計稿** | 所有相關畫面的設計稿 | PrematchComment Page、Comment Input、Reply List |
| **互動流程** | 使用者操作的互動流程 | 點擊輸入框 → 顯示鍵盤 → 輸入評論 → 送出 |
| **狀態定義** | UI 的各種狀態 | Loading、Empty、Error、Success |
| **元件規格** | UI 元件的規格說明 | Button、Input、List、Card |
| **動畫與過渡** | 動畫效果和過渡動畫 | 評論送出後的 highlight 動畫（3 秒） |
| **響應式設計** | 不同螢幕尺寸的適配 | iPhone、iPad、不同解析度 |
| **錯誤狀態設計** | 錯誤訊息的顯示方式 | Toast、Alert、Inline Error |

**範例結構**：

```markdown
# PrematchComment UI/UX Design Spec

## 1. 畫面設計稿
- [Figma 連結]：https://figma.com/...

## 2. 互動流程
### 2.1 發表評論流程
1. 用戶點擊輸入框
2. 鍵盤彈出
3. 用戶輸入評論內容
4. 點擊送出按鈕
5. 顯示 Loading 狀態
6. 評論出現在列表最上方
7. 評論 highlight 3 秒後恢復正常

### 2.2 點讚流程
1. 用戶點擊 Like 按鈕
2. 立即更新 UI（Optimistic UI）
3. Like 數 +1，按鈕變為已點讚狀態
4. 向後端發送請求
5. 如果失敗，回滾 UI 狀態

## 3. 狀態定義
### 3.1 評論列表狀態
- **Loading**：顯示 Loading indicator
- **Empty**：顯示「尚無評論」提示
- **Error**：顯示錯誤訊息和重試按鈕
- **Success**：顯示評論列表

### 3.2 輸入框狀態
- **Normal**：正常輸入狀態
- **Focused**：聚焦狀態（鍵盤彈出）
- **Sending**：發送中狀態（顯示 Loading）
- **Error**：發送失敗狀態（顯示錯誤訊息）

## 4. 元件規格
### 4.1 Comment Card
- 寬度：100%
- 內距：16px
- 圓角：8px
- 陰影：輕微陰影

### 4.2 Like Button
- 尺寸：24x24px
- 未點讚：灰色圖標
- 已點讚：紅色圖標
- 動畫：點擊時有縮放動畫

## 5. 動畫與過渡
- 評論送出後 highlight 動畫：3 秒
- Like 按鈕點擊動畫：0.2 秒縮放
- 列表載入動畫：淡入效果

## 6. 錯誤狀態設計
- **網路錯誤**：Toast 提示「網路連線失敗，請稍後再試」
- **驗證錯誤**：Inline Error 顯示在輸入框下方
- **伺服器錯誤**：Alert 彈窗顯示錯誤訊息
```

#### 3.2 設計系統參考（可選但建議）

**內容**：

- 顏色規範（Primary、Secondary、Error、Success）
- 字體規範（字體大小、字重、行高）
- 間距規範（Spacing、Padding、Margin）
- 元件庫（Button、Input、Card 等）

---

## Client Side RD 需提供的文件 {#client-side-rd-需提供的文件}

### 4.1 Input 資料

**必備文件**：

- `mermaid.md`：Mermaid Sequence Diagram 代碼
- `description.md`：自然語言敘述
- `flow_spec.yaml`：YAML Flow Spec

**詳細說明請參考**：[TDD 生成工作流程](./01_TDD_生成工作流程.md) 中的「階段 2：產生 Input 資料」章節。

---

## QA（Quality Assurance）需提供的文件 {#qaquality-assurance需提供的文件}

### 5.1 Test Cases / Test Scenarios（測試案例）

**推薦文件格式**：

- ✅ **YAML**（推薦）
  - 結構化、易於 AI 解析、版本控制友好
- ✅ **Markdown**
  - 易於閱讀和編輯
- ⚠️ **Excel / Word**
  - 不推薦，難以自動化處理

**為什麼推薦 YAML**：

- ✅ **結構化格式**
  - 易於 AI 解析和提取測試案例
- ✅ **版本控制友好**
  - Git diff 清晰，易於追蹤變更
- ✅ **自動化測試**
  - 可以自動轉換為測試腳本
- ✅ **易於整合**
  - 可以與 TDD 的 Test Scenarios 章節整合

**必備內容**：

| 項目 | 內容要求 | 範例 |
|------|---------|------|
| **測試案例 ID** | 唯一的測試案例識別碼 | `TC-001`、`TC-002` |
| **測試類型** | 測試類型分類 | Basic、Branch、Optional、Loop、Error、Recover、Edge Case |
| **測試場景** | 測試場景描述 | "用戶發表評論成功"、"用戶未登入時發表評論" |
| **前置條件** | 測試執行的前置條件 | "用戶已登入"、"用戶已有 nickname" |
| **測試步驟** | 詳細的測試步驟 | 1. 進入 Prematch Comment Page<br>2. 點擊輸入框<br>3. 輸入評論內容<br>4. 點擊送出 |
| **預期結果** | 預期的測試結果 | "評論出現在列表最上方"、"顯示 highlight 動畫" |
| **實際結果** | 實際的測試結果（測試執行後填寫） | （測試執行後填寫） |
| **測試狀態** | 測試執行狀態 | Pass、Fail、Blocked、Not Tested |
| **優先級** | 測試案例的優先級 | P0、P1、P2、P3 |
| **相關需求** | 對應的需求或功能點 | "PRD 功能規格 3.2 發表評論" |

**範例結構**：

```yaml
test_cases:
  - test_case_id: "TC-001"
    test_type: "Basic"
    test_scenario: "用戶發表評論成功"
    priority: "P0"
    prerequisites:
      - "用戶已登入"
      - "用戶已有 nickname"
    test_steps:
      - step: 1
        action: "進入 Prematch Comment Page"
        expected_result: "頁面正常顯示"
      - step: 2
        action: "點擊輸入框"
        expected_result: "鍵盤彈出"
      - step: 3
        action: "輸入評論內容"
        expected_result: "輸入框顯示文字"
      - step: 4
        action: "點擊送出按鈕"
        expected_result: "評論出現在列表最上方，並顯示 highlight 動畫"
    expected_result: "評論成功發表並顯示在列表中"
    related_requirement: "PRD 功能規格 3.2 發表評論"
  
  - test_case_id: "TC-002"
    test_type: "Error"
    test_scenario: "用戶未登入時發表評論"
    priority: "P0"
    prerequisites:
      - "用戶未登入"
    test_steps:
      - step: 1
        action: "進入 Prematch Comment Page"
        expected_result: "頁面正常顯示"
      - step: 2
        action: "點擊輸入框"
        expected_result: "跳轉到登入頁面"
    expected_result: "用戶被導向登入頁面"
    related_requirement: "PRD 業務規則：未登入用戶需先登入才能發表評論"
```

### 5.2 Test Data（測試資料）

**推薦文件格式**：

- ✅ **YAML**（推薦）
  - 結構化、易於管理
- ✅ **JSON**
  - 與 YAML 等價
- ⚠️ **Excel / CSV**
  - 不推薦，難以版本控制

**必備內容**：

- 測試用戶資料（不同角色、不同狀態）
- 測試環境配置
- Mock 資料（API 回應、WebSocket 訊息）
- 邊界值測試資料

**範例結構**：

```yaml
test_data:
  users:
    - user_id: "user_001"
      role: "normal_user"
      login_status: "logged_in"
      nickname: "TestUser1"
      metadata:
        has_nickname: true
    - user_id: "user_002"
      role: "normal_user"
      login_status: "not_logged_in"
      nickname: null
      metadata:
        has_nickname: false
  
  api_responses:
    - endpoint: "GET /chat/match/comment/popular"
      scenario: "success"
      response:
        comments:
          - id: "comment_1"
            content: "測試評論 1"
            authorId: "user_001"
            likeCount: 10
        nextCursor: "cursor_123"
    - endpoint: "GET /chat/match/comment/popular"
      scenario: "empty"
      response:
        comments: []
        nextCursor: null
```

### 5.3 Test Environment Setup（測試環境設定）

**推薦文件格式**：

- ✅ **Markdown**（推薦）
  - 易於閱讀和維護
- ✅ **YAML**
  - 結構化配置

**必備內容**：

- 測試環境 URL 和配置
- 測試帳號資訊
- 測試工具和框架設定
- 測試資料庫設定

### 5.4 Acceptance Criteria Review（驗收條件審查）

**推薦文件格式**：

- ✅ **Markdown**（推薦）
  - 易於與 PM PRD 對照
- ✅ **YAML**
  - 結構化格式

**必備內容**：

- 驗收條件清單（對應 PRD 中的驗收條件）
- 每個驗收條件的測試狀態
- 測試覆蓋率報告
- 未通過的驗收條件及原因

**範例結構**：

```markdown
# Acceptance Criteria Review

## Feature: PrematchComment

### 驗收條件 1：用戶可以成功發表評論
- **狀態**：✅ Pass
- **測試案例**：TC-001
- **備註**：功能正常

### 驗收條件 2：用戶可以點讚評論
- **狀態**：✅ Pass
- **測試案例**：TC-005
- **備註**：Optimistic UI 運作正常

### 驗收條件 3：用戶可以回覆評論
- **狀態**：⚠️ Blocked
- **測試案例**：TC-010
- **備註**：等待後端 API 完成
```

---

## 文件範本與檢查清單 {#文件範本與檢查清單}

### PM PRD 範本

```markdown
# {Feature名稱} PRD

## 1. 功能概述
- **目的**：[功能目的]
- **目標用戶**：[目標用戶]
- **使用情境**：[使用情境]

## 2. 使用者故事
- 作為 [角色]，我想要 [行為]，以便 [目標]

## 3. 功能規格
### 3.1 [功能點 1]
- [規格說明]

### 3.2 [功能點 2]
- [規格說明]

## 4. 使用者流程
1. [步驟 1]
2. [步驟 2]
3. [步驟 3]

## 5. 業務規則
- [規則 1]
- [規則 2]

## 6. 驗收條件
- [ ] [條件 1]
- [ ] [條件 2]

## 7. 優先級
P0 / P1 / P2 / P3
```

### BE API Spec 檢查清單

- [ ] 所有 API Endpoints 已定義
- [ ] HTTP Method 正確（GET / POST / PUT / DELETE）
- [ ] Request Parameters 完整（路徑參數、查詢參數、請求體）
- [ ] Request Body Schema 完整（JSON Schema）
- [ ] Response Schema 完整（JSON Schema）
- [ ] HTTP Status Codes 完整（200, 201, 400, 401, 500 等）
- [ ] 錯誤回應格式統一
- [ ] 認證方式說明清楚
- [ ] WebSocket 規格完整（如適用）
- [ ] Rate Limiting 說明（如適用）

### Designer UI/UX Spec 檢查清單

- [ ] 所有相關畫面設計稿完整
- [ ] 互動流程清晰
- [ ] 狀態定義完整（Loading、Empty、Error、Success）
- [ ] 元件規格清楚
- [ ] 動畫與過渡效果說明
- [ ] 響應式設計考慮
- [ ] 錯誤狀態設計完整

### Client Side RD Input 資料檢查清單

- [ ] `mermaid.md` 包含 `@feature` 和 `@flow` 標註
- [ ] `description.md` 包含流程概述、參與者說明、流程步驟
- [ ] `flow_spec.yaml` 包含完整的 Flow 資訊、API Endpoints、Scenarios
- [ ] Flow 關係正確（parent_flow_id）
- [ ] Package 類型標註正確（external/internal）

### QA Test Cases 檢查清單

- [ ] 所有測試案例都有唯一的 ID
- [ ] 測試類型分類正確（Basic、Branch、Optional、Loop、Error、Recover、Edge Case）
- [ ] 測試步驟清晰完整
- [ ] 預期結果明確
- [ ] 優先級已標註
- [ ] 相關需求已對應
- [ ] 測試資料完整
- [ ] 測試環境設定清楚

---

## 文件格式建議總結 {#文件格式建議總結}

### 推薦格式對照表

| 角色 | 推薦格式 | 替代格式 | 不推薦格式 |
|------|---------|---------|-----------|
| **PM** | **YAML** | Markdown | Word / PDF |
| **BE** | **OpenAPI 3.0 (YAML)** | OpenAPI 3.0 (JSON) | Markdown / Word |
| **Designer** | **YAML + Figma** | JSON + Figma / Markdown + Figma | 僅 Figma / Sketch |
| **QA** | **YAML** | Markdown | Excel / Word |

### 為什麼選擇結構化格式？

#### AI 解析效率

- 結構化格式（YAML/JSON）易於 AI 解析和提取資訊
- 非結構化格式（Word/PDF）需要額外的 OCR 或解析步驟

#### 版本控制

- YAML/JSON 可以完整追蹤變更（Git diff）
- Word/PDF 難以追蹤具體變更內容

#### 自動化處理

- 可以自動驗證格式和完整性
- 可以自動轉換為其他格式
- 可以自動生成文檔

#### 協作效率

- 結構化格式易於多人協作和審查
- 可以建立範本和檢查清單

---

## 文件格式轉換工具 {#文件格式轉換工具}

### PM PRD：Word/PDF → YAML

如果 PM 提供的是 Word 或 PDF 格式，可以使用以下方式轉換：

1. **手動轉換**：根據 YAML 範本手動填寫
2. **AI 輔助轉換**：使用 AI 工具將 Word/PDF 內容轉換為 YAML 格式
3. **建立轉換腳本**：開發自動化腳本（如需要）

### BE API Spec：Markdown → OpenAPI 3.0

如果 BE 提供的是 Markdown 格式的 API Spec，建議：

1. **要求 BE 提供 OpenAPI 3.0 格式**（最佳）
2. **手動轉換**：根據 OpenAPI 3.0 範本手動填寫
3. **使用工具**：使用 [Swagger Editor](https://editor.swagger.io/) 等工具協助轉換

### Designer UI/UX Spec：僅 Figma → YAML + Figma

如果 Designer 只提供 Figma 設計稿，建議：

1. **補充 YAML 規格**：根據 Figma 設計稿，填寫 YAML 規格文件
2. **AI 輔助提取**：使用 AI 工具從 Figma 設計稿中提取結構化資訊
3. **協作填寫**：與 Designer 協作，共同填寫 YAML 規格文件

---

## 快速參考 {#快速參考}

### 給 PM 的檢查清單

- [ ] PRD 包含功能概述、使用者故事、功能規格
- [ ] 使用者流程清晰完整
- [ ] 業務規則明確
- [ ] 驗收條件具體可測量
- [ ] 優先級已標註

### 給 BE 的檢查清單

- [ ] API Spec 格式標準（OpenAPI 3.0 最佳）
- [ ] 所有 Endpoints 已定義
- [ ] Request/Response Schema 完整
- [ ] 錯誤處理機制清楚
- [ ] WebSocket 規格完整（如適用）

### 給 Designer 的檢查清單

- [ ] 所有相關畫面設計稿完整
- [ ] 互動流程清晰
- [ ] 所有 UI 狀態已定義
- [ ] 動畫和過渡效果已說明
- [ ] 錯誤狀態設計完整

### 給 Client Side RD 的檢查清單

- [ ] 已閱讀並理解所有輸入文件（PRD、API Spec、UI/UX Spec）
- [ ] Input 資料完整（mermaid.md、description.md、flow_spec.yaml）
- [ ] Flow 關係正確（主流程和子流程）
- [ ] TDD 生成符合所有規範
- [ ] Ticket 生成完整且估時合理

### 給 QA 的檢查清單

- [ ] 測試案例涵蓋所有功能點
- [ ] 測試類型完整（Basic、Branch、Optional、Loop、Error、Recover、Edge Case）
- [ ] 測試步驟清晰可執行
- [ ] 預期結果明確
- [ ] 測試資料完整
- [ ] 測試環境設定清楚
- [ ] 驗收條件審查完成

---

## 關鍵成功因素 {#關鍵成功因素}

### 1. 文件完整性

**PM PRD 必須包含**：

- ✅ 完整的使用者故事
- ✅ 詳細的功能規格
- ✅ 清晰的業務規則
- ✅ 明確的驗收條件

**BE API Spec 必須包含**：

- ✅ 所有 API Endpoints 的完整定義
- ✅ Request/Response Schema
- ✅ 錯誤處理機制
- ✅ WebSocket 規格（如適用）

**Designer UI/UX Spec 必須包含**：

- ✅ 所有畫面的設計稿
- ✅ 完整的互動流程
- ✅ 所有 UI 狀態定義
- ✅ 動畫和過渡效果說明

**QA Test Cases 必須包含**：

- ✅ 完整的測試案例（涵蓋所有功能點）
- ✅ 測試資料和環境設定
- ✅ 驗收條件審查結果

### 2. 協作與溝通

- ✅ **定期同步**：Client Side RD 應與 PM、BE、Designer 定期同步，確保理解一致
- ✅ **及時澄清**：遇到不清楚的地方，應及時與相關角色確認
- ✅ **文件更新**：需求變更時，應及時更新所有相關文件

### 3. AI 輔助使用

- ✅ **規範遵循**：確保 AI 嚴格遵循 `TDD_rules/` 下的所有規範
- ✅ **迭代優化**：根據生成結果，持續優化提示詞和規範
- ✅ **人工審查**：AI 生成的內容必須經過人工審查，確保品質

---

## 附錄：文件範本下載

### PM PRD 範本
- ✅ [PRD_Template.yaml](../../templates/PRD_Template.yaml) - YAML 格式（推薦）
- [PRD_Template.md](../../templates/PRD_Template.md) - Markdown 格式（待建立）

### BE API Spec 範本
- ✅ **使用 OpenAPI 3.0 標準格式**（參考 [OpenAPI Specification](https://swagger.io/specification/)）
- 範例：參考 `Input/` 目錄下的 `flow_spec.yaml` 中的 `api_endpoints` 結構

### Designer UI/UX Spec 範本
- ✅ [UI_UX_Spec_Template.yaml](../../templates/UI_UX_Spec_Template.yaml) - YAML 格式（推薦）
- [UI_UX_Spec_Template.md](../../templates/UI_UX_Spec_Template.md) - Markdown 格式（待建立）

### Client Side RD Input 資料範本
- [mermaid_template.md](../../templates/mermaid_template.md)（待建立）
- [description_template.md](../../templates/description_template.md)（待建立）
- [flow_spec_template.yaml](../../templates/flow_spec_template.yaml)（待建立）

### QA Test Cases 範本
- [Test_Cases_Template.yaml](../../templates/Test_Cases_Template.yaml)（待建立）
- [Test_Data_Template.yaml](../../templates/Test_Data_Template.yaml)（待建立）

---

## 相關文件

- [TDD 生成工作流程](./01_TDD_生成工作流程.md)
- [TDD Input 資料處理規範](../TDD_rules/tdd_input_processing_rules.md)
- [TDD Ticket 生成與估時規範](../TDD_rules/tdd_ticket_generation_and_estimation.md)
- [TDD Domain, API, Test & TDD Structure](../TDD_rules/tdd_domain_api_test_and_structure.md)
- [TDD Sequence & Mermaid Rules](../TDD_rules/tdd_sequence_and_mermaid_rules.md)

---

**最後更新**：2024-11-21  
**版本**：1.0.0

