{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"LiveChat &amp; PrematchComment TDD","text":"<p>\u672c\u76ee\u9304\u5305\u542b LiveChat \u548c PrematchComment Feature \u7684\u5b8c\u6574 TDD\uff08Technical Design Document\uff09\u6587\u4ef6\u3002</p>"},{"location":"#_1","title":"\u672c\u5730\u9810\u89bd","text":"<p>\u4f7f\u7528 MkDocs \u672c\u5730\u9810\u89bd\uff1a</p> <pre><code># \u5b89\u88dd\u4f9d\u8cf4\npip install -r ../../requirements.txt\n\n# \u555f\u52d5\u672c\u5730\u4f3a\u670d\u5668\nmkdocs serve\n</code></pre> <p>\u7136\u5f8c\u5728\u700f\u89bd\u5668\u4e2d\u958b\u555f <code>http://127.0.0.1:8000</code> \u5373\u53ef\u9810\u89bd\u3002</p>"},{"location":"#_2","title":"\u90e8\u7f72","text":"<p>\u672c TDD \u6587\u4ef6\u4f7f\u7528 MkDocs \u751f\u6210\uff0c\u4e26\u53ef\u90e8\u7f72\u5230 GitHub Pages\u3002</p>"},{"location":"#_3","title":"\u81ea\u52d5\u90e8\u7f72","text":"<p>\u7576\u63a8\u9001\u5230 <code>main</code> \u5206\u652f\u6642\uff0cGitHub Actions \u6703\u81ea\u52d5\u90e8\u7f72\u5230 GitHub Pages\u3002</p>"},{"location":"#_4","title":"\u624b\u52d5\u90e8\u7f72","text":"<pre><code># \u5efa\u7f6e\u7db2\u7ad9\nmkdocs build\n\n# \u90e8\u7f72\u5230 GitHub Pages\nmkdocs gh-deploy\n</code></pre>"},{"location":"#_5","title":"\u6587\u4ef6\u7d50\u69cb","text":"<ul> <li><code>00_Overview/</code> - \u6574\u9ad4\u6982\u8ff0</li> <li><code>01_Integrated Service-Level Sequence Diagram/</code> - \u6574\u5408\u670d\u52d9\u5c64\u7d1a\u5e8f\u5217\u5716</li> <li><code>02_Architecture/</code> - \u67b6\u69cb\u5716</li> <li><code>03_Module Responsibility/</code> - \u6a21\u7d44\u8077\u8cac\u8aaa\u660e</li> <li><code>04_Domain Model/</code> - Domain Model \u5b9a\u7fa9</li> <li><code>05. Module Sequence Diagram\uff08\u6a21\u7d44\u5e8f\u5217\u5716\uff09/</code> - \u6a21\u7d44\u5e8f\u5217\u5716</li> <li><code>06_Feature State &amp; Action (TCA)/</code> - Feature State \u548c Action \u5b9a\u7fa9</li> <li><code>07_UseCase Input &amp; Output Model/</code> - UseCase Input/Output Model</li> <li><code>08_API Spec &amp; Mapping/</code> - API \u898f\u683c\u548c Mapping</li> <li><code>09_Error Handling/</code> - \u932f\u8aa4\u8655\u7406\u7b56\u7565</li> <li><code>10_Test Scenarios/</code> - \u6e2c\u8a66\u5834\u666f</li> <li><code>11_Risks &amp; Questions/</code> - \u98a8\u96aa\u548c\u554f\u984c</li> <li><code>12_Tickets/</code> - \u958b\u767c Tickets</li> <li><code>13_Implementation_Status/</code> - \u5be6\u4f5c\u72c0\u614b\u8ffd\u8e64\uff08\u78ba\u4fdd TDD \u8207 codebase \u540c\u6b65\uff09</li> <li><code>14_Changelog/</code> - \u8b8a\u66f4\u65e5\u8a8c\uff08\u8a18\u9304\u6bcf\u65e5 code change\uff09</li> <li><code>15_Daily_Logs/</code> - \u5de5\u4f5c\u65e5\u8a8c\uff08\u8a18\u9304\u6bcf\u65e5\u958b\u767c\u5de5\u4f5c\uff09</li> <li><code>16_Cursor_Workflow/</code> - Cursor \u5de5\u4f5c\u6d41\u7a0b\uff08\u8207 Cursor AI \u5354\u4f5c\u7684\u5b8c\u6574\u6d41\u7a0b\uff09</li> </ul>"},{"location":"#_6","title":"\u958b\u767c\u5de5\u4f5c\u6d41\u7a0b","text":"<p>\u70ba\u4e86\u78ba\u4fdd TDD \u8207 codebase \u4fdd\u6301\u540c\u6b65\uff0c\u5efa\u8b70\u4f7f\u7528\u4ee5\u4e0b\u5de5\u4f5c\u6d41\u7a0b\uff1a</p>"},{"location":"#1-13_implementation_status","title":"1. \u5be6\u4f5c\u72c0\u614b\u8ffd\u8e64 (<code>13_Implementation_Status/</code>)","text":"<ul> <li>\u8ffd\u8e64\u6bcf\u500b TDD Ticket \u7684\u5be6\u4f5c\u72c0\u614b</li> <li>\u8a18\u9304\u5be6\u4f5c\u6a94\u6848\u8def\u5f91\u548c\u5b8c\u6210\u65e5\u671f</li> <li>\u5b9a\u671f\u6aa2\u67e5\u5be6\u4f5c\u8207 TDD \u7684\u4e00\u81f4\u6027</li> </ul>"},{"location":"#2-14_changelog","title":"2. \u8b8a\u66f4\u65e5\u8a8c (<code>14_Changelog/</code>)","text":"<ul> <li>\u8a18\u9304\u6bcf\u65e5\u7684 code change \u548c\u65b0\u589e\u5167\u5bb9</li> <li>\u5c0d\u61c9\u5230\u76f8\u95dc\u7684 TDD ticket</li> <li>\u8ffd\u8e64 Bug \u4fee\u5fa9\u3001\u91cd\u69cb\u3001\u6587\u4ef6\u66f4\u65b0\u7b49</li> </ul>"},{"location":"#3-15_daily_logs","title":"3. \u5de5\u4f5c\u65e5\u8a8c (<code>15_Daily_Logs/</code>)","text":"<ul> <li>\u8a18\u9304\u6bcf\u65e5\u7684\u958b\u767c\u5de5\u4f5c</li> <li>\u5305\u542b\u8a08\u5283\u3001\u5b8c\u6210\u9805\u76ee\u3001\u9047\u5230\u7684\u554f\u984c\u3001\u5b78\u7fd2\u53cd\u601d\u7b49</li> <li>\u4f7f\u7528\u8173\u672c\u5feb\u901f\u5efa\u7acb\uff1a<code>./scripts/create_daily_log.sh [\u65e5\u671f]</code></li> </ul>"},{"location":"#4-cursor-16_cursor_workflow","title":"4. Cursor \u5de5\u4f5c\u6d41\u7a0b (<code>16_Cursor_Workflow/</code>)","text":"<ul> <li>\u6839\u64da\u65e5\u671f\u81ea\u52d5\u751f\u6210\u7576\u5929\u5de5\u4f5c\u8a08\u5283\uff08\u5305\u542b Jira parent/child tickets\uff09</li> <li>\u8a18\u9304\u8207 Cursor \u7684\u91cd\u8981\u5c0d\u8a71</li> <li>\u6bcf\u5929\u7d50\u675f\u6642\u7d71\u6574\u5de5\u4f5c\uff08\u5305\u542b\u8207 Cursor \u7684\u5c0d\u8a71\uff09</li> <li>\u8a73\u7d30\u5de5\u4f5c\u6d41\u7a0b\u8acb\u53c3\u8003\uff1a<code>16_Cursor_Workflow/WORKFLOW_GUIDE.md</code></li> </ul>"},{"location":"#cursor","title":"\u8207 Cursor \u5354\u4f5c","text":""},{"location":"#_7","title":"\u6bcf\u5929\u958b\u59cb\u6642","text":"<pre><code># \u751f\u6210\u4eca\u5929\u7684\u5de5\u4f5c\u8a08\u5283\uff08\u81ea\u52d5\u627e\u51fa\u5c0d\u61c9\u7684 Jira tickets\uff09\n./scripts/generate_daily_plan.sh\n\n# \u5efa\u7acb\u5de5\u4f5c\u65e5\u8a8c\n./scripts/create_daily_log.sh\n</code></pre> <p>\u7136\u5f8c\u8207 Cursor \u8aaa\uff1a <pre><code>\u6839\u64da\u4eca\u5929\u7684\u5de5\u4f5c\u8a08\u5283\uff0816_Cursor_Workflow/daily_plans/YYYY-MM-DD.md\uff09\uff0c\n\u8acb\u5354\u52a9\u6211\uff1a\n1. \u8b80\u53d6\u76f8\u95dc\u7684 TDD \u6587\u4ef6\n2. \u6aa2\u67e5\u73fe\u6709\u7684 codebase \u7d50\u69cb\n3. \u63d0\u4f9b\u5be6\u4f5c\u5efa\u8b70\u548c\u6ce8\u610f\u4e8b\u9805\n4. \u6aa2\u67e5\u4f9d\u8cf4\u95dc\u4fc2\u662f\u5426\u6eff\u8db3\n</code></pre></p>"},{"location":"#_8","title":"\u6bcf\u5929\u7d50\u675f\u6642","text":"<pre><code># \u7d71\u6574\u4eca\u5929\u7684\u5de5\u4f5c\uff08\u5305\u542b\u8207 Cursor \u7684\u5c0d\u8a71\uff09\n./scripts/summarize_daily_work.sh\n</code></pre> <p>\u7136\u5f8c\u8207 Cursor \u8aaa\uff1a <pre><code>\u8acb\u5e6b\u6211\u7d71\u6574\u4eca\u5929\u7684\u5de5\u4f5c\uff1a\n1. \u6839\u64da\u4eca\u5929\u7684 git commits \u751f\u6210\u8b8a\u66f4\u8a18\u9304\n2. \u66f4\u65b0 implementation_status.md\n3. \u66f4\u65b0 CHANGELOG.md\n4. \u6aa2\u67e5\u5be6\u4f5c\u8207 TDD \u7684\u4e00\u81f4\u6027\n5. \u7d71\u6574\u4eca\u5929\u8207\u4f60\u7684\u5c0d\u8a71\uff0c\u63d0\u53d6\u91cd\u8981\u6c7a\u7b56\u548c\u5b78\u7fd2\u8981\u9ede\n6. \u751f\u6210\u660e\u5929\u7684\u8a08\u5283\u5efa\u8b70\n</code></pre></p>"},{"location":"00_Agenda/","title":"\u6703\u8b70\u8b70\u7a0b","text":"<p>\u672c\u6587\u6a94\u8a18\u9304\u672c\u6b21\u6703\u8b70\u7684\u8a0e\u8ad6\u8b70\u7a0b\u3002</p>"},{"location":"00_Agenda/#_2","title":"\ud83d\udccb \u8b70\u7a0b\u5167\u5bb9","text":""},{"location":"00_Agenda/#1-feature-architecture-section","title":"1. \u8a0e\u8ad6 Feature \u7684 Architecture Section","text":"<p>\u8a0e\u8ad6\u91cd\u9ede\uff1a</p> <ul> <li>Clean Architecture \u5206\u5c64\u67b6\u69cb</li> <li>Feature \u67b6\u69cb\u5716</li> <li>Shared Modules \u67b6\u69cb</li> <li>External Package \u6574\u5408\u67b6\u69cb</li> </ul> <p>\u76f8\u95dc\u6587\u4ef6\uff1a</p> <ul> <li>Architecture Section</li> </ul>"},{"location":"00_Agenda/#2-feature-module-sequence-diagram-section","title":"2. \u8a0e\u8ad6 Feature \u7684 Module Sequence Diagram Section","text":"<p>\u8a0e\u8ad6\u91cd\u9ede\uff1a</p> <ul> <li>\u6a21\u7d44\u4e92\u52d5\u5e8f\u5217\u5716</li> <li>\u6309\u529f\u80fd\u5206\u985e\u7d44\u7e54\uff08Data Initialization\u3001Data Interaction\u3001Structural Navigation\uff09</li> </ul> <p>\u76f8\u95dc\u6587\u4ef6\uff1a</p> <ul> <li>Module Sequence Diagram Section - LiveChat</li> <li>Module Sequence Diagram Section - PrematchComment</li> </ul>"},{"location":"00_Agenda/#2-1-event-status","title":"2-1. \u7576 event status \u767c\u751f\u8b8a\u5316","text":"<p>\u8a0e\u8ad6\u91cd\u9ede\uff1a</p> <ul> <li>Event Status \u8a02\u95b1\u8207\u901a\u77e5\u6d41\u7a0b</li> <li>WebSocket \u8a02\u95b1\u6a5f\u5236</li> <li>\u8de8 Package \u901a\u8a0a</li> </ul> <p>\u76f8\u95dc\u6587\u4ef6\uff1a</p> <ul> <li>Event Status \u8a02\u95b1\u8207\u901a\u77e5\u6d41\u7a0b</li> </ul>"},{"location":"00_Agenda/#2-2-nickname-avatar-user-profile-page","title":"2-2. \u78ba\u8a8d\u7528\u6236\u662f\u5426\u767b\u5165\u3001\u7528\u6236\u5275\u5efa nickName\u3001\u7528\u6236\u9ede\u64ca avatar \u5f8c\u8df3\u8f49\u5230 User Profile Page","text":"<p>\u8a0e\u8ad6\u91cd\u9ede\uff1a</p> <ul> <li>\u767b\u5165\u6aa2\u67e5\u6d41\u7a0b</li> <li>Nickname \u5efa\u7acb\u6d41\u7a0b</li> <li>\u7528\u6236\u982d\u50cf\u9ede\u64ca\u8df3\u8f49\u6d41\u7a0b</li> </ul> <p>\u76f8\u95dc\u6587\u4ef6\uff1a</p> <ul> <li>\u804a\u5929\u5ba4\u8a0a\u606f\u50b3\u905e\u8207\u6efe\u52d5\u52a0\u8f09\uff08\u767b\u5165\u8207 nickname \u6aa2\u67e5\uff09</li> <li>\u8df3\u8f49\u500b\u4eba\u4e3b\u9801\u6d41\u7a0b - LiveChat</li> <li>\u8df3\u8f49\u500b\u4eba\u4e3b\u9801\u6d41\u7a0b - PrematchComment</li> </ul>"},{"location":"00_Agenda/#2-3-in-site-message-match-detail-page-prematch-comment-page","title":"2-3. \u7528\u6236\u5f9e In-Site Message \u8df3\u8f49\u5230 Match Detail Page \u5f8c\u958b\u555f Prematch Comment Page","text":"<p>\u8a0e\u8ad6\u91cd\u9ede\uff1a</p> <ul> <li>In-Site Message \u8df3\u8f49\u6d41\u7a0b</li> <li>Prematch Comment Page \u521d\u59cb\u5316\u6d41\u7a0b</li> </ul> <p>\u76f8\u95dc\u6587\u4ef6\uff1a</p> <ul> <li>User \u5f9e In-Site message \u8df3\u8f49\u5230 Prematch Comment Page</li> </ul>"},{"location":"00_Agenda/#3-tdd","title":"3. \u5feb\u901f\u4ecb\u7d39 TDD \u751f\u6210\u7684\u5de5\u4f5c\u6d41\u7a0b","text":"<p>\u4ecb\u7d39\u91cd\u9ede\uff1a</p> <ul> <li>\u5b8c\u6574\u6d41\u7a0b\u7e3d\u89bd\uff08\u968e\u6bb5 0-5\uff09</li> <li>Client Side RD \u5de5\u4f5c\u6d41\u7a0b</li> <li>AI \u81ea\u52d5\u5316\u751f\u6210\u6d41\u7a0b</li> <li>\u7e3d\u4f30\u6642\u7e3d\u7d50</li> </ul> <p>\u76f8\u95dc\u6587\u4ef6\uff1a</p> <ul> <li>TDD \u751f\u6210\u5de5\u4f5c\u6d41\u7a0b</li> </ul>"},{"location":"00_Agenda/#4","title":"4. \u5feb\u901f\u4ecb\u7d39\u5404\u89d2\u8272\u6587\u4ef6\u898f\u7bc4","text":"<p>\u4ecb\u7d39\u91cd\u9ede\uff1a</p> <ul> <li>PM\uff08Product Manager\uff09\u9700\u63d0\u4f9b\u7684\u6587\u4ef6</li> <li>BE\uff08Backend Engineer\uff09\u9700\u63d0\u4f9b\u7684\u6587\u4ef6</li> <li>Designer\uff08UI/UX Designer\uff09\u9700\u63d0\u4f9b\u7684\u6587\u4ef6</li> <li>Client Side RD \u9700\u63d0\u4f9b\u7684\u6587\u4ef6</li> <li>\u6587\u4ef6\u7bc4\u672c\u8207\u6aa2\u67e5\u6e05\u55ae</li> </ul> <p>\u76f8\u95dc\u6587\u4ef6\uff1a</p> <ul> <li>\u5404\u89d2\u8272\u6587\u4ef6\u898f\u7bc4</li> </ul>"},{"location":"00_Agenda/#_3","title":"\ud83d\udcdd \u6703\u8b70\u8a18\u9304","text":"<p>\uff08\u6703\u8b70\u8a18\u9304\u5c07\u5728\u6b64\u8655\u586b\u5beb\uff09</p> <p>\u6703\u8b70\u65e5\u671f\uff1a2024-11-21 \u6700\u5f8c\u66f4\u65b0\uff1a2024-11-21</p>"},{"location":"00_Overview/","title":"Overview \u7ae0\u7bc0\u8aaa\u660e","text":"<p>\u672c\u76ee\u9304\u5305\u542b TDD \u6587\u4ef6\u7684 Overview \u7ae0\u7bc0\uff0c\u63d0\u4f9b\u6574\u9ad4 Feature \u7d44\u5408\u7684\u63cf\u8ff0\u548c\u8aaa\u660e\u3002</p>"},{"location":"00_Overview/#_1","title":"\u6587\u4ef6\u5217\u8868","text":"<ul> <li><code>01_overview.md</code> - \u6574\u9ad4 Feature \u7d44\u5408\u6982\u8ff0</li> </ul>"},{"location":"00_Overview/#_2","title":"\u8cc7\u6599\u4f86\u6e90","text":"<p>\u672c TDD \u6587\u4ef6\u57fa\u65bc\u4ee5\u4e0b Input \u8cc7\u6599\u751f\u6210\uff1a</p> <ul> <li>Input \u8def\u5f91: <code>Input/LiveChat&amp;PrematchComment/</code></li> <li>Feature \u5217\u8868:</li> <li>LiveChat: 4 \u500b\u6d41\u7a0b<ul> <li>LC-FULL-001: \u7528\u6236\u9032\u5165\u8207\u96e2\u958b\u804a\u5929\u5ba4\uff08\u542b WebSocket \u76f8\u4f9d\uff09</li> <li>LC-SUB-001: \u7528\u6236\u7559 comment \u6642\u767b\u5165\u8207 nickname \u6aa2\u67e5</li> <li>LC-SUB-002: \u7528\u6236\u9ede\u64ca avatar \u8207\u5c01\u9396\u5176\u4ed6 user \u908f\u8f2f</li> <li>LC-SUB-003: \u804a\u5929\u5ba4\u8a0a\u606f\u50b3\u905e\u8207\u6efe\u52d5\u52a0\u8f09</li> </ul> </li> <li>PrematchComment: 7 \u500b\u6d41\u7a0b<ul> <li>PC-FULL-001: \u7528\u6236\u9032\u5165 Upcoming Race Page, Prematch Comment Page \u8207 Top</li> <li>PC-SUB-001: Event Status \u8a02\u95b1\u8207\u901a\u77e5\u6d41\u7a0b</li> <li>PC-SUB-002: \u7528\u6236\u767c Comment - Reply\uff08\u542b\u767b\u5165\u8207 nickname \u6aa2\u67e5\uff09</li> <li>PC-SUB-003: \u7528\u6236\u67e5\u770b replies\uff08\u542b\u5206\u9801\u8f09\u5165\uff09</li> <li>PC-SUB-004: \u7528\u6236\u9ede\u64ca Like\uff08\u542b\u767b\u5165\u6aa2\u67e5\uff09</li> <li>PC-SUB-005: \u7528\u6236\u9ede\u64ca\u7528\u6236\u540d\u7a31 \u2192 \u8df3\u8f49\u500b\u4eba\u4e3b\u9801</li> <li>PC-SUB-006: User \u5f9e In-Site message \u8df3\u8f49\u5230 Prematch Comment Page\uff08\u5f85\u78ba\u8a8d\uff09</li> </ul> </li> </ul>"},{"location":"00_Overview/01_overview/","title":"LiveChat &amp; PrematchComment Feature \u7d44\u5408\u6982\u8ff0","text":""},{"location":"00_Overview/01_overview/#_1","title":"\u529f\u80fd\u63cf\u8ff0","text":"<p>\u672c Feature \u7d44\u5408\u5305\u542b\u5169\u500b\u4e3b\u8981\u529f\u80fd\u6a21\u7d44\uff1a</p> <ol> <li>LiveChat\uff08\u5373\u6642\u804a\u5929\u5ba4\uff09\uff1a\u63d0\u4f9b\u8cfd\u4e8b\u9032\u884c\u4e2d\u7684\u5373\u6642\u804a\u5929\u529f\u80fd</li> <li>PrematchComment\uff08\u8cfd\u524d\u7559\u8a00\uff09\uff1a\u63d0\u4f9b\u8cfd\u4e8b\u958b\u59cb\u524d\u7684\u7559\u8a00\u8a0e\u8ad6\u529f\u80fd</li> </ol>"},{"location":"00_Overview/01_overview/#_2","title":"\u4e3b\u8981\u4f7f\u7528\u8005\u4e92\u52d5","text":""},{"location":"00_Overview/01_overview/#livechat","title":"LiveChat \u529f\u80fd","text":"<ol> <li>\u9032\u5165\u8207\u96e2\u958b\u804a\u5929\u5ba4</li> <li>\u7528\u6236\u9032\u5165 Live Detail Page \u6642\u81ea\u52d5\u5efa\u7acb WebSocket \u9023\u7dda</li> <li>\u53d6\u5f97\u804a\u5929\u5ba4 ID \u8207\u6700\u5f8c\u8a0a\u606f\u7de8\u865f</li> <li>\u52a0\u5165\u804a\u5929\u5ba4\u4e26\u8f09\u5165\u6b77\u53f2\u8a0a\u606f</li> <li> <p>\u96e2\u958b\u804a\u5929\u5ba4\u6642\u6e05\u9664\u5feb\u53d6\u4e26\u53d6\u6d88 WebSocket \u8a02\u95b1</p> </li> <li> <p>\u767c\u9001\u804a\u5929\u8a0a\u606f</p> </li> <li>\u767b\u5165\u6aa2\u67e5</li> <li>Nickname \u6aa2\u67e5\u8207\u5efa\u7acb</li> <li> <p>\u767c\u9001\u8a0a\u606f\u4e26\u986f\u793a\u5728\u804a\u5929\u5ba4\u4e2d</p> </li> <li> <p>\u7528\u6236\u4e92\u52d5</p> </li> <li>\u9ede\u64ca\u7528\u6236\u540d\u7a31\u986f\u793a\u64cd\u4f5c\u9078\u55ae</li> <li>\u8df3\u8f49\u500b\u4eba\u4e3b\u9801</li> <li> <p>\u5c01\u9396\u5176\u4ed6\u7528\u6236\uff08\u542b\u9ed1\u540d\u55ae\u7ba1\u7406\uff09</p> </li> <li> <p>\u8a0a\u606f\u50b3\u905e\u8207\u6efe\u52d5\u52a0\u8f09</p> </li> <li>WebSocket \u5373\u6642\u63a5\u6536\u8a0a\u606f</li> <li>\u6b77\u53f2\u8a0a\u606f\u8207\u5373\u6642\u8a0a\u606f\u5408\u4f75\u986f\u793a</li> <li>\u5206\u9801\u8f09\u5165\u820a\u8a0a\u606f</li> </ol>"},{"location":"00_Overview/01_overview/#prematchcomment","title":"PrematchComment \u529f\u80fd","text":"<ol> <li>\u9032\u5165\u9801\u9762\u8207\u8f09\u5165\u7559\u8a00</li> <li>\u9032\u5165 Race Detail Page \u6642\u53d6\u5f97\u500b\u4eba\u8cc7\u8a0a</li> <li>\u53d6\u5f97\u8cfd\u4e8b\u7559\u8a00\u7d71\u8a08\u8cc7\u8a0a</li> <li>\u9032\u5165 Prematch Comment Page \u6642\u9810\u8a2d\u986f\u793a Top \u6a19\u7c64\uff08\u6309\u8b9a\u6578\u6392\u5e8f\uff09</li> <li>\u652f\u63f4\u5207\u63db Top / Newest \u6a19\u7c64</li> <li> <p>\u624b\u52d5\u5237\u65b0\u7559\u8a00\u5217\u8868</p> </li> <li> <p>Event Status \u8a02\u95b1\u8207\u901a\u77e5</p> </li> <li>FactsCenter Package\uff08\u5916\u90e8\uff09\u8a02\u95b1 Event Status</li> <li> <p>\u7576 Event Status \u8b8a\u66f4\u70ba match_started \u6642\u81ea\u52d5\u95dc\u9589 Prematch Comment Page</p> </li> <li> <p>\u767c\u9001\u7559\u8a00\u8207\u56de\u8986</p> </li> <li>\u767b\u5165\u6aa2\u67e5</li> <li>Nickname \u6aa2\u67e5\u8207\u5efa\u7acb</li> <li> <p>\u767c\u9001\u7559\u8a00\u6216\u56de\u8986</p> </li> <li> <p>\u67e5\u770b\u56de\u8986</p> </li> <li>\u9ede\u64ca\u56de\u8986\u6578\u91cf\u8f09\u5165\u56de\u8986\u5217\u8868</li> <li>\u5206\u9801\u8f09\u5165\u56de\u8986\uff08\u6bcf\u6b21\u6700\u591a 5 \u7b46\uff09</li> <li> <p>\u986f\u793a\u300cShow more replies\u300d\u6309\u9215</p> </li> <li> <p>\u4e92\u52d5\u529f\u80fd</p> </li> <li>\u9ede\u64ca Like \u6309\u9215\uff08\u542b\u767b\u5165\u6aa2\u67e5\uff09</li> <li>Optimistic UI \u66f4\u65b0</li> <li>\u9ede\u64ca\u7528\u6236\u540d\u7a31\u8df3\u8f49\u500b\u4eba\u4e3b\u9801</li> </ol>"},{"location":"00_Overview/01_overview/#scope","title":"Scope","text":""},{"location":"00_Overview/01_overview/#_3","title":"\u5305\u542b\u7684\u529f\u80fd","text":"<ul> <li>\u2705 \u5373\u6642\u804a\u5929\u5ba4\u529f\u80fd\uff08WebSocket\uff09</li> <li>\u2705 \u8cfd\u524d\u7559\u8a00\u529f\u80fd\uff08HTTP API\uff09</li> <li>\u2705 \u767b\u5165\u8207 Nickname \u6aa2\u67e5\u6d41\u7a0b</li> <li>\u2705 \u7528\u6236\u4e92\u52d5\u529f\u80fd\uff08\u500b\u4eba\u4e3b\u9801\u8df3\u8f49\u3001\u5c01\u9396\u7528\u6236\uff09</li> <li>\u2705 Event Status \u8a02\u95b1\u8207\u901a\u77e5</li> <li>\u2705 \u5206\u9801\u8f09\u5165\u6a5f\u5236</li> <li>\u2705 \u9ed1\u540d\u55ae\u7ba1\u7406\uff084 \u5c0f\u6642\u81ea\u52d5\u6e05\u7406\uff09</li> </ul>"},{"location":"00_Overview/01_overview/#_4","title":"\u4e0d\u5305\u542b\u7684\u529f\u80fd","text":"<ul> <li>\u274c \u500b\u4eba\u4e3b\u9801\u7684\u8a73\u7d30\u5be6\u4f5c\uff08\u7531 PersonalPage Package \u8ca0\u8cac\uff09</li> <li>\u274c Nickname \u5efa\u7acb\u7684\u8a73\u7d30\u5be6\u4f5c\uff08\u7531 FComSharedFlow Package \u8ca0\u8cac\uff09</li> <li>\u274c Event Status \u8a02\u95b1\u7684\u8a73\u7d30\u5be6\u4f5c\uff08\u7531 FactsCenter Package \u8ca0\u8cac\uff09</li> <li>\u274c \u767b\u5165\u6d41\u7a0b\u7684\u8a73\u7d30\u5be6\u4f5c\uff08\u7531 PersonalPage Package \u8ca0\u8cac\uff09</li> </ul>"},{"location":"00_Overview/01_overview/#_5","title":"\u6280\u8853\u67b6\u69cb","text":""},{"location":"00_Overview/01_overview/#_6","title":"\u5206\u5c64\u67b6\u69cb","text":"<p>\u672c Feature \u7d44\u5408\u9075\u5faa Clean Architecture \u5206\u5c64\uff1a</p> <ol> <li>UI Layer\uff1aView \u5c64\uff0c\u8ca0\u8cac\u4f7f\u7528\u8005\u4ecb\u9762</li> <li>Domain Layer\uff1aFeature + UseCase \u5c64\uff0c\u8ca0\u8cac\u696d\u52d9\u908f\u8f2f</li> <li>Data &amp; Infrastructure Layer\uff1aRepository + Client + API \u5c64\uff0c\u8ca0\u8cac\u8cc7\u6599\u5b58\u53d6</li> <li>Domain Model Layer\uff1aEntity + Value Object \u5c64\uff0c\u7d14\u8cc7\u6599\u6a21\u578b</li> </ol>"},{"location":"00_Overview/01_overview/#_7","title":"\u5916\u90e8\u4f9d\u8cf4","text":"<ul> <li>FactsCenter Package\uff08External\uff09\uff1aEvent Status \u8a02\u95b1\u8207\u901a\u77e5</li> <li>PersonalPage Package\uff08External\uff09\uff1a\u767b\u5165\u6d41\u7a0b</li> <li>FComSharedFlow Package\uff08External\uff09\uff1aNickname \u5efa\u7acb\u6d41\u7a0b</li> <li>Main App\uff1a\u8def\u7531\u8df3\u8f49\u3001\u767b\u5165\u72c0\u614b\u6aa2\u67e5\u3001Nickname \u6aa2\u67e5</li> </ul>"},{"location":"00_Overview/01_overview/#_8","title":"\u6280\u8853\u7279\u9ede","text":"<ul> <li>WebSocket\uff1a\u5373\u6642\u804a\u5929\u8a0a\u606f\u50b3\u905e</li> <li>HTTP API\uff1a\u7559\u8a00\u3001\u56de\u8986\u3001Like \u7b49\u64cd\u4f5c</li> <li>Optimistic UI\uff1aLike \u529f\u80fd\u4f7f\u7528 Optimistic UI \u63d0\u4f9b\u5373\u6642\u56de\u994b</li> <li>\u5206\u9801\u8f09\u5165\uff1a\u56de\u8986\u5217\u8868\u4f7f\u7528\u6e38\u6a19\uff08cursor\uff09\u6a5f\u5236\u5206\u9801\u8f09\u5165</li> <li>\u9ed1\u540d\u55ae\u7ba1\u7406\uff1a\u672c\u5730\u5132\u5b58\uff0c4 \u5c0f\u6642\u81ea\u52d5\u6e05\u7406</li> </ul>"},{"location":"00_Overview/01_overview/#_9","title":"\u4e3b\u8981\u6d41\u7a0b","text":""},{"location":"00_Overview/01_overview/#livechat_1","title":"LiveChat \u4e3b\u6d41\u7a0b","text":"<ul> <li>LC-FULL-001\uff1a\u7528\u6236\u9032\u5165\u8207\u96e2\u958b\u804a\u5929\u5ba4\uff08\u542b WebSocket \u76f8\u4f9d\uff09</li> <li>LC-SUB-001\uff1a\u7528\u6236\u7559 comment \u6642\u767b\u5165\u8207 nickname \u6aa2\u67e5</li> <li>LC-SUB-002\uff1a\u7528\u6236\u9ede\u64ca avatar \u8207\u5c01\u9396\u5176\u4ed6 user \u908f\u8f2f</li> <li>LC-SUB-003\uff1a\u804a\u5929\u5ba4\u8a0a\u606f\u50b3\u905e\u8207\u6efe\u52d5\u52a0\u8f09</li> </ul>"},{"location":"00_Overview/01_overview/#prematchcomment_1","title":"PrematchComment \u4e3b\u6d41\u7a0b","text":"<ul> <li>PC-FULL-001\uff1a\u7528\u6236\u9032\u5165 Upcoming Race Page, Prematch Comment Page \u8207 Top</li> <li>PC-SUB-001\uff1aEvent Status \u8a02\u95b1\u8207\u901a\u77e5\u6d41\u7a0b</li> <li>PC-SUB-002\uff1a\u7528\u6236\u767c Comment - Reply\uff08\u542b\u767b\u5165\u8207 nickname \u6aa2\u67e5\uff09</li> <li>PC-SUB-003\uff1a\u7528\u6236\u67e5\u770b replies\uff08\u542b\u5206\u9801\u8f09\u5165\uff09</li> <li>PC-SUB-004\uff1a\u7528\u6236\u9ede\u64ca Like\uff08\u542b\u767b\u5165\u6aa2\u67e5\uff09</li> <li>PC-SUB-005\uff1a\u7528\u6236\u9ede\u64ca\u7528\u6236\u540d\u7a31 \u2192 \u8df3\u8f49\u500b\u4eba\u4e3b\u9801</li> </ul>"},{"location":"00_Overview/01_overview/#_10","title":"\u76ee\u6a19","text":"<p>\u63d0\u4f9b\u5b8c\u6574\u7684\u8cfd\u4e8b\u804a\u5929\u8207\u7559\u8a00\u529f\u80fd\uff0c\u652f\u63f4\uff1a</p> <ol> <li>\u5373\u6642\u4e92\u52d5\uff1a\u900f\u904e WebSocket \u63d0\u4f9b\u5373\u6642\u804a\u5929\u9ad4\u9a57</li> <li>\u7559\u8a00\u8a0e\u8ad6\uff1a\u652f\u63f4\u7559\u8a00\u3001\u56de\u8986\u3001Like \u7b49\u4e92\u52d5\u529f\u80fd</li> <li>\u7528\u6236\u7ba1\u7406\uff1a\u767b\u5165\u6aa2\u67e5\u3001Nickname \u7ba1\u7406\u3001\u9ed1\u540d\u55ae\u529f\u80fd</li> <li>\u72c0\u614b\u540c\u6b65\uff1aEvent Status \u8b8a\u66f4\u6642\u81ea\u52d5\u8655\u7406\u9801\u9762\u72c0\u614b</li> </ol>"},{"location":"01_Integrated%20Service-Level%20Sequence%20Diagram/","title":"Integrated Service-Level Sequence Diagram \u7ae0\u7bc0\u8aaa\u660e","text":"<p>\u672c\u76ee\u9304\u5305\u542b TDD \u6587\u4ef6\u7684 Integrated Service-Level Sequence Diagram\uff08ISSD\uff09\u7ae0\u7bc0\uff0c\u63d0\u4f9b\u8de8\u5834\u666f\u3001\u8de8 Feature\u3001\u8de8 UseCase \u7684\u6574\u5408\u5e8f\u5217\u5716\u3002</p>"},{"location":"01_Integrated%20Service-Level%20Sequence%20Diagram/#_1","title":"\u6587\u4ef6\u5217\u8868","text":"<ul> <li><code>01_full_integration_flow.md</code> - \u5b8c\u6574\u6574\u5408\u6d41\u7a0b\u5e8f\u5217\u5716</li> </ul>"},{"location":"01_Integrated%20Service-Level%20Sequence%20Diagram/#_2","title":"\u8aaa\u660e","text":"<p>Integrated Service-Level Sequence Diagram \u7528\u65bc\u5448\u73fe\u6574\u9ad4\u7cfb\u7d71\u7684 high-level \u5354\u4f5c\uff0c\u986f\u793a\uff1a</p> <ul> <li>Shared Modules\uff08AuthFeature\u3001NicknameFeature\u3001UserInfoRepository \u7b49\uff09</li> <li>Repository\u3001Client\u3001API \u5982\u4f55\u5171\u540c\u904b\u4f5c</li> <li>\u8de8 Feature \u7684\u4e92\u52d5\u6d41\u7a0b</li> <li>\u5916\u90e8 Package \u7684\u6574\u5408\u65b9\u5f0f</li> </ul>"},{"location":"01_Integrated%20Service-Level%20Sequence%20Diagram/01_full_integration_flow/","title":"\u5b8c\u6574\u6574\u5408\u6d41\u7a0b\u5e8f\u5217\u5716","text":""},{"location":"01_Integrated%20Service-Level%20Sequence%20Diagram/01_full_integration_flow/#_2","title":"\u8aaa\u660e","text":"<p>\u672c\u5e8f\u5217\u5716\u5c55\u793a LiveChat \u548c PrematchComment \u5169\u500b Feature \u7684\u6574\u5408\u6d41\u7a0b\uff0c\u5305\u62ec\uff1a</p> <ol> <li>\u7528\u6236\u9032\u5165\u9801\u9762\u6642\u7684\u521d\u59cb\u5316\u6d41\u7a0b</li> <li>\u767b\u5165\u8207 Nickname \u6aa2\u67e5\u6d41\u7a0b</li> <li>\u7559\u8a00/\u804a\u5929\u8a0a\u606f\u7684\u767c\u9001\u6d41\u7a0b</li> <li>Event Status \u8a02\u95b1\u8207\u901a\u77e5\u6d41\u7a0b</li> <li>\u7528\u6236\u4e92\u52d5\u6d41\u7a0b\uff08Like\u3001\u5c01\u9396\u3001\u8df3\u8f49\u500b\u4eba\u4e3b\u9801\uff09</li> </ol>"},{"location":"01_Integrated%20Service-Level%20Sequence%20Diagram/01_full_integration_flow/#_3","title":"\u6574\u5408\u5e8f\u5217\u5716","text":"<pre><code>sequenceDiagram\n    autonumber\n    actor User\n    box rgb(207,232,255) UI Layer\n        participant RaceDetailView\n        participant PrematchCommentView\n        participant LiveDetailView\n    end\n    box rgb(255,250,205) Domain Layer\n        participant PrematchCommentFeature\n        participant LiveChatFeature\n        participant ReloadCommentListUseCase\n        participant PublishCommentUseCase\n        participant SendChatMessageUseCase\n        participant ToggleLikeUseCase\n        participant LoadRepliesUseCase\n    end\n    box rgb(240,240,240) Data &amp; Infrastructure Layer\n        participant PrematchCommentRepository\n        participant LiveChatRepository\n        participant PrematchCommentClient\n        participant LiveChatClient\n        participant ChatWebSocketClient\n        participant PrematchCommentAPI\n        participant ChatAPI\n    end\n    participant FactsCenterPackage as FactsCenter Package (External)\n    participant PersonalPagePackage as PersonalPage Package (External)\n    participant FComSharedFlowPackage as FComSharedFlow Package (External)\n    participant Server\n\n    Note over User,RaceDetailView: \u7528\u6236\u9032\u5165 Race Detail Page\n    User-&gt;&gt;RaceDetailView: \u9032\u5165 Race Detail Page\n    RaceDetailView-&gt;&gt;PrematchCommentFeature: onAppear\n    PrematchCommentFeature-&gt;&gt;ReloadCommentListUseCase: execute(triggerType: .init)\n    ReloadCommentListUseCase-&gt;&gt;PrematchCommentRepository: getUserInfo()\n    PrematchCommentRepository-&gt;&gt;PrematchCommentClient: getUserInfo()\n    PrematchCommentClient-&gt;&gt;PrematchCommentAPI: GET /{TBD \u500b\u4eba\u8cc7\u8a0a API}\n    PrematchCommentAPI-&gt;&gt;Server: GET /{TBD \u500b\u4eba\u8cc7\u8a0a API}\n    Server--&gt;&gt;PrematchCommentAPI: userInfo\n    PrematchCommentAPI--&gt;&gt;PrematchCommentClient: userInfo DTO\n    PrematchCommentClient--&gt;&gt;PrematchCommentRepository: userInfo DTO\n    PrematchCommentRepository--&gt;&gt;ReloadCommentListUseCase: UserInfo Entity\n    ReloadCommentListUseCase-&gt;&gt;PrematchCommentRepository: getCommentMeta(refId: String)\n    PrematchCommentRepository-&gt;&gt;PrematchCommentClient: getCommentMeta(refId: String)\n    PrematchCommentClient-&gt;&gt;PrematchCommentAPI: GET /chat/match/comment/info/{refId}\n    PrematchCommentAPI-&gt;&gt;Server: GET /chat/match/comment/info/{refId}\n    Server--&gt;&gt;PrematchCommentAPI: { commentCount, betCount }\n    PrematchCommentAPI--&gt;&gt;PrematchCommentClient: CommentMeta DTO\n    PrematchCommentClient--&gt;&gt;PrematchCommentRepository: CommentMeta DTO\n    PrematchCommentRepository--&gt;&gt;ReloadCommentListUseCase: CommentMeta Entity\n    ReloadCommentListUseCase--&gt;&gt;PrematchCommentFeature: Output(comments: [], meta: CommentMeta)\n    PrematchCommentFeature--&gt;&gt;RaceDetailView: \u66f4\u65b0 State\n\n    Note over User,PrematchCommentView: \u7528\u6236\u9032\u5165 Prematch Comment Page\n    User-&gt;&gt;PrematchCommentView: \u9032\u5165 Prematch Comment Page\n    PrematchCommentView-&gt;&gt;PrematchCommentFeature: onAppear\n    PrematchCommentFeature-&gt;&gt;ReloadCommentListUseCase: execute(triggerType: .init, mode: .top)\n    ReloadCommentListUseCase-&gt;&gt;PrematchCommentRepository: getComments(refId: String, mode: .top)\n    PrematchCommentRepository-&gt;&gt;PrematchCommentClient: getComments(refId: String, mode: .top)\n    PrematchCommentClient-&gt;&gt;PrematchCommentAPI: GET /chat/match/comment/popular\n    PrematchCommentAPI-&gt;&gt;Server: GET /chat/match/comment/popular\n    Server--&gt;&gt;PrematchCommentAPI: comments (sorted by like)\n    PrematchCommentAPI--&gt;&gt;PrematchCommentClient: [Comment] DTO\n    PrematchCommentClient--&gt;&gt;PrematchCommentRepository: [Comment] DTO\n    PrematchCommentRepository--&gt;&gt;ReloadCommentListUseCase: [Comment] Entity\n    ReloadCommentListUseCase--&gt;&gt;PrematchCommentFeature: Output(comments: [Comment])\n    PrematchCommentFeature--&gt;&gt;PrematchCommentView: \u66f4\u65b0 State\n\n    Note over FactsCenterPackage,Server: Event Status \u8a02\u95b1\uff08\u5728\u9032\u5165 Race Detail Page \u6642\uff09\n    FactsCenterPackage-&gt;&gt;Server: WebSocket \u8a02\u95b1 Event Status\n    Note over FactsCenterPackage: \u5916\u90e8 Package\uff0c\u5167\u90e8\u5be6\u4f5c\u4e0d\u5728\u6b64 TDD \u7bc4\u570d\u5167\n\n    Note over User,PrematchCommentView: \u7528\u6236\u767c\u9001\u7559\u8a00\n    User-&gt;&gt;PrematchCommentView: \u9ede\u64ca\u8f38\u5165\u6846\n    PrematchCommentView-&gt;&gt;PrematchCommentFeature: tapInputField\n    PrematchCommentFeature-&gt;&gt;PrematchCommentFeature: \u6aa2\u67e5\u767b\u5165\u72c0\u614b\uff08\u900f\u904e Main App\uff09\n    alt \u672a\u767b\u5165\n        PrematchCommentFeature-&gt;&gt;PersonalPagePackage: route(to: .personalPage)\n        PersonalPagePackage-&gt;&gt;PersonalPagePackage: \u5b8c\u6210\u767b\u5165\u6d41\u7a0b\n        PersonalPagePackage--&gt;&gt;PrematchCommentFeature: \u767b\u5165\u6210\u529f\n    end\n    User-&gt;&gt;PrematchCommentView: \u8f38\u5165\u4e26\u9001\u51fa Comment\n    PrematchCommentView-&gt;&gt;PrematchCommentFeature: publishComment(content: String)\n    PrematchCommentFeature-&gt;&gt;PublishCommentUseCase: execute(input: PublishCommentInput)\n    PublishCommentUseCase-&gt;&gt;PublishCommentUseCase: \u6aa2\u67e5 nickname\uff08\u900f\u904e Main App\uff09\n    alt nickname \u4e0d\u5b58\u5728\n        PublishCommentUseCase-&gt;&gt;FComSharedFlowPackage: CreatNickName API\n        FComSharedFlowPackage-&gt;&gt;FComSharedFlowPackage: \u5efa\u7acb nickname\n        FComSharedFlowPackage--&gt;&gt;PublishCommentUseCase: nickname \u5efa\u7acb\u6210\u529f\n    end\n    PublishCommentUseCase-&gt;&gt;PrematchCommentRepository: publishComment(refId: String, content: String)\n    PrematchCommentRepository-&gt;&gt;PrematchCommentClient: publishComment(refId: String, content: String)\n    PrematchCommentClient-&gt;&gt;PrematchCommentAPI: POST /chat/match/comment\n    PrematchCommentAPI-&gt;&gt;Server: POST /chat/match/comment\n    Server--&gt;&gt;PrematchCommentAPI: 201 Created\uff08comment \u8cc7\u6599\uff09\n    PrematchCommentAPI--&gt;&gt;PrematchCommentClient: Comment DTO\n    PrematchCommentClient--&gt;&gt;PrematchCommentRepository: Comment DTO\n    PrematchCommentRepository--&gt;&gt;PublishCommentUseCase: Comment Entity\n    PublishCommentUseCase--&gt;&gt;PrematchCommentFeature: Output(comment: Comment)\n    PrematchCommentFeature--&gt;&gt;PrematchCommentView: \u66f4\u65b0 State\n\n    Note over Server,FactsCenterPackage: Event Status \u8b8a\u66f4\u901a\u77e5\n    Server--&gt;&gt;FactsCenterPackage: EventStatusChanged\n    FactsCenterPackage-&gt;&gt;PrematchCommentFeature: eventStatus(didChange status: Int)\n    Note over FactsCenterPackage,PrematchCommentFeature: FactsCenter Package \u900f\u904e interface \u901a\u77e5 PrematchCommentFeature\n    alt event status \u70ba match_started\n        PrematchCommentFeature-&gt;&gt;PrematchCommentView: \u95dc\u9589 Prematch Comment Page\n        PrematchCommentView--&gt;&gt;User: \u5c0e\u56de Race Detail Page\n    end\n\n    Note over User,LiveDetailView: \u7528\u6236\u9032\u5165 Live Detail Page\n    User-&gt;&gt;LiveDetailView: \u9032\u5165 Live Detail Page\n    LiveDetailView-&gt;&gt;LiveChatFeature: onAppear\n    LiveChatFeature-&gt;&gt;LiveChatRepository: subscribeWebSocket()\n    LiveChatRepository-&gt;&gt;ChatWebSocketClient: subscribe()\n    ChatWebSocketClient-&gt;&gt;Server: WebSocket \u8a02\u95b1\n    LiveChatRepository-&gt;&gt;LiveChatClient: getChatroomInfo(refId: String)\n    LiveChatClient-&gt;&gt;ChatAPI: GET /chat/match/{refId}\n    ChatAPI-&gt;&gt;Server: GET /chat/match/{refId}\n    Server--&gt;&gt;ChatAPI: { chatroomId, lastMessageNo }\n    ChatAPI--&gt;&gt;LiveChatClient: ChatroomInfo DTO\n    LiveChatClient--&gt;&gt;LiveChatRepository: ChatroomInfo DTO\n    LiveChatRepository--&gt;&gt;LiveChatFeature: ChatroomInfo Entity\n\n    Note over User,LiveDetailView: \u7528\u6236\u767c\u9001\u804a\u5929\u8a0a\u606f\n    User-&gt;&gt;LiveDetailView: \u9ede\u64ca\u8f38\u5165\u6846\n    LiveDetailView-&gt;&gt;LiveChatFeature: tapInputField\n    LiveChatFeature-&gt;&gt;LiveChatFeature: \u6aa2\u67e5\u767b\u5165\u72c0\u614b\uff08\u900f\u904e Main App\uff09\n    alt \u672a\u767b\u5165\n        LiveChatFeature-&gt;&gt;PersonalPagePackage: route(to: .personalPage)\n        PersonalPagePackage-&gt;&gt;PersonalPagePackage: \u5b8c\u6210\u767b\u5165\u6d41\u7a0b\n        PersonalPagePackage--&gt;&gt;LiveChatFeature: \u767b\u5165\u6210\u529f\n    end\n    User-&gt;&gt;LiveDetailView: \u8f38\u5165\u4e26\u9001\u51fa Chat\n    LiveDetailView-&gt;&gt;LiveChatFeature: sendMessage(content: String)\n    LiveChatFeature-&gt;&gt;SendChatMessageUseCase: execute(input: SendChatMessageInput)\n    SendChatMessageUseCase-&gt;&gt;SendChatMessageUseCase: \u6aa2\u67e5 nickname\uff08\u900f\u904e Main App\uff09\n    alt nickname \u4e0d\u5b58\u5728\n        SendChatMessageUseCase-&gt;&gt;FComSharedFlowPackage: CreatNickName API\n        FComSharedFlowPackage-&gt;&gt;FComSharedFlowPackage: \u5efa\u7acb nickname\n        FComSharedFlowPackage--&gt;&gt;SendChatMessageUseCase: nickname \u5efa\u7acb\u6210\u529f\n    end\n    SendChatMessageUseCase-&gt;&gt;LiveChatRepository: sendMessage(chatroomId: String, content: String)\n    LiveChatRepository-&gt;&gt;LiveChatClient: sendMessage(chatroomId: String, content: String)\n    LiveChatClient-&gt;&gt;ChatAPI: POST /chat/{matchId}/message\n    ChatAPI-&gt;&gt;Server: POST /chat/{matchId}/message\n    Server--&gt;&gt;ChatAPI: 201 Created\n    ChatAPI--&gt;&gt;LiveChatClient: Message DTO\n    LiveChatClient--&gt;&gt;LiveChatRepository: Message DTO\n    LiveChatRepository--&gt;&gt;SendChatMessageUseCase: Message Entity\n    SendChatMessageUseCase--&gt;&gt;LiveChatFeature: Output(message: Message)\n    LiveChatFeature--&gt;&gt;LiveDetailView: \u66f4\u65b0 State</code></pre> <p>Mermaid \u8a9e\u6cd5\uff08\u53ef\u8907\u88fd\uff09\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    box rgb(207,232,255) UI Layer\n        participant RaceDetailView\n        participant PrematchCommentView\n        participant LiveDetailView\n    end\n    box rgb(255,250,205) Domain Layer\n        participant PrematchCommentFeature\n        participant LiveChatFeature\n        participant ReloadCommentListUseCase\n        participant PublishCommentUseCase\n        participant SendChatMessageUseCase\n        participant ToggleLikeUseCase\n        participant LoadRepliesUseCase\n    end\n    box rgb(240,240,240) Data &amp; Infrastructure Layer\n        participant PrematchCommentRepository\n        participant LiveChatRepository\n        participant PrematchCommentClient\n        participant LiveChatClient\n        participant ChatWebSocketClient\n        participant PrematchCommentAPI\n        participant ChatAPI\n    end\n    participant FactsCenterPackage as FactsCenter Package (External)\n    participant PersonalPagePackage as PersonalPage Package (External)\n    participant FComSharedFlowPackage as FComSharedFlow Package (External)\n    participant Server\n\n    Note over User,RaceDetailView: \u7528\u6236\u9032\u5165 Race Detail Page\n    User-&gt;&gt;RaceDetailView: \u9032\u5165 Race Detail Page\n    RaceDetailView-&gt;&gt;PrematchCommentFeature: onAppear\n    PrematchCommentFeature-&gt;&gt;ReloadCommentListUseCase: execute(triggerType: .init)\n    ReloadCommentListUseCase-&gt;&gt;PrematchCommentRepository: getUserInfo()\n    PrematchCommentRepository-&gt;&gt;PrematchCommentClient: getUserInfo()\n    PrematchCommentClient-&gt;&gt;PrematchCommentAPI: GET /{TBD \u500b\u4eba\u8cc7\u8a0a API}\n    PrematchCommentAPI-&gt;&gt;Server: GET /{TBD \u500b\u4eba\u8cc7\u8a0a API}\n    Server--&gt;&gt;PrematchCommentAPI: userInfo\n    PrematchCommentAPI--&gt;&gt;PrematchCommentClient: userInfo DTO\n    PrematchCommentClient--&gt;&gt;PrematchCommentRepository: userInfo DTO\n    PrematchCommentRepository--&gt;&gt;ReloadCommentListUseCase: UserInfo Entity\n    ReloadCommentListUseCase-&gt;&gt;PrematchCommentRepository: getCommentMeta(refId: String)\n    PrematchCommentRepository-&gt;&gt;PrematchCommentClient: getCommentMeta(refId: String)\n    PrematchCommentClient-&gt;&gt;PrematchCommentAPI: GET /chat/match/comment/info/{refId}\n    PrematchCommentAPI-&gt;&gt;Server: GET /chat/match/comment/info/{refId}\n    Server--&gt;&gt;PrematchCommentAPI: { commentCount, betCount }\n    PrematchCommentAPI--&gt;&gt;PrematchCommentClient: CommentMeta DTO\n    PrematchCommentClient--&gt;&gt;PrematchCommentRepository: CommentMeta DTO\n    PrematchCommentRepository--&gt;&gt;ReloadCommentListUseCase: CommentMeta Entity\n    ReloadCommentListUseCase--&gt;&gt;PrematchCommentFeature: Output(comments: [], meta: CommentMeta)\n    PrematchCommentFeature--&gt;&gt;RaceDetailView: \u66f4\u65b0 State\n\n    Note over User,PrematchCommentView: \u7528\u6236\u9032\u5165 Prematch Comment Page\n    User-&gt;&gt;PrematchCommentView: \u9032\u5165 Prematch Comment Page\n    PrematchCommentView-&gt;&gt;PrematchCommentFeature: onAppear\n    PrematchCommentFeature-&gt;&gt;ReloadCommentListUseCase: execute(triggerType: .init, mode: .top)\n    ReloadCommentListUseCase-&gt;&gt;PrematchCommentRepository: getComments(refId: String, mode: .top)\n    PrematchCommentRepository-&gt;&gt;PrematchCommentClient: getComments(refId: String, mode: .top)\n    PrematchCommentClient-&gt;&gt;PrematchCommentAPI: GET /chat/match/comment/popular\n    PrematchCommentAPI-&gt;&gt;Server: GET /chat/match/comment/popular\n    Server--&gt;&gt;PrematchCommentAPI: comments (sorted by like)\n    PrematchCommentAPI--&gt;&gt;PrematchCommentClient: [Comment] DTO\n    PrematchCommentClient--&gt;&gt;PrematchCommentRepository: [Comment] DTO\n    PrematchCommentRepository--&gt;&gt;ReloadCommentListUseCase: [Comment] Entity\n    ReloadCommentListUseCase--&gt;&gt;PrematchCommentFeature: Output(comments: [Comment])\n    PrematchCommentFeature--&gt;&gt;PrematchCommentView: \u66f4\u65b0 State\n\n    Note over FactsCenterPackage,Server: Event Status \u8a02\u95b1\uff08\u5728\u9032\u5165 Race Detail Page \u6642\uff09\n    FactsCenterPackage-&gt;&gt;Server: WebSocket \u8a02\u95b1 Event Status\n    Note over FactsCenterPackage: \u5916\u90e8 Package\uff0c\u5167\u90e8\u5be6\u4f5c\u4e0d\u5728\u6b64 TDD \u7bc4\u570d\u5167\n\n    Note over User,PrematchCommentView: \u7528\u6236\u767c\u9001\u7559\u8a00\n    User-&gt;&gt;PrematchCommentView: \u9ede\u64ca\u8f38\u5165\u6846\n    PrematchCommentView-&gt;&gt;PrematchCommentFeature: tapInputField\n    PrematchCommentFeature-&gt;&gt;PrematchCommentFeature: \u6aa2\u67e5\u767b\u5165\u72c0\u614b\uff08\u900f\u904e Main App\uff09\n    alt \u672a\u767b\u5165\n        PrematchCommentFeature-&gt;&gt;PersonalPagePackage: route(to: .personalPage)\n        PersonalPagePackage-&gt;&gt;PersonalPagePackage: \u5b8c\u6210\u767b\u5165\u6d41\u7a0b\n        PersonalPagePackage--&gt;&gt;PrematchCommentFeature: \u767b\u5165\u6210\u529f\n    end\n    User-&gt;&gt;PrematchCommentView: \u8f38\u5165\u4e26\u9001\u51fa Comment\n    PrematchCommentView-&gt;&gt;PrematchCommentFeature: publishComment(content: String)\n    PrematchCommentFeature-&gt;&gt;PublishCommentUseCase: execute(input: PublishCommentInput)\n    PublishCommentUseCase-&gt;&gt;PublishCommentUseCase: \u6aa2\u67e5 nickname\uff08\u900f\u904e Main App\uff09\n    alt nickname \u4e0d\u5b58\u5728\n        PublishCommentUseCase-&gt;&gt;FComSharedFlowPackage: CreatNickName API\n        FComSharedFlowPackage-&gt;&gt;FComSharedFlowPackage: \u5efa\u7acb nickname\n        FComSharedFlowPackage--&gt;&gt;PublishCommentUseCase: nickname \u5efa\u7acb\u6210\u529f\n    end\n    PublishCommentUseCase-&gt;&gt;PrematchCommentRepository: publishComment(refId: String, content: String)\n    PrematchCommentRepository-&gt;&gt;PrematchCommentClient: publishComment(refId: String, content: String)\n    PrematchCommentClient-&gt;&gt;PrematchCommentAPI: POST /chat/match/comment\n    PrematchCommentAPI-&gt;&gt;Server: POST /chat/match/comment\n    Server--&gt;&gt;PrematchCommentAPI: 201 Created\uff08comment \u8cc7\u6599\uff09\n    PrematchCommentAPI--&gt;&gt;PrematchCommentClient: Comment DTO\n    PrematchCommentClient--&gt;&gt;PrematchCommentRepository: Comment DTO\n    PrematchCommentRepository--&gt;&gt;PublishCommentUseCase: Comment Entity\n    PublishCommentUseCase--&gt;&gt;PrematchCommentFeature: Output(comment: Comment)\n    PrematchCommentFeature--&gt;&gt;PrematchCommentView: \u66f4\u65b0 State\n\n    Note over Server,FactsCenterPackage: Event Status \u8b8a\u66f4\u901a\u77e5\n    Server--&gt;&gt;FactsCenterPackage: EventStatusChanged\n    FactsCenterPackage-&gt;&gt;PrematchCommentFeature: eventStatus(didChange status: Int)\n    Note over FactsCenterPackage,PrematchCommentFeature: FactsCenter Package \u900f\u904e interface \u901a\u77e5 PrematchCommentFeature\n    alt event status \u70ba match_started\n        PrematchCommentFeature-&gt;&gt;PrematchCommentView: \u95dc\u9589 Prematch Comment Page\n        PrematchCommentView--&gt;&gt;User: \u5c0e\u56de Race Detail Page\n    end\n\n    Note over User,LiveDetailView: \u7528\u6236\u9032\u5165 Live Detail Page\n    User-&gt;&gt;LiveDetailView: \u9032\u5165 Live Detail Page\n    LiveDetailView-&gt;&gt;LiveChatFeature: onAppear\n    LiveChatFeature-&gt;&gt;LiveChatRepository: subscribeWebSocket()\n    LiveChatRepository-&gt;&gt;ChatWebSocketClient: subscribe()\n    ChatWebSocketClient-&gt;&gt;Server: WebSocket \u8a02\u95b1\n    LiveChatRepository-&gt;&gt;LiveChatClient: getChatroomInfo(refId: String)\n    LiveChatClient-&gt;&gt;ChatAPI: GET /chat/match/{refId}\n    ChatAPI-&gt;&gt;Server: GET /chat/match/{refId}\n    Server--&gt;&gt;ChatAPI: { chatroomId, lastMessageNo }\n    ChatAPI--&gt;&gt;LiveChatClient: ChatroomInfo DTO\n    LiveChatClient--&gt;&gt;LiveChatRepository: ChatroomInfo DTO\n    LiveChatRepository--&gt;&gt;LiveChatFeature: ChatroomInfo Entity\n\n    Note over User,LiveDetailView: \u7528\u6236\u767c\u9001\u804a\u5929\u8a0a\u606f\n    User-&gt;&gt;LiveDetailView: \u9ede\u64ca\u8f38\u5165\u6846\n    LiveDetailView-&gt;&gt;LiveChatFeature: tapInputField\n    LiveChatFeature-&gt;&gt;LiveChatFeature: \u6aa2\u67e5\u767b\u5165\u72c0\u614b\uff08\u900f\u904e Main App\uff09\n    alt \u672a\u767b\u5165\n        LiveChatFeature-&gt;&gt;PersonalPagePackage: route(to: .personalPage)\n        PersonalPagePackage-&gt;&gt;PersonalPagePackage: \u5b8c\u6210\u767b\u5165\u6d41\u7a0b\n        PersonalPagePackage--&gt;&gt;LiveChatFeature: \u767b\u5165\u6210\u529f\n    end\n    User-&gt;&gt;LiveDetailView: \u8f38\u5165\u4e26\u9001\u51fa Chat\n    LiveDetailView-&gt;&gt;LiveChatFeature: sendMessage(content: String)\n    LiveChatFeature-&gt;&gt;SendChatMessageUseCase: execute(input: SendChatMessageInput)\n    SendChatMessageUseCase-&gt;&gt;SendChatMessageUseCase: \u6aa2\u67e5 nickname\uff08\u900f\u904e Main App\uff09\n    alt nickname \u4e0d\u5b58\u5728\n        SendChatMessageUseCase-&gt;&gt;FComSharedFlowPackage: CreatNickName API\n        FComSharedFlowPackage-&gt;&gt;FComSharedFlowPackage: \u5efa\u7acb nickname\n        FComSharedFlowPackage--&gt;&gt;SendChatMessageUseCase: nickname \u5efa\u7acb\u6210\u529f\n    end\n    SendChatMessageUseCase-&gt;&gt;LiveChatRepository: sendMessage(chatroomId: String, content: String)\n    LiveChatRepository-&gt;&gt;LiveChatClient: sendMessage(chatroomId: String, content: String)\n    LiveChatClient-&gt;&gt;ChatAPI: POST /chat/{matchId}/message\n    ChatAPI-&gt;&gt;Server: POST /chat/{matchId}/message\n    Server--&gt;&gt;ChatAPI: 201 Created\n    ChatAPI--&gt;&gt;LiveChatClient: Message DTO\n    LiveChatClient--&gt;&gt;LiveChatRepository: Message DTO\n    LiveChatRepository--&gt;&gt;SendChatMessageUseCase: Message Entity\n    SendChatMessageUseCase--&gt;&gt;LiveChatFeature: Output(message: Message)\n    LiveChatFeature--&gt;&gt;LiveDetailView: \u66f4\u65b0 State\n</code></pre>"},{"location":"01_Integrated%20Service-Level%20Sequence%20Diagram/01_full_integration_flow/#_4","title":"\u6d41\u7a0b\u8aaa\u660e","text":""},{"location":"01_Integrated%20Service-Level%20Sequence%20Diagram/01_full_integration_flow/#1","title":"1. \u9032\u5165\u9801\u9762\u521d\u59cb\u5316\u6d41\u7a0b","text":"\u6d41\u7a0b\u6b65\u9a5f \u8aaa\u660e 1. \u9032\u5165 Race Detail Page 1. \u7528\u6236\u9032\u5165 Race Detail Page2. \u81ea\u52d5\u53d6\u5f97\u7528\u6236\u500b\u4eba\u8cc7\u8a0a3. \u81ea\u52d5\u53d6\u5f97\u8cfd\u4e8b\u7559\u8a00\u7d71\u8a08\u8cc7\u8a0a 2. \u9032\u5165 Prematch Comment Page 1. \u7528\u6236\u9032\u5165 Prematch Comment Page2. \u9810\u8a2d\u986f\u793a Top \u6a19\u7c643. \u8f09\u5165\u71b1\u9580\u7559\u8a00\u5217\u8868 3. Event Status \u8a02\u95b1 1. FactsCenter Package\uff08\u5916\u90e8\uff09\u81ea\u52d5\u8a02\u95b1 Event Status2. \u900f\u904e WebSocket \u63a5\u6536\u4e8b\u4ef6\u72c0\u614b\u8b8a\u66f4\u901a\u77e5"},{"location":"01_Integrated%20Service-Level%20Sequence%20Diagram/01_full_integration_flow/#2","title":"2. \u767c\u9001\u7559\u8a00\u6d41\u7a0b","text":"\u6d41\u7a0b\u6b65\u9a5f \u8aaa\u660e 1. \u767b\u5165\u6aa2\u67e5 1. \u9ede\u64ca\u8f38\u5165\u6846\u6642\u89f8\u767c\u767b\u5165\u6aa2\u67e52. \u672a\u767b\u5165\u5247\u8df3\u8f49\u5230 PersonalPage \u5b8c\u6210\u767b\u51653. \u767b\u5165\u6210\u529f\u5f8c\u56de\u8df3\u81f3\u539f\u9801\u9762 2. Nickname \u6aa2\u67e5 1. \u9001\u51fa\u524d\u6aa2\u67e5 client \u7aef nickname \u662f\u5426\u5b58\u57282. \u82e5\u4e0d\u5b58\u5728\u5247\u8abf\u7528 FComSharedFlow Package \u5efa\u7acb nickname 3. \u767c\u9001\u7559\u8a00 1. \u5411\u4f3a\u670d\u5668\u767c\u9001 POST /chat/match/comment \u8acb\u6c422. \u6536\u5230\u56de\u61c9\u5f8c\u66f4\u65b0 UI \u986f\u793a\u65b0\u7559\u8a00"},{"location":"01_Integrated%20Service-Level%20Sequence%20Diagram/01_full_integration_flow/#3-event-status","title":"3. Event Status \u901a\u77e5\u6d41\u7a0b","text":"\u6d41\u7a0b\u6b65\u9a5f \u8aaa\u660e 1. \u63a5\u6536\u901a\u77e5 1. Server \u900f\u904e WebSocket \u63a8\u9001 EventStatusChanged \u4e8b\u4ef62. FactsCenter Package \u63a5\u6536\u4e8b\u4ef6\u4e26\u900f\u904e interface \u901a\u77e5 PrematchCommentFeature 2. \u8655\u7406\u901a\u77e5 1. PrematchCommentFeature \u5224\u65b7 event status2. \u82e5\u70ba match_started \u5247\u81ea\u52d5\u95dc\u9589 Prematch Comment Page3. \u5c0e\u56de Race Detail Page"},{"location":"01_Integrated%20Service-Level%20Sequence%20Diagram/01_full_integration_flow/#4","title":"4. \u5373\u6642\u804a\u5929\u6d41\u7a0b","text":"\u6d41\u7a0b\u6b65\u9a5f \u8aaa\u660e 1. \u9032\u5165 Live Detail Page 1. \u7528\u6236\u9032\u5165 Live Detail Page2. \u81ea\u52d5\u5efa\u7acb WebSocket \u9023\u7dda3. \u53d6\u5f97\u804a\u5929\u5ba4\u8cc7\u8a0a\uff08chatroomId, lastMessageNo\uff09 2. \u767c\u9001\u804a\u5929\u8a0a\u606f 1. \u767b\u5165\u6aa2\u67e5\uff08\u540c\u7559\u8a00\u6d41\u7a0b\uff092. Nickname \u6aa2\u67e5\uff08\u540c\u7559\u8a00\u6d41\u7a0b\uff093. \u767c\u9001\u8a0a\u606f\u4e26\u66f4\u65b0 UI"},{"location":"01_Integrated%20Service-Level%20Sequence%20Diagram/01_full_integration_flow/#feature","title":"\u8de8 Feature \u4e92\u52d5","text":""},{"location":"01_Integrated%20Service-Level%20Sequence%20Diagram/01_full_integration_flow/#shared-modules","title":"Shared Modules \u4f7f\u7528","text":"Shared Module \u4f7f\u7528\u5834\u666f \u8aaa\u660e PersonalPage Package\uff08External\uff09 \u767b\u5165\u6d41\u7a0b 1. PrematchCommentFeature \u548c LiveChatFeature \u90fd\u6703\u4f7f\u75282. \u672a\u767b\u5165\u6642\u8df3\u8f49\u5230 PersonalPage \u5b8c\u6210\u767b\u5165 FComSharedFlow Package\uff08External\uff09 Nickname \u5efa\u7acb 1. PrematchCommentFeature \u548c LiveChatFeature \u90fd\u6703\u4f7f\u75282. \u7576\u7528\u6236\u6c92\u6709 nickname \u6642\u8abf\u7528 CreatNickName API FactsCenter Package\uff08External\uff09 Event Status \u8a02\u95b1 1. \u50c5 PrematchCommentFeature \u4f7f\u75282. \u900f\u904e interface \u63a5\u6536 Event Status \u8b8a\u66f4\u901a\u77e5"},{"location":"01_Integrated%20Service-Level%20Sequence%20Diagram/01_full_integration_flow/#_5","title":"\u8cc7\u6599\u6d41\u5411","text":"<ol> <li>User Info\uff1a\u900f\u904e PrematchCommentRepository \u2192 PrematchCommentClient \u2192 PrematchCommentAPI \u53d6\u5f97</li> <li>Comment Data\uff1a\u900f\u904e PrematchCommentRepository \u2192 PrematchCommentClient \u2192 PrematchCommentAPI \u53d6\u5f97\u548c\u767c\u9001</li> <li>Chat Message\uff1a\u900f\u904e LiveChatRepository \u2192 LiveChatClient \u2192 ChatAPI \u767c\u9001\uff0c\u900f\u904e WebSocket \u63a5\u6536</li> <li>Event Status\uff1a\u900f\u904e FactsCenter Package\uff08\u5916\u90e8\uff09\u8a02\u95b1\u548c\u63a5\u6536</li> </ol>"},{"location":"02_Architecture/","title":"Architecture \u7ae0\u7bc0\u8aaa\u660e","text":"<p>\u672c\u76ee\u9304\u5305\u542b TDD \u6587\u4ef6\u7684 Architecture \u7ae0\u7bc0\uff0c\u63d0\u4f9b\u7cfb\u7d71\u67b6\u69cb\u5716\u548c\u67b6\u69cb\u8aaa\u660e\u3002</p>"},{"location":"02_Architecture/#_1","title":"\u6587\u4ef6\u5217\u8868","text":"<ul> <li><code>01_clean_architecture_diagram.md</code> - Clean Architecture \u67b6\u69cb\u5716</li> </ul>"},{"location":"02_Architecture/#_2","title":"\u8aaa\u660e","text":"<p>Architecture \u7ae0\u7bc0\u5305\u542b\uff1a</p> <ul> <li>\u5782\u76f4 Clean Architecture \u5716</li> <li>\u5404 Layer \u7684\u8077\u8cac\u8aaa\u660e</li> <li>\u4f9d\u8cf4\u65b9\u5411\u8aaa\u660e</li> <li>\u6a21\u7d44\u95dc\u4fc2\u5716</li> </ul>"},{"location":"02_Architecture/#_3","title":"\u67b6\u69cb\u5c64\u7d1a","text":"<ol> <li>UI Layer\uff1aView \u5c64</li> <li>Domain Layer\uff1aFeature + UseCase \u5c64</li> <li>Data &amp; Infrastructure Layer\uff1aRepository + Client + API \u5c64</li> <li>Domain Model Layer\uff1aEntity + Value Object \u5c64</li> </ol>"},{"location":"02_Architecture/#_4","title":"\u4f9d\u8cf4\u65b9\u5411","text":"<p>UI \u2192 Feature \u2192 UseCase \u2192 Repository \u2192 Client \u2192 API</p> <p>\u7981\u6b62\u8d8a\u5c64\u547c\u53eb\u3002</p>"},{"location":"02_Architecture/01_clean_architecture_diagram/","title":"Clean Architecture \u67b6\u69cb\u5716","text":""},{"location":"02_Architecture/01_clean_architecture_diagram/#_1","title":"\u9ad8\u968e\u67b6\u69cb\u5716\uff08\u6982\u89bd\uff09","text":"<pre><code>flowchart TD\n    subgraph UILayer[\"UI Layer\"]\n        UILayerPlaceholder[\"3 \u500b View\"]\n    end\n\n    subgraph DomainLayer[\"Domain Layer\"]\n        subgraph FeatureLayer[\"Feature Layer\"]\n            FeatureLayerPlaceholder[\"2 \u500b Feature\"]\n        end\n        subgraph UseCaseLayer[\"UseCase Layer\"]\n            UseCaseLayerPlaceholder[\"9 \u500b UseCase\"]\n        end\n    end\n\n    subgraph DataInfraLayer[\"Data &amp; Infrastructure Layer\"]\n        subgraph RepositoryLayer[\"Repository Layer\"]\n            RepositoryLayerPlaceholder[\"2 \u500b Repository\"]\n        end\n        subgraph ClientLayer[\"Client Layer\"]\n            ClientLayerPlaceholder[\"3 \u500b Client\"]\n        end\n        subgraph APILayer[\"API Layer\"]\n            APILayerPlaceholder[\"2 \u500b API\"]\n        end\n    end\n\n    subgraph DomainModelLayer[\"Domain Model Layer\"]\n        subgraph EntityLayer[\"Entity\"]\n            EntityLayerPlaceholder[\"5 \u500b Entity\"]\n        end\n        subgraph ValueObjectLayer[\"Value Object\"]\n            ValueObjectLayerPlaceholder[\"3 \u500b Value Object\"]\n        end\n    end\n\n    subgraph ProtocolLayer[\"Protocol Layer\"]\n        ProtocolLayerPlaceholder[\"Adapter Protocols\"]\n    end\n\n    subgraph ExternalPackages[\"External Packages\"]\n        ExternalPackagesPlaceholder[\"3 \u500b External Package\"]\n    end\n\n    %% \u4f9d\u8cf4\u95dc\u4fc2\n    UILayerPlaceholder --&gt; FeatureLayerPlaceholder\n    FeatureLayerPlaceholder --&gt; UseCaseLayerPlaceholder\n    UseCaseLayerPlaceholder --&gt; RepositoryLayerPlaceholder\n    UseCaseLayerPlaceholder --&gt; ProtocolLayerPlaceholder\n    RepositoryLayerPlaceholder --&gt; ClientLayerPlaceholder\n    ClientLayerPlaceholder --&gt; APILayerPlaceholder\n    RepositoryLayerPlaceholder -.-&gt;|uses| EntityLayerPlaceholder\n    RepositoryLayerPlaceholder -.-&gt;|uses| ValueObjectLayerPlaceholder\n    ProtocolLayerPlaceholder -.-&gt;|implements| ExternalPackagesPlaceholder\n\n    %% Styling\n    classDef uiLayer fill:#CFE8FF\n    classDef domainLayer fill:#FFFACD\n    classDef protocolLayer fill:#FFE4E1,stroke:#FF6B6B,stroke-width:2px\n    classDef repositoryLayer fill:#E8F4F8\n    classDef clientLayer fill:#F0F8E8\n    classDef apiLayer fill:#FFF8E8\n    classDef domainModel fill:#E6E6FA\n    classDef externalPackage fill:#E6F3FF\n\n    class UILayerPlaceholder uiLayer\n    class FeatureLayerPlaceholder,UseCaseLayerPlaceholder domainLayer\n    class ProtocolLayerPlaceholder protocolLayer\n    class RepositoryLayerPlaceholder repositoryLayer\n    class ClientLayerPlaceholder clientLayer\n    class APILayerPlaceholder apiLayer\n    class EntityLayerPlaceholder,ValueObjectLayerPlaceholder domainModel\n    class ExternalPackagesPlaceholder externalPackage</code></pre> <p>Mermaid \u8a9e\u6cd5\uff08\u53ef\u8907\u88fd\uff09\uff1a</p> <pre><code>flowchart TD\n    subgraph UILayer[\"UI Layer\"]\n        UILayerPlaceholder[\"3 \u500b View\"]\n    end\n\n    subgraph DomainLayer[\"Domain Layer\"]\n        subgraph FeatureLayer[\"Feature Layer\"]\n            FeatureLayerPlaceholder[\"2 \u500b Feature\"]\n        end\n        subgraph UseCaseLayer[\"UseCase Layer\"]\n            UseCaseLayerPlaceholder[\"9 \u500b UseCase\"]\n        end\n    end\n\n    subgraph DataInfraLayer[\"Data &amp; Infrastructure Layer\"]\n        subgraph RepositoryLayer[\"Repository Layer\"]\n            RepositoryLayerPlaceholder[\"2 \u500b Repository\"]\n        end\n        subgraph ClientLayer[\"Client Layer\"]\n            ClientLayerPlaceholder[\"3 \u500b Client\"]\n        end\n        subgraph APILayer[\"API Layer\"]\n            APILayerPlaceholder[\"2 \u500b API\"]\n        end\n    end\n\n    subgraph DomainModelLayer[\"Domain Model Layer\"]\n        subgraph EntityLayer[\"Entity\"]\n            EntityLayerPlaceholder[\"5 \u500b Entity\"]\n        end\n        subgraph ValueObjectLayer[\"Value Object\"]\n            ValueObjectLayerPlaceholder[\"3 \u500b Value Object\"]\n        end\n    end\n\n    subgraph ProtocolLayer[\"Protocol Layer\"]\n        ProtocolLayerPlaceholder[\"Adapter Protocols\"]\n    end\n\n    subgraph ExternalPackages[\"External Packages\"]\n        ExternalPackagesPlaceholder[\"3 \u500b External Package\"]\n    end\n\n    %% \u4f9d\u8cf4\u95dc\u4fc2\n    UILayerPlaceholder --&gt; FeatureLayerPlaceholder\n    FeatureLayerPlaceholder --&gt; UseCaseLayerPlaceholder\n    UseCaseLayerPlaceholder --&gt; RepositoryLayerPlaceholder\n    UseCaseLayerPlaceholder --&gt; ProtocolLayerPlaceholder\n    RepositoryLayerPlaceholder --&gt; ClientLayerPlaceholder\n    ClientLayerPlaceholder --&gt; APILayerPlaceholder\n    RepositoryLayerPlaceholder -.-&gt;|uses| EntityLayerPlaceholder\n    RepositoryLayerPlaceholder -.-&gt;|uses| ValueObjectLayerPlaceholder\n    ProtocolLayerPlaceholder -.-&gt;|implements| ExternalPackagesPlaceholder\n\n    %% Styling\n    classDef uiLayer fill:#CFE8FF\n    classDef domainLayer fill:#FFFACD\n    classDef protocolLayer fill:#FFE4E1,stroke:#FF6B6B,stroke-width:2px\n    classDef repositoryLayer fill:#E8F4F8\n    classDef clientLayer fill:#F0F8E8\n    classDef apiLayer fill:#FFF8E8\n    classDef domainModel fill:#E6E6FA\n    classDef externalPackage fill:#E6F3FF\n\n    class UILayerPlaceholder uiLayer\n    class FeatureLayerPlaceholder,UseCaseLayerPlaceholder domainLayer\n    class ProtocolLayerPlaceholder protocolLayer\n    class RepositoryLayerPlaceholder repositoryLayer\n    class ClientLayerPlaceholder clientLayer\n    class APILayerPlaceholder apiLayer\n    class EntityLayerPlaceholder,ValueObjectLayerPlaceholder domainModel\n    class ExternalPackagesPlaceholder externalPackage\n</code></pre>"},{"location":"02_Architecture/01_clean_architecture_diagram/#_2","title":"\u9ad8\u968e\u67b6\u69cb\u8aaa\u660e","text":"Layer \u5b50\u5c64\u7d1a \u6a21\u7d44\u6578\u91cf \u8077\u8cac UI Layer - 3 \u500b View 1. \u63a5\u6536\u4f7f\u7528\u8005\u4e92\u52d52. \u986f\u793a UI3. \u89f8\u767c Feature Action Domain Layer Feature Layer 2 \u500b Feature 1. UI orchestration2. Action \u8f49\u63db3. State \u7ba1\u7406 Domain Layer UseCase Layer 9 \u500b UseCase 1. \u57f7\u884c\u5546\u696d\u908f\u8f2f2. \u6574\u5408 Repository3. \u8655\u7406\u8de8 Feature \u7684\u5171\u7528\u908f\u8f2f4. \u8655\u7406\u8def\u7531\u8df3\u8f49\u908f\u8f2f Data &amp; Infrastructure Layer Repository Layer 2 \u500b Repository 1. Domain \u8cc7\u6599\u4f86\u6e90\u7684\u62bd\u8c61\u4ecb\u97622. \u547c\u53eb Client \u53d6\u5f97\u8cc7\u65993. DTO \u2192 Domain Model \u8f49\u63db Data &amp; Infrastructure Layer Client Layer 3 \u500b Client 1. HTTP \u901a\u8a0a2. WebSocket \u901a\u8a0a3. Request / Response \u7de8\u89e3\u78bc Data &amp; Infrastructure Layer API Layer 2 \u500b API 1. \u5b9a\u7fa9\u5f8c\u7aef endpoint2. URL / HTTP method / payload \u5f62\u72c0 Domain Model Layer Entity 5 \u500b Entity 1. \u6709\u552f\u4e00\u8b58\u5225\u78bc\u7684\u696d\u52d9\u7269\u4ef62. \u7d14\u8cc7\u6599\u7d50\u69cb\uff0c\u7121\u5546\u696d\u908f\u8f2f Domain Model Layer Value Object 3 \u500b Value Object 1. \u6c92\u6709\u552f\u4e00\u8b58\u5225\u78bc\uff0c\u900f\u904e\u503c\u6bd4\u8f032. \u5b8c\u5168\u4e0d\u53ef\u8b8a Protocol Layer - Adapter Protocols 1. \u5b9a\u7fa9\u5916\u90e8 Package \u7684\u4f9d\u8cf4\u4ecb\u97622. \u7531 UseCase \u4f9d\u8cf43. \u5be6\u73fe\u653e\u5728 Main App \u4e2d External Packages - 3 \u500b External Package 1. \u5916\u90e8 Swift Package2. \u900f\u904e Adapter Protocol \u6574\u5408"},{"location":"02_Architecture/01_clean_architecture_diagram/#_3","title":"\u4f9d\u8cf4\u65b9\u5411\uff08\u9ad8\u968e\uff09","text":"<pre><code>UI Layer (3 Views)\n    \u2193\nDomain Layer - Feature Layer (2 Features)\n    \u2193\nDomain Layer - UseCase Layer (7 UseCases)\n    \u2193\nData &amp; Infrastructure Layer - Repository Layer (2 Repositories)\n    \u2193\nData &amp; Infrastructure Layer - Client Layer (3 Clients)\n    \u2193\nData &amp; Infrastructure Layer - API Layer (2 APIs)\n</code></pre> <p>Domain Model Layer \u88ab Repository Layer \u4f7f\u7528\uff08\u4e0d\u4f5c\u70ba participant\uff09</p> <p>Protocol Layer \u7531 UseCase Layer \u4f9d\u8cf4\uff0cAdapter Implementation \u5728 Main App \u4e2d\u5be6\u73fe\u4e26\u4f7f\u7528 External Packages</p>"},{"location":"02_Architecture/01_clean_architecture_diagram/#_4","title":"\u8a73\u7d30\u67b6\u69cb\u5716","text":"<p>\u76f8\u95dc\u6587\u4ef6\uff1aHLD UML</p> <pre><code>flowchart TD\n    subgraph UILayer[\"UI Layer\"]\n        RaceDetailView[\"RaceDetailView\"]\n        PrematchCommentView[\"PrematchCommentView\"]\n        LiveDetailView[\"LiveDetailView\"]\n    end\n\n    subgraph DomainLayer[\"Domain Layer\"]\n        subgraph FeatureLayer[\"Feature Layer\"]\n            PrematchCommentFeature[\"PrematchCommentFeature\"]\n            LiveChatFeature[\"LiveChatFeature\"]\n        end\n        subgraph UseCaseLayer[\"UseCase Layer\"]\n            ReloadCommentListUseCase[\"ReloadCommentListUseCase\"]\n            PublishCommentUseCase[\"PublishCommentUseCase\"]\n            ToggleLikeUseCase[\"ToggleLikeUseCase\"]\n            LoadRepliesUseCase[\"LoadRepliesUseCase\"]\n            NavigateToProfileUseCase[\"NavigateToProfileUseCase\"]\n            SendChatMessageUseCase[\"SendChatMessageUseCase\"]\n            JoinChatroomUseCase[\"JoinChatroomUseCase\"]\n            LeaveChatroomUseCase[\"LeaveChatroomUseCase\"]\n            BlockUserUseCase[\"BlockUserUseCase\"]\n        end\n    end\n\n    subgraph DataInfraLayer[\"Data &amp; Infrastructure Layer\"]\n        subgraph RepositoryLayer[\"Repository Layer\"]\n            PrematchCommentRepository[\"PrematchCommentRepository\"]\n            LiveChatRepository[\"LiveChatRepository\"]\n        end\n        subgraph ClientLayer[\"Client Layer\"]\n            PrematchCommentClient[\"PrematchCommentClient (HTTP)\"]\n            LiveChatClient[\"LiveChatClient (HTTP)\"]\n            ChatWebSocketClient[\"ChatWebSocketClient (WebSocket)\"]\n        end\n        subgraph APILayer[\"API Layer\"]\n            PrematchCommentAPI[\"PrematchCommentAPI\"]\n            ChatAPI[\"ChatAPI\"]\n        end\n    end\n\n    subgraph DomainModelLayer[\"Domain Model Layer\"]\n        Comment[\"Comment (Entity)\"]\n        CommentMeta[\"CommentMeta (Entity)\"]\n        UserInfo[\"UserInfo (Entity)\"]\n        Message[\"Message (Entity)\"]\n        ChatroomInfo[\"ChatroomInfo (Entity)\"]\n        SortMode[\"SortMode (Value Object)\"]\n        Cursor[\"Cursor (Value Object)\"]\n        PagingInfo[\"PagingInfo (Value Object)\"]\n    end\n\n    subgraph ProtocolLayer[\"Protocol Layer\"]\n        FComSharedFlowAdapterProtocol[\"&amp;lt;FComSharedFlowAdapter&amp;gt;\"]\n        PersonalPageAdapterProtocol[\"&amp;lt;PersonalPageAdapter&amp;gt;\"]\n        EventStatusNotifiableProtocol[\"&amp;lt;EventStatusNotifiable&amp;gt;\"]\n    end\n\n    subgraph ExternalPackages[\"External Packages\"]\n        FactsCenterPackage[\"FactsCenter Package (External)\"]\n        PersonalPagePackage[\"PersonalPage Package (External)\"]\n        FComSharedFlowPackage[\"FComSharedFlow Package (External)\"]\n    end\n\n    %% UI to Feature\n    RaceDetailView --&gt; PrematchCommentFeature\n    PrematchCommentView --&gt; PrematchCommentFeature\n    LiveDetailView --&gt; LiveChatFeature\n\n    %% Feature to UseCase\n    PrematchCommentFeature --&gt; ReloadCommentListUseCase\n    PrematchCommentFeature --&gt; PublishCommentUseCase\n    PrematchCommentFeature --&gt; ToggleLikeUseCase\n    PrematchCommentFeature --&gt; LoadRepliesUseCase\n    PrematchCommentFeature --&gt; NavigateToProfileUseCase\n    LiveChatFeature --&gt; SendChatMessageUseCase\n    LiveChatFeature --&gt; JoinChatroomUseCase\n    LiveChatFeature --&gt; LeaveChatroomUseCase\n    LiveChatFeature --&gt; NavigateToProfileUseCase\n    LiveChatFeature --&gt; BlockUserUseCase\n\n    %% UseCase to Repository\n    ReloadCommentListUseCase --&gt; PrematchCommentRepository\n    PublishCommentUseCase --&gt; PrematchCommentRepository\n    ToggleLikeUseCase --&gt; PrematchCommentRepository\n    LoadRepliesUseCase --&gt; PrematchCommentRepository\n    SendChatMessageUseCase --&gt; LiveChatRepository\n    JoinChatroomUseCase --&gt; LiveChatRepository\n    LeaveChatroomUseCase --&gt; LiveChatRepository\n\n    %% Repository to Client\n    PrematchCommentRepository --&gt; PrematchCommentClient\n    LiveChatRepository --&gt; LiveChatClient\n    LiveChatRepository --&gt; ChatWebSocketClient\n\n    %% Client to API\n    PrematchCommentClient --&gt; PrematchCommentAPI\n    LiveChatClient --&gt; ChatAPI\n    ChatWebSocketClient --&gt; ChatAPI\n\n    %% Repository uses Domain Model\n    PrematchCommentRepository -.-&gt;|uses| Comment\n    PrematchCommentRepository -.-&gt;|uses| CommentMeta\n    PrematchCommentRepository -.-&gt;|uses| UserInfo\n    PrematchCommentRepository -.-&gt;|uses| SortMode\n    PrematchCommentRepository -.-&gt;|uses| Cursor\n    PrematchCommentRepository -.-&gt;|uses| PagingInfo\n    LiveChatRepository -.-&gt;|uses| Message\n    LiveChatRepository -.-&gt;|uses| ChatroomInfo\n\n    %% UseCase to Protocol\n    PublishCommentUseCase --&gt; FComSharedFlowAdapterProtocol\n    PublishCommentUseCase --&gt; PersonalPageAdapterProtocol\n    SendChatMessageUseCase --&gt; FComSharedFlowAdapterProtocol\n    SendChatMessageUseCase --&gt; PersonalPageAdapterProtocol\n    ToggleLikeUseCase --&gt; PersonalPageAdapterProtocol\n    NavigateToProfileUseCase --&gt; PersonalPageAdapterProtocol\n    PrematchCommentFeature --&gt; EventStatusNotifiableProtocol\n\n    %% Protocol to External Package (Adapter Implementation in Main App)\n    FComSharedFlowAdapterProtocol -.-&gt;|implements| FComSharedFlowPackage\n    PersonalPageAdapterProtocol -.-&gt;|implements| PersonalPagePackage\n    EventStatusNotifiableProtocol -.-&gt;|implements| FactsCenterPackage\n\n    %% Styling\n    classDef uiLayer fill:#CFE8FF\n    classDef domainLayer fill:#FFFACD\n    classDef protocolLayer fill:#FFE4E1,stroke:#FF6B6B,stroke-width:2px\n    classDef repositoryLayer fill:#E8F4F8\n    classDef clientLayer fill:#F0F8E8\n    classDef apiLayer fill:#FFF8E8\n    classDef domainModel fill:#E6E6FA\n    classDef externalPackage fill:#E6F3FF\n\n    class RaceDetailView,PrematchCommentView,LiveDetailView uiLayer\n    class PrematchCommentFeature,LiveChatFeature,ReloadCommentListUseCase,PublishCommentUseCase,ToggleLikeUseCase,LoadRepliesUseCase,NavigateToProfileUseCase,SendChatMessageUseCase,JoinChatroomUseCase,LeaveChatroomUseCase,BlockUserUseCase domainLayer\n    class FComSharedFlowAdapterProtocol,PersonalPageAdapterProtocol,EventStatusNotifiableProtocol protocolLayer\n    class PrematchCommentRepository,LiveChatRepository repositoryLayer\n    class PrematchCommentClient,LiveChatClient,ChatWebSocketClient clientLayer\n    class PrematchCommentAPI,ChatAPI apiLayer\n    class Comment,CommentMeta,UserInfo,Message,ChatroomInfo,SortMode,Cursor,PagingInfo domainModel\n    class FactsCenterPackage,PersonalPagePackage,FComSharedFlowPackage externalPackage</code></pre> <p>Mermaid \u8a9e\u6cd5\uff08\u53ef\u8907\u88fd\uff09\uff1a</p> <pre><code>flowchart TD\n    subgraph UILayer[\"UI Layer\"]\n        RaceDetailView[\"RaceDetailView\"]\n        PrematchCommentView[\"PrematchCommentView\"]\n        LiveDetailView[\"LiveDetailView\"]\n    end\n\n    subgraph DomainLayer[\"Domain Layer\"]\n        subgraph FeatureLayer[\"Feature Layer\"]\n            PrematchCommentFeature[\"PrematchCommentFeature\"]\n            LiveChatFeature[\"LiveChatFeature\"]\n        end\n        subgraph UseCaseLayer[\"UseCase Layer\"]\n            ReloadCommentListUseCase[\"ReloadCommentListUseCase\"]\n            PublishCommentUseCase[\"PublishCommentUseCase\"]\n            ToggleLikeUseCase[\"ToggleLikeUseCase\"]\n            LoadRepliesUseCase[\"LoadRepliesUseCase\"]\n            NavigateToProfileUseCase[\"NavigateToProfileUseCase\"]\n            SendChatMessageUseCase[\"SendChatMessageUseCase\"]\n            JoinChatroomUseCase[\"JoinChatroomUseCase\"]\n            LeaveChatroomUseCase[\"LeaveChatroomUseCase\"]\n            BlockUserUseCase[\"BlockUserUseCase\"]\n        end\n    end\n\n    subgraph DataInfraLayer[\"Data &amp; Infrastructure Layer\"]\n        subgraph RepositoryLayer[\"Repository Layer\"]\n            PrematchCommentRepository[\"PrematchCommentRepository\"]\n            LiveChatRepository[\"LiveChatRepository\"]\n        end\n        subgraph ClientLayer[\"Client Layer\"]\n            PrematchCommentClient[\"PrematchCommentClient (HTTP)\"]\n            LiveChatClient[\"LiveChatClient (HTTP)\"]\n            ChatWebSocketClient[\"ChatWebSocketClient (WebSocket)\"]\n        end\n        subgraph APILayer[\"API Layer\"]\n            PrematchCommentAPI[\"PrematchCommentAPI\"]\n            ChatAPI[\"ChatAPI\"]\n        end\n    end\n\n    subgraph DomainModelLayer[\"Domain Model Layer\"]\n        Comment[\"Comment (Entity)\"]\n        CommentMeta[\"CommentMeta (Entity)\"]\n        UserInfo[\"UserInfo (Entity)\"]\n        Message[\"Message (Entity)\"]\n        ChatroomInfo[\"ChatroomInfo (Entity)\"]\n        SortMode[\"SortMode (Value Object)\"]\n        Cursor[\"Cursor (Value Object)\"]\n        PagingInfo[\"PagingInfo (Value Object)\"]\n    end\n\n    subgraph ProtocolLayer[\"Protocol Layer\"]\n        FComSharedFlowAdapterProtocol[\"&amp;lt;FComSharedFlowAdapter&amp;gt;\"]\n        PersonalPageAdapterProtocol[\"&amp;lt;PersonalPageAdapter&amp;gt;\"]\n        EventStatusNotifiableProtocol[\"&amp;lt;EventStatusNotifiable&amp;gt;\"]\n    end\n\n    subgraph ExternalPackages[\"External Packages\"]\n        FactsCenterPackage[\"FactsCenter Package (External)\"]\n        PersonalPagePackage[\"PersonalPage Package (External)\"]\n        FComSharedFlowPackage[\"FComSharedFlow Package (External)\"]\n    end\n\n    %% UI to Feature\n    RaceDetailView --&gt; PrematchCommentFeature\n    PrematchCommentView --&gt; PrematchCommentFeature\n    LiveDetailView --&gt; LiveChatFeature\n\n    %% Feature to UseCase\n    PrematchCommentFeature --&gt; ReloadCommentListUseCase\n    PrematchCommentFeature --&gt; PublishCommentUseCase\n    PrematchCommentFeature --&gt; ToggleLikeUseCase\n    PrematchCommentFeature --&gt; LoadRepliesUseCase\n    PrematchCommentFeature --&gt; NavigateToProfileUseCase\n    LiveChatFeature --&gt; SendChatMessageUseCase\n    LiveChatFeature --&gt; JoinChatroomUseCase\n    LiveChatFeature --&gt; LeaveChatroomUseCase\n    LiveChatFeature --&gt; NavigateToProfileUseCase\n    LiveChatFeature --&gt; BlockUserUseCase\n\n    %% UseCase to Repository\n    ReloadCommentListUseCase --&gt; PrematchCommentRepository\n    PublishCommentUseCase --&gt; PrematchCommentRepository\n    ToggleLikeUseCase --&gt; PrematchCommentRepository\n    LoadRepliesUseCase --&gt; PrematchCommentRepository\n    SendChatMessageUseCase --&gt; LiveChatRepository\n    JoinChatroomUseCase --&gt; LiveChatRepository\n    LeaveChatroomUseCase --&gt; LiveChatRepository\n\n    %% Repository to Client\n    PrematchCommentRepository --&gt; PrematchCommentClient\n    LiveChatRepository --&gt; LiveChatClient\n    LiveChatRepository --&gt; ChatWebSocketClient\n\n    %% Client to API\n    PrematchCommentClient --&gt; PrematchCommentAPI\n    LiveChatClient --&gt; ChatAPI\n    ChatWebSocketClient --&gt; ChatAPI\n\n    %% Repository uses Domain Model\n    PrematchCommentRepository -.-&gt;|uses| Comment\n    PrematchCommentRepository -.-&gt;|uses| CommentMeta\n    PrematchCommentRepository -.-&gt;|uses| UserInfo\n    PrematchCommentRepository -.-&gt;|uses| SortMode\n    PrematchCommentRepository -.-&gt;|uses| Cursor\n    PrematchCommentRepository -.-&gt;|uses| PagingInfo\n    LiveChatRepository -.-&gt;|uses| Message\n    LiveChatRepository -.-&gt;|uses| ChatroomInfo\n\n    %% UseCase to Protocol\n    PublishCommentUseCase --&gt; FComSharedFlowAdapterProtocol\n    PublishCommentUseCase --&gt; PersonalPageAdapterProtocol\n    SendChatMessageUseCase --&gt; FComSharedFlowAdapterProtocol\n    SendChatMessageUseCase --&gt; PersonalPageAdapterProtocol\n    ToggleLikeUseCase --&gt; PersonalPageAdapterProtocol\n    NavigateToProfileUseCase --&gt; PersonalPageAdapterProtocol\n    PrematchCommentFeature --&gt; EventStatusNotifiableProtocol\n\n    %% Protocol to External Package (Adapter Implementation in Main App)\n    FComSharedFlowAdapterProtocol -.-&gt;|implements| FComSharedFlowPackage\n    PersonalPageAdapterProtocol -.-&gt;|implements| PersonalPagePackage\n    EventStatusNotifiableProtocol -.-&gt;|implements| FactsCenterPackage\n\n    %% Styling\n    classDef uiLayer fill:#CFE8FF\n    classDef domainLayer fill:#FFFACD\n    classDef protocolLayer fill:#FFE4E1,stroke:#FF6B6B,stroke-width:2px\n    classDef repositoryLayer fill:#E8F4F8\n    classDef clientLayer fill:#F0F8E8\n    classDef apiLayer fill:#FFF8E8\n    classDef domainModel fill:#E6E6FA\n    classDef externalPackage fill:#E6F3FF\n\n    class RaceDetailView,PrematchCommentView,LiveDetailView uiLayer\n    class PrematchCommentFeature,LiveChatFeature,ReloadCommentListUseCase,PublishCommentUseCase,ToggleLikeUseCase,LoadRepliesUseCase,NavigateToProfileUseCase,SendChatMessageUseCase,JoinChatroomUseCase,LeaveChatroomUseCase,BlockUserUseCase domainLayer\n    class FComSharedFlowAdapterProtocol,PersonalPageAdapterProtocol,EventStatusNotifiableProtocol protocolLayer\n    class PrematchCommentRepository,LiveChatRepository repositoryLayer\n    class PrematchCommentClient,LiveChatClient,ChatWebSocketClient clientLayer\n    class PrematchCommentAPI,ChatAPI apiLayer\n    class Comment,CommentMeta,UserInfo,Message,ChatroomInfo,SortMode,Cursor,PagingInfo domainModel\n    class FactsCenterPackage,PersonalPagePackage,FComSharedFlowPackage externalPackage\n</code></pre>"},{"location":"02_Architecture/01_clean_architecture_diagram/#_5","title":"\u5c64\u7d1a\u8aaa\u660e","text":"Layer \u5b50\u5c64\u7d1a \u8077\u8cac \u5305\u542b\u6a21\u7d44 UI Layer - 1. \u63a5\u6536\u4f7f\u7528\u8005\u4e92\u52d52. \u986f\u793a UI3. \u89f8\u767c Feature Action 1. RaceDetailView2. PrematchCommentView3. LiveDetailView Domain Layer Feature Layer 1. UI orchestration2. Action \u8f49\u63db3. State \u7ba1\u7406 1. PrematchCommentFeature2. LiveChatFeature Domain Layer UseCase Layer 1. \u57f7\u884c\u5546\u696d\u908f\u8f2f2. \u6574\u5408 Repository3. \u8655\u7406\u8de8 Feature \u7684\u5171\u7528\u908f\u8f2f4. \u8655\u7406\u8def\u7531\u8df3\u8f49\u908f\u8f2f 1. ReloadCommentListUseCase2. PublishCommentUseCase3. ToggleLikeUseCase4. LoadRepliesUseCase5. NavigateToProfileUseCase6. SendChatMessageUseCase7. JoinChatroomUseCase8. LeaveChatroomUseCase9. BlockUserUseCase Data &amp; Infrastructure Layer Repository Layer 1. Domain \u8cc7\u6599\u4f86\u6e90\u7684\u62bd\u8c61\u4ecb\u97622. \u547c\u53eb Client \u53d6\u5f97\u8cc7\u65993. DTO \u2192 Domain Model \u8f49\u63db 1. PrematchCommentRepository2. LiveChatRepository Data &amp; Infrastructure Layer Client Layer 1. HTTP \u901a\u8a0a2. WebSocket \u901a\u8a0a3. Request / Response \u7de8\u89e3\u78bc 1. PrematchCommentClient (HTTP)2. LiveChatClient (HTTP)3. ChatWebSocketClient (WebSocket) Data &amp; Infrastructure Layer API Layer 1. \u5b9a\u7fa9\u5f8c\u7aef endpoint2. URL / HTTP method / payload \u5f62\u72c0 1. PrematchCommentAPI2. ChatAPI Domain Model Layer Entity 1. \u6709\u552f\u4e00\u8b58\u5225\u78bc\u7684\u696d\u52d9\u7269\u4ef62. \u7d14\u8cc7\u6599\u7d50\u69cb\uff0c\u7121\u5546\u696d\u908f\u8f2f 1. Comment2. CommentMeta3. UserInfo4. Message5. ChatroomInfo Domain Model Layer Value Object 1. \u6c92\u6709\u552f\u4e00\u8b58\u5225\u78bc\uff0c\u900f\u904e\u503c\u6bd4\u8f032. \u5b8c\u5168\u4e0d\u53ef\u8b8a 1. SortMode2. Cursor3. PagingInfo"},{"location":"02_Architecture/01_clean_architecture_diagram/#domain-layer-feature-usecase","title":"Domain Layer \u8a2d\u8a08\u539f\u5247\uff1aFeature \u8207 UseCase \u7684\u62c6\u5206","text":""},{"location":"02_Architecture/01_clean_architecture_diagram/#feature-layer-usecase-layer","title":"Feature Layer \u8207 UseCase Layer \u7684\u8077\u8cac\u5206\u96e2","text":"<p>Feature Layer\uff08Thin Reducer\uff09\uff1a - \u2705 \u512a\u9ede\uff1a   - \u4fdd\u6301 Feature \u8f15\u91cf\uff0c\u5c08\u6ce8\u65bc UI orchestration   - \u6613\u65bc\u6e2c\u8a66\u548c\u7dad\u8b77   - \u5546\u696d\u908f\u8f2f\u96c6\u4e2d\u5728 UseCase\uff0c\u8077\u8cac\u6e05\u6670 - \u26a0\ufe0f \u7f3a\u9ede\uff1a   - \u9700\u8981\u984d\u5916\u7684 UseCase \u5c64\uff0c\u589e\u52a0\u67b6\u69cb\u8907\u96dc\u5ea6   - \u7c21\u55ae\u64cd\u4f5c\u4e5f\u9700\u8981\u7d93\u904e UseCase\uff0c\u53ef\u80fd\u904e\u5ea6\u8a2d\u8a08</p> <p>UseCase Layer\uff08Business Logic\uff09\uff1a - \u2705 \u512a\u9ede\uff1a   - \u5546\u696d\u908f\u8f2f\u96c6\u4e2d\u7ba1\u7406\uff0c\u6613\u65bc\u6e2c\u8a66   - \u53ef\u91cd\u7528\u6027\u9ad8\uff0c\u591a\u500b Feature \u53ef\u5171\u7528 UseCase   - \u7b26\u5408 Clean Architecture \u539f\u5247 - \u26a0\ufe0f \u7f3a\u9ede\uff1a   - \u7c21\u55ae\u64cd\u4f5c\u4e5f\u9700\u8981\u5efa\u7acb UseCase\uff0c\u53ef\u80fd\u589e\u52a0\u4ee3\u78bc\u91cf   - \u9700\u8981\u660e\u78ba\u7684 Input/Output Model \u5b9a\u7fa9</p>"},{"location":"02_Architecture/01_clean_architecture_diagram/#_6","title":"\u62c6\u5206\u539f\u5247","text":"<ol> <li>Feature \u8ca0\u8cac\uff1a</li> <li>UI event \u8f49\u63db\u70ba Action</li> <li>Action \u8f49\u63db\u70ba UseCase Input</li> <li>UseCase Output \u8f49\u63db\u70ba State \u66f4\u65b0</li> <li> <p>\u4e0d\u5305\u542b\u4efb\u4f55\u5546\u696d\u908f\u8f2f</p> </li> <li> <p>UseCase \u8ca0\u8cac\uff1a</p> </li> <li>\u6240\u6709\u5546\u696d\u908f\u8f2f</li> <li>\u8cc7\u6599\u9a57\u8b49\u8207\u6d41\u7a0b\u63a7\u5236</li> <li>Repository \u6574\u5408</li> <li>\u8de8 Feature \u5171\u7528\u908f\u8f2f</li> <li> <p>\u8def\u7531\u8df3\u8f49\u908f\u8f2f</p> </li> <li> <p>\u4f55\u6642\u9700\u8981 UseCase\uff1a</p> </li> <li>\u2705 \u6d89\u53ca\u5546\u696d\u908f\u8f2f\u6216\u9a57\u8b49</li> <li>\u2705 \u9700\u8981\u6574\u5408\u591a\u500b Repository</li> <li>\u2705 \u9700\u8981\u8655\u7406\u8de8 Feature \u5171\u7528\u908f\u8f2f</li> <li>\u2705 \u9700\u8981\u8def\u7531\u8df3\u8f49</li> <li>\u274c \u7d14 UI \u72c0\u614b\u66f4\u65b0\uff08\u53ef\u5728 Feature \u4e2d\u8655\u7406\uff09</li> </ol>"},{"location":"02_Architecture/01_clean_architecture_diagram/#_7","title":"\u4f9d\u8cf4\u65b9\u5411","text":"\u4f9d\u8cf4\u65b9\u5411 \u8aaa\u660e \u95dc\u4fc2\u985e\u578b UI \u2192 Feature View \u89f8\u767c Feature Action \u4f9d\u8cf4 Feature \u2192 UseCase Feature \u547c\u53eb UseCase \u57f7\u884c\u5546\u696d\u908f\u8f2f \u4f9d\u8cf4 UseCase \u2192 Repository UseCase \u547c\u53eb Repository \u53d6\u5f97\u8cc7\u6599 \u4f9d\u8cf4 Repository \u2192 Client Repository \u547c\u53eb Client \u9032\u884c\u7db2\u8def\u901a\u8a0a \u4f9d\u8cf4 Client \u2192 API Client \u547c\u53eb API \u5b9a\u7fa9\u7684 endpoint \u4f9d\u8cf4 Repository \u2192 Domain Model Repository \u4f7f\u7528 Domain Model \u4f5c\u70ba\u56de\u50b3\u985e\u578b \u4f7f\u7528 UseCase \u2192 Protocol UseCase \u4f9d\u8cf4 Protocol \u4f86\u4f7f\u7528\u5916\u90e8 Package \u529f\u80fd \u4f9d\u8cf4 Protocol \u2192 External Package Protocol \u7684\u5be6\u73fe\uff08Adapter\uff09\u4f7f\u7528 External Package \u5be6\u73fe"},{"location":"02_Architecture/01_clean_architecture_diagram/#_8","title":"\u7981\u6b62\u7684\u4f9d\u8cf4\u65b9\u5411","text":"<p>\u4ee5\u4e0b\u4f9d\u8cf4\u65b9\u5411\u4e00\u5f8b\u7981\u6b62\uff1a</p> <ul> <li>\u274c Feature \u76f4\u63a5\u547c\u53eb Repository \u6216 Client</li> <li>\u274c UseCase \u4f9d\u8cf4 UI / View / Feature</li> <li>\u274c Repository \u4f9d\u8cf4 UI / Feature / UseCase</li> <li>\u274c Client \u76f4\u63a5\u88ab View / Feature \u4f7f\u7528</li> <li>\u274c API \u88ab UseCase / Feature \u76f4\u63a5\u547c\u53eb</li> </ul>"},{"location":"02_Architecture/01_clean_architecture_diagram/#protocol-layer","title":"Protocol Layer \u8aaa\u660e","text":"Protocol \u5b9a\u7fa9\u4f4d\u7f6e \u88ab\u4f7f\u7528\u7684 UseCase \u5be6\u73fe\u4f4d\u7f6e \u4f7f\u7528\u7684 External Package &lt;FComSharedFlowAdapter&gt; PrematchComment PackageLiveChat Package PublishCommentUseCaseSendChatMessageUseCase Main App FComSharedFlow Package &lt;PersonalPageAdapter&gt; PrematchComment PackageLiveChat Package PublishCommentUseCaseSendChatMessageUseCaseToggleLikeUseCaseNavigateToProfileUseCase Main App PersonalPage Package &lt;EventStatusNotifiable&gt; PrematchComment Package PrematchCommentFeature Main App FactsCenter Package"},{"location":"02_Architecture/01_clean_architecture_diagram/#package","title":"\u5916\u90e8 Package \u6574\u5408","text":"External Package \u985e\u578b \u4f7f\u7528\u5834\u666f \u6574\u5408\u65b9\u5f0f FactsCenter Package External Event Status \u8a02\u95b1\u8207\u901a\u77e5 \u900f\u904e &lt;EventStatusNotifiable&gt; Protocol\uff08Feature \u5c64\u63a5\u6536\u901a\u77e5\uff09 PersonalPage Package External \u767b\u5165\u6d41\u7a0b \u900f\u904e &lt;PersonalPageAdapter&gt; Protocol\uff08UseCase \u5c64\u4f7f\u7528\uff09 FComSharedFlow Package External Nickname \u5efa\u7acb \u900f\u904e &lt;FComSharedFlowAdapter&gt; Protocol\uff08UseCase \u5c64\u4f7f\u7528\uff09 <p>\u6ce8\u610f\uff1a - Protocol \u5b9a\u7fa9\u5728 PrematchComment Package \u6216 LiveChat Package \u4e2d - Protocol \u7684\u5be6\u73fe\uff08Adapter Implementation\uff09\u653e\u5728 Main App \u4e2d - UseCase \u4f9d\u8cf4 Protocol\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u4f9d\u8cf4 External Package - FactsCenter Package \u7684\u7279\u6b8a\u60c5\u6cc1\uff1aEvent Status \u901a\u77e5\u662f\u5f9e\u5916\u90e8\u4e3b\u52d5\u63a8\u9001\uff0c\u56e0\u6b64 Feature \u5c64\u5be6\u73fe Protocol \u4f86\u63a5\u6536\u901a\u77e5</p>"},{"location":"02_Architecture/01_clean_architecture_diagram/#_9","title":"\u6a21\u7d44\u8aaa\u660e","text":""},{"location":"02_Architecture/01_clean_architecture_diagram/#ui-layer","title":"UI Layer \u6a21\u7d44","text":"\u6a21\u7d44\u540d\u7a31 \u8077\u8cac RaceDetailView \u8cfd\u4e8b\u8a73\u60c5\u9801\u9762\uff0c\u986f\u793a\u8cfd\u4e8b\u8cc7\u8a0a\u548c\u7559\u8a00\u7d71\u8a08 PrematchCommentView \u8cfd\u524d\u7559\u8a00\u9801\u9762\uff0c\u986f\u793a\u7559\u8a00\u5217\u8868\u548c\u4e92\u52d5\u529f\u80fd LiveDetailView \u76f4\u64ad\u8a73\u60c5\u9801\u9762\uff0c\u986f\u793a\u5373\u6642\u804a\u5929\u5ba4"},{"location":"02_Architecture/01_clean_architecture_diagram/#domain-layer","title":"Domain Layer \u6a21\u7d44","text":"\u6a21\u7d44\u540d\u7a31 \u5c64\u7d1a \u8077\u8cac PrematchCommentFeature Feature Layer TCA Reducer\uff0c\u7ba1\u7406\u8a55\u8ad6\u76f8\u95dc\u7684 State \u548c Action LiveChatFeature Feature Layer TCA Reducer\uff0c\u7ba1\u7406\u804a\u5929\u5ba4\u76f8\u95dc\u7684 State \u548c Action ReloadCommentListUseCase UseCase Layer \u8f09\u5165\u8a55\u8ad6\u5217\u8868\uff08\u652f\u63f4 top/newest \u6a21\u5f0f\uff09 PublishCommentUseCase UseCase Layer \u767c\u9001\u7559\u8a00\u6216\u56de\u8986 ToggleLikeUseCase UseCase Layer \u5207\u63db Like \u72c0\u614b\uff08Optimistic UI\uff09 LoadRepliesUseCase UseCase Layer \u8f09\u5165\u56de\u8986\u5217\u8868\uff08\u5206\u9801\uff09 NavigateToProfileUseCase UseCase Layer \u8655\u7406\u8df3\u8f49\u5230\u500b\u4eba\u4e3b\u9801\u7684\u908f\u8f2f SendChatMessageUseCase UseCase Layer \u767c\u9001\u804a\u5929\u8a0a\u606f JoinChatroomUseCase UseCase Layer \u52a0\u5165\u804a\u5929\u5ba4\u4e26\u8f09\u5165\u6b77\u53f2\u8a0a\u606f LeaveChatroomUseCase UseCase Layer \u96e2\u958b\u804a\u5929\u5ba4\u4e26\u6e05\u7406\u5feb\u53d6 BlockUserUseCase UseCase Layer \u8655\u7406\u5c01\u9396\u7528\u6236\u7684\u908f\u8f2f"},{"location":"02_Architecture/01_clean_architecture_diagram/#usecase","title":"UseCase \u62c6\u5206\u8207\u5408\u4f75\u539f\u5247","text":""},{"location":"02_Architecture/01_clean_architecture_diagram/#usecase_1","title":"\u62c6\u5206\u539f\u5247\uff08\u4f55\u6642\u61c9\u8a72\u62c6\u5206 UseCase\uff09","text":"<p>\u4ee5\u4e0b\u60c5\u6cc1\u5fc5\u9808\u62c6\u5206\u70ba\u4e0d\u540c\u7684 UseCase\uff1a</p> <ol> <li>Domain \u898f\u5247\u4e0d\u540c</li> <li>\u4e0d\u540c\u7684\u9a57\u8b49\u908f\u8f2f</li> <li>\u4e0d\u540c\u7684\u524d\u5f8c\u689d\u4ef6</li> <li> <p>\u4e0d\u540c\u7684\u98a8\u96aa\u63a7\u7ba1\uff08\u5982\u91d1\u878d\u4ea4\u6613 vs \u5167\u5bb9\u7de8\u8f2f\uff09</p> </li> <li> <p>\u526f\u4f5c\u7528\uff08Side-effect\uff09\u4e0d\u540c</p> </li> <li>\u5beb\u5165\u4e0d\u540c\u7684\u8cc7\u6e90</li> <li>\u89f8\u767c\u4e0d\u540c\u7684\u901a\u77e5\u6216\u4e8b\u4ef6</li> <li> <p>\u8b8a\u66f4\u4e0d\u540c\u7684\u4e0a\u4e0b\u6587\u72c0\u614b</p> </li> <li> <p>\u8de8 Bounded Context</p> </li> <li>\u4e0d\u540c\u7684 Domain boundary</li> <li> <p>\u4e0d\u540c\u7684\u696d\u52d9\u9818\u57df\uff08\u5982\u4f7f\u7528\u8005 Domain vs \u8a02\u55ae Domain\uff09</p> </li> <li> <p>\u6280\u8853\u6a21\u578b\u4e0d\u540c</p> </li> <li>HTTP API vs WebSocket</li> <li>Local Storage vs Remote API</li> <li>Background Task vs Real-time</li> </ol>"},{"location":"02_Architecture/01_clean_architecture_diagram/#usecase_2","title":"\u5408\u4f75\u539f\u5247\uff08\u4f55\u6642\u61c9\u8a72\u5408\u4f75 UseCase\uff09","text":"<p>\u4ee5\u4e0b\u60c5\u6cc1\u61c9\u8a72\u5408\u4f75\u70ba\u540c\u4e00\u500b UseCase\uff1a</p> <ol> <li>\u540c\u4e00\u8cc7\u6e90\u3001\u540c\u4e00\u6280\u8853\u884c\u70ba</li> <li>\u64cd\u4f5c\u7684 Domain \u8cc7\u6e90\u76f8\u540c\uff08\u5982\u540c\u4e00 List\u3001\u540c\u4e00 Item\uff09</li> <li>\u884c\u70ba\u578b\u614b\u76f8\u540c\uff08\u90fd\u662f\u8b80\u53d6\u6216\u90fd\u662f\u4fee\u6539\uff09</li> <li> <p>\u610f\u5716\u4e00\u81f4\uff0c\u50c5 UI \u89f8\u767c\u65b9\u5f0f\u4e0d\u540c\uff08init\u3001refresh\u3001switch\u3001retry\uff09</p> </li> <li> <p>\u4f7f\u7528 Input Model \u8868\u9054\u5dee\u7570</p> </li> <li>\u900f\u904e <code>triggerType</code>\uff08init / refresh / switch / retry\uff09\u5340\u5206</li> <li>\u900f\u904e <code>mode</code>\uff08\u6392\u5e8f\u65b9\u5f0f\u3001\u4f86\u6e90\uff09\u5340\u5206</li> <li>\u900f\u904e <code>filterType</code>\u3001<code>contextInfo</code> \u7b49\u6b04\u4f4d\u5340\u5206</li> </ol>"},{"location":"02_Architecture/01_clean_architecture_diagram/#_10","title":"\u547d\u540d\u539f\u5247","text":"<p>\u2705 \u6b63\u78ba\u547d\u540d\uff08\u4ee5 Domain \u884c\u70ba\u547d\u540d\uff09\uff1a - <code>ReloadCommentListUseCase</code>\uff08\u8f09\u5165\u8a55\u8ad6\u5217\u8868\uff09 - <code>PublishCommentUseCase</code>\uff08\u767c\u9001\u7559\u8a00\uff09 - <code>ToggleLikeUseCase</code>\uff08\u5207\u63db Like \u72c0\u614b\uff09 - <code>NavigateToProfileUseCase</code>\uff08\u8df3\u8f49\u500b\u4eba\u4e3b\u9801\uff09</p> <p>\u274c \u932f\u8aa4\u547d\u540d\uff08\u4ee5 UI \u884c\u70ba\u547d\u540d\uff09\uff1a - <code>InitLoadUseCase</code>\uff08\u61c9\u5408\u4f75\u5230 ReloadCommentListUseCase\uff09 - <code>RefreshButtonUseCase</code>\uff08\u61c9\u5408\u4f75\u5230 ReloadCommentListUseCase\uff09 - <code>TabSwitchUseCase</code>\uff08\u61c9\u5408\u4f75\u5230 ReloadCommentListUseCase\uff09</p>"},{"location":"02_Architecture/01_clean_architecture_diagram/#usecase_3","title":"\u672c\u5c08\u6848 UseCase \u62c6\u5206\u7bc4\u4f8b","text":"<p>\u5408\u4f75\u7bc4\u4f8b\uff1a - <code>ReloadCommentListUseCase</code>\uff1a\u5408\u4f75\u4e86\u521d\u59cb\u5316\u8f09\u5165\u3001\u624b\u52d5\u5237\u65b0\u3001\u5207\u63db\u6a19\u7c64\uff08top/newest\uff09\u7b49\u884c\u70ba\uff0c\u900f\u904e Input Model \u7684 <code>triggerType</code> \u548c <code>mode</code> \u5340\u5206</p> <p>\u62c6\u5206\u7bc4\u4f8b\uff1a - <code>PublishCommentUseCase</code> vs <code>ToggleLikeUseCase</code>\uff1a\u96d6\u7136\u90fd\u662f\u64cd\u4f5c Comment\uff0c\u4f46 Domain \u898f\u5247\u4e0d\u540c\uff08\u767c\u9001\u7559\u8a00 vs \u5207\u63db\u72c0\u614b\uff09\uff0c\u56e0\u6b64\u62c6\u5206 - <code>JoinChatroomUseCase</code> vs <code>LeaveChatroomUseCase</code>\uff1a\u96d6\u7136\u90fd\u662f\u804a\u5929\u5ba4\u64cd\u4f5c\uff0c\u4f46\u526f\u4f5c\u7528\u4e0d\u540c\uff08\u52a0\u5165\u4e26\u8f09\u5165\u6b77\u53f2\u8a0a\u606f vs \u96e2\u958b\u4e26\u6e05\u7406\u5feb\u53d6\uff09\uff0c\u56e0\u6b64\u62c6\u5206</p>"},{"location":"02_Architecture/01_clean_architecture_diagram/#data-infrastructure-layer","title":"Data &amp; Infrastructure Layer \u6a21\u7d44","text":"\u6a21\u7d44\u540d\u7a31 \u5c64\u7d1a \u8077\u8cac \u4f7f\u7528\u7684 Client / API PrematchCommentRepository Repository Layer Domain \u8cc7\u6599\u4f86\u6e90\u7684\u62bd\u8c61\u4ecb\u9762\uff08\u8a55\u8ad6\u76f8\u95dc\uff09 PrematchCommentClient \u2192 PrematchCommentAPI LiveChatRepository Repository Layer Domain \u8cc7\u6599\u4f86\u6e90\u7684\u62bd\u8c61\u4ecb\u9762\uff08\u804a\u5929\u5ba4\u76f8\u95dc\uff09 LiveChatClient \u2192 ChatAPIChatWebSocketClient \u2192 ChatAPI PrematchCommentClient Client Layer HTTP \u901a\u8a0a\uff08\u8a55\u8ad6\u76f8\u95dc\uff09 PrematchCommentAPI LiveChatClient Client Layer HTTP \u901a\u8a0a\uff08\u804a\u5929\u5ba4\u76f8\u95dc\uff09 ChatAPI ChatWebSocketClient Client Layer WebSocket \u901a\u8a0a\uff08\u5373\u6642\u8a0a\u606f\uff09 ChatAPI PrematchCommentAPI API Layer \u5f8c\u7aef endpoint \u5b9a\u7fa9\uff08\u8a55\u8ad6\u76f8\u95dc\uff09 - ChatAPI API Layer \u5f8c\u7aef endpoint \u5b9a\u7fa9\uff08\u804a\u5929\u5ba4\u76f8\u95dc\uff09 -"},{"location":"02_Architecture/01_clean_architecture_diagram/#domain-model-layer","title":"Domain Model Layer \u6a21\u7d44","text":"\u6a21\u7d44\u540d\u7a31 \u985e\u578b \u8077\u8cac Comment Entity \u7559\u8a00\u5be6\u9ad4\uff0c\u5305\u542b id\u3001content\u3001likeCount \u7b49 CommentMeta Entity \u7559\u8a00\u7d71\u8a08\u8cc7\u8a0a\u5be6\u9ad4\uff0c\u5305\u542b commentCount\u3001betCount \u7b49 UserInfo Entity \u7528\u6236\u8cc7\u8a0a\u5be6\u9ad4\uff0c\u5305\u542b id\u3001nickname \u7b49 Message Entity \u804a\u5929\u8a0a\u606f\u5be6\u9ad4\uff0c\u5305\u542b id\u3001content\u3001messageNo \u7b49 ChatroomInfo Entity \u804a\u5929\u5ba4\u8cc7\u8a0a\u5be6\u9ad4\uff0c\u5305\u542b chatroomId\u3001lastMessageNo \u7b49 SortMode Value Object \u6392\u5e8f\u6a21\u5f0f\uff08top / newest\uff09 Cursor Value Object \u5206\u9801\u6e38\u6a19 PagingInfo Value Object \u5206\u9801\u8cc7\u8a0a\uff0c\u5305\u542b hasMore\u3001nextCursor \u7b49"},{"location":"03_Module%20Responsibility/","title":"Module Responsibility \u7ae0\u7bc0\u8aaa\u660e","text":"<p>\u672c\u76ee\u9304\u5305\u542b TDD \u6587\u4ef6\u7684 Module Responsibility \u7ae0\u7bc0\uff0c\u5217\u51fa\u4e26\u8aaa\u660e\u6240\u6709\u6a21\u7d44\u7684\u8077\u8cac\u3002</p>"},{"location":"03_Module%20Responsibility/#_1","title":"\u6587\u4ef6\u5217\u8868","text":"<ul> <li><code>01_module_responsibility.md</code> - \u6a21\u7d44\u8077\u8cac\u8aaa\u660e</li> </ul>"},{"location":"03_Module%20Responsibility/#_2","title":"\u8aaa\u660e","text":"<p>Module Responsibility \u7ae0\u7bc0\u5305\u542b\uff1a</p> <ul> <li>Feature Modules\uff08Thin Reducer\uff09</li> <li>UseCase Modules</li> <li>Repository Modules</li> <li>Client Modules</li> <li>API Modules</li> <li>Shared Modules\uff08\u5982\u9069\u7528\uff09</li> </ul> <p>\u6240\u6709\u8aaa\u660e\u4f7f\u7528\u8868\u683c\u5448\u73fe\uff0c\u4ee5\u4fbf\u5feb\u901f\u67e5\u627e\u8207\u6bd4\u8f03\u3002</p>"},{"location":"03_Module%20Responsibility/01_module_responsibility/","title":"\u6a21\u7d44\u8077\u8cac\u8aaa\u660e","text":""},{"location":"03_Module%20Responsibility/01_module_responsibility/#feature-modules","title":"Feature Modules","text":"\u6a21\u7d44\u540d\u7a31 \u5c64\u7d1a \u8077\u8cac \u4f7f\u7528\u7684 UseCase \u4e0d\u5305\u542b PrematchCommentFeature Domain Layer - Feature Layer 1. UI orchestration\uff08\u5c07 UI event \u8f49\u6210 Action\uff092. \u5c07 Action \u8f49\u70ba UseCase Input3. \u547c\u53eb UseCase4. \u63a5\u6536 UseCase Output \u66f4\u65b0 State5. \u8655\u7406 Event Status \u901a\u77e5 1. ReloadCommentListUseCase2. PublishCommentUseCase3. ToggleLikeUseCase4. LoadRepliesUseCase5. NavigateToProfileUseCase 1. \u5546\u696d\u908f\u8f2f2. \u8cc7\u6599\u5b58\u53d6\u908f\u8f2f LiveChatFeature Domain Layer - Feature Layer 1. UI orchestration\uff08\u5c07 UI event \u8f49\u6210 Action\uff092. \u5c07 Action \u8f49\u70ba UseCase Input3. \u547c\u53eb UseCase4. \u63a5\u6536 UseCase Output \u66f4\u65b0 State5. \u7ba1\u7406 WebSocket \u9023\u7dda\u72c0\u614b 1. SendChatMessageUseCase2. JoinChatroomUseCase3. LeaveChatroomUseCase4. NavigateToProfileUseCase5. BlockUserUseCase 1. \u5546\u696d\u908f\u8f2f2. \u8cc7\u6599\u5b58\u53d6\u908f\u8f2f"},{"location":"03_Module%20Responsibility/01_module_responsibility/#usecase-modules","title":"UseCase Modules","text":"UseCase \u540d\u7a31 \u5c64\u7d1a \u8077\u8cac Input Model Output Model \u4f7f\u7528\u7684 Repository \u4f7f\u7528\u7684 Shared Feature ReloadCommentListUseCase Domain Layer - UseCase Layer 1. \u8f09\u5165\u7559\u8a00\u5217\u88682. \u652f\u63f4 top / newest \u6a21\u5f0f3. \u652f\u63f4\u521d\u59cb\u5316\u3001\u5237\u65b0\u3001\u5207\u63db\u6a19\u7c64\u7b49\u89f8\u767c\u65b9\u5f0f 1. <code>refId: String</code>2. <code>triggerType: TriggerType</code>\uff08init / refresh / switch\uff093. <code>mode: SortMode</code>\uff08top / newest\uff094. <code>cursor: Cursor?</code>\uff08\u53ef\u9078\uff09 1. <code>comments: [Comment]</code>2. <code>pagingInfo: PagingInfo?</code> PrematchCommentRepository - PublishCommentUseCase Domain Layer - UseCase Layer 1. \u767c\u9001\u7559\u8a00\u6216\u56de\u89862. \u6aa2\u67e5\u767b\u5165\u72c0\u614b\uff08\u900f\u904e Main App\uff093. \u6aa2\u67e5 nickname\uff08\u900f\u904e Main App\uff094. \u82e5\u7121 nickname \u5247\u8abf\u7528 FComSharedFlow Package \u5efa\u7acb 1. <code>refId: String</code>2. <code>content: String</code>3. <code>parentId: String?</code>\uff08\u53ef\u9078\uff0c\u7528\u65bc\u56de\u8986\uff09 1. <code>comment: Comment</code> PrematchCommentRepository 1. PersonalPage Package\uff08External\uff092. FComSharedFlow Package\uff08External\uff09 ToggleLikeUseCase Domain Layer - UseCase Layer 1. \u5207\u63db Like \u72c0\u614b2. \u6aa2\u67e5\u767b\u5165\u72c0\u614b\uff08\u900f\u904e Main App\uff093. Optimistic UI \u66f4\u65b04. \u540c\u6b65 Like \u72c0\u614b\u5230\u4f3a\u670d\u5668 1. <code>commentId: String</code> 1. <code>comment: Comment</code>\uff08\u66f4\u65b0\u5f8c\u7684 Comment\uff09 PrematchCommentRepository PersonalPage Package\uff08External\uff09 LoadRepliesUseCase Domain Layer - UseCase Layer 1. \u8f09\u5165\u56de\u8986\u5217\u88682. \u5206\u9801\u8f09\u5165\uff08\u6bcf\u6b21\u6700\u591a 5 \u7b46\uff093. \u4f7f\u7528 cursor \u6a5f\u5236\u8ffd\u8e64\u5206\u9801\u4f4d\u7f6e 1. <code>commentId: String</code>2. <code>cursor: Cursor?</code>\uff08\u53ef\u9078\uff09 1. <code>replies: [Comment]</code>2. <code>pagingInfo: PagingInfo</code> PrematchCommentRepository - SendChatMessageUseCase Domain Layer - UseCase Layer 1. \u767c\u9001\u804a\u5929\u8a0a\u606f2. \u6aa2\u67e5\u767b\u5165\u72c0\u614b\uff08\u900f\u904e Main App\uff093. \u6aa2\u67e5 nickname\uff08\u900f\u904e Main App\uff094. \u82e5\u7121 nickname \u5247\u8abf\u7528 FComSharedFlow Package \u5efa\u7acb 1. <code>chatroomId: String</code>2. <code>content: String</code>3. <code>messageType: MessageType</code> 1. <code>message: Message</code> LiveChatRepository 1. PersonalPage Package\uff08External\uff092. FComSharedFlow Package\uff08External\uff09 JoinChatroomUseCase Domain Layer - UseCase Layer 1. \u52a0\u5165\u804a\u5929\u5ba42. \u8f09\u5165\u6b77\u53f2\u8a0a\u606f3. \u5c07\u6b77\u53f2\u8a0a\u606f\u8207 WebSocket \u8a0a\u606f\u5408\u4f754. \u4f9d messageNo \u53bb\u91cd 1. <code>refId: String</code> 1. <code>chatroomInfo: ChatroomInfo</code>2. <code>messages: [Message]</code> LiveChatRepository - LeaveChatroomUseCase Domain Layer - UseCase Layer 1. \u96e2\u958b\u804a\u5929\u5ba42. \u6e05\u9664\u5feb\u53d6\u7684\u8a0a\u606f3. \u57f7\u884c\u9ed1\u540d\u55ae\u6aa2\u67e5\u8207\u6e05\u7406\uff084 \u5c0f\u6642\u81ea\u52d5\u6e05\u7406\uff09 1. <code>chatroomId: String</code> - LiveChatRepository - NavigateToProfileUseCase Domain Layer - UseCase Layer 1. \u8655\u7406\u8df3\u8f49\u5230\u500b\u4eba\u4e3b\u9801\u7684\u908f\u8f2f2. \u900f\u904e PersonalPageAdapter Protocol \u57f7\u884c\u8def\u7531\u8df3\u8f49 1. <code>userId: String</code> - - PersonalPageAdapter Protocol BlockUserUseCase Domain Layer - UseCase Layer 1. \u8655\u7406\u5c01\u9396\u7528\u6236\u7684\u908f\u8f2f2. \u5c07\u8a72\u7528\u6236\u52a0\u5165\u9ed1\u540d\u55ae DB3. WebSocket \u91cd\u9023\u5f8c\u540c\u6b65 blocked user \u6e05\u55ae 1. <code>userId: String</code>2. <code>eventId: String</code>3. <code>timestamp: Date</code> - LiveChatRepository -"},{"location":"03_Module%20Responsibility/01_module_responsibility/#repository-modules","title":"Repository Modules","text":"Repository \u540d\u7a31 \u5c64\u7d1a \u8077\u8cac \u63d0\u4f9b\u7684\u65b9\u6cd5 \u4f7f\u7528\u7684 Client \u88ab\u4f7f\u7528\u7684 Feature \u5099\u8a3b PrematchCommentRepository Data &amp; Infrastructure Layer - Repository Layer 1. Domain \u8cc7\u6599\u4f86\u6e90\u7684\u62bd\u8c61\u4ecb\u9762\uff08\u8a55\u8ad6\u76f8\u95dc\uff092. \u547c\u53eb Client \u53d6\u5f97\u6216\u66f4\u65b0\u9060\u7aef\u8cc7\u65993. \u8ca0\u8cac\u5c07 DTO \u8f49\u63db\u70ba Domain Model 1. <code>getUserInfo() async throws -&gt; UserInfo</code>2. <code>getCommentMeta(refId: String) async throws -&gt; CommentMeta</code>3. <code>getComments(refId: String, mode: SortMode, cursor: Cursor?) async throws -&gt; ([Comment], PagingInfo)</code>4. <code>publishComment(refId: String, content: String, parentId: String?) async throws -&gt; Comment</code>5. <code>toggleLike(commentId: String) async throws -&gt; Comment</code>6. <code>getReplies(commentId: String, cursor: Cursor?) async throws -&gt; ([Comment], PagingInfo)</code> PrematchCommentClient PrematchCommentFeature \u6240\u6709\u65b9\u6cd5\u90fd\u8ca0\u8cac DTO \u2192 Domain Model \u8f49\u63db LiveChatRepository Data &amp; Infrastructure Layer - Repository Layer 1. Domain \u8cc7\u6599\u4f86\u6e90\u7684\u62bd\u8c61\u4ecb\u9762\uff08\u804a\u5929\u5ba4\u76f8\u95dc\uff092. \u547c\u53eb Client \u53d6\u5f97\u6216\u66f4\u65b0\u9060\u7aef\u8cc7\u65993. \u8ca0\u8cac\u5c07 DTO \u8f49\u63db\u70ba Domain Model4. \u7ba1\u7406 WebSocket \u9023\u7dda 1. <code>getChatroomInfo(refId: String) async throws -&gt; ChatroomInfo</code>2. <code>joinChatroom(chatroomId: String) async throws -&gt; Void</code>3. <code>loadHistoricalMessages(chatroomId: String, lastMessageNo: Int) async throws -&gt; [Message]</code>4. <code>sendMessage(chatroomId: String, content: String, messageType: MessageType) async throws -&gt; Message</code>5. <code>leaveChatroom(chatroomId: String) async throws -&gt; Void</code>6. <code>subscribeWebSocket() async throws -&gt; Void</code>7. <code>unsubscribeWebSocket() async throws -&gt; Void</code> LiveChatClientChatWebSocketClient LiveChatFeature 1. \u6240\u6709\u65b9\u6cd5\u90fd\u8ca0\u8cac DTO \u2192 Domain Model \u8f49\u63db2. WebSocket \u9023\u7dda\u7ba1\u7406"},{"location":"03_Module%20Responsibility/01_module_responsibility/#client-modules","title":"Client Modules","text":"Client \u540d\u7a31 \u5c64\u7d1a \u6280\u8853 \u8077\u8cac \u4f7f\u7528\u7684 API \u88ab\u4f7f\u7528\u7684 Feature \u5099\u8a3b PrematchCommentClient Data &amp; Infrastructure Layer - Client Layer HTTP 1. HTTP \u901a\u8a0a\uff08\u8a55\u8ad6\u76f8\u95dc\uff092. Request / Response \u7de8\u89e3\u78bc3. \u932f\u8aa4\u8655\u7406 PrematchCommentAPI PrematchCommentFeature - LiveChatClient Data &amp; Infrastructure Layer - Client Layer HTTP 1. HTTP \u901a\u8a0a\uff08\u804a\u5929\u5ba4\u76f8\u95dc\uff092. Request / Response \u7de8\u89e3\u78bc3. \u932f\u8aa4\u8655\u7406 ChatAPI LiveChatFeature - ChatWebSocketClient Data &amp; Infrastructure Layer - Client Layer WebSocket 1. WebSocket \u901a\u8a0a\uff08\u5373\u6642\u8a0a\u606f\uff092. \u8a02\u95b1 / \u53d6\u6d88\u8a02\u95b13. \u8a0a\u606f\u63a5\u6536\u8207\u767c\u90014. \u9023\u7dda\u7ba1\u7406\uff08\u91cd\u9023\u3001\u5fc3\u8df3\u7b49\uff09 ChatAPI LiveChatFeature 1. WebSocket \u7aef\u9ede\uff1awss://www.encorebet.net/chat/websocket/web-chat2. \u652f\u63f4\u91cd\u9023\u6a5f\u5236"},{"location":"03_Module%20Responsibility/01_module_responsibility/#api-modules","title":"API Modules","text":"API \u540d\u7a31 \u5c64\u7d1a \u8077\u8cac Endpoints \u53ea\u80fd\u88ab \u88ab\u4f7f\u7528\u7684 Feature \u5099\u8a3b PrematchCommentAPI Data &amp; Infrastructure Layer - API Layer \u5f8c\u7aef endpoint \u5b9a\u7fa9\uff08\u8a55\u8ad6\u76f8\u95dc\uff09 1. <code>POST /chat/match/comment/batch/info</code>2. <code>GET /chat/match/comment/info/{refId}</code>3. <code>GET /chat/match/comment/popular</code>4. <code>GET /chat/match/comment/newest</code>5. <code>GET /chat/match/comment/replies</code>6. <code>POST /chat/match/comment</code>7. <code>POST /chat/match/comment/like</code> PrematchCommentClient PrematchCommentFeature 1. \u6279\u91cf API \u7528\u65bc\u6279\u91cf\u7372\u53d6\u8a55\u8ad6\u8cc7\u8a0a ChatAPI Data &amp; Infrastructure Layer - API Layer \u5f8c\u7aef endpoint \u5b9a\u7fa9\uff08\u804a\u5929\u5ba4\u76f8\u95dc\uff09 1. <code>POST /chat/match/batch/count</code>2. <code>GET /chat/match/{refId}</code>3. <code>GET /chat/match/backward</code>4. <code>POST /chat/match/message</code>5. <code>wss://{domain}/chat/websocket/web-chat</code>\uff08WebSocket\uff09 LiveChatClientChatWebSocketClient LiveChatFeature 1. WebSocket \u7aef\u9ede\u7528\u65bc\u5373\u6642\u8a0a\u606f\u50b3\u905e2. \u50c5\u652f\u63f4 TEXT \u985e\u578b\u7684\u8a0a\u606f"},{"location":"03_Module%20Responsibility/01_module_responsibility/#shared-modules","title":"Shared Modules","text":"Shared Module \u540d\u7a31 \u5c64\u7d1a \u8077\u8cac \u63d0\u4f9b\u7684\u65b9\u6cd5 \u88ab\u4f7f\u7528\u7684 Feature \u5171\u7528\u539f\u56e0 PersonalPage Package\uff08External\uff09 External Package 1. \u767b\u5165\u6d41\u7a0b2. \u7528\u6236\u8a8d\u8b49 1. <code>route(to: .personalPage)</code>2. \u767b\u5165\u5b8c\u6210\u5f8c\u56de\u8df3\u81f3\u539f\u9801\u9762 1. PrematchCommentFeature2. LiveChatFeature 1. \u7528\u6236\u8eab\u4efd\u8a8d\u8b492. \u767b\u5165\u72c0\u614b\u6aa2\u67e5 FComSharedFlow Package\uff08External\uff09 External Package 1. Nickname \u5efa\u7acb\u6d41\u7a0b2. \u986f\u793a create nickName pop-up 1. <code>CreatNickName API</code> 1. PrematchCommentFeature2. LiveChatFeature 1. Nickname \u7ba1\u74062. \u7528\u6236\u8cc7\u8a0a\u5efa\u7acb FactsCenter Package\uff08External\uff09 External Package 1. Event Status \u8a02\u95b12. Event Status \u901a\u77e5 1. <code>eventStatus(didChange status: Int)</code>\uff08interface\uff09 PrematchCommentFeature 1. Event Status \u7ba1\u74062. \u8cfd\u4e8b\u72c0\u614b\u540c\u6b65"},{"location":"03_Module%20Responsibility/01_module_responsibility/#_2","title":"\u6a21\u7d44\u6536\u6582\u8aaa\u660e","text":""},{"location":"03_Module%20Responsibility/01_module_responsibility/#repository","title":"Repository \u6536\u6582","text":"<ul> <li>PrematchCommentRepository\uff1a\u6536\u6582\u6240\u6709\u8a55\u8ad6\u76f8\u95dc\u7684\u8b80\u5beb\u64cd\u4f5c\uff08getComments\u3001publishComment\u3001toggleLike\u3001getReplies \u7b49\uff09</li> <li>LiveChatRepository\uff1a\u6536\u6582\u6240\u6709\u804a\u5929\u5ba4\u76f8\u95dc\u7684\u8b80\u5beb\u64cd\u4f5c\uff08getChatroomInfo\u3001joinChatroom\u3001sendMessage \u7b49\uff09</li> </ul>"},{"location":"03_Module%20Responsibility/01_module_responsibility/#client","title":"Client \u6536\u6582","text":"<ul> <li>PrematchCommentClient\uff1a\u6536\u6582\u6240\u6709\u8a55\u8ad6\u76f8\u95dc\u7684 HTTP \u901a\u8a0a</li> <li>LiveChatClient\uff1a\u6536\u6582\u6240\u6709\u804a\u5929\u5ba4\u76f8\u95dc\u7684 HTTP \u901a\u8a0a</li> <li>ChatWebSocketClient\uff1a\u7368\u7acb\u65bc HTTP Client\uff0c\u5c08\u9580\u8655\u7406 WebSocket \u901a\u8a0a</li> </ul>"},{"location":"03_Module%20Responsibility/01_module_responsibility/#usecase","title":"UseCase \u6536\u6582","text":"<ul> <li>ReloadCommentListUseCase\uff1a\u6536\u6582\u6240\u6709\u8f09\u5165\u7559\u8a00\u5217\u8868\u7684\u884c\u70ba\uff08\u521d\u59cb\u5316\u3001\u5237\u65b0\u3001\u5207\u63db\u6a19\u7c64\uff09\uff0c\u4f7f\u7528 Input Model \u7684 <code>triggerType</code> \u548c <code>mode</code> \u5340\u5206\u884c\u70ba</li> <li>PublishCommentUseCase\uff1a\u6536\u6582\u767c\u9001\u7559\u8a00\u548c\u56de\u8986\u7684\u884c\u70ba\uff0c\u4f7f\u7528 Input Model \u7684 <code>parentId</code> \u5340\u5206\u662f\u7559\u8a00\u9084\u662f\u56de\u8986</li> </ul>"},{"location":"04_Domain%20Model/","title":"Domain Model \u7ae0\u7bc0\u8aaa\u660e","text":"<p>\u672c\u76ee\u9304\u5305\u542b TDD \u6587\u4ef6\u7684 Domain Model \u7ae0\u7bc0\uff0c\u5b9a\u7fa9\u6240\u6709 Entity \u548c Value Object\u3002</p>"},{"location":"04_Domain%20Model/#_1","title":"\u6587\u4ef6\u5217\u8868","text":"<ul> <li><code>01_domain_model.md</code> - Domain Model \u5b9a\u7fa9</li> <li><code>02_domain_model_uml_standard.md</code> - Domain Model UML \u6a19\u6e96\u95dc\u4fc2\u5716</li> </ul>"},{"location":"04_Domain%20Model/#_2","title":"\u8aaa\u660e","text":"<p>Domain Model \u7ae0\u7bc0\u5305\u542b\uff1a</p> <ul> <li>\u6240\u6709 Entity\uff08\u5be6\u9ad4\uff09\u5b9a\u7fa9</li> <li>\u6240\u6709 Value Object\uff08\u503c\u7269\u4ef6\uff09\u5b9a\u7fa9</li> <li>Entity \u548c Value Object \u7684\u95dc\u4fc2\u5716</li> <li>\u8a9e\u610f\u5316\u95dc\u4fc2\u8aaa\u660e</li> </ul>"},{"location":"04_Domain%20Model/#domain-model_1","title":"Domain Model \u985e\u578b","text":"<ol> <li>Entity\uff08\u5be6\u9ad4\uff09\uff1a\u6709\u552f\u4e00\u8b58\u5225\u78bc\u7684\u696d\u52d9\u7269\u4ef6</li> <li>Value Object\uff08\u503c\u7269\u4ef6\uff09\uff1a\u6c92\u6709\u552f\u4e00\u8b58\u5225\u78bc\uff0c\u900f\u904e\u503c\u6bd4\u8f03</li> </ol>"},{"location":"04_Domain%20Model/01_domain_model/","title":"Domain Model \u5b9a\u7fa9","text":""},{"location":"04_Domain%20Model/01_domain_model/#entity","title":"Entity\uff08\u5be6\u9ad4\uff09","text":""},{"location":"04_Domain%20Model/01_domain_model/#comment","title":"Comment","text":"<p>\u7559\u8a00\u5be6\u9ad4\uff0c\u4ee3\u8868\u4e00\u5247\u7559\u8a00\u6216\u56de\u8986\u3002</p> <pre><code>struct Comment: Identifiable, Equatable {\n    let id: String  // \u552f\u4e00\u8b58\u5225\u78bc\uff08\u5f9e API \u7684 Int64 \u8f49\u63db\u800c\u4f86\uff09\n    let content: String  // \u7559\u8a00\u5167\u5bb9\n    var likeCount: Int  // \u6309\u8b9a\u6578\uff08\u53ef\u8b8a\uff09\n    let authorId: String  // \u4f5c\u8005 ID\n    let authorNickname: String?  // \u4f5c\u8005\u66b1\u7a31\uff08\u53ef\u9078\uff09\n    let parentId: String?  // \u7236\u7559\u8a00 ID\uff08\u53ef\u9078\uff0c\u7528\u65bc\u56de\u8986\uff0c0 \u8868\u793a\u7b2c\u4e00\u5c64\u8a55\u8ad6\uff09\n    let createdAt: Date  // \u5efa\u7acb\u6642\u9593\uff08\u5f9e API \u7684 Int64 \u6642\u9593\u6233\u8f49\u63db\u800c\u4f86\uff09\n    let refId: String  // \u8cfd\u4e8b\u53c3\u8003 ID\uff08\u901a\u5e38\u5f9e UseCase \u5c64\u50b3\u5165\uff09\n    let repliesCount: Int  // \u56de\u8986\u6578\u91cf\n    let likedByMe: Bool  // \u76ee\u524d\u7528\u6236\u662f\u5426\u5df2\u9ede\u8b9a\n    let isIsolated: Bool  // \u8a55\u8ad6\u662f\u5426\u88ab\u9694\u96e2\n    let isDeleted: Bool  // \u8a55\u8ad6\u662f\u5426\u5df2\u88ab\u522a\u9664\n\n    // \u900f\u904e id \u4f86\u6bd4\u8f03\n    static func == (lhs: Comment, rhs: Comment) -&gt; Bool {\n        lhs.id == rhs.id\n    }\n}\n</code></pre> <p>\u6ce8\u610f\uff1a - <code>id</code> \u5728 API \u4e2d\u662f <code>Int64</code>\uff0c\u4f46\u5728 Domain Model \u4e2d\u8f49\u63db\u70ba <code>String</code> \u4ee5\u4fbf\u7d71\u4e00\u8655\u7406 - <code>parentId</code> \u5728 API \u4e2d\u70ba <code>Int64</code>\uff0c0 \u8868\u793a\u7b2c\u4e00\u5c64\u8a55\u8ad6\uff0c\u5728 Domain Model \u4e2d\u8f49\u63db\u70ba <code>String?</code>\uff0c0 \u8f49\u63db\u70ba <code>nil</code> - <code>createdAt</code> \u5728 API \u4e2d\u662f <code>Int64</code> \u6642\u9593\u6233\uff08\u6beb\u79d2\uff09\uff0c\u5728 Domain Model \u4e2d\u8f49\u63db\u70ba <code>Date</code> - <code>refId</code> \u901a\u5e38\u4e0d\u5728 API \u56de\u61c9\u4e2d\uff0c\u9700\u8981\u5f9e UseCase \u5c64\u50b3\u5165 - <code>repliesCount</code>\u3001<code>likedByMe</code>\u3001<code>isIsolated</code>\u3001<code>isDeleted</code> \u662f\u5f9e API \u65b0\u589e\u7684\u6b04\u4f4d</p> <p>\u5224\u65b7\u4f9d\u64da\uff1a - \u2705 \u6709\u552f\u4e00\u8b58\u5225\u78bc\uff08id\uff09 - \u2705 \u9700\u8981\u8ffd\u8e64\u7269\u4ef6\u7684\u72c0\u614b\u8b8a\u5316\uff08likeCount\uff09 - \u2705 \u696d\u52d9\u8a9e\u610f\u4e0a\u9019\u662f\u300c\u4e00\u5247\u7559\u8a00\u300d</p>"},{"location":"04_Domain%20Model/01_domain_model/#commentmeta","title":"CommentMeta","text":"<p>\u7559\u8a00\u7d71\u8a08\u8cc7\u8a0a\u5be6\u9ad4\uff0c\u4ee3\u8868\u8cfd\u4e8b\u7684\u7559\u8a00\u7d71\u8a08\u3002</p> <pre><code>struct CommentMeta: Identifiable, Equatable {\n    let id: String  // \u552f\u4e00\u8b58\u5225\u78bc\uff08\u901a\u5e38\u70ba refId\uff09\n    let commentCount: Int  // \u7559\u8a00\u6578\u91cf\uff08\u5f9e API \u7684 String \u8f49\u63db\u800c\u4f86\uff09\n    let betCount: String  // \u6295\u6ce8\u6578\u91cf\uff08API \u8fd4\u56de\u70ba String \u683c\u5f0f\uff0c\u4f8b\u5982 \"&lt;100\"\uff09\n    let refId: String  // \u8cfd\u4e8b\u53c3\u8003 ID\n\n    // \u900f\u904e id \u4f86\u6bd4\u8f03\n    static func == (lhs: CommentMeta, rhs: CommentMeta) -&gt; Bool {\n        lhs.id == rhs.id\n    }\n}\n</code></pre> <p>\u6ce8\u610f\uff1a - <code>commentCount</code> \u5728 API \u4e2d\u662f <code>String</code>\uff0c\u5728 Domain Model \u4e2d\u8f49\u63db\u70ba <code>Int</code> - <code>betCount</code> \u5728 API \u4e2d\u662f <code>String</code>\uff08\u4f8b\u5982 \"&lt;100\"\uff09\uff0c\u5728 Domain Model \u4e2d\u4fdd\u6301\u70ba <code>String</code> \u4ee5\u4fdd\u7559\u539f\u59cb\u683c\u5f0f</p> <p>\u5224\u65b7\u4f9d\u64da\uff1a - \u2705 \u6709\u552f\u4e00\u8b58\u5225\u78bc\uff08id\uff0c\u901a\u5e38\u70ba refId\uff09 - \u2705 \u9700\u8981\u8ffd\u8e64\u7269\u4ef6\u7684\u72c0\u614b\u8b8a\u5316\uff08commentCount\u3001betCount\uff09 - \u2705 \u696d\u52d9\u8a9e\u610f\u4e0a\u9019\u662f\u300c\u4e00\u500b\u8cfd\u4e8b\u7684\u7559\u8a00\u7d71\u8a08\u300d</p>"},{"location":"04_Domain%20Model/01_domain_model/#userinfo","title":"UserInfo","text":"<p>\u7528\u6236\u8cc7\u8a0a\u5be6\u9ad4\uff0c\u4ee3\u8868\u7528\u6236\u7684\u57fa\u672c\u8cc7\u8a0a\u3002</p> <pre><code>struct UserInfo: Identifiable, Equatable {\n    let id: String  // \u552f\u4e00\u8b58\u5225\u78bc\uff08\u7528\u6236 ID\uff09\n    let nickname: String?  // \u66b1\u7a31\uff08\u53ef\u9078\uff09\n    let avatar: String?  // \u982d\u50cf URL\uff08\u53ef\u9078\uff09\n    let tierLevel: String?  // \u7528\u6236\u7b49\u7d1a\uff08\u53ef\u9078\uff09\n    let countryCode: String?  // \u570b\u5bb6\u4ee3\u78bc\uff08\u53ef\u9078\uff09\n\n    // \u900f\u904e id \u4f86\u6bd4\u8f03\n    static func == (lhs: UserInfo, rhs: UserInfo) -&gt; Bool {\n        lhs.id == rhs.id\n    }\n}\n</code></pre> <p>\u6ce8\u610f\uff1a - <code>tierLevel</code> \u548c <code>countryCode</code> \u662f\u5f9e API \u65b0\u589e\u7684\u6b04\u4f4d - \u5728 Comment API \u4e2d\uff0c\u9019\u4e9b\u8cc7\u8a0a\u53ef\u80fd\u76f4\u63a5\u5b58\u5728\u65bc Comment \u4e2d\uff0c\u4f46\u70ba\u4e86\u7d71\u4e00\u8655\u7406\uff0c\u5efa\u8b70\u4f7f\u7528 UserInfo Entity</p> <p>\u5224\u65b7\u4f9d\u64da\uff1a - \u2705 \u6709\u552f\u4e00\u8b58\u5225\u78bc\uff08id\uff09 - \u2705 \u9700\u8981\u8ffd\u8e64\u7269\u4ef6\u7684\u72c0\u614b\u8b8a\u5316\uff08nickname\u3001avatar\uff09 - \u2705 \u696d\u52d9\u8a9e\u610f\u4e0a\u9019\u662f\u300c\u4e00\u500b\u7528\u6236\u300d</p>"},{"location":"04_Domain%20Model/01_domain_model/#message","title":"Message","text":"<p>\u804a\u5929\u8a0a\u606f\u5be6\u9ad4\uff0c\u4ee3\u8868\u4e00\u5247\u804a\u5929\u8a0a\u606f\u3002</p> <pre><code>struct Message: Identifiable, Equatable {\n    let id: String  // \u552f\u4e00\u8b58\u5225\u78bc\uff08\u901a\u5e38\u70ba messageNo \u8f49\u63db\u800c\u4f86\uff09\n    let content: String  // \u8a0a\u606f\u5167\u5bb9\uff08TEXT \u985e\u578b\uff09\n    let messageNo: Int  // \u8a0a\u606f\u7de8\u865f\uff08\u7528\u65bc\u6392\u5e8f\u548c\u53bb\u91cd\uff09\n    let previousMessageNo: Int  // \u4e0a\u4e00\u689d\u8a0a\u606f\u7de8\u865f\n    let authorId: String  // \u4f5c\u8005 ID\n    let authorNickname: String?  // \u4f5c\u8005\u66b1\u7a31\uff08\u53ef\u9078\uff09\n    let messageType: MessageType  // \u8a0a\u606f\u985e\u578b\uff08\u76ee\u524d\u50c5\u652f\u63f4 TEXT\uff09\n    let createdAt: Date  // \u5efa\u7acb\u6642\u9593\uff08\u5f9e API \u7684 Int64 \u6642\u9593\u6233\u8f49\u63db\u800c\u4f86\uff09\n    let chatroomId: String  // \u804a\u5929\u5ba4 ID\n    let isIsolated: Bool  // \u662f\u5426\u88ab\u9694\u96e2\n    let isDeleted: Bool  // \u662f\u5426\u5df2\u88ab\u522a\u9664\n    let status: Int  // \u8a0a\u606f\u72c0\u614b\n\n    // \u900f\u904e id \u4f86\u6bd4\u8f03\n    static func == (lhs: Message, rhs: Message) -&gt; Bool {\n        lhs.id == rhs.id\n    }\n}\n</code></pre> <p>\u6ce8\u610f\uff1a - <code>id</code> \u901a\u5e38\u4f7f\u7528 <code>messageNo</code> \u8f49\u63db\u70ba <code>String</code> - <code>createdAt</code> \u5728 API \u4e2d\u662f <code>Int64</code> \u6642\u9593\u6233\uff08\u6beb\u79d2\uff09\uff0c\u5728 Domain Model \u4e2d\u8f49\u63db\u70ba <code>Date</code> - <code>previousMessageNo</code>\u3001<code>isIsolated</code>\u3001<code>isDeleted</code>\u3001<code>status</code> \u662f\u5f9e API \u65b0\u589e\u7684\u6b04\u4f4d - \u76ee\u524d\u50c5\u652f\u63f4 TEXT \u985e\u578b\u7684\u8a0a\u606f</p> <p>\u5224\u65b7\u4f9d\u64da\uff1a - \u2705 \u6709\u552f\u4e00\u8b58\u5225\u78bc\uff08id\uff09 - \u2705 \u9700\u8981\u8ffd\u8e64\u7269\u4ef6\u7684\u72c0\u614b\u8b8a\u5316 - \u2705 \u696d\u52d9\u8a9e\u610f\u4e0a\u9019\u662f\u300c\u4e00\u5247\u804a\u5929\u8a0a\u606f\u300d</p>"},{"location":"04_Domain%20Model/01_domain_model/#chatroominfo","title":"ChatroomInfo","text":"<p>\u804a\u5929\u5ba4\u8cc7\u8a0a\u5be6\u9ad4\uff0c\u4ee3\u8868\u804a\u5929\u5ba4\u7684\u57fa\u672c\u8cc7\u8a0a\u3002</p> <pre><code>struct ChatroomInfo: Identifiable, Equatable {\n    let id: String  // \u552f\u4e00\u8b58\u5225\u78bc\uff08\u901a\u5e38\u70ba chatroomId\uff09\n    let chatroomId: String  // \u804a\u5929\u5ba4 ID\n    let lastMessageNo: Int  // \u6700\u5f8c\u8a0a\u606f\u7de8\u865f\n    let refId: String  // \u8cfd\u4e8b\u53c3\u8003 ID\n    let onlineCount: Int  // \u5728\u7dda\u7528\u6236\u6578\n    let betCount: String  // \u6295\u6ce8\u6578\uff08API \u8fd4\u56de\u70ba String \u683c\u5f0f\uff09\n    let chatRoomType: Int  // \u804a\u5929\u5ba4\u985e\u578b\uff08\u76ee\u524d\u50c5\u4f7f\u7528 GROUP(10)\uff09\n    let nickNameAvailable: Bool?  // \u66b1\u7a31\u662f\u5426\u53ef\u7528\uff08\u53ef\u9078\uff09\n\n    // \u900f\u904e id \u4f86\u6bd4\u8f03\n    static func == (lhs: ChatroomInfo, rhs: ChatroomInfo) -&gt; Bool {\n        lhs.id == rhs.id\n    }\n}\n</code></pre> <p>\u6ce8\u610f\uff1a - <code>onlineCount</code> \u5728 API \u4e2d\u662f <code>String</code>\uff0c\u5728 Domain Model \u4e2d\u8f49\u63db\u70ba <code>Int</code> - <code>betCount</code> \u5728 API \u4e2d\u662f <code>String</code>\uff08\u4f8b\u5982 \"&lt;100\"\uff09\uff0c\u5728 Domain Model \u4e2d\u4fdd\u6301\u70ba <code>String</code> - <code>chatRoomType</code> \u548c <code>nickNameAvailable</code> \u662f\u5f9e API \u65b0\u589e\u7684\u6b04\u4f4d</p> <p>\u5224\u65b7\u4f9d\u64da\uff1a - \u2705 \u6709\u552f\u4e00\u8b58\u5225\u78bc\uff08id\uff0c\u901a\u5e38\u70ba chatroomId\uff09 - \u2705 \u9700\u8981\u8ffd\u8e64\u7269\u4ef6\u7684\u72c0\u614b\u8b8a\u5316\uff08lastMessageNo\uff09 - \u2705 \u696d\u52d9\u8a9e\u610f\u4e0a\u9019\u662f\u300c\u4e00\u500b\u804a\u5929\u5ba4\u300d</p>"},{"location":"04_Domain%20Model/01_domain_model/#value-object","title":"Value Object\uff08\u503c\u7269\u4ef6\uff09","text":""},{"location":"04_Domain%20Model/01_domain_model/#sortmode","title":"SortMode","text":"<p>\u6392\u5e8f\u6a21\u5f0f\u503c\u7269\u4ef6\uff0c\u7528\u65bc\u5340\u5206\u7559\u8a00\u7684\u6392\u5e8f\u65b9\u5f0f\u3002</p> <pre><code>struct SortMode: Equatable {\n    let value: String  // \"top\" \u6216 \"newest\"\n\n    static let top = SortMode(value: \"top\")\n    static let newest = SortMode(value: \"newest\")\n\n    // \u5169\u500b SortMode \u5982\u679c value \u76f8\u540c\uff0c\u5c31\u8996\u70ba\u76f8\u540c\n    // Swift \u81ea\u52d5\u5be6\u73fe Equatable\n}\n</code></pre> <p>\u5224\u65b7\u4f9d\u64da\uff1a - \u2705 \u6c92\u6709\u552f\u4e00\u8b58\u5225\u78bc - \u2705 \u53ea\u95dc\u5fc3\u7269\u4ef6\u7684\u300c\u503c\u300d\uff0c\u4e0d\u95dc\u5fc3\u300c\u662f\u54ea\u4e00\u500b\u300d - \u2705 \u5b8c\u5168\u4e0d\u53ef\u8b8a\uff08\u4f7f\u7528 <code>let</code>\uff09 - \u2705 \u696d\u52d9\u8a9e\u610f\u4e0a\u9019\u662f\u300c\u6392\u5e8f\u65b9\u5f0f\u300d</p>"},{"location":"04_Domain%20Model/01_domain_model/#cursor","title":"Cursor","text":"<p>\u5206\u9801\u6e38\u6a19\u503c\u7269\u4ef6\uff0c\u7528\u65bc\u8ffd\u8e64\u5206\u9801\u4f4d\u7f6e\u3002</p> <pre><code>struct Cursor: Equatable {\n    let value: String?  // \u6e38\u6a19\u503c\uff08\u53ef\u9078\uff09\n\n    // \u5169\u500b Cursor \u5982\u679c value \u76f8\u540c\uff0c\u5c31\u8996\u70ba\u76f8\u540c\n    // Swift \u81ea\u52d5\u5be6\u73fe Equatable\n}\n</code></pre> <p>\u5224\u65b7\u4f9d\u64da\uff1a - \u2705 \u6c92\u6709\u552f\u4e00\u8b58\u5225\u78bc - \u2705 \u53ea\u95dc\u5fc3\u7269\u4ef6\u7684\u300c\u503c\u300d\uff0c\u4e0d\u95dc\u5fc3\u300c\u662f\u54ea\u4e00\u500b\u300d - \u2705 \u5b8c\u5168\u4e0d\u53ef\u8b8a\uff08\u4f7f\u7528 <code>let</code>\uff09 - \u2705 \u696d\u52d9\u8a9e\u610f\u4e0a\u9019\u662f\u300c\u5206\u9801\u6e38\u6a19\u300d - \u2705 \u53ef\u88ab\u591a\u500b Feature \u5171\u4eab\u4f7f\u7528\uff08\u653e\u5728 SharedValueObjects\uff09</p>"},{"location":"04_Domain%20Model/01_domain_model/#paginginfo","title":"PagingInfo","text":"<p>\u5206\u9801\u8cc7\u8a0a\u503c\u7269\u4ef6\uff0c\u7528\u65bc\u63cf\u8ff0\u5206\u9801\u72c0\u614b\u3002</p> <pre><code>struct PagingInfo: Equatable {\n    let hasMore: Bool  // \u662f\u5426\u9084\u6709\u66f4\u591a\u8cc7\u6599\n    let nextCursor: Cursor?  // \u4e0b\u4e00\u9801\u6e38\u6a19\uff08\u53ef\u9078\uff09\n\n    // \u5169\u500b PagingInfo \u5982\u679c\u6240\u6709\u5c6c\u6027\u76f8\u540c\uff0c\u5c31\u8996\u70ba\u76f8\u540c\n    // Swift \u81ea\u52d5\u5be6\u73fe Equatable\n}\n</code></pre> <p>\u5224\u65b7\u4f9d\u64da\uff1a - \u2705 \u6c92\u6709\u552f\u4e00\u8b58\u5225\u78bc - \u2705 \u53ea\u95dc\u5fc3\u7269\u4ef6\u7684\u300c\u503c\u300d\uff0c\u4e0d\u95dc\u5fc3\u300c\u662f\u54ea\u4e00\u500b\u300d - \u2705 \u5b8c\u5168\u4e0d\u53ef\u8b8a\uff08\u4f7f\u7528 <code>let</code>\uff09 - \u2705 \u696d\u52d9\u8a9e\u610f\u4e0a\u9019\u662f\u300c\u5206\u9801\u8cc7\u8a0a\u300d - \u2705 \u53ef\u88ab\u591a\u500b Feature \u5171\u4eab\u4f7f\u7528\uff08\u653e\u5728 SharedValueObjects\uff09</p>"},{"location":"04_Domain%20Model/01_domain_model/#messagetype","title":"MessageType","text":"<p>\u8a0a\u606f\u985e\u578b\u503c\u7269\u4ef6\uff0c\u7528\u65bc\u5340\u5206\u8a0a\u606f\u985e\u578b\u3002</p> <pre><code>struct MessageType: Equatable {\n    let value: String  // \"TEXT\" \u7b49\n\n    static let text = MessageType(value: \"TEXT\")\n\n    // \u5169\u500b MessageType \u5982\u679c value \u76f8\u540c\uff0c\u5c31\u8996\u70ba\u76f8\u540c\n    // Swift \u81ea\u52d5\u5be6\u73fe Equatable\n}\n</code></pre> <p>\u5224\u65b7\u4f9d\u64da\uff1a - \u2705 \u6c92\u6709\u552f\u4e00\u8b58\u5225\u78bc - \u2705 \u53ea\u95dc\u5fc3\u7269\u4ef6\u7684\u300c\u503c\u300d\uff0c\u4e0d\u95dc\u5fc3\u300c\u662f\u54ea\u4e00\u500b\u300d - \u2705 \u5b8c\u5168\u4e0d\u53ef\u8b8a\uff08\u4f7f\u7528 <code>let</code>\uff09 - \u2705 \u696d\u52d9\u8a9e\u610f\u4e0a\u9019\u662f\u300c\u8a0a\u606f\u985e\u578b\u300d</p>"},{"location":"04_Domain%20Model/01_domain_model/#domain-model_1","title":"Domain Model \u95dc\u4fc2","text":""},{"location":"04_Domain%20Model/01_domain_model/#_1","title":"\u8a9e\u610f\u5316\u95dc\u4fc2","text":"<ul> <li>Comment <code>has author</code> UserInfo\uff08\u7559\u8a00\u6709\u4f5c\u8005\uff09</li> <li>Comment <code>references</code> Comment\uff08\u56de\u8986\u5f15\u7528\u7236\u7559\u8a00\uff09</li> <li>Comment <code>belongs to</code> CommentMeta\uff08\u7559\u8a00\u5c6c\u65bc\u7559\u8a00\u7d71\u8a08\uff09</li> <li>Message <code>has author</code> UserInfo\uff08\u8a0a\u606f\u6709\u4f5c\u8005\uff09</li> <li>Message <code>belongs to</code> ChatroomInfo\uff08\u8a0a\u606f\u5c6c\u65bc\u804a\u5929\u5ba4\uff09</li> <li>PagingInfo <code>contains</code> Cursor\uff08\u5206\u9801\u8cc7\u8a0a\u5305\u542b\u6e38\u6a19\uff09</li> </ul>"},{"location":"04_Domain%20Model/01_domain_model/#_2","title":"\u95dc\u4fc2\u8aaa\u660e\u8868\u683c","text":"\u95dc\u4fc2 \u8a9e\u610f\u5316\u95dc\u4fc2 \u6a19\u6e96 UML \u95dc\u4fc2 \u95dc\u4fc2\u8aaa\u660e \u5be6\u4f5c\u65b9\u5f0f \u65b9\u5411 Comment \u2192 UserInfo has author Association \u7559\u8a00\u6709\u4f5c\u8005 <code>authorId: String</code>\uff08\u5f15\u7528 UserInfo.id\uff09 \u55ae\u5411 Comment \u2192 Comment references Association \u56de\u8986\u5f15\u7528\u7236\u7559\u8a00 <code>parentId: String?</code>\uff08\u5f15\u7528 Comment.id\uff09 \u55ae\u5411 Comment \u2192 CommentMeta belongs to Association \u7559\u8a00\u5c6c\u65bc\u7559\u8a00\u7d71\u8a08 <code>refId: String</code>\uff08\u5f15\u7528 CommentMeta.refId\uff09 \u55ae\u5411 Message \u2192 UserInfo has author Association \u8a0a\u606f\u6709\u4f5c\u8005 <code>authorId: String</code>\uff08\u5f15\u7528 UserInfo.id\uff09 \u55ae\u5411 Message \u2192 ChatroomInfo belongs to Association \u8a0a\u606f\u5c6c\u65bc\u804a\u5929\u5ba4 <code>chatroomId: String</code>\uff08\u5f15\u7528 ChatroomInfo.chatroomId\uff09 \u55ae\u5411 PagingInfo \u2192 Cursor contains Composition \u5206\u9801\u8cc7\u8a0a\u5305\u542b\u6e38\u6a19 <code>nextCursor: Cursor?</code>\uff08\u76f4\u63a5\u5305\u542b\uff09 \u55ae\u5411"},{"location":"04_Domain%20Model/01_domain_model/#value-object_1","title":"\u53ef\u5171\u4eab\u7684 Value Object","text":"<p>\u4ee5\u4e0b Value Object \u53ef\u88ab\u591a\u500b Feature \u5171\u4eab\u4f7f\u7528\uff0c\u61c9\u653e\u5728 <code>SharedValueObjects</code> \u4e2d\uff1a</p> <ul> <li>Cursor\uff1a\u5206\u9801\u6e38\u6a19</li> <li>PagingInfo\uff1a\u5206\u9801\u8cc7\u8a0a</li> </ul>"},{"location":"04_Domain%20Model/01_domain_model/#domain-model-vs-dto","title":"Domain Model vs DTO \u5c0d\u7167","text":"\u7279\u6027 Domain Model DTO \u7528\u9014 \u696d\u52d9\u9818\u57df\u7684\u8cc7\u6599\u6a21\u578b API \u50b3\u8f38\u7684\u8cc7\u6599\u7d50\u69cb \u5b58\u5728\u4f4d\u7f6e Domain Model Layer Client Layer \u2194 API Layer \u53ef\u88ab\u4f7f\u7528 Feature\u3001UseCase\u3001Repository Client\u3001API \u4e0d\u53ef\u88ab\u4f7f\u7528 - Feature\u3001UseCase\u3001Repository \u8f49\u63db - Repository \u8ca0\u8cac DTO \u2192 Domain Model \u5efa\u6a21\u4f9d\u64da \u696d\u52d9\u8a9e\u610f API schema Swift \u985e\u578b <code>struct</code>\uff08Entity / Value Object\uff09 <code>struct</code>\uff08\u901a\u5e38\uff09"},{"location":"04_Domain%20Model/01_domain_model/#tca","title":"\u5728 TCA \u4e2d\u7684\u4f7f\u7528","text":""},{"location":"04_Domain%20Model/01_domain_model/#feature-state-domain-model","title":"Feature State \u4e2d\u7684 Domain Model","text":"<pre><code>struct PrematchCommentState {\n    var comments: [Comment]  // \u2705 Entity \u9663\u5217\n    var pagingInfo: PagingInfo?  // \u2705 Value Object\n    var cursor: Cursor?  // \u2705 Value Object\n    var sortMode: SortMode  // \u2705 Value Object\n    // var apiResponse: CommentResponseDTO  // \u274c \u7981\u6b62\n}\n</code></pre>"},{"location":"04_Domain%20Model/01_domain_model/#usecase-input-output-domain-model","title":"UseCase Input / Output \u4e2d\u7684 Domain Model","text":"<pre><code>struct ReloadCommentListInput {\n    let refId: String\n    let mode: SortMode  // \u2705 Value Object\n    let cursor: Cursor?  // \u2705 Value Object\n    // let requestDTO: CommentRequestDTO  // \u274c \u7981\u6b62\n}\n\nstruct ReloadCommentListOutput {\n    let comments: [Comment]  // \u2705 Entity \u9663\u5217\n    let pagingInfo: PagingInfo  // \u2705 Value Object\n}\n</code></pre>"},{"location":"04_Domain%20Model/01_domain_model/#repository-domain-model","title":"Repository \u4e2d\u7684 Domain Model","text":"<pre><code>func getComments(refId: String, mode: SortMode) async throws -&gt; [Comment] {\n    let dto = try await client.getComments(refId, mode: mode.value)\n    return dto.map { Comment(from: $0) }  // DTO \u2192 Domain Model\n}\n</code></pre>"},{"location":"04_Domain%20Model/02_domain_model_uml_standard/","title":"Domain Model UML \u6a19\u6e96\u95dc\u4fc2\u5716","text":""},{"location":"04_Domain%20Model/02_domain_model_uml_standard/#uml","title":"\u6a19\u6e96 UML \u95dc\u4fc2\u5716","text":"<pre><code>classDiagram\n    class Comment {\n        +String id\n        +String content\n        +Int likeCount\n        +String authorId\n        +String? authorNickname\n        +String? parentId\n        +Date createdAt\n        +String refId\n    }\n\n    class CommentMeta {\n        +String id\n        +Int commentCount\n        +Int betCount\n        +String refId\n    }\n\n    class UserInfo {\n        +String id\n        +String? nickname\n        +String? avatar\n    }\n\n    class Message {\n        +String id\n        +String content\n        +Int messageNo\n        +String authorId\n        +String? authorNickname\n        +MessageType messageType\n        +Date createdAt\n        +String chatroomId\n    }\n\n    class ChatroomInfo {\n        +String id\n        +String chatroomId\n        +Int lastMessageNo\n        +String refId\n    }\n\n    class SortMode {\n        +String value\n    }\n\n    class Cursor {\n        +String? value\n    }\n\n    class PagingInfo {\n        +Bool hasMore\n        +Cursor? nextCursor\n    }\n\n    class MessageType {\n        +String value\n    }\n\n    Comment --|&gt; UserInfo : has author\n    Comment --&gt; Comment : references (parentId)\n    Comment --|&gt; CommentMeta : belongs to\n    Message --|&gt; UserInfo : has author\n    Message --|&gt; ChatroomInfo : belongs to\n    PagingInfo *-- Cursor : contains</code></pre> <p>Mermaid \u8a9e\u6cd5\uff08\u53ef\u8907\u88fd\uff09\uff1a</p> <pre><code>classDiagram\n    class Comment {\n        +String id\n        +String content\n        +Int likeCount\n        +String authorId\n        +String? authorNickname\n        +String? parentId\n        +Date createdAt\n        +String refId\n    }\n\n    class CommentMeta {\n        +String id\n        +Int commentCount\n        +Int betCount\n        +String refId\n    }\n\n    class UserInfo {\n        +String id\n        +String? nickname\n        +String? avatar\n    }\n\n    class Message {\n        +String id\n        +String content\n        +Int messageNo\n        +String authorId\n        +String? authorNickname\n        +MessageType messageType\n        +Date createdAt\n        +String chatroomId\n    }\n\n    class ChatroomInfo {\n        +String id\n        +String chatroomId\n        +Int lastMessageNo\n        +String refId\n    }\n\n    class SortMode {\n        +String value\n    }\n\n    class Cursor {\n        +String? value\n    }\n\n    class PagingInfo {\n        +Bool hasMore\n        +Cursor? nextCursor\n    }\n\n    class MessageType {\n        +String value\n    }\n\n    Comment --|&gt; UserInfo : has author\n    Comment --&gt; Comment : references (parentId)\n    Comment --|&gt; CommentMeta : belongs to\n    Message --|&gt; UserInfo : has author\n    Message --|&gt; ChatroomInfo : belongs to\n    PagingInfo *-- Cursor : contains\n</code></pre>"},{"location":"04_Domain%20Model/02_domain_model_uml_standard/#_1","title":"\u95dc\u4fc2\u8aaa\u660e","text":""},{"location":"04_Domain%20Model/02_domain_model_uml_standard/#association","title":"Association\uff08\u95dc\u806f\uff09","text":"<ul> <li>Comment \u2192 UserInfo\uff1a\u7559\u8a00\u6709\u4f5c\u8005\uff08\u900f\u904e <code>authorId</code> \u5f15\u7528\uff09</li> <li>Comment \u2192 Comment\uff1a\u56de\u8986\u5f15\u7528\u7236\u7559\u8a00\uff08\u900f\u904e <code>parentId</code> \u5f15\u7528\uff09</li> <li>Comment \u2192 CommentMeta\uff1a\u7559\u8a00\u5c6c\u65bc\u7559\u8a00\u7d71\u8a08\uff08\u900f\u904e <code>refId</code> \u95dc\u806f\uff09</li> <li>Message \u2192 UserInfo\uff1a\u8a0a\u606f\u6709\u4f5c\u8005\uff08\u900f\u904e <code>authorId</code> \u5f15\u7528\uff09</li> <li>Message \u2192 ChatroomInfo\uff1a\u8a0a\u606f\u5c6c\u65bc\u804a\u5929\u5ba4\uff08\u900f\u904e <code>chatroomId</code> \u5f15\u7528\uff09</li> </ul>"},{"location":"04_Domain%20Model/02_domain_model_uml_standard/#composition","title":"Composition\uff08\u7d44\u5408\uff09","text":"<ul> <li>PagingInfo \u2192 Cursor\uff1a\u5206\u9801\u8cc7\u8a0a\u5305\u542b\u6e38\u6a19\uff08\u76f4\u63a5\u5305\u542b <code>nextCursor: Cursor?</code>\uff09</li> </ul>"},{"location":"04_Domain%20Model/02_domain_model_uml_standard/#_2","title":"\u8a9e\u610f\u5316\u95dc\u4fc2\u5716","text":"<pre><code>flowchart TD\n    Comment[\"Comment&lt;br/&gt;(\u7559\u8a00\u5be6\u9ad4)\"]\n    CommentMeta[\"CommentMeta&lt;br/&gt;(\u7559\u8a00\u7d71\u8a08\u5be6\u9ad4)\"]\n    UserInfo[\"UserInfo&lt;br/&gt;(\u7528\u6236\u8cc7\u8a0a\u5be6\u9ad4)\"]\n    Message[\"Message&lt;br/&gt;(\u804a\u5929\u8a0a\u606f\u5be6\u9ad4)\"]\n    ChatroomInfo[\"ChatroomInfo&lt;br/&gt;(\u804a\u5929\u5ba4\u8cc7\u8a0a\u5be6\u9ad4)\"]\n    SortMode[\"SortMode&lt;br/&gt;(\u6392\u5e8f\u6a21\u5f0f\u503c\u7269\u4ef6)\"]\n    Cursor[\"Cursor&lt;br/&gt;(\u5206\u9801\u6e38\u6a19\u503c\u7269\u4ef6)\"]\n    PagingInfo[\"PagingInfo&lt;br/&gt;(\u5206\u9801\u8cc7\u8a0a\u503c\u7269\u4ef6)\"]\n    MessageType[\"MessageType&lt;br/&gt;(\u8a0a\u606f\u985e\u578b\u503c\u7269\u4ef6)\"]\n\n    Comment --&gt;|has author| UserInfo\n    Comment --&gt;|references| Comment\n    Comment --&gt;|belongs to| CommentMeta\n    Message --&gt;|has author| UserInfo\n    Message --&gt;|belongs to| ChatroomInfo\n    PagingInfo --&gt;|contains| Cursor</code></pre> <p>Mermaid \u8a9e\u6cd5\uff08\u53ef\u8907\u88fd\uff09\uff1a</p> <pre><code>flowchart TD\n    Comment[\"Comment&lt;br/&gt;(\u7559\u8a00\u5be6\u9ad4)\"]\n    CommentMeta[\"CommentMeta&lt;br/&gt;(\u7559\u8a00\u7d71\u8a08\u5be6\u9ad4)\"]\n    UserInfo[\"UserInfo&lt;br/&gt;(\u7528\u6236\u8cc7\u8a0a\u5be6\u9ad4)\"]\n    Message[\"Message&lt;br/&gt;(\u804a\u5929\u8a0a\u606f\u5be6\u9ad4)\"]\n    ChatroomInfo[\"ChatroomInfo&lt;br/&gt;(\u804a\u5929\u5ba4\u8cc7\u8a0a\u5be6\u9ad4)\"]\n    SortMode[\"SortMode&lt;br/&gt;(\u6392\u5e8f\u6a21\u5f0f\u503c\u7269\u4ef6)\"]\n    Cursor[\"Cursor&lt;br/&gt;(\u5206\u9801\u6e38\u6a19\u503c\u7269\u4ef6)\"]\n    PagingInfo[\"PagingInfo&lt;br/&gt;(\u5206\u9801\u8cc7\u8a0a\u503c\u7269\u4ef6)\"]\n    MessageType[\"MessageType&lt;br/&gt;(\u8a0a\u606f\u985e\u578b\u503c\u7269\u4ef6)\"]\n\n    Comment --&gt;|has author| UserInfo\n    Comment --&gt;|references| Comment\n    Comment --&gt;|belongs to| CommentMeta\n    Message --&gt;|has author| UserInfo\n    Message --&gt;|belongs to| ChatroomInfo\n    PagingInfo --&gt;|contains| Cursor\n</code></pre>"},{"location":"04_Domain%20Model/02_domain_model_uml_standard/#_3","title":"\u95dc\u4fc2\u8a73\u7d30\u8aaa\u660e","text":"\u95dc\u4fc2 \u8a9e\u610f\u5316\u95dc\u4fc2 \u6a19\u6e96 UML \u95dc\u4fc2 \u95dc\u4fc2\u8aaa\u660e \u5be6\u4f5c\u65b9\u5f0f \u65b9\u5411 Comment \u2192 UserInfo has author Association \u7559\u8a00\u6709\u4f5c\u8005 <code>authorId: String</code>\uff08\u5f15\u7528 UserInfo.id\uff09 \u55ae\u5411 Comment \u2192 Comment references Association \u56de\u8986\u5f15\u7528\u7236\u7559\u8a00 <code>parentId: String?</code>\uff08\u5f15\u7528 Comment.id\uff09 \u55ae\u5411 Comment \u2192 CommentMeta belongs to Association \u7559\u8a00\u5c6c\u65bc\u7559\u8a00\u7d71\u8a08 <code>refId: String</code>\uff08\u5f15\u7528 CommentMeta.refId\uff09 \u55ae\u5411 Message \u2192 UserInfo has author Association \u8a0a\u606f\u6709\u4f5c\u8005 <code>authorId: String</code>\uff08\u5f15\u7528 UserInfo.id\uff09 \u55ae\u5411 Message \u2192 ChatroomInfo belongs to Association \u8a0a\u606f\u5c6c\u65bc\u804a\u5929\u5ba4 <code>chatroomId: String</code>\uff08\u5f15\u7528 ChatroomInfo.chatroomId\uff09 \u55ae\u5411 PagingInfo \u2192 Cursor contains Composition \u5206\u9801\u8cc7\u8a0a\u5305\u542b\u6e38\u6a19 <code>nextCursor: Cursor?</code>\uff08\u76f4\u63a5\u5305\u542b\uff09 \u55ae\u5411"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/LiveChat/Module%20Sequence%20Diagrams/","title":"LiveChat Module Sequence Diagrams","text":"<p>\u672c\u76ee\u9304\u5305\u542b LiveChat Feature \u7684\u6a21\u7d44\u5e8f\u5217\u5716\u3002</p>"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/LiveChat/Module%20Sequence%20Diagrams/#_1","title":"\u6587\u4ef6\u5217\u8868","text":"<ul> <li><code>01_data_initialization_initialize_chatroom.md</code> - \u521d\u59cb\u5316\u804a\u5929\u5ba4\u6d41\u7a0b</li> <li><code>02_data_interaction_send_message.md</code> - \u767c\u9001\u804a\u5929\u8a0a\u606f\u6d41\u7a0b</li> <li><code>03_structural_navigation_block_user.md</code> - \u5c01\u9396\u7528\u6236\u6d41\u7a0b</li> <li><code>04_structural_navigation_profile.md</code> - \u8df3\u8f49\u500b\u4eba\u4e3b\u9801\u6d41\u7a0b</li> </ul>"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/LiveChat/Module%20Sequence%20Diagrams/#flow","title":"Flow \u95dc\u4fc2","text":"Flow ID Flow Type Flow Name \u7236\u6d41\u7a0b LC-FULL-001 Full \u7528\u6236\u9032\u5165\u8207\u96e2\u958b\u804a\u5929\u5ba4\uff08\u542b WebSocket \u76f8\u4f9d\uff09 - LC-SUB-001 Sub \u7528\u6236\u7559 comment \u6642\u767b\u5165\u8207 nickname \u6aa2\u67e5 LC-FULL-001 LC-SUB-002 Sub \u7528\u6236\u9ede\u64ca avatar \u8207\u5c01\u9396\u5176\u4ed6 user \u908f\u8f2f LC-FULL-001 LC-SUB-003 Sub \u804a\u5929\u5ba4\u8a0a\u606f\u50b3\u905e\u8207\u6efe\u52d5\u52a0\u8f09 LC-FULL-001"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/LiveChat/Module%20Sequence%20Diagrams/01_data_initialization_initialize_chatroom/","title":"\u521d\u59cb\u5316\u804a\u5929\u5ba4\u6d41\u7a0b","text":""},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/LiveChat/Module%20Sequence%20Diagrams/01_data_initialization_initialize_chatroom/#flow","title":"Flow \u8cc7\u8a0a","text":"\u6b04\u4f4d \u503c feature LiveChat flow_id LC-FULL-001 flow_type Full flow_name \u7528\u6236\u9032\u5165\u8207\u96e2\u958b\u804a\u5929\u5ba4\uff08\u542b WebSocket \u76f8\u4f9d\uff09 parent_flow_id null parent_flow_name null original_annotation @flow: Full"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/LiveChat/Module%20Sequence%20Diagrams/01_data_initialization_initialize_chatroom/#_2","title":"\u6a21\u7d44\u8aaa\u660e","text":"\u6a21\u7d44\u540d\u7a31 \u8077\u8cac LiveDetailView \u76f4\u64ad\u8a73\u60c5\u9801\u9762 LiveChatFeature TCA Reducer\uff0c\u7ba1\u7406\u804a\u5929\u5ba4\u76f8\u95dc\u7684 State \u548c Action JoinChatroomUseCase \u52a0\u5165\u804a\u5929\u5ba4\u4e26\u8f09\u5165\u6b77\u53f2\u8a0a\u606f LeaveChatroomUseCase \u96e2\u958b\u804a\u5929\u5ba4\u4e26\u6e05\u7406\u5feb\u53d6 LiveChatRepository Domain \u8cc7\u6599\u4f86\u6e90\u7684\u62bd\u8c61\u4ecb\u9762\uff08\u804a\u5929\u5ba4\u76f8\u95dc\uff09 LiveChatClient HTTP \u901a\u8a0a\uff08\u804a\u5929\u5ba4\u76f8\u95dc\uff09 ChatWebSocketClient WebSocket \u901a\u8a0a\uff08\u5373\u6642\u8a0a\u606f\uff09 ChatAPI \u5f8c\u7aef endpoint \u5b9a\u7fa9\uff08\u804a\u5929\u5ba4\u76f8\u95dc\uff09"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/LiveChat/Module%20Sequence%20Diagrams/01_data_initialization_initialize_chatroom/#_3","title":"\u6d41\u7a0b\u8aaa\u660e","text":"\u6d41\u7a0b\u6b65\u9a5f \u8aaa\u660e 1. \u9032\u5165\u9801\u9762\u8207 WebSocket \u8a02\u95b1 1. \u7528\u6236\u9032\u5165 Live Detail Page2. \u81ea\u52d5\u5efa\u7acb WebSocket \u9023\u7dda 2. \u53d6\u5f97\u804a\u5929\u5ba4\u8cc7\u8a0a 1. \u5411\u4f3a\u670d\u5668\u8acb\u6c42\u804a\u5929\u5ba4 ID \u548c\u6700\u5f8c\u8a0a\u606f\u7de8\u865f2. \u6210\u529f\u5247\u5132\u5b58\u8cc7\u8a0a\uff0c\u5931\u6557\u5247\u96b1\u85cf Live Chat Bar 3. \u958b\u555f\u804a\u5929\u8996\u7a97 1. \u7528\u6236\u9ede\u64ca Join the chat \u6309\u92152. \u4f7f\u7528\u5df2\u53d6\u5f97\u7684 chatroomId \u8f09\u5165\u6b77\u53f2\u8a0a\u606f 4. \u8f09\u5165\u6b77\u53f2\u8a0a\u606f 1. \u900f\u904e backward API \u8f09\u5165\u820a\u8a0a\u606f2. \u5c07\u6b77\u53f2\u8a0a\u606f\u8207 WebSocket \u8a0a\u606f\u5408\u4f75\u4e26\u53bb\u91cd 5. \u95dc\u9589\u804a\u5929\u8996\u7a97 1. \u7528\u6236\u95dc\u9589\u804a\u5929\u5ba42. \u6e05\u9664\u672c\u5730\u5feb\u53d6\u7684\u8a0a\u606f\uff08\u4e0d\u9700\u8981\u547c\u53eb API\uff09 6. \u96e2\u958b\u9801\u9762 1. \u7528\u6236\u96e2\u958b Live Detail Page2. \u53d6\u6d88 WebSocket \u8a02\u95b1"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/LiveChat/Module%20Sequence%20Diagrams/01_data_initialization_initialize_chatroom/#_4","title":"\u5834\u666f\u5e8f\u5217\u5716\uff08\u539f\u59cb\u696d\u52d9\u6d41\u7a0b\uff09","text":"<p>\u4ee5\u4e0b\u70ba\u539f\u59cb\u696d\u52d9\u6d41\u7a0b\u7684\u5e8f\u5217\u5716\uff0c\u5c55\u793a\u5f9e\u696d\u52d9\u89d2\u5ea6\u7684\u5b8c\u6574\u6d41\u7a0b\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    participant LiveChat as LiveChat Package\n    participant Chat as Chat API Server\n\n    %% \u9032\u5165\u9801\u9762\n    User-&gt;&gt;LiveChat: \u9032\u5165 Live Detail Page\n    LiveChat-&gt;&gt;Chat: (subscribe) wss://www.encorebet.net/chat/websocket/web-chat\n\n    %% \u53d6\u5f97 chatroomId \u8207 lastMessageNo\n    LiveChat-&gt;&gt;Chat: GET /chat/match/{refId}\n    Chat--&gt;&gt;LiveChat: { chatroomId, lastMessageNo }\n\n    alt \u6210\u529f\u53d6\u5f97 chatroomId\n        LiveChat-&gt;&gt;LiveChat: \u5132\u5b58 chatroomId \u8207 lastMessageNo\n    else \u7121\u6cd5\u53d6\u5f97 chatroomId\n        LiveChat-&gt;&gt;LiveChat: \u96b1\u85cf Live Chat Bar\uff08user \u7121\u6cd5\u958b\u555f chatroom\uff09\n    end\n\n    %% \u4f7f\u7528\u8005\u958b\u555f\u804a\u5929\u8996\u7a97\n    User-&gt;&gt;LiveChat: \u9ede\u64ca Join the chat (\u958b\u555f Chatroom)\n    Note over LiveChat: \u4f7f\u7528\u5df2\u53d6\u5f97\u7684 chatroomId\n\n    %% backward API\uff1a\u88dc\u820a\u8a0a\u606f\n    LiveChat-&gt;&gt;Chat: GET /chat/match/backward { chatroomId, lastMessageNo }\n    Chat--&gt;&gt;LiveChat: \u8fd4\u56de historicalMessages\n    LiveChat-&gt;&gt;LiveChat: \u5c07 historicalMessages \u8207 websocketMessages \u5408\u4f75\u5f8c\u4f9d messageNo \u53bb\u91cd\u986f\u793a\n\n    %% \u4f7f\u7528\u8005\u95dc\u9589\u804a\u5929\u8996\u7a97\n    User-&gt;&gt;LiveChat: \u9ede\u64ca\u804a\u5929\u5ba4\u5916\u90e8\u7f6e\u7070\u5340\u57df\u6216 bar\uff08\u95dc\u9589 Chatroom\uff09\n    Note over LiveChat: \u50c5\u6e05\u9664\u672c\u5730\u5feb\u53d6\uff0c\u4e0d\u9700\u8981\u547c\u53eb API\n    LiveChat-&gt;&gt;LiveChat: \u6e05\u9664 cache \u7684 messages\n\n    %% \u4f7f\u7528\u8005\u96e2\u958b Live Detail Page\n    User-&gt;&gt;LiveChat: \u96e2\u958b Live Detail Page\n    LiveChat-&gt;&gt;Chat: (unsubscribe) websocket</code></pre> <p>Mermaid \u8a9e\u6cd5\uff08\u53ef\u8907\u88fd\uff09\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    participant LiveChat as LiveChat Package\n    participant Chat as Chat API Server\n\n    %% \u9032\u5165\u9801\u9762\n    User-&gt;&gt;LiveChat: \u9032\u5165 Live Detail Page\n    LiveChat-&gt;&gt;Chat: (subscribe) wss://www.encorebet.net/chat/websocket/web-chat\n\n    %% \u53d6\u5f97 chatroomId \u8207 lastMessageNo\n    LiveChat-&gt;&gt;Chat: GET /chat/match/{refId}\n    Chat--&gt;&gt;LiveChat: { chatroomId, lastMessageNo }\n\n    alt \u6210\u529f\u53d6\u5f97 chatroomId\n        LiveChat-&gt;&gt;LiveChat: \u5132\u5b58 chatroomId \u8207 lastMessageNo\n    else \u7121\u6cd5\u53d6\u5f97 chatroomId\n        LiveChat-&gt;&gt;LiveChat: \u96b1\u85cf Live Chat Bar\uff08user \u7121\u6cd5\u958b\u555f chatroom\uff09\n    end\n\n    %% \u4f7f\u7528\u8005\u958b\u555f\u804a\u5929\u8996\u7a97\n    User-&gt;&gt;LiveChat: \u9ede\u64ca Join the chat (\u958b\u555f Chatroom)\n    Note over LiveChat: \u4f7f\u7528\u5df2\u53d6\u5f97\u7684 chatroomId\n\n    %% backward API\uff1a\u88dc\u820a\u8a0a\u606f\n    LiveChat-&gt;&gt;Chat: GET /chat/match/backward { chatroomId, lastMessageNo }\n    Chat--&gt;&gt;LiveChat: \u8fd4\u56de historicalMessages\n    LiveChat-&gt;&gt;LiveChat: \u5c07 historicalMessages \u8207 websocketMessages \u5408\u4f75\u5f8c\u4f9d messageNo \u53bb\u91cd\u986f\u793a\n\n    %% \u4f7f\u7528\u8005\u95dc\u9589\u804a\u5929\u8996\u7a97\n    User-&gt;&gt;LiveChat: \u9ede\u64ca\u804a\u5929\u5ba4\u5916\u90e8\u7f6e\u7070\u5340\u57df\u6216 bar\uff08\u95dc\u9589 Chatroom\uff09\n    Note over LiveChat: \u50c5\u6e05\u9664\u672c\u5730\u5feb\u53d6\uff0c\u4e0d\u9700\u8981\u547c\u53eb API\n    LiveChat-&gt;&gt;LiveChat: \u6e05\u9664 cache \u7684 messages\n\n    %% \u4f7f\u7528\u8005\u96e2\u958b Live Detail Page\n    User-&gt;&gt;LiveChat: \u96e2\u958b Live Detail Page\n    LiveChat-&gt;&gt;Chat: (unsubscribe) websocket\n</code></pre>"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/LiveChat/Module%20Sequence%20Diagrams/01_data_initialization_initialize_chatroom/#_5","title":"\u6a21\u7d44\u5e8f\u5217\u5716\uff08\u67b6\u69cb\u8a2d\u8a08\uff09","text":"<p>\u4ee5\u4e0b\u70ba\u8f49\u63db\u5f8c\u7684\u6a21\u7d44\u5e8f\u5217\u5716\uff0c\u5c55\u793a Clean Architecture \u5404\u5c64\u7d1a\u7684\u4e92\u52d5\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    box rgb(207,232,255) UI Layer\n        participant LiveDetailView\n    end\n    box rgb(255,250,205) Domain Layer\n        participant LiveChatFeature\n        participant JoinChatroomUseCase\n        participant LeaveChatroomUseCase\n    end\n    box rgb(240,240,240) Data &amp; Infrastructure Layer\n        participant LiveChatRepository\n        participant LiveChatClient\n        participant ChatWebSocketClient\n        participant ChatAPI\n    end\n    participant Server\n\n    Note over User,LiveDetailView: \u7528\u6236\u9032\u5165 Live Detail Page\n    User-&gt;&gt;LiveDetailView: \u9032\u5165 Live Detail Page\n    LiveDetailView-&gt;&gt;LiveChatFeature: onAppear\n    LiveChatFeature-&gt;&gt;LiveChatRepository: subscribeWebSocket()\n    LiveChatRepository-&gt;&gt;ChatWebSocketClient: subscribe()\n    ChatWebSocketClient-&gt;&gt;ChatAPI: WebSocket \u8a02\u95b1\n    ChatAPI-&gt;&gt;Server: wss://www.encorebet.net/chat/websocket/web-chat\n    LiveChatRepository-&gt;&gt;JoinChatroomUseCase: execute(input: JoinChatroomInput)\n    JoinChatroomUseCase-&gt;&gt;LiveChatRepository: getChatroomInfo(refId: String)\n    LiveChatRepository-&gt;&gt;LiveChatClient: getChatroomInfo(refId: String)\n    LiveChatClient-&gt;&gt;ChatAPI: GET /chat/match/{refId}\n    ChatAPI-&gt;&gt;Server: GET /chat/match/{refId}\n    Server--&gt;&gt;ChatAPI: { chatroomId, lastMessageNo }\n    ChatAPI--&gt;&gt;LiveChatClient: ChatroomInfo DTO\n    LiveChatClient--&gt;&gt;LiveChatRepository: ChatroomInfo DTO\n    LiveChatRepository--&gt;&gt;JoinChatroomUseCase: ChatroomInfo Entity\n    alt \u6210\u529f\u53d6\u5f97 chatroomId\n        JoinChatroomUseCase-&gt;&gt;JoinChatroomUseCase: \u5132\u5b58 chatroomId \u8207 lastMessageNo\n        JoinChatroomUseCase--&gt;&gt;LiveChatFeature: Output(chatroomInfo: ChatroomInfo)\n        LiveChatFeature--&gt;&gt;LiveDetailView: \u66f4\u65b0 State\n    else \u7121\u6cd5\u53d6\u5f97 chatroomId\n        JoinChatroomUseCase--&gt;&gt;LiveChatFeature: Output(error: Error)\n        LiveChatFeature-&gt;&gt;LiveChatFeature: \u96b1\u85cf Live Chat Bar\n        LiveChatFeature--&gt;&gt;LiveDetailView: \u66f4\u65b0 State\n    end\n\n    Note over User,LiveDetailView: \u7528\u6236\u958b\u555f\u804a\u5929\u8996\u7a97\n    User-&gt;&gt;LiveDetailView: \u9ede\u64ca Join the chat\n    LiveDetailView-&gt;&gt;LiveChatFeature: joinChatroom()\n    LiveChatFeature-&gt;&gt;JoinChatroomUseCase: execute(input: JoinChatroomInput)\n    JoinChatroomUseCase-&gt;&gt;LiveChatRepository: joinChatroom(chatroomId: String)\n    LiveChatRepository-&gt;&gt;LiveChatClient: joinChatroom(chatroomId: String)\n    Note over JoinChatroomUseCase: \u4f7f\u7528\u5df2\u53d6\u5f97\u7684 chatroomId \u548c lastMessageNo\n    ChatAPI-&gt;&gt;Server: POST /chat/match/join\n    Server--&gt;&gt;ChatAPI: 200 OK\n    ChatAPI--&gt;&gt;LiveChatClient: Success\n    LiveChatClient--&gt;&gt;LiveChatRepository: Success\n    LiveChatRepository--&gt;&gt;JoinChatroomUseCase: Success\n    JoinChatroomUseCase-&gt;&gt;LiveChatRepository: loadHistoricalMessages(chatroomId: String, lastMessageNo: Int)\n    LiveChatRepository-&gt;&gt;LiveChatClient: loadHistoricalMessages(chatroomId: String, lastMessageNo: Int)\n    LiveChatClient-&gt;&gt;ChatAPI: GET /chat/match/backward\n    ChatAPI-&gt;&gt;Server: POST /chat/match/backward { chatroomId, lastMessageNo }\n    Server--&gt;&gt;ChatAPI: historicalMessages\n    ChatAPI--&gt;&gt;LiveChatClient: [Message] DTO\n    LiveChatClient--&gt;&gt;LiveChatRepository: [Message] DTO\n    LiveChatRepository--&gt;&gt;JoinChatroomUseCase: [Message] Entity\n    JoinChatroomUseCase-&gt;&gt;JoinChatroomUseCase: \u5c07 historicalMessages \u8207 websocketMessages \u5408\u4f75\u5f8c\u4f9d messageNo \u53bb\u91cd\n    JoinChatroomUseCase--&gt;&gt;LiveChatFeature: Output(messages: [Message])\n    LiveChatFeature--&gt;&gt;LiveDetailView: \u66f4\u65b0 State\n\n    Note over User,LiveDetailView: \u7528\u6236\u95dc\u9589\u804a\u5929\u8996\u7a97\n    User-&gt;&gt;LiveDetailView: \u9ede\u64ca\u804a\u5929\u5ba4\u5916\u90e8\u7f6e\u7070\u5340\u57df\u6216 bar\n    LiveDetailView-&gt;&gt;LiveChatFeature: leaveChatroom()\n    LiveChatFeature-&gt;&gt;LeaveChatroomUseCase: execute(input: LeaveChatroomInput)\n    LeaveChatroomUseCase-&gt;&gt;LiveChatRepository: leaveChatroom(chatroomId: String)\n    LiveChatRepository-&gt;&gt;LiveChatClient: leaveChatroom(chatroomId: String)\n    Note over LeaveChatroomUseCase: \u50c5\u6e05\u9664\u672c\u5730\u5feb\u53d6\uff0c\u4e0d\u9700\u8981\u547c\u53eb API\n    ChatAPI-&gt;&gt;Server: POST /chat/match/leave\n    Server--&gt;&gt;ChatAPI: 200 OK\n    ChatAPI--&gt;&gt;LiveChatClient: Success\n    LiveChatClient--&gt;&gt;LiveChatRepository: Success\n    LiveChatRepository--&gt;&gt;LeaveChatroomUseCase: Success\n    LeaveChatroomUseCase-&gt;&gt;LeaveChatroomUseCase: \u6e05\u9664 cache \u7684 messages\n    LeaveChatroomUseCase-&gt;&gt;LiveChatRepository: checkAndCleanBlacklist()\n    LiveChatRepository-&gt;&gt;LiveChatRepository: \u6bd4\u8f03\u9ed1\u540d\u55ae\u7d00\u9304\u7684\u52a0\u5165\u6642\u9593\u8207\u7576\u524d\u6642\u9593\n    LiveChatRepository-&gt;&gt;LiveChatRepository: \u82e5\u8d85\u904e 4 \u5c0f\u6642\u5247\u81ea\u52d5\u79fb\u9664\u9ed1\u540d\u55ae\u7d00\u9304\n    LiveChatRepository--&gt;&gt;LeaveChatroomUseCase: Success\n    LeaveChatroomUseCase--&gt;&gt;LiveChatFeature: Output()\n    LiveChatFeature--&gt;&gt;LiveDetailView: \u66f4\u65b0 State\n\n    Note over User,LiveDetailView: \u7528\u6236\u96e2\u958b Live Detail Page\n    User-&gt;&gt;LiveDetailView: \u96e2\u958b Live Detail Page\n    LiveDetailView-&gt;&gt;LiveChatFeature: onDisappear\n    LiveChatFeature-&gt;&gt;LiveChatRepository: unsubscribeWebSocket()\n    LiveChatRepository-&gt;&gt;ChatWebSocketClient: unsubscribe()\n    ChatWebSocketClient-&gt;&gt;ChatAPI: WebSocket \u53d6\u6d88\u8a02\u95b1\n    ChatAPI-&gt;&gt;Server: WebSocket \u53d6\u6d88\u8a02\u95b1</code></pre> <p>Mermaid \u8a9e\u6cd5\uff08\u53ef\u8907\u88fd\uff09\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    box rgb(207,232,255) UI Layer\n        participant LiveDetailView\n    end\n    box rgb(255,250,205) Domain Layer\n        participant LiveChatFeature\n        participant JoinChatroomUseCase\n        participant LeaveChatroomUseCase\n    end\n    box rgb(240,240,240) Data &amp; Infrastructure Layer\n        participant LiveChatRepository\n        participant LiveChatClient\n        participant ChatWebSocketClient\n        participant ChatAPI\n    end\n    participant Server\n\n    Note over User,LiveDetailView: \u7528\u6236\u9032\u5165 Live Detail Page\n    User-&gt;&gt;LiveDetailView: \u9032\u5165 Live Detail Page\n    LiveDetailView-&gt;&gt;LiveChatFeature: onAppear\n    LiveChatFeature-&gt;&gt;LiveChatRepository: subscribeWebSocket()\n    LiveChatRepository-&gt;&gt;ChatWebSocketClient: subscribe()\n    ChatWebSocketClient-&gt;&gt;ChatAPI: WebSocket \u8a02\u95b1\n    ChatAPI-&gt;&gt;Server: wss://www.encorebet.net/chat/websocket/web-chat\n    LiveChatRepository-&gt;&gt;JoinChatroomUseCase: execute(input: JoinChatroomInput)\n    JoinChatroomUseCase-&gt;&gt;LiveChatRepository: getChatroomInfo(refId: String)\n    LiveChatRepository-&gt;&gt;LiveChatClient: getChatroomInfo(refId: String)\n    LiveChatClient-&gt;&gt;ChatAPI: GET /chat/match/{refId}\n    ChatAPI-&gt;&gt;Server: GET /chat/match/{refId}\n    Server--&gt;&gt;ChatAPI: { chatroomId, lastMessageNo }\n    ChatAPI--&gt;&gt;LiveChatClient: ChatroomInfo DTO\n    LiveChatClient--&gt;&gt;LiveChatRepository: ChatroomInfo DTO\n    LiveChatRepository--&gt;&gt;JoinChatroomUseCase: ChatroomInfo Entity\n    alt \u6210\u529f\u53d6\u5f97 chatroomId\n        JoinChatroomUseCase-&gt;&gt;JoinChatroomUseCase: \u5132\u5b58 chatroomId \u8207 lastMessageNo\n        JoinChatroomUseCase--&gt;&gt;LiveChatFeature: Output(chatroomInfo: ChatroomInfo)\n        LiveChatFeature--&gt;&gt;LiveDetailView: \u66f4\u65b0 State\n    else \u7121\u6cd5\u53d6\u5f97 chatroomId\n        JoinChatroomUseCase--&gt;&gt;LiveChatFeature: Output(error: Error)\n        LiveChatFeature-&gt;&gt;LiveChatFeature: \u96b1\u85cf Live Chat Bar\n        LiveChatFeature--&gt;&gt;LiveDetailView: \u66f4\u65b0 State\n    end\n\n    Note over User,LiveDetailView: \u7528\u6236\u958b\u555f\u804a\u5929\u8996\u7a97\n    User-&gt;&gt;LiveDetailView: \u9ede\u64ca Join the chat\n    LiveDetailView-&gt;&gt;LiveChatFeature: joinChatroom()\n    LiveChatFeature-&gt;&gt;JoinChatroomUseCase: execute(input: JoinChatroomInput)\n    JoinChatroomUseCase-&gt;&gt;LiveChatRepository: joinChatroom(chatroomId: String)\n    LiveChatRepository-&gt;&gt;LiveChatClient: joinChatroom(chatroomId: String)\n    Note over JoinChatroomUseCase: \u4f7f\u7528\u5df2\u53d6\u5f97\u7684 chatroomId \u548c lastMessageNo\n    ChatAPI-&gt;&gt;Server: POST /chat/match/join\n    Server--&gt;&gt;ChatAPI: 200 OK\n    ChatAPI--&gt;&gt;LiveChatClient: Success\n    LiveChatClient--&gt;&gt;LiveChatRepository: Success\n    LiveChatRepository--&gt;&gt;JoinChatroomUseCase: Success\n    JoinChatroomUseCase-&gt;&gt;LiveChatRepository: loadHistoricalMessages(chatroomId: String, lastMessageNo: Int)\n    LiveChatRepository-&gt;&gt;LiveChatClient: loadHistoricalMessages(chatroomId: String, lastMessageNo: Int)\n    LiveChatClient-&gt;&gt;ChatAPI: GET /chat/match/backward\n    ChatAPI-&gt;&gt;Server: POST /chat/match/backward { chatroomId, lastMessageNo }\n    Server--&gt;&gt;ChatAPI: historicalMessages\n    ChatAPI--&gt;&gt;LiveChatClient: [Message] DTO\n    LiveChatClient--&gt;&gt;LiveChatRepository: [Message] DTO\n    LiveChatRepository--&gt;&gt;JoinChatroomUseCase: [Message] Entity\n    JoinChatroomUseCase-&gt;&gt;JoinChatroomUseCase: \u5c07 historicalMessages \u8207 websocketMessages \u5408\u4f75\u5f8c\u4f9d messageNo \u53bb\u91cd\n    JoinChatroomUseCase--&gt;&gt;LiveChatFeature: Output(messages: [Message])\n    LiveChatFeature--&gt;&gt;LiveDetailView: \u66f4\u65b0 State\n\n    Note over User,LiveDetailView: \u7528\u6236\u95dc\u9589\u804a\u5929\u8996\u7a97\n    User-&gt;&gt;LiveDetailView: \u9ede\u64ca\u804a\u5929\u5ba4\u5916\u90e8\u7f6e\u7070\u5340\u57df\u6216 bar\n    LiveDetailView-&gt;&gt;LiveChatFeature: leaveChatroom()\n    LiveChatFeature-&gt;&gt;LeaveChatroomUseCase: execute(input: LeaveChatroomInput)\n    LeaveChatroomUseCase-&gt;&gt;LiveChatRepository: leaveChatroom(chatroomId: String)\n    LiveChatRepository-&gt;&gt;LiveChatClient: leaveChatroom(chatroomId: String)\n    Note over LeaveChatroomUseCase: \u50c5\u6e05\u9664\u672c\u5730\u5feb\u53d6\uff0c\u4e0d\u9700\u8981\u547c\u53eb API\n    ChatAPI-&gt;&gt;Server: POST /chat/match/leave\n    Server--&gt;&gt;ChatAPI: 200 OK\n    ChatAPI--&gt;&gt;LiveChatClient: Success\n    LiveChatClient--&gt;&gt;LiveChatRepository: Success\n    LiveChatRepository--&gt;&gt;LeaveChatroomUseCase: Success\n    LeaveChatroomUseCase-&gt;&gt;LeaveChatroomUseCase: \u6e05\u9664 cache \u7684 messages\n    LeaveChatroomUseCase-&gt;&gt;LiveChatRepository: checkAndCleanBlacklist()\n    LiveChatRepository-&gt;&gt;LiveChatRepository: \u6bd4\u8f03\u9ed1\u540d\u55ae\u7d00\u9304\u7684\u52a0\u5165\u6642\u9593\u8207\u7576\u524d\u6642\u9593\n    LiveChatRepository-&gt;&gt;LiveChatRepository: \u82e5\u8d85\u904e 4 \u5c0f\u6642\u5247\u81ea\u52d5\u79fb\u9664\u9ed1\u540d\u55ae\u7d00\u9304\n    LiveChatRepository--&gt;&gt;LeaveChatroomUseCase: Success\n    LeaveChatroomUseCase--&gt;&gt;LiveChatFeature: Output()\n    LiveChatFeature--&gt;&gt;LiveDetailView: \u66f4\u65b0 State\n\n    Note over User,LiveDetailView: \u7528\u6236\u96e2\u958b Live Detail Page\n    User-&gt;&gt;LiveDetailView: \u96e2\u958b Live Detail Page\n    LiveDetailView-&gt;&gt;LiveChatFeature: onDisappear\n    LiveChatFeature-&gt;&gt;LiveChatRepository: unsubscribeWebSocket()\n    LiveChatRepository-&gt;&gt;ChatWebSocketClient: unsubscribe()\n    ChatWebSocketClient-&gt;&gt;ChatAPI: WebSocket \u53d6\u6d88\u8a02\u95b1\n    ChatAPI-&gt;&gt;Server: WebSocket \u53d6\u6d88\u8a02\u95b1\n</code></pre>"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/LiveChat/Module%20Sequence%20Diagrams/02_data_interaction_send_message/","title":"\u767c\u9001\u804a\u5929\u8a0a\u606f\u6d41\u7a0b","text":""},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/LiveChat/Module%20Sequence%20Diagrams/02_data_interaction_send_message/#flow","title":"Flow \u8cc7\u8a0a","text":"\u6b04\u4f4d \u503c feature LiveChat flow_id LC-SUB-001 flow_type Sub flow_name \u7528\u6236\u7559 comment \u6642\u767b\u5165\u8207 nickname \u6aa2\u67e5 parent_flow_id LC-FULL-001 parent_flow_name \u7528\u6236\u9032\u5165\u8207\u96e2\u958b\u804a\u5929\u5ba4\uff08\u542b WebSocket \u76f8\u4f9d\uff09 original_annotation @flow: Sub"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/LiveChat/Module%20Sequence%20Diagrams/02_data_interaction_send_message/#_2","title":"\u6a21\u7d44\u8aaa\u660e","text":"\u6a21\u7d44\u540d\u7a31 \u8077\u8cac LiveDetailView \u76f4\u64ad\u8a73\u60c5\u9801\u9762 LiveChatFeature TCA Reducer\uff0c\u7ba1\u7406\u804a\u5929\u5ba4\u76f8\u95dc\u7684 State \u548c Action SendChatMessageUseCase \u767c\u9001\u804a\u5929\u8a0a\u606f LiveChatRepository Domain \u8cc7\u6599\u4f86\u6e90\u7684\u62bd\u8c61\u4ecb\u9762\uff08\u804a\u5929\u5ba4\u76f8\u95dc\uff09 LiveChatClient HTTP \u901a\u8a0a\uff08\u804a\u5929\u5ba4\u76f8\u95dc\uff09 ChatAPI \u5f8c\u7aef endpoint \u5b9a\u7fa9\uff08\u804a\u5929\u5ba4\u76f8\u95dc\uff09 PersonalPage Package (External) \u767b\u5165\u6d41\u7a0b\uff08\u5916\u90e8 Package\uff09 FComSharedFlow Package (External) Nickname \u5efa\u7acb\u6d41\u7a0b\uff08\u5916\u90e8 Package\uff09"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/LiveChat/Module%20Sequence%20Diagrams/02_data_interaction_send_message/#_3","title":"\u6d41\u7a0b\u8aaa\u660e","text":"\u6d41\u7a0b\u6b65\u9a5f \u8aaa\u660e 1. \u9ede\u64ca\u8f38\u5165\u6846\u8207\u767b\u5165\u6aa2\u67e5 1. \u7528\u6236\u9ede\u64ca\u8f38\u5165\u6846\u6e96\u5099\u8f38\u5165\u7559\u8a002. \u6aa2\u67e5\u767b\u5165\u72c0\u614b3. \u672a\u767b\u5165\u5247\u8df3\u8f49\u5230 PersonalPage \u5b8c\u6210\u767b\u5165 2. \u8f38\u5165\u4e26\u9001\u51fa\u7559\u8a00 1. \u7528\u6236\u8f38\u5165\u4e26\u9001\u51fa Chat2. \u6aa2\u67e5 nickname \u662f\u5426\u5b58\u5728 3. \u6709 nickname \u6642\u767c\u9001 1. \u5df2\u6709 nickname\uff0c\u76f4\u63a5\u9001\u51fa\u7559\u8a002. \u986f\u793a\u65b0\u7559\u8a00 4. \u7121 nickname \u6642\u767c\u9001 1. \u8abf\u7528 FComSharedFlow Package \u5efa\u7acb nickname2. \u5efa\u7acb\u6210\u529f\u5f8c\u9001\u51fa\u7559\u8a003. \u986f\u793a Chat \u5728\u6700\u65b0\u7684\u4f4d\u7f6e\u4e26 highlight 3 \u79d2"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/LiveChat/Module%20Sequence%20Diagrams/02_data_interaction_send_message/#_4","title":"\u5834\u666f\u5e8f\u5217\u5716\uff08\u539f\u59cb\u696d\u52d9\u6d41\u7a0b\uff09","text":"<p>\u4ee5\u4e0b\u70ba\u539f\u59cb\u696d\u52d9\u6d41\u7a0b\u7684\u5e8f\u5217\u5716\uff0c\u5c55\u793a\u5f9e\u696d\u52d9\u89d2\u5ea6\u7684\u5b8c\u6574\u6d41\u7a0b\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    box rgb(255, 248, 220) App\n        participant LiveChat as LiveChat Package\n        participant MainApp as Main App\n        participant PersonalPage as PersonalPage Package(external)\n        participant FComSharedFlow as FComSharedFlow Package(external)\n    end\n    participant Chat as Server\n\n    %% \u4f7f\u7528\u8005\u9ede\u64ca\u8f38\u5165\u6846 \u2192 \u5148\u505a\u767b\u5165\u6aa2\u67e5\n    User-&gt;&gt;LiveChat: \u9ede\u64ca\u8f38\u5165\u6846\uff08\u6e96\u5099\u8f38\u5165 Chat\uff09\n    note over LiveChat: \u9ede\u64ca\u8f38\u5165\u6846\u6642\u89f8\u767c\u767b\u5165\u6aa2\u67e5\n    LiveChat-&gt;&gt;MainApp: APICoordinator.shared.accountManager \u6aa2\u67e5\u767b\u5165\u72c0\u614b\n\n    alt [\u4f7f\u7528\u8005\u5df2\u767b\u5165]\n        MainApp--&gt;&gt;LiveChat: \u5df2\u767b\u5165\n        note over LiveChat: \u5df2\u767b\u5165\uff0c\u5141\u8a31\u8f38\u5165\u7559\u8a00\n    else [\u4f7f\u7528\u8005\u672a\u767b\u5165]\n        MainApp--&gt;&gt;LiveChat: \u672a\u767b\u5165\n        LiveChat-&gt;&gt;MainApp: route(to: .personalPage)\n        MainApp-&gt;&gt;PersonalPage: \u8df3\u8f49\u5230 PersonalPage\n        PersonalPage-&gt;&gt;PersonalPage: \u5b8c\u6210 user \u767b\u5165\u6d41\u7a0b\n        PersonalPage--&gt;&gt;LiveChat: \u767b\u5165\u6210\u529f\uff08\u56de\u8df3\u81f3\u539f\u9801\u9762\uff09\n        note over LiveChat: \u767b\u5165\u5b8c\u6210\u5f8c\u53ef\u518d\u6b21\u9ede\u64ca\u8f38\u5165\u6846\u7e7c\u7e8c\u6d41\u7a0b\n    end\n\n    %% \u4f7f\u7528\u8005\u8f38\u5165\u4e26\u9001\u51fa Comment/Reply\n    User-&gt;&gt;LiveChat: \u8f38\u5165\u4e26\u9001\u51fa Chat\n\n    %% nickname \u6aa2\u67e5\uff08\u900f\u904e Main App \u7684 accountManager\uff09\n    note over LiveChat: \u9001\u51fa\u524d\u6aa2\u67e5 client \u7aef nickname \u662f\u5426\u5b58\u5728\n    LiveChat-&gt;&gt;MainApp: APICoordinator.shared.accountManager.currentMetadata?.nickname \u6aa2\u67e5\n\n    alt [nickname \u5b58\u5728]\n        MainApp--&gt;&gt;LiveChat: nickname \u5b58\u5728\n        note over LiveChat: \u5df2\u6709 nickname\uff0c\u76f4\u63a5\u9001\u51fa Chat\n        LiveChat-&gt;&gt;Chat: POST /chat/match/comment { refId, content, parentId? }\n\n        alt [\u7559\u8a00\u6210\u529f]\n            Chat--&gt;&gt;LiveChat: 201 Created\uff08\u56de\u50b3 comment \u8cc7\u6599\uff09\n            LiveChat--&gt;&gt;User: \u986f\u793a\u65b0\u7559\u8a00\n        else [\u7559\u8a00\u5931\u6557]\n            Chat--&gt;&gt;LiveChat: 4xx/5xx Error\uff08\u7559\u8a00\u5931\u6557\uff09\n            LiveChat--&gt;&gt;User: \u986f\u793a\u932f\u8aa4 Toast\uff08\u7559\u8a00\u5931\u6557\uff09\n        end\n\n    else [nickname \u4e0d\u5b58\u5728]\n        MainApp--&gt;&gt;LiveChat: nickname \u4e0d\u5b58\u5728\n        note over LiveChat: \u9700\u4f7f\u7528 FComSharedFlow Package \u5efa\u7acb nickname\n\n        %% App \u7aef nickname \u5efa\u7acb\u6d41\u7a0b\uff08\u900f\u904e FComSharedFlow Package\uff09\n        LiveChat-&gt;&gt;FComSharedFlow: \u8abf\u7528 CreatNickName API\n        FComSharedFlow--&gt;&gt;User: \u986f\u793a create nickName pop-up\n        User-&gt;&gt;FComSharedFlow: \u4f7f\u7528\u8005\u8f38\u5165 nickname\n        FComSharedFlow-&gt;&gt;FComSharedFlow: FComSharedFlow Package \u5efa\u7acb nickname\n        FComSharedFlow--&gt;&gt;LiveChat: nickname \u5efa\u7acb\u6210\u529f\n\n        LiveChat-&gt;&gt;Chat: POST /chat/{matchId}/message { content, messageType: TEXT }\n\n        alt [\u7559\u8a00\u6210\u529f]\n            Chat--&gt;&gt;LiveChat: 201 Created\n            LiveChat--&gt;&gt;User: \u986f\u793a Chat \u5728\u6700\u65b0\u7684\u4f4d\u7f6e\uff0c\u4e26 highlight 3 \u79d2\n        else [\u7559\u8a00\u5931\u6557]\n            Chat--&gt;&gt;LiveChat: 4xx/5xx Error\uff08\u7559\u8a00\u5931\u6557\uff09\n            LiveChat--&gt;&gt;User: \u986f\u793a\u932f\u8aa4 Toast\uff08\u7559\u8a00\u5931\u6557\uff09\n        end\n    end</code></pre> <p>Mermaid \u8a9e\u6cd5\uff08\u53ef\u8907\u88fd\uff09\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    box rgb(255, 248, 220) App\n        participant LiveChat as LiveChat Package\n        participant MainApp as Main App\n        participant PersonalPage as PersonalPage Package(external)\n        participant FComSharedFlow as FComSharedFlow Package(external)\n    end\n    participant Chat as Server\n\n    %% \u4f7f\u7528\u8005\u9ede\u64ca\u8f38\u5165\u6846 \u2192 \u5148\u505a\u767b\u5165\u6aa2\u67e5\n    User-&gt;&gt;LiveChat: \u9ede\u64ca\u8f38\u5165\u6846\uff08\u6e96\u5099\u8f38\u5165 Chat\uff09\n    note over LiveChat: \u9ede\u64ca\u8f38\u5165\u6846\u6642\u89f8\u767c\u767b\u5165\u6aa2\u67e5\n    LiveChat-&gt;&gt;MainApp: APICoordinator.shared.accountManager \u6aa2\u67e5\u767b\u5165\u72c0\u614b\n\n    alt [\u4f7f\u7528\u8005\u5df2\u767b\u5165]\n        MainApp--&gt;&gt;LiveChat: \u5df2\u767b\u5165\n        note over LiveChat: \u5df2\u767b\u5165\uff0c\u5141\u8a31\u8f38\u5165\u7559\u8a00\n    else [\u4f7f\u7528\u8005\u672a\u767b\u5165]\n        MainApp--&gt;&gt;LiveChat: \u672a\u767b\u5165\n        LiveChat-&gt;&gt;MainApp: route(to: .personalPage)\n        MainApp-&gt;&gt;PersonalPage: \u8df3\u8f49\u5230 PersonalPage\n        PersonalPage-&gt;&gt;PersonalPage: \u5b8c\u6210 user \u767b\u5165\u6d41\u7a0b\n        PersonalPage--&gt;&gt;LiveChat: \u767b\u5165\u6210\u529f\uff08\u56de\u8df3\u81f3\u539f\u9801\u9762\uff09\n        note over LiveChat: \u767b\u5165\u5b8c\u6210\u5f8c\u53ef\u518d\u6b21\u9ede\u64ca\u8f38\u5165\u6846\u7e7c\u7e8c\u6d41\u7a0b\n    end\n\n    %% \u4f7f\u7528\u8005\u8f38\u5165\u4e26\u9001\u51fa Comment/Reply\n    User-&gt;&gt;LiveChat: \u8f38\u5165\u4e26\u9001\u51fa Chat\n\n    %% nickname \u6aa2\u67e5\uff08\u900f\u904e Main App \u7684 accountManager\uff09\n    note over LiveChat: \u9001\u51fa\u524d\u6aa2\u67e5 client \u7aef nickname \u662f\u5426\u5b58\u5728\n    LiveChat-&gt;&gt;MainApp: APICoordinator.shared.accountManager.currentMetadata?.nickname \u6aa2\u67e5\n\n    alt [nickname \u5b58\u5728]\n        MainApp--&gt;&gt;LiveChat: nickname \u5b58\u5728\n        note over LiveChat: \u5df2\u6709 nickname\uff0c\u76f4\u63a5\u9001\u51fa Chat\n        LiveChat-&gt;&gt;Chat: POST /chat/match/comment { refId, content, parentId? }\n\n        alt [\u7559\u8a00\u6210\u529f]\n            Chat--&gt;&gt;LiveChat: 201 Created\uff08\u56de\u50b3 comment \u8cc7\u6599\uff09\n            LiveChat--&gt;&gt;User: \u986f\u793a\u65b0\u7559\u8a00\n        else [\u7559\u8a00\u5931\u6557]\n            Chat--&gt;&gt;LiveChat: 4xx/5xx Error\uff08\u7559\u8a00\u5931\u6557\uff09\n            LiveChat--&gt;&gt;User: \u986f\u793a\u932f\u8aa4 Toast\uff08\u7559\u8a00\u5931\u6557\uff09\n        end\n\n    else [nickname \u4e0d\u5b58\u5728]\n        MainApp--&gt;&gt;LiveChat: nickname \u4e0d\u5b58\u5728\n        note over LiveChat: \u9700\u4f7f\u7528 FComSharedFlow Package \u5efa\u7acb nickname\n\n        %% App \u7aef nickname \u5efa\u7acb\u6d41\u7a0b\uff08\u900f\u904e FComSharedFlow Package\uff09\n        LiveChat-&gt;&gt;FComSharedFlow: \u8abf\u7528 CreatNickName API\n        FComSharedFlow--&gt;&gt;User: \u986f\u793a create nickName pop-up\n        User-&gt;&gt;FComSharedFlow: \u4f7f\u7528\u8005\u8f38\u5165 nickname\n        FComSharedFlow-&gt;&gt;FComSharedFlow: FComSharedFlow Package \u5efa\u7acb nickname\n        FComSharedFlow--&gt;&gt;LiveChat: nickname \u5efa\u7acb\u6210\u529f\n\n        LiveChat-&gt;&gt;Chat: POST /chat/{matchId}/message { content, messageType: TEXT }\n\n        alt [\u7559\u8a00\u6210\u529f]\n            Chat--&gt;&gt;LiveChat: 201 Created\n            LiveChat--&gt;&gt;User: \u986f\u793a Chat \u5728\u6700\u65b0\u7684\u4f4d\u7f6e\uff0c\u4e26 highlight 3 \u79d2\n        else [\u7559\u8a00\u5931\u6557]\n            Chat--&gt;&gt;LiveChat: 4xx/5xx Error\uff08\u7559\u8a00\u5931\u6557\uff09\n            LiveChat--&gt;&gt;User: \u986f\u793a\u932f\u8aa4 Toast\uff08\u7559\u8a00\u5931\u6557\uff09\n        end\n    end\n</code></pre>"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/LiveChat/Module%20Sequence%20Diagrams/02_data_interaction_send_message/#_5","title":"\u6a21\u7d44\u5e8f\u5217\u5716\uff08\u67b6\u69cb\u8a2d\u8a08\uff09","text":"<p>\u4ee5\u4e0b\u70ba\u8f49\u63db\u5f8c\u7684\u6a21\u7d44\u5e8f\u5217\u5716\uff0c\u5c55\u793a Clean Architecture \u5404\u5c64\u7d1a\u7684\u4e92\u52d5\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    box rgb(207,232,255) UI Layer\n        participant LiveDetailView\n    end\n    box rgb(255,250,205) Domain Layer\n        participant LiveChatFeature\n        participant SendChatMessageUseCase\n    end\n    box rgb(240,240,240) Data &amp; Infrastructure Layer\n        participant LiveChatRepository\n        participant LiveChatClient\n        participant ChatAPI\n    end\n    participant PersonalPagePackage as PersonalPage Package (External)\n    participant FComSharedFlowPackage as FComSharedFlow Package (External)\n    participant Server\n\n    Note over User,LiveDetailView: \u7528\u6236\u9ede\u64ca\u8f38\u5165\u6846\n    User-&gt;&gt;LiveDetailView: \u9ede\u64ca\u8f38\u5165\u6846\n    LiveDetailView-&gt;&gt;LiveChatFeature: tapInputField\n    LiveChatFeature-&gt;&gt;LiveChatFeature: \u6aa2\u67e5\u767b\u5165\u72c0\u614b\uff08\u900f\u904e Main App\uff09\n    alt \u4f7f\u7528\u8005\u5df2\u767b\u5165\n        LiveChatFeature-&gt;&gt;LiveChatFeature: \u5df2\u767b\u5165\uff0c\u5141\u8a31\u8f38\u5165\u7559\u8a00\n    else \u4f7f\u7528\u8005\u672a\u767b\u5165\n        LiveChatFeature-&gt;&gt;PersonalPagePackage: route(to: .personalPage)\n        PersonalPagePackage-&gt;&gt;PersonalPagePackage: \u5b8c\u6210 user \u767b\u5165\u6d41\u7a0b\n        PersonalPagePackage--&gt;&gt;LiveChatFeature: \u767b\u5165\u6210\u529f\uff08\u56de\u8df3\u81f3\u539f\u9801\u9762\uff09\n    end\n\n    Note over User,LiveDetailView: \u7528\u6236\u8f38\u5165\u4e26\u9001\u51fa Chat\n    User-&gt;&gt;LiveDetailView: \u8f38\u5165\u4e26\u9001\u51fa Chat\n    LiveDetailView-&gt;&gt;LiveChatFeature: sendMessage(content: String)\n    LiveChatFeature-&gt;&gt;SendChatMessageUseCase: execute(input: SendChatMessageInput)\n    SendChatMessageUseCase-&gt;&gt;SendChatMessageUseCase: \u6aa2\u67e5 nickname\uff08\u900f\u904e Main App\uff09\n    alt nickname \u5b58\u5728\n        SendChatMessageUseCase-&gt;&gt;LiveChatRepository: sendMessage(chatroomId: String, content: String, messageType: MessageType)\n        LiveChatRepository-&gt;&gt;LiveChatClient: sendMessage(chatroomId: String, content: String, messageType: MessageType)\n        LiveChatClient-&gt;&gt;ChatAPI: POST /chat/match/comment\n        ChatAPI-&gt;&gt;Server: POST /chat/match/comment { refId, content, parentId? }\n        alt \u7559\u8a00\u6210\u529f\n            Server--&gt;&gt;ChatAPI: 201 Created\uff08\u56de\u50b3 comment \u8cc7\u6599\uff09\n            ChatAPI--&gt;&gt;LiveChatClient: Message DTO\n            LiveChatClient--&gt;&gt;LiveChatRepository: Message DTO\n            LiveChatRepository--&gt;&gt;SendChatMessageUseCase: Message Entity\n            SendChatMessageUseCase--&gt;&gt;LiveChatFeature: Output(message: Message)\n            LiveChatFeature--&gt;&gt;LiveDetailView: \u66f4\u65b0 State\n            LiveDetailView--&gt;&gt;User: \u986f\u793a\u65b0\u7559\u8a00\n        else \u7559\u8a00\u5931\u6557\n            Server--&gt;&gt;ChatAPI: 4xx/5xx Error\n            ChatAPI--&gt;&gt;LiveChatClient: Error\n            LiveChatClient--&gt;&gt;LiveChatRepository: Error\n            LiveChatRepository--&gt;&gt;SendChatMessageUseCase: Error\n            SendChatMessageUseCase--&gt;&gt;LiveChatFeature: Output(error: Error)\n            LiveChatFeature--&gt;&gt;LiveDetailView: \u66f4\u65b0 State\n            LiveDetailView--&gt;&gt;User: \u986f\u793a\u932f\u8aa4 Toast\n        end\n    else nickname \u4e0d\u5b58\u5728\n        SendChatMessageUseCase-&gt;&gt;FComSharedFlowPackage: CreatNickName API\n        FComSharedFlowPackage--&gt;&gt;User: \u986f\u793a create nickName pop-up\n        User-&gt;&gt;FComSharedFlowPackage: \u4f7f\u7528\u8005\u8f38\u5165 nickname\n        FComSharedFlowPackage-&gt;&gt;FComSharedFlowPackage: FComSharedFlow Package \u5efa\u7acb nickname\n        FComSharedFlowPackage--&gt;&gt;SendChatMessageUseCase: nickname \u5efa\u7acb\u6210\u529f\n        SendChatMessageUseCase-&gt;&gt;LiveChatRepository: sendMessage(chatroomId: String, content: String, messageType: MessageType)\n        LiveChatRepository-&gt;&gt;LiveChatClient: sendMessage(chatroomId: String, content: String, messageType: MessageType)\n        LiveChatClient-&gt;&gt;ChatAPI: POST /chat/{matchId}/message\n        ChatAPI-&gt;&gt;Server: POST /chat/{matchId}/message { content, messageType: TEXT }\n        alt \u7559\u8a00\u6210\u529f\n            Server--&gt;&gt;ChatAPI: 201 Created\n            ChatAPI--&gt;&gt;LiveChatClient: Message DTO\n            LiveChatClient--&gt;&gt;LiveChatRepository: Message DTO\n            LiveChatRepository--&gt;&gt;SendChatMessageUseCase: Message Entity\n            SendChatMessageUseCase--&gt;&gt;LiveChatFeature: Output(message: Message)\n            LiveChatFeature--&gt;&gt;LiveDetailView: \u66f4\u65b0 State\n            LiveDetailView--&gt;&gt;User: \u986f\u793a Chat \u5728\u6700\u65b0\u7684\u4f4d\u7f6e\uff0c\u4e26 highlight 3 \u79d2\n        else \u7559\u8a00\u5931\u6557\n            Server--&gt;&gt;ChatAPI: 4xx/5xx Error\n            ChatAPI--&gt;&gt;LiveChatClient: Error\n            LiveChatClient--&gt;&gt;LiveChatRepository: Error\n            LiveChatRepository--&gt;&gt;SendChatMessageUseCase: Error\n            SendChatMessageUseCase--&gt;&gt;LiveChatFeature: Output(error: Error)\n            LiveChatFeature--&gt;&gt;LiveDetailView: \u66f4\u65b0 State\n            LiveDetailView--&gt;&gt;User: \u986f\u793a\u932f\u8aa4 Toast\n        end\n    end</code></pre> <p>Mermaid \u8a9e\u6cd5\uff08\u53ef\u8907\u88fd\uff09\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    box rgb(207,232,255) UI Layer\n        participant LiveDetailView\n    end\n    box rgb(255,250,205) Domain Layer\n        participant LiveChatFeature\n        participant SendChatMessageUseCase\n    end\n    box rgb(240,240,240) Data &amp; Infrastructure Layer\n        participant LiveChatRepository\n        participant LiveChatClient\n        participant ChatAPI\n    end\n    participant PersonalPagePackage as PersonalPage Package (External)\n    participant FComSharedFlowPackage as FComSharedFlow Package (External)\n    participant Server\n\n    Note over User,LiveDetailView: \u7528\u6236\u9ede\u64ca\u8f38\u5165\u6846\n    User-&gt;&gt;LiveDetailView: \u9ede\u64ca\u8f38\u5165\u6846\n    LiveDetailView-&gt;&gt;LiveChatFeature: tapInputField\n    LiveChatFeature-&gt;&gt;LiveChatFeature: \u6aa2\u67e5\u767b\u5165\u72c0\u614b\uff08\u900f\u904e Main App\uff09\n    alt \u4f7f\u7528\u8005\u5df2\u767b\u5165\n        LiveChatFeature-&gt;&gt;LiveChatFeature: \u5df2\u767b\u5165\uff0c\u5141\u8a31\u8f38\u5165\u7559\u8a00\n    else \u4f7f\u7528\u8005\u672a\u767b\u5165\n        LiveChatFeature-&gt;&gt;PersonalPagePackage: route(to: .personalPage)\n        PersonalPagePackage-&gt;&gt;PersonalPagePackage: \u5b8c\u6210 user \u767b\u5165\u6d41\u7a0b\n        PersonalPagePackage--&gt;&gt;LiveChatFeature: \u767b\u5165\u6210\u529f\uff08\u56de\u8df3\u81f3\u539f\u9801\u9762\uff09\n    end\n\n    Note over User,LiveDetailView: \u7528\u6236\u8f38\u5165\u4e26\u9001\u51fa Chat\n    User-&gt;&gt;LiveDetailView: \u8f38\u5165\u4e26\u9001\u51fa Chat\n    LiveDetailView-&gt;&gt;LiveChatFeature: sendMessage(content: String)\n    LiveChatFeature-&gt;&gt;SendChatMessageUseCase: execute(input: SendChatMessageInput)\n    SendChatMessageUseCase-&gt;&gt;SendChatMessageUseCase: \u6aa2\u67e5 nickname\uff08\u900f\u904e Main App\uff09\n    alt nickname \u5b58\u5728\n        SendChatMessageUseCase-&gt;&gt;LiveChatRepository: sendMessage(chatroomId: String, content: String, messageType: MessageType)\n        LiveChatRepository-&gt;&gt;LiveChatClient: sendMessage(chatroomId: String, content: String, messageType: MessageType)\n        LiveChatClient-&gt;&gt;ChatAPI: POST /chat/match/comment\n        ChatAPI-&gt;&gt;Server: POST /chat/match/comment { refId, content, parentId? }\n        alt \u7559\u8a00\u6210\u529f\n            Server--&gt;&gt;ChatAPI: 201 Created\uff08\u56de\u50b3 comment \u8cc7\u6599\uff09\n            ChatAPI--&gt;&gt;LiveChatClient: Message DTO\n            LiveChatClient--&gt;&gt;LiveChatRepository: Message DTO\n            LiveChatRepository--&gt;&gt;SendChatMessageUseCase: Message Entity\n            SendChatMessageUseCase--&gt;&gt;LiveChatFeature: Output(message: Message)\n            LiveChatFeature--&gt;&gt;LiveDetailView: \u66f4\u65b0 State\n            LiveDetailView--&gt;&gt;User: \u986f\u793a\u65b0\u7559\u8a00\n        else \u7559\u8a00\u5931\u6557\n            Server--&gt;&gt;ChatAPI: 4xx/5xx Error\n            ChatAPI--&gt;&gt;LiveChatClient: Error\n            LiveChatClient--&gt;&gt;LiveChatRepository: Error\n            LiveChatRepository--&gt;&gt;SendChatMessageUseCase: Error\n            SendChatMessageUseCase--&gt;&gt;LiveChatFeature: Output(error: Error)\n            LiveChatFeature--&gt;&gt;LiveDetailView: \u66f4\u65b0 State\n            LiveDetailView--&gt;&gt;User: \u986f\u793a\u932f\u8aa4 Toast\n        end\n    else nickname \u4e0d\u5b58\u5728\n        SendChatMessageUseCase-&gt;&gt;FComSharedFlowPackage: CreatNickName API\n        FComSharedFlowPackage--&gt;&gt;User: \u986f\u793a create nickName pop-up\n        User-&gt;&gt;FComSharedFlowPackage: \u4f7f\u7528\u8005\u8f38\u5165 nickname\n        FComSharedFlowPackage-&gt;&gt;FComSharedFlowPackage: FComSharedFlow Package \u5efa\u7acb nickname\n        FComSharedFlowPackage--&gt;&gt;SendChatMessageUseCase: nickname \u5efa\u7acb\u6210\u529f\n        SendChatMessageUseCase-&gt;&gt;LiveChatRepository: sendMessage(chatroomId: String, content: String, messageType: MessageType)\n        LiveChatRepository-&gt;&gt;LiveChatClient: sendMessage(chatroomId: String, content: String, messageType: MessageType)\n        LiveChatClient-&gt;&gt;ChatAPI: POST /chat/{matchId}/message\n        ChatAPI-&gt;&gt;Server: POST /chat/{matchId}/message { content, messageType: TEXT }\n        alt \u7559\u8a00\u6210\u529f\n            Server--&gt;&gt;ChatAPI: 201 Created\n            ChatAPI--&gt;&gt;LiveChatClient: Message DTO\n            LiveChatClient--&gt;&gt;LiveChatRepository: Message DTO\n            LiveChatRepository--&gt;&gt;SendChatMessageUseCase: Message Entity\n            SendChatMessageUseCase--&gt;&gt;LiveChatFeature: Output(message: Message)\n            LiveChatFeature--&gt;&gt;LiveDetailView: \u66f4\u65b0 State\n            LiveDetailView--&gt;&gt;User: \u986f\u793a Chat \u5728\u6700\u65b0\u7684\u4f4d\u7f6e\uff0c\u4e26 highlight 3 \u79d2\n        else \u7559\u8a00\u5931\u6557\n            Server--&gt;&gt;ChatAPI: 4xx/5xx Error\n            ChatAPI--&gt;&gt;LiveChatClient: Error\n            LiveChatClient--&gt;&gt;LiveChatRepository: Error\n            LiveChatRepository--&gt;&gt;SendChatMessageUseCase: Error\n            SendChatMessageUseCase--&gt;&gt;LiveChatFeature: Output(error: Error)\n            LiveChatFeature--&gt;&gt;LiveDetailView: \u66f4\u65b0 State\n            LiveDetailView--&gt;&gt;User: \u986f\u793a\u932f\u8aa4 Toast\n        end\n    end\n</code></pre>"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/LiveChat/Module%20Sequence%20Diagrams/03_structural_navigation_block_user/","title":"\u5c01\u9396\u7528\u6236\u6d41\u7a0b","text":""},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/LiveChat/Module%20Sequence%20Diagrams/03_structural_navigation_block_user/#flow","title":"Flow \u8cc7\u8a0a","text":"\u6b04\u4f4d \u503c feature LiveChat flow_id LC-SUB-002 flow_type Sub flow_name \u7528\u6236\u9ede\u64ca avatar \u8207\u5c01\u9396\u5176\u4ed6 user \u908f\u8f2f parent_flow_id LC-FULL-001 parent_flow_name \u7528\u6236\u9032\u5165\u8207\u96e2\u958b\u804a\u5929\u5ba4\uff08\u542b WebSocket \u76f8\u4f9d\uff09 original_annotation @flow: Sub"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/LiveChat/Module%20Sequence%20Diagrams/03_structural_navigation_block_user/#_2","title":"\u6a21\u7d44\u8aaa\u660e","text":"\u6a21\u7d44\u540d\u7a31 \u8077\u8cac LiveDetailView \u76f4\u64ad\u8a73\u60c5\u9801\u9762 LiveChatFeature TCA Reducer\uff0c\u7ba1\u7406\u804a\u5929\u5ba4\u76f8\u95dc\u7684 State \u548c Action BlockUserUseCase \u8655\u7406\u5c01\u9396\u7528\u6236\u7684\u908f\u8f2f LiveChatRepository Domain \u8cc7\u6599\u4f86\u6e90\u7684\u62bd\u8c61\u4ecb\u9762\uff08\u804a\u5929\u5ba4\u76f8\u95dc\uff09"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/LiveChat/Module%20Sequence%20Diagrams/03_structural_navigation_block_user/#_3","title":"\u6d41\u7a0b\u8aaa\u660e","text":"\u6d41\u7a0b\u6b65\u9a5f \u8aaa\u660e 1. \u9ede\u64ca\u7528\u6236\u540d\u7a31 1. \u7528\u6236\u9ede\u64ca\u804a\u5929\u5ba4\u4e2d\u5176\u4ed6\u7528\u6236\u7684\u540d\u7a312. \u986f\u793a\u64cd\u4f5c\u9078\u55ae\uff08\u542b\u300c\u500b\u4eba\u4e3b\u9801\u300d\u300cBlock this user\u300d\uff09 2. \u5c01\u9396\u7528\u6236 1. \u7528\u6236\u9078\u64c7\u300cBlock this user\u300d2. \u986f\u793a\u78ba\u8a8d\u5f48\u7a973. \u78ba\u8a8d\u5f8c Feature \u547c\u53eb BlockUserUseCase4. UseCase \u5c07\u8a72\u7528\u6236\u52a0\u5165\u9ed1\u540d\u55ae DB5. WebSocket \u91cd\u9023\u5f8c\u540c\u6b65 blocked user \u6e05\u55ae 3. \u9ed1\u540d\u55ae\u6e05\u7406 1. \u7528\u6236\u95dc\u9589\u804a\u5929\u5ba4\u6642\u57f7\u884c\u9ed1\u540d\u55ae\u6aa2\u67e52. \u6bd4\u8f03\u9ed1\u540d\u55ae\u7d00\u9304\u7684\u52a0\u5165\u6642\u9593\u8207\u7576\u524d\u6642\u95933. \u82e5\u8d85\u904e 4 \u5c0f\u6642\u5247\u81ea\u52d5\u79fb\u9664\u9ed1\u540d\u55ae\u7d00\u9304"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/LiveChat/Module%20Sequence%20Diagrams/03_structural_navigation_block_user/#_4","title":"\u5834\u666f\u5e8f\u5217\u5716\uff08\u539f\u59cb\u696d\u52d9\u6d41\u7a0b\uff09","text":"<p>\u4ee5\u4e0b\u70ba\u539f\u59cb\u696d\u52d9\u6d41\u7a0b\u7684\u5e8f\u5217\u5716\uff0c\u5c55\u793a\u5f9e\u696d\u52d9\u89d2\u5ea6\u7684\u5b8c\u6574\u6d41\u7a0b\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    participant LiveChat as LiveChat Package\n    participant MainApp as Main App\n    participant Chat as Chat API Server\n\n    %% \u4f7f\u7528\u8005\u9ede\u64ca\u4f7f\u7528\u8005\u540d\u7a31\n    User-&gt;&gt;LiveChat: \u9ede\u64ca\u4f7f\u7528\u8005\u540d\u7a31\n    LiveChat--&gt;&gt;User: \u986f\u793a\u5e95\u90e8\u5f48\u7a97\uff08\u542b\u300c\u500b\u4eba\u4e3b\u9801\u300d\u300cBlock this user\u300d\uff09\n\n    alt 1\ufe0f\u20e3 \u8df3\u8f49\u500b\u4eba\u4e3b\u9801\n        User-&gt;&gt;LiveChat: \u9ede\u64ca Go to Profile\n        LiveChat-&gt;&gt;MainApp: UIViewController+routeToDestination.route(to destination: .personal)\n        note over MainApp: \u900f\u904e routeToDestination \u8df3\u8f49\u5230 User Profile Page\n        MainApp--&gt;&gt;User: \u986f\u793a\u8a72\u4f7f\u7528\u8005\u7684\u500b\u4eba\u4e3b\u9801\u756b\u9762\n\n    else 2\ufe0f\u20e3 \u5c01\u9396\u4f7f\u7528\u8005\n        User-&gt;&gt;LiveChat: \u9ede\u64ca Block this user\n        LiveChat--&gt;&gt;User: \u986f\u793a\u78ba\u8a8d\u5f48\u7a97\n        User-&gt;&gt;LiveChat: \u9ede\u64ca\u78ba\u8a8d\u5c01\u9396\n\n        %% \u52a0\u5165\u9ed1\u540d\u55ae\n        LiveChat-&gt;&gt;LiveChat: \u5c07\u8a72 User \u52a0\u5165\u9ed1\u540d\u55ae DB (userID, eventID, timestamp)\n\n        %% websocket \u884c\u70ba\n        LiveChat-&gt;&gt;Chat: websocket \u91cd\u9023\u5f8c\u540c\u6b65 blocked user \u6e05\u55ae\n    end\n\n    %% \u4f7f\u7528\u8005\u95dc\u9589 Chatroom\n    User-&gt;&gt;LiveChat: \u95dc\u9589\u804a\u5929\u5ba4\uff08\u9000\u51fa Chatroom\uff09\n    LiveChat-&gt;&gt;LiveChat: \u57f7\u884c\u9ed1\u540d\u55ae\u6aa2\u67e5\u8207\u6e05\u7406\n\n    %% \u56db\u5c0f\u6642\u6e05\u9664\u908f\u8f2f\n    LiveChat-&gt;&gt;LiveChat: \u6bd4\u8f03\u9ed1\u540d\u55ae\u7d00\u9304\u7684\u52a0\u5165\u6642\u9593\u8207\u7576\u524d\u6642\u9593\n    LiveChat-&gt;&gt;LiveChat: \u82e5\u8d85\u904e 4 \u5c0f\u6642 \u2192 \u81ea\u52d5\u79fb\u9664\u9ed1\u540d\u55ae\u7d00\u9304</code></pre> <p>Mermaid \u8a9e\u6cd5\uff08\u53ef\u8907\u88fd\uff09\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    participant LiveChat as LiveChat Package\n    participant MainApp as Main App\n    participant Chat as Chat API Server\n\n    %% \u4f7f\u7528\u8005\u9ede\u64ca\u4f7f\u7528\u8005\u540d\u7a31\n    User-&gt;&gt;LiveChat: \u9ede\u64ca\u4f7f\u7528\u8005\u540d\u7a31\n    LiveChat--&gt;&gt;User: \u986f\u793a\u5e95\u90e8\u5f48\u7a97\uff08\u542b\u300c\u500b\u4eba\u4e3b\u9801\u300d\u300cBlock this user\u300d\uff09\n\n    alt 1\ufe0f\u20e3 \u8df3\u8f49\u500b\u4eba\u4e3b\u9801\n        User-&gt;&gt;LiveChat: \u9ede\u64ca Go to Profile\n        LiveChat-&gt;&gt;MainApp: UIViewController+routeToDestination.route(to destination: .personal)\n        note over MainApp: \u900f\u904e routeToDestination \u8df3\u8f49\u5230 User Profile Page\n        MainApp--&gt;&gt;User: \u986f\u793a\u8a72\u4f7f\u7528\u8005\u7684\u500b\u4eba\u4e3b\u9801\u756b\u9762\n\n    else 2\ufe0f\u20e3 \u5c01\u9396\u4f7f\u7528\u8005\n        User-&gt;&gt;LiveChat: \u9ede\u64ca Block this user\n        LiveChat--&gt;&gt;User: \u986f\u793a\u78ba\u8a8d\u5f48\u7a97\n        User-&gt;&gt;LiveChat: \u9ede\u64ca\u78ba\u8a8d\u5c01\u9396\n\n        %% \u52a0\u5165\u9ed1\u540d\u55ae\n        LiveChat-&gt;&gt;LiveChat: \u5c07\u8a72 User \u52a0\u5165\u9ed1\u540d\u55ae DB (userID, eventID, timestamp)\n\n        %% websocket \u884c\u70ba\n        LiveChat-&gt;&gt;Chat: websocket \u91cd\u9023\u5f8c\u540c\u6b65 blocked user \u6e05\u55ae\n    end\n\n    %% \u4f7f\u7528\u8005\u95dc\u9589 Chatroom\n    User-&gt;&gt;LiveChat: \u95dc\u9589\u804a\u5929\u5ba4\uff08\u9000\u51fa Chatroom\uff09\n    LiveChat-&gt;&gt;LiveChat: \u57f7\u884c\u9ed1\u540d\u55ae\u6aa2\u67e5\u8207\u6e05\u7406\n\n    %% \u56db\u5c0f\u6642\u6e05\u9664\u908f\u8f2f\n    LiveChat-&gt;&gt;LiveChat: \u6bd4\u8f03\u9ed1\u540d\u55ae\u7d00\u9304\u7684\u52a0\u5165\u6642\u9593\u8207\u7576\u524d\u6642\u9593\n    LiveChat-&gt;&gt;LiveChat: \u82e5\u8d85\u904e 4 \u5c0f\u6642 \u2192 \u81ea\u52d5\u79fb\u9664\u9ed1\u540d\u55ae\u7d00\u9304\n</code></pre>"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/LiveChat/Module%20Sequence%20Diagrams/03_structural_navigation_block_user/#_5","title":"\u6a21\u7d44\u5e8f\u5217\u5716\uff08\u67b6\u69cb\u8a2d\u8a08\uff09","text":"<p>\u4ee5\u4e0b\u70ba\u8f49\u63db\u5f8c\u7684\u6a21\u7d44\u5e8f\u5217\u5716\uff0c\u5c55\u793a Clean Architecture \u5404\u5c64\u7d1a\u7684\u4e92\u52d5\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    box rgb(207,232,255) UI Layer\n        participant LiveDetailView\n    end\n    box rgb(255,250,205) Domain Layer\n        participant LiveChatFeature\n        participant BlockUserUseCase\n    end\n    box rgb(240,240,240) Data &amp; Infrastructure Layer\n        participant LiveChatRepository\n    end\n\n    Note over User,LiveDetailView: \u7528\u6236\u9ede\u64ca\u7528\u6236\u540d\u7a31\n    User-&gt;&gt;LiveDetailView: \u9ede\u64ca\u4f7f\u7528\u8005\u540d\u7a31\n    LiveDetailView-&gt;&gt;LiveChatFeature: tapUserName(userId: String)\n    LiveChatFeature--&gt;&gt;LiveDetailView: \u986f\u793a\u5e95\u90e8\u5f48\u7a97\n    LiveDetailView--&gt;&gt;User: \u986f\u793a\u5e95\u90e8\u5f48\u7a97\uff08\u542b\u300c\u500b\u4eba\u4e3b\u9801\u300d\u300cBlock this user\u300d\uff09\n\n    Note over User,LiveDetailView: \u7528\u6236\u9078\u64c7\u5c01\u9396\u4f7f\u7528\u8005\n    User-&gt;&gt;LiveDetailView: \u9ede\u64ca Block this user\n    LiveDetailView-&gt;&gt;LiveChatFeature: blockUser(userId: String)\n    LiveChatFeature--&gt;&gt;LiveDetailView: \u986f\u793a\u78ba\u8a8d\u5f48\u7a97\n    LiveDetailView--&gt;&gt;User: \u986f\u793a\u78ba\u8a8d\u5f48\u7a97\n    User-&gt;&gt;LiveDetailView: \u9ede\u64ca\u78ba\u8a8d\u5c01\u9396\n    LiveDetailView-&gt;&gt;LiveChatFeature: confirmBlockUser(userId: String)\n    LiveChatFeature-&gt;&gt;BlockUserUseCase: execute(input: BlockUserInput)\n    BlockUserUseCase-&gt;&gt;LiveChatRepository: addToBlacklist(userId: String, eventId: String, timestamp: Date)\n    LiveChatRepository-&gt;&gt;LiveChatRepository: \u5c07\u8a72 User \u52a0\u5165\u9ed1\u540d\u55ae DB (userID, eventID, timestamp)\n    LiveChatRepository--&gt;&gt;BlockUserUseCase: Success\n    BlockUserUseCase-&gt;&gt;BlockUserUseCase: websocket \u91cd\u9023\u5f8c\u540c\u6b65 blocked user \u6e05\u55ae\n    BlockUserUseCase--&gt;&gt;LiveChatFeature: Output()\n    LiveChatFeature--&gt;&gt;LiveDetailView: \u66f4\u65b0 State\n\n    Note over User,LiveDetailView: \u7528\u6236\u95dc\u9589\u804a\u5929\u5ba4\u6642\u7684\u9ed1\u540d\u55ae\u6e05\u7406\u908f\u8f2f\n    Note over User,LiveDetailView: \u8acb\u53c3\u8003 01_data_initialization_initialize_chatroom.md \u4e2d\u7684 LeaveChatroomUseCase \u6d41\u7a0b</code></pre> <p>Mermaid \u8a9e\u6cd5\uff08\u53ef\u8907\u88fd\uff09\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    box rgb(207,232,255) UI Layer\n        participant LiveDetailView\n    end\n    box rgb(255,250,205) Domain Layer\n        participant LiveChatFeature\n        participant BlockUserUseCase\n    end\n    box rgb(240,240,240) Data &amp; Infrastructure Layer\n        participant LiveChatRepository\n    end\n\n    Note over User,LiveDetailView: \u7528\u6236\u9ede\u64ca\u7528\u6236\u540d\u7a31\n    User-&gt;&gt;LiveDetailView: \u9ede\u64ca\u4f7f\u7528\u8005\u540d\u7a31\n    LiveDetailView-&gt;&gt;LiveChatFeature: tapUserName(userId: String)\n    LiveChatFeature--&gt;&gt;LiveDetailView: \u986f\u793a\u5e95\u90e8\u5f48\u7a97\n    LiveDetailView--&gt;&gt;User: \u986f\u793a\u5e95\u90e8\u5f48\u7a97\uff08\u542b\u300c\u500b\u4eba\u4e3b\u9801\u300d\u300cBlock this user\u300d\uff09\n\n    Note over User,LiveDetailView: \u7528\u6236\u9078\u64c7\u5c01\u9396\u4f7f\u7528\u8005\n    User-&gt;&gt;LiveDetailView: \u9ede\u64ca Block this user\n    LiveDetailView-&gt;&gt;LiveChatFeature: blockUser(userId: String)\n    LiveChatFeature--&gt;&gt;LiveDetailView: \u986f\u793a\u78ba\u8a8d\u5f48\u7a97\n    LiveDetailView--&gt;&gt;User: \u986f\u793a\u78ba\u8a8d\u5f48\u7a97\n    User-&gt;&gt;LiveDetailView: \u9ede\u64ca\u78ba\u8a8d\u5c01\u9396\n    LiveDetailView-&gt;&gt;LiveChatFeature: confirmBlockUser(userId: String)\n    LiveChatFeature-&gt;&gt;BlockUserUseCase: execute(input: BlockUserInput)\n    BlockUserUseCase-&gt;&gt;LiveChatRepository: addToBlacklist(userId: String, eventId: String, timestamp: Date)\n    LiveChatRepository-&gt;&gt;LiveChatRepository: \u5c07\u8a72 User \u52a0\u5165\u9ed1\u540d\u55ae DB (userID, eventID, timestamp)\n    LiveChatRepository--&gt;&gt;BlockUserUseCase: Success\n    BlockUserUseCase-&gt;&gt;BlockUserUseCase: websocket \u91cd\u9023\u5f8c\u540c\u6b65 blocked user \u6e05\u55ae\n    BlockUserUseCase--&gt;&gt;LiveChatFeature: Output()\n    LiveChatFeature--&gt;&gt;LiveDetailView: \u66f4\u65b0 State\n\n    Note over User,LiveDetailView: \u7528\u6236\u95dc\u9589\u804a\u5929\u5ba4\u6642\u7684\u9ed1\u540d\u55ae\u6e05\u7406\u908f\u8f2f\n    Note over User,LiveDetailView: \u8acb\u53c3\u8003 01_data_initialization_initialize_chatroom.md \u4e2d\u7684 LeaveChatroomUseCase \u6d41\u7a0b\n</code></pre>"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/LiveChat/Module%20Sequence%20Diagrams/04_structural_navigation_profile/","title":"\u8df3\u8f49\u500b\u4eba\u4e3b\u9801\u6d41\u7a0b","text":""},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/LiveChat/Module%20Sequence%20Diagrams/04_structural_navigation_profile/#flow","title":"Flow \u8cc7\u8a0a","text":"\u6b04\u4f4d \u503c feature LiveChat flow_id LC-SUB-002 (\u90e8\u5206\u6d41\u7a0b) flow_type Sub flow_name \u7528\u6236\u9ede\u64ca avatar \u8207\u5c01\u9396\u5176\u4ed6 user \u908f\u8f2f\uff08\u8df3\u8f49\u500b\u4eba\u4e3b\u9801\u90e8\u5206\uff09 parent_flow_id LC-FULL-001 parent_flow_name \u7528\u6236\u9032\u5165\u8207\u96e2\u958b\u804a\u5929\u5ba4\uff08\u542b WebSocket \u76f8\u4f9d\uff09 original_annotation @flow: Sub"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/LiveChat/Module%20Sequence%20Diagrams/04_structural_navigation_profile/#_2","title":"\u6a21\u7d44\u8aaa\u660e","text":"\u6a21\u7d44\u540d\u7a31 \u8077\u8cac LiveDetailView \u76f4\u64ad\u8a73\u60c5\u9801\u9762 LiveChatFeature TCA Reducer\uff0c\u7ba1\u7406\u804a\u5929\u5ba4\u76f8\u95dc\u7684 State \u548c Action NavigateToProfileUseCase \u8655\u7406\u8df3\u8f49\u5230\u500b\u4eba\u4e3b\u9801\u7684\u908f\u8f2f PersonalPageAdapter Protocol \u500b\u4eba\u4e3b\u9801\u8def\u7531\u8df3\u8f49\u7684 Protocol\uff08\u5b9a\u7fa9\u5728 LiveChat Package \u4e2d\uff09"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/LiveChat/Module%20Sequence%20Diagrams/04_structural_navigation_profile/#_3","title":"\u6d41\u7a0b\u8aaa\u660e","text":"\u6d41\u7a0b\u6b65\u9a5f \u8aaa\u660e 1. \u9ede\u64ca\u7528\u6236\u540d\u7a31 1. \u7528\u6236\u9ede\u64ca\u804a\u5929\u5ba4\u4e2d\u5176\u4ed6\u7528\u6236\u7684\u540d\u7a312. \u986f\u793a\u64cd\u4f5c\u9078\u55ae\uff08\u542b\u300c\u500b\u4eba\u4e3b\u9801\u300d\u300cBlock this user\u300d\uff09 2. \u8df3\u8f49\u500b\u4eba\u4e3b\u9801 1. \u7528\u6236\u9078\u64c7\u300cGo to Profile\u300d2. Feature \u547c\u53eb NavigateToProfileUseCase3. UseCase \u900f\u904e PersonalPageAdapter Protocol \u57f7\u884c\u8def\u7531\u8df3\u8f49"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/LiveChat/Module%20Sequence%20Diagrams/04_structural_navigation_profile/#_4","title":"\u5834\u666f\u5e8f\u5217\u5716\uff08\u539f\u59cb\u696d\u52d9\u6d41\u7a0b\uff09","text":"<p>\u4ee5\u4e0b\u70ba\u539f\u59cb\u696d\u52d9\u6d41\u7a0b\u7684\u5e8f\u5217\u5716\uff0c\u5c55\u793a\u5f9e\u696d\u52d9\u89d2\u5ea6\u7684\u5b8c\u6574\u6d41\u7a0b\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    participant MainApp as Main App\n\n    User-&gt;&gt;MainApp: \u9ede\u64ca\u4f7f\u7528\u8005\u540d\u7a31\u53ca Avatar\n\n    MainApp-&gt;&gt;MainApp: UIViewController+routeToDestination.route(to destination: .personal)\n    note over MainApp: \u900f\u904e routeToDestination \u8df3\u8f49\u5230 User Profile Page\n    MainApp--&gt;&gt;User: \u986f\u793a\u8a72\u4f7f\u7528\u8005\u7684\u500b\u4eba\u4e3b\u9801\u756b\u9762</code></pre> <p>Mermaid \u8a9e\u6cd5\uff08\u53ef\u8907\u88fd\uff09\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    participant MainApp as Main App\n\n    User-&gt;&gt;MainApp: \u9ede\u64ca\u4f7f\u7528\u8005\u540d\u7a31\u53ca Avatar\n\n    MainApp-&gt;&gt;MainApp: UIViewController+routeToDestination.route(to destination: .personal)\n    note over MainApp: \u900f\u904e routeToDestination \u8df3\u8f49\u5230 User Profile Page\n    MainApp--&gt;&gt;User: \u986f\u793a\u8a72\u4f7f\u7528\u8005\u7684\u500b\u4eba\u4e3b\u9801\u756b\u9762\n</code></pre>"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/LiveChat/Module%20Sequence%20Diagrams/04_structural_navigation_profile/#_5","title":"\u6a21\u7d44\u5e8f\u5217\u5716\uff08\u67b6\u69cb\u8a2d\u8a08\uff09","text":"<p>\u4ee5\u4e0b\u70ba\u8f49\u63db\u5f8c\u7684\u6a21\u7d44\u5e8f\u5217\u5716\uff0c\u5c55\u793a Clean Architecture \u5404\u5c64\u7d1a\u7684\u4e92\u52d5\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    box rgb(207,232,255) UI Layer\n        participant LiveDetailView\n    end\n    box rgb(255,250,205) Domain Layer\n        participant LiveChatFeature\n        participant NavigateToProfileUseCase\n    end\n    participant PersonalPageAdapterProtocol as \"&lt;PersonalPageAdapter&gt;\"\n\n    Note over User,LiveDetailView: \u7528\u6236\u9ede\u64ca\u7528\u6236\u540d\u7a31\n    User-&gt;&gt;LiveDetailView: \u9ede\u64ca\u4f7f\u7528\u8005\u540d\u7a31\n    LiveDetailView-&gt;&gt;LiveChatFeature: tapUserName(userId: String)\n    LiveChatFeature--&gt;&gt;LiveDetailView: \u986f\u793a\u5e95\u90e8\u5f48\u7a97\n    LiveDetailView--&gt;&gt;User: \u986f\u793a\u5e95\u90e8\u5f48\u7a97\uff08\u542b\u300c\u500b\u4eba\u4e3b\u9801\u300d\u300cBlock this user\u300d\uff09\n\n    Note over User,LiveDetailView: \u7528\u6236\u9078\u64c7\u8df3\u8f49\u500b\u4eba\u4e3b\u9801\n    User-&gt;&gt;LiveDetailView: \u9ede\u64ca Go to Profile\n    LiveDetailView-&gt;&gt;LiveChatFeature: navigateToProfile(userId: String)\n    LiveChatFeature-&gt;&gt;NavigateToProfileUseCase: execute(input: NavigateToProfileInput)\n    NavigateToProfileUseCase-&gt;&gt;PersonalPageAdapterProtocol: navigateToProfile(userId: String)\n    PersonalPageAdapterProtocol-&gt;&gt;PersonalPageAdapterProtocol: \u900f\u904e routeToDestination \u8df3\u8f49\u5230 User Profile Page\n    PersonalPageAdapterProtocol--&gt;&gt;NavigateToProfileUseCase: Success\n    NavigateToProfileUseCase--&gt;&gt;LiveChatFeature: Output()\n    LiveChatFeature--&gt;&gt;LiveDetailView: \u66f4\u65b0 State\n    LiveDetailView--&gt;&gt;User: \u986f\u793a\u8a72\u4f7f\u7528\u8005\u7684\u500b\u4eba\u4e3b\u9801\u756b\u9762</code></pre> <p>Mermaid \u8a9e\u6cd5\uff08\u53ef\u8907\u88fd\uff09\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    box rgb(207,232,255) UI Layer\n        participant LiveDetailView\n    end\n    box rgb(255,250,205) Domain Layer\n        participant LiveChatFeature\n        participant NavigateToProfileUseCase\n    end\n    participant PersonalPageAdapterProtocol as \"&lt;PersonalPageAdapter&gt;\"\n\n    Note over User,LiveDetailView: \u7528\u6236\u9ede\u64ca\u7528\u6236\u540d\u7a31\n    User-&gt;&gt;LiveDetailView: \u9ede\u64ca\u4f7f\u7528\u8005\u540d\u7a31\n    LiveDetailView-&gt;&gt;LiveChatFeature: tapUserName(userId: String)\n    LiveChatFeature--&gt;&gt;LiveDetailView: \u986f\u793a\u5e95\u90e8\u5f48\u7a97\n    LiveDetailView--&gt;&gt;User: \u986f\u793a\u5e95\u90e8\u5f48\u7a97\uff08\u542b\u300c\u500b\u4eba\u4e3b\u9801\u300d\u300cBlock this user\u300d\uff09\n\n    Note over User,LiveDetailView: \u7528\u6236\u9078\u64c7\u8df3\u8f49\u500b\u4eba\u4e3b\u9801\n    User-&gt;&gt;LiveDetailView: \u9ede\u64ca Go to Profile\n    LiveDetailView-&gt;&gt;LiveChatFeature: navigateToProfile(userId: String)\n    LiveChatFeature-&gt;&gt;NavigateToProfileUseCase: execute(input: NavigateToProfileInput)\n    NavigateToProfileUseCase-&gt;&gt;PersonalPageAdapterProtocol: navigateToProfile(userId: String)\n    PersonalPageAdapterProtocol-&gt;&gt;PersonalPageAdapterProtocol: \u900f\u904e routeToDestination \u8df3\u8f49\u5230 User Profile Page\n    PersonalPageAdapterProtocol--&gt;&gt;NavigateToProfileUseCase: Success\n    NavigateToProfileUseCase--&gt;&gt;LiveChatFeature: Output()\n    LiveChatFeature--&gt;&gt;LiveDetailView: \u66f4\u65b0 State\n    LiveDetailView--&gt;&gt;User: \u986f\u793a\u8a72\u4f7f\u7528\u8005\u7684\u500b\u4eba\u4e3b\u9801\u756b\u9762\n</code></pre>"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/","title":"PrematchComment Module Sequence Diagrams","text":"<p>\u672c\u76ee\u9304\u5305\u542b PrematchComment Feature \u7684\u6a21\u7d44\u5e8f\u5217\u5716\u3002</p>"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/#_1","title":"\u6587\u4ef6\u5217\u8868","text":"<ul> <li><code>01_data_initialization_refresh.md</code> - \u521d\u59cb\u5316\u8207\u5237\u65b0\u7559\u8a00\u5217\u8868\u6d41\u7a0b</li> <li><code>02_data_interaction_publish_comment.md</code> - \u767c\u9001\u7559\u8a00\u6d41\u7a0b</li> <li><code>03_data_interaction_toggle_like.md</code> - \u5207\u63db Like \u72c0\u614b\u6d41\u7a0b</li> <li><code>04_data_interaction_load_replies.md</code> - \u8f09\u5165\u56de\u8986\u5217\u8868\u6d41\u7a0b</li> <li><code>05_structural_navigation_profile.md</code> - \u8df3\u8f49\u500b\u4eba\u4e3b\u9801\u6d41\u7a0b</li> <li><code>06_event_status_subscription.md</code> - Event Status \u8a02\u95b1\u8207\u901a\u77e5\u6d41\u7a0b</li> </ul>"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/#flow","title":"Flow \u95dc\u4fc2","text":"Flow ID Flow Type Flow Name \u7236\u6d41\u7a0b PC-FULL-001 Full \u7528\u6236\u9032\u5165 Upcoming Race Page, Prematch Comment Page \u8207 Top - PC-SUB-001 Sub Event Status \u8a02\u95b1\u8207\u901a\u77e5\u6d41\u7a0b PC-FULL-001 PC-SUB-002 Sub \u7528\u6236\u767c Comment - Reply\uff08\u542b\u767b\u5165\u8207 nickname \u6aa2\u67e5\uff09 PC-FULL-001 PC-SUB-003 Sub \u7528\u6236\u67e5\u770b replies\uff08\u542b\u5206\u9801\u8f09\u5165\uff09 PC-FULL-001 PC-SUB-004 Sub \u7528\u6236\u9ede\u64ca Like\uff08\u542b\u767b\u5165\u6aa2\u67e5\uff09 PC-FULL-001 PC-SUB-005 Sub \u7528\u6236\u9ede\u64ca\u7528\u6236\u540d\u7a31 \u2192 \u8df3\u8f49\u500b\u4eba\u4e3b\u9801 PC-FULL-001 PC-SUB-001 Sub Event Status \u8a02\u95b1\u8207\u901a\u77e5\u6d41\u7a0b PC-FULL-001"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/01_data_initialization_refresh/","title":"\u521d\u59cb\u5316\u8207\u5237\u65b0\u7559\u8a00\u5217\u8868\u6d41\u7a0b","text":""},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/01_data_initialization_refresh/#flow","title":"Flow \u8cc7\u8a0a","text":"\u6b04\u4f4d \u503c feature PrematchComment flow_id PC-FULL-001 flow_type Full flow_name \u7528\u6236\u9032\u5165 Upcoming Race Page, Prematch Comment Page \u8207 Top parent_flow_id null parent_flow_name null original_annotation @flow: Full"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/01_data_initialization_refresh/#_2","title":"\u6a21\u7d44\u8aaa\u660e","text":"\u6a21\u7d44\u540d\u7a31 \u8077\u8cac RaceDetailView \u8cfd\u4e8b\u8a73\u60c5\u9801\u9762 PrematchCommentView \u8cfd\u524d\u7559\u8a00\u9801\u9762 PrematchCommentFeature TCA Reducer\uff0c\u7ba1\u7406\u8a55\u8ad6\u76f8\u95dc\u7684 State \u548c Action ReloadCommentListUseCase \u8f09\u5165\u8a55\u8ad6\u5217\u8868\uff08\u652f\u63f4 top/newest \u6a21\u5f0f\uff09 PrematchCommentRepository Domain \u8cc7\u6599\u4f86\u6e90\u7684\u62bd\u8c61\u4ecb\u9762\uff08\u8a55\u8ad6\u76f8\u95dc\uff09 PrematchCommentClient HTTP \u901a\u8a0a\uff08\u8a55\u8ad6\u76f8\u95dc\uff09 PrematchCommentAPI \u5f8c\u7aef endpoint \u5b9a\u7fa9\uff08\u8a55\u8ad6\u76f8\u95dc\uff09"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/01_data_initialization_refresh/#_3","title":"\u6d41\u7a0b\u8aaa\u660e","text":"\u6d41\u7a0b\u6b65\u9a5f \u8aaa\u660e 1. \u9032\u5165\u9801\u9762\u8207\u53d6\u5f97\u500b\u4eba\u8cc7\u8a0a 1. \u7528\u6236\u9032\u5165 Race Detail Page2. \u81ea\u52d5\u53d6\u5f97\u7528\u6236\u500b\u4eba\u8cc7\u8a0a3. \u81ea\u52d5\u53d6\u5f97\u8cfd\u4e8b\u7559\u8a00\u7d71\u8a08\u8cc7\u8a0a 2. \u9032\u5165 Prematch Comment Page 1. \u7528\u6236\u9032\u5165 Prematch Comment Page2. \u9810\u8a2d\u986f\u793a Top \u6a19\u7c643. \u8f09\u5165\u71b1\u9580\u7559\u8a00\u5217\u8868 3. \u5207\u63db\u6a19\u7c64 1. \u7528\u6236\u5207\u63db Top / Newest \u6a19\u7c642. \u6839\u64da\u7576\u524d\u6a19\u7c64\u8f09\u5165\u5c0d\u61c9\u7684\u7559\u8a00\u5217\u8868 4. \u624b\u52d5\u5237\u65b0 1. \u7528\u6236\u9ede\u64ca Refresh button2. \u6839\u64da\u7576\u524d\u6a19\u7c64\u91cd\u65b0\u8f09\u5165\u6700\u65b0\u7684\u7559\u8a00\u5217\u8868"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/01_data_initialization_refresh/#_4","title":"\u5834\u666f\u5e8f\u5217\u5716\uff08\u539f\u59cb\u696d\u52d9\u6d41\u7a0b\uff09","text":"<p>\u4ee5\u4e0b\u70ba\u539f\u59cb\u696d\u52d9\u6d41\u7a0b\u7684\u5e8f\u5217\u5716\uff0c\u5c55\u793a\u5f9e\u696d\u52d9\u89d2\u5ea6\u7684\u5b8c\u6574\u6d41\u7a0b\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    participant App\n    participant Server as Server\n\n    %% \u9032\u5165\u9801\u9762 &amp; \u53d6\u5f97\u500b\u4eba\u8cc7\u8a0a\n    User-&gt;&gt;App: \u9032\u5165 Race Detail Page\n    App-&gt;&gt;Server: GET /{TBD \u500b\u4eba\u8cc7\u8a0a API}\n    note over App,Server: \ud83d\udea8 \u9700\u8207 Eason \u78ba\u8a8d\u5be6\u969b API\uff0c\u6216\u78ba\u8a8d\u662f\u5426\u53ef\u8207 Han \u7684\u6d41\u7a0b\u4e32\u63a5\n    Server--&gt;&gt;App: userInfo\n    note over App: \u5c07 userInfo \u5132\u5b58\u5728 client side\uff08\u4f8b\u5982\u66ab\u5b58\u5728\u8a18\u61b6\u9ad4 / state\uff09\n\n    %% \u53d6\u5f97\u8cfd\u4e8b\u7559\u8a00\u8207\u6295\u6ce8\u8cc7\u8a0a\n    App-&gt;&gt;Server: GET /chat/match/comment/info/{refId}\n    Server--&gt;&gt;App: { commentCount, betCount }\n\n    %% \u9810\u8a2d Top tab\n    User-&gt;&gt;App: \u9032\u5165 Prematch Comment Page\n    App-&gt;&gt;Server: GET /chat/match/comment/popular\n    note over App: \ud83d\udfe2 Default tab is Top\n    Server--&gt;&gt;App: comments (sorted by like)\n\n    %% \u5207\u63db tab\n    User-&gt;&gt;App: \u5207\u63db tab\n    alt [App \u5224\u65b7\u76ee\u524d\u70ba Newest tab]\n        App-&gt;&gt;Server: GET /chat/match/comment/newest\n        Server--&gt;&gt;App: comments (sorted by time)\n    else [\u4f7f\u7528\u8005\u7dad\u6301\u5728 Top tab]\n        App-&gt;&gt;Server: GET /chat/match/comment/popular\n        Server--&gt;&gt;App: comments\n    end\n\n    %% \u4f7f\u7528\u8005\u624b\u52d5\u5237\u65b0\n    User-&gt;&gt;App: \u9ede\u64ca\u300cRefresh button\u300d\n    alt [\u76ee\u524d\u5728 Top tab]\n        App-&gt;&gt;Server: GET /chat/match/comment/popular\n        Server--&gt;&gt;App: \u6700\u65b0 comments (\u6309 Like \u6578)\n    else [\u76ee\u524d\u5728 Newest tab]\n        App-&gt;&gt;Server: GET /chat/match/comment/newest\n        Server--&gt;&gt;App: \u6700\u65b0 comments (\u6309\u6642\u9593)\n    end</code></pre> <p>Mermaid \u8a9e\u6cd5\uff08\u53ef\u8907\u88fd\uff09\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    participant App\n    participant Server as Server\n\n    %% \u9032\u5165\u9801\u9762 &amp; \u53d6\u5f97\u500b\u4eba\u8cc7\u8a0a\n    User-&gt;&gt;App: \u9032\u5165 Race Detail Page\n    App-&gt;&gt;Server: GET /{TBD \u500b\u4eba\u8cc7\u8a0a API}\n    note over App,Server: \ud83d\udea8 \u9700\u8207 Eason \u78ba\u8a8d\u5be6\u969b API\uff0c\u6216\u78ba\u8a8d\u662f\u5426\u53ef\u8207 Han \u7684\u6d41\u7a0b\u4e32\u63a5\n    Server--&gt;&gt;App: userInfo\n    note over App: \u5c07 userInfo \u5132\u5b58\u5728 client side\uff08\u4f8b\u5982\u66ab\u5b58\u5728\u8a18\u61b6\u9ad4 / state\uff09\n\n    %% \u53d6\u5f97\u8cfd\u4e8b\u7559\u8a00\u8207\u6295\u6ce8\u8cc7\u8a0a\n    App-&gt;&gt;Server: GET /chat/match/comment/info/{refId}\n    Server--&gt;&gt;App: { commentCount, betCount }\n\n    %% \u9810\u8a2d Top tab\n    User-&gt;&gt;App: \u9032\u5165 Prematch Comment Page\n    App-&gt;&gt;Server: GET /chat/match/comment/popular\n    note over App: \ud83d\udfe2 Default tab is Top\n    Server--&gt;&gt;App: comments (sorted by like)\n\n    %% \u5207\u63db tab\n    User-&gt;&gt;App: \u5207\u63db tab\n    alt [App \u5224\u65b7\u76ee\u524d\u70ba Newest tab]\n        App-&gt;&gt;Server: GET /chat/match/comment/newest\n        Server--&gt;&gt;App: comments (sorted by time)\n    else [\u4f7f\u7528\u8005\u7dad\u6301\u5728 Top tab]\n        App-&gt;&gt;Server: GET /chat/match/comment/popular\n        Server--&gt;&gt;App: comments\n    end\n\n    %% \u4f7f\u7528\u8005\u624b\u52d5\u5237\u65b0\n    User-&gt;&gt;App: \u9ede\u64ca\u300cRefresh button\u300d\n    alt [\u76ee\u524d\u5728 Top tab]\n        App-&gt;&gt;Server: GET /chat/match/comment/popular\n        Server--&gt;&gt;App: \u6700\u65b0 comments (\u6309 Like \u6578)\n    else [\u76ee\u524d\u5728 Newest tab]\n        App-&gt;&gt;Server: GET /chat/match/comment/newest\n        Server--&gt;&gt;App: \u6700\u65b0 comments (\u6309\u6642\u9593)\n    end\n</code></pre>"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/01_data_initialization_refresh/#_5","title":"\u6a21\u7d44\u5e8f\u5217\u5716\uff08\u67b6\u69cb\u8a2d\u8a08\uff09","text":"<p>\u4ee5\u4e0b\u70ba\u8f49\u63db\u5f8c\u7684\u6a21\u7d44\u5e8f\u5217\u5716\uff0c\u5c55\u793a Clean Architecture \u5404\u5c64\u7d1a\u7684\u4e92\u52d5\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    box rgb(207,232,255) UI Layer\n        participant RaceDetailView\n        participant PrematchCommentView\n    end\n    box rgb(255,250,205) Domain Layer\n        participant PrematchCommentFeature\n        participant ReloadCommentListUseCase\n    end\n    box rgb(240,240,240) Data &amp; Infrastructure Layer\n        participant PrematchCommentRepository\n        participant PrematchCommentClient\n        participant PrematchCommentAPI\n    end\n    participant Server\n\n    Note over User,RaceDetailView: \u7528\u6236\u9032\u5165 Race Detail Page\n    User-&gt;&gt;RaceDetailView: \u9032\u5165 Race Detail Page\n    RaceDetailView-&gt;&gt;PrematchCommentFeature: onAppear\n    PrematchCommentFeature-&gt;&gt;ReloadCommentListUseCase: execute(triggerType: .init)\n    ReloadCommentListUseCase-&gt;&gt;PrematchCommentRepository: getUserInfo()\n    PrematchCommentRepository-&gt;&gt;PrematchCommentClient: getUserInfo()\n    PrematchCommentClient-&gt;&gt;PrematchCommentAPI: GET /{TBD \u500b\u4eba\u8cc7\u8a0a API}\n    PrematchCommentAPI-&gt;&gt;Server: GET /{TBD \u500b\u4eba\u8cc7\u8a0a API}\n    Server--&gt;&gt;PrematchCommentAPI: userInfo\n    PrematchCommentAPI--&gt;&gt;PrematchCommentClient: userInfo DTO\n    PrematchCommentClient--&gt;&gt;PrematchCommentRepository: userInfo DTO\n    PrematchCommentRepository--&gt;&gt;ReloadCommentListUseCase: UserInfo Entity\n    ReloadCommentListUseCase-&gt;&gt;PrematchCommentRepository: getCommentMeta(refId: String)\n    PrematchCommentRepository-&gt;&gt;PrematchCommentClient: getCommentMeta(refId: String)\n    PrematchCommentClient-&gt;&gt;PrematchCommentAPI: GET /chat/match/comment/info/{refId}\n    PrematchCommentAPI-&gt;&gt;Server: GET /chat/match/comment/info/{refId}\n    Server--&gt;&gt;PrematchCommentAPI: { commentCount, betCount }\n    PrematchCommentAPI--&gt;&gt;PrematchCommentClient: CommentMeta DTO\n    PrematchCommentClient--&gt;&gt;PrematchCommentRepository: CommentMeta DTO\n    PrematchCommentRepository--&gt;&gt;ReloadCommentListUseCase: CommentMeta Entity\n    ReloadCommentListUseCase--&gt;&gt;PrematchCommentFeature: Output(comments: [], meta: CommentMeta)\n    PrematchCommentFeature--&gt;&gt;RaceDetailView: \u66f4\u65b0 State\n\n    Note over User,PrematchCommentView: \u7528\u6236\u9032\u5165 Prematch Comment Page\n    User-&gt;&gt;PrematchCommentView: \u9032\u5165 Prematch Comment Page\n    PrematchCommentView-&gt;&gt;PrematchCommentFeature: onAppear\n    PrematchCommentFeature-&gt;&gt;ReloadCommentListUseCase: execute(triggerType: .init, mode: .top)\n    ReloadCommentListUseCase-&gt;&gt;PrematchCommentRepository: getComments(refId: String, mode: .top)\n    PrematchCommentRepository-&gt;&gt;PrematchCommentClient: getComments(refId: String, mode: .top)\n    PrematchCommentClient-&gt;&gt;PrematchCommentAPI: GET /chat/match/comment/popular\n    PrematchCommentAPI-&gt;&gt;Server: GET /chat/match/comment/popular\n    Server--&gt;&gt;PrematchCommentAPI: comments (sorted by like)\n    PrematchCommentAPI--&gt;&gt;PrematchCommentClient: [Comment] DTO\n    PrematchCommentClient--&gt;&gt;PrematchCommentRepository: [Comment] DTO\n    PrematchCommentRepository--&gt;&gt;ReloadCommentListUseCase: [Comment] Entity\n    ReloadCommentListUseCase--&gt;&gt;PrematchCommentFeature: Output(comments: [Comment])\n    PrematchCommentFeature--&gt;&gt;PrematchCommentView: \u66f4\u65b0 State\n\n    Note over User,PrematchCommentView: \u7528\u6236\u5207\u63db\u6a19\u7c64\n    User-&gt;&gt;PrematchCommentView: \u5207\u63db tab\n    PrematchCommentView-&gt;&gt;PrematchCommentFeature: switchTab(mode: SortMode)\n    alt \u5207\u63db\u81f3 Newest tab\n        PrematchCommentFeature-&gt;&gt;ReloadCommentListUseCase: execute(triggerType: .switch, mode: .newest)\n        ReloadCommentListUseCase-&gt;&gt;PrematchCommentRepository: getComments(refId: String, mode: .newest)\n        PrematchCommentRepository-&gt;&gt;PrematchCommentClient: getComments(refId: String, mode: .newest)\n        PrematchCommentClient-&gt;&gt;PrematchCommentAPI: GET /chat/match/comment/newest\n        PrematchCommentAPI-&gt;&gt;Server: GET /chat/match/comment/newest\n        Server--&gt;&gt;PrematchCommentAPI: comments (sorted by time)\n        PrematchCommentAPI--&gt;&gt;PrematchCommentClient: [Comment] DTO\n        PrematchCommentClient--&gt;&gt;PrematchCommentRepository: [Comment] DTO\n        PrematchCommentRepository--&gt;&gt;ReloadCommentListUseCase: [Comment] Entity\n        ReloadCommentListUseCase--&gt;&gt;PrematchCommentFeature: Output(comments: [Comment])\n        PrematchCommentFeature--&gt;&gt;PrematchCommentView: \u66f4\u65b0 State\n    else \u7dad\u6301\u5728 Top tab\n        PrematchCommentFeature-&gt;&gt;ReloadCommentListUseCase: execute(triggerType: .switch, mode: .top)\n        ReloadCommentListUseCase-&gt;&gt;PrematchCommentRepository: getComments(refId: String, mode: .top)\n        PrematchCommentRepository-&gt;&gt;PrematchCommentClient: getComments(refId: String, mode: .top)\n        PrematchCommentClient-&gt;&gt;PrematchCommentAPI: GET /chat/match/comment/popular\n        PrematchCommentAPI-&gt;&gt;Server: GET /chat/match/comment/popular\n        Server--&gt;&gt;PrematchCommentAPI: comments\n        PrematchCommentAPI--&gt;&gt;PrematchCommentClient: [Comment] DTO\n        PrematchCommentClient--&gt;&gt;PrematchCommentRepository: [Comment] DTO\n        PrematchCommentRepository--&gt;&gt;ReloadCommentListUseCase: [Comment] Entity\n        ReloadCommentListUseCase--&gt;&gt;PrematchCommentFeature: Output(comments: [Comment])\n        PrematchCommentFeature--&gt;&gt;PrematchCommentView: \u66f4\u65b0 State\n    end\n\n    Note over User,PrematchCommentView: \u7528\u6236\u624b\u52d5\u5237\u65b0\n    User-&gt;&gt;PrematchCommentView: \u9ede\u64ca Refresh button\n    PrematchCommentView-&gt;&gt;PrematchCommentFeature: refresh()\n    alt \u76ee\u524d\u5728 Top tab\n        PrematchCommentFeature-&gt;&gt;ReloadCommentListUseCase: execute(triggerType: .refresh, mode: .top)\n        ReloadCommentListUseCase-&gt;&gt;PrematchCommentRepository: getComments(refId: String, mode: .top)\n        PrematchCommentRepository-&gt;&gt;PrematchCommentClient: getComments(refId: String, mode: .top)\n        PrematchCommentClient-&gt;&gt;PrematchCommentAPI: GET /chat/match/comment/popular\n        PrematchCommentAPI-&gt;&gt;Server: GET /chat/match/comment/popular\n        Server--&gt;&gt;PrematchCommentAPI: \u6700\u65b0 comments (\u6309 Like \u6578)\n        PrematchCommentAPI--&gt;&gt;PrematchCommentClient: [Comment] DTO\n        PrematchCommentClient--&gt;&gt;PrematchCommentRepository: [Comment] DTO\n        PrematchCommentRepository--&gt;&gt;ReloadCommentListUseCase: [Comment] Entity\n        ReloadCommentListUseCase--&gt;&gt;PrematchCommentFeature: Output(comments: [Comment])\n        PrematchCommentFeature--&gt;&gt;PrematchCommentView: \u66f4\u65b0 State\n    else \u76ee\u524d\u5728 Newest tab\n        PrematchCommentFeature-&gt;&gt;ReloadCommentListUseCase: execute(triggerType: .refresh, mode: .newest)\n        ReloadCommentListUseCase-&gt;&gt;PrematchCommentRepository: getComments(refId: String, mode: .newest)\n        PrematchCommentRepository-&gt;&gt;PrematchCommentClient: getComments(refId: String, mode: .newest)\n        PrematchCommentClient-&gt;&gt;PrematchCommentAPI: GET /chat/match/comment/newest\n        PrematchCommentAPI-&gt;&gt;Server: GET /chat/match/comment/newest\n        Server--&gt;&gt;PrematchCommentAPI: \u6700\u65b0 comments (\u6309\u6642\u9593)\n        PrematchCommentAPI--&gt;&gt;PrematchCommentClient: [Comment] DTO\n        PrematchCommentClient--&gt;&gt;PrematchCommentRepository: [Comment] DTO\n        PrematchCommentRepository--&gt;&gt;ReloadCommentListUseCase: [Comment] Entity\n        ReloadCommentListUseCase--&gt;&gt;PrematchCommentFeature: Output(comments: [Comment])\n        PrematchCommentFeature--&gt;&gt;PrematchCommentView: \u66f4\u65b0 State\n    end</code></pre> <p>Mermaid \u8a9e\u6cd5\uff08\u53ef\u8907\u88fd\uff09\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    box rgb(207,232,255) UI Layer\n        participant RaceDetailView\n        participant PrematchCommentView\n    end\n    box rgb(255,250,205) Domain Layer\n        participant PrematchCommentFeature\n        participant ReloadCommentListUseCase\n    end\n    box rgb(240,240,240) Data &amp; Infrastructure Layer\n        participant PrematchCommentRepository\n        participant PrematchCommentClient\n        participant PrematchCommentAPI\n    end\n    participant Server\n\n    Note over User,RaceDetailView: \u7528\u6236\u9032\u5165 Race Detail Page\n    User-&gt;&gt;RaceDetailView: \u9032\u5165 Race Detail Page\n    RaceDetailView-&gt;&gt;PrematchCommentFeature: onAppear\n    PrematchCommentFeature-&gt;&gt;ReloadCommentListUseCase: execute(triggerType: .init)\n    ReloadCommentListUseCase-&gt;&gt;PrematchCommentRepository: getUserInfo()\n    PrematchCommentRepository-&gt;&gt;PrematchCommentClient: getUserInfo()\n    PrematchCommentClient-&gt;&gt;PrematchCommentAPI: GET /{TBD \u500b\u4eba\u8cc7\u8a0a API}\n    PrematchCommentAPI-&gt;&gt;Server: GET /{TBD \u500b\u4eba\u8cc7\u8a0a API}\n    Server--&gt;&gt;PrematchCommentAPI: userInfo\n    PrematchCommentAPI--&gt;&gt;PrematchCommentClient: userInfo DTO\n    PrematchCommentClient--&gt;&gt;PrematchCommentRepository: userInfo DTO\n    PrematchCommentRepository--&gt;&gt;ReloadCommentListUseCase: UserInfo Entity\n    ReloadCommentListUseCase-&gt;&gt;PrematchCommentRepository: getCommentMeta(refId: String)\n    PrematchCommentRepository-&gt;&gt;PrematchCommentClient: getCommentMeta(refId: String)\n    PrematchCommentClient-&gt;&gt;PrematchCommentAPI: GET /chat/match/comment/info/{refId}\n    PrematchCommentAPI-&gt;&gt;Server: GET /chat/match/comment/info/{refId}\n    Server--&gt;&gt;PrematchCommentAPI: { commentCount, betCount }\n    PrematchCommentAPI--&gt;&gt;PrematchCommentClient: CommentMeta DTO\n    PrematchCommentClient--&gt;&gt;PrematchCommentRepository: CommentMeta DTO\n    PrematchCommentRepository--&gt;&gt;ReloadCommentListUseCase: CommentMeta Entity\n    ReloadCommentListUseCase--&gt;&gt;PrematchCommentFeature: Output(comments: [], meta: CommentMeta)\n    PrematchCommentFeature--&gt;&gt;RaceDetailView: \u66f4\u65b0 State\n\n    Note over User,PrematchCommentView: \u7528\u6236\u9032\u5165 Prematch Comment Page\n    User-&gt;&gt;PrematchCommentView: \u9032\u5165 Prematch Comment Page\n    PrematchCommentView-&gt;&gt;PrematchCommentFeature: onAppear\n    PrematchCommentFeature-&gt;&gt;ReloadCommentListUseCase: execute(triggerType: .init, mode: .top)\n    ReloadCommentListUseCase-&gt;&gt;PrematchCommentRepository: getComments(refId: String, mode: .top)\n    PrematchCommentRepository-&gt;&gt;PrematchCommentClient: getComments(refId: String, mode: .top)\n    PrematchCommentClient-&gt;&gt;PrematchCommentAPI: GET /chat/match/comment/popular\n    PrematchCommentAPI-&gt;&gt;Server: GET /chat/match/comment/popular\n    Server--&gt;&gt;PrematchCommentAPI: comments (sorted by like)\n    PrematchCommentAPI--&gt;&gt;PrematchCommentClient: [Comment] DTO\n    PrematchCommentClient--&gt;&gt;PrematchCommentRepository: [Comment] DTO\n    PrematchCommentRepository--&gt;&gt;ReloadCommentListUseCase: [Comment] Entity\n    ReloadCommentListUseCase--&gt;&gt;PrematchCommentFeature: Output(comments: [Comment])\n    PrematchCommentFeature--&gt;&gt;PrematchCommentView: \u66f4\u65b0 State\n\n    Note over User,PrematchCommentView: \u7528\u6236\u5207\u63db\u6a19\u7c64\n    User-&gt;&gt;PrematchCommentView: \u5207\u63db tab\n    PrematchCommentView-&gt;&gt;PrematchCommentFeature: switchTab(mode: SortMode)\n    alt \u5207\u63db\u81f3 Newest tab\n        PrematchCommentFeature-&gt;&gt;ReloadCommentListUseCase: execute(triggerType: .switch, mode: .newest)\n        ReloadCommentListUseCase-&gt;&gt;PrematchCommentRepository: getComments(refId: String, mode: .newest)\n        PrematchCommentRepository-&gt;&gt;PrematchCommentClient: getComments(refId: String, mode: .newest)\n        PrematchCommentClient-&gt;&gt;PrematchCommentAPI: GET /chat/match/comment/newest\n        PrematchCommentAPI-&gt;&gt;Server: GET /chat/match/comment/newest\n        Server--&gt;&gt;PrematchCommentAPI: comments (sorted by time)\n        PrematchCommentAPI--&gt;&gt;PrematchCommentClient: [Comment] DTO\n        PrematchCommentClient--&gt;&gt;PrematchCommentRepository: [Comment] DTO\n        PrematchCommentRepository--&gt;&gt;ReloadCommentListUseCase: [Comment] Entity\n        ReloadCommentListUseCase--&gt;&gt;PrematchCommentFeature: Output(comments: [Comment])\n        PrematchCommentFeature--&gt;&gt;PrematchCommentView: \u66f4\u65b0 State\n    else \u7dad\u6301\u5728 Top tab\n        PrematchCommentFeature-&gt;&gt;ReloadCommentListUseCase: execute(triggerType: .switch, mode: .top)\n        ReloadCommentListUseCase-&gt;&gt;PrematchCommentRepository: getComments(refId: String, mode: .top)\n        PrematchCommentRepository-&gt;&gt;PrematchCommentClient: getComments(refId: String, mode: .top)\n        PrematchCommentClient-&gt;&gt;PrematchCommentAPI: GET /chat/match/comment/popular\n        PrematchCommentAPI-&gt;&gt;Server: GET /chat/match/comment/popular\n        Server--&gt;&gt;PrematchCommentAPI: comments\n        PrematchCommentAPI--&gt;&gt;PrematchCommentClient: [Comment] DTO\n        PrematchCommentClient--&gt;&gt;PrematchCommentRepository: [Comment] DTO\n        PrematchCommentRepository--&gt;&gt;ReloadCommentListUseCase: [Comment] Entity\n        ReloadCommentListUseCase--&gt;&gt;PrematchCommentFeature: Output(comments: [Comment])\n        PrematchCommentFeature--&gt;&gt;PrematchCommentView: \u66f4\u65b0 State\n    end\n\n    Note over User,PrematchCommentView: \u7528\u6236\u624b\u52d5\u5237\u65b0\n    User-&gt;&gt;PrematchCommentView: \u9ede\u64ca Refresh button\n    PrematchCommentView-&gt;&gt;PrematchCommentFeature: refresh()\n    alt \u76ee\u524d\u5728 Top tab\n        PrematchCommentFeature-&gt;&gt;ReloadCommentListUseCase: execute(triggerType: .refresh, mode: .top)\n        ReloadCommentListUseCase-&gt;&gt;PrematchCommentRepository: getComments(refId: String, mode: .top)\n        PrematchCommentRepository-&gt;&gt;PrematchCommentClient: getComments(refId: String, mode: .top)\n        PrematchCommentClient-&gt;&gt;PrematchCommentAPI: GET /chat/match/comment/popular\n        PrematchCommentAPI-&gt;&gt;Server: GET /chat/match/comment/popular\n        Server--&gt;&gt;PrematchCommentAPI: \u6700\u65b0 comments (\u6309 Like \u6578)\n        PrematchCommentAPI--&gt;&gt;PrematchCommentClient: [Comment] DTO\n        PrematchCommentClient--&gt;&gt;PrematchCommentRepository: [Comment] DTO\n        PrematchCommentRepository--&gt;&gt;ReloadCommentListUseCase: [Comment] Entity\n        ReloadCommentListUseCase--&gt;&gt;PrematchCommentFeature: Output(comments: [Comment])\n        PrematchCommentFeature--&gt;&gt;PrematchCommentView: \u66f4\u65b0 State\n    else \u76ee\u524d\u5728 Newest tab\n        PrematchCommentFeature-&gt;&gt;ReloadCommentListUseCase: execute(triggerType: .refresh, mode: .newest)\n        ReloadCommentListUseCase-&gt;&gt;PrematchCommentRepository: getComments(refId: String, mode: .newest)\n        PrematchCommentRepository-&gt;&gt;PrematchCommentClient: getComments(refId: String, mode: .newest)\n        PrematchCommentClient-&gt;&gt;PrematchCommentAPI: GET /chat/match/comment/newest\n        PrematchCommentAPI-&gt;&gt;Server: GET /chat/match/comment/newest\n        Server--&gt;&gt;PrematchCommentAPI: \u6700\u65b0 comments (\u6309\u6642\u9593)\n        PrematchCommentAPI--&gt;&gt;PrematchCommentClient: [Comment] DTO\n        PrematchCommentClient--&gt;&gt;PrematchCommentRepository: [Comment] DTO\n        PrematchCommentRepository--&gt;&gt;ReloadCommentListUseCase: [Comment] Entity\n        ReloadCommentListUseCase--&gt;&gt;PrematchCommentFeature: Output(comments: [Comment])\n        PrematchCommentFeature--&gt;&gt;PrematchCommentView: \u66f4\u65b0 State\n    end\n</code></pre>"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/02_data_interaction_publish_comment/","title":"\u767c\u9001\u7559\u8a00\u6d41\u7a0b","text":""},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/02_data_interaction_publish_comment/#flow","title":"Flow \u8cc7\u8a0a","text":"\u6b04\u4f4d \u503c feature PrematchComment flow_id PC-SUB-002 flow_type Sub flow_name \u7528\u6236\u767c Comment - Reply\uff08\u542b\u767b\u5165\u8207 nickname \u6aa2\u67e5\uff09 parent_flow_id PC-FULL-001 parent_flow_name \u7528\u6236\u9032\u5165 Upcoming Race Page, Prematch Comment Page \u8207 Top original_annotation @flow: Sub"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/02_data_interaction_publish_comment/#_2","title":"\u6a21\u7d44\u8aaa\u660e","text":"\u6a21\u7d44\u540d\u7a31 \u8077\u8cac PrematchCommentView \u8cfd\u524d\u7559\u8a00\u9801\u9762 PrematchCommentFeature TCA Reducer\uff0c\u7ba1\u7406\u8a55\u8ad6\u76f8\u95dc\u7684 State \u548c Action PublishCommentUseCase \u767c\u9001\u7559\u8a00\u6216\u56de\u8986 PrematchCommentRepository Domain \u8cc7\u6599\u4f86\u6e90\u7684\u62bd\u8c61\u4ecb\u9762\uff08\u8a55\u8ad6\u76f8\u95dc\uff09 PrematchCommentClient HTTP \u901a\u8a0a\uff08\u8a55\u8ad6\u76f8\u95dc\uff09 PrematchCommentAPI \u5f8c\u7aef endpoint \u5b9a\u7fa9\uff08\u8a55\u8ad6\u76f8\u95dc\uff09 PersonalPage Package (External) \u767b\u5165\u6d41\u7a0b\uff08\u5916\u90e8 Package\uff09 FComSharedFlow Package (External) Nickname \u5efa\u7acb\u6d41\u7a0b\uff08\u5916\u90e8 Package\uff09"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/02_data_interaction_publish_comment/#_3","title":"\u6d41\u7a0b\u8aaa\u660e","text":"\u6d41\u7a0b\u6b65\u9a5f \u8aaa\u660e 1. \u9ede\u64ca\u8f38\u5165\u6846\u8207\u767b\u5165\u6aa2\u67e5 1. \u7528\u6236\u9ede\u64ca\u8f38\u5165\u6846\u6e96\u5099\u8f38\u5165\u7559\u8a00\u6216\u56de\u89862. \u6aa2\u67e5\u767b\u5165\u72c0\u614b3. \u672a\u767b\u5165\u5247\u8df3\u8f49\u5230 PersonalPage \u5b8c\u6210\u767b\u5165 2. \u8f38\u5165\u4e26\u9001\u51fa\u7559\u8a00 1. \u7528\u6236\u8f38\u5165\u4e26\u9001\u51fa Comment/Reply2. \u6aa2\u67e5 nickname \u662f\u5426\u5b58\u5728 3. \u6709 nickname \u6642\u767c\u9001 1. \u5df2\u6709 nickname\uff0c\u76f4\u63a5\u9001\u51fa\u7559\u8a002. \u986f\u793a\u65b0\u7559\u8a00 4. \u7121 nickname \u6642\u767c\u9001 1. \u8abf\u7528 FComSharedFlow Package \u5efa\u7acb nickname2. \u5efa\u7acb\u6210\u529f\u5f8c\u9001\u51fa\u7559\u8a003. \u986f\u793a\u65b0\u7559\u8a00"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/02_data_interaction_publish_comment/#_4","title":"\u5834\u666f\u5e8f\u5217\u5716\uff08\u539f\u59cb\u696d\u52d9\u6d41\u7a0b\uff09","text":"<p>\u4ee5\u4e0b\u70ba\u539f\u59cb\u696d\u52d9\u6d41\u7a0b\u7684\u5e8f\u5217\u5716\uff0c\u5c55\u793a\u5f9e\u696d\u52d9\u89d2\u5ea6\u7684\u5b8c\u6574\u6d41\u7a0b\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    box rgb(255, 248, 220) App\n        participant PrematchComment as PrematchComment Package\n        participant MainApp as Main App\n        participant PersonalPage as PersonalPage Package(external)\n        participant FComSharedFlow as FComSharedFlow Package(external)\n    end\n    participant Chat as Server\n\n    %% \u4f7f\u7528\u8005\u9ede\u64ca\u8f38\u5165\u6846 \u2192 \u5148\u505a\u767b\u5165\u6aa2\u67e5\n    User-&gt;&gt;PrematchComment: \u9ede\u64ca\u8f38\u5165\u6846\uff08\u6e96\u5099\u8f38\u5165 Comment/Reply\uff09\n    note over PrematchComment: \u9ede\u64ca\u8f38\u5165\u6846\u6642\u89f8\u767c\u767b\u5165\u6aa2\u67e5\n    PrematchComment-&gt;&gt;MainApp: APICoordinator.shared.accountManager \u6aa2\u67e5\u767b\u5165\u72c0\u614b\n\n    alt [\u4f7f\u7528\u8005\u5df2\u767b\u5165]\n        MainApp--&gt;&gt;PrematchComment: \u5df2\u767b\u5165\n        note over PrematchComment: \u5df2\u767b\u5165\uff0c\u5141\u8a31\u8f38\u5165\u7559\u8a00\n    else [\u4f7f\u7528\u8005\u672a\u767b\u5165]\n        MainApp--&gt;&gt;PrematchComment: \u672a\u767b\u5165\n        PrematchComment-&gt;&gt;MainApp: route(to: .personalPage)\n        MainApp-&gt;&gt;PersonalPage: \u8df3\u8f49\u5230 PersonalPage\n        PersonalPage-&gt;&gt;PersonalPage: \u5b8c\u6210 user \u767b\u5165\u6d41\u7a0b\n        PersonalPage--&gt;&gt;PrematchComment: \u767b\u5165\u6210\u529f\uff08\u56de\u8df3\u81f3\u539f\u9801\u9762\uff09\n        note over PrematchComment: \u767b\u5165\u5b8c\u6210\u5f8c\u53ef\u518d\u6b21\u9ede\u64ca\u8f38\u5165\u6846\u7e7c\u7e8c\u6d41\u7a0b\n    end\n\n    %% \u4f7f\u7528\u8005\u8f38\u5165\u4e26\u9001\u51fa Comment/Reply\n    User-&gt;&gt;PrematchComment: \u8f38\u5165\u4e26\u9001\u51fa Comment/Reply\n\n    %% nickname \u6aa2\u67e5\uff08\u900f\u904e Main App \u7684 accountManager\uff09\n    note over PrematchComment: \u9001\u51fa\u524d\u6aa2\u67e5 client \u7aef nickname \u662f\u5426\u5b58\u5728\n    PrematchComment-&gt;&gt;MainApp: APICoordinator.shared.accountManager.currentMetadata?.nickname \u6aa2\u67e5\n\n    alt [nickname \u5b58\u5728]\n        MainApp--&gt;&gt;PrematchComment: nickname \u5b58\u5728\n        note over PrematchComment: \u5df2\u6709 nickname\uff0c\u76f4\u63a5\u9001\u51fa\u7559\u8a00\n        PrematchComment-&gt;&gt;Chat: POST /chat/match/comment { refId, content, parentId? }\n\n        alt [\u7559\u8a00\u6210\u529f]\n            Chat--&gt;&gt;PrematchComment: 201 Created\uff08\u56de\u50b3 comment \u8cc7\u6599\uff09\n            PrematchComment--&gt;&gt;User: \u986f\u793a\u65b0\u7559\u8a00\n        else [\u7559\u8a00\u5931\u6557]\n            Chat--&gt;&gt;PrematchComment: 4xx/5xx Error\uff08\u7559\u8a00\u5931\u6557\uff09\n            PrematchComment--&gt;&gt;User: \u986f\u793a\u932f\u8aa4 Toast\uff08\u7559\u8a00\u5931\u6557\uff09\n        end\n\n    else [nickname \u4e0d\u5b58\u5728]\n        MainApp--&gt;&gt;PrematchComment: nickname \u4e0d\u5b58\u5728\n        note over PrematchComment: \u9700\u4f7f\u7528 FComSharedFlow Package \u5efa\u7acb nickname\n\n        %% App \u7aef nickname \u5efa\u7acb\u6d41\u7a0b\uff08\u900f\u904e FComSharedFlow Package\uff09\n        PrematchComment-&gt;&gt;FComSharedFlow: \u8abf\u7528 CreatNickName API\n        FComSharedFlow--&gt;&gt;User: \u986f\u793a create nickName pop-up\n        User-&gt;&gt;FComSharedFlow: \u4f7f\u7528\u8005\u8f38\u5165 nickname\n        FComSharedFlow-&gt;&gt;FComSharedFlow: FComSharedFlow Package \u5efa\u7acb nickname\n        FComSharedFlow--&gt;&gt;PrematchComment: nickname \u5efa\u7acb\u6210\u529f\n\n        PrematchComment-&gt;&gt;Chat: POST /chat/match/comment { refId, content, parentId? }\n\n        alt [\u7559\u8a00\u6210\u529f]\n            Chat--&gt;&gt;PrematchComment: 201 Created\uff08\u56de\u50b3 comment \u8cc7\u6599\uff09\n            PrematchComment--&gt;&gt;User: \u986f\u793a\u65b0\u7559\u8a00\n        else [\u7559\u8a00\u5931\u6557]\n            Chat--&gt;&gt;PrematchComment: 4xx/5xx Error\uff08\u7559\u8a00\u5931\u6557\uff09\n            PrematchComment--&gt;&gt;User: \u986f\u793a\u932f\u8aa4 Toast\uff08\u7559\u8a00\u5931\u6557\uff09\n        end\n    end</code></pre> <p>Mermaid \u8a9e\u6cd5\uff08\u53ef\u8907\u88fd\uff09\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    box rgb(255, 248, 220) App\n        participant PrematchComment as PrematchComment Package\n        participant MainApp as Main App\n        participant PersonalPage as PersonalPage Package(external)\n        participant FComSharedFlow as FComSharedFlow Package(external)\n    end\n    participant Chat as Server\n\n    %% \u4f7f\u7528\u8005\u9ede\u64ca\u8f38\u5165\u6846 \u2192 \u5148\u505a\u767b\u5165\u6aa2\u67e5\n    User-&gt;&gt;PrematchComment: \u9ede\u64ca\u8f38\u5165\u6846\uff08\u6e96\u5099\u8f38\u5165 Comment/Reply\uff09\n    note over PrematchComment: \u9ede\u64ca\u8f38\u5165\u6846\u6642\u89f8\u767c\u767b\u5165\u6aa2\u67e5\n    PrematchComment-&gt;&gt;MainApp: APICoordinator.shared.accountManager \u6aa2\u67e5\u767b\u5165\u72c0\u614b\n\n    alt [\u4f7f\u7528\u8005\u5df2\u767b\u5165]\n        MainApp--&gt;&gt;PrematchComment: \u5df2\u767b\u5165\n        note over PrematchComment: \u5df2\u767b\u5165\uff0c\u5141\u8a31\u8f38\u5165\u7559\u8a00\n    else [\u4f7f\u7528\u8005\u672a\u767b\u5165]\n        MainApp--&gt;&gt;PrematchComment: \u672a\u767b\u5165\n        PrematchComment-&gt;&gt;MainApp: route(to: .personalPage)\n        MainApp-&gt;&gt;PersonalPage: \u8df3\u8f49\u5230 PersonalPage\n        PersonalPage-&gt;&gt;PersonalPage: \u5b8c\u6210 user \u767b\u5165\u6d41\u7a0b\n        PersonalPage--&gt;&gt;PrematchComment: \u767b\u5165\u6210\u529f\uff08\u56de\u8df3\u81f3\u539f\u9801\u9762\uff09\n        note over PrematchComment: \u767b\u5165\u5b8c\u6210\u5f8c\u53ef\u518d\u6b21\u9ede\u64ca\u8f38\u5165\u6846\u7e7c\u7e8c\u6d41\u7a0b\n    end\n\n    %% \u4f7f\u7528\u8005\u8f38\u5165\u4e26\u9001\u51fa Comment/Reply\n    User-&gt;&gt;PrematchComment: \u8f38\u5165\u4e26\u9001\u51fa Comment/Reply\n\n    %% nickname \u6aa2\u67e5\uff08\u900f\u904e Main App \u7684 accountManager\uff09\n    note over PrematchComment: \u9001\u51fa\u524d\u6aa2\u67e5 client \u7aef nickname \u662f\u5426\u5b58\u5728\n    PrematchComment-&gt;&gt;MainApp: APICoordinator.shared.accountManager.currentMetadata?.nickname \u6aa2\u67e5\n\n    alt [nickname \u5b58\u5728]\n        MainApp--&gt;&gt;PrematchComment: nickname \u5b58\u5728\n        note over PrematchComment: \u5df2\u6709 nickname\uff0c\u76f4\u63a5\u9001\u51fa\u7559\u8a00\n        PrematchComment-&gt;&gt;Chat: POST /chat/match/comment { refId, content, parentId? }\n\n        alt [\u7559\u8a00\u6210\u529f]\n            Chat--&gt;&gt;PrematchComment: 201 Created\uff08\u56de\u50b3 comment \u8cc7\u6599\uff09\n            PrematchComment--&gt;&gt;User: \u986f\u793a\u65b0\u7559\u8a00\n        else [\u7559\u8a00\u5931\u6557]\n            Chat--&gt;&gt;PrematchComment: 4xx/5xx Error\uff08\u7559\u8a00\u5931\u6557\uff09\n            PrematchComment--&gt;&gt;User: \u986f\u793a\u932f\u8aa4 Toast\uff08\u7559\u8a00\u5931\u6557\uff09\n        end\n\n    else [nickname \u4e0d\u5b58\u5728]\n        MainApp--&gt;&gt;PrematchComment: nickname \u4e0d\u5b58\u5728\n        note over PrematchComment: \u9700\u4f7f\u7528 FComSharedFlow Package \u5efa\u7acb nickname\n\n        %% App \u7aef nickname \u5efa\u7acb\u6d41\u7a0b\uff08\u900f\u904e FComSharedFlow Package\uff09\n        PrematchComment-&gt;&gt;FComSharedFlow: \u8abf\u7528 CreatNickName API\n        FComSharedFlow--&gt;&gt;User: \u986f\u793a create nickName pop-up\n        User-&gt;&gt;FComSharedFlow: \u4f7f\u7528\u8005\u8f38\u5165 nickname\n        FComSharedFlow-&gt;&gt;FComSharedFlow: FComSharedFlow Package \u5efa\u7acb nickname\n        FComSharedFlow--&gt;&gt;PrematchComment: nickname \u5efa\u7acb\u6210\u529f\n\n        PrematchComment-&gt;&gt;Chat: POST /chat/match/comment { refId, content, parentId? }\n\n        alt [\u7559\u8a00\u6210\u529f]\n            Chat--&gt;&gt;PrematchComment: 201 Created\uff08\u56de\u50b3 comment \u8cc7\u6599\uff09\n            PrematchComment--&gt;&gt;User: \u986f\u793a\u65b0\u7559\u8a00\n        else [\u7559\u8a00\u5931\u6557]\n            Chat--&gt;&gt;PrematchComment: 4xx/5xx Error\uff08\u7559\u8a00\u5931\u6557\uff09\n            PrematchComment--&gt;&gt;User: \u986f\u793a\u932f\u8aa4 Toast\uff08\u7559\u8a00\u5931\u6557\uff09\n        end\n    end\n</code></pre>"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/02_data_interaction_publish_comment/#_5","title":"\u6a21\u7d44\u5e8f\u5217\u5716\uff08\u67b6\u69cb\u8a2d\u8a08\uff09","text":"<p>\u4ee5\u4e0b\u70ba\u8f49\u63db\u5f8c\u7684\u6a21\u7d44\u5e8f\u5217\u5716\uff0c\u5c55\u793a Clean Architecture \u5404\u5c64\u7d1a\u7684\u4e92\u52d5\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    box rgb(207,232,255) UI Layer\n        participant PrematchCommentView\n    end\n    box rgb(255,250,205) Domain Layer\n        participant PrematchCommentFeature\n        participant PublishCommentUseCase\n    end\n    box rgb(240,240,240) Data &amp; Infrastructure Layer\n        participant PrematchCommentRepository\n        participant PrematchCommentClient\n        participant PrematchCommentAPI\n    end\n    participant PersonalPagePackage as PersonalPage Package (External)\n    participant FComSharedFlowPackage as FComSharedFlow Package (External)\n    participant Server\n\n    Note over User,PrematchCommentView: \u7528\u6236\u9ede\u64ca\u8f38\u5165\u6846\n    User-&gt;&gt;PrematchCommentView: \u9ede\u64ca\u8f38\u5165\u6846\n    PrematchCommentView-&gt;&gt;PrematchCommentFeature: tapInputField\n    PrematchCommentFeature-&gt;&gt;PrematchCommentFeature: \u6aa2\u67e5\u767b\u5165\u72c0\u614b\uff08\u900f\u904e Main App\uff09\n    alt \u4f7f\u7528\u8005\u5df2\u767b\u5165\n        PrematchCommentFeature-&gt;&gt;PrematchCommentFeature: \u5df2\u767b\u5165\uff0c\u5141\u8a31\u8f38\u5165\u7559\u8a00\n    else \u4f7f\u7528\u8005\u672a\u767b\u5165\n        PrematchCommentFeature-&gt;&gt;PersonalPagePackage: route(to: .personalPage)\n        PersonalPagePackage-&gt;&gt;PersonalPagePackage: \u5b8c\u6210 user \u767b\u5165\u6d41\u7a0b\n        PersonalPagePackage--&gt;&gt;PrematchCommentFeature: \u767b\u5165\u6210\u529f\uff08\u56de\u8df3\u81f3\u539f\u9801\u9762\uff09\n    end\n\n    Note over User,PrematchCommentView: \u7528\u6236\u8f38\u5165\u4e26\u9001\u51fa Comment/Reply\n    User-&gt;&gt;PrematchCommentView: \u8f38\u5165\u4e26\u9001\u51fa Comment/Reply\n    PrematchCommentView-&gt;&gt;PrematchCommentFeature: publishComment(content: String, parentId: String?)\n    PrematchCommentFeature-&gt;&gt;PublishCommentUseCase: execute(input: PublishCommentInput)\n    PublishCommentUseCase-&gt;&gt;PublishCommentUseCase: \u6aa2\u67e5 nickname\uff08\u900f\u904e Main App\uff09\n    alt nickname \u5b58\u5728\n        PublishCommentUseCase-&gt;&gt;PrematchCommentRepository: publishComment(refId: String, content: String, parentId: String?)\n        PrematchCommentRepository-&gt;&gt;PrematchCommentClient: publishComment(refId: String, content: String, parentId: String?)\n        PrematchCommentClient-&gt;&gt;PrematchCommentAPI: POST /chat/match/comment\n        PrematchCommentAPI-&gt;&gt;Server: POST /chat/match/comment { refId, content, parentId? }\n        alt \u7559\u8a00\u6210\u529f\n            Server--&gt;&gt;PrematchCommentAPI: 201 Created\uff08\u56de\u50b3 comment \u8cc7\u6599\uff09\n            PrematchCommentAPI--&gt;&gt;PrematchCommentClient: Comment DTO\n            PrematchCommentClient--&gt;&gt;PrematchCommentRepository: Comment DTO\n            PrematchCommentRepository--&gt;&gt;PublishCommentUseCase: Comment Entity\n            PublishCommentUseCase--&gt;&gt;PrematchCommentFeature: Output(comment: Comment)\n            PrematchCommentFeature--&gt;&gt;PrematchCommentView: \u66f4\u65b0 State\n            PrematchCommentView--&gt;&gt;User: \u986f\u793a\u65b0\u7559\u8a00\n        else \u7559\u8a00\u5931\u6557\n            Server--&gt;&gt;PrematchCommentAPI: 4xx/5xx Error\n            PrematchCommentAPI--&gt;&gt;PrematchCommentClient: Error\n            PrematchCommentClient--&gt;&gt;PrematchCommentRepository: Error\n            PrematchCommentRepository--&gt;&gt;PublishCommentUseCase: Error\n            PublishCommentUseCase--&gt;&gt;PrematchCommentFeature: Output(error: Error)\n            PrematchCommentFeature--&gt;&gt;PrematchCommentView: \u66f4\u65b0 State\n            PrematchCommentView--&gt;&gt;User: \u986f\u793a\u932f\u8aa4 Toast\n        end\n    else nickname \u4e0d\u5b58\u5728\n        PublishCommentUseCase-&gt;&gt;FComSharedFlowPackage: CreatNickName API\n        FComSharedFlowPackage--&gt;&gt;User: \u986f\u793a create nickName pop-up\n        User-&gt;&gt;FComSharedFlowPackage: \u4f7f\u7528\u8005\u8f38\u5165 nickname\n        FComSharedFlowPackage-&gt;&gt;FComSharedFlowPackage: FComSharedFlow Package \u5efa\u7acb nickname\n        FComSharedFlowPackage--&gt;&gt;PublishCommentUseCase: nickname \u5efa\u7acb\u6210\u529f\n        PublishCommentUseCase-&gt;&gt;PrematchCommentRepository: publishComment(refId: String, content: String, parentId: String?)\n        PrematchCommentRepository-&gt;&gt;PrematchCommentClient: publishComment(refId: String, content: String, parentId: String?)\n        PrematchCommentClient-&gt;&gt;PrematchCommentAPI: POST /chat/match/comment\n        PrematchCommentAPI-&gt;&gt;Server: POST /chat/match/comment { refId, content, parentId? }\n        alt \u7559\u8a00\u6210\u529f\n            Server--&gt;&gt;PrematchCommentAPI: 201 Created\uff08\u56de\u50b3 comment \u8cc7\u6599\uff09\n            PrematchCommentAPI--&gt;&gt;PrematchCommentClient: Comment DTO\n            PrematchCommentClient--&gt;&gt;PrematchCommentRepository: Comment DTO\n            PrematchCommentRepository--&gt;&gt;PublishCommentUseCase: Comment Entity\n            PublishCommentUseCase--&gt;&gt;PrematchCommentFeature: Output(comment: Comment)\n            PrematchCommentFeature--&gt;&gt;PrematchCommentView: \u66f4\u65b0 State\n            PrematchCommentView--&gt;&gt;User: \u986f\u793a\u65b0\u7559\u8a00\n        else \u7559\u8a00\u5931\u6557\n            Server--&gt;&gt;PrematchCommentAPI: 4xx/5xx Error\n            PrematchCommentAPI--&gt;&gt;PrematchCommentClient: Error\n            PrematchCommentClient--&gt;&gt;PrematchCommentRepository: Error\n            PrematchCommentRepository--&gt;&gt;PublishCommentUseCase: Error\n            PublishCommentUseCase--&gt;&gt;PrematchCommentFeature: Output(error: Error)\n            PrematchCommentFeature--&gt;&gt;PrematchCommentView: \u66f4\u65b0 State\n            PrematchCommentView--&gt;&gt;User: \u986f\u793a\u932f\u8aa4 Toast\n        end\n    end</code></pre> <p>Mermaid \u8a9e\u6cd5\uff08\u53ef\u8907\u88fd\uff09\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    box rgb(207,232,255) UI Layer\n        participant PrematchCommentView\n    end\n    box rgb(255,250,205) Domain Layer\n        participant PrematchCommentFeature\n        participant PublishCommentUseCase\n    end\n    box rgb(240,240,240) Data &amp; Infrastructure Layer\n        participant PrematchCommentRepository\n        participant PrematchCommentClient\n        participant PrematchCommentAPI\n    end\n    participant PersonalPagePackage as PersonalPage Package (External)\n    participant FComSharedFlowPackage as FComSharedFlow Package (External)\n    participant Server\n\n    Note over User,PrematchCommentView: \u7528\u6236\u9ede\u64ca\u8f38\u5165\u6846\n    User-&gt;&gt;PrematchCommentView: \u9ede\u64ca\u8f38\u5165\u6846\n    PrematchCommentView-&gt;&gt;PrematchCommentFeature: tapInputField\n    PrematchCommentFeature-&gt;&gt;PrematchCommentFeature: \u6aa2\u67e5\u767b\u5165\u72c0\u614b\uff08\u900f\u904e Main App\uff09\n    alt \u4f7f\u7528\u8005\u5df2\u767b\u5165\n        PrematchCommentFeature-&gt;&gt;PrematchCommentFeature: \u5df2\u767b\u5165\uff0c\u5141\u8a31\u8f38\u5165\u7559\u8a00\n    else \u4f7f\u7528\u8005\u672a\u767b\u5165\n        PrematchCommentFeature-&gt;&gt;PersonalPagePackage: route(to: .personalPage)\n        PersonalPagePackage-&gt;&gt;PersonalPagePackage: \u5b8c\u6210 user \u767b\u5165\u6d41\u7a0b\n        PersonalPagePackage--&gt;&gt;PrematchCommentFeature: \u767b\u5165\u6210\u529f\uff08\u56de\u8df3\u81f3\u539f\u9801\u9762\uff09\n    end\n\n    Note over User,PrematchCommentView: \u7528\u6236\u8f38\u5165\u4e26\u9001\u51fa Comment/Reply\n    User-&gt;&gt;PrematchCommentView: \u8f38\u5165\u4e26\u9001\u51fa Comment/Reply\n    PrematchCommentView-&gt;&gt;PrematchCommentFeature: publishComment(content: String, parentId: String?)\n    PrematchCommentFeature-&gt;&gt;PublishCommentUseCase: execute(input: PublishCommentInput)\n    PublishCommentUseCase-&gt;&gt;PublishCommentUseCase: \u6aa2\u67e5 nickname\uff08\u900f\u904e Main App\uff09\n    alt nickname \u5b58\u5728\n        PublishCommentUseCase-&gt;&gt;PrematchCommentRepository: publishComment(refId: String, content: String, parentId: String?)\n        PrematchCommentRepository-&gt;&gt;PrematchCommentClient: publishComment(refId: String, content: String, parentId: String?)\n        PrematchCommentClient-&gt;&gt;PrematchCommentAPI: POST /chat/match/comment\n        PrematchCommentAPI-&gt;&gt;Server: POST /chat/match/comment { refId, content, parentId? }\n        alt \u7559\u8a00\u6210\u529f\n            Server--&gt;&gt;PrematchCommentAPI: 201 Created\uff08\u56de\u50b3 comment \u8cc7\u6599\uff09\n            PrematchCommentAPI--&gt;&gt;PrematchCommentClient: Comment DTO\n            PrematchCommentClient--&gt;&gt;PrematchCommentRepository: Comment DTO\n            PrematchCommentRepository--&gt;&gt;PublishCommentUseCase: Comment Entity\n            PublishCommentUseCase--&gt;&gt;PrematchCommentFeature: Output(comment: Comment)\n            PrematchCommentFeature--&gt;&gt;PrematchCommentView: \u66f4\u65b0 State\n            PrematchCommentView--&gt;&gt;User: \u986f\u793a\u65b0\u7559\u8a00\n        else \u7559\u8a00\u5931\u6557\n            Server--&gt;&gt;PrematchCommentAPI: 4xx/5xx Error\n            PrematchCommentAPI--&gt;&gt;PrematchCommentClient: Error\n            PrematchCommentClient--&gt;&gt;PrematchCommentRepository: Error\n            PrematchCommentRepository--&gt;&gt;PublishCommentUseCase: Error\n            PublishCommentUseCase--&gt;&gt;PrematchCommentFeature: Output(error: Error)\n            PrematchCommentFeature--&gt;&gt;PrematchCommentView: \u66f4\u65b0 State\n            PrematchCommentView--&gt;&gt;User: \u986f\u793a\u932f\u8aa4 Toast\n        end\n    else nickname \u4e0d\u5b58\u5728\n        PublishCommentUseCase-&gt;&gt;FComSharedFlowPackage: CreatNickName API\n        FComSharedFlowPackage--&gt;&gt;User: \u986f\u793a create nickName pop-up\n        User-&gt;&gt;FComSharedFlowPackage: \u4f7f\u7528\u8005\u8f38\u5165 nickname\n        FComSharedFlowPackage-&gt;&gt;FComSharedFlowPackage: FComSharedFlow Package \u5efa\u7acb nickname\n        FComSharedFlowPackage--&gt;&gt;PublishCommentUseCase: nickname \u5efa\u7acb\u6210\u529f\n        PublishCommentUseCase-&gt;&gt;PrematchCommentRepository: publishComment(refId: String, content: String, parentId: String?)\n        PrematchCommentRepository-&gt;&gt;PrematchCommentClient: publishComment(refId: String, content: String, parentId: String?)\n        PrematchCommentClient-&gt;&gt;PrematchCommentAPI: POST /chat/match/comment\n        PrematchCommentAPI-&gt;&gt;Server: POST /chat/match/comment { refId, content, parentId? }\n        alt \u7559\u8a00\u6210\u529f\n            Server--&gt;&gt;PrematchCommentAPI: 201 Created\uff08\u56de\u50b3 comment \u8cc7\u6599\uff09\n            PrematchCommentAPI--&gt;&gt;PrematchCommentClient: Comment DTO\n            PrematchCommentClient--&gt;&gt;PrematchCommentRepository: Comment DTO\n            PrematchCommentRepository--&gt;&gt;PublishCommentUseCase: Comment Entity\n            PublishCommentUseCase--&gt;&gt;PrematchCommentFeature: Output(comment: Comment)\n            PrematchCommentFeature--&gt;&gt;PrematchCommentView: \u66f4\u65b0 State\n            PrematchCommentView--&gt;&gt;User: \u986f\u793a\u65b0\u7559\u8a00\n        else \u7559\u8a00\u5931\u6557\n            Server--&gt;&gt;PrematchCommentAPI: 4xx/5xx Error\n            PrematchCommentAPI--&gt;&gt;PrematchCommentClient: Error\n            PrematchCommentClient--&gt;&gt;PrematchCommentRepository: Error\n            PrematchCommentRepository--&gt;&gt;PublishCommentUseCase: Error\n            PublishCommentUseCase--&gt;&gt;PrematchCommentFeature: Output(error: Error)\n            PrematchCommentFeature--&gt;&gt;PrematchCommentView: \u66f4\u65b0 State\n            PrematchCommentView--&gt;&gt;User: \u986f\u793a\u932f\u8aa4 Toast\n        end\n    end\n</code></pre>"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/03_data_interaction_toggle_like/","title":"\u5207\u63db Like \u72c0\u614b\u6d41\u7a0b","text":""},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/03_data_interaction_toggle_like/#flow","title":"Flow \u8cc7\u8a0a","text":"\u6b04\u4f4d \u503c feature PrematchComment flow_id PC-SUB-004 flow_type Sub flow_name \u7528\u6236\u9ede\u64ca Like\uff08\u542b\u767b\u5165\u6aa2\u67e5\uff09 parent_flow_id PC-FULL-001 parent_flow_name \u7528\u6236\u9032\u5165 Upcoming Race Page, Prematch Comment Page \u8207 Top original_annotation @flow: Sub"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/03_data_interaction_toggle_like/#_1","title":"\u6a21\u7d44\u8aaa\u660e","text":"\u6a21\u7d44\u540d\u7a31 \u8077\u8cac PrematchCommentView \u8cfd\u524d\u7559\u8a00\u9801\u9762 PrematchCommentFeature TCA Reducer\uff0c\u7ba1\u7406\u8a55\u8ad6\u76f8\u95dc\u7684 State \u548c Action ToggleLikeUseCase \u5207\u63db Like \u72c0\u614b\uff08Optimistic UI\uff09 PrematchCommentRepository Domain \u8cc7\u6599\u4f86\u6e90\u7684\u62bd\u8c61\u4ecb\u9762\uff08\u8a55\u8ad6\u76f8\u95dc\uff09 PrematchCommentClient HTTP \u901a\u8a0a\uff08\u8a55\u8ad6\u76f8\u95dc\uff09 PrematchCommentAPI \u5f8c\u7aef endpoint \u5b9a\u7fa9\uff08\u8a55\u8ad6\u76f8\u95dc\uff09 PersonalPage Package (External) \u767b\u5165\u6d41\u7a0b\uff08\u5916\u90e8 Package\uff09"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/03_data_interaction_toggle_like/#_2","title":"\u6d41\u7a0b\u8aaa\u660e","text":"\u6d41\u7a0b\u6b65\u9a5f \u8aaa\u660e 1. \u9ede\u64ca Like \u6309\u9215 1. \u7528\u6236\u9ede\u64ca\u7559\u8a00\u7684 Like \u6309\u92152. \u6aa2\u67e5\u767b\u5165\u72c0\u614b3. \u672a\u767b\u5165\u5247\u8df3\u8f49\u5230 PersonalPage \u5b8c\u6210\u767b\u5165 2. Optimistic UI \u66f4\u65b0 1. \u901a\u904e\u767b\u5165\u6aa2\u67e5\u5f8c\u7acb\u5373\u66f4\u65b0\u756b\u9762\u4e0a\u7684 Like \u65782. \u986f\u793a\u5df2\u9ede\u8b9a\u72c0\u614b + Like +1 3. \u540c\u6b65 Like \u72c0\u614b 1. \u5411\u4f3a\u670d\u5668\u767c\u9001 Like \u8acb\u6c422. \u540c\u6b65 Like \u72c0\u614b\u5230\u4f3a\u670d\u5668"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/03_data_interaction_toggle_like/#_3","title":"\u5834\u666f\u5e8f\u5217\u5716\uff08\u539f\u59cb\u696d\u52d9\u6d41\u7a0b\uff09","text":"<p>\u4ee5\u4e0b\u70ba\u539f\u59cb\u696d\u52d9\u6d41\u7a0b\u7684\u5e8f\u5217\u5716\uff0c\u5c55\u793a\u5f9e\u696d\u52d9\u89d2\u5ea6\u7684\u5b8c\u6574\u6d41\u7a0b\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    box rgb(255, 248, 220) App\n        participant PrematchComment as PrematchComment Package\n        participant MainApp as Main App\n        participant PersonalPage as PersonalPage Package(external)\n        participant FComSharedFlow as FComSharedFlow Package(external)\n    end\n    participant Chat as Chat API Server\n\n    User-&gt;&gt;PrematchComment: \u9ede\u64ca Like \u6309\u9215\n    note over PrematchComment: \u9ede\u64ca Like \u6309\u9215\u6642\u89f8\u767c\u767b\u5165\u6aa2\u67e5\n    PrematchComment-&gt;&gt;MainApp: APICoordinator.shared.accountManager \u6aa2\u67e5\u767b\u5165\u72c0\u614b\n\n    alt [\u4f7f\u7528\u8005\u5df2\u767b\u5165]\n        MainApp--&gt;&gt;PrematchComment: \u5df2\u767b\u5165\n        note over PrematchComment: \u901a\u904e\u767b\u5165\u6aa2\u67e5\n    else [\u4f7f\u7528\u8005\u672a\u767b\u5165]\n        MainApp--&gt;&gt;PrematchComment: \u672a\u767b\u5165\n        PrematchComment-&gt;&gt;MainApp: route(to: .personalPage)\n        MainApp-&gt;&gt;PersonalPage: \u8df3\u8f49\u5230 PersonalPage\n        PersonalPage-&gt;&gt;PersonalPage: \u5b8c\u6210 user \u767b\u5165\u6d41\u7a0b\n        PersonalPage--&gt;&gt;PrematchComment: \u767b\u5165\u6210\u529f\uff08\u56de\u8df3\u81f3\u539f\u9801\u9762\uff09\n    end\n\n    note over PrematchComment: \u7acb\u5373\u66f4\u65b0\u756b\u9762\u4e0a\u7684 Like \u6578\uff08Optimistic UI\uff09\n    PrematchComment--&gt;&gt;User: \u986f\u793a\u5df2\u9ede\u8b9a\u72c0\u614b + Like +1\n    PrematchComment-&gt;&gt;Chat: POST /chat/match/comment/like { commentId }\n    Chat--&gt;&gt;PrematchComment: 200 OK\uff08\u66f4\u65b0\u6210\u529f\uff09</code></pre> <p>Mermaid \u8a9e\u6cd5\uff08\u53ef\u8907\u88fd\uff09\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    box rgb(255, 248, 220) App\n        participant PrematchComment as PrematchComment Package\n        participant MainApp as Main App\n        participant PersonalPage as PersonalPage Package(external)\n        participant FComSharedFlow as FComSharedFlow Package(external)\n    end\n    participant Chat as Chat API Server\n\n    User-&gt;&gt;PrematchComment: \u9ede\u64ca Like \u6309\u9215\n    note over PrematchComment: \u9ede\u64ca Like \u6309\u9215\u6642\u89f8\u767c\u767b\u5165\u6aa2\u67e5\n    PrematchComment-&gt;&gt;MainApp: APICoordinator.shared.accountManager \u6aa2\u67e5\u767b\u5165\u72c0\u614b\n\n    alt [\u4f7f\u7528\u8005\u5df2\u767b\u5165]\n        MainApp--&gt;&gt;PrematchComment: \u5df2\u767b\u5165\n        note over PrematchComment: \u901a\u904e\u767b\u5165\u6aa2\u67e5\n    else [\u4f7f\u7528\u8005\u672a\u767b\u5165]\n        MainApp--&gt;&gt;PrematchComment: \u672a\u767b\u5165\n        PrematchComment-&gt;&gt;MainApp: route(to: .personalPage)\n        MainApp-&gt;&gt;PersonalPage: \u8df3\u8f49\u5230 PersonalPage\n        PersonalPage-&gt;&gt;PersonalPage: \u5b8c\u6210 user \u767b\u5165\u6d41\u7a0b\n        PersonalPage--&gt;&gt;PrematchComment: \u767b\u5165\u6210\u529f\uff08\u56de\u8df3\u81f3\u539f\u9801\u9762\uff09\n    end\n\n    note over PrematchComment: \u7acb\u5373\u66f4\u65b0\u756b\u9762\u4e0a\u7684 Like \u6578\uff08Optimistic UI\uff09\n    PrematchComment--&gt;&gt;User: \u986f\u793a\u5df2\u9ede\u8b9a\u72c0\u614b + Like +1\n    PrematchComment-&gt;&gt;Chat: POST /chat/match/comment/like { commentId }\n    Chat--&gt;&gt;PrematchComment: 200 OK\uff08\u66f4\u65b0\u6210\u529f\uff09\n</code></pre>"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/03_data_interaction_toggle_like/#_4","title":"\u6a21\u7d44\u5e8f\u5217\u5716\uff08\u67b6\u69cb\u8a2d\u8a08\uff09","text":"<p>\u4ee5\u4e0b\u70ba\u8f49\u63db\u5f8c\u7684\u6a21\u7d44\u5e8f\u5217\u5716\uff0c\u5c55\u793a Clean Architecture \u5404\u5c64\u7d1a\u7684\u4e92\u52d5\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    box rgb(207,232,255) UI Layer\n        participant PrematchCommentView\n    end\n    box rgb(255,250,205) Domain Layer\n        participant PrematchCommentFeature\n        participant ToggleLikeUseCase\n    end\n    box rgb(240,240,240) Data &amp; Infrastructure Layer\n        participant PrematchCommentRepository\n        participant PrematchCommentClient\n        participant PrematchCommentAPI\n    end\n    participant PersonalPagePackage as PersonalPage Package (External)\n    participant Server\n\n    Note over User,PrematchCommentView: \u7528\u6236\u9ede\u64ca Like \u6309\u9215\n    User-&gt;&gt;PrematchCommentView: \u9ede\u64ca Like \u6309\u9215\n    PrematchCommentView-&gt;&gt;PrematchCommentFeature: toggleLike(commentId: String)\n    PrematchCommentFeature-&gt;&gt;PrematchCommentFeature: \u6aa2\u67e5\u767b\u5165\u72c0\u614b\uff08\u900f\u904e Main App\uff09\n    alt \u4f7f\u7528\u8005\u5df2\u767b\u5165\n        PrematchCommentFeature-&gt;&gt;PrematchCommentFeature: \u901a\u904e\u767b\u5165\u6aa2\u67e5\n        PrematchCommentFeature-&gt;&gt;PrematchCommentFeature: \u7acb\u5373\u66f4\u65b0\u756b\u9762\u4e0a\u7684 Like \u6578\uff08Optimistic UI\uff09\n        PrematchCommentFeature--&gt;&gt;PrematchCommentView: \u66f4\u65b0 State\n        PrematchCommentView--&gt;&gt;User: \u986f\u793a\u5df2\u9ede\u8b9a\u72c0\u614b + Like +1\n        PrematchCommentFeature-&gt;&gt;ToggleLikeUseCase: execute(input: ToggleLikeInput)\n        ToggleLikeUseCase-&gt;&gt;PrematchCommentRepository: toggleLike(commentId: String)\n        PrematchCommentRepository-&gt;&gt;PrematchCommentClient: toggleLike(commentId: String)\n        PrematchCommentClient-&gt;&gt;PrematchCommentAPI: POST /chat/match/comment/like\n        PrematchCommentAPI-&gt;&gt;Server: POST /chat/match/comment/like { commentId }\n        Server--&gt;&gt;PrematchCommentAPI: 200 OK\uff08\u66f4\u65b0\u6210\u529f\uff09\n        PrematchCommentAPI--&gt;&gt;PrematchCommentClient: Comment DTO\n        PrematchCommentClient--&gt;&gt;PrematchCommentRepository: Comment DTO\n        PrematchCommentRepository--&gt;&gt;ToggleLikeUseCase: Comment Entity\n        ToggleLikeUseCase--&gt;&gt;PrematchCommentFeature: Output(comment: Comment)\n        PrematchCommentFeature--&gt;&gt;PrematchCommentView: \u66f4\u65b0 State\n    else \u4f7f\u7528\u8005\u672a\u767b\u5165\n        PrematchCommentFeature-&gt;&gt;PersonalPagePackage: route(to: .personalPage)\n        PersonalPagePackage-&gt;&gt;PersonalPagePackage: \u5b8c\u6210 user \u767b\u5165\u6d41\u7a0b\n        PersonalPagePackage--&gt;&gt;PrematchCommentFeature: \u767b\u5165\u6210\u529f\uff08\u56de\u8df3\u81f3\u539f\u9801\u9762\uff09\n    end</code></pre> <p>Mermaid \u8a9e\u6cd5\uff08\u53ef\u8907\u88fd\uff09\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    box rgb(207,232,255) UI Layer\n        participant PrematchCommentView\n    end\n    box rgb(255,250,205) Domain Layer\n        participant PrematchCommentFeature\n        participant ToggleLikeUseCase\n    end\n    box rgb(240,240,240) Data &amp; Infrastructure Layer\n        participant PrematchCommentRepository\n        participant PrematchCommentClient\n        participant PrematchCommentAPI\n    end\n    participant PersonalPagePackage as PersonalPage Package (External)\n    participant Server\n\n    Note over User,PrematchCommentView: \u7528\u6236\u9ede\u64ca Like \u6309\u9215\n    User-&gt;&gt;PrematchCommentView: \u9ede\u64ca Like \u6309\u9215\n    PrematchCommentView-&gt;&gt;PrematchCommentFeature: toggleLike(commentId: String)\n    PrematchCommentFeature-&gt;&gt;PrematchCommentFeature: \u6aa2\u67e5\u767b\u5165\u72c0\u614b\uff08\u900f\u904e Main App\uff09\n    alt \u4f7f\u7528\u8005\u5df2\u767b\u5165\n        PrematchCommentFeature-&gt;&gt;PrematchCommentFeature: \u901a\u904e\u767b\u5165\u6aa2\u67e5\n        PrematchCommentFeature-&gt;&gt;PrematchCommentFeature: \u7acb\u5373\u66f4\u65b0\u756b\u9762\u4e0a\u7684 Like \u6578\uff08Optimistic UI\uff09\n        PrematchCommentFeature--&gt;&gt;PrematchCommentView: \u66f4\u65b0 State\n        PrematchCommentView--&gt;&gt;User: \u986f\u793a\u5df2\u9ede\u8b9a\u72c0\u614b + Like +1\n        PrematchCommentFeature-&gt;&gt;ToggleLikeUseCase: execute(input: ToggleLikeInput)\n        ToggleLikeUseCase-&gt;&gt;PrematchCommentRepository: toggleLike(commentId: String)\n        PrematchCommentRepository-&gt;&gt;PrematchCommentClient: toggleLike(commentId: String)\n        PrematchCommentClient-&gt;&gt;PrematchCommentAPI: POST /chat/match/comment/like\n        PrematchCommentAPI-&gt;&gt;Server: POST /chat/match/comment/like { commentId }\n        Server--&gt;&gt;PrematchCommentAPI: 200 OK\uff08\u66f4\u65b0\u6210\u529f\uff09\n        PrematchCommentAPI--&gt;&gt;PrematchCommentClient: Comment DTO\n        PrematchCommentClient--&gt;&gt;PrematchCommentRepository: Comment DTO\n        PrematchCommentRepository--&gt;&gt;ToggleLikeUseCase: Comment Entity\n        ToggleLikeUseCase--&gt;&gt;PrematchCommentFeature: Output(comment: Comment)\n        PrematchCommentFeature--&gt;&gt;PrematchCommentView: \u66f4\u65b0 State\n    else \u4f7f\u7528\u8005\u672a\u767b\u5165\n        PrematchCommentFeature-&gt;&gt;PersonalPagePackage: route(to: .personalPage)\n        PersonalPagePackage-&gt;&gt;PersonalPagePackage: \u5b8c\u6210 user \u767b\u5165\u6d41\u7a0b\n        PersonalPagePackage--&gt;&gt;PrematchCommentFeature: \u767b\u5165\u6210\u529f\uff08\u56de\u8df3\u81f3\u539f\u9801\u9762\uff09\n    end\n</code></pre>"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/04_data_interaction_load_replies/","title":"\u8f09\u5165\u56de\u8986\u5217\u8868\u6d41\u7a0b","text":""},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/04_data_interaction_load_replies/#flow","title":"Flow \u8cc7\u8a0a","text":"\u6b04\u4f4d \u503c feature PrematchComment flow_id PC-SUB-003 flow_type Sub flow_name \u7528\u6236\u67e5\u770b replies\uff08\u542b\u5206\u9801\u8f09\u5165\uff09 parent_flow_id PC-FULL-001 parent_flow_name \u7528\u6236\u9032\u5165 Upcoming Race Page, Prematch Comment Page \u8207 Top original_annotation @flow: Sub"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/04_data_interaction_load_replies/#_2","title":"\u6a21\u7d44\u8aaa\u660e","text":"\u6a21\u7d44\u540d\u7a31 \u8077\u8cac PrematchCommentView \u8cfd\u524d\u7559\u8a00\u9801\u9762 PrematchCommentFeature TCA Reducer\uff0c\u7ba1\u7406\u8a55\u8ad6\u76f8\u95dc\u7684 State \u548c Action LoadRepliesUseCase \u8f09\u5165\u56de\u8986\u5217\u8868\uff08\u5206\u9801\uff09 PrematchCommentRepository Domain \u8cc7\u6599\u4f86\u6e90\u7684\u62bd\u8c61\u4ecb\u9762\uff08\u8a55\u8ad6\u76f8\u95dc\uff09 PrematchCommentClient HTTP \u901a\u8a0a\uff08\u8a55\u8ad6\u76f8\u95dc\uff09 PrematchCommentAPI \u5f8c\u7aef endpoint \u5b9a\u7fa9\uff08\u8a55\u8ad6\u76f8\u95dc\uff09"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/04_data_interaction_load_replies/#_3","title":"\u6d41\u7a0b\u8aaa\u660e","text":"\u6d41\u7a0b\u6b65\u9a5f \u8aaa\u660e 1. \u9ede\u64ca\u56de\u8986\u6578\u91cf 1. \u7528\u6236\u9ede\u64ca\u7559\u8a00\u7684\u56de\u8986\u6578\u91cf\uff08\u4f8b\u5982\u300c12 replies\u300d\uff092. \u958b\u59cb\u8f09\u5165\u56de\u8986\u5217\u8868 2. \u5206\u9801\u8f09\u5165\u56de\u8986 1. \u6bcf\u6b21\u6700\u591a\u8f09\u5165 5 \u7b46\u56de\u89862. \u4f7f\u7528 cursor \u6a5f\u5236\u8ffd\u8e64\u5206\u9801\u4f4d\u7f6e 3. \u986f\u793a\u300cShow more replies\u300d\u6309\u9215 1. \u6709\u8d85\u904e 5 \u7b46\u56de\u8986\u6642\u986f\u793a\u6309\u92152. \u4e0d\u8db3 5 \u7b46\u56de\u8986\u6642\u96b1\u85cf\u6309\u92153. \u7528\u6236\u53ef\u6301\u7e8c\u9ede\u64ca\u8f09\u5165\u66f4\u591a\u56de\u8986"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/04_data_interaction_load_replies/#_4","title":"\u5834\u666f\u5e8f\u5217\u5716\uff08\u539f\u59cb\u696d\u52d9\u6d41\u7a0b\uff09","text":"<p>\u4ee5\u4e0b\u70ba\u539f\u59cb\u696d\u52d9\u6d41\u7a0b\u7684\u5e8f\u5217\u5716\uff0c\u5c55\u793a\u5f9e\u696d\u52d9\u89d2\u5ea6\u7684\u5b8c\u6574\u6d41\u7a0b\uff1a</p> <pre><code>sequenceDiagram\n  autonumber\n  actor User\n  participant App\n  participant Server as Server\n\n  User-&gt;&gt;App: \u9ede\u64ca 12 replies\n  loop \u6bcf\u6b21\u6700\u591a 5 \u7b46\n    App-&gt;&gt;Server: GET /chat/match/comment/replies\n    Server--&gt;&gt;App: replies[&lt;=5], nextCursor?\n    alt \u6709\u8d85\u904e5\u7b46\n      App--&gt;&gt;User: \u986f\u793a Show more replies\n      User-&gt;&gt;App: \u9ede\u64ca Show more replies\n    else \u4e0d\u8db35\u7b46\n      App--&gt;&gt;User: \u96b1\u85cf Show more replies\n    end\n  end</code></pre> <p>Mermaid \u8a9e\u6cd5\uff08\u53ef\u8907\u88fd\uff09\uff1a</p> <pre><code>sequenceDiagram\n  autonumber\n  actor User\n  participant App\n  participant Server as Server\n\n  User-&gt;&gt;App: \u9ede\u64ca 12 replies\n  loop \u6bcf\u6b21\u6700\u591a 5 \u7b46\n    App-&gt;&gt;Server: GET /chat/match/comment/replies\n    Server--&gt;&gt;App: replies[&lt;=5], nextCursor?\n    alt \u6709\u8d85\u904e5\u7b46\n      App--&gt;&gt;User: \u986f\u793a Show more replies\n      User-&gt;&gt;App: \u9ede\u64ca Show more replies\n    else \u4e0d\u8db35\u7b46\n      App--&gt;&gt;User: \u96b1\u85cf Show more replies\n    end\n  end\n</code></pre>"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/04_data_interaction_load_replies/#_5","title":"\u6a21\u7d44\u5e8f\u5217\u5716\uff08\u67b6\u69cb\u8a2d\u8a08\uff09","text":"<p>\u4ee5\u4e0b\u70ba\u8f49\u63db\u5f8c\u7684\u6a21\u7d44\u5e8f\u5217\u5716\uff0c\u5c55\u793a Clean Architecture \u5404\u5c64\u7d1a\u7684\u4e92\u52d5\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    box rgb(207,232,255) UI Layer\n        participant PrematchCommentView\n    end\n    box rgb(255,250,205) Domain Layer\n        participant PrematchCommentFeature\n        participant LoadRepliesUseCase\n    end\n    box rgb(240,240,240) Data &amp; Infrastructure Layer\n        participant PrematchCommentRepository\n        participant PrematchCommentClient\n        participant PrematchCommentAPI\n    end\n    participant Server\n\n    Note over User,PrematchCommentView: \u7528\u6236\u9ede\u64ca\u56de\u8986\u6578\u91cf\n    User-&gt;&gt;PrematchCommentView: \u9ede\u64ca 12 replies\n    PrematchCommentView-&gt;&gt;PrematchCommentFeature: loadReplies(commentId: String)\n    PrematchCommentFeature-&gt;&gt;LoadRepliesUseCase: execute(input: LoadRepliesInput)\n\n    loop \u6bcf\u6b21\u6700\u591a 5 \u7b46\n        LoadRepliesUseCase-&gt;&gt;PrematchCommentRepository: getReplies(commentId: String, cursor: Cursor?)\n        PrematchCommentRepository-&gt;&gt;PrematchCommentClient: getReplies(commentId: String, cursor: Cursor?)\n        PrematchCommentClient-&gt;&gt;PrematchCommentAPI: GET /chat/match/comment/replies\n        PrematchCommentAPI-&gt;&gt;Server: GET /chat/match/comment/replies\n        Server--&gt;&gt;PrematchCommentAPI: replies[&lt;=5], nextCursor?\n        PrematchCommentAPI--&gt;&gt;PrematchCommentClient: [Comment] DTO, PagingInfo DTO\n        PrematchCommentClient--&gt;&gt;PrematchCommentRepository: [Comment] DTO, PagingInfo DTO\n        PrematchCommentRepository--&gt;&gt;LoadRepliesUseCase: [Comment] Entity, PagingInfo Entity\n        LoadRepliesUseCase--&gt;&gt;PrematchCommentFeature: Output(replies: [Comment], pagingInfo: PagingInfo)\n        PrematchCommentFeature--&gt;&gt;PrematchCommentView: \u66f4\u65b0 State\n        alt \u6709\u8d85\u904e 5 \u7b46\n            PrematchCommentView--&gt;&gt;User: \u986f\u793a Show more replies\n            User-&gt;&gt;PrematchCommentView: \u9ede\u64ca Show more replies\n            PrematchCommentView-&gt;&gt;PrematchCommentFeature: loadMoreReplies(commentId: String, cursor: Cursor)\n            PrematchCommentFeature-&gt;&gt;LoadRepliesUseCase: execute(input: LoadRepliesInput)\n        else \u4e0d\u8db3 5 \u7b46\n            PrematchCommentView--&gt;&gt;User: \u96b1\u85cf Show more replies\n        end\n    end</code></pre> <p>Mermaid \u8a9e\u6cd5\uff08\u53ef\u8907\u88fd\uff09\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    box rgb(207,232,255) UI Layer\n        participant PrematchCommentView\n    end\n    box rgb(255,250,205) Domain Layer\n        participant PrematchCommentFeature\n        participant LoadRepliesUseCase\n    end\n    box rgb(240,240,240) Data &amp; Infrastructure Layer\n        participant PrematchCommentRepository\n        participant PrematchCommentClient\n        participant PrematchCommentAPI\n    end\n    participant Server\n\n    Note over User,PrematchCommentView: \u7528\u6236\u9ede\u64ca\u56de\u8986\u6578\u91cf\n    User-&gt;&gt;PrematchCommentView: \u9ede\u64ca 12 replies\n    PrematchCommentView-&gt;&gt;PrematchCommentFeature: loadReplies(commentId: String)\n    PrematchCommentFeature-&gt;&gt;LoadRepliesUseCase: execute(input: LoadRepliesInput)\n\n    loop \u6bcf\u6b21\u6700\u591a 5 \u7b46\n        LoadRepliesUseCase-&gt;&gt;PrematchCommentRepository: getReplies(commentId: String, cursor: Cursor?)\n        PrematchCommentRepository-&gt;&gt;PrematchCommentClient: getReplies(commentId: String, cursor: Cursor?)\n        PrematchCommentClient-&gt;&gt;PrematchCommentAPI: GET /chat/match/comment/replies\n        PrematchCommentAPI-&gt;&gt;Server: GET /chat/match/comment/replies\n        Server--&gt;&gt;PrematchCommentAPI: replies[&lt;=5], nextCursor?\n        PrematchCommentAPI--&gt;&gt;PrematchCommentClient: [Comment] DTO, PagingInfo DTO\n        PrematchCommentClient--&gt;&gt;PrematchCommentRepository: [Comment] DTO, PagingInfo DTO\n        PrematchCommentRepository--&gt;&gt;LoadRepliesUseCase: [Comment] Entity, PagingInfo Entity\n        LoadRepliesUseCase--&gt;&gt;PrematchCommentFeature: Output(replies: [Comment], pagingInfo: PagingInfo)\n        PrematchCommentFeature--&gt;&gt;PrematchCommentView: \u66f4\u65b0 State\n        alt \u6709\u8d85\u904e 5 \u7b46\n            PrematchCommentView--&gt;&gt;User: \u986f\u793a Show more replies\n            User-&gt;&gt;PrematchCommentView: \u9ede\u64ca Show more replies\n            PrematchCommentView-&gt;&gt;PrematchCommentFeature: loadMoreReplies(commentId: String, cursor: Cursor)\n            PrematchCommentFeature-&gt;&gt;LoadRepliesUseCase: execute(input: LoadRepliesInput)\n        else \u4e0d\u8db3 5 \u7b46\n            PrematchCommentView--&gt;&gt;User: \u96b1\u85cf Show more replies\n        end\n    end\n</code></pre>"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/05_structural_navigation_profile/","title":"\u8df3\u8f49\u500b\u4eba\u4e3b\u9801\u6d41\u7a0b","text":""},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/05_structural_navigation_profile/#flow","title":"Flow \u8cc7\u8a0a","text":"\u6b04\u4f4d \u503c feature PrematchComment flow_id PC-SUB-005 flow_type Sub flow_name \u7528\u6236\u9ede\u64ca\u7528\u6236\u540d\u7a31 \u2192 \u8df3\u8f49\u500b\u4eba\u4e3b\u9801 parent_flow_id PC-FULL-001 parent_flow_name \u7528\u6236\u9032\u5165 Upcoming Race Page, Prematch Comment Page \u8207 Top original_annotation @flow: Sub"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/05_structural_navigation_profile/#_2","title":"\u6a21\u7d44\u8aaa\u660e","text":"\u6a21\u7d44\u540d\u7a31 \u8077\u8cac PrematchCommentView \u8cfd\u524d\u7559\u8a00\u9801\u9762 PrematchCommentFeature TCA Reducer\uff0c\u7ba1\u7406\u8a55\u8ad6\u76f8\u95dc\u7684 State \u548c Action NavigateToProfileUseCase \u8655\u7406\u8df3\u8f49\u5230\u500b\u4eba\u4e3b\u9801\u7684\u908f\u8f2f PersonalPageAdapter Protocol \u500b\u4eba\u4e3b\u9801\u8def\u7531\u8df3\u8f49\u7684 Protocol\uff08\u5b9a\u7fa9\u5728 PrematchComment Package \u4e2d\uff09"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/05_structural_navigation_profile/#_3","title":"\u6d41\u7a0b\u8aaa\u660e","text":"\u6d41\u7a0b\u6b65\u9a5f \u8aaa\u660e 1. \u9ede\u64ca\u7528\u6236\u540d\u7a31\u6216\u982d\u50cf 1. \u7528\u6236\u9ede\u64ca\u7559\u8a00\u4e2d\u7684\u7528\u6236\u540d\u7a31\u6216\u982d\u50cf2. \u89f8\u767c\u8df3\u8f49\u500b\u4eba\u4e3b\u9801\u6d41\u7a0b 2. \u8df3\u8f49\u500b\u4eba\u4e3b\u9801 1. Feature \u547c\u53eb NavigateToProfileUseCase2. UseCase \u900f\u904e PersonalPageAdapter Protocol \u57f7\u884c\u8def\u7531\u8df3\u8f493. \u986f\u793a\u8a72\u4f7f\u7528\u8005\u7684\u500b\u4eba\u4e3b\u9801\u756b\u9762"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/05_structural_navigation_profile/#_4","title":"\u5834\u666f\u5e8f\u5217\u5716\uff08\u539f\u59cb\u696d\u52d9\u6d41\u7a0b\uff09","text":"<p>\u4ee5\u4e0b\u70ba\u539f\u59cb\u696d\u52d9\u6d41\u7a0b\u7684\u5e8f\u5217\u5716\uff0c\u5c55\u793a\u5f9e\u696d\u52d9\u89d2\u5ea6\u7684\u5b8c\u6574\u6d41\u7a0b\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    participant MainApp as Main App\n\n    User-&gt;&gt;MainApp: \u9ede\u64ca\u4f7f\u7528\u8005\u540d\u7a31\u53ca Avatar\n\n    MainApp-&gt;&gt;MainApp: UIViewController+routeToDestination.route(to destination: .personal)\n    note over MainApp: \u900f\u904e routeToDestination \u8df3\u8f49\u5230 User Profile Page\n    MainApp--&gt;&gt;User: \u986f\u793a\u8a72\u4f7f\u7528\u8005\u7684\u500b\u4eba\u4e3b\u9801\u756b\u9762</code></pre> <p>Mermaid \u8a9e\u6cd5\uff08\u53ef\u8907\u88fd\uff09\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    participant MainApp as Main App\n\n    User-&gt;&gt;MainApp: \u9ede\u64ca\u4f7f\u7528\u8005\u540d\u7a31\u53ca Avatar\n\n    MainApp-&gt;&gt;MainApp: UIViewController+routeToDestination.route(to destination: .personal)\n    note over MainApp: \u900f\u904e routeToDestination \u8df3\u8f49\u5230 User Profile Page\n    MainApp--&gt;&gt;User: \u986f\u793a\u8a72\u4f7f\u7528\u8005\u7684\u500b\u4eba\u4e3b\u9801\u756b\u9762\n</code></pre>"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/05_structural_navigation_profile/#_5","title":"\u6a21\u7d44\u5e8f\u5217\u5716\uff08\u67b6\u69cb\u8a2d\u8a08\uff09","text":"<p>\u4ee5\u4e0b\u70ba\u8f49\u63db\u5f8c\u7684\u6a21\u7d44\u5e8f\u5217\u5716\uff0c\u5c55\u793a Clean Architecture \u5404\u5c64\u7d1a\u7684\u4e92\u52d5\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    box rgb(207,232,255) UI Layer\n        participant PrematchCommentView\n    end\n    box rgb(255,250,205) Domain Layer\n        participant PrematchCommentFeature\n        participant NavigateToProfileUseCase\n    end\n    participant PersonalPageAdapterProtocol as \"&lt;PersonalPageAdapter&gt;\"\n\n    Note over User,PrematchCommentView: \u7528\u6236\u9ede\u64ca\u7528\u6236\u540d\u7a31\u6216\u982d\u50cf\n    User-&gt;&gt;PrematchCommentView: \u9ede\u64ca\u4f7f\u7528\u8005\u540d\u7a31\u53ca Avatar\n    PrematchCommentView-&gt;&gt;PrematchCommentFeature: navigateToProfile(userId: String)\n    PrematchCommentFeature-&gt;&gt;NavigateToProfileUseCase: execute(input: NavigateToProfileInput)\n    NavigateToProfileUseCase-&gt;&gt;PersonalPageAdapterProtocol: navigateToProfile(userId: String)\n    PersonalPageAdapterProtocol-&gt;&gt;PersonalPageAdapterProtocol: \u900f\u904e routeToDestination \u8df3\u8f49\u5230 User Profile Page\n    PersonalPageAdapterProtocol--&gt;&gt;NavigateToProfileUseCase: Success\n    NavigateToProfileUseCase--&gt;&gt;PrematchCommentFeature: Output()\n    PrematchCommentFeature--&gt;&gt;PrematchCommentView: \u66f4\u65b0 State\n    PrematchCommentView--&gt;&gt;User: \u986f\u793a\u8a72\u4f7f\u7528\u8005\u7684\u500b\u4eba\u4e3b\u9801\u756b\u9762</code></pre> <p>Mermaid \u8a9e\u6cd5\uff08\u53ef\u8907\u88fd\uff09\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    box rgb(207,232,255) UI Layer\n        participant PrematchCommentView\n    end\n    box rgb(255,250,205) Domain Layer\n        participant PrematchCommentFeature\n        participant NavigateToProfileUseCase\n    end\n    participant PersonalPageAdapterProtocol as \"&lt;PersonalPageAdapter&gt;\"\n\n    Note over User,PrematchCommentView: \u7528\u6236\u9ede\u64ca\u7528\u6236\u540d\u7a31\u6216\u982d\u50cf\n    User-&gt;&gt;PrematchCommentView: \u9ede\u64ca\u4f7f\u7528\u8005\u540d\u7a31\u53ca Avatar\n    PrematchCommentView-&gt;&gt;PrematchCommentFeature: navigateToProfile(userId: String)\n    PrematchCommentFeature-&gt;&gt;NavigateToProfileUseCase: execute(input: NavigateToProfileInput)\n    NavigateToProfileUseCase-&gt;&gt;PersonalPageAdapterProtocol: navigateToProfile(userId: String)\n    PersonalPageAdapterProtocol-&gt;&gt;PersonalPageAdapterProtocol: \u900f\u904e routeToDestination \u8df3\u8f49\u5230 User Profile Page\n    PersonalPageAdapterProtocol--&gt;&gt;NavigateToProfileUseCase: Success\n    NavigateToProfileUseCase--&gt;&gt;PrematchCommentFeature: Output()\n    PrematchCommentFeature--&gt;&gt;PrematchCommentView: \u66f4\u65b0 State\n    PrematchCommentView--&gt;&gt;User: \u986f\u793a\u8a72\u4f7f\u7528\u8005\u7684\u500b\u4eba\u4e3b\u9801\u756b\u9762\n</code></pre>"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/06_event_status_subscription/","title":"Event Status \u8a02\u95b1\u8207\u901a\u77e5\u6d41\u7a0b","text":""},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/06_event_status_subscription/#flow","title":"Flow \u8cc7\u8a0a","text":"\u6b04\u4f4d \u503c feature PrematchComment flow_id PC-SUB-001 flow_type Sub flow_name Event Status \u8a02\u95b1\u8207\u901a\u77e5\u6d41\u7a0b parent_flow_id PC-FULL-001 parent_flow_name \u7528\u6236\u9032\u5165 Upcoming Race Page, Prematch Comment Page \u8207 Top original_annotation @flow: Sub"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/06_event_status_subscription/#_1","title":"\u6a21\u7d44\u8aaa\u660e","text":"\u6a21\u7d44\u540d\u7a31 \u8077\u8cac PrematchCommentView \u8cfd\u524d\u7559\u8a00\u9801\u9762 PrematchCommentFeature TCA Reducer\uff0c\u7ba1\u7406\u8a55\u8ad6\u76f8\u95dc\u7684 State \u548c Action FactsCenter Package (External) Event Status \u8a02\u95b1\u8207\u901a\u77e5\uff08\u5916\u90e8 Package\uff09"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/06_event_status_subscription/#_2","title":"\u6d41\u7a0b\u8aaa\u660e","text":"\u6d41\u7a0b\u6b65\u9a5f \u8aaa\u660e 1. Event Status \u8a02\u95b1 1. \u7528\u6236\u9032\u5165 Race Detail Page2. FactsCenter Package\uff08\u5916\u90e8\uff09\u81ea\u52d5\u900f\u904e WebSocket \u8a02\u95b1 Event Status 2. Event Status \u8b8a\u66f4\u901a\u77e5 1. Prematch Comment Page \u8655\u65bc\u958b\u555f\u72c0\u614b2. Server \u63a8\u9001 EventStatusChanged \u4e8b\u4ef63. FactsCenter Package \u900f\u904e interface \u901a\u77e5 PrematchCommentFeature 3. \u8655\u7406\u901a\u77e5 1. \u82e5 event status \u6709\u6539\u8b8a\uff0c\u4e14\u70ba match_started\uff1a\u81ea\u52d5\u95dc\u9589 Prematch Comment Page\uff0c\u5c0e\u56de Race Detail Page2. \u82e5 event status \u6c92\u6709\u6539\u8b8a\uff1aAPP \u7dad\u6301\u539f\u756b\u9762"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/06_event_status_subscription/#_3","title":"\u5834\u666f\u5e8f\u5217\u5716\uff08\u539f\u59cb\u696d\u52d9\u6d41\u7a0b\uff09","text":"<p>\u4ee5\u4e0b\u70ba\u539f\u59cb\u696d\u52d9\u6d41\u7a0b\u7684\u5e8f\u5217\u5716\uff0c\u5c55\u793a\u5f9e\u696d\u52d9\u89d2\u5ea6\u7684\u5b8c\u6574\u6d41\u7a0b\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    box rgb(255, 248, 220) App\n        participant LiveChat as LiveChat Package\n        participant FactsCenter as FactsCenter Package(external)\n    end\n    participant Server as Server\n\n    %% Event status \u8a02\u95b1\uff08\u5728\u9032\u5165 Race Detail Page \u6642\uff09\n    note over User,LiveChat: \u7528\u6236\u9032\u5165 Race Detail Page\n    FactsCenter-&gt;&gt;Server: WebSocket \u8a02\u95b1 Event Status\n    note over FactsCenter,Server: FactsCenter Package \u900f\u904e WebSocket \u5411 Server \u8a02\u95b1 Event Status\n\n    %% Event status \u8b8a\u5316\u6642\uff0c\u81ea\u52d5\u95dc\u9589 Prematch Comment Page\n    note over User,LiveChat: Prematch Comment Page \u8655\u65bc\u958b\u555f\u72c0\u614b\uff08\u9700\u5148\u9032\u5165 Race Detail Page\uff09\n    Server--&gt;&gt;FactsCenter: EventStatusChanged\n    FactsCenter-&gt;&gt;LiveChat: eventStatus(didChange status: Int)\n    note over FactsCenter,LiveChat: FactsCenter Package \u900f\u904e interface \u901a\u77e5 LiveChat Package\n    alt [\u82e5 event status \u6709\u6539\u8b8a\uff0c\u4e14\u70ba match_started]\n        LiveChat-&gt;&gt;User: \u95dc\u9589 Prematch Comment Page\uff08\u5c0e\u56de Race Detail Page\uff09\n        note over LiveChat: \u4e0b\u6b21\u518d\u6253\u958b Chat Room \u6642\uff0c\u6703\u662f match ongoing \u7684 chat room\n    else [\u82e5 event status \u6c92\u6709\u6539\u8b8a]\n        note over LiveChat: APP \u7dad\u6301\u539f\u756b\u9762\n    end</code></pre> <p>Mermaid \u8a9e\u6cd5\uff08\u53ef\u8907\u88fd\uff09\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    box rgb(255, 248, 220) App\n        participant LiveChat as LiveChat Package\n        participant FactsCenter as FactsCenter Package(external)\n    end\n    participant Server as Server\n\n    %% Event status \u8a02\u95b1\uff08\u5728\u9032\u5165 Race Detail Page \u6642\uff09\n    note over User,LiveChat: \u7528\u6236\u9032\u5165 Race Detail Page\n    FactsCenter-&gt;&gt;Server: WebSocket \u8a02\u95b1 Event Status\n    note over FactsCenter,Server: FactsCenter Package \u900f\u904e WebSocket \u5411 Server \u8a02\u95b1 Event Status\n\n    %% Event status \u8b8a\u5316\u6642\uff0c\u81ea\u52d5\u95dc\u9589 Prematch Comment Page\n    note over User,LiveChat: Prematch Comment Page \u8655\u65bc\u958b\u555f\u72c0\u614b\uff08\u9700\u5148\u9032\u5165 Race Detail Page\uff09\n    Server--&gt;&gt;FactsCenter: EventStatusChanged\n    FactsCenter-&gt;&gt;LiveChat: eventStatus(didChange status: Int)\n    note over FactsCenter,LiveChat: FactsCenter Package \u900f\u904e interface \u901a\u77e5 LiveChat Package\n    alt [\u82e5 event status \u6709\u6539\u8b8a\uff0c\u4e14\u70ba match_started]\n        LiveChat-&gt;&gt;User: \u95dc\u9589 Prematch Comment Page\uff08\u5c0e\u56de Race Detail Page\uff09\n        note over LiveChat: \u4e0b\u6b21\u518d\u6253\u958b Chat Room \u6642\uff0c\u6703\u662f match ongoing \u7684 chat room\n    else [\u82e5 event status \u6c92\u6709\u6539\u8b8a]\n        note over LiveChat: APP \u7dad\u6301\u539f\u756b\u9762\n    end\n</code></pre>"},{"location":"05.%20Module%20Sequence%20Diagram%EF%BC%88%E6%A8%A1%E7%B5%84%E5%BA%8F%E5%88%97%E5%9C%96%EF%BC%89/PrematchComment/Module%20Sequence%20Diagrams/06_event_status_subscription/#_4","title":"\u6a21\u7d44\u5e8f\u5217\u5716\uff08\u67b6\u69cb\u8a2d\u8a08\uff09","text":"<p>\u4ee5\u4e0b\u70ba\u8f49\u63db\u5f8c\u7684\u6a21\u7d44\u5e8f\u5217\u5716\uff0c\u5c55\u793a Clean Architecture \u5404\u5c64\u7d1a\u7684\u4e92\u52d5\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    box rgb(207,232,255) UI Layer\n        participant PrematchCommentView\n    end\n    box rgb(255,250,205) Domain Layer\n        participant PrematchCommentFeature\n    end\n    participant FactsCenterPackage as FactsCenter Package (External)\n    participant Server\n\n    Note over User,PrematchCommentView: \u7528\u6236\u9032\u5165 Race Detail Page\n    User-&gt;&gt;PrematchCommentView: \u9032\u5165 Race Detail Page\n    FactsCenterPackage-&gt;&gt;Server: WebSocket \u8a02\u95b1 Event Status\n    Note over FactsCenterPackage: \u5916\u90e8 Package\uff0c\u5167\u90e8\u5be6\u4f5c\u4e0d\u5728\u6b64 TDD \u7bc4\u570d\u5167\n\n    Note over User,PrematchCommentView: Prematch Comment Page \u8655\u65bc\u958b\u555f\u72c0\u614b\n    Note over User,PrematchCommentView: Event Status \u8b8a\u66f4\u901a\u77e5\n    Server--&gt;&gt;FactsCenterPackage: EventStatusChanged\n    FactsCenterPackage-&gt;&gt;PrematchCommentFeature: eventStatus(didChange status: Int)\n    Note over FactsCenterPackage,PrematchCommentFeature: FactsCenter Package \u900f\u904e interface \u901a\u77e5 PrematchCommentFeature\n    alt \u82e5 event status \u6709\u6539\u8b8a\uff0c\u4e14\u70ba match_started\n        PrematchCommentFeature-&gt;&gt;PrematchCommentView: \u95dc\u9589 Prematch Comment Page\n        PrematchCommentView--&gt;&gt;User: \u5c0e\u56de Race Detail Page\n        Note over PrematchCommentFeature: \u4e0b\u6b21\u518d\u6253\u958b Chat Room \u6642\uff0c\u6703\u662f match ongoing \u7684 chat room\n    else \u82e5 event status \u6c92\u6709\u6539\u8b8a\n        PrematchCommentFeature-&gt;&gt;PrematchCommentFeature: APP \u7dad\u6301\u539f\u756b\u9762\n    end</code></pre> <p>Mermaid \u8a9e\u6cd5\uff08\u53ef\u8907\u88fd\uff09\uff1a</p> <pre><code>sequenceDiagram\n    autonumber\n    actor User\n    box rgb(207,232,255) UI Layer\n        participant PrematchCommentView\n    end\n    box rgb(255,250,205) Domain Layer\n        participant PrematchCommentFeature\n    end\n    participant FactsCenterPackage as FactsCenter Package (External)\n    participant Server\n\n    Note over User,PrematchCommentView: \u7528\u6236\u9032\u5165 Race Detail Page\n    User-&gt;&gt;PrematchCommentView: \u9032\u5165 Race Detail Page\n    FactsCenterPackage-&gt;&gt;Server: WebSocket \u8a02\u95b1 Event Status\n    Note over FactsCenterPackage: \u5916\u90e8 Package\uff0c\u5167\u90e8\u5be6\u4f5c\u4e0d\u5728\u6b64 TDD \u7bc4\u570d\u5167\n\n    Note over User,PrematchCommentView: Prematch Comment Page \u8655\u65bc\u958b\u555f\u72c0\u614b\n    Note over User,PrematchCommentView: Event Status \u8b8a\u66f4\u901a\u77e5\n    Server--&gt;&gt;FactsCenterPackage: EventStatusChanged\n    FactsCenterPackage-&gt;&gt;PrematchCommentFeature: eventStatus(didChange status: Int)\n    Note over FactsCenterPackage,PrematchCommentFeature: FactsCenter Package \u900f\u904e interface \u901a\u77e5 PrematchCommentFeature\n    alt \u82e5 event status \u6709\u6539\u8b8a\uff0c\u4e14\u70ba match_started\n        PrematchCommentFeature-&gt;&gt;PrematchCommentView: \u95dc\u9589 Prematch Comment Page\n        PrematchCommentView--&gt;&gt;User: \u5c0e\u56de Race Detail Page\n        Note over PrematchCommentFeature: \u4e0b\u6b21\u518d\u6253\u958b Chat Room \u6642\uff0c\u6703\u662f match ongoing \u7684 chat room\n    else \u82e5 event status \u6c92\u6709\u6539\u8b8a\n        PrematchCommentFeature-&gt;&gt;PrematchCommentFeature: APP \u7dad\u6301\u539f\u756b\u9762\n    end\n</code></pre>"},{"location":"06_Feature%20State%20%26%20Action%20%28TCA%29/","title":"Feature State &amp; Action (TCA)","text":"<p>\u672c\u76ee\u9304\u5305\u542b\u6240\u6709 Feature \u7684 TCA State \u548c Action \u5b9a\u7fa9\u3002</p>"},{"location":"06_Feature%20State%20%26%20Action%20%28TCA%29/#_1","title":"\u6587\u4ef6\u5217\u8868","text":"<ul> <li><code>01_feature_state_action.md</code> - PrematchComment \u548c LiveChat Feature \u7684 State \u548c Action \u5b9a\u7fa9</li> </ul>"},{"location":"06_Feature%20State%20%26%20Action%20%28TCA%29/#_2","title":"\u8aaa\u660e","text":"<p>\u672c\u7ae0\u7bc0\u5b9a\u7fa9\u4e86\u6240\u6709 Feature \u7684 TCA\uff08The Composable Architecture\uff09State \u548c Action\uff0c\u5305\u62ec\uff1a</p> <ul> <li>State\uff1aUI \u9700\u8981\u7684\u6240\u6709\u72c0\u614b\uff08\u5217\u8868\u8cc7\u6599\u3001loading flag\u3001error\u3001pagination cursor \u7b49\uff09</li> <li>Action\uff1a\u4f7f\u7528\u8005\u4e92\u52d5\u3001Lifecycle \u4e8b\u4ef6\u3001\u7cfb\u7d71\u4e8b\u4ef6\u3001UseCase \u56de\u50b3\u7b49</li> </ul> <p>\u6240\u6709 State \u5fc5\u9808\u4f7f\u7528 Domain Model\uff0c\u4e0d\u5f97\u4f7f\u7528 DTO\u3002</p>"},{"location":"06_Feature%20State%20%26%20Action%20%28TCA%29/01_feature_state_action/","title":"Feature State &amp; Action (TCA)","text":""},{"location":"06_Feature%20State%20%26%20Action%20%28TCA%29/01_feature_state_action/#prematchcommentfeature","title":"PrematchCommentFeature","text":""},{"location":"06_Feature%20State%20%26%20Action%20%28TCA%29/01_feature_state_action/#state","title":"State","text":"<pre><code>struct PrematchCommentState: Equatable {\n    // \u8cc7\u6599\u72c0\u614b\n    var comments: [Comment] = []  // Comment Entity \u9663\u5217\uff08\u5305\u542b repliesCount\u3001likedByMe\u3001isIsolated\u3001isDeleted \u7b49\u6b04\u4f4d\uff09\n    var commentMeta: CommentMeta?  // \u7559\u8a00\u7d71\u8a08\u8cc7\u8a0a\uff08commentCount\u3001betCount \u70ba String\uff09\n    var userInfo: UserInfo?  // \u7528\u6236\u8cc7\u8a0a\uff08\u5305\u542b tierLevel\u3001countryCode\uff09\n    var pagingInfo: PagingInfo?\n    var cursor: Cursor?\n\n    // UI \u72c0\u614b\n    var selectedMode: SortMode = .top  // \u9810\u8a2d\u70ba top\n    var isLoading: Bool = false\n    var error: Error?\n\n    // \u5c55\u958b\u7684\u56de\u8986\u5217\u8868\uff08commentId -&gt; [Comment]\uff09\n    var expandedReplies: [String: [Comment]] = [:]\n    var replyPagingInfo: [String: PagingInfo] = [:]\n\n    // Event Status \u76f8\u95dc\n    var eventStatus: Int?  // \u7576\u524d Event Status\n    var shouldClosePage: Bool = false  // \u7576 event status \u8b8a\u70ba match_started \u6642\u70ba true\n}\n</code></pre>"},{"location":"06_Feature%20State%20%26%20Action%20%28TCA%29/01_feature_state_action/#action","title":"Action","text":"<pre><code>enum PrematchCommentAction: Equatable {\n    // Lifecycle\n    case onAppear(refId: String)\n    case onDisappear\n\n    // \u4f7f\u7528\u8005\u4e92\u52d5\n    case tapRefreshButton\n    case tapTab(mode: SortMode)\n    case tapLikeButton(commentId: String)\n    case tapReplyButton(commentId: String)\n    case tapLoadMoreReplies(commentId: String)\n    case tapUserName(userId: String)\n    case tapInputField\n    case tapSendButton(content: String, parentId: String?)\n\n    // UseCase \u56de\u61c9\n    case reloadCommentListResponse(Result&lt;ReloadCommentListOutput, Error&gt;)\n    case publishCommentResponse(Result&lt;PublishCommentOutput, Error&gt;)\n    case toggleLikeResponse(Result&lt;ToggleLikeOutput, Error&gt;)\n    case loadRepliesResponse(Result&lt;LoadRepliesOutput, Error&gt;)\n    case navigateToProfileResponse(Result&lt;Void, Error&gt;)\n\n    // \u7cfb\u7d71\u4e8b\u4ef6\n    case eventStatusChanged(status: Int)  // \u4f86\u81ea FactsCenter Package\n}\n</code></pre>"},{"location":"06_Feature%20State%20%26%20Action%20%28TCA%29/01_feature_state_action/#livechatfeature","title":"LiveChatFeature","text":""},{"location":"06_Feature%20State%20%26%20Action%20%28TCA%29/01_feature_state_action/#state_1","title":"State","text":"<pre><code>struct LiveChatState: Equatable {\n    // \u8cc7\u6599\u72c0\u614b\n    var chatroomInfo: ChatroomInfo?  // \u804a\u5929\u5ba4\u8cc7\u8a0a\uff08\u5305\u542b onlineCount\u3001betCount\u3001chatRoomType\u3001nickNameAvailable\uff09\n    var messages: [Message] = []  // Message Entity \u9663\u5217\uff08\u5305\u542b previousMessageNo\u3001isIsolated\u3001isDeleted\u3001status \u7b49\u6b04\u4f4d\uff09\n    var lastMessageNo: Int?  // \u6700\u5f8c\u8a0a\u606f\u7de8\u865f\uff08\u7528\u65bc\u8f09\u5165\u6b77\u53f2\u8a0a\u606f\uff09\n\n    // UI \u72c0\u614b\n    var isLoading: Bool = false\n    var isLoadingHistory: Bool = false\n    var error: Error?\n    var isChatroomOpen: Bool = false\n\n    // WebSocket \u72c0\u614b\n    var isWebSocketConnected: Bool = false\n    var webSocketError: Error?\n\n    // \u9ed1\u540d\u55ae\n    var blockedUserIds: Set&lt;String&gt; = []\n\n    // \u4f7f\u7528\u8005\u4e92\u52d5\u72c0\u614b\n    var selectedUserId: String?  // \u7528\u65bc\u986f\u793a\u64cd\u4f5c\u9078\u55ae\n    var showBlockConfirmation: Bool = false\n}\n</code></pre>"},{"location":"06_Feature%20State%20%26%20Action%20%28TCA%29/01_feature_state_action/#action_1","title":"Action","text":"<pre><code>enum LiveChatAction: Equatable {\n    // Lifecycle\n    case onAppear(refId: String)\n    case onDisappear\n\n    // \u4f7f\u7528\u8005\u4e92\u52d5\n    case tapJoinChatroom\n    case tapLeaveChatroom\n    case tapInputField\n    case tapSendButton(content: String)\n    case tapUserName(userId: String)\n    case tapBlockUser(userId: String)\n    case confirmBlockUser(userId: String)\n    case tapScrollToTop  // \u8f09\u5165\u6b77\u53f2\u8a0a\u606f\n\n    // UseCase \u56de\u61c9\n    case joinChatroomResponse(Result&lt;JoinChatroomOutput, Error&gt;)\n    case leaveChatroomResponse(Result&lt;Void, Error&gt;)\n    case sendMessageResponse(Result&lt;SendChatMessageOutput, Error&gt;)\n    case navigateToProfileResponse(Result&lt;Void, Error&gt;)\n    case blockUserResponse(Result&lt;Void, Error&gt;)\n\n    // WebSocket \u4e8b\u4ef6\n    case webSocketConnected\n    case webSocketDisconnected\n    case webSocketError(Error)\n    case webSocketMessageReceived(Message)\n\n    // \u7cfb\u7d71\u4e8b\u4ef6\n    case loadHistoricalMessagesResponse(Result&lt;[Message], Error&gt;)\n}\n</code></pre>"},{"location":"06_Feature%20State%20%26%20Action%20%28TCA%29/01_feature_state_action/#state_2","title":"State \u8a2d\u8a08\u539f\u5247","text":""},{"location":"06_Feature%20State%20%26%20Action%20%28TCA%29/01_feature_state_action/#1-domain-model","title":"1. \u53ea\u4f7f\u7528 Domain Model","text":"<ul> <li>\u2705 \u6b63\u78ba\uff1a<code>var comments: [Comment]</code>\uff08Entity \u9663\u5217\uff09</li> <li>\u2705 \u6b63\u78ba\uff1a<code>var pagingInfo: PagingInfo?</code>\uff08Value Object\uff09</li> <li>\u274c \u932f\u8aa4\uff1a<code>var apiResponse: CommentResponseDTO</code>\uff08DTO\uff09</li> </ul>"},{"location":"06_Feature%20State%20%26%20Action%20%28TCA%29/01_feature_state_action/#2-client-repository-api","title":"2. \u4e0d\u4f9d\u8cf4 Client / Repository / API","text":"<ul> <li>State \u4e2d\u4e0d\u61c9\u5305\u542b\u4efb\u4f55 Client\u3001Repository \u6216 API \u7684\u5f15\u7528</li> <li>\u6240\u6709\u8cc7\u6599\u5b58\u53d6\u90fd\u900f\u904e UseCase \u8655\u7406</li> </ul>"},{"location":"06_Feature%20State%20%26%20Action%20%28TCA%29/01_feature_state_action/#3-ui","title":"3. UI \u72c0\u614b\u8207\u8cc7\u6599\u72c0\u614b\u5206\u96e2","text":"<ul> <li>\u8cc7\u6599\u72c0\u614b\uff1acomments\u3001messages\u3001pagingInfo \u7b49</li> <li>UI \u72c0\u614b\uff1aisLoading\u3001error\u3001selectedMode \u7b49</li> </ul>"},{"location":"06_Feature%20State%20%26%20Action%20%28TCA%29/01_feature_state_action/#action_2","title":"Action \u8a2d\u8a08\u539f\u5247","text":""},{"location":"06_Feature%20State%20%26%20Action%20%28TCA%29/01_feature_state_action/#1-action","title":"1. Action \u50c5\u4ee3\u8868\u4e8b\u4ef6\uff0c\u4e0d\u5305\u542b\u908f\u8f2f","text":"<ul> <li>\u2705 \u6b63\u78ba\uff1a<code>case tapLikeButton(commentId: String)</code></li> <li>\u274c \u932f\u8aa4\uff1a<code>case likeComment(commentId: String, shouldIncrement: Bool)</code>\uff08\u5305\u542b\u908f\u8f2f\u5224\u65b7\uff09</li> </ul>"},{"location":"06_Feature%20State%20%26%20Action%20%28TCA%29/01_feature_state_action/#2","title":"2. \u5340\u5206\u4f7f\u7528\u8005\u4e92\u52d5\u548c\u7cfb\u7d71\u4e8b\u4ef6","text":"<ul> <li>\u4f7f\u7528\u8005\u4e92\u52d5\uff1atap\u3001input\u3001select \u7b49</li> <li>Lifecycle\uff1aonAppear\u3001onDisappear</li> <li>\u7cfb\u7d71\u4e8b\u4ef6\uff1aWebSocket \u8a0a\u606f\u3001\u5916\u90e8\u901a\u77e5\u7b49</li> <li>UseCase \u56de\u61c9\uff1a\u6240\u6709 UseCase \u57f7\u884c\u7d50\u679c</li> </ul>"},{"location":"06_Feature%20State%20%26%20Action%20%28TCA%29/01_feature_state_action/#3-usecase","title":"3. UseCase \u56de\u61c9\u547d\u540d\u898f\u7bc4","text":"<ul> <li>\u683c\u5f0f\uff1a<code>{useCaseName}Response(Result&lt;{OutputType}, Error&gt;)</code></li> <li>\u7bc4\u4f8b\uff1a<code>reloadCommentListResponse(Result&lt;ReloadCommentListOutput, Error&gt;)</code></li> </ul>"},{"location":"07_UseCase%20Input%20%26%20Output%20Model/","title":"UseCase Input &amp; Output Model","text":"<p>\u672c\u76ee\u9304\u5305\u542b\u6240\u6709 UseCase \u7684 Input \u548c Output Model \u5b9a\u7fa9\u3002</p>"},{"location":"07_UseCase%20Input%20%26%20Output%20Model/#_1","title":"\u6587\u4ef6\u5217\u8868","text":"<ul> <li><code>01_usecase_input_output.md</code> - \u6240\u6709 UseCase \u7684 Input \u548c Output Model \u5b9a\u7fa9</li> </ul>"},{"location":"07_UseCase%20Input%20%26%20Output%20Model/#_2","title":"\u8aaa\u660e","text":"<p>\u672c\u7ae0\u7bc0\u5b9a\u7fa9\u4e86\u6240\u6709 UseCase \u7684 Input \u548c Output Model\uff0c\u5305\u62ec\uff1a</p> <ul> <li>Input Model\uff1aFeature \u547c\u53eb UseCase \u7684\u53c3\u6578\u5c01\u88dd</li> <li>Output Model\uff1aUseCase \u56de\u50b3\u7d66 Feature \u7684 Domain \u7d50\u679c</li> </ul> <p>\u6240\u6709 Input/Output Model \u5fc5\u9808\u4f7f\u7528 Domain Model\uff0c\u4e0d\u5f97\u4f7f\u7528 DTO\u3002</p>"},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/","title":"UseCase Input &amp; Output Model","text":""},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#prematchcomment-usecases","title":"PrematchComment UseCases","text":""},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#reloadcommentlistusecase","title":"ReloadCommentListUseCase","text":""},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#input","title":"Input","text":"<pre><code>struct ReloadCommentListInput: Equatable {\n    let refId: String\n    let triggerType: TriggerType  // init / refresh / switch\n    let mode: SortMode  // top / newest\n    let cursor: Cursor?  // \u53ef\u9078\uff0c\u7528\u65bc\u5206\u9801\n}\n\nenum TriggerType: String, Equatable {\n    case init  // \u521d\u59cb\u5316\u8f09\u5165\n    case refresh  // \u624b\u52d5\u5237\u65b0\n    case switch  // \u5207\u63db\u6a19\u7c64\n}\n</code></pre>"},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#output","title":"Output","text":"<pre><code>struct ReloadCommentListOutput: Equatable {\n    let comments: [Comment]\n    let pagingInfo: PagingInfo?\n}\n</code></pre>"},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#publishcommentusecase","title":"PublishCommentUseCase","text":""},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#input_1","title":"Input","text":"<pre><code>struct PublishCommentInput: Equatable {\n    let refId: String\n    let content: String\n    let parentId: String?  // \u53ef\u9078\uff0c\u7528\u65bc\u56de\u8986\n}\n</code></pre>"},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#output_1","title":"Output","text":"<pre><code>struct PublishCommentOutput: Equatable {\n    let comment: Comment\n}\n</code></pre>"},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#togglelikeusecase","title":"ToggleLikeUseCase","text":""},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#input_2","title":"Input","text":"<pre><code>struct ToggleLikeInput: Equatable {\n    let commentId: String\n}\n</code></pre>"},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#output_2","title":"Output","text":"<pre><code>struct ToggleLikeOutput: Equatable {\n    let comment: Comment  // \u66f4\u65b0\u5f8c\u7684 Comment\n}\n</code></pre>"},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#loadrepliesusecase","title":"LoadRepliesUseCase","text":""},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#input_3","title":"Input","text":"<pre><code>struct LoadRepliesInput: Equatable {\n    let commentId: String\n    let cursor: Cursor?  // \u53ef\u9078\uff0c\u7528\u65bc\u5206\u9801\n}\n</code></pre>"},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#output_3","title":"Output","text":"<pre><code>struct LoadRepliesOutput: Equatable {\n    let replies: [Comment]\n    let pagingInfo: PagingInfo\n}\n</code></pre>"},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#navigatetoprofileusecase","title":"NavigateToProfileUseCase","text":""},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#input_4","title":"Input","text":"<pre><code>struct NavigateToProfileInput: Equatable {\n    let userId: String\n}\n</code></pre>"},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#output_4","title":"Output","text":"<pre><code>struct NavigateToProfileOutput: Equatable {\n    // \u7121\u56de\u50b3\u503c\uff0c\u8def\u7531\u8df3\u8f49\u6210\u529f\u5373\u53ef\n}\n</code></pre>"},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#livechat-usecases","title":"LiveChat UseCases","text":""},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#sendchatmessageusecase","title":"SendChatMessageUseCase","text":""},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#input_5","title":"Input","text":"<pre><code>struct SendChatMessageInput: Equatable {\n    let chatroomId: String\n    let content: String\n    let messageType: MessageType\n}\n\nenum MessageType: String, Equatable {\n    case text\n    // \u672a\u4f86\u53ef\u64f4\u5c55\u5176\u4ed6\u985e\u578b\n}\n</code></pre>"},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#output_5","title":"Output","text":"<pre><code>struct SendChatMessageOutput: Equatable {\n    let message: Message\n}\n</code></pre>"},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#joinchatroomusecase","title":"JoinChatroomUseCase","text":""},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#input_6","title":"Input","text":"<pre><code>struct JoinChatroomInput: Equatable {\n    let refId: String\n}\n</code></pre>"},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#output_6","title":"Output","text":"<pre><code>struct JoinChatroomOutput: Equatable {\n    let chatroomInfo: ChatroomInfo\n    let messages: [Message]  // \u6b77\u53f2\u8a0a\u606f\n}\n</code></pre>"},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#leavechatroomusecase","title":"LeaveChatroomUseCase","text":""},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#input_7","title":"Input","text":"<pre><code>struct LeaveChatroomInput: Equatable {\n    let chatroomId: String\n}\n</code></pre>"},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#output_7","title":"Output","text":"<pre><code>struct LeaveChatroomOutput: Equatable {\n    // \u7121\u56de\u50b3\u503c\uff0c\u96e2\u958b\u6210\u529f\u5373\u53ef\n}\n</code></pre>"},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#blockuserusecase","title":"BlockUserUseCase","text":""},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#input_8","title":"Input","text":"<pre><code>struct BlockUserInput: Equatable {\n    let userId: String\n    let eventId: String\n    let timestamp: Date\n}\n</code></pre>"},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#output_8","title":"Output","text":"<pre><code>struct BlockUserOutput: Equatable {\n    // \u7121\u56de\u50b3\u503c\uff0c\u5c01\u9396\u6210\u529f\u5373\u53ef\n}\n</code></pre>"},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#inputoutput-model","title":"Input/Output Model \u8a2d\u8a08\u539f\u5247","text":""},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#1-domain-model","title":"1. \u53ea\u4f7f\u7528 Domain Model","text":"<ul> <li>\u2705 \u6b63\u78ba\uff1a<code>let comments: [Comment]</code>\uff08Entity \u9663\u5217\uff09</li> <li>\u2705 \u6b63\u78ba\uff1a<code>let mode: SortMode</code>\uff08Value Object\uff09</li> <li>\u2705 \u6b63\u78ba\uff1a<code>let cursor: Cursor?</code>\uff08Value Object\uff09</li> <li>\u274c \u932f\u8aa4\uff1a<code>let requestDTO: CommentRequestDTO</code>\uff08DTO\uff09</li> </ul>"},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#2-input-model","title":"2. Input Model \u8868\u9054\u6240\u6709\u53ef\u8b8a\u56e0\u7d20","text":"<ul> <li>\u4f7f\u7528 <code>triggerType</code> \u5340\u5206\u4e0d\u540c\u7684\u89f8\u767c\u65b9\u5f0f\uff08init / refresh / switch\uff09</li> <li>\u4f7f\u7528 <code>mode</code> \u5340\u5206\u4e0d\u540c\u7684\u6392\u5e8f\u65b9\u5f0f\uff08top / newest\uff09</li> <li>\u4f7f\u7528 <code>cursor</code> \u8655\u7406\u5206\u9801</li> </ul>"},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#3-output-model-ui","title":"3. Output Model \u8cbc\u8fd1 UI \u6240\u9700","text":"<ul> <li>\u5305\u542b Domain Model\uff08\u5982 comments\u3001messages\uff09</li> <li>\u5305\u542b UI \u6240\u9700\u7684 meta\uff08\u5982 pagingInfo\u3001hasMore\uff09</li> <li>\u4e0d\u5305\u542b DTO \u6216\u6280\u8853\u7d30\u7bc0</li> </ul>"},{"location":"07_UseCase%20Input%20%26%20Output%20Model/01_usecase_input_output/#4-optional","title":"4. \u53ef\u9078\u53c3\u6578\u4f7f\u7528 Optional","text":"<ul> <li>\u5206\u9801\u76f8\u95dc\u53c3\u6578\u4f7f\u7528 <code>Cursor?</code></li> <li>\u56de\u8986\u76f8\u95dc\u53c3\u6578\u4f7f\u7528 <code>parentId: String?</code></li> </ul>"},{"location":"08_API%20Spec%20%26%20Mapping/","title":"API Spec &amp; Mapping","text":"<p>\u672c\u76ee\u9304\u5305\u542b\u6240\u6709 API \u7684\u8a73\u7d30\u898f\u683c\u548c DTO \u2192 Domain Model \u7684 Mapping \u5b9a\u7fa9\u3002</p>"},{"location":"08_API%20Spec%20%26%20Mapping/#_1","title":"\u6587\u4ef6\u5217\u8868","text":"<ul> <li><code>01_api_spec.md</code> - \u6240\u6709 API \u7684\u8a73\u7d30\u898f\u683c\u548c Mapping \u5b9a\u7fa9</li> </ul>"},{"location":"08_API%20Spec%20%26%20Mapping/#_2","title":"\u8aaa\u660e","text":"<p>\u672c\u7ae0\u7bc0\u5b9a\u7fa9\u4e86\u6240\u6709 API \u7684\u8a73\u7d30\u898f\u683c\uff0c\u5305\u62ec\uff1a</p> <ul> <li>URL \u548c HTTP Method</li> <li>Request/Response DTO</li> <li>\u6240\u5c6c UseCase</li> <li>DTO \u2192 Domain Model Mapping</li> <li>\u547c\u53eb\u93c8\uff1aUseCase \u2192 Repository \u2192 Client \u2192 API</li> </ul>"},{"location":"08_API%20Spec%20%26%20Mapping/01_api_spec/","title":"API Spec &amp; Mapping","text":"<p>\u6700\u5f8c\u66f4\u65b0\u65e5\u671f: 2025-12-03 \u8cc7\u6599\u4f86\u6e90:  - <code>Input/LiveChat&amp;PrematchComment/API Docs/FComAPI_Documentation.md</code> - <code>Input/LiveChat&amp;PrematchComment/API Docs/LiveChat_API_Documentation.md</code></p> <p>\u904e\u6ffe\u898f\u5247: - \u5ffd\u7565 FComAPI_Documentation.md \u4e2d API path \u5305\u542b \"inner\" \u7684 API - \u5ffd\u7565 LiveChat_API_Documentation.md \u4e2d API path \u5305\u542b \"V2\", \"v2\", \"inner\" \u7684 API - \u5c0d\u65bc <code>/chat/match/message</code> \u53ea\u95dc\u6ce8 TEXT \u7248\u672c</p>"},{"location":"08_API%20Spec%20%26%20Mapping/01_api_spec/#prematchcommentapi","title":"PrematchCommentAPI","text":""},{"location":"08_API%20Spec%20%26%20Mapping/01_api_spec/#post-chatmatchcommentbatchinfo","title":"POST /chat/match/comment/batch/info","text":"<p>\u6240\u5c6c UseCase\uff1aReloadCommentListUseCase\uff08\u6279\u91cf\u7372\u53d6\u8a55\u8ad6\u8cc7\u8a0a\uff09</p> <p>HTTP Method\uff1aPOST</p> <p>URL\uff1a<code>/chat/match/comment/batch/info</code></p> <p>Request DTO\uff1a <pre><code>struct BatchCommentInfoRequestDTO: Codable {\n    let refIdList: [String]\n}\n</code></pre></p> <p>Response DTO\uff1a <pre><code>struct BatchCommentInfoResponseDTO: Codable {\n    let bizCode: Int\n    let innerMsg: String?\n    let message: String?\n    let data: [CommentMetaInfoDTO]\n}\n\nstruct CommentMetaInfoDTO: Codable {\n    let refId: String\n    let commentCount: String\n    let betCount: String\n}\n</code></pre></p> <p>Response Example\uff1a <pre><code>{\n  \"bizCode\": 10000,\n  \"innerMsg\": null,\n  \"message\": null,\n  \"data\": [\n    {\n      \"refId\": \"sr:match:51103469\",\n      \"commentCount\": \"102\",\n      \"betCount\": \"&lt;100\"\n    }\n  ]\n}\n</code></pre></p> <p>Mapping\uff1a <pre><code>extension CommentMeta {\n    init(from dto: CommentMetaInfoDTO) {\n        self.id = dto.refId\n        self.commentCount = Int(dto.commentCount) ?? 0\n        self.betCount = dto.betCount\n        self.refId = dto.refId\n    }\n}\n</code></pre></p> <p>\u547c\u53eb\u93c8\uff1aReloadCommentListUseCase \u2192 PrematchCommentRepository \u2192 PrematchCommentClient \u2192 PrematchCommentAPI</p>"},{"location":"08_API%20Spec%20%26%20Mapping/01_api_spec/#get-chatmatchcommentinforefid","title":"GET /chat/match/comment/info/{refId}","text":"<p>\u6240\u5c6c UseCase\uff1aReloadCommentListUseCase\uff08\u521d\u59cb\u5316\u6642\uff09</p> <p>HTTP Method\uff1aGET</p> <p>URL\uff1a<code>/chat/match/comment/info/{refId}</code></p> <p>Request\uff1a - Path Parameter\uff1a<code>refId: String</code></p> <p>Response DTO\uff1a <pre><code>struct CommentMetaResponseDTO: Codable {\n    let bizCode: Int\n    let innerMsg: String?\n    let message: String?\n    let data: CommentMetaDataDTO\n}\n\nstruct CommentMetaDataDTO: Codable {\n    let refId: String\n    let commentCount: String\n    let betCount: String\n}\n</code></pre></p> <p>Response Example\uff1a <pre><code>{\n  \"bizCode\": 10000,\n  \"innerMsg\": null,\n  \"message\": null,\n  \"data\": {\n    \"refId\": \"sr:match:51103469\",\n    \"commentCount\": \"102\",\n    \"betCount\": \"&lt;100\"\n  }\n}\n</code></pre></p> <p>Mapping\uff1a <pre><code>extension CommentMeta {\n    init(from dto: CommentMetaDataDTO) {\n        self.id = dto.refId\n        self.commentCount = Int(dto.commentCount) ?? 0\n        self.betCount = dto.betCount\n        self.refId = dto.refId\n    }\n}\n</code></pre></p> <p>\u547c\u53eb\u93c8\uff1aReloadCommentListUseCase \u2192 PrematchCommentRepository \u2192 PrematchCommentClient \u2192 PrematchCommentAPI</p>"},{"location":"08_API%20Spec%20%26%20Mapping/01_api_spec/#get-chatmatchcommentnewest","title":"GET /chat/match/comment/newest","text":"<p>\u6240\u5c6c UseCase\uff1aReloadCommentListUseCase\uff08mode = .newest\uff09</p> <p>HTTP Method\uff1aGET</p> <p>URL\uff1a<code>/chat/match/comment/newest</code></p> <p>Request\uff1a - Query Parameter\uff1a<code>refId: String</code>\uff08\u5fc5\u586b\uff09 - Query Parameter\uff1a<code>prevCommentId: Int64?</code>\uff08\u53ef\u9078\uff0c\u4e0a\u4e00\u500b\u8a55\u8ad6\u7684 ID\uff0c\u7528\u65bc\u5206\u9801\uff09 - Query Parameter\uff1a<code>pageSize: Int?</code>\uff08\u53ef\u9078\uff0c\u9810\u8a2d 10\uff0c\u6bcf\u9801\u8fd4\u56de\u7684\u8a55\u8ad6\u6578\uff09</p> <p>Response DTO\uff1a <pre><code>struct CommentListResponseDTO: Codable {\n    let bizCode: Int\n    let innerMsg: String?\n    let message: String?\n    let data: [CommentDTO]\n}\n\nstruct CommentDTO: Codable {\n    let id: Int64\n    let parentId: Int64  // 0 \u8868\u793a\u7b2c\u4e00\u5c64\u8a55\u8ad6\n    let sharedBetsMeta: String?  // \u5171\u4eab\u6295\u6ce8\u8cc7\u8a0a\uff08\u81ea\u8a02 JSON \u683c\u5f0f\uff09\n    let userId: String\n    let userNickname: String\n    let userTierLevel: String\n    let userAvatar: String\n    let countryCode: String\n    let comment: String\n    let isIsolated: Bool\n    let isDeleted: Bool\n    let likedCount: Int\n    let repliesCount: Int\n    let likedByMe: Bool\n    let createTime: Int64  // \u6642\u9593\u6233\uff08\u6beb\u79d2\uff09\n    let tagUserId: String?\n    let tagUserNickname: String?\n}\n</code></pre></p> <p>Response Example\uff1a <pre><code>{\n  \"bizCode\": 10000,\n  \"innerMsg\": null,\n  \"message\": null,\n  \"data\": [\n    {\n      \"id\": 1002,\n      \"parentId\": 0,\n      \"sharedBetsMeta\": {},\n      \"userId\": \"s2411071016211uid51103294\",\n      \"userNickname\": \"JoJo\",\n      \"userTierLevel\": \"1\",\n      \"userAvatar\": \"https://s.football.com/common/avatar/29.png\",\n      \"countryCode\": \"GH\",\n      \"comment\": \"This is a sample comment.\",\n      \"isIsolated\": false,\n      \"isDeleted\": false,\n      \"likedCount\": 10,\n      \"repliesCount\": 2,\n      \"likedByMe\": false,\n      \"createTime\": 1675651200000,\n      \"tagUserId\": \"s2411071016211uid51103294\",\n      \"tagUserNickname\": \"JoJo\"\n    }\n  ]\n}\n</code></pre></p> <p>Mapping\uff1a <pre><code>extension Comment {\n    init(from dto: CommentDTO) {\n        self.id = \"\\(dto.id)\"\n        self.content = dto.comment\n        self.likeCount = dto.likedCount\n        self.authorId = dto.userId\n        self.authorNickname = dto.userNickname\n        self.parentId = dto.parentId == 0 ? nil : \"\\(dto.parentId)\"\n        self.createdAt = Date(timeIntervalSince1970: TimeInterval(dto.createTime) / 1000)\n        self.refId = \"\"  // \u9700\u8981\u5f9e UseCase \u5c64\u50b3\u5165\n        self.repliesCount = dto.repliesCount\n        self.likedByMe = dto.likedByMe\n        self.isIsolated = dto.isIsolated\n        self.isDeleted = dto.isDeleted\n    }\n}\n</code></pre></p> <p>\u547c\u53eb\u93c8\uff1aReloadCommentListUseCase \u2192 PrematchCommentRepository \u2192 PrematchCommentClient \u2192 PrematchCommentAPI</p>"},{"location":"08_API%20Spec%20%26%20Mapping/01_api_spec/#get-chatmatchcommentpopular","title":"GET /chat/match/comment/popular","text":"<p>\u6240\u5c6c UseCase\uff1aReloadCommentListUseCase\uff08mode = .top\uff09</p> <p>HTTP Method\uff1aGET</p> <p>URL\uff1a<code>/chat/match/comment/popular</code></p> <p>Request\uff1a - Query Parameter\uff1a<code>refId: String</code>\uff08\u5fc5\u586b\uff09 - Query Parameter\uff1a<code>pageNum: Int?</code>\uff08\u53ef\u9078\uff0c\u9810\u8a2d 1\uff0c\u9801\u78bc\uff09 - Query Parameter\uff1a<code>pageSize: Int?</code>\uff08\u53ef\u9078\uff0c\u9810\u8a2d 10\uff0c\u6bcf\u9801\u8fd4\u56de\u7684\u8a55\u8ad6\u6578\uff09</p> <p>Response DTO\uff1a\u540c <code>GET /chat/match/comment/newest</code></p> <p>Mapping\uff1a\u540c <code>GET /chat/match/comment/newest</code></p> <p>\u547c\u53eb\u93c8\uff1aReloadCommentListUseCase \u2192 PrematchCommentRepository \u2192 PrematchCommentClient \u2192 PrematchCommentAPI</p>"},{"location":"08_API%20Spec%20%26%20Mapping/01_api_spec/#get-chatmatchcommentreplies","title":"GET /chat/match/comment/replies","text":"<p>\u6240\u5c6c UseCase\uff1aLoadRepliesUseCase</p> <p>HTTP Method\uff1aGET</p> <p>URL\uff1a<code>/chat/match/comment/replies</code></p> <p>Request\uff1a - Query Parameter\uff1a<code>parentCommentId: Int64</code>\uff08\u5fc5\u586b\uff0c\u7236\u8a55\u8ad6 ID\uff0c\u7b2c\u4e00\u5c64\u8a55\u8ad6\u7684 ID\uff09 - Query Parameter\uff1a<code>prevCommentId: Int64?</code>\uff08\u53ef\u9078\uff0c\u4e0a\u4e00\u500b\u8a55\u8ad6\u7684 ID\uff0c\u7528\u65bc\u5206\u9801\uff09 - Query Parameter\uff1a<code>pageSize: Int?</code>\uff08\u53ef\u9078\uff0c\u9810\u8a2d 5\uff0c\u6bcf\u9801\u8fd4\u56de\u7684\u56de\u8986\u6578\uff09</p> <p>Response DTO\uff1a\u540c <code>GET /chat/match/comment/newest</code></p> <p>Mapping\uff1a\u540c <code>GET /chat/match/comment/newest</code></p> <p>\u547c\u53eb\u93c8\uff1aLoadRepliesUseCase \u2192 PrematchCommentRepository \u2192 PrematchCommentClient \u2192 PrematchCommentAPI</p>"},{"location":"08_API%20Spec%20%26%20Mapping/01_api_spec/#post-chatmatchcomment","title":"POST /chat/match/comment","text":"<p>\u6240\u5c6c UseCase\uff1aPublishCommentUseCase</p> <p>HTTP Method\uff1aPOST</p> <p>URL\uff1a<code>/chat/match/comment</code></p> <p>Request Headers\uff1a - <code>accessToken: String</code>\uff08\u53ef\u9078\uff0c\u512a\u5148\u7d1a\u9ad8\u65bc Cookie\uff09 - <code>Cookie: String</code>\uff08\u5fc5\u9808\u5305\u542b accessToken \u6b04\u4f4d\uff09 - <code>countryCode: String</code></p> <p>Request DTO\uff1a <pre><code>struct PublishCommentRequestDTO: Codable {\n    let refId: String\n    let parentCommentId: Int64?  // \u53ef\u9078\uff0c\u7236\u8a55\u8ad6 ID\uff08\u5982\u679c\u662f\u56de\u8986\uff09\n    let sharedBetsMeta: [String: AnyCodable]?  // \u53ef\u9078\uff0c\u5171\u4eab\u6295\u6ce8\u8cc7\u8a0a\uff08\u81ea\u8a02 JSON \u683c\u5f0f\uff09\n    let comment: String\n    let tagUserId: String?  // \u53ef\u9078\uff0c\u88ab\u6a19\u8a18\u7684\u7528\u6236 ID\n}\n</code></pre></p> <p>Response DTO\uff1a <pre><code>struct CommentResponseDTO: Codable {\n    let bizCode: Int\n    let innerMsg: String?\n    let message: String?\n    let data: CommentDTO  // \u540c CommentDTO \u7d50\u69cb\n}\n</code></pre></p> <p>Response Example\uff1a <pre><code>{\n  \"bizCode\": 10000,\n  \"innerMsg\": null,\n  \"message\": null,\n  \"data\": {\n    \"id\": 1002,\n    \"parentId\": 0,\n    \"sharedBetsMeta\": {},\n    \"userId\": \"s2411071016211uid51103294\",\n    \"userNickname\": \"JoJo\",\n    \"userTierLevel\": \"1\",\n    \"userAvatar\": \"https://s.football.com/common/avatar/29.png\",\n    \"countryCode\": \"GH\",\n    \"comment\": \"This is a sample comment.\",\n    \"isIsolated\": false,\n    \"isDeleted\": false,\n    \"likedCount\": 10,\n    \"repliesCount\": 2,\n    \"likedByMe\": false,\n    \"createTime\": 1675651200000,\n    \"tagUserId\": \"s2411071016211uid51103294\",\n    \"tagUserNickname\": \"JoJo\"\n  }\n}\n</code></pre></p> <p>Mapping\uff1a <pre><code>extension Comment {\n    init(from dto: CommentDTO) {\n        // \u540c GET /chat/match/comment/newest \u7684 Mapping\n        self.id = \"\\(dto.id)\"\n        self.content = dto.comment\n        self.likeCount = dto.likedCount\n        self.authorId = dto.userId\n        self.authorNickname = dto.userNickname\n        self.parentId = dto.parentId == 0 ? nil : \"\\(dto.parentId)\"\n        self.createdAt = Date(timeIntervalSince1970: TimeInterval(dto.createTime) / 1000)\n        self.refId = \"\"  // \u9700\u8981\u5f9e UseCase \u5c64\u50b3\u5165\n        self.repliesCount = dto.repliesCount\n        self.likedByMe = dto.likedByMe\n        self.isIsolated = dto.isIsolated\n        self.isDeleted = dto.isDeleted\n    }\n}\n</code></pre></p> <p>\u547c\u53eb\u93c8\uff1aPublishCommentUseCase \u2192 PrematchCommentRepository \u2192 PrematchCommentClient \u2192 PrematchCommentAPI</p>"},{"location":"08_API%20Spec%20%26%20Mapping/01_api_spec/#post-chatmatchcommentlike","title":"POST /chat/match/comment/like","text":"<p>\u6240\u5c6c UseCase\uff1aToggleLikeUseCase</p> <p>HTTP Method\uff1aPOST</p> <p>URL\uff1a<code>/chat/match/comment/like</code></p> <p>Request Headers\uff1a - <code>accessToken: String</code>\uff08\u53ef\u9078\uff0c\u512a\u5148\u7d1a\u9ad8\u65bc Cookie\uff09 - <code>Cookie: String</code>\uff08\u5fc5\u9808\u5305\u542b accessToken \u6b04\u4f4d\uff09 - <code>countryCode: String</code></p> <p>Request DTO\uff1a <pre><code>struct ToggleLikeRequestDTO: Codable {\n    let commentId: Int64?\n}\n</code></pre></p> <p>Response DTO\uff1a <pre><code>struct ToggleLikeResponseDTO: Codable {\n    let bizCode: Int\n    let innerMsg: String?\n    let message: String?\n    let data: CommentDTO?  // \u6839\u64da API Docs\uff0c\u56de\u61c9\u70ba null\uff0c\u4f46\u5be6\u969b\u53ef\u80fd\u8fd4\u56de\u66f4\u65b0\u5f8c\u7684 CommentDTO\n}\n</code></pre></p> <p>Response Example\uff1a <pre><code>{\n  \"bizCode\": 10000,\n  \"innerMsg\": null,\n  \"message\": null,\n  \"data\": null\n}\n</code></pre></p> <p>\u6ce8\u610f\uff1a\u6839\u64da API Docs\uff0c\u6b64 API \u7684\u56de\u61c9 <code>data</code> \u6b04\u4f4d\u70ba <code>null</code>\uff0c\u8868\u793a\u64cd\u4f5c\u6210\u529f\u3002\u5be6\u969b\u5be6\u4f5c\u4e2d\u53ef\u80fd\u9700\u8981\u91cd\u65b0\u7372\u53d6\u8a55\u8ad6\u5217\u8868\u4ee5\u66f4\u65b0\u9ede\u8b9a\u72c0\u614b\u3002</p> <p>Mapping\uff1a\u5982\u679c\u56de\u61c9\u5305\u542b <code>CommentDTO</code>\uff0c\u5247\u4f7f\u7528\u8207 <code>GET /chat/match/comment/newest</code> \u76f8\u540c\u7684 Mapping\u3002</p> <p>\u547c\u53eb\u93c8\uff1aToggleLikeUseCase \u2192 PrematchCommentRepository \u2192 PrematchCommentClient \u2192 PrematchCommentAPI</p>"},{"location":"08_API%20Spec%20%26%20Mapping/01_api_spec/#chatapi","title":"ChatAPI","text":""},{"location":"08_API%20Spec%20%26%20Mapping/01_api_spec/#post-chatmatchbatchcount","title":"POST /chat/match/batch/count","text":"<p>\u6240\u5c6c UseCase\uff1aJoinChatroomUseCase\uff08\u6279\u91cf\u7372\u53d6\u804a\u5929\u5ba4\u8a08\u6578\uff09</p> <p>HTTP Method\uff1aPOST</p> <p>URL\uff1a<code>/chat/match/batch/count</code></p> <p>Request DTO\uff1a <pre><code>struct BatchChatRoomCountRequestDTO: Codable {\n    let refIdList: [String]\n}\n</code></pre></p> <p>Response DTO\uff1a <pre><code>struct BatchChatRoomCountResponseDTO: Codable {\n    let bizCode: Int\n    let innerMsg: String?\n    let message: String?\n    let data: [ChatRoomCountDTO]\n}\n\nstruct ChatRoomCountDTO: Codable {\n    let refId: String\n    let onlineCount: String\n    let betCount: String\n}\n</code></pre></p> <p>Response Example\uff1a <pre><code>{\n  \"bizCode\": 10000,\n  \"innerMsg\": null,\n  \"message\": null,\n  \"data\": [\n    {\n      \"refId\": \"sr:match:51103469\",\n      \"onlineCount\": \"140\",\n      \"betCount\": \"&lt;100\"\n    }\n  ]\n}\n</code></pre></p> <p>Mapping\uff1a <pre><code>extension ChatroomInfo {\n    init(from dto: ChatRoomCountDTO) {\n        self.id = dto.refId  // \u4f7f\u7528 refId \u4f5c\u70ba id\n        self.chatroomId = \"\"  // \u6279\u91cf API \u4e0d\u8fd4\u56de chatroomId\n        self.lastMessageNo = 0  // \u6279\u91cf API \u4e0d\u8fd4\u56de lastMessageNo\n        self.refId = dto.refId\n        self.onlineCount = Int(dto.onlineCount) ?? 0\n        self.betCount = dto.betCount\n        self.chatRoomType = 10  // \u9810\u8a2d\u70ba GROUP\n        self.nickNameAvailable = nil  // \u6279\u91cf API \u4e0d\u8fd4\u56de\u6b64\u6b04\u4f4d\n    }\n}\n</code></pre></p> <p>\u547c\u53eb\u93c8\uff1aJoinChatroomUseCase \u2192 LiveChatRepository \u2192 LiveChatClient \u2192 ChatAPI</p>"},{"location":"08_API%20Spec%20%26%20Mapping/01_api_spec/#get-chatmatchrefid","title":"GET /chat/match/{refId}","text":"<p>\u6240\u5c6c UseCase\uff1aJoinChatroomUseCase</p> <p>HTTP Method\uff1aGET</p> <p>URL\uff1a<code>/chat/match/{refId}</code></p> <p>Description\uff1a\u7372\u53d6\u6216\u5275\u5efa\u804a\u5929\u5ba4 ID\u3002\u5982\u679c\u804a\u5929\u5ba4\u4e0d\u5b58\u5728\u5247\u5275\u5efa\u3002</p> <p>Request\uff1a - Path Parameter\uff1a<code>refId: String</code>\uff08\u4e8b\u4ef6 ID\uff0c\u5168\u57df\u552f\u4e00\uff0c\u91cd\u8907\u7684 ID \u5c07\u8fd4\u56de\u76f8\u540c\u7684\u804a\u5929\u5ba4 ID\uff09 - Query Parameter\uff1a<code>userId: String?</code>\uff08\u53ef\u9078\uff0c\u7528\u65bc\u6aa2\u67e5\u7528\u6236\u7684\u66b1\u7a31\u662f\u5426\u5b58\u5728\u3002\u5982\u679c\u672a\u63d0\u4f9b\uff0cnickNameAvailable \u5728\u56de\u61c9\u4e2d\u59cb\u7d42\u70ba true\uff09</p> <p>Response DTO\uff1a <pre><code>struct ChatroomInfoResponseDTO: Codable {\n    let bizCode: Int\n    let innerMsg: String?\n    let message: String?\n    let data: ChatroomInfoDataDTO\n}\n\nstruct ChatroomInfoDataDTO: Codable {\n    let id: Int\n    let chatRoomId: String\n    let chatRoomType: Int  // \u76ee\u524d\u50c5\u4f7f\u7528 GROUP(10)\n    let lastMessageNo: Int\n    let createTime: String  // ISO 8601 \u683c\u5f0f\uff0c\u4f8b\u5982\uff1a\"2025-01-15T08:27:06.000-00:00\"\n    let updateTime: String?\n    let creatorUserId: String\n    let name: String?  // \u804a\u5929\u5ba4\u540d\u7a31\n    let avatarUrl: String?  // \u982d\u50cf URL\n    let evatorUrl: String?\n    let bizUserId: String\n    let refId: String\n    let onlineCount: String\n    let betCount: String\n    let nickNameAvailable: Bool?  // \u66b1\u7a31\u662f\u5426\u53ef\u7528\n}\n</code></pre></p> <p>Response Example\uff1a <pre><code>{\n  \"bizCode\": 10000,\n  \"innerMsg\": null,\n  \"message\": null,\n  \"data\": {\n    \"id\": 3026,\n    \"chatRoomId\": \"25011508270room00001780\",\n    \"chatRoomType\": 10,\n    \"lastMessageNo\": 0,\n    \"createTime\": \"2025-01-15T08:27:06.000-00:00\",\n    \"updateTime\": null,\n    \"creatorUserId\": \"\",\n    \"name\": null,\n    \"evatorUrl\": null,\n    \"bizUserId\": \"\",\n    \"refId\": \"TEST3\",\n    \"onlineCount\": \"140\",\n    \"betCount\": \"&lt;100\",\n    \"nickNameAvailable\": true\n  }\n}\n</code></pre></p> <p>Mapping\uff1a <pre><code>extension ChatroomInfo {\n    init(from dto: ChatroomInfoDataDTO) {\n        self.id = dto.chatRoomId\n        self.chatroomId = dto.chatRoomId\n        self.lastMessageNo = dto.lastMessageNo\n        self.refId = dto.refId\n        self.onlineCount = Int(dto.onlineCount) ?? 0\n        self.betCount = dto.betCount\n        self.chatRoomType = dto.chatRoomType\n        self.nickNameAvailable = dto.nickNameAvailable\n    }\n}\n</code></pre></p> <p>\u547c\u53eb\u93c8\uff1aJoinChatroomUseCase \u2192 LiveChatRepository \u2192 LiveChatClient \u2192 ChatAPI</p>"},{"location":"08_API%20Spec%20%26%20Mapping/01_api_spec/#get-chatmatchbackward","title":"GET /chat/match/backward","text":"<p>\u6240\u5c6c UseCase\uff1aJoinChatroomUseCase\uff08\u7372\u53d6\u6b77\u53f2\u6d88\u606f\uff09</p> <p>HTTP Method\uff1aGET</p> <p>URL\uff1a<code>/chat/match/backward</code></p> <p>Request Headers\uff1a - <code>accessToken: String</code>\uff08\u53ef\u9078\uff0c\u512a\u5148\u7d1a\u9ad8\u65bc Cookie\uff09 - <code>Cookie: String</code>\uff08\u5fc5\u9808\u5305\u542b accessToken \u6b04\u4f4d\uff09 - <code>countryCode: String</code></p> <p>Request\uff1a - Query Parameter\uff1a<code>chatRoomId: String</code>\uff08\u5fc5\u586b\uff09 - Query Parameter\uff1a<code>messageNo: Int</code>\uff08\u5fc5\u586b\uff0cPrevious messageNo\uff0c\u53ef\u5f9e Step 1 API \u7684 lastMessageNo \u53d6\u5f97\uff09 - Query Parameter\uff1a<code>length: Int?</code>\uff08\u53ef\u9078\uff0c\u9810\u8a2d 20\uff0c\u5141\u8a31\u503c 1~500\uff09</p> <p>Response DTO\uff1a <pre><code>struct MessageListResponseDTO: Codable {\n    let bizCode: Int\n    let innerMsg: String?\n    let message: String?\n    let data: [MessageDTO]\n}\n\nstruct MessageDTO: Codable {\n    let chatRoomId: String\n    let chatRoomType: Int?\n    let messageNo: Int\n    let previousMessageNo: Int\n    let postUserId: String\n    let jsonBody: MessageBodyDTO\n    let sharedBetsMeta: String?\n    let status: Int\n    let isIsolated: Bool\n    let isDeleted: Bool\n    let createTime: Int64  // \u6642\u9593\u6233\uff08\u6beb\u79d2\uff09\n    let userInfo: UserInfoDTO\n}\n\nstruct MessageBodyDTO: Codable {\n    let text: String?  // TEXT \u6d88\u606f\u7684\u5167\u5bb9\n}\n\nstruct UserInfoDTO: Codable {\n    let nickname: String\n    let avatar: String\n    let country: String\n    let tierLevel: String?  // \u6ce8\u610f\uff1aAPI Docs \u4e2d\u4f7f\u7528 \"tieLevel\"\uff0c\u4f46\u5be6\u969b\u53ef\u80fd\u662f \"tierLevel\"\n}\n</code></pre></p> <p>Response Example\uff1a <pre><code>{\n  \"bizCode\": 10000,\n  \"innerMsg\": null,\n  \"message\": null,\n  \"data\": [\n    {\n      \"chatRoomId\": \"25B1088402660room0N01840\",\n      \"chatRoomType\": null,\n      \"messageNo\": 3,\n      \"previousMessageNo\": 2,\n      \"postUserId\": \"s2C1187181621pud51183294\",\n      \"jsonBody\": {\n        \"text\": \"321\"\n      },\n      \"sharedBetsMeta\": null,\n      \"status\": 0,\n      \"isIsolated\": false,\n      \"isDeleted\": false,\n      \"createTime\": 1736336189000,\n      \"userInfo\": {\n        \"nickname\": \"HAHAHA\",\n        \"avatar\": \"https://s.football.com/common/avatar/29.png\",\n        \"country\": \"gh\",\n        \"tieLevel\": \"A\"\n      }\n    }\n  ]\n}\n</code></pre></p> <p>Mapping\uff1a <pre><code>extension Message {\n    init(from dto: MessageDTO) {\n        self.id = \"\\(dto.messageNo)\"\n        self.content = dto.jsonBody.text ?? \"\"\n        self.messageNo = dto.messageNo\n        self.previousMessageNo = dto.previousMessageNo\n        self.authorId = dto.postUserId\n        self.authorNickname = dto.userInfo.nickname\n        self.messageType = .text  // \u50c5\u652f\u63f4 TEXT \u985e\u578b\n        self.createdAt = Date(timeIntervalSince1970: TimeInterval(dto.createTime) / 1000)\n        self.chatroomId = dto.chatRoomId\n        self.isIsolated = dto.isIsolated\n        self.isDeleted = dto.isDeleted\n        self.status = dto.status\n    }\n}\n</code></pre></p> <p>\u547c\u53eb\u93c8\uff1aJoinChatroomUseCase \u2192 LiveChatRepository \u2192 LiveChatClient \u2192 ChatAPI</p>"},{"location":"08_API%20Spec%20%26%20Mapping/01_api_spec/#post-chatmatchmessage","title":"POST /chat/match/message","text":"<p>\u6240\u5c6c UseCase\uff1aSendChatMessageUseCase</p> <p>HTTP Method\uff1aPOST</p> <p>URL\uff1a<code>/chat/match/message</code></p> <p>Description\uff1a\u767c\u9001 TEXT \u6d88\u606f</p> <p>Request Headers\uff1a - <code>accessToken: String</code>\uff08\u53ef\u9078\uff0c\u512a\u5148\u7d1a\u9ad8\u65bc Cookie\uff09 - <code>Cookie: String</code>\uff08\u5fc5\u9808\u5305\u542b accessToken \u6b04\u4f4d\uff09 - <code>countryCode: String</code></p> <p>Request DTO\uff1a <pre><code>struct SendMessageRequestDTO: Codable {\n    let text: String  // TEXT \u6d88\u606f\u5167\u5bb9\n    let messageType: String  // \u56fa\u5b9a\u70ba \"TEXT\"\n    let chatRoomId: String\n}\n</code></pre></p> <p>Response DTO\uff1a <pre><code>struct SendMessageResponseDTO: Codable {\n    let bizCode: Int\n    let innerMsg: String?\n    let message: String?\n    let data: MessageResponseDataDTO\n}\n\nstruct MessageResponseDataDTO: Codable {\n    let msgType: Int  // 1 \u8868\u793a TEXT\n    let userId: String?\n    let messageNo: Int?\n    let previousMessageNo: Int?\n    let jsonBody: MessageBodyWrapperDTO\n    let sharedBetsMeta: String?\n    let isIsolated: Bool\n    let status: Int\n}\n\nstruct MessageBodyWrapperDTO: Codable {\n    let postUserId: String\n    let userInfo: UserInfoDTO\n    let messageNo: Int\n    let isDeleted: Bool\n    let createTime: Int64  // \u6642\u9593\u6233\uff08\u6beb\u79d2\uff09\n    let previousMessageNo: Int\n    let chatRoomId: String\n    let chatRoomType: Int\n    let jsonBody: MessageBodyDTO  // \u50c5\u5305\u542b text \u6b04\u4f4d\n    let sharedBetsMeta: String?\n    let isIsolated: Bool\n    let status: Int\n}\n</code></pre></p> <p>Response Example\uff1a <pre><code>{\n  \"bizCode\": 10000,\n  \"innerMsg\": null,\n  \"message\": null,\n  \"data\": {\n    \"msgType\": 1,\n    \"userId\": null,\n    \"messageNo\": null,\n    \"previousMessageNo\": null,\n    \"jsonBody\": {\n      \"postUserId\": \"s2C1187181621pud51183294\",\n      \"userInfo\": {\n        \"country\": \"gh\",\n        \"nickname\": \"HAHAHA\",\n        \"tierLevel\": \"A\",\n        \"avatar\": \"https://s.football.com/common/avatar/19.png\"\n      },\n      \"messageNo\": 1,\n      \"isDeleted\": false,\n      \"createTime\": 1736262584910,\n      \"previousMessageNo\": 0,\n      \"chatRoomId\": \"25B1879093540o08N01780\",\n      \"chatRoomType\": 10,\n      \"jsonBody\": {\n        \"text\": \"123\"\n      },\n      \"sharedBetsMeta\": null,\n      \"isIsolated\": false,\n      \"status\": 0\n    },\n    \"sharedBetsMeta\": null,\n    \"isIsolated\": false,\n    \"status\": 0\n  }\n}\n</code></pre></p> <p>Mapping\uff1a <pre><code>extension Message {\n    init(from dto: MessageResponseDataDTO) {\n        self.id = dto.jsonBody.messageNo.map { \"\\($0)\" } ?? \"\"\n        self.content = dto.jsonBody.jsonBody.text ?? \"\"\n        self.messageNo = dto.jsonBody.messageNo\n        self.previousMessageNo = dto.jsonBody.previousMessageNo\n        self.authorId = dto.jsonBody.postUserId\n        self.authorNickname = dto.jsonBody.userInfo.nickname\n        self.messageType = .text  // \u50c5\u652f\u63f4 TEXT \u985e\u578b\n        self.createdAt = Date(timeIntervalSince1970: TimeInterval(dto.jsonBody.createTime) / 1000)\n        self.chatroomId = dto.jsonBody.chatRoomId\n        self.isIsolated = dto.jsonBody.isIsolated\n        self.isDeleted = dto.jsonBody.isDeleted\n        self.status = dto.jsonBody.status\n    }\n}\n</code></pre></p> <p>\u547c\u53eb\u93c8\uff1aSendChatMessageUseCase \u2192 LiveChatRepository \u2192 LiveChatClient \u2192 ChatAPI</p>"},{"location":"08_API%20Spec%20%26%20Mapping/01_api_spec/#post-chatmatchjoin","title":"POST /chat/match/join","text":"<p>\u6240\u5c6c UseCase\uff1aJoinChatroomUseCase\uff08\u53ef\u9078\uff09</p> <p>HTTP Method\uff1aPOST</p> <p>URL\uff1a<code>/chat/match/join</code></p> <p>Description\uff1a\u52a0\u5165\u804a\u5929\u5ba4\uff08\u53ef\u9078\u64cd\u4f5c\uff09</p> <p>Request Headers\uff1a - <code>accessToken: String</code>\uff08\u53ef\u9078\uff0c\u512a\u5148\u7d1a\u9ad8\u65bc Cookie\uff09 - <code>Cookie: String</code>\uff08\u5fc5\u9808\u5305\u542b accessToken \u6b04\u4f4d\uff09 - <code>countryCode: String</code></p> <p>Request DTO\uff1a <pre><code>struct JoinChatroomRequestDTO: Codable {\n    let chatRoomId: String\n}\n</code></pre></p> <p>Response DTO\uff1a <pre><code>struct JoinChatroomResponseDTO: Codable {\n    let bizCode: Int\n    let innerMsg: String?\n    let message: String?\n    let data: NSNull?  // \u56de\u61c9\u70ba null\n}\n</code></pre></p> <p>Response Example\uff1a <pre><code>{\n  \"bizCode\": 10000,\n  \"innerMsg\": null,\n  \"message\": null,\n  \"data\": null\n}\n</code></pre></p> <p>\u547c\u53eb\u93c8\uff1aJoinChatroomUseCase \u2192 LiveChatRepository \u2192 LiveChatClient \u2192 ChatAPI</p>"},{"location":"08_API%20Spec%20%26%20Mapping/01_api_spec/#post-chatmatchleave","title":"POST /chat/match/leave","text":"<p>\u6240\u5c6c UseCase\uff1aLeaveChatroomUseCase\uff08\u53ef\u9078\uff09</p> <p>HTTP Method\uff1aPOST</p> <p>URL\uff1a<code>/chat/match/leave</code></p> <p>Description\uff1a\u96e2\u958b\u804a\u5929\u5ba4\uff08\u53ef\u9078\u64cd\u4f5c\uff09</p> <p>Request Headers\uff1a - <code>accessToken: String</code>\uff08\u53ef\u9078\uff0c\u512a\u5148\u7d1a\u9ad8\u65bc Cookie\uff09 - <code>Cookie: String</code>\uff08\u5fc5\u9808\u5305\u542b accessToken \u6b04\u4f4d\uff09 - <code>countryCode: String</code></p> <p>Request DTO\uff1a <pre><code>struct LeaveChatroomRequestDTO: Codable {\n    let chatRoomId: String\n}\n</code></pre></p> <p>Response DTO\uff1a <pre><code>struct LeaveChatroomResponseDTO: Codable {\n    let bizCode: Int\n    let innerMsg: String?\n    let message: String?\n    let data: NSNull?  // \u56de\u61c9\u70ba null\n}\n</code></pre></p> <p>Response Example\uff1a <pre><code>{\n  \"bizCode\": 10000,\n  \"innerMsg\": null,\n  \"message\": null,\n  \"data\": null\n}\n</code></pre></p> <p>\u547c\u53eb\u93c8\uff1aLeaveChatroomUseCase \u2192 LiveChatRepository \u2192 LiveChatClient \u2192 ChatAPI</p>"},{"location":"08_API%20Spec%20%26%20Mapping/01_api_spec/#post-chatmatchleavebulk","title":"POST /chat/match/leave/bulk","text":"<p>\u6240\u5c6c UseCase\uff1aLeaveChatroomUseCase\uff08\u6279\u91cf\u5f37\u5236\u96e2\u958b\uff0c\u53ef\u9078\uff09</p> <p>HTTP Method\uff1aPOST</p> <p>URL\uff1a<code>/chat/match/leave/bulk</code></p> <p>Description\uff1a\u5f37\u5236\u6279\u91cf\u96e2\u958b\u804a\u5929\u5ba4\u7684\u4e0d\u6d3b\u8e8d\u7528\u6236\uff08\u53ef\u9078\u64cd\u4f5c\uff09</p> <p>Request Headers\uff1a - <code>accessToken: String</code>\uff08\u53ef\u9078\uff0c\u512a\u5148\u7d1a\u9ad8\u65bc Cookie\uff09 - <code>Cookie: String</code>\uff08\u5fc5\u9808\u5305\u542b accessToken \u6b04\u4f4d\uff09 - <code>countryCode: String</code></p> <p>Request DTO\uff1a <pre><code>struct BulkLeaveChatroomRequestDTO: Codable {\n    let chatRoomId: String\n    let excludeUserIds: [String]?  // \u53ef\u9078\uff0c\u6392\u9664\u7684\u7528\u6236 ID \u5217\u8868\n}\n</code></pre></p> <p>Response DTO\uff1a <pre><code>struct BulkLeaveChatroomResponseDTO: Codable {\n    let bizCode: Int\n    let innerMsg: String?\n    let message: String?\n    let data: NSNull?  // \u56de\u61c9\u70ba null\n}\n</code></pre></p> <p>Response Example\uff1a <pre><code>{\n  \"bizCode\": 10000,\n  \"innerMsg\": null,\n  \"message\": null,\n  \"data\": null\n}\n</code></pre></p> <p>\u547c\u53eb\u93c8\uff1aLeaveChatroomUseCase \u2192 LiveChatRepository \u2192 LiveChatClient \u2192 ChatAPI</p>"},{"location":"08_API%20Spec%20%26%20Mapping/01_api_spec/#websocket-wssdomainchatwebsocketweb-chat","title":"WebSocket: wss://{domain}/chat/websocket/web-chat","text":"<p>\u6240\u5c6c UseCase\uff1aJoinChatroomUseCase\uff08\u8a02\u95b1\uff09\u3001LeaveChatroomUseCase\uff08\u53d6\u6d88\u8a02\u95b1\uff09</p> <p>Protocol\uff1aWebSocket (STOMP)</p> <p>URL\uff1a<code>wss://{domain}/chat/websocket/web-chat</code></p> <p>URLs\uff1a - UAT: <code>wss://www.encorebet.net/chat/websocket/web-chat</code></p> <p>Connect Message\uff1a <pre><code>CONNECT\naccept-version:1,2,1,1,1.0\nheart-beat:4000,4000\n</code></pre></p> <p>Connect Headers\uff1a - <code>Platform: ios</code> - <code>App-Version: {version}</code> - <code>Device-Id: {deviceId}</code> - <code>userId: {userId}</code></p> <p>Subscribe Message\uff1a - \u9023\u7dda\u5f8c\u767c\u9001 SUBSCRIBE \u8a0a\u606f\u8a02\u95b1\u7279\u5b9a\u804a\u5929\u5ba4 - Destination \u683c\u5f0f\uff1a<code>/topic/chat_room.{chatRoomId}</code> - \u9700\u8981\u8a2d\u5b9a <code>x-queue-name</code> header\uff1a<code>{chatRoomId}</code></p> <p>Subscribe Message Format\uff1a <pre><code>SUBSCRIBE\nid:{subscriptionId}\ndestination:/topic/chat_room.{chatRoomId}\n</code></pre></p> <p>Subscribe Headers\uff1a - <code>x-queue-name: {chatRoomId}</code></p> <p>Example\uff1a <pre><code>SUBSCRIBE\nid:sub-1\ndestination:/topic/chat_room.25B0107060721room0000175\n</code></pre></p> <p>Receive Message Format\uff1a <pre><code>MESSAGE\nsubscription:{subscriptionId}\ndestination:/topic/chat_room.{chatRoomId}\nmessage-id:{message-id}\nredelivered:false\ncontent-type:application/json\ncontent-length:{length}\n\n{\"type\":\"MESSAGE\",\"data\":{...}}\n</code></pre></p> <p>Message Type\uff1a <pre><code>struct WebSocketMessageDTO: Codable {\n    let type: String  // \"MESSAGE\"\n    let data: MessageResponseDataDTO  // \u8207 POST /chat/match/message \u7684 Response \u683c\u5f0f\u76f8\u540c\n}\n</code></pre></p> <p>Message Types (msgType)\uff1a - <code>1</code>: TEXT \u6d88\u606f - <code>4</code>: JSON \u6d88\u606f\uff08\u6295\u6ce8\u5206\u4eab\u7b49\uff09 - <code>5</code>: GIF \u6d88\u606f</p> <p>\u6ce8\u610f\uff1a - WebSocket \u63a5\u6536\u5230\u7684\u8a0a\u606f\u683c\u5f0f\u8207 HTTP API \u7684 <code>MessageResponseDataDTO</code> \u76f8\u540c - \u652f\u63f4 TEXT\u3001JSON\u3001GIF \u4e09\u7a2e\u985e\u578b\u7684\u6d88\u606f - \u76ee\u524d\u5be6\u4f5c\u4e2d\u4e3b\u8981\u8655\u7406 TEXT \u985e\u578b\u6d88\u606f</p> <p>Unsubscribe\uff1a - \u767c\u9001 UNSUBSCRIBE \u8a0a\u606f\u53d6\u6d88\u8a02\u95b1 - \u6216\u95dc\u9589 WebSocket \u9023\u7dda\u5373\u53d6\u6d88\u6240\u6709\u8a02\u95b1</p> <p>Unsubscribe Format\uff1a <pre><code>UNSUBSCRIBE\nid:{subscriptionId}\n</code></pre></p> <p>Mapping\uff1a <pre><code>extension Message {\n    init(from dto: MessageResponseDataDTO) {\n        // \u540c HTTP API \u7684 Mapping\n        // \u6839\u64da msgType \u5224\u65b7\u6d88\u606f\u985e\u578b\uff08TEXT/JSON/GIF\uff09\n        self.id = dto.jsonBody.messageNo.map { \"\\($0)\" } ?? \"\"\n        self.content = dto.jsonBody.jsonBody.text ?? \"\"\n        self.messageNo = dto.jsonBody.messageNo\n        self.previousMessageNo = dto.jsonBody.previousMessageNo\n        self.authorId = dto.jsonBody.postUserId\n        self.authorNickname = dto.jsonBody.userInfo.nickname\n        self.messageType = .text  // \u6839\u64da msgType \u5224\u65b7\n        self.createdAt = Date(timeIntervalSince1970: TimeInterval(dto.jsonBody.createTime) / 1000)\n        self.chatroomId = dto.jsonBody.chatRoomId\n        self.isIsolated = dto.jsonBody.isIsolated\n        self.isDeleted = dto.jsonBody.isDeleted\n        self.status = dto.jsonBody.status\n    }\n}\n</code></pre></p> <p>\u547c\u53eb\u93c8\uff1aJoinChatroomUseCase \u2192 LiveChatRepository \u2192 ChatWebSocketClient \u2192 ChatAPI</p>"},{"location":"08_API%20Spec%20%26%20Mapping/01_api_spec/#mapping","title":"Mapping \u539f\u5247","text":""},{"location":"08_API%20Spec%20%26%20Mapping/01_api_spec/#1-repository-mapping","title":"1. Repository \u8ca0\u8cac\u6240\u6709 Mapping","text":"<ul> <li>\u6240\u6709 DTO \u2192 Domain Model \u7684\u8f49\u63db\u90fd\u5728 Repository \u5c64\u5b8c\u6210</li> <li>UseCase \u548c Feature \u6c38\u9060\u4e0d\u63a5\u89f8 DTO</li> </ul>"},{"location":"08_API%20Spec%20%26%20Mapping/01_api_spec/#2-extension-mapping","title":"2. \u4f7f\u7528 Extension \u5be6\u4f5c Mapping","text":"<ul> <li>\u70ba\u6bcf\u500b Domain Model \u5efa\u7acb <code>init(from dto: DTO)</code> extension</li> <li>\u4fdd\u6301 Domain Model \u7684\u7d14\u6de8\u6027</li> </ul>"},{"location":"08_API%20Spec%20%26%20Mapping/01_api_spec/#3","title":"3. \u8655\u7406\u53ef\u9078\u503c\u548c\u9810\u8a2d\u503c","text":"<ul> <li>\u65e5\u671f\u5b57\u4e32\u8f49\u63db\u5931\u6557\u6642\u4f7f\u7528\u7576\u524d\u6642\u9593</li> <li>Optional \u6b04\u4f4d\u6b63\u78ba\u8655\u7406 nil \u60c5\u6cc1</li> <li>\u6642\u9593\u6233\u70ba\u6beb\u79d2\uff0c\u9700\u8981\u9664\u4ee5 1000 \u8f49\u63db\u70ba\u79d2</li> </ul>"},{"location":"08_API%20Spec%20%26%20Mapping/01_api_spec/#4-mapping","title":"4. \u4fdd\u6301 Mapping \u908f\u8f2f\u7c21\u55ae","text":"<ul> <li>\u907f\u514d\u8907\u96dc\u7684\u696d\u52d9\u908f\u8f2f</li> <li>\u8907\u96dc\u8f49\u63db\u61c9\u5728 UseCase \u5c64\u8655\u7406</li> </ul>"},{"location":"09_Error%20Handling/","title":"Error Handling","text":"<p>\u672c\u76ee\u9304\u5305\u542b\u932f\u8aa4\u8655\u7406\u7b56\u7565\u548c\u932f\u8aa4\u985e\u578b\u5b9a\u7fa9\u3002</p>"},{"location":"09_Error%20Handling/#_1","title":"\u6587\u4ef6\u5217\u8868","text":"<ul> <li><code>01_error_handling.md</code> - \u932f\u8aa4\u8655\u7406\u7b56\u7565\u548c\u932f\u8aa4\u985e\u578b\u5b9a\u7fa9</li> </ul>"},{"location":"09_Error%20Handling/#_2","title":"\u8aaa\u660e","text":"<p>\u672c\u7ae0\u7bc0\u5b9a\u7fa9\u4e86\u6240\u6709\u932f\u8aa4\u8655\u7406\u7b56\u7565\uff0c\u5305\u62ec\uff1a</p> <ul> <li>\u932f\u8aa4\u985e\u578b\u5206\u985e</li> <li>\u932f\u8aa4\u8655\u7406\u7b56\u7565</li> <li>\u932f\u8aa4\u986f\u793a\u65b9\u5f0f</li> <li>\u932f\u8aa4\u6062\u5fa9\u6a5f\u5236</li> </ul>"},{"location":"09_Error%20Handling/01_error_handling/","title":"Error Handling","text":""},{"location":"09_Error%20Handling/01_error_handling/#_1","title":"\u932f\u8aa4\u985e\u578b\u5206\u985e","text":""},{"location":"09_Error%20Handling/01_error_handling/#1","title":"1. \u7db2\u8def\u932f\u8aa4","text":"\u932f\u8aa4\u985e\u578b HTTP Status \u8aaa\u660e \u8655\u7406\u65b9\u5f0f Network Error - \u7db2\u8def\u9023\u7dda\u5931\u6557 \u986f\u793a\u300c\u7db2\u8def\u9023\u7dda\u5931\u6557\uff0c\u8acb\u6aa2\u67e5\u7db2\u8def\u8a2d\u5b9a\u300dToast Timeout - \u8acb\u6c42\u8d85\u6642 \u986f\u793a\u300c\u8acb\u6c42\u8d85\u6642\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u300dToast\uff0c\u63d0\u4f9b\u91cd\u8a66\u6309\u9215 Server Error 500+ \u4f3a\u670d\u5668\u932f\u8aa4 \u986f\u793a\u300c\u4f3a\u670d\u5668\u932f\u8aa4\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u300dToast API Response Error - API \u56de\u61c9\u683c\u5f0f\u932f\u8aa4\uff08bizCode \u2260 10000\uff09 \u6839\u64da <code>bizCode</code> \u548c <code>message</code> \u986f\u793a\u5c0d\u61c9\u932f\u8aa4\u8a0a\u606f"},{"location":"09_Error%20Handling/01_error_handling/#2","title":"2. \u5ba2\u6236\u7aef\u932f\u8aa4","text":"\u932f\u8aa4\u985e\u578b HTTP Status \u8aaa\u660e \u8655\u7406\u65b9\u5f0f Bad Request 400 \u8acb\u6c42\u683c\u5f0f\u932f\u8aa4 \u986f\u793a\u300c\u8acb\u6c42\u683c\u5f0f\u932f\u8aa4\u300dToast\uff0c\u8a18\u9304\u932f\u8aa4\u65e5\u8a8c Unauthorized 401 \u672a\u6388\u6b0a \u8df3\u8f49\u5230\u767b\u5165\u9801\u9762 Forbidden 403 \u7121\u6b0a\u9650 \u986f\u793a\u300c\u7121\u6b0a\u9650\u57f7\u884c\u6b64\u64cd\u4f5c\u300dToast Not Found 404 \u8cc7\u6e90\u4e0d\u5b58\u5728 \u986f\u793a\u300c\u8cc7\u6e90\u4e0d\u5b58\u5728\u300dToast Conflict 409 \u8cc7\u6e90\u885d\u7a81 \u986f\u793a\u300c\u64cd\u4f5c\u885d\u7a81\uff0c\u8acb\u91cd\u65b0\u6574\u7406\u5f8c\u518d\u8a66\u300dToast"},{"location":"09_Error%20Handling/01_error_handling/#3","title":"3. \u696d\u52d9\u908f\u8f2f\u932f\u8aa4","text":"\u932f\u8aa4\u985e\u578b \u8aaa\u660e \u8655\u7406\u65b9\u5f0f Validation Error \u8f38\u5165\u9a57\u8b49\u5931\u6557 \u986f\u793a\u5177\u9ad4\u7684\u9a57\u8b49\u932f\u8aa4\u8a0a\u606f Business Rule Error \u696d\u52d9\u898f\u5247\u9055\u53cd \u986f\u793a\u696d\u52d9\u898f\u5247\u932f\u8aa4\u8a0a\u606f Rate Limit \u8acb\u6c42\u983b\u7387\u904e\u9ad8 \u986f\u793a\u300c\u64cd\u4f5c\u904e\u65bc\u983b\u7e41\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u300dToast API BizCode Error API \u56de\u61c9 bizCode \u2260 10000 \u6839\u64da <code>bizCode</code> \u548c <code>message</code> \u986f\u793a\u5c0d\u61c9\u932f\u8aa4\u8a0a\u606f\uff0c\u8a18\u9304\u932f\u8aa4\u65e5\u8a8c"},{"location":"09_Error%20Handling/01_error_handling/#4-websocket","title":"4. WebSocket \u932f\u8aa4","text":"\u932f\u8aa4\u985e\u578b \u8aaa\u660e \u8655\u7406\u65b9\u5f0f Connection Failed WebSocket \u9023\u7dda\u5931\u6557 \u81ea\u52d5\u91cd\u9023\uff0c\u986f\u793a\u300c\u9023\u7dda\u4e2d...\u300d\u72c0\u614b Connection Lost WebSocket \u9023\u7dda\u4e2d\u65b7 \u81ea\u52d5\u91cd\u9023\uff0c\u986f\u793a\u300c\u91cd\u65b0\u9023\u7dda\u4e2d...\u300d\u72c0\u614b Message Parse Error \u8a0a\u606f\u89e3\u6790\u5931\u6557 \u8a18\u9304\u932f\u8aa4\u65e5\u8a8c\uff0c\u5ffd\u7565\u8a72\u8a0a\u606f STOMP Protocol Error STOMP \u5354\u8b70\u932f\u8aa4\uff08CONNECT/SUBSCRIBE \u5931\u6557\uff09 \u8a18\u9304\u932f\u8aa4\u65e5\u8a8c\uff0c\u5617\u8a66\u91cd\u65b0\u5efa\u7acb\u9023\u7dda Subscription Failed \u8a02\u95b1\u804a\u5929\u5ba4\u5931\u6557 \u8a18\u9304\u932f\u8aa4\u65e5\u8a8c\uff0c\u91cd\u8a66\u8a02\u95b1"},{"location":"09_Error%20Handling/01_error_handling/#_2","title":"\u932f\u8aa4\u8655\u7406\u7b56\u7565","text":""},{"location":"09_Error%20Handling/01_error_handling/#repository","title":"Repository \u5c64","text":"<p>\u8077\u8cac\uff1a - \u6355\u7372 Client \u5c64\u7684\u932f\u8aa4 - \u5c07\u6280\u8853\u932f\u8aa4\u8f49\u63db\u70ba Domain \u932f\u8aa4 - \u8655\u7406 API \u56de\u61c9\u4e2d\u7684 <code>bizCode</code> \u932f\u8aa4\uff08\u7576 <code>bizCode \u2260 10000</code> \u6642\uff09 - \u4e0d\u8655\u7406\u696d\u52d9\u908f\u8f2f\u932f\u8aa4</p> <p>\u7bc4\u4f8b\uff1a <pre><code>func getComments(refId: String, mode: SortMode) async throws -&gt; [Comment] {\n    do {\n        let response = try await client.getComments(refId, mode: mode.value)\n\n        // \u6aa2\u67e5 API \u56de\u61c9\u7684 bizCode\n        guard response.bizCode == 10000 else {\n            throw DomainError.apiError(\n                message: response.message ?? \"API \u8acb\u6c42\u5931\u6557\",\n                bizCode: response.bizCode\n            )\n        }\n\n        return response.data.map { Comment(from: $0) }\n    } catch let error as NetworkError {\n        throw DomainError.networkError(error)\n    } catch let error as APIError {\n        throw DomainError.apiError(error)\n    } catch {\n        throw DomainError.unknown(error)\n    }\n}\n</code></pre></p>"},{"location":"09_Error%20Handling/01_error_handling/#usecase","title":"UseCase \u5c64","text":"<p>\u8077\u8cac\uff1a - \u8655\u7406\u696d\u52d9\u908f\u8f2f\u932f\u8aa4 - \u9a57\u8b49\u8f38\u5165\u53c3\u6578 - \u8655\u7406 Domain \u932f\u8aa4\u4e26\u8f49\u63db\u70ba UseCase \u932f\u8aa4</p> <p>\u7bc4\u4f8b\uff1a <pre><code>func execute(input: PublishCommentInput) async throws -&gt; PublishCommentOutput {\n    // \u9a57\u8b49\u8f38\u5165\n    guard !input.content.isEmpty else {\n        throw UseCaseError.validationError(\"\u7559\u8a00\u5167\u5bb9\u4e0d\u80fd\u70ba\u7a7a\")\n    }\n\n    guard input.content.count &lt;= 500 else {\n        throw UseCaseError.validationError(\"\u7559\u8a00\u5167\u5bb9\u4e0d\u80fd\u8d85\u904e 500 \u5b57\")\n    }\n\n    do {\n        let comment = try await repository.publishComment(\n            refId: input.refId,\n            content: input.content,\n            parentId: input.parentId\n        )\n        return PublishCommentOutput(comment: comment)\n    } catch let error as DomainError {\n        throw UseCaseError.fromDomainError(error)\n    }\n}\n</code></pre></p>"},{"location":"09_Error%20Handling/01_error_handling/#feature","title":"Feature \u5c64","text":"<p>\u8077\u8cac\uff1a - \u8655\u7406 UseCase \u932f\u8aa4 - \u66f4\u65b0 State \u4e2d\u7684\u932f\u8aa4\u72c0\u614b - \u89f8\u767c\u932f\u8aa4\u986f\u793a\u908f\u8f2f</p> <p>\u7bc4\u4f8b\uff1a <pre><code>case .publishCommentResponse(.failure(let error)):\n    state.error = error\n    state.isLoading = false\n    // UI \u6703\u6839\u64da state.error \u986f\u793a\u932f\u8aa4\u8a0a\u606f\n</code></pre></p>"},{"location":"09_Error%20Handling/01_error_handling/#view","title":"View \u5c64","text":"<p>\u8077\u8cac\uff1a - \u986f\u793a\u932f\u8aa4\u8a0a\u606f\uff08Toast\u3001Alert \u7b49\uff09 - \u63d0\u4f9b\u932f\u8aa4\u6062\u5fa9\u6a5f\u5236\uff08\u91cd\u8a66\u6309\u9215\u7b49\uff09</p>"},{"location":"09_Error%20Handling/01_error_handling/#_3","title":"\u932f\u8aa4\u986f\u793a\u65b9\u5f0f","text":""},{"location":"09_Error%20Handling/01_error_handling/#toast","title":"Toast \u8a0a\u606f","text":"<p>\u9069\u7528\u65bc\uff1a - \u7db2\u8def\u932f\u8aa4 - \u4f3a\u670d\u5668\u932f\u8aa4 - \u64cd\u4f5c\u5931\u6557</p> <p>\u986f\u793a\u6642\u9593\uff1a3 \u79d2</p>"},{"location":"09_Error%20Handling/01_error_handling/#alert","title":"Alert \u5c0d\u8a71\u6846","text":"<p>\u9069\u7528\u65bc\uff1a - \u9700\u8981\u7528\u6236\u78ba\u8a8d\u7684\u932f\u8aa4 - \u56b4\u91cd\u932f\u8aa4\uff08\u5982\u8cc7\u6599\u907a\u5931\u98a8\u96aa\uff09</p>"},{"location":"09_Error%20Handling/01_error_handling/#inline","title":"Inline \u932f\u8aa4\u8a0a\u606f","text":"<p>\u9069\u7528\u65bc\uff1a - \u8868\u55ae\u9a57\u8b49\u932f\u8aa4 - \u8f38\u5165\u932f\u8aa4</p>"},{"location":"09_Error%20Handling/01_error_handling/#_4","title":"\u932f\u8aa4\u6062\u5fa9\u6a5f\u5236","text":""},{"location":"09_Error%20Handling/01_error_handling/#_5","title":"\u81ea\u52d5\u91cd\u8a66","text":"<p>\u9069\u7528\u65bc\uff1a - \u7db2\u8def\u932f\u8aa4\uff08\u6700\u591a\u91cd\u8a66 3 \u6b21\uff09 - WebSocket \u9023\u7dda\u4e2d\u65b7\uff08\u81ea\u52d5\u91cd\u9023\uff09</p>"},{"location":"09_Error%20Handling/01_error_handling/#_6","title":"\u624b\u52d5\u91cd\u8a66","text":"<p>\u9069\u7528\u65bc\uff1a - \u4f3a\u670d\u5668\u932f\u8aa4 - \u696d\u52d9\u908f\u8f2f\u932f\u8aa4</p> <p>\u63d0\u4f9b\u300c\u91cd\u8a66\u300d\u6309\u9215\uff0c\u7528\u6236\u53ef\u624b\u52d5\u89f8\u767c\u91cd\u8a66\u3002</p>"},{"location":"09_Error%20Handling/01_error_handling/#_7","title":"\u964d\u7d1a\u8655\u7406","text":"<p>\u9069\u7528\u65bc\uff1a - \u975e\u95dc\u9375\u529f\u80fd\u5931\u6557 - \u53ef\u9078\u8cc7\u6599\u8f09\u5165\u5931\u6557</p> <p>\u4f8b\u5982\uff1a\u500b\u4eba\u8cc7\u8a0a\u8f09\u5165\u5931\u6557\u6642\uff0c\u4e0d\u5f71\u97ff\u4e3b\u8981\u529f\u80fd\u3002</p>"},{"location":"09_Error%20Handling/01_error_handling/#_8","title":"\u932f\u8aa4\u65e5\u8a8c","text":""},{"location":"09_Error%20Handling/01_error_handling/#_9","title":"\u8a18\u9304\u6642\u6a5f","text":"<ul> <li>\u6240\u6709\u932f\u8aa4\u90fd\u61c9\u8a18\u9304\u65e5\u8a8c</li> <li>\u5305\u542b\u932f\u8aa4\u985e\u578b\u3001\u932f\u8aa4\u8a0a\u606f\u3001\u5806\u758a\u8ffd\u8e64</li> <li>\u5305\u542b\u7528\u6236\u64cd\u4f5c\u4e0a\u4e0b\u6587</li> </ul>"},{"location":"09_Error%20Handling/01_error_handling/#_10","title":"\u65e5\u8a8c\u7d1a\u5225","text":"<ul> <li>Error\uff1a\u7cfb\u7d71\u932f\u8aa4\u3001\u7db2\u8def\u932f\u8aa4</li> <li>Warning\uff1a\u696d\u52d9\u908f\u8f2f\u932f\u8aa4\u3001\u9a57\u8b49\u932f\u8aa4</li> <li>Info\uff1a\u4e00\u822c\u8cc7\u8a0a\uff08\u53ef\u9078\uff09</li> </ul>"},{"location":"09_Error%20Handling/01_error_handling/#_11","title":"\u7279\u6b8a\u932f\u8aa4\u8655\u7406","text":""},{"location":"09_Error%20Handling/01_error_handling/#_12","title":"\u767b\u5165\u72c0\u614b\u6aa2\u67e5","text":"<p>\u7576 API \u56de\u50b3 401 Unauthorized \u6642\uff1a 1. \u6e05\u9664\u672c\u5730\u767b\u5165\u72c0\u614b 2. \u8df3\u8f49\u5230\u767b\u5165\u9801\u9762 3. \u8a18\u9304\u767b\u5165\u904e\u671f\u4e8b\u4ef6</p>"},{"location":"09_Error%20Handling/01_error_handling/#websocket","title":"WebSocket \u91cd\u9023","text":"<p>\u7576 WebSocket \u9023\u7dda\u4e2d\u65b7\u6642\uff1a 1. \u81ea\u52d5\u91cd\u9023\uff08\u6307\u6578\u9000\u907f\u7b56\u7565\uff09 2. \u986f\u793a\u300c\u91cd\u65b0\u9023\u7dda\u4e2d...\u300d\u72c0\u614b 3. \u91cd\u9023\u6210\u529f\u5f8c\u91cd\u65b0\u767c\u9001 CONNECT \u548c SUBSCRIBE \u8a0a\u606f 4. \u91cd\u9023\u6210\u529f\u5f8c\u540c\u6b65 blocked user \u6e05\u55ae</p>"},{"location":"09_Error%20Handling/01_error_handling/#_13","title":"\u9ed1\u540d\u55ae\u6e05\u7406\u932f\u8aa4","text":"<p>\u7576\u9ed1\u540d\u55ae\u6e05\u7406\u5931\u6557\u6642\uff1a 1. \u8a18\u9304\u932f\u8aa4\u65e5\u8a8c 2. \u4e0d\u5f71\u97ff\u4e3b\u8981\u529f\u80fd 3. \u4e0b\u6b21\u95dc\u9589\u804a\u5929\u5ba4\u6642\u518d\u6b21\u5617\u8a66\u6e05\u7406</p>"},{"location":"10_Test%20Scenarios/","title":"Test Scenarios","text":"<p>\u672c\u76ee\u9304\u5305\u542b\u6240\u6709 UseCase \u7684\u6e2c\u8a66\u5834\u666f\u5b9a\u7fa9\u3002</p>"},{"location":"10_Test%20Scenarios/#_1","title":"\u6587\u4ef6\u5217\u8868","text":"<ul> <li><code>01_test_scenarios.md</code> - \u6240\u6709 UseCase \u7684\u6e2c\u8a66\u5834\u666f\u5b9a\u7fa9</li> </ul>"},{"location":"10_Test%20Scenarios/#_2","title":"\u8aaa\u660e","text":"<p>\u672c\u7ae0\u7bc0\u5b9a\u7fa9\u4e86\u6240\u6709 UseCase \u7684\u6e2c\u8a66\u5834\u666f\uff0c\u5305\u62ec\uff1a</p> <ul> <li>Basic Flow\uff08\u6b63\u5e38\u6210\u529f\u6d41\u7a0b\uff09</li> <li>Branch Flow\uff08\u5206\u652f\u884c\u70ba\uff09</li> <li>Optional Flow\uff08\u53ef\u9078\u6d41\u7a0b\uff09</li> <li>Loop Flow\uff08\u5faa\u74b0\u6d41\u7a0b\uff09</li> <li>Error Flow\uff08\u932f\u8aa4\u6d41\u7a0b\uff09</li> <li>Recover Flow\uff08\u6062\u5fa9\u6d41\u7a0b\uff09</li> <li>Edge Case\uff08\u908a\u754c\u60c5\u6cc1\uff09</li> </ul> <p>\u6e2c\u8a66\u5834\u666f\u7531\u5e8f\u5217\u5716\u4e2d\u7684 alt/opt/loop \u81ea\u52d5\u63a8\u5c0e\u3002</p>"},{"location":"10_Test%20Scenarios/01_test_scenarios/","title":"Test Scenarios","text":""},{"location":"10_Test%20Scenarios/01_test_scenarios/#prematchcomment-usecases","title":"PrematchComment UseCases","text":""},{"location":"10_Test%20Scenarios/01_test_scenarios/#reloadcommentlistusecase","title":"ReloadCommentListUseCase","text":""},{"location":"10_Test%20Scenarios/01_test_scenarios/#basic-flow","title":"Basic Flow","text":"<ul> <li>\u63cf\u8ff0\uff1a\u6b63\u5e38\u8f09\u5165\u7559\u8a00\u5217\u8868</li> <li>\u524d\u7f6e\u689d\u4ef6\uff1a\u7528\u6236\u5df2\u9032\u5165 Prematch Comment Page</li> <li>\u8f38\u5165\uff1a<code>refId: \"match123\"</code>, <code>triggerType: .init</code>, <code>mode: .top</code>, <code>cursor: nil</code></li> <li>\u9810\u671f\u7d50\u679c\uff1a\u6210\u529f\u8f09\u5165\u7559\u8a00\u5217\u8868\uff0c\u56de\u50b3 <code>comments</code> \u548c <code>pagingInfo</code></li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#branch-flow-top-mode","title":"Branch Flow - Top Mode","text":"<ul> <li>\u63cf\u8ff0\uff1a\u8f09\u5165 Top \u6a21\u5f0f\u7684\u7559\u8a00\u5217\u8868</li> <li>\u8f38\u5165\uff1a<code>mode: .top</code></li> <li>\u9810\u671f\u7d50\u679c\uff1a\u8f09\u5165\u6309 Like \u6578\u6392\u5e8f\u7684\u7559\u8a00\u5217\u8868</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#branch-flow-newest-mode","title":"Branch Flow - Newest Mode","text":"<ul> <li>\u63cf\u8ff0\uff1a\u8f09\u5165 Newest \u6a21\u5f0f\u7684\u7559\u8a00\u5217\u8868</li> <li>\u8f38\u5165\uff1a<code>mode: .newest</code></li> <li>\u9810\u671f\u7d50\u679c\uff1a\u8f09\u5165\u6309\u6642\u9593\u6392\u5e8f\u7684\u7559\u8a00\u5217\u8868</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#branch-flow-trigger-type","title":"Branch Flow - Trigger Type","text":"<ul> <li>\u63cf\u8ff0\uff1a\u4e0d\u540c\u89f8\u767c\u65b9\u5f0f\u7684\u8f09\u5165</li> <li>\u8f38\u5165\uff1a<code>triggerType: .init</code> / <code>.refresh</code> / <code>.switch</code></li> <li>\u9810\u671f\u7d50\u679c\uff1a\u6839\u64da triggerType \u57f7\u884c\u5c0d\u61c9\u7684\u8f09\u5165\u908f\u8f2f</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#loop-flow-pagination","title":"Loop Flow - Pagination","text":"<ul> <li>\u63cf\u8ff0\uff1a\u5206\u9801\u8f09\u5165\u66f4\u591a\u7559\u8a00</li> <li>\u8f38\u5165\uff1a<code>cursor: Cursor(value: \"next123\")</code></li> <li>\u9810\u671f\u7d50\u679c\uff1a\u8f09\u5165\u4e0b\u4e00\u9801\u7559\u8a00\uff0c\u56de\u50b3\u65b0\u7684 <code>cursor</code></li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#error-flow-network-error","title":"Error Flow - Network Error","text":"<ul> <li>\u63cf\u8ff0\uff1a\u7db2\u8def\u9023\u7dda\u5931\u6557</li> <li>\u9810\u671f\u7d50\u679c\uff1a\u62cb\u51fa <code>NetworkError</code>\uff0c\u986f\u793a\u932f\u8aa4 Toast</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#error-flow-server-error","title":"Error Flow - Server Error","text":"<ul> <li>\u63cf\u8ff0\uff1a\u4f3a\u670d\u5668\u56de\u50b3 500 \u932f\u8aa4</li> <li>\u9810\u671f\u7d50\u679c\uff1a\u62cb\u51fa <code>APIError.serverError</code>\uff0c\u986f\u793a\u932f\u8aa4 Toast</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#edge-case-empty-list","title":"Edge Case - Empty List","text":"<ul> <li>\u63cf\u8ff0\uff1a\u7559\u8a00\u5217\u8868\u70ba\u7a7a</li> <li>\u9810\u671f\u7d50\u679c\uff1a\u56de\u50b3\u7a7a\u9663\u5217 <code>[]</code>\uff0c\u986f\u793a\u7a7a\u72c0\u614b UI</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#edge-case-invalid-cursor","title":"Edge Case - Invalid Cursor","text":"<ul> <li>\u63cf\u8ff0\uff1a\u7121\u6548\u7684 cursor</li> <li>\u8f38\u5165\uff1a<code>cursor: Cursor(value: \"invalid\")</code></li> <li>\u9810\u671f\u7d50\u679c\uff1a\u56de\u50b3\u7a7a\u9663\u5217\u6216\u932f\u8aa4</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#publishcommentusecase","title":"PublishCommentUseCase","text":""},{"location":"10_Test%20Scenarios/01_test_scenarios/#basic-flow-publish-comment","title":"Basic Flow - Publish Comment","text":"<ul> <li>\u63cf\u8ff0\uff1a\u6210\u529f\u767c\u9001\u7559\u8a00</li> <li>\u524d\u7f6e\u689d\u4ef6\uff1a\u7528\u6236\u5df2\u767b\u5165\u4e14\u6709 nickname</li> <li>\u8f38\u5165\uff1a<code>refId: \"match123\"</code>, <code>content: \"Hello\"</code>, <code>parentId: nil</code></li> <li>\u9810\u671f\u7d50\u679c\uff1a\u6210\u529f\u767c\u9001\u7559\u8a00\uff0c\u56de\u50b3\u65b0\u7684 <code>Comment</code></li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#branch-flow-publish-reply","title":"Branch Flow - Publish Reply","text":"<ul> <li>\u63cf\u8ff0\uff1a\u6210\u529f\u767c\u9001\u56de\u8986</li> <li>\u8f38\u5165\uff1a<code>parentId: \"comment123\"</code></li> <li>\u9810\u671f\u7d50\u679c\uff1a\u6210\u529f\u767c\u9001\u56de\u8986\uff0c\u56de\u50b3\u65b0\u7684 <code>Comment</code>\uff08parentId \u6709\u503c\uff09</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#optional-flow-no-nickname","title":"Optional Flow - No Nickname","text":"<ul> <li>\u63cf\u8ff0\uff1a\u7528\u6236\u6c92\u6709 nickname\uff0c\u9700\u8981\u5efa\u7acb</li> <li>\u524d\u7f6e\u689d\u4ef6\uff1a\u7528\u6236\u5df2\u767b\u5165\u4f46\u7121 nickname</li> <li>\u9810\u671f\u7d50\u679c\uff1a\u8abf\u7528 FComSharedFlow Package \u5efa\u7acb nickname\uff0c\u5efa\u7acb\u6210\u529f\u5f8c\u767c\u9001\u7559\u8a00</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#optional-flow-not-logged-in","title":"Optional Flow - Not Logged In","text":"<ul> <li>\u63cf\u8ff0\uff1a\u7528\u6236\u672a\u767b\u5165</li> <li>\u524d\u7f6e\u689d\u4ef6\uff1a\u7528\u6236\u672a\u767b\u5165</li> <li>\u9810\u671f\u7d50\u679c\uff1a\u8df3\u8f49\u5230\u767b\u5165\u9801\u9762\uff0c\u767b\u5165\u6210\u529f\u5f8c\u56de\u5230\u539f\u9801\u9762</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#error-flow-validation-error","title":"Error Flow - Validation Error","text":"<ul> <li>\u63cf\u8ff0\uff1a\u7559\u8a00\u5167\u5bb9\u70ba\u7a7a</li> <li>\u8f38\u5165\uff1a<code>content: \"\"</code></li> <li>\u9810\u671f\u7d50\u679c\uff1a\u62cb\u51fa <code>ValidationError</code>\uff0c\u986f\u793a\u300c\u7559\u8a00\u5167\u5bb9\u4e0d\u80fd\u70ba\u7a7a\u300d</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#error-flow-content-too-long","title":"Error Flow - Content Too Long","text":"<ul> <li>\u63cf\u8ff0\uff1a\u7559\u8a00\u5167\u5bb9\u8d85\u904e\u9577\u5ea6\u9650\u5236</li> <li>\u8f38\u5165\uff1a<code>content: String(repeating: \"a\", count: 501)</code></li> <li>\u9810\u671f\u7d50\u679c\uff1a\u62cb\u51fa <code>ValidationError</code>\uff0c\u986f\u793a\u300c\u7559\u8a00\u5167\u5bb9\u4e0d\u80fd\u8d85\u904e 500 \u5b57\u300d</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#error-flow-api-error","title":"Error Flow - API Error","text":"<ul> <li>\u63cf\u8ff0\uff1aAPI \u56de\u50b3\u932f\u8aa4</li> <li>\u9810\u671f\u7d50\u679c\uff1a\u62cb\u51fa <code>APIError</code>\uff0c\u986f\u793a\u932f\u8aa4 Toast</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#togglelikeusecase","title":"ToggleLikeUseCase","text":""},{"location":"10_Test%20Scenarios/01_test_scenarios/#basic-flow-like-comment","title":"Basic Flow - Like Comment","text":"<ul> <li>\u63cf\u8ff0\uff1a\u6210\u529f\u9ede\u8b9a\u7559\u8a00</li> <li>\u524d\u7f6e\u689d\u4ef6\uff1a\u7528\u6236\u5df2\u767b\u5165</li> <li>\u8f38\u5165\uff1a<code>commentId: \"comment123\"</code></li> <li>\u9810\u671f\u7d50\u679c\uff1a\u6210\u529f\u9ede\u8b9a\uff0c\u56de\u50b3\u66f4\u65b0\u5f8c\u7684 <code>Comment</code>\uff08likeCount +1\uff09</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#basic-flow-unlike-comment","title":"Basic Flow - Unlike Comment","text":"<ul> <li>\u63cf\u8ff0\uff1a\u6210\u529f\u53d6\u6d88\u9ede\u8b9a</li> <li>\u524d\u7f6e\u689d\u4ef6\uff1a\u7528\u6236\u5df2\u767b\u5165\u4e14\u5df2\u9ede\u8b9a</li> <li>\u9810\u671f\u7d50\u679c\uff1a\u6210\u529f\u53d6\u6d88\u9ede\u8b9a\uff0c\u56de\u50b3\u66f4\u65b0\u5f8c\u7684 <code>Comment</code>\uff08likeCount -1\uff09</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#optional-flow-not-logged-in_1","title":"Optional Flow - Not Logged In","text":"<ul> <li>\u63cf\u8ff0\uff1a\u7528\u6236\u672a\u767b\u5165</li> <li>\u9810\u671f\u7d50\u679c\uff1a\u8df3\u8f49\u5230\u767b\u5165\u9801\u9762</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#error-flow-api-error_1","title":"Error Flow - API Error","text":"<ul> <li>\u63cf\u8ff0\uff1aAPI \u56de\u50b3\u932f\u8aa4</li> <li>\u9810\u671f\u7d50\u679c\uff1a\u62cb\u51fa <code>APIError</code>\uff0c\u986f\u793a\u932f\u8aa4 Toast</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#edge-case-optimistic-ui","title":"Edge Case - Optimistic UI","text":"<ul> <li>\u63cf\u8ff0\uff1aOptimistic UI \u66f4\u65b0</li> <li>\u9810\u671f\u7d50\u679c\uff1aUI \u7acb\u5373\u66f4\u65b0 Like \u6578\uff0cAPI \u8acb\u6c42\u5728\u80cc\u666f\u57f7\u884c</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#loadrepliesusecase","title":"LoadRepliesUseCase","text":""},{"location":"10_Test%20Scenarios/01_test_scenarios/#basic-flow_1","title":"Basic Flow","text":"<ul> <li>\u63cf\u8ff0\uff1a\u6210\u529f\u8f09\u5165\u56de\u8986\u5217\u8868</li> <li>\u8f38\u5165\uff1a<code>commentId: \"comment123\"</code>, <code>cursor: nil</code></li> <li>\u9810\u671f\u7d50\u679c\uff1a\u6210\u529f\u8f09\u5165\u56de\u8986\u5217\u8868\uff08\u6700\u591a 5 \u7b46\uff09\uff0c\u56de\u50b3 <code>replies</code> \u548c <code>pagingInfo</code></li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#loop-flow-load-more-replies","title":"Loop Flow - Load More Replies","text":"<ul> <li>\u63cf\u8ff0\uff1a\u8f09\u5165\u66f4\u591a\u56de\u8986</li> <li>\u8f38\u5165\uff1a<code>cursor: Cursor(value: \"next123\")</code></li> <li>\u9810\u671f\u7d50\u679c\uff1a\u8f09\u5165\u4e0b\u4e00\u6279\u56de\u8986\uff08\u6700\u591a 5 \u7b46\uff09</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#edge-case-no-more-replies","title":"Edge Case - No More Replies","text":"<ul> <li>\u63cf\u8ff0\uff1a\u6c92\u6709\u66f4\u591a\u56de\u8986</li> <li>\u9810\u671f\u7d50\u679c\uff1a\u56de\u50b3\u7a7a\u9663\u5217\uff0c<code>pagingInfo.hasMore = false</code></li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#edge-case-less-than-5-replies","title":"Edge Case - Less Than 5 Replies","text":"<ul> <li>\u63cf\u8ff0\uff1a\u56de\u8986\u6578\u91cf\u5c11\u65bc 5 \u7b46</li> <li>\u9810\u671f\u7d50\u679c\uff1a\u56de\u50b3\u6240\u6709\u56de\u8986\uff0c<code>pagingInfo.hasMore = false</code></li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#navigatetoprofileusecase","title":"NavigateToProfileUseCase","text":""},{"location":"10_Test%20Scenarios/01_test_scenarios/#basic-flow_2","title":"Basic Flow","text":"<ul> <li>\u63cf\u8ff0\uff1a\u6210\u529f\u8df3\u8f49\u5230\u500b\u4eba\u4e3b\u9801</li> <li>\u8f38\u5165\uff1a<code>userId: \"user123\"</code></li> <li>\u9810\u671f\u7d50\u679c\uff1a\u6210\u529f\u8df3\u8f49\u5230\u8a72\u7528\u6236\u7684\u500b\u4eba\u4e3b\u9801</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#error-flow-navigation-failed","title":"Error Flow - Navigation Failed","text":"<ul> <li>\u63cf\u8ff0\uff1a\u8def\u7531\u8df3\u8f49\u5931\u6557</li> <li>\u9810\u671f\u7d50\u679c\uff1a\u8a18\u9304\u932f\u8aa4\u65e5\u8a8c\uff0c\u4e0d\u5f71\u97ff\u4e3b\u8981\u529f\u80fd</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#livechat-usecases","title":"LiveChat UseCases","text":""},{"location":"10_Test%20Scenarios/01_test_scenarios/#sendchatmessageusecase","title":"SendChatMessageUseCase","text":""},{"location":"10_Test%20Scenarios/01_test_scenarios/#basic-flow-with-nickname","title":"Basic Flow - With Nickname","text":"<ul> <li>\u63cf\u8ff0\uff1a\u6210\u529f\u767c\u9001\u804a\u5929\u8a0a\u606f\uff08\u6709 nickname\uff09</li> <li>\u524d\u7f6e\u689d\u4ef6\uff1a\u7528\u6236\u5df2\u767b\u5165\u4e14\u6709 nickname</li> <li>\u8f38\u5165\uff1a<code>chatroomId: \"room123\"</code>, <code>content: \"Hello\"</code>, <code>messageType: .text</code></li> <li>\u9810\u671f\u7d50\u679c\uff1a\u6210\u529f\u767c\u9001\u8a0a\u606f\uff0c\u56de\u50b3\u65b0\u7684 <code>Message</code></li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#branch-flow-without-nickname","title":"Branch Flow - Without Nickname","text":"<ul> <li>\u63cf\u8ff0\uff1a\u6210\u529f\u767c\u9001\u804a\u5929\u8a0a\u606f\uff08\u7121 nickname\uff0c\u9700\u5efa\u7acb\uff09</li> <li>\u524d\u7f6e\u689d\u4ef6\uff1a\u7528\u6236\u5df2\u767b\u5165\u4f46\u7121 nickname</li> <li>\u9810\u671f\u7d50\u679c\uff1a\u8abf\u7528 FComSharedFlow Package \u5efa\u7acb nickname\uff0c\u5efa\u7acb\u6210\u529f\u5f8c\u767c\u9001\u8a0a\u606f</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#optional-flow-not-logged-in_2","title":"Optional Flow - Not Logged In","text":"<ul> <li>\u63cf\u8ff0\uff1a\u7528\u6236\u672a\u767b\u5165</li> <li>\u9810\u671f\u7d50\u679c\uff1a\u8df3\u8f49\u5230\u767b\u5165\u9801\u9762</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#error-flow-validation-error_1","title":"Error Flow - Validation Error","text":"<ul> <li>\u63cf\u8ff0\uff1a\u8a0a\u606f\u5167\u5bb9\u70ba\u7a7a</li> <li>\u8f38\u5165\uff1a<code>content: \"\"</code></li> <li>\u9810\u671f\u7d50\u679c\uff1a\u62cb\u51fa <code>ValidationError</code></li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#error-flow-api-error_2","title":"Error Flow - API Error","text":"<ul> <li>\u63cf\u8ff0\uff1aAPI \u56de\u50b3\u932f\u8aa4</li> <li>\u9810\u671f\u7d50\u679c\uff1a\u62cb\u51fa <code>APIError</code>\uff0c\u986f\u793a\u932f\u8aa4 Toast</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#joinchatroomusecase","title":"JoinChatroomUseCase","text":""},{"location":"10_Test%20Scenarios/01_test_scenarios/#basic-flow_3","title":"Basic Flow","text":"<ul> <li>\u63cf\u8ff0\uff1a\u6210\u529f\u52a0\u5165\u804a\u5929\u5ba4\u4e26\u8f09\u5165\u6b77\u53f2\u8a0a\u606f</li> <li>\u8f38\u5165\uff1a<code>refId: \"match123\"</code></li> <li>\u9810\u671f\u7d50\u679c\uff1a\u6210\u529f\u52a0\u5165\u804a\u5929\u5ba4\uff0c\u56de\u50b3 <code>chatroomInfo</code> \u548c <code>messages</code></li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#branch-flow-merge-messages","title":"Branch Flow - Merge Messages","text":"<ul> <li>\u63cf\u8ff0\uff1a\u5408\u4f75\u6b77\u53f2\u8a0a\u606f\u8207 WebSocket \u8a0a\u606f</li> <li>\u9810\u671f\u7d50\u679c\uff1a\u6b77\u53f2\u8a0a\u606f\u8207 WebSocket \u8a0a\u606f\u5408\u4f75\uff0c\u4f9d <code>messageNo</code> \u53bb\u91cd</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#error-flow-get-chatroom-info-failed","title":"Error Flow - Get Chatroom Info Failed","text":"<ul> <li>\u63cf\u8ff0\uff1a\u53d6\u5f97\u804a\u5929\u5ba4\u8cc7\u8a0a\u5931\u6557</li> <li>\u9810\u671f\u7d50\u679c\uff1a\u62cb\u51fa\u932f\u8aa4\uff0c\u96b1\u85cf Live Chat Bar</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#error-flow-get-chatroom-info-failed_1","title":"Error Flow - Get Chatroom Info Failed","text":"<ul> <li>\u63cf\u8ff0\uff1a\u53d6\u5f97\u804a\u5929\u5ba4\u8cc7\u8a0a\u5931\u6557\uff08\u5728\u958b\u555f\u804a\u5929\u8996\u7a97\u524d\uff09</li> <li>\u9810\u671f\u7d50\u679c\uff1a\u62cb\u51fa <code>APIError</code>\uff0c\u96b1\u85cf Live Chat Bar</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#edge-case-no-historical-messages","title":"Edge Case - No Historical Messages","text":"<ul> <li>\u63cf\u8ff0\uff1a\u6c92\u6709\u6b77\u53f2\u8a0a\u606f</li> <li>\u9810\u671f\u7d50\u679c\uff1a\u56de\u50b3\u7a7a\u9663\u5217 <code>[]</code></li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#edge-case-websocket-not-connected","title":"Edge Case - WebSocket Not Connected","text":"<ul> <li>\u63cf\u8ff0\uff1aWebSocket \u672a\u9023\u7dda</li> <li>\u9810\u671f\u7d50\u679c\uff1a\u5148\u5efa\u7acb WebSocket \u9023\u7dda\uff0c\u518d\u8f09\u5165\u6b77\u53f2\u8a0a\u606f</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#leavechatroomusecase","title":"LeaveChatroomUseCase","text":""},{"location":"10_Test%20Scenarios/01_test_scenarios/#basic-flow_4","title":"Basic Flow","text":"<ul> <li>\u63cf\u8ff0\uff1a\u6210\u529f\u96e2\u958b\u804a\u5929\u5ba4</li> <li>\u8f38\u5165\uff1a<code>chatroomId: \"room123\"</code></li> <li>\u9810\u671f\u7d50\u679c\uff1a\u6210\u529f\u96e2\u958b\u804a\u5929\u5ba4\uff0c\u6e05\u9664\u5feb\u53d6\u7684\u8a0a\u606f</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#branch-flow-clean-blacklist","title":"Branch Flow - Clean Blacklist","text":"<ul> <li>\u63cf\u8ff0\uff1a\u57f7\u884c\u9ed1\u540d\u55ae\u6e05\u7406</li> <li>\u9810\u671f\u7d50\u679c\uff1a\u6aa2\u67e5\u9ed1\u540d\u55ae\u7d00\u9304\uff0c\u8d85\u904e 4 \u5c0f\u6642\u7684\u7d00\u9304\u81ea\u52d5\u79fb\u9664</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#edge-case-blacklist-cleanup","title":"Edge Case - Blacklist Cleanup","text":"<ul> <li>\u63cf\u8ff0\uff1a\u9ed1\u540d\u55ae\u6e05\u7406\u908f\u8f2f</li> <li>\u6e2c\u8a66\u5834\u666f\uff1a</li> <li>\u9ed1\u540d\u55ae\u7d00\u9304\u672a\u8d85\u904e 4 \u5c0f\u6642\uff1a\u4fdd\u7559</li> <li>\u9ed1\u540d\u55ae\u7d00\u9304\u8d85\u904e 4 \u5c0f\u6642\uff1a\u79fb\u9664</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#error-flow-leave-failed","title":"Error Flow - Leave Failed","text":"<ul> <li>\u63cf\u8ff0\uff1a\u96e2\u958b\u804a\u5929\u5ba4\u5931\u6557</li> <li>\u9810\u671f\u7d50\u679c\uff1a\u8a18\u9304\u932f\u8aa4\u65e5\u8a8c\uff0c\u4ecd\u6e05\u9664\u672c\u5730\u5feb\u53d6</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#blockuserusecase","title":"BlockUserUseCase","text":""},{"location":"10_Test%20Scenarios/01_test_scenarios/#basic-flow_5","title":"Basic Flow","text":"<ul> <li>\u63cf\u8ff0\uff1a\u6210\u529f\u5c01\u9396\u7528\u6236</li> <li>\u8f38\u5165\uff1a<code>userId: \"user123\"</code>, <code>eventId: \"event123\"</code>, <code>timestamp: Date()</code></li> <li>\u9810\u671f\u7d50\u679c\uff1a\u6210\u529f\u5c07\u7528\u6236\u52a0\u5165\u9ed1\u540d\u55ae DB</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#branch-flow-websocket-reconnect","title":"Branch Flow - WebSocket Reconnect","text":"<ul> <li>\u63cf\u8ff0\uff1aWebSocket \u91cd\u9023\u5f8c\u540c\u6b65 blocked user \u6e05\u55ae</li> <li>\u9810\u671f\u7d50\u679c\uff1aWebSocket \u91cd\u9023\u6642\u540c\u6b65\u9ed1\u540d\u55ae\u5230\u4f3a\u670d\u5668</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#error-flow-block-failed","title":"Error Flow - Block Failed","text":"<ul> <li>\u63cf\u8ff0\uff1a\u5c01\u9396\u7528\u6236\u5931\u6557</li> <li>\u9810\u671f\u7d50\u679c\uff1a\u62cb\u51fa\u932f\u8aa4\uff0c\u986f\u793a\u932f\u8aa4 Toast</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#websocket","title":"WebSocket \u6e2c\u8a66\u5834\u666f","text":""},{"location":"10_Test%20Scenarios/01_test_scenarios/#websocket-connection","title":"WebSocket Connection","text":""},{"location":"10_Test%20Scenarios/01_test_scenarios/#basic-flow-connect","title":"Basic Flow - Connect","text":"<ul> <li>\u63cf\u8ff0\uff1a\u6210\u529f\u5efa\u7acb WebSocket \u9023\u7dda</li> <li>\u9810\u671f\u7d50\u679c\uff1aWebSocket \u9023\u7dda\u6210\u529f\uff0c<code>isWebSocketConnected = true</code></li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#error-flow-connection-failed","title":"Error Flow - Connection Failed","text":"<ul> <li>\u63cf\u8ff0\uff1aWebSocket \u9023\u7dda\u5931\u6557</li> <li>\u9810\u671f\u7d50\u679c\uff1a\u81ea\u52d5\u91cd\u9023\uff08\u6307\u6578\u9000\u907f\u7b56\u7565\uff09</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#recover-flow-reconnect","title":"Recover Flow - Reconnect","text":"<ul> <li>\u63cf\u8ff0\uff1aWebSocket \u9023\u7dda\u4e2d\u65b7\u5f8c\u91cd\u9023</li> <li>\u9810\u671f\u7d50\u679c\uff1a\u81ea\u52d5\u91cd\u9023\u6210\u529f\uff0c\u540c\u6b65 blocked user \u6e05\u55ae</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#edge-case-connection-lost","title":"Edge Case - Connection Lost","text":"<ul> <li>\u63cf\u8ff0\uff1aWebSocket \u9023\u7dda\u4e2d\u65b7</li> <li>\u9810\u671f\u7d50\u679c\uff1a\u986f\u793a\u300c\u91cd\u65b0\u9023\u7dda\u4e2d...\u300d\u72c0\u614b\uff0c\u81ea\u52d5\u91cd\u9023</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#websocket-message","title":"WebSocket Message","text":""},{"location":"10_Test%20Scenarios/01_test_scenarios/#basic-flow-receive-message","title":"Basic Flow - Receive Message","text":"<ul> <li>\u63cf\u8ff0\uff1a\u6210\u529f\u63a5\u6536 WebSocket \u8a0a\u606f</li> <li>\u9810\u671f\u7d50\u679c\uff1a\u89e3\u6790\u8a0a\u606f\u70ba <code>Message</code>\uff0c\u66f4\u65b0\u5230 State</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#error-flow-message-parse-error","title":"Error Flow - Message Parse Error","text":"<ul> <li>\u63cf\u8ff0\uff1a\u8a0a\u606f\u89e3\u6790\u5931\u6557</li> <li>\u9810\u671f\u7d50\u679c\uff1a\u8a18\u9304\u932f\u8aa4\u65e5\u8a8c\uff0c\u5ffd\u7565\u8a72\u8a0a\u606f</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#edge-case-duplicate-message","title":"Edge Case - Duplicate Message","text":"<ul> <li>\u63cf\u8ff0\uff1a\u6536\u5230\u91cd\u8907\u8a0a\u606f\uff08\u76f8\u540c\u7684 messageNo\uff09</li> <li>\u9810\u671f\u7d50\u679c\uff1a\u53bb\u91cd\uff0c\u4e0d\u91cd\u8907\u986f\u793a</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#_1","title":"\u6e2c\u8a66\u8986\u84cb\u7387\u8981\u6c42","text":""},{"location":"10_Test%20Scenarios/01_test_scenarios/#usecase","title":"UseCase \u6e2c\u8a66\u8986\u84cb\u7387","text":"<ul> <li>\u57fa\u672c\u8981\u6c42\uff1a\u2265 80%</li> <li>\u95dc\u9375 UseCase\uff1a\u2265 90%</li> <li>PublishCommentUseCase</li> <li>SendChatMessageUseCase</li> <li>JoinChatroomUseCase</li> </ul>"},{"location":"10_Test%20Scenarios/01_test_scenarios/#_2","title":"\u6e2c\u8a66\u985e\u578b\u8981\u6c42","text":"<p>\u6bcf\u500b UseCase \u5fc5\u9808\u5305\u542b\uff1a - \u2705 Basic Flow \u6e2c\u8a66 - \u2705 Error Flow \u6e2c\u8a66 - \u2705 Edge Case \u6e2c\u8a66\uff08\u81f3\u5c11 1 \u500b\uff09</p> <p>\u95dc\u9375 UseCase \u9084\u9700\u5305\u542b\uff1a - \u2705 Branch Flow \u6e2c\u8a66 - \u2705 Optional Flow \u6e2c\u8a66 - \u2705 Recover Flow \u6e2c\u8a66</p>"},{"location":"11_Risks%20%26%20Questions/","title":"Risks &amp; Questions","text":"<p>\u672c\u76ee\u9304\u5305\u542b\u5c08\u6848\u98a8\u96aa\u548c\u5f85\u78ba\u8a8d\u554f\u984c\u3002</p>"},{"location":"11_Risks%20%26%20Questions/#_1","title":"\u6587\u4ef6\u5217\u8868","text":"<ul> <li><code>01_risks_questions.md</code> - \u5c08\u6848\u98a8\u96aa\u548c\u5f85\u78ba\u8a8d\u554f\u984c\u6e05\u55ae</li> </ul>"},{"location":"11_Risks%20%26%20Questions/#_2","title":"\u8aaa\u660e","text":"<p>\u672c\u7ae0\u7bc0\u8a18\u9304\u4e86\uff1a</p> <ul> <li>\u6280\u8853\u98a8\u96aa</li> <li>\u696d\u52d9\u98a8\u96aa</li> <li>\u5f85\u78ba\u8a8d\u554f\u984c</li> <li>\u4f9d\u8cf4\u98a8\u96aa</li> <li>\u6642\u7a0b\u98a8\u96aa</li> </ul>"},{"location":"11_Risks%20%26%20Questions/01_risks_questions/","title":"Risks &amp; Questions","text":""},{"location":"11_Risks%20%26%20Questions/01_risks_questions/#_1","title":"\u6280\u8853\u98a8\u96aa","text":""},{"location":"11_Risks%20%26%20Questions/01_risks_questions/#1-websocket","title":"1. WebSocket \u9023\u7dda\u7a69\u5b9a\u6027","text":"<p>\u98a8\u96aa\u7b49\u7d1a\uff1a\u4e2d</p> <p>\u63cf\u8ff0\uff1a - WebSocket \u9023\u7dda\u53ef\u80fd\u56e0\u7db2\u8def\u4e0d\u7a69\u5b9a\u800c\u4e2d\u65b7 - \u9700\u8981\u5be6\u4f5c\u5b8c\u5584\u7684\u91cd\u9023\u6a5f\u5236</p> <p>\u5f71\u97ff\uff1a - \u7528\u6236\u53ef\u80fd\u7121\u6cd5\u5373\u6642\u63a5\u6536\u804a\u5929\u8a0a\u606f - \u5f71\u97ff\u7528\u6236\u9ad4\u9a57</p> <p>\u7de9\u89e3\u63aa\u65bd\uff1a - \u5be6\u4f5c\u6307\u6578\u9000\u907f\u91cd\u9023\u7b56\u7565 - \u5be6\u4f5c\u5fc3\u8df3\u6a5f\u5236\u6aa2\u6e2c\u9023\u7dda\u72c0\u614b - \u63d0\u4f9b\u96e2\u7dda\u72c0\u614b\u63d0\u793a</p>"},{"location":"11_Risks%20%26%20Questions/01_risks_questions/#2","title":"2. \u9ed1\u540d\u55ae\u6e05\u7406\u908f\u8f2f","text":"<p>\u98a8\u96aa\u7b49\u7d1a\uff1a\u4f4e</p> <p>\u63cf\u8ff0\uff1a - \u9ed1\u540d\u55ae 4 \u5c0f\u6642\u81ea\u52d5\u6e05\u7406\u908f\u8f2f\u9700\u8981\u5728\u7528\u6236\u95dc\u9589\u804a\u5929\u5ba4\u6642\u57f7\u884c - \u5982\u679c\u7528\u6236\u9577\u6642\u9593\u4e0d\u95dc\u9589\u804a\u5929\u5ba4\uff0c\u9ed1\u540d\u55ae\u53ef\u80fd\u7d2f\u7a4d\u904e\u591a</p> <p>\u5f71\u97ff\uff1a - \u53ef\u80fd\u5f71\u97ff\u6548\u80fd - \u9ed1\u540d\u55ae\u8cc7\u6599\u53ef\u80fd\u904e\u671f</p> <p>\u7de9\u89e3\u63aa\u65bd\uff1a - \u5be6\u4f5c\u5b9a\u671f\u6e05\u7406\u6a5f\u5236\uff08\u5373\u4f7f\u804a\u5929\u5ba4\u672a\u95dc\u9589\uff09 - \u9650\u5236\u9ed1\u540d\u55ae\u6700\u5927\u6578\u91cf</p>"},{"location":"11_Risks%20%26%20Questions/01_risks_questions/#3-websocket","title":"3. \u6b77\u53f2\u8a0a\u606f\u8207 WebSocket \u8a0a\u606f\u5408\u4f75","text":"<p>\u98a8\u96aa\u7b49\u7d1a\uff1a\u4e2d</p> <p>\u63cf\u8ff0\uff1a - \u9700\u8981\u5c07\u6b77\u53f2\u8a0a\u606f\u8207 WebSocket \u8a0a\u606f\u5408\u4f75\u4e26\u53bb\u91cd - \u5982\u679c\u8a0a\u606f\u9806\u5e8f\u4e0d\u6b63\u78ba\uff0c\u53ef\u80fd\u5c0e\u81f4\u986f\u793a\u932f\u8aa4</p> <p>\u5f71\u97ff\uff1a - \u8a0a\u606f\u986f\u793a\u9806\u5e8f\u53ef\u80fd\u932f\u8aa4 - \u53ef\u80fd\u51fa\u73fe\u91cd\u8907\u8a0a\u606f</p> <p>\u7de9\u89e3\u63aa\u65bd\uff1a - \u4f7f\u7528 <code>messageNo</code> \u9032\u884c\u6392\u5e8f\u548c\u53bb\u91cd - \u5be6\u4f5c\u5b8c\u5584\u7684\u5408\u4f75\u908f\u8f2f\u6e2c\u8a66</p>"},{"location":"11_Risks%20%26%20Questions/01_risks_questions/#_2","title":"\u696d\u52d9\u98a8\u96aa","text":""},{"location":"11_Risks%20%26%20Questions/01_risks_questions/#1-api","title":"1. \u500b\u4eba\u8cc7\u8a0a API \u5f85\u5b9a","text":"<p>\u98a8\u96aa\u7b49\u7d1a\uff1a\u9ad8</p> <p>\u63cf\u8ff0\uff1a - \u500b\u4eba\u8cc7\u8a0a API\uff08<code>GET /{TBD \u500b\u4eba\u8cc7\u8a0a API}</code>\uff09\u76ee\u524d\u70ba\u5f85\u5b9a\u72c0\u614b - \u9700\u8981\u8207\u5f8c\u7aef\u5718\u968a\u78ba\u8a8d\u5be6\u969b API</p> <p>\u5f71\u97ff\uff1a - \u53ef\u80fd\u5f71\u97ff\u958b\u767c\u6642\u7a0b - \u9700\u8981\u8abf\u6574\u5be6\u4f5c\u65b9\u5f0f</p> <p>\u7de9\u89e3\u63aa\u65bd\uff1a - \u76e1\u5feb\u8207\u5f8c\u7aef\u5718\u968a\u78ba\u8a8d API \u898f\u683c - \u5148\u4f7f\u7528 Mock API \u9032\u884c\u958b\u767c</p>"},{"location":"11_Risks%20%26%20Questions/01_risks_questions/#2-package","title":"2. \u5916\u90e8 Package \u4f9d\u8cf4","text":"<p>\u98a8\u96aa\u7b49\u7d1a\uff1a\u4e2d</p> <p>\u63cf\u8ff0\uff1a - \u4f9d\u8cf4\u591a\u500b\u5916\u90e8 Package\uff08PersonalPage\u3001FComSharedFlow\u3001FactsCenter\uff09 - \u5916\u90e8 Package \u7684\u8b8a\u66f4\u53ef\u80fd\u5f71\u97ff\u672c\u529f\u80fd</p> <p>\u5f71\u97ff\uff1a - \u5916\u90e8 Package \u66f4\u65b0\u53ef\u80fd\u5c0e\u81f4\u529f\u80fd\u7570\u5e38 - \u9700\u8981\u5354\u8abf\u591a\u500b\u5718\u968a</p> <p>\u7de9\u89e3\u63aa\u65bd\uff1a - \u4f7f\u7528 Adapter Pattern \u89e3\u8026 - \u5b9a\u7fa9\u6e05\u6670\u7684 Protocol \u4ecb\u9762 - \u5b9a\u671f\u8207\u76f8\u95dc\u5718\u968a\u6e9d\u901a</p>"},{"location":"11_Risks%20%26%20Questions/01_risks_questions/#_3","title":"\u5f85\u78ba\u8a8d\u554f\u984c","text":""},{"location":"11_Risks%20%26%20Questions/01_risks_questions/#1-api_1","title":"1. \u500b\u4eba\u8cc7\u8a0a API \u898f\u683c","text":"<p>\u554f\u984c\uff1a\u500b\u4eba\u8cc7\u8a0a API \u7684\u5be6\u969b endpoint \u548c response \u683c\u5f0f\u70ba\u4f55\uff1f</p> <p>\u72c0\u614b\uff1a\u5f85\u78ba\u8a8d</p> <p>\u8ca0\u8cac\u4eba\uff1a\u9700\u8207 Eason \u6216 Han \u78ba\u8a8d</p> <p>\u5f71\u97ff\uff1a\u5f71\u97ff <code>getUserInfo()</code> \u65b9\u6cd5\u7684\u5be6\u4f5c</p>"},{"location":"11_Risks%20%26%20Questions/01_risks_questions/#2-event-status","title":"2. Event Status \u901a\u77e5\u6a5f\u5236","text":"<p>\u554f\u984c\uff1aFactsCenter Package \u7684 Event Status \u901a\u77e5\u6a5f\u5236\u662f\u5426\u7a69\u5b9a\uff1f</p> <p>\u72c0\u614b\uff1a\u5f85\u78ba\u8a8d</p> <p>\u8ca0\u8cac\u4eba\uff1a\u9700\u8207 FactsCenter Package \u5718\u968a\u78ba\u8a8d</p> <p>\u5f71\u97ff\uff1a\u5f71\u97ff Prematch Comment Page \u7684\u81ea\u52d5\u95dc\u9589\u908f\u8f2f</p>"},{"location":"11_Risks%20%26%20Questions/01_risks_questions/#3-nickname","title":"3. Nickname \u5efa\u7acb\u6d41\u7a0b","text":"<p>\u554f\u984c\uff1aFComSharedFlow Package \u7684 Nickname \u5efa\u7acb\u6d41\u7a0b\u662f\u5426\u6703\u963b\u585e UI\uff1f</p> <p>\u72c0\u614b\uff1a\u5f85\u78ba\u8a8d</p> <p>\u8ca0\u8cac\u4eba\uff1a\u9700\u8207 FComSharedFlow Package \u5718\u968a\u78ba\u8a8d</p> <p>\u5f71\u97ff\uff1a\u5f71\u97ff\u7528\u6236\u767c\u9001\u7559\u8a00\u7684\u9ad4\u9a57</p>"},{"location":"11_Risks%20%26%20Questions/01_risks_questions/#4","title":"4. \u9ed1\u540d\u55ae\u540c\u6b65\u6a5f\u5236","text":"<p>\u554f\u984c\uff1aWebSocket \u91cd\u9023\u5f8c\uff0cblocked user \u6e05\u55ae\u7684\u540c\u6b65\u6a5f\u5236\u70ba\u4f55\uff1f</p> <p>\u72c0\u614b\uff1a\u5f85\u78ba\u8a8d</p> <p>\u8ca0\u8cac\u4eba\uff1a\u9700\u8207\u5f8c\u7aef\u5718\u968a\u78ba\u8a8d</p> <p>\u5f71\u97ff\uff1a\u5f71\u97ff\u5c01\u9396\u529f\u80fd\u7684\u5be6\u4f5c</p>"},{"location":"11_Risks%20%26%20Questions/01_risks_questions/#_4","title":"\u4f9d\u8cf4\u98a8\u96aa","text":""},{"location":"11_Risks%20%26%20Questions/01_risks_questions/#1-api_2","title":"1. \u5f8c\u7aef API \u958b\u767c\u9032\u5ea6","text":"<p>\u98a8\u96aa\u7b49\u7d1a\uff1a\u4e2d</p> <p>\u63cf\u8ff0\uff1a - \u4f9d\u8cf4\u5f8c\u7aef API \u7684\u958b\u767c\u9032\u5ea6 - \u5982\u679c\u5f8c\u7aef API \u5ef6\u9072\uff0c\u53ef\u80fd\u5f71\u97ff\u524d\u7aef\u958b\u767c</p> <p>\u5f71\u97ff\uff1a - \u53ef\u80fd\u5f71\u97ff\u958b\u767c\u6642\u7a0b - \u9700\u8981\u8abf\u6574\u958b\u767c\u9806\u5e8f</p> <p>\u7de9\u89e3\u63aa\u65bd\uff1a - \u4f7f\u7528 Mock API \u9032\u884c\u4e26\u884c\u958b\u767c - \u5b9a\u671f\u8207\u5f8c\u7aef\u5718\u968a\u540c\u6b65\u9032\u5ea6</p>"},{"location":"11_Risks%20%26%20Questions/01_risks_questions/#2-package_1","title":"2. \u5916\u90e8 Package \u7248\u672c\u76f8\u5bb9\u6027","text":"<p>\u98a8\u96aa\u7b49\u7d1a\uff1a\u4f4e</p> <p>\u63cf\u8ff0\uff1a - \u5916\u90e8 Package \u7684\u7248\u672c\u66f4\u65b0\u53ef\u80fd\u5c0e\u81f4\u76f8\u5bb9\u6027\u554f\u984c</p> <p>\u5f71\u97ff\uff1a - \u53ef\u80fd\u9700\u8981\u8abf\u6574\u5be6\u4f5c\u65b9\u5f0f - \u53ef\u80fd\u5f71\u97ff\u529f\u80fd\u7a69\u5b9a\u6027</p> <p>\u7de9\u89e3\u63aa\u65bd\uff1a - \u9396\u5b9a\u5916\u90e8 Package \u7248\u672c - \u5b9a\u671f\u6e2c\u8a66\u76f8\u5bb9\u6027</p>"},{"location":"11_Risks%20%26%20Questions/01_risks_questions/#_5","title":"\u6642\u7a0b\u98a8\u96aa","text":""},{"location":"11_Risks%20%26%20Questions/01_risks_questions/#1","title":"1. \u8907\u96dc\u529f\u80fd\u958b\u767c\u6642\u9593","text":"<p>\u98a8\u96aa\u7b49\u7d1a\uff1a\u4e2d</p> <p>\u63cf\u8ff0\uff1a - WebSocket \u9023\u7dda\u7ba1\u7406\u548c\u8a0a\u606f\u5408\u4f75\u908f\u8f2f\u8f03\u8907\u96dc - \u53ef\u80fd\u8d85\u51fa\u9810\u4f30\u958b\u767c\u6642\u9593</p> <p>\u5f71\u97ff\uff1a - \u53ef\u80fd\u5f71\u97ff\u5c08\u6848\u6642\u7a0b</p> <p>\u7de9\u89e3\u63aa\u65bd\uff1a - \u63d0\u524d\u9032\u884c\u6280\u8853\u9a57\u8b49\uff08POC\uff09 - \u9810\u7559\u7de9\u885d\u6642\u9593</p>"},{"location":"11_Risks%20%26%20Questions/01_risks_questions/#2_1","title":"2. \u6e2c\u8a66\u6642\u9593\u4e0d\u8db3","text":"<p>\u98a8\u96aa\u7b49\u7d1a\uff1a\u4f4e</p> <p>\u63cf\u8ff0\uff1a - \u529f\u80fd\u8f03\u8907\u96dc\uff0c\u6e2c\u8a66\u5834\u666f\u8f03\u591a - \u53ef\u80fd\u6e2c\u8a66\u6642\u9593\u4e0d\u8db3</p> <p>\u5f71\u97ff\uff1a - \u53ef\u80fd\u5f71\u97ff\u54c1\u8cea</p> <p>\u7de9\u89e3\u63aa\u65bd\uff1a - \u63d0\u524d\u6e96\u5099\u6e2c\u8a66\u6848\u4f8b - \u81ea\u52d5\u5316\u6e2c\u8a66\u8986\u84cb\u95dc\u9375\u6d41\u7a0b</p>"},{"location":"11_Risks%20%26%20Questions/01_risks_questions/#_6","title":"\u98a8\u96aa\u8ffd\u8e64","text":"\u98a8\u96aa \u7b49\u7d1a \u72c0\u614b \u8ca0\u8cac\u4eba \u9810\u8a08\u89e3\u6c7a\u6642\u9593 \u500b\u4eba\u8cc7\u8a0a API \u5f85\u5b9a \u9ad8 \u5f85\u78ba\u8a8d - - WebSocket \u9023\u7dda\u7a69\u5b9a\u6027 \u4e2d \u5df2\u8b58\u5225 \u958b\u767c\u5718\u968a \u958b\u767c\u968e\u6bb5 \u5916\u90e8 Package \u4f9d\u8cf4 \u4e2d \u5df2\u8b58\u5225 \u958b\u767c\u5718\u968a \u6301\u7e8c\u8ffd\u8e64 \u6b77\u53f2\u8a0a\u606f\u5408\u4f75\u908f\u8f2f \u4e2d \u5df2\u8b58\u5225 \u958b\u767c\u5718\u968a \u958b\u767c\u968e\u6bb5"},{"location":"12_Tickets/","title":"Tickets","text":"<p>\u672c\u76ee\u9304\u5305\u542b\u6240\u6709\u958b\u767c Ticket \u548c\u4f30\u6642\u8cc7\u8a0a\u3002</p>"},{"location":"12_Tickets/#_1","title":"\u6587\u4ef6\u5217\u8868","text":""},{"location":"12_Tickets/#_2","title":"\u958b\u767c\u8a08\u5283","text":"<ul> <li><code>20_\u5de5\u4f5c\u65e5\u958b\u767c\u8a08\u5283.md</code>\uff1a\u55ae\u4e00 Senior iOS Engineer + AI \u8f14\u52a9\uff0c20 \u500b\u5de5\u4f5c\u65e5\u5b8c\u6210\u8a08\u5283</li> </ul>"},{"location":"12_Tickets/#jira","title":"Jira \u6574\u5408","text":"<p>Jira \u6574\u5408\u76f8\u95dc\u7684\u8173\u672c\u3001\u8cc7\u6599\u5eab\u548c\u6587\u6a94\u5df2\u79fb\u81f3\u5c08\u6848\u6839\u76ee\u9304\u7684 <code>jira_integration/</code> \u8cc7\u6599\u593e\u3002</p>"},{"location":"12_Tickets/#domain-model","title":"Domain Model","text":"<ul> <li><code>01_domain_model/TDD-001_Comment_Entity.md</code></li> <li><code>01_domain_model/TDD-002_CommentMeta_Entity.md</code></li> <li><code>01_domain_model/TDD-003_UserInfo_Entity.md</code></li> <li><code>01_domain_model/TDD-004_Message_Entity.md</code></li> <li><code>01_domain_model/TDD-005_ChatroomInfo_Entity.md</code></li> <li><code>01_domain_model/TDD-006_ValueObjects.md</code></li> </ul>"},{"location":"12_Tickets/#api","title":"API","text":"<ul> <li><code>02_api/TDD-010_PrematchCommentAPI.md</code></li> <li><code>02_api/TDD-011_ChatAPI.md</code></li> </ul>"},{"location":"12_Tickets/#client","title":"Client","text":"<ul> <li><code>03_client/TDD-020_PrematchCommentClient.md</code></li> <li><code>03_client/TDD-021_LiveChatClient.md</code></li> <li><code>03_client/TDD-022_ChatWebSocketClient.md</code></li> </ul>"},{"location":"12_Tickets/#repository","title":"Repository","text":"<ul> <li><code>04_repository/TDD-030_PrematchCommentRepository.md</code></li> <li><code>04_repository/TDD-031_LiveChatRepository.md</code></li> </ul>"},{"location":"12_Tickets/#usecase","title":"UseCase","text":"<ul> <li><code>05_usecase/TDD-040_ReloadCommentListUseCase.md</code></li> <li><code>05_usecase/TDD-041_PublishCommentUseCase.md</code></li> <li><code>05_usecase/TDD-042_ToggleLikeUseCase.md</code></li> <li><code>05_usecase/TDD-043_LoadRepliesUseCase.md</code></li> <li><code>05_usecase/TDD-044_NavigateToProfileUseCase.md</code></li> <li><code>05_usecase/TDD-045_SendChatMessageUseCase.md</code></li> <li><code>05_usecase/TDD-046_JoinChatroomUseCase.md</code></li> <li><code>05_usecase/TDD-047_LeaveChatroomUseCase.md</code></li> <li><code>05_usecase/TDD-048_BlockUserUseCase.md</code></li> </ul>"},{"location":"12_Tickets/#feature","title":"Feature","text":"<ul> <li><code>06_feature/TDD-050_PrematchCommentFeature.md</code></li> <li><code>06_feature/TDD-051_LiveChatFeature.md</code></li> </ul>"},{"location":"12_Tickets/#view","title":"View","text":"<ul> <li><code>07_view/TDD-060_PrematchCommentView.md</code></li> <li><code>07_view/TDD-061_LiveDetailView.md</code></li> </ul>"},{"location":"12_Tickets/#ticket","title":"Ticket \u958b\u767c\u6642\u9593\u8868","text":"<p>\u672c\u958b\u767c\u8a08\u5283\u5f9e 2025-11-27 \u958b\u59cb\uff0c\u5171 20 \u500b\u5de5\u4f5c\u65e5\uff0c\u5df2\u6392\u9664 2025-12-18\uff08\u9031\u56db\uff09 \u8acb\u5047\u65e5\u3002</p>"},{"location":"12_Tickets/#_3","title":"\u5b8c\u6574\u6642\u9593\u8868","text":"Ticket ID \u6a19\u984c \u958b\u59cb\u65e5\u671f \u7d50\u675f\u65e5\u671f \u6301\u7e8c\u6642\u9593\uff08\u5929\uff09 TDD-001 \u5be6\u4f5c Comment Entity 2025-11-27 2025-11-28 0.3 TDD-002 \u5be6\u4f5c CommentMeta Entity 2025-11-27 2025-11-28 0.3 TDD-003 \u5be6\u4f5c UserInfo Entity 2025-11-27 2025-11-28 0.3 TDD-004 \u5be6\u4f5c Message Entity 2025-11-28 2025-12-01 0.3 TDD-005 \u5be6\u4f5c ChatroomInfo Entity 2025-11-28 2025-12-01 0.3 TDD-006 \u5be6\u4f5c Value Objects\uff08SortMode\u3001Cursor\u3001PagingInfo\uff09 2025-11-28 2025-12-01 1.0 TDD-010 \u5be6\u4f5c PrematchCommentAPI \u5b9a\u7fa9 2025-12-01 2025-12-02 1.0 TDD-011 \u5be6\u4f5c ChatAPI \u5b9a\u7fa9 2025-12-01 2025-12-03 2.0 TDD-021 \u5be6\u4f5c LiveChatClient\uff08HTTP\uff09 2025-12-02 2025-12-03 1.0 TDD-020 \u5be6\u4f5c PrematchCommentClient\uff08HTTP\uff09 2025-12-02 2025-12-04 2.0 TDD-030 \u5be6\u4f5c PrematchCommentRepository 2025-12-04 2025-12-08 2.0 TDD-022 \u5be6\u4f5c ChatWebSocketClient\uff08WebSocket\uff09 2025-12-03 2025-12-10 5.0 TDD-031 \u5be6\u4f5c LiveChatRepository 2025-12-05 2025-12-10 3.0 TDD-040 \u5be6\u4f5c ReloadCommentListUseCase 2025-12-08 2025-12-10 2.0 TDD-042 \u5be6\u4f5c ToggleLikeUseCase 2025-12-10 2025-12-12 2.0 TDD-043 \u5be6\u4f5c LoadRepliesUseCase 2025-12-10 2025-12-12 2.0 TDD-044 \u5be6\u4f5c NavigateToProfileUseCase 2025-12-11 2025-12-12 1.0 TDD-041 \u5be6\u4f5c PublishCommentUseCase 2025-12-09 2025-12-16 5.0 TDD-048 \u5be6\u4f5c BlockUserUseCase 2025-12-15 2025-12-16 1.0 TDD-047 \u5be6\u4f5c LeaveChatroomUseCase 2025-12-15 2025-12-17 2.0 TDD-045 \u5be6\u4f5c SendChatMessageUseCase 2025-12-11 2025-12-19 5.0 TDD-046 \u5be6\u4f5c JoinChatroomUseCase 2025-12-12 2025-12-22 5.0 TDD-050 \u5be6\u4f5c PrematchCommentFeature\uff08TCA Reducer\uff09 2025-12-16 2025-12-22 3.0 TDD-051 \u5be6\u4f5c LiveChatFeature\uff08TCA Reducer\uff09 2025-12-16 2025-12-24 5.0 TDD-060 \u5be6\u4f5c PrematchCommentView 2025-12-17 2025-12-25 5.0 TDD-061 \u5be6\u4f5c LiveDetailView 2025-12-19 2025-12-26 5.0 <p>\u8a73\u7d30\u6642\u9593\u8868\uff1a\u8acb\u53c3\u8003 <code>ticket_timeline.md</code></p>"},{"location":"12_Tickets/#ticket_1","title":"Ticket \u958b\u767c\u9806\u5e8f","text":""},{"location":"12_Tickets/#phase-1-domain-model","title":"Phase 1: Domain Model\uff08\u512a\u5148\uff09","text":"<ol> <li>TDD-001 ~ TDD-006\uff1aDomain Model \u5b9a\u7fa9</li> </ol>"},{"location":"12_Tickets/#phase-2-data-infrastructure-layer","title":"Phase 2: Data &amp; Infrastructure Layer","text":"<ol> <li>TDD-010 ~ TDD-011\uff1aAPI \u5b9a\u7fa9</li> <li>TDD-020 ~ TDD-022\uff1aClient \u5be6\u4f5c</li> <li>TDD-030 ~ TDD-031\uff1aRepository \u5be6\u4f5c</li> </ol>"},{"location":"12_Tickets/#phase-3-domain-layer","title":"Phase 3: Domain Layer","text":"<ol> <li>TDD-040 ~ TDD-048\uff1aUseCase \u5be6\u4f5c</li> <li>TDD-050 ~ TDD-051\uff1aFeature \u5be6\u4f5c</li> </ol>"},{"location":"12_Tickets/#phase-4-ui-layer","title":"Phase 4: UI Layer","text":"<ol> <li>TDD-060 ~ TDD-061\uff1aView \u5be6\u4f5c</li> </ol>"},{"location":"12_Tickets/#_4","title":"\u4f30\u6642\u8aaa\u660e","text":"<ul> <li>Story Point (SP)\uff1a\u4f7f\u7528 Fibonacci \u6578\u5217\uff081, 2, 3, 5, 8, 13, 21\uff09</li> <li>\u4f30\u6642\u57fa\u6e96\uff1aSenior iOS Engineer + AI \u8f14\u52a9\u958b\u767c</li> <li>\u4f30\u6642\u7bc4\u570d\uff1a</li> <li>\u6a19\u6e96\u4f30\u6642\uff1a\u57fa\u65bc Story Point \u8f49\u63db\uff0c\u8003\u616e AI \u8f14\u52a9\u958b\u767c\u7684\u6642\u9593\u7bc0\u7701</li> <li>\u6700\u56b4\u53b2\u4f30\u6642\uff1a\u4e00\u5207\u9806\u5229\uff0c\u7121\u610f\u5916\u554f\u984c\uff08\u6a19\u6e96\u4f30\u6642 \u00d7 0.7\uff0c\u56db\u6368\u4e94\u5165\uff09</li> </ul>"},{"location":"12_Tickets/#ai","title":"AI \u8f14\u52a9\u958b\u767c\u8aaa\u660e","text":"<p>AI \u5de5\u5177\uff08\u5982 GitHub Copilot\u3001Cursor\u3001ChatGPT \u7b49\uff09\u53ef\u4ee5\u986f\u8457\u63d0\u5347\u958b\u767c\u6548\u7387\uff0c\u4f46\u5f71\u97ff\u7a0b\u5ea6\u56e0\u4efb\u52d9\u985e\u578b\u800c\u7570\uff1a</p> \u4efb\u52d9\u985e\u578b AI \u8f14\u52a9\u6548\u679c \u6642\u9593\u7bc0\u7701\u6bd4\u4f8b \u8aaa\u660e Domain Model \u9ad8 30-50% AI \u53ef\u5feb\u901f\u751f\u6210 Entity/Value Object \u7d50\u69cb\u3001Equatable\u3001Identifiable \u7b49 boilerplate code API \u5b9a\u7fa9 \u4e2d\u9ad8 25-40% AI \u53ef\u751f\u6210 Request/Response DTO\u3001API \u7aef\u9ede\u5b9a\u7fa9 Client \u4e2d 20-35% AI \u53ef\u751f\u6210 HTTP \u8acb\u6c42\u4ee3\u78bc\u3001\u6a19\u6e96 Error Handling\uff0c\u4f46 WebSocket \u908f\u8f2f\u4ecd\u9700\u4eba\u5de5 Repository \u4e2d 20-35% AI \u53ef\u751f\u6210 DTO Mapping\u3001\u6a19\u6e96 CRUD\uff0c\u4f46\u8907\u96dc\u8cc7\u6599\u5408\u4f75\u908f\u8f2f\u4ecd\u9700\u4eba\u5de5 UseCase \u4e2d\u4f4e 15-30% AI \u53ef\u751f\u6210\u57fa\u672c\u7d50\u69cb\uff0c\u4f46\u696d\u52d9\u908f\u8f2f\u3001\u9a57\u8b49\u908f\u8f2f\u3001\u6574\u5408\u908f\u8f2f\u9700\u8981\u4eba\u5de5\u8a2d\u8a08 Feature \u4e2d\u4f4e 15-30% AI \u53ef\u751f\u6210 TCA Reducer \u7d50\u69cb\uff0c\u4f46\u72c0\u614b\u7ba1\u7406\u908f\u8f2f\u3001Action \u8655\u7406\u9700\u8981\u4eba\u5de5 View \u4f4e\u4e2d 10-25% AI \u53ef\u751f\u6210 UI \u7d50\u69cb\uff0c\u4f46\u4e92\u52d5\u908f\u8f2f\u3001\u52d5\u756b\u3001\u72c0\u614b\u7d81\u5b9a\u9700\u8981\u4eba\u5de5 <p>\u6ce8\u610f\u4e8b\u9805\uff1a - AI \u751f\u6210\u7684\u4ee3\u78bc\u4ecd\u9700\u8981 Code Review \u548c\u8abf\u6574 - \u8907\u96dc\u696d\u52d9\u908f\u8f2f\u3001\u67b6\u69cb\u8a2d\u8a08\u6c7a\u7b56\u4ecd\u9700\u4eba\u5de5 - \u6e2c\u8a66\u7528\u4f8b\u4ecd\u9700\u4eba\u5de5\u7de8\u5beb\u548c\u9a57\u8b49 - \u8abf\u8a66\u548c\u554f\u984c\u89e3\u6c7a\u4ecd\u9700\u4eba\u5de5 - AI \u8f14\u52a9\u6548\u679c\u53d6\u6c7a\u65bc\u5de5\u7a0b\u5e2b\u4f7f\u7528 AI \u5de5\u5177\u7684\u719f\u7df4\u7a0b\u5ea6 - \u6240\u6709\u4f30\u6642\u5df2\u56db\u6368\u4e94\u5165\u81f3\u6574\u6578\u5929\u6578</p>"},{"location":"12_Tickets/#_5","title":"\u4f9d\u8cf4\u95dc\u4fc2","text":"<p>Ticket \u5fc5\u9808\u6309\u7167\u4f9d\u8cf4\u9806\u5e8f\u958b\u767c\uff1a - Domain Model \u2192 API \u2192 Client \u2192 Repository \u2192 UseCase \u2192 Feature \u2192 View</p>"},{"location":"12_Tickets/#_6","title":"\u7e3d\u4f30\u6642\u7d71\u8a08","text":""},{"location":"12_Tickets/#senior-ios-engineer-ai","title":"\u6309\u5c64\u7d1a\u7d71\u8a08\uff08Senior iOS Engineer + AI \u8f14\u52a9\uff09","text":"\u5c64\u7d1a Ticket \u6578\u91cf \u7e3d Story Point \u6a19\u6e96\u4f30\u6642 \u6700\u56b4\u53b2\u4f30\u6642 Domain Model 6 7 SP 3 \u5929 1 \u5929 API 2 8 SP 3 \u5929 2 \u5929 Client 3 21 SP 8 \u5929 5 \u5929 Repository 2 13 SP 5 \u5929 3 \u5929 UseCase 9 62 SP 25 \u5929 18 \u5929 Feature 2 21 SP 8 \u5929 6 \u5929 View 2 26 SP 10 \u5929 8 \u5929 \u7e3d\u8a08 26 158 SP 62 \u5929 43 \u5929"},{"location":"12_Tickets/#feature-senior-ios-engineer-ai","title":"\u6309 Feature \u7d71\u8a08\uff08Senior iOS Engineer + AI \u8f14\u52a9\uff09","text":"Feature Ticket \u6578\u91cf \u7e3d Story Point \u6a19\u6e96\u4f30\u6642 \u6700\u56b4\u53b2\u4f30\u6642 PrematchComment 14 75 SP 29 \u5929 20 \u5929 LiveChat 12 83 SP 33 \u5929 23 \u5929"},{"location":"12_Tickets/#_7","title":"\u6ce8\u610f\u4e8b\u9805","text":"<ol> <li>\u4f30\u6642\u50c5\u4f9b\u53c3\u8003\uff1a\u5be6\u969b\u958b\u767c\u6642\u9593\u53ef\u80fd\u56e0\u5de5\u7a0b\u5e2b\u7d93\u9a57\u3001\u5c08\u6848\u8907\u96dc\u5ea6\u3001\u6280\u8853\u50b5\u52d9\u7b49\u56e0\u7d20\u800c\u6709\u6240\u4e0d\u540c</li> <li>\u9700\u8981\u5b9a\u671f\u8abf\u6574\uff1a\u6839\u64da\u5be6\u969b\u958b\u767c\u60c5\u6cc1\uff0c\u61c9\u5b9a\u671f\u8abf\u6574\u4f30\u6642\u898f\u5247</li> <li>\u8003\u616e\u4e26\u884c\u958b\u767c\uff1a\u67d0\u4e9b Ticket \u53ef\u4ee5\u4e26\u884c\u958b\u767c\uff08\u5982 Domain Model \u7684 Entity \u53ef\u4ee5\u4e26\u884c\uff09</li> <li>\u8003\u616e\u98a8\u96aa\u7de9\u885d\uff1a\u5efa\u8b70\u5728\u7e3d\u4f30\u6642\u57fa\u790e\u4e0a\u589e\u52a0 20-30% \u7684\u7de9\u885d\u6642\u9593</li> <li>\u7e3d\u4f30\u6642\uff08\u542b\u7de9\u885d 25%\uff09\uff1a</li> <li>\u6a19\u6e96\u4f30\u6642\uff1a62 \u5929 \u00d7 1.25 = 78 \u5929\uff08\u7d04 16 \u9031\uff09</li> <li>\u6700\u56b4\u53b2\u4f30\u6642\uff1a43 \u5929 \u00d7 1.25 = 54 \u5929\uff08\u7d04 11 \u9031\uff09</li> </ol>"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/","title":"20 \u5de5\u4f5c\u65e5\u958b\u767c\u8a08\u5283","text":"<p>\u672c\u8a08\u5283\u91dd\u5c0d\u55ae\u4e00 Senior iOS Engineer + AI \u8f14\u52a9\uff0c\u76ee\u6a19\u5728 20 \u500b\u5de5\u4f5c\u65e5\u5167\u5b8c\u6210\u6240\u6709 26 \u5f35 Ticket\u3002</p>"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#_1","title":"\u8a08\u5283\u524d\u63d0","text":"<ul> <li>\u5de5\u7a0b\u5e2b\uff1a1 \u4f4d Senior iOS Engineer</li> <li>\u5de5\u5177\uff1aAI \u8f14\u52a9\u958b\u767c\uff08GitHub Copilot\u3001Cursor\u3001ChatGPT \u7b49\uff09</li> <li>\u76ee\u6a19\u6642\u7a0b\uff1a20 \u500b\u5de5\u4f5c\u65e5</li> <li>\u539f\u59cb\u7e3d\u4f30\u6642\uff1a62 \u5929\uff08\u6a19\u6e96\uff09/ 43 \u5929\uff08\u6700\u56b4\u53b2\uff09</li> <li>\u6642\u9593\u58d3\u7e2e\u6bd4\u4f8b\uff1a20 / 62 = 32.3%\uff08\u9700\u8981\u6975\u5ea6\u512a\u5316\uff09</li> </ul>"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#_2","title":"\u6642\u9593\u5206\u914d\u7b56\u7565","text":""},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#1","title":"1. \u4e26\u884c\u958b\u767c\u7b56\u7565","text":"<p>\u96d6\u7136\u53ea\u6709\u4e00\u4f4d\u5de5\u7a0b\u5e2b\uff0c\u4f46\u53ef\u4ee5\u63a1\u7528\u4ee5\u4e0b\u7b56\u7565\uff1a - Domain Model\uff1a\u53ef\u4ee5\u5feb\u901f\u4e26\u884c\u5b8c\u6210\uff08AI \u8f14\u52a9\u751f\u6210 boilerplate code\uff09 - API \u5b9a\u7fa9\uff1a\u53ef\u4ee5\u5feb\u901f\u5b8c\u6210\uff08AI \u8f14\u52a9\u751f\u6210 DTO\uff09 - Client/Repository\uff1a\u53ef\u4ee5\u90e8\u5206\u4e26\u884c\uff08\u4e0d\u540c Feature \u7684 Client/Repository\uff09 - UseCase/Feature/View\uff1a\u6309 Feature \u5206\u7d44\uff0c\u53ef\u4ee5\u90e8\u5206\u4e26\u884c</p>"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#2-ai","title":"2. AI \u8f14\u52a9\u512a\u5316","text":"<p>\u5728 20 \u500b\u5de5\u4f5c\u65e5\u7684\u7dca\u8feb\u6642\u7a0b\u4e0b\uff0c\u5047\u8a2d\uff1a - AI \u8f14\u52a9\u6548\u679c\u63d0\u5347\u81f3 40-60%\uff08\u76f8\u8f03\u65bc\u539f\u672c\u7684 17.5-40%\uff09 - \u6e1b\u5c11 Code Review \u6642\u9593\uff08\u5feb\u901f\u8fed\u4ee3\uff09 - \u6e1b\u5c11\u6e2c\u8a66\u8986\u84cb\u7387\u8981\u6c42\uff08\u5148\u5b8c\u6210\u529f\u80fd\uff0c\u5f8c\u7e8c\u88dc\u6e2c\u8a66\uff09</p>"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#3","title":"3. \u512a\u5148\u7d1a\u8abf\u6574","text":"<ul> <li>P0 \u512a\u5148\u7d1a\uff1a\u5fc5\u9808\u5b8c\u6210\u7684\u6838\u5fc3\u529f\u80fd</li> <li>P1 \u512a\u5148\u7d1a\uff1a\u53ef\u4ee5\u5ef6\u5f8c\u6216\u7c21\u5316</li> </ul>"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#_3","title":"\u8a73\u7d30\u958b\u767c\u8a08\u5283","text":""},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#week-1-1-52024-11-27-2024-12-03","title":"Week 1\uff08\u5de5\u4f5c\u65e5 1-5\uff1a2024-11-27 ~ 2024-12-03\uff09","text":""},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#day-12024-11-27-domain-model-layer-part-1","title":"Day 1\uff082024-11-27 \u9031\u4e09\uff09\uff1aDomain Model Layer - Part 1","text":"Ticket ID \u6a19\u984c \u539f\u59cb\u4f30\u6642 20 \u65e5\u8a08\u5283\u4f30\u6642 \u958b\u767c\u65e5\u671f \u8aaa\u660e TDD-001 Comment Entity 0.3 \u5929 0.2 \u5929 2024-11-27 AI \u5feb\u901f\u751f\u6210 TDD-002 CommentMeta Entity 0.3 \u5929 0.2 \u5929 2024-11-27 AI \u5feb\u901f\u751f\u6210 TDD-003 UserInfo Entity 0.3 \u5929 0.2 \u5929 2024-11-27 AI \u5feb\u901f\u751f\u6210"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#day-22024-11-28-domain-model-layer-part-2","title":"Day 2\uff082024-11-28 \u9031\u56db\uff09\uff1aDomain Model Layer - Part 2","text":"Ticket ID \u6a19\u984c \u539f\u59cb\u4f30\u6642 20 \u65e5\u8a08\u5283\u4f30\u6642 \u958b\u767c\u65e5\u671f \u8aaa\u660e TDD-004 Message Entity 0.3 \u5929 0.2 \u5929 2024-11-28 AI \u5feb\u901f\u751f\u6210 TDD-005 ChatroomInfo Entity 0.3 \u5929 0.2 \u5929 2024-11-28 AI \u5feb\u901f\u751f\u6210 TDD-006 Value Objects 1 \u5929 0.8 \u5929 2024-11-28 AI \u5feb\u901f\u751f\u6210 \u5c0f\u8a08 Domain Model 3 \u5929 1.8 \u5929 - \u5be6\u969b\u5206\u914d\uff1a2 \u5929"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#day-32024-11-29-api-layer","title":"Day 3\uff082024-11-29 \u9031\u4e94\uff09\uff1aAPI Layer","text":"Ticket ID \u6a19\u984c \u539f\u59cb\u4f30\u6642 20 \u65e5\u8a08\u5283\u4f30\u6642 \u958b\u767c\u65e5\u671f \u8aaa\u660e TDD-010 PrematchCommentAPI 1 \u5929 0.5 \u5929 2024-11-29 AI \u751f\u6210 DTO TDD-011 ChatAPI 2 \u5929 0.5 \u5929 2024-11-29 AI \u751f\u6210 DTO + WebSocket \u5c0f\u8a08 API 3 \u5929 1 \u5929 - \u5be6\u969b\u5206\u914d\uff1a1 \u5929"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#day-42024-12-02-client-layer-part-1","title":"Day 4\uff082024-12-02 \u9031\u4e00\uff09\uff1aClient Layer - Part 1","text":"Ticket ID \u6a19\u984c \u539f\u59cb\u4f30\u6642 20 \u65e5\u8a08\u5283\u4f30\u6642 \u958b\u767c\u65e5\u671f \u8aaa\u660e TDD-020 PrematchCommentClient 2 \u5929 0.8 \u5929 2024-12-02 AI \u751f\u6210 HTTP \u8acb\u6c42 TDD-021 LiveChatClient 1 \u5929 0.4 \u5929 2024-12-02 AI \u751f\u6210 HTTP \u8acb\u6c42"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#day-52024-12-03-client-layer-part-2","title":"Day 5\uff082024-12-03 \u9031\u4e8c\uff09\uff1aClient Layer - Part 2","text":"Ticket ID \u6a19\u984c \u539f\u59cb\u4f30\u6642 20 \u65e5\u8a08\u5283\u4f30\u6642 \u958b\u767c\u65e5\u671f \u8aaa\u660e TDD-022 ChatWebSocketClient 5 \u5929 0.8 \u5929 2024-12-03 AI \u751f\u6210 WebSocket \u57fa\u790e\uff0c\u4eba\u5de5\u8abf\u6574\u91cd\u9023\u908f\u8f2f \u5c0f\u8a08 Client 8 \u5929 2 \u5929 - \u5be6\u969b\u5206\u914d\uff1a2 \u5929"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#week-2-6-102024-12-04-2024-12-10","title":"Week 2\uff08\u5de5\u4f5c\u65e5 6-10\uff1a2024-12-04 ~ 2024-12-10\uff09","text":""},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#day-62024-12-04-repository-layer-part-1","title":"Day 6\uff082024-12-04 \u9031\u4e09\uff09\uff1aRepository Layer - Part 1","text":"Ticket ID \u6a19\u984c \u539f\u59cb\u4f30\u6642 20 \u65e5\u8a08\u5283\u4f30\u6642 \u958b\u767c\u65e5\u671f \u8aaa\u660e TDD-030 PrematchCommentRepository 2 \u5929 0.8 \u5929 2024-12-04 AI \u751f\u6210 DTO Mapping"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#day-72024-12-05-repository-layer-part-2","title":"Day 7\uff082024-12-05 \u9031\u56db\uff09\uff1aRepository Layer - Part 2","text":"Ticket ID \u6a19\u984c \u539f\u59cb\u4f30\u6642 20 \u65e5\u8a08\u5283\u4f30\u6642 \u958b\u767c\u65e5\u671f \u8aaa\u660e TDD-031 LiveChatRepository 3 \u5929 1.2 \u5929 2024-12-05 AI \u751f\u6210\u57fa\u790e\uff0c\u4eba\u5de5\u8abf\u6574\u8907\u96dc\u908f\u8f2f \u5c0f\u8a08 Repository 5 \u5929 2 \u5929 - \u5be6\u969b\u5206\u914d\uff1a2 \u5929"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#day-82024-12-06-usecase-layer-prematchcomment-part-1","title":"Day 8\uff082024-12-06 \u9031\u4e94\uff09\uff1aUseCase Layer - PrematchComment - Part 1","text":"Ticket ID \u6a19\u984c \u539f\u59cb\u4f30\u6642 20 \u65e5\u8a08\u5283\u4f30\u6642 \u958b\u767c\u65e5\u671f \u8aaa\u660e TDD-040 ReloadCommentListUseCase 2 \u5929 0.8 \u5929 2024-12-06 AI \u751f\u6210\u57fa\u790e\u7d50\u69cb"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#day-92024-12-09-usecase-layer-prematchcomment-part-2","title":"Day 9\uff082024-12-09 \u9031\u4e00\uff09\uff1aUseCase Layer - PrematchComment - Part 2","text":"Ticket ID \u6a19\u984c \u539f\u59cb\u4f30\u6642 20 \u65e5\u8a08\u5283\u4f30\u6642 \u958b\u767c\u65e5\u671f \u8aaa\u660e TDD-041 PublishCommentUseCase 5 \u5929 1.2 \u5929 2024-12-09 AI \u751f\u6210\u57fa\u790e\uff0c\u4eba\u5de5\u8abf\u6574\u6574\u5408\u908f\u8f2f"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#day-102024-12-10-usecase-layer-prematchcomment-part-3","title":"Day 10\uff082024-12-10 \u9031\u4e8c\uff09\uff1aUseCase Layer - PrematchComment - Part 3","text":"Ticket ID \u6a19\u984c \u539f\u59cb\u4f30\u6642 20 \u65e5\u8a08\u5283\u4f30\u6642 \u958b\u767c\u65e5\u671f \u8aaa\u660e TDD-042 ToggleLikeUseCase 2 \u5929 0.5 \u5929 2024-12-10 AI \u751f\u6210\u57fa\u790e\u7d50\u69cb TDD-043 LoadRepliesUseCase 2 \u5929 0.5 \u5929 2024-12-10 AI \u751f\u6210\u57fa\u790e\u7d50\u69cb \u5c0f\u8a08 PrematchComment UseCase 11 \u5929 3 \u5929 - \u5be6\u969b\u5206\u914d\uff1a3 \u5929"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#week-3-11-152024-12-11-2024-12-17","title":"Week 3\uff08\u5de5\u4f5c\u65e5 11-15\uff1a2024-12-11 ~ 2024-12-17\uff09","text":""},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#day-112024-12-11-usecase-layer-livechat-part-1","title":"Day 11\uff082024-12-11 \u9031\u4e09\uff09\uff1aUseCase Layer - LiveChat - Part 1","text":"Ticket ID \u6a19\u984c \u539f\u59cb\u4f30\u6642 20 \u65e5\u8a08\u5283\u4f30\u6642 \u958b\u767c\u65e5\u671f \u8aaa\u660e TDD-044 NavigateToProfileUseCase 1 \u5929 0.2 \u5929 2024-12-11 AI \u751f\u6210\u57fa\u790e\u7d50\u69cb\uff08P1\uff0c\u53ef\u7c21\u5316\uff09 TDD-045 SendChatMessageUseCase 5 \u5929 1.2 \u5929 2024-12-11 AI \u751f\u6210\u57fa\u790e\uff0c\u4eba\u5de5\u8abf\u6574\u6574\u5408\u908f\u8f2f"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#day-122024-12-12-usecase-layer-livechat-part-2","title":"Day 12\uff082024-12-12 \u9031\u56db\uff09\uff1aUseCase Layer - LiveChat - Part 2","text":"Ticket ID \u6a19\u984c \u539f\u59cb\u4f30\u6642 20 \u65e5\u8a08\u5283\u4f30\u6642 \u958b\u767c\u65e5\u671f \u8aaa\u660e TDD-046 JoinChatroomUseCase 5 \u5929 1.2 \u5929 2024-12-12 AI \u751f\u6210\u57fa\u790e\uff0c\u4eba\u5de5\u8abf\u6574\u5408\u4f75\u908f\u8f2f"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#day-132024-12-13-usecase-layer-livechat-part-3","title":"Day 13\uff082024-12-13 \u9031\u4e94\uff09\uff1aUseCase Layer - LiveChat - Part 3","text":"Ticket ID \u6a19\u984c \u539f\u59cb\u4f30\u6642 20 \u65e5\u8a08\u5283\u4f30\u6642 \u958b\u767c\u65e5\u671f \u8aaa\u660e TDD-047 LeaveChatroomUseCase 2 \u5929 0.2 \u5929 2024-12-13 AI \u751f\u6210\u57fa\u790e\u7d50\u69cb TDD-048 BlockUserUseCase 1 \u5929 0.2 \u5929 2024-12-13 AI \u751f\u6210\u57fa\u790e\u7d50\u69cb\uff08P1\uff0c\u53ef\u7c21\u5316\uff09 \u5c0f\u8a08 LiveChat UseCase 14 \u5929 3 \u5929 - \u5be6\u969b\u5206\u914d\uff1a3 \u5929"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#day-142024-12-16-feature-layer","title":"Day 14\uff082024-12-16 \u9031\u4e00\uff09\uff1aFeature Layer","text":"Ticket ID \u6a19\u984c \u539f\u59cb\u4f30\u6642 20 \u65e5\u8a08\u5283\u4f30\u6642 \u958b\u767c\u65e5\u671f \u8aaa\u660e TDD-050 PrematchCommentFeature 3 \u5929 0.5 \u5929 2024-12-16 AI \u751f\u6210 TCA Reducer \u7d50\u69cb TDD-051 LiveChatFeature 5 \u5929 0.5 \u5929 2024-12-16 AI \u751f\u6210 TCA Reducer \u7d50\u69cb \u5c0f\u8a08 Feature 8 \u5929 1 \u5929 - \u5be6\u969b\u5206\u914d\uff1a1 \u5929"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#day-152024-12-17-view-layer-prematchcommentview","title":"Day 15\uff082024-12-17 \u9031\u4e8c\uff09\uff1aView Layer - PrematchCommentView","text":"Ticket ID \u6a19\u984c \u539f\u59cb\u4f30\u6642 20 \u65e5\u8a08\u5283\u4f30\u6642 \u958b\u767c\u65e5\u671f \u8aaa\u660e TDD-060 PrematchCommentView 5 \u5929 1 \u5929 2024-12-17 AI \u751f\u6210 UI \u7d50\u69cb\uff0c\u4eba\u5de5\u8abf\u6574\u4e92\u52d5\u908f\u8f2f \u5c0f\u8a08 PrematchComment View 5 \u5929 1 \u5929 - \u5be6\u969b\u5206\u914d\uff1a1 \u5929"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#week-4-16-202024-12-18-2024-12-24","title":"Week 4\uff08\u5de5\u4f5c\u65e5 16-20\uff1a2024-12-18 ~ 2024-12-24\uff09","text":""},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#day-162024-12-18-view-layer-livedetailview-part-1","title":"Day 16\uff082024-12-18 \u9031\u4e09\uff09\uff1aView Layer - LiveDetailView - Part 1","text":"Ticket ID \u6a19\u984c \u539f\u59cb\u4f30\u6642 20 \u65e5\u8a08\u5283\u4f30\u6642 \u958b\u767c\u65e5\u671f \u8aaa\u660e TDD-061 LiveDetailView 5 \u5929 2 \u5929 2024-12-18 AI \u751f\u6210 UI \u7d50\u69cb\uff0c\u4eba\u5de5\u8abf\u6574 WebSocket \u6574\u5408"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#day-172024-12-19-view-layer-livedetailview-part-2","title":"Day 17\uff082024-12-19 \u9031\u56db\uff09\uff1aView Layer - LiveDetailView - Part 2","text":"Ticket ID \u6a19\u984c \u539f\u59cb\u4f30\u6642 20 \u65e5\u8a08\u5283\u4f30\u6642 \u958b\u767c\u65e5\u671f \u8aaa\u660e TDD-061 LiveDetailView\uff08\u7e8c\uff09 - - 2024-12-19 \u7e7c\u7e8c\u5b8c\u6210 WebSocket \u6574\u5408\u8207\u6e2c\u8a66 \u5c0f\u8a08 LiveChat View 5 \u5929 2 \u5929 - \u5be6\u969b\u5206\u914d\uff1a2 \u5929"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#day-182024-12-20-bug","title":"Day 18\uff082024-12-20 \u9031\u4e94\uff09\uff1a\u6574\u5408\u6e2c\u8a66\u8207 Bug \u4fee\u5fa9","text":"<ul> <li>\u6574\u5408\u6e2c\u8a66</li> <li>Bug \u4fee\u5fa9</li> <li>Code Review \u8abf\u6574</li> </ul>"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#day-192024-12-23","title":"Day 19\uff082024-12-23 \u9031\u4e00\uff09\uff1a\u512a\u5316\u8207\u8abf\u6574","text":"<ul> <li>\u6027\u80fd\u512a\u5316</li> <li>UI/UX \u8abf\u6574</li> <li>\u908a\u7de3\u60c5\u6cc1\u8655\u7406</li> </ul>"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#day-202024-12-24","title":"Day 20\uff082024-12-24 \u9031\u4e8c\uff09\uff1a\u6700\u7d42\u9a57\u6536","text":"<ul> <li>\u6700\u7d42\u6e2c\u8a66</li> <li>\u6587\u6a94\u66f4\u65b0</li> <li>\u4ea4\u4ed8\u6e96\u5099</li> </ul>"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#_4","title":"\u7e3d\u6642\u9593\u5206\u914d\u8868","text":"\u968e\u6bb5 \u5de5\u4f5c\u65e5 \u539f\u59cb\u4f30\u6642 20 \u65e5\u8a08\u5283\u4f30\u6642 \u6642\u9593\u58d3\u7e2e Week 1 1-5 14 \u5929 5 \u5929 64.3% Week 2 6-10 16 \u5929 5 \u5929 68.8% Week 3 11-15 26 \u5929 5 \u5929 80.8% Week 4 16-20 6 \u5929 5 \u5929 16.7% \u7e3d\u8a08 20 \u5929 62 \u5929 20 \u5929 67.7%"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#_5","title":"\u98a8\u96aa\u8207\u6ce8\u610f\u4e8b\u9805","text":""},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#_6","title":"\u9ad8\u98a8\u96aa\u9805\u76ee","text":"<ol> <li>TDD-022 ChatWebSocketClient\uff080.8 \u5929\uff09</li> <li>\u539f\u59cb\u4f30\u6642\uff1a5 \u5929</li> <li>\u98a8\u96aa\uff1aWebSocket \u91cd\u9023\u908f\u8f2f\u8907\u96dc\uff0c\u53ef\u80fd\u9700\u8981\u984d\u5916\u6642\u9593</li> <li> <p>\u5efa\u8b70\uff1a\u512a\u5148\u5b8c\u6210\u57fa\u790e\u529f\u80fd\uff0c\u91cd\u9023\u908f\u8f2f\u53ef\u4ee5\u7c21\u5316</p> </li> <li> <p>TDD-031 LiveChatRepository\uff081.2 \u5929\uff09</p> </li> <li>\u539f\u59cb\u4f30\u6642\uff1a3 \u5929</li> <li>\u98a8\u96aa\uff1a\u8907\u96dc\u7684\u8cc7\u6599\u5408\u4f75\u908f\u8f2f</li> <li> <p>\u5efa\u8b70\uff1a\u5148\u5b8c\u6210\u57fa\u672c\u529f\u80fd\uff0c\u8907\u96dc\u908f\u8f2f\u5f8c\u7e8c\u512a\u5316</p> </li> <li> <p>TDD-041 PublishCommentUseCase\uff081.2 \u5929\uff09</p> </li> <li>\u539f\u59cb\u4f30\u6642\uff1a5 \u5929</li> <li>\u98a8\u96aa\uff1a\u9700\u8981\u6574\u5408\u591a\u500b Shared Feature</li> <li> <p>\u5efa\u8b70\uff1a\u5148\u5b8c\u6210\u6838\u5fc3\u529f\u80fd\uff0c\u6574\u5408\u908f\u8f2f\u53ef\u4ee5\u7c21\u5316</p> </li> <li> <p>TDD-045 SendChatMessageUseCase\uff081.2 \u5929\uff09</p> </li> <li>\u539f\u59cb\u4f30\u6642\uff1a5 \u5929</li> <li>\u98a8\u96aa\uff1a\u9700\u8981\u6574\u5408\u591a\u500b Shared Feature</li> <li> <p>\u5efa\u8b70\uff1a\u5148\u5b8c\u6210\u6838\u5fc3\u529f\u80fd\uff0c\u6574\u5408\u908f\u8f2f\u53ef\u4ee5\u7c21\u5316</p> </li> <li> <p>TDD-046 JoinChatroomUseCase\uff081.2 \u5929\uff09</p> </li> <li>\u539f\u59cb\u4f30\u6642\uff1a5 \u5929</li> <li>\u98a8\u96aa\uff1a\u8907\u96dc\u7684\u8a0a\u606f\u5408\u4f75\u908f\u8f2f</li> <li>\u5efa\u8b70\uff1a\u5148\u5b8c\u6210\u57fa\u672c\u529f\u80fd\uff0c\u5408\u4f75\u908f\u8f2f\u53ef\u4ee5\u7c21\u5316</li> </ol>"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#_7","title":"\u512a\u5316\u5efa\u8b70","text":"<ol> <li>\u964d\u4f4e\u6e2c\u8a66\u8986\u84cb\u7387\u8981\u6c42</li> <li>\u539f\u59cb\u8981\u6c42\uff1aUnit Test \u8986\u84cb\u7387 \u2265 80-90%</li> <li> <p>20 \u65e5\u8a08\u5283\uff1a\u5148\u5b8c\u6210\u529f\u80fd\uff0c\u6e2c\u8a66\u8986\u84cb\u7387 \u2265 60%\uff0c\u5f8c\u7e8c\u88dc\u9f4a</p> </li> <li> <p>\u7c21\u5316\u8907\u96dc\u908f\u8f2f</p> </li> <li>\u5148\u5b8c\u6210\u6838\u5fc3\u529f\u80fd</li> <li>\u8907\u96dc\u7684\u908a\u7de3\u60c5\u6cc1\u53ef\u4ee5\u5f8c\u7e8c\u512a\u5316</li> <li> <p>\u8907\u96dc\u7684\u932f\u8aa4\u8655\u7406\u53ef\u4ee5\u7c21\u5316</p> </li> <li> <p>\u512a\u5148\u5b8c\u6210 P0 \u529f\u80fd</p> </li> <li> <p>P1 \u529f\u80fd\uff08\u5982 TDD-044\u3001TDD-048\uff09\u53ef\u4ee5\u5ef6\u5f8c\u6216\u7c21\u5316</p> </li> <li> <p>\u5145\u5206\u5229\u7528 AI \u5de5\u5177</p> </li> <li>\u4f7f\u7528 AI \u751f\u6210 boilerplate code</li> <li>\u4f7f\u7528 AI \u751f\u6210\u6e2c\u8a66\u7528\u4f8b\u6846\u67b6</li> <li>\u4f7f\u7528 AI \u5354\u52a9 Code Review</li> </ol>"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#_8","title":"\u6bcf\u65e5\u5de5\u4f5c\u6aa2\u67e5\u6e05\u55ae","text":""},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#week-1","title":"Week 1 \u6aa2\u67e5\u6e05\u55ae","text":"<ul> <li>[ ] Day 1-2\uff1a\u5b8c\u6210\u6240\u6709 Domain Model\uff086 \u500b Ticket\uff09</li> <li>[ ] Day 3\uff1a\u5b8c\u6210\u6240\u6709 API \u5b9a\u7fa9\uff082 \u500b Ticket\uff09</li> <li>[ ] Day 4-5\uff1a\u5b8c\u6210\u6240\u6709 Client\uff083 \u500b Ticket\uff09</li> </ul>"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#week-2","title":"Week 2 \u6aa2\u67e5\u6e05\u55ae","text":"<ul> <li>[ ] Day 6-7\uff1a\u5b8c\u6210\u6240\u6709 Repository\uff082 \u500b Ticket\uff09</li> <li>[ ] Day 8-10\uff1a\u5b8c\u6210 PrematchComment UseCase\uff084 \u500b Ticket\uff09</li> </ul>"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#week-3","title":"Week 3 \u6aa2\u67e5\u6e05\u55ae","text":"<ul> <li>[ ] Day 11-13\uff1a\u5b8c\u6210 LiveChat UseCase\uff084 \u500b Ticket\uff09</li> <li>[ ] Day 14\uff1a\u5b8c\u6210\u6240\u6709 Feature\uff082 \u500b Ticket\uff09</li> <li>[ ] Day 15\uff1a\u5b8c\u6210 PrematchCommentView\uff081 \u500b Ticket\uff09</li> </ul>"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#week-4","title":"Week 4 \u6aa2\u67e5\u6e05\u55ae","text":"<ul> <li>[ ] Day 16-17\uff1a\u5b8c\u6210 LiveDetailView\uff081 \u500b Ticket\uff09</li> <li>[ ] Day 18\uff1a\u6574\u5408\u6e2c\u8a66\u8207 Bug \u4fee\u5fa9</li> <li>[ ] Day 19\uff1a\u512a\u5316\u8207\u8abf\u6574</li> <li>[ ] Day 20\uff1a\u6700\u7d42\u9a57\u6536</li> </ul>"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#_9","title":"\u61c9\u6025\u8a08\u5283","text":"<p>\u5982\u679c\u9032\u5ea6\u843d\u5f8c\uff0c\u5efa\u8b70\u8abf\u6574\u7b56\u7565\uff1a</p> <ol> <li>\u5ef6\u5f8c P1 \u529f\u80fd</li> <li>TDD-044 NavigateToProfileUseCase\uff080.3 \u5929\uff09</li> <li> <p>TDD-048 BlockUserUseCase\uff08\u53ef\u5ef6\u5f8c\uff09</p> </li> <li> <p>\u7c21\u5316\u8907\u96dc\u529f\u80fd</p> </li> <li>WebSocket \u91cd\u9023\u908f\u8f2f\u7c21\u5316</li> <li>\u8907\u96dc\u7684\u8cc7\u6599\u5408\u4f75\u908f\u8f2f\u7c21\u5316</li> <li> <p>\u8907\u96dc\u7684\u932f\u8aa4\u8655\u7406\u7c21\u5316</p> </li> <li> <p>\u964d\u4f4e\u6e2c\u8a66\u8981\u6c42</p> </li> <li> <p>\u5148\u5b8c\u6210\u529f\u80fd\uff0c\u6e2c\u8a66\u5f8c\u7e8c\u88dc\u9f4a</p> </li> <li> <p>\u8acb\u6c42\u652f\u63f4</p> </li> <li>\u5982\u679c\u9032\u5ea6\u56b4\u91cd\u843d\u5f8c\uff0c\u8003\u616e\u8acb\u6c42\u984d\u5916\u652f\u63f4</li> </ol>"},{"location":"12_Tickets/20_%E5%B7%A5%E4%BD%9C%E6%97%A5%E9%96%8B%E7%99%BC%E8%A8%88%E5%8A%83/#_10","title":"\u7e3d\u7d50","text":"<p>\u672c\u8a08\u5283\u5c07\u539f\u672c 62 \u5929\u7684\u958b\u767c\u6642\u7a0b\u58d3\u7e2e\u81f3 20 \u500b\u5de5\u4f5c\u65e5\uff0c\u6642\u9593\u58d3\u7e2e\u6bd4\u4f8b\u70ba 67.7%\u3002</p> <p>\u95dc\u9375\u6210\u529f\u56e0\u7d20\uff1a 1. \u5145\u5206\u5229\u7528 AI \u8f14\u52a9\u5de5\u5177 2. \u512a\u5148\u5b8c\u6210\u6838\u5fc3\u529f\u80fd 3. \u7c21\u5316\u8907\u96dc\u908f\u8f2f 4. \u964d\u4f4e\u6e2c\u8a66\u8986\u84cb\u7387\u8981\u6c42 5. \u56b4\u683c\u6309\u7167\u8a08\u5283\u57f7\u884c</p> <p>\u98a8\u96aa\uff1a - \u6642\u9593\u6975\u5ea6\u7dca\u8feb\uff0c\u53ef\u80fd\u5f71\u97ff\u4ee3\u78bc\u54c1\u8cea - \u8907\u96dc\u529f\u80fd\u53ef\u80fd\u9700\u8981\u984d\u5916\u6642\u9593 - \u6e2c\u8a66\u8986\u84cb\u7387\u53ef\u80fd\u4e0d\u8db3</p> <p>\u5efa\u8b70\uff1a - \u5982\u679c\u53ef\u80fd\uff0c\u5efa\u8b70\u5ef6\u9577\u81f3 25-30 \u500b\u5de5\u4f5c\u65e5\uff0c\u4ee5\u78ba\u4fdd\u4ee3\u78bc\u54c1\u8cea - \u6216\u8005\u8003\u616e\u589e\u52a0\u5de5\u7a0b\u5e2b\u6578\u91cf\uff0c\u4ee5\u4e26\u884c\u958b\u767c</p> <p>\u6700\u5f8c\u66f4\u65b0\uff1a2024-11-26</p> <p>\u958b\u767c\u9031\u671f\uff1a2024-11-27\uff08\u9031\u4e09\uff09~ 2024-12-24\uff08\u9031\u4e8c\uff09\uff0c\u5171 20 \u500b\u5de5\u4f5c\u65e5</p>"},{"location":"12_Tickets/TDD_TICKETS_REVIEW/","title":"TDD Tickets \u6aa2\u8996\u5831\u544a","text":""},{"location":"12_Tickets/TDD_TICKETS_REVIEW/#_1","title":"\u6aa2\u8996\u65e5\u671f","text":"<p>2025-11-28</p>"},{"location":"12_Tickets/TDD_TICKETS_REVIEW/#_2","title":"\u6aa2\u8996\u7bc4\u570d","text":"<p>\u6240\u6709\u5df2\u6539\u5beb\u7684 TDD tickets\uff0826 \u500b\u6587\u4ef6\uff09</p>"},{"location":"12_Tickets/TDD_TICKETS_REVIEW/#_3","title":"\u2705 \u7b26\u5408\u898f\u7bc4\u6aa2\u67e5","text":""},{"location":"12_Tickets/TDD_TICKETS_REVIEW/#1-domain-model-tickets-6","title":"1. Domain Model Tickets (6 \u500b)","text":"Ticket ID \u6a19\u984c Namespace Enum Extension Sendable \u72c0\u614b TDD-001 Comment Entity \u2705 <code>PrematchComment</code> \u2705 \u2705 \u2705 \u7b26\u5408 TDD-002 CommentMeta Entity \u2705 <code>PrematchComment</code> \u2705 \u2705 \u2705 \u7b26\u5408 TDD-003 UserInfo Entity \u2705 <code>Shared</code> \u2705 \u2705 \u2705 \u7b26\u5408 TDD-004 Message Entity \u2705 <code>LiveChat</code> \u2705 \u2705 \u2705 \u7b26\u5408 TDD-005 ChatroomInfo Entity \u2705 <code>LiveChat</code> \u2705 \u2705 \u2705 \u7b26\u5408 TDD-006 Value Objects \u2705 <code>Shared</code> / <code>PrematchComment</code> \u2705 \u2705 \u2705 \u7b26\u5408 <p>\u6aa2\u67e5\u9805\u76ee\uff1a - \u2705 \u6240\u6709 Entity \u90fd\u4f7f\u7528 namespace enum\uff08<code>PrematchComment</code>\u3001<code>LiveChat</code>\u3001<code>Shared</code>\uff09 - \u2705 \u6240\u6709 Entity \u90fd\u5b9a\u7fa9\u5728 namespace extension \u5167 - \u2705 \u6240\u6709 Entity \u90fd\u5be6\u4f5c <code>Identifiable</code>\u3001<code>Equatable</code>\u3001<code>Sendable</code> - \u2705 \u6240\u6709\u5c6c\u6027\u4f7f\u7528 <code>public</code> \u4fee\u98fe\u7b26 - \u2705 \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c</p>"},{"location":"12_Tickets/TDD_TICKETS_REVIEW/#2-api-tickets-2","title":"2. API Tickets (2 \u500b)","text":"Ticket ID \u6a19\u984c Namespace Enum Extension \u5206\u96e2 Actor Repository \u72c0\u614b TDD-010 PrematchCommentAPI \u2705 <code>PrematchCommentAPI</code> \u2705 5 \u500b\u6a94\u6848 \u2705 \u2705 \u7b26\u5408 TDD-011 ChatAPI \u2705 <code>ChatAPI</code> \u2705 5 \u500b\u6a94\u6848 \u2705 \u2705 \u7b26\u5408 <p>\u6aa2\u67e5\u9805\u76ee\uff1a - \u2705 \u4f7f\u7528 namespace enum\uff08<code>PrematchCommentAPI</code>\u3001<code>ChatAPI</code>\uff09 - \u2705 \u4f7f\u7528 extension \u5206\u96e2\u95dc\u6ce8\u9ede\uff1a   - <code>XXXAPI.swift</code> - namespace \u5b9a\u7fa9   - <code>XXXAPI+Endpoint.swift</code> - Endpoint \u5b9a\u7fa9   - <code>XXXAPI+Models.swift</code> - API Models \u5b9a\u7fa9   - <code>XXXAPI+RepositoryProtocol.swift</code> - Repository Protocol   - <code>XXXAPI+Repository.swift</code> - Repository \u5be6\u4f5c\uff08actor\uff09 - \u2705 Repository \u4f7f\u7528 <code>actor</code> - \u2705 DTO \u5be6\u4f5c <code>Decodable</code>\u3001<code>Sendable</code></p>"},{"location":"12_Tickets/TDD_TICKETS_REVIEW/#3-client-tickets-3","title":"3. Client Tickets (3 \u500b)","text":"Ticket ID \u6a19\u984c Struct API Repository \u6574\u5408 \u72c0\u614b TDD-020 PrematchCommentClient \u2705 \u2705 \u2705 \u7b26\u5408 TDD-021 LiveChatClient \u2705 \u2705 \u2705 \u7b26\u5408 TDD-022 ChatWebSocketClient \u2705 <code>actor</code> \u2705 \u2705 \u7b26\u5408 <p>\u6aa2\u67e5\u9805\u76ee\uff1a - \u2705 HTTP Client \u4f7f\u7528 <code>struct</code> - \u2705 WebSocket Client \u4f7f\u7528 <code>actor</code>\uff08\u7dda\u7a0b\u5b89\u5168\uff09 - \u2705 \u5167\u90e8\u4f7f\u7528 <code>XXXAPI.XXXRepository</code> - \u2705 \u65b9\u6cd5\u76f4\u63a5\u59d4\u6d3e\u7d66 Repository - \u2705 \u4f7f\u7528 <code>public</code> \u4fee\u98fe\u7b26</p>"},{"location":"12_Tickets/TDD_TICKETS_REVIEW/#4-repository-tickets-2","title":"4. Repository Tickets (2 \u500b)","text":"Ticket ID \u6a19\u984c Actor Protocol DTO \u2192 Domain \u8f49\u63db \u72c0\u614b TDD-030 PrematchCommentRepository \u2705 \u2705 \u2705 Extension \u2705 \u7b26\u5408 TDD-031 LiveChatRepository \u2705 \u2705 \u2705 Extension \u2705 \u7b26\u5408 <p>\u6aa2\u67e5\u9805\u76ee\uff1a - \u2705 Repository \u4f7f\u7528 <code>actor</code> - \u2705 \u5b9a\u7fa9 Repository Protocol - \u2705 DTO \u2192 Domain Model \u8f49\u63db\u4f7f\u7528 extension - \u2705 \u65b9\u6cd5\u4f7f\u7528 <code>async throws</code> - \u2705 \u4f7f\u7528 <code>PrematchComment.XXX</code> / <code>LiveChat.XXX</code> \u547d\u540d\u7a7a\u9593</p>"},{"location":"12_Tickets/TDD_TICKETS_REVIEW/#5-usecase-tickets-9","title":"5. UseCase Tickets (9 \u500b)","text":"Ticket ID \u6a19\u984c Struct execute(input:) Input/Output Model \u72c0\u614b TDD-040 ReloadCommentListUseCase \u2705 \u2705 \u2705 \u2705 \u7b26\u5408 TDD-041 PublishCommentUseCase \u2705 \u2705 \u2705 \u2705 \u7b26\u5408 TDD-042 ToggleLikeUseCase \u2705 \u2705 \u2705 \u2705 \u7b26\u5408 TDD-043 LoadRepliesUseCase \u2705 \u2705 \u2705 \u2705 \u7b26\u5408 TDD-044 NavigateToProfileUseCase \u2705 \u2705 \u2705 \u2705 \u7b26\u5408 TDD-045 SendChatMessageUseCase \u2705 \u2705 \u2705 \u2705 \u7b26\u5408 TDD-046 JoinChatroomUseCase \u2705 \u2705 \u2705 \u2705 \u7b26\u5408 TDD-047 LeaveChatroomUseCase \u2705 \u2705 \u2705 \u2705 \u7b26\u5408 TDD-048 BlockUserUseCase \u2705 \u2705 \u2705 \u2705 \u7b26\u5408 <p>\u6aa2\u67e5\u9805\u76ee\uff1a - \u2705 UseCase \u4f7f\u7528 <code>struct</code> - \u2705 \u63d0\u4f9b <code>execute(input:)</code> \u65b9\u6cd5 - \u2705 Input/Output \u4f7f\u7528 nested <code>struct</code> - \u2705 Input/Output \u5be6\u4f5c <code>Equatable</code>\u3001<code>Sendable</code> - \u2705 \u4f7f\u7528 <code>PrematchComment.XXX</code> / <code>LiveChat.XXX</code> \u547d\u540d\u7a7a\u9593 - \u2705 \u4f7f\u7528 <code>public</code> \u4fee\u98fe\u7b26</p>"},{"location":"12_Tickets/TDD_TICKETS_REVIEW/#6-feature-tickets-2","title":"6. Feature Tickets (2 \u500b)","text":"Ticket ID \u6a19\u984c @Reducer @ObservableState @CasePathable \u72c0\u614b TDD-050 PrematchCommentFeature \u2705 \u2705 \u2705 \u2705 \u7b26\u5408 TDD-051 LiveChatFeature \u2705 \u2705 \u2705 \u2705 \u7b26\u5408 <p>\u6aa2\u67e5\u9805\u76ee\uff1a - \u2705 Feature \u4f7f\u7528 <code>@Reducer</code> macro - \u2705 State \u4f7f\u7528 <code>@ObservableState</code> struct - \u2705 Action \u4f7f\u7528 <code>@CasePathable</code> enum - \u2705 \u4f7f\u7528 <code>@Dependency</code> \u6ce8\u5165\u4f9d\u8cf4 - \u2705 \u4f7f\u7528 <code>Reduce</code> \u5be6\u4f5c reducer \u908f\u8f2f - \u2705 \u4f7f\u7528 <code>Effect</code> \u8655\u7406\u7570\u6b65\u64cd\u4f5c - \u2705 \u653e\u5728 namespace extension \u5167</p>"},{"location":"12_Tickets/TDD_TICKETS_REVIEW/#7-view-tickets-2","title":"7. View Tickets (2 \u500b)","text":"Ticket ID \u6a19\u984c SwiftUI @Bindable StoreOf \u72c0\u614b TDD-060 PrematchCommentView \u2705 \u2705 \u2705 \u2705 \u7b26\u5408 TDD-061 LiveDetailView \u2705 \u2705 \u2705 \u2705 \u7b26\u5408 <p>\u6aa2\u67e5\u9805\u76ee\uff1a - \u2705 View \u4f7f\u7528 <code>struct</code>\uff0c\u5be6\u4f5c <code>View</code> protocol - \u2705 \u4f7f\u7528 <code>@Bindable</code> \u7d81\u5b9a Store - \u2705 \u4f7f\u7528 <code>StoreOf&lt;Feature&gt;</code> \u985e\u578b - \u2705 \u4f7f\u7528 <code>@ViewBuilder</code> \u7d44\u7e54 View \u7d50\u69cb - \u2705 \u4f7f\u7528 extension \u5206\u96e2 View builders - \u2705 \u4f7f\u7528 MARK \u8a3b\u89e3\u7d44\u7e54\u4ee3\u78bc</p>"},{"location":"12_Tickets/TDD_TICKETS_REVIEW/#_4","title":"\ud83d\udcca \u6574\u9ad4\u7d71\u8a08","text":""},{"location":"12_Tickets/TDD_TICKETS_REVIEW/#_5","title":"\u7b26\u5408\u898f\u7bc4\u7d71\u8a08","text":"<ul> <li>Domain Model: 6/6 (100%) \u2705</li> <li>API: 2/2 (100%) \u2705</li> <li>Client: 3/3 (100%) \u2705</li> <li>Repository: 2/2 (100%) \u2705</li> <li>UseCase: 9/9 (100%) \u2705</li> <li>Feature: 2/2 (100%) \u2705</li> <li>View: 2/2 (100%) \u2705</li> </ul> <p>\u7e3d\u8a08: 26/26 (100%) \u2705</p>"},{"location":"12_Tickets/TDD_TICKETS_REVIEW/#_6","title":"\u2705 \u95dc\u9375\u898f\u7bc4\u7b26\u5408\u6027","text":""},{"location":"12_Tickets/TDD_TICKETS_REVIEW/#1-namespace-enum","title":"1. Namespace Enum \u4f7f\u7528","text":"<ul> <li>\u2705 \u6240\u6709 Domain Model \u4f7f\u7528 namespace enum</li> <li>\u2705 \u6240\u6709 API \u4f7f\u7528 namespace enum</li> <li>\u2705 \u547d\u540d\u7a7a\u9593\u6e05\u6670\uff1a<code>PrematchComment</code>\u3001<code>LiveChat</code>\u3001<code>Shared</code>\u3001<code>PrematchCommentAPI</code>\u3001<code>ChatAPI</code></li> </ul>"},{"location":"12_Tickets/TDD_TICKETS_REVIEW/#2-extension","title":"2. Extension \u5206\u96e2","text":"<ul> <li>\u2705 API \u4f7f\u7528 extension \u5206\u96e2 Endpoint/Models/Repository</li> <li>\u2705 Repository \u4f7f\u7528 extension \u5206\u96e2 DTO \u2192 Domain \u8f49\u63db</li> <li>\u2705 View \u4f7f\u7528 extension \u5206\u96e2 View builders</li> </ul>"},{"location":"12_Tickets/TDD_TICKETS_REVIEW/#3-actor","title":"3. Actor \u4f7f\u7528","text":"<ul> <li>\u2705 Repository \u4f7f\u7528 <code>actor</code>\uff08\u7dda\u7a0b\u5b89\u5168\uff09</li> <li>\u2705 WebSocket Client \u4f7f\u7528 <code>actor</code></li> </ul>"},{"location":"12_Tickets/TDD_TICKETS_REVIEW/#4-tca","title":"4. TCA \u6574\u5408","text":"<ul> <li>\u2705 Feature \u4f7f\u7528 <code>@Reducer</code> \u548c <code>@ObservableState</code></li> <li>\u2705 View \u4f7f\u7528 <code>@Bindable</code> \u548c <code>StoreOf&lt;Feature&gt;</code></li> <li>\u2705 Action \u4f7f\u7528 <code>@CasePathable</code> enum</li> </ul>"},{"location":"12_Tickets/TDD_TICKETS_REVIEW/#5","title":"5. \u547d\u540d\u898f\u7bc4","text":"<ul> <li>\u2705 \u4f7f\u7528 <code>public</code> \u4fee\u98fe\u7b26</li> <li>\u2705 \u5be6\u4f5c <code>Sendable</code>\u3001<code>Equatable</code> protocols</li> <li>\u2705 \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c</li> </ul>"},{"location":"12_Tickets/TDD_TICKETS_REVIEW/#_7","title":"\ud83d\udcdd \u5be6\u4f5c\u898f\u7bc4\u4e00\u81f4\u6027","text":""},{"location":"12_Tickets/TDD_TICKETS_REVIEW/#tickets","title":"\u6240\u6709 Tickets \u90fd\u5305\u542b\uff1a","text":"<ol> <li>\u2705 \u5be6\u4f5c\u898f\u7bc4 / Implementation Guidelines \u7ae0\u7bc0</li> <li>\u2705 \u6a94\u6848\u7d50\u69cb / File Structure \u8aaa\u660e</li> <li>\u2705 \u7a0b\u5f0f\u78bc\u7bc4\u4f8b / Code Example \u6216 Code Examples</li> <li>\u2705 \u547d\u540d\u898f\u7bc4 / Naming Conventions \u8aaa\u660e</li> <li>\u2705 \u9a57\u6536\u689d\u4ef6 / Acceptance Criteria \u66f4\u65b0</li> </ol>"},{"location":"12_Tickets/TDD_TICKETS_REVIEW/#_8","title":"\u7a0b\u5f0f\u78bc\u7bc4\u4f8b\u54c1\u8cea","text":"<ul> <li>\u2705 \u6240\u6709\u7bc4\u4f8b\u90fd\u4f7f\u7528\u6b63\u78ba\u7684\u547d\u540d\u7a7a\u9593</li> <li>\u2705 \u6240\u6709\u7bc4\u4f8b\u90fd\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c</li> <li>\u2705 \u6240\u6709\u7bc4\u4f8b\u90fd\u5305\u542b\u5fc5\u8981\u7684 protocols \u548c\u4fee\u98fe\u7b26</li> </ul>"},{"location":"12_Tickets/TDD_TICKETS_REVIEW/#_9","title":"\ud83c\udfaf \u7d50\u8ad6","text":"<p>\u6240\u6709 26 \u500b TDD tickets \u90fd\u5df2\u6210\u529f\u6539\u5beb\uff0c\u5b8c\u5168\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u7684\u898f\u7bc4\uff1a</p> <ol> <li>\u2705 \u547d\u540d\u7a7a\u9593\u6e05\u6670\uff1a\u4f7f\u7528 namespace enum \u7d44\u7e54\u4ee3\u78bc</li> <li>\u2705 \u95dc\u6ce8\u9ede\u5206\u96e2\uff1a\u4f7f\u7528 extension \u5206\u96e2\u4e0d\u540c\u8077\u8cac</li> <li>\u2705 \u7dda\u7a0b\u5b89\u5168\uff1aRepository \u548c WebSocket Client \u4f7f\u7528 actor</li> <li>\u2705 TCA \u6574\u5408\uff1aFeature \u548c View \u6b63\u78ba\u4f7f\u7528 TCA \u6a21\u5f0f</li> <li>\u2705 \u4e00\u81f4\u6027\uff1a\u6240\u6709 tickets \u9075\u5faa\u76f8\u540c\u7684\u5be6\u4f5c\u898f\u7bc4\u548c\u547d\u540d\u7d04\u5b9a</li> </ol> <p>\u6240\u6709 tickets \u5df2\u6e96\u5099\u597d\u9032\u884c\u958b\u767c\u5be6\u4f5c\uff01 \ud83d\ude80</p>"},{"location":"12_Tickets/TDD_TICKETS_REVIEW/#_10","title":"\ud83d\udccc \u5efa\u8b70","text":""},{"location":"12_Tickets/TDD_TICKETS_REVIEW/#_11","title":"\u958b\u767c\u6642\u6ce8\u610f\u4e8b\u9805","text":"<ol> <li>\u56b4\u683c\u9075\u5faa\u6a94\u6848\u7d50\u69cb\uff1a\u6309\u7167 TDD \u4e2d\u5b9a\u7fa9\u7684\u6a94\u6848\u7d50\u69cb\u7d44\u7e54\u4ee3\u78bc</li> <li>\u4f7f\u7528\u63d0\u4f9b\u7684\u7a0b\u5f0f\u78bc\u7bc4\u4f8b\uff1a\u4f5c\u70ba\u5be6\u4f5c\u7684\u8d77\u9ede</li> <li>\u9075\u5faa\u547d\u540d\u898f\u7bc4\uff1a\u78ba\u4fdd\u6240\u6709\u547d\u540d\u7b26\u5408 TDD \u4e2d\u7684\u898f\u7bc4</li> <li>\u5be6\u4f5c\u6240\u6709\u9a57\u6536\u689d\u4ef6\uff1a\u78ba\u4fdd\u6240\u6709\u9a57\u6536\u689d\u4ef6\u90fd\u901a\u904e</li> </ol>"},{"location":"12_Tickets/TDD_TICKETS_REVIEW/#_12","title":"\u5f8c\u7e8c\u7dad\u8b77","text":"<ol> <li>\u4fdd\u6301\u4e00\u81f4\u6027\uff1a\u65b0\u589e tickets \u6642\u61c9\u9075\u5faa\u76f8\u540c\u7684\u898f\u7bc4</li> <li>\u66f4\u65b0\u7bc4\u4f8b\uff1a\u5982\u679c\u53c3\u8003\u4ee3\u78bc\u98a8\u683c\u6709\u8b8a\u66f4\uff0c\u61c9\u540c\u6b65\u66f4\u65b0\u6240\u6709 TDD tickets</li> <li>\u6587\u6a94\u540c\u6b65\uff1a\u78ba\u4fdd TDD \u8207\u5be6\u969b\u4ee3\u78bc\u4fdd\u6301\u540c\u6b65</li> </ol>"},{"location":"12_Tickets/TICKETS_COMPLETENESS_ANALYSIS/","title":"TDD Tickets \u5b8c\u6574\u6027\u5206\u6790","text":""},{"location":"12_Tickets/TICKETS_COMPLETENESS_ANALYSIS/#_1","title":"\u5206\u6790\u65e5\u671f","text":"<p>2025-11-28</p>"},{"location":"12_Tickets/TICKETS_COMPLETENESS_ANALYSIS/#tickets","title":"\u73fe\u6709 Tickets \u7d71\u8a08","text":"\u985e\u578b \u6578\u91cf Ticket IDs \u72c0\u614b Domain Model 6 TDD-001 ~ TDD-006 \u2705 \u5b8c\u6574 API 2 TDD-010, TDD-011 \u2705 \u5b8c\u6574 Client 3 TDD-020 ~ TDD-022 \u2705 \u5b8c\u6574 Repository 2 TDD-030, TDD-031 \u2705 \u5b8c\u6574 UseCase 9 TDD-040 ~ TDD-048 \u2705 \u5b8c\u6574 Feature 2 TDD-050, TDD-051 \u2705 \u5b8c\u6574 View 2 TDD-060, TDD-061 \u2705 \u5b8c\u6574 \u7e3d\u8a08 26 - \u2705 \u5b8c\u6574"},{"location":"12_Tickets/TICKETS_COMPLETENESS_ANALYSIS/#_2","title":"\u6a21\u7d44\u8077\u8cac\u5c0d\u7167\u6aa2\u67e5","text":""},{"location":"12_Tickets/TICKETS_COMPLETENESS_ANALYSIS/#_3","title":"\u2705 \u5df2\u6db5\u84cb\u7684\u6a21\u7d44","text":""},{"location":"12_Tickets/TICKETS_COMPLETENESS_ANALYSIS/#domain-model","title":"Domain Model","text":"<ul> <li>\u2705 Comment Entity (TDD-001)</li> <li>\u2705 CommentMeta Entity (TDD-002)</li> <li>\u2705 UserInfo Entity (TDD-003)</li> <li>\u2705 Message Entity (TDD-004)</li> <li>\u2705 ChatroomInfo Entity (TDD-005)</li> <li>\u2705 Value Objects (TDD-006)</li> </ul>"},{"location":"12_Tickets/TICKETS_COMPLETENESS_ANALYSIS/#api","title":"API","text":"<ul> <li>\u2705 PrematchCommentAPI (TDD-010)</li> <li>\u2705 ChatAPI (TDD-011)</li> </ul>"},{"location":"12_Tickets/TICKETS_COMPLETENESS_ANALYSIS/#client","title":"Client","text":"<ul> <li>\u2705 PrematchCommentClient (TDD-020)</li> <li>\u2705 LiveChatClient (TDD-021)</li> <li>\u2705 ChatWebSocketClient (TDD-022)</li> </ul>"},{"location":"12_Tickets/TICKETS_COMPLETENESS_ANALYSIS/#repository","title":"Repository","text":"<ul> <li>\u2705 PrematchCommentRepository (TDD-030)</li> <li>\u2705 LiveChatRepository (TDD-031)</li> </ul>"},{"location":"12_Tickets/TICKETS_COMPLETENESS_ANALYSIS/#usecase","title":"UseCase","text":"<ul> <li>\u2705 ReloadCommentListUseCase (TDD-040)</li> <li>\u2705 PublishCommentUseCase (TDD-041)</li> <li>\u2705 ToggleLikeUseCase (TDD-042)</li> <li>\u2705 LoadRepliesUseCase (TDD-043)</li> <li>\u2705 NavigateToProfileUseCase (TDD-044)</li> <li>\u2705 SendChatMessageUseCase (TDD-045)</li> <li>\u2705 JoinChatroomUseCase (TDD-046)</li> <li>\u2705 LeaveChatroomUseCase (TDD-047)</li> <li>\u2705 BlockUserUseCase (TDD-048)</li> </ul>"},{"location":"12_Tickets/TICKETS_COMPLETENESS_ANALYSIS/#feature","title":"Feature","text":"<ul> <li>\u2705 PrematchCommentFeature (TDD-050)</li> <li>\u2705 LiveChatFeature (TDD-051)</li> </ul>"},{"location":"12_Tickets/TICKETS_COMPLETENESS_ANALYSIS/#view","title":"View","text":"<ul> <li>\u2705 PrematchCommentView (TDD-060)</li> <li>\u2705 LiveDetailView (TDD-061)</li> </ul>"},{"location":"12_Tickets/TICKETS_COMPLETENESS_ANALYSIS/#tickets_1","title":"\u4e0d\u9700\u8981 Tickets \u7684\u9805\u76ee","text":""},{"location":"12_Tickets/TICKETS_COMPLETENESS_ANALYSIS/#external-shared-modules","title":"External Shared Modules\uff08\u5916\u90e8\u5957\u4ef6\uff09","text":"<p>\u4ee5\u4e0b\u6a21\u7d44\u662f\u5916\u90e8\u5957\u4ef6\uff0c\u4e0d\u9700\u8981\u5be6\u4f5c tickets\uff1a</p> <ol> <li>PersonalPage Package\uff08External\uff09</li> <li>\u8077\u8cac\uff1a\u767b\u5165\u6d41\u7a0b\u3001\u7528\u6236\u8a8d\u8b49</li> <li>\u4f7f\u7528\u65b9\u5f0f\uff1a\u900f\u904e Adapter Protocol \u6574\u5408</li> <li> <p>\u72c0\u614b\uff1a\u2705 \u5df2\u5728\u76f8\u95dc UseCase tickets \u4e2d\u5305\u542b\u6574\u5408\u908f\u8f2f</p> </li> <li> <p>FComSharedFlow Package\uff08External\uff09</p> </li> <li>\u8077\u8cac\uff1aNickname \u5efa\u7acb\u6d41\u7a0b</li> <li>\u4f7f\u7528\u65b9\u5f0f\uff1a\u900f\u904e Adapter Protocol \u6574\u5408</li> <li> <p>\u72c0\u614b\uff1a\u2705 \u5df2\u5728\u76f8\u95dc UseCase tickets \u4e2d\u5305\u542b\u6574\u5408\u908f\u8f2f</p> </li> <li> <p>FactsCenter Package\uff08External\uff09</p> </li> <li>\u8077\u8cac\uff1aEvent Status \u8a02\u95b1\u8207\u901a\u77e5</li> <li>\u4f7f\u7528\u65b9\u5f0f\uff1a\u900f\u904e Protocol \u6574\u5408</li> <li>\u72c0\u614b\uff1a\u2705 \u5df2\u5728 PrematchCommentFeature ticket \u4e2d\u5305\u542b\u6574\u5408\u908f\u8f2f</li> </ol>"},{"location":"12_Tickets/TICKETS_COMPLETENESS_ANALYSIS/#tickets_2","title":"\u5df2\u5305\u542b\u5728\u73fe\u6709 Tickets \u4e2d\u7684\u9805\u76ee","text":"<ol> <li>\u932f\u8aa4\u8655\u7406\uff08Error Handling\uff09</li> <li>\u2705 \u5df2\u5728\u6240\u6709 Client\u3001Repository\u3001UseCase tickets \u4e2d\u5305\u542b</li> <li> <p>\u2705 \u6709\u5c08\u9580\u7684 Error Handling \u6587\u6a94\uff08<code>09_Error Handling/01_error_handling.md</code>\uff09</p> </li> <li> <p>\u6e2c\u8a66\uff08Testing\uff09</p> </li> <li>\u2705 \u5df2\u5728\u6240\u6709 tickets \u7684\u9a57\u6536\u689d\u4ef6\u4e2d\u5305\u542b</li> <li>\u2705 \u6709\u5c08\u9580\u7684 Test Scenarios \u6587\u6a94\uff08<code>10_Test Scenarios/01_test_scenarios.md</code>\uff09</li> <li> <p>\u2705 \u6bcf\u500b ticket \u90fd\u8981\u6c42 Unit Test \u8986\u84cb\u7387 \u2265 80-90%</p> </li> <li> <p>DTO \u2192 Domain Model \u8f49\u63db</p> </li> <li> <p>\u2705 \u5df2\u5728 Repository tickets \u4e2d\u5305\u542b\uff08\u4f7f\u7528 extension\uff09</p> </li> <li> <p>Adapter Protocol \u6574\u5408</p> </li> <li>\u2705 \u5df2\u5728\u76f8\u95dc UseCase tickets \u4e2d\u5305\u542b\uff08PublishCommentUseCase\u3001SendChatMessageUseCase \u7b49\uff09</li> </ol>"},{"location":"12_Tickets/TICKETS_COMPLETENESS_ANALYSIS/#tickets_3","title":"\u6f5b\u5728\u53ef\u9078 Tickets\uff08\u975e\u5fc5\u9808\uff09","text":""},{"location":"12_Tickets/TICKETS_COMPLETENESS_ANALYSIS/#1-ticket","title":"1. \u6574\u5408\u6e2c\u8a66 Ticket\uff08\u53ef\u9078\uff09","text":"<p>\u5efa\u8b70 ID: TDD-070\uff08\u5982\u679c\u9700\u8981\u7684\u8a71\uff09</p> <p>\u8aaa\u660e\uff1a - \u7aef\u5230\u7aef\u6574\u5408\u6e2c\u8a66 - \u8de8\u5c64\u7d1a\u6574\u5408\u6e2c\u8a66 - \u4f46\u9019\u901a\u5e38\u53ef\u4ee5\u5728\u5404\u500b tickets \u7684 Integration Test \u4e2d\u5b8c\u6210</p> <p>\u5efa\u8b70\uff1a\u274c \u4e0d\u9700\u8981\uff0c\u56e0\u70ba\uff1a - \u6bcf\u500b ticket \u90fd\u5df2\u6709 Integration Test \u8981\u6c42 - \u53ef\u4ee5\u5728 Feature/View tickets \u4e2d\u6db5\u84cb\u7aef\u5230\u7aef\u6e2c\u8a66</p>"},{"location":"12_Tickets/TICKETS_COMPLETENESS_ANALYSIS/#2-ticket","title":"2. \u6548\u80fd\u512a\u5316 Ticket\uff08\u53ef\u9078\uff09","text":"<p>\u5efa\u8b70 ID: TDD-071\uff08\u5982\u679c\u9700\u8981\u7684\u8a71\uff09</p> <p>\u8aaa\u660e\uff1a - \u6548\u80fd\u512a\u5316 - \u5feb\u53d6\u7b56\u7565 - \u4f46\u9019\u901a\u5e38\u53ef\u4ee5\u5728\u5404\u500b tickets \u7684\u5be6\u4f5c\u4e2d\u5b8c\u6210</p> <p>\u5efa\u8b70\uff1a\u274c \u4e0d\u9700\u8981\uff0c\u56e0\u70ba\uff1a - \u6548\u80fd\u512a\u5316\u53ef\u4ee5\u5728\u5404\u500b tickets \u7684\u5be6\u4f5c\u4e2d\u5b8c\u6210 - \u53ef\u4ee5\u5728\u5f8c\u7e8c\u8fed\u4ee3\u4e2d\u8655\u7406</p>"},{"location":"12_Tickets/TICKETS_COMPLETENESS_ANALYSIS/#3-ticket","title":"3. \u6587\u6a94 Ticket\uff08\u53ef\u9078\uff09","text":"<p>\u8aaa\u660e\uff1a - API \u6587\u6a94 - \u4f7f\u7528\u8aaa\u660e\u6587\u6a94 - \u4f46\u9019\u4e9b\u5df2\u7d93\u5728 TDD \u6587\u6a94\u4e2d\u5b8c\u6210</p> <p>\u5efa\u8b70\uff1a\u274c \u4e0d\u9700\u8981\uff0c\u56e0\u70ba\uff1a - TDD \u6587\u6a94\u5df2\u7d93\u975e\u5e38\u5b8c\u6574 - \u4e0d\u9700\u8981\u984d\u5916\u7684\u6587\u6a94 tickets</p>"},{"location":"12_Tickets/TICKETS_COMPLETENESS_ANALYSIS/#_4","title":"\u7d50\u8ad6","text":""},{"location":"12_Tickets/TICKETS_COMPLETENESS_ANALYSIS/#tickets_4","title":"\u2705 \u4e0d\u9700\u8981\u6dfb\u52a0\u65b0\u7684 tickets","text":"<p>\u7406\u7531\uff1a</p> <ol> <li>\u6240\u6709\u6838\u5fc3\u5be6\u4f5c\u7d44\u4ef6\u90fd\u5df2\u6db5\u84cb</li> <li> <p>Domain Model\u3001API\u3001Client\u3001Repository\u3001UseCase\u3001Feature\u3001View \u90fd\u5df2\u5b8c\u6574</p> </li> <li> <p>\u6240\u6709\u6a21\u7d44\u8077\u8cac\u90fd\u5df2\u5c0d\u61c9</p> </li> <li> <p>\u6a21\u7d44\u8077\u8cac\u6587\u4ef6\u4e2d\u7684\u6240\u6709\u6a21\u7d44\u90fd\u6709\u5c0d\u61c9\u7684 tickets</p> </li> <li> <p>\u5916\u90e8\u4f9d\u8cf4\u5df2\u6b63\u78ba\u8655\u7406</p> </li> <li> <p>External Shared Modules \u900f\u904e Adapter Protocol \u6574\u5408\uff0c\u5df2\u5728\u76f8\u95dc UseCase tickets \u4e2d\u5305\u542b</p> </li> <li> <p>\u975e\u6838\u5fc3\u529f\u80fd\u5df2\u5305\u542b</p> </li> <li> <p>\u932f\u8aa4\u8655\u7406\u3001\u6e2c\u8a66\u3001DTO \u8f49\u63db\u7b49\u90fd\u5df2\u5305\u542b\u5728\u73fe\u6709 tickets \u4e2d</p> </li> <li> <p>\u53ef\u9078\u9805\u76ee\u975e\u5fc5\u9808</p> </li> <li>\u6574\u5408\u6e2c\u8a66\u3001\u6548\u80fd\u512a\u5316\u3001\u6587\u6a94\u7b49\u53ef\u4ee5\u5728\u73fe\u6709 tickets \u4e2d\u5b8c\u6210\u6216\u5f8c\u7e8c\u8fed\u4ee3\u8655\u7406</li> </ol>"},{"location":"12_Tickets/TICKETS_COMPLETENESS_ANALYSIS/#_5","title":"\ud83d\udcca \u5b8c\u6574\u6027\u8a55\u5206","text":"\u9805\u76ee \u8a55\u5206 \u8aaa\u660e \u6838\u5fc3\u5be6\u4f5c\u7d44\u4ef6 \u2705 100% \u6240\u6709\u6838\u5fc3\u7d44\u4ef6\u90fd\u6709\u5c0d\u61c9 tickets \u6a21\u7d44\u8077\u8cac\u5c0d\u61c9 \u2705 100% \u6240\u6709\u6a21\u7d44\u8077\u8cac\u90fd\u6709\u5c0d\u61c9 tickets \u5916\u90e8\u4f9d\u8cf4\u6574\u5408 \u2705 100% \u5916\u90e8\u4f9d\u8cf4\u6574\u5408\u5df2\u5728\u76f8\u95dc tickets \u4e2d\u5305\u542b \u975e\u6838\u5fc3\u529f\u80fd \u2705 100% \u932f\u8aa4\u8655\u7406\u3001\u6e2c\u8a66\u7b49\u90fd\u5df2\u5305\u542b \u6574\u9ad4\u5b8c\u6574\u6027 \u2705 100% \u6240\u6709\u5fc5\u8981\u7684 tickets \u90fd\u5df2\u5305\u542b"},{"location":"12_Tickets/TICKETS_COMPLETENESS_ANALYSIS/#_6","title":"\u5efa\u8b70","text":""},{"location":"12_Tickets/TICKETS_COMPLETENESS_ANALYSIS/#_7","title":"\u958b\u767c\u968e\u6bb5","text":"<ol> <li>\u6309\u7167\u73fe\u6709 tickets \u9806\u5e8f\u958b\u767c\uff1a\u9075\u5faa README.md \u4e2d\u7684\u958b\u767c\u9806\u5e8f</li> <li>\u78ba\u4fdd\u9a57\u6536\u689d\u4ef6\uff1a\u6bcf\u500b ticket \u90fd\u8981\u6eff\u8db3\u6240\u6709\u9a57\u6536\u689d\u4ef6</li> <li>\u4fdd\u6301\u4e00\u81f4\u6027\uff1a\u9075\u5faa\u53c3\u8003\u4ee3\u78bc\u98a8\u683c\u548c\u547d\u540d\u898f\u7bc4</li> </ol>"},{"location":"12_Tickets/TICKETS_COMPLETENESS_ANALYSIS/#_8","title":"\u5f8c\u7e8c\u7dad\u8b77","text":"<ol> <li>\u6839\u64da\u5be6\u969b\u9700\u6c42\u8abf\u6574\uff1a\u5982\u679c\u958b\u767c\u904e\u7a0b\u4e2d\u767c\u73fe\u9700\u8981\u984d\u5916\u7684 tickets\uff0c\u53ef\u4ee5\u96a8\u6642\u6dfb\u52a0</li> <li>\u4fdd\u6301\u6587\u6a94\u540c\u6b65\uff1a\u78ba\u4fdd TDD \u6587\u6a94\u8207\u5be6\u969b\u4ee3\u78bc\u4fdd\u6301\u540c\u6b65</li> <li>\u5b9a\u671f\u6aa2\u8996\uff1a\u5b9a\u671f\u6aa2\u8996 tickets \u7684\u5b8c\u6574\u6027\u548c\u6e96\u78ba\u6027</li> </ol>"},{"location":"12_Tickets/TICKETS_COMPLETENESS_ANALYSIS/#_9","title":"\u7e3d\u7d50","text":"<p>\u2705 \u6240\u6709\u5fc5\u8981\u7684 tickets \u90fd\u5df2\u5305\u542b\uff0c\u4e0d\u9700\u8981\u6dfb\u52a0\u65b0\u7684 tickets\u3002</p> <p>\u73fe\u6709\u7684 26 \u500b tickets \u5df2\u7d93\u5b8c\u6574\u6db5\u84cb\u4e86\uff1a - \u6240\u6709\u6838\u5fc3\u5be6\u4f5c\u7d44\u4ef6 - \u6240\u6709\u6a21\u7d44\u8077\u8cac - \u6240\u6709\u5916\u90e8\u4f9d\u8cf4\u6574\u5408 - \u6240\u6709\u975e\u6838\u5fc3\u529f\u80fd\uff08\u932f\u8aa4\u8655\u7406\u3001\u6e2c\u8a66\u7b49\uff09</p> <p>\u53ef\u4ee5\u958b\u59cb\u6309\u7167 tickets \u9806\u5e8f\u9032\u884c\u958b\u767c\uff01 \ud83d\ude80</p>"},{"location":"12_Tickets/jira_tickets_mapping/","title":"Local Tickets \u8207 Jira Tickets \u5c0d\u61c9\u8868","text":"<p>\u672c\u6587\u4ef6\u5217\u51fa\u6240\u6709 Local Tickets \u5c0d\u61c9\u7684 Jira Ticket \u9023\u7d50\u53ca\u958b\u767c\u6642\u9593\u8cc7\u8a0a\u3002</p> <p>\u6700\u5f8c\u66f4\u65b0: $(date +%Y-%m-%d\\ %H:%M)</p>"},{"location":"12_Tickets/jira_tickets_mapping/#_1","title":"\u5b8c\u6574\u5c0d\u61c9\u8868","text":"Ticket ID \u6a19\u984c Jira Key Jira \u9023\u7d50 \u539f\u59cb\u4f30\u6642 \u5df2\u82b1\u8cbb\u6642\u9593 \u5269\u9918\u6642\u9593 \u5efa\u7acb\u6642\u9593 \u66f4\u65b0\u6642\u9593 \u89e3\u6c7a\u6642\u9593 \u72c0\u614b"},{"location":"12_Tickets/jira_tickets_mapping/#_2","title":"\u7d71\u8a08\u8cc7\u8a0a","text":""},{"location":"12_Tickets/jira_tickets_mapping/#_3","title":"\u6309\u72c0\u614b\u7d71\u8a08","text":"\u72c0\u614b \u6578\u91cf \u9032\u884c\u4e2d $(sqlite3 \"$DB_FILE\" \"SELECT COUNT(*) FROM jira_issues WHERE status = '\u9032\u884c\u4e2d';\") Backlog $(sqlite3 \"$DB_FILE\" \"SELECT COUNT(*) FROM jira_issues WHERE status = 'Backlog';\")"},{"location":"12_Tickets/jira_tickets_mapping/#_4","title":"\u5099\u8a3b","text":"<ul> <li>\u6642\u9593\u683c\u5f0f\u8aaa\u660e:</li> <li><code>2h 24m</code> = 2 \u5c0f\u6642 24 \u5206\u9418</li> <li><code>1d</code> = 1 \u5929</li> <li> <p><code>1w</code> = 1 \u9031</p> </li> <li> <p>\u72c0\u614b\u8aaa\u660e:</p> </li> <li><code>\u9032\u884c\u4e2d</code>: \u76ee\u524d\u6b63\u5728\u958b\u767c\u4e2d</li> <li> <p><code>Backlog</code>: \u5f85\u958b\u767c</p> </li> <li> <p>\u8cc7\u6599\u4f86\u6e90: <code>jira_tickets.db</code> \u8cc7\u6599\u5eab</p> </li> <li>\u66f4\u65b0\u65b9\u5f0f: \u57f7\u884c <code>./generate_jira_mapping.sh</code> \u5373\u53ef\u66f4\u65b0\u6b64\u6587\u4ef6</li> </ul>"},{"location":"12_Tickets/ticket_timeline/","title":"Ticket \u5be6\u4f5c\u6642\u9593\u8868","text":"<p>\u672c\u6587\u4ef6\u5217\u51fa\u6240\u6709 Ticket \u7684\u5be6\u4f5c\u6642\u9593\uff0c\u6309\u7167\u7d50\u675f\u65e5\u671f\uff08end_date\uff09\u6392\u5e8f\u3002</p> <p>\u6ce8\u610f\uff1a\u5df2\u6392\u9664 2025-12-18\uff08\u9031\u56db\uff09\u8acb\u5047\u65e5\u3002</p> ticket_id jira_key ticket_title start_date end_date duration (days) MAIN-View-EN FOOTBALL-9200 View Layer 2025-12-17 2025-12-26 10.0 MAIN-Feature-EN FOOTBALL-9197 Feature Layer 2025-12-16 2025-12-24 9.0 MAIN-UseCase-EN FOOTBALL-9187 UseCase Layer 2025-12-08 2025-12-22 15.0 MAIN-Repository-EN FOOTBALL-9184 Repository Layer 2025-12-04 2025-12-10 7.0 MAIN-Client-EN FOOTBALL-9180 Client Layer 2025-12-02 2025-12-10 9.0 MAIN-API-EN FOOTBALL-9177 API Layer 2025-12-01 2025-12-03 3.0 MAIN-Domain-Model-EN FOOTBALL-9170 Domain Model Layer 2025-11-27 2025-12-01 5.0 TDD-001 FOOTBALL-9171 \u5be6\u4f5c Comment Entity 2025-11-27 2025-11-28 0.3 TDD-002 FOOTBALL-9172 \u5be6\u4f5c CommentMeta Entity 2025-11-27 2025-11-28 0.3 TDD-003 FOOTBALL-9173 \u5be6\u4f5c UserInfo Entity 2025-11-27 2025-11-28 0.3 TDD-004 FOOTBALL-9174 \u5be6\u4f5c Message Entity 2025-11-28 2025-12-01 0.3 TDD-005 FOOTBALL-9175 \u5be6\u4f5c ChatroomInfo Entity 2025-11-28 2025-12-01 0.3 TDD-006 FOOTBALL-9176 \u5be6\u4f5c Value Objects\uff08SortMode\u3001Cursor\u3001PagingInfo\uff09 2025-11-28 2025-12-01 1.0 TDD-010 FOOTBALL-9178 \u5be6\u4f5c PrematchCommentAPI \u5b9a\u7fa9 2025-12-01 2025-12-02 1.0 TDD-011 FOOTBALL-9179 \u5be6\u4f5c ChatAPI \u5b9a\u7fa9 2025-12-01 2025-12-03 2.0 TDD-021 FOOTBALL-9182 \u5be6\u4f5c LiveChatClient\uff08HTTP\uff09 2025-12-02 2025-12-03 1.0 TDD-020 FOOTBALL-9181 \u5be6\u4f5c PrematchCommentClient\uff08HTTP\uff09 2025-12-02 2025-12-04 2.0 TDD-030 FOOTBALL-9185 \u5be6\u4f5c PrematchCommentRepository 2025-12-04 2025-12-08 2.0 TDD-022 FOOTBALL-9183 \u5be6\u4f5c ChatWebSocketClient\uff08WebSocket\uff09 2025-12-03 2025-12-10 5.0 TDD-031 FOOTBALL-9186 \u5be6\u4f5c LiveChatRepository 2025-12-05 2025-12-10 3.0 TDD-040 FOOTBALL-9188 \u5be6\u4f5c ReloadCommentListUseCase 2025-12-08 2025-12-10 2.0 TDD-042 FOOTBALL-9190 \u5be6\u4f5c ToggleLikeUseCase 2025-12-10 2025-12-12 2.0 TDD-043 FOOTBALL-9191 \u5be6\u4f5c LoadRepliesUseCase 2025-12-10 2025-12-12 2.0 TDD-044 FOOTBALL-9192 \u5be6\u4f5c NavigateToProfileUseCase 2025-12-11 2025-12-12 1.0 TDD-041 FOOTBALL-9189 \u5be6\u4f5c PublishCommentUseCase 2025-12-09 2025-12-16 5.0 TDD-048 FOOTBALL-9196 \u5be6\u4f5c BlockUserUseCase 2025-12-15 2025-12-16 1.0 TDD-047 FOOTBALL-9195 \u5be6\u4f5c LeaveChatroomUseCase 2025-12-15 2025-12-17 2.0 TDD-045 FOOTBALL-9193 \u5be6\u4f5c SendChatMessageUseCase 2025-12-11 2025-12-19 5.0 TDD-046 FOOTBALL-9194 \u5be6\u4f5c JoinChatroomUseCase 2025-12-12 2025-12-22 5.0 TDD-050 FOOTBALL-9198 \u5be6\u4f5c PrematchCommentFeature\uff08TCA Reducer\uff09 2025-12-16 2025-12-22 3.0 TDD-051 FOOTBALL-9199 \u5be6\u4f5c LiveChatFeature\uff08TCA Reducer\uff09 2025-12-16 2025-12-24 5.0 TDD-060 FOOTBALL-9201 \u5be6\u4f5c PrematchCommentView 2025-12-17 2025-12-25 5.0 TDD-061 FOOTBALL-9202 \u5be6\u4f5c LiveDetailView 2025-12-19 2025-12-26 5.0"},{"location":"12_Tickets/01_domain_model/TDD-001_Comment_Entity/","title":"TDD-001: Comment Entity","text":""},{"location":"12_Tickets/01_domain_model/TDD-001_Comment_Entity/#ticket-ticket-information","title":"Ticket \u8cc7\u8a0a / Ticket Information","text":"\u6b04\u4f4d \u503c Ticket ID TDD-001 Jira Key FOOTBALL-9171 \u6a19\u984c \u5be6\u4f5c Comment Entity \u985e\u578b Domain Model \u512a\u5148\u7d1a P0 \u6240\u5c6c Feature PrematchComment \u4f9d\u8cf4 Ticket - Story Point 1 \u4f30\u6642\uff08Senior iOS Engineer + AI \u8f14\u52a9\uff09 \u6a19\u6e96\uff1a0.3 \u5929\u6700\u56b4\u53b2\uff1a0.2 \u5929 \u958b\u767c\u65e5\u671f / Development Date 2025-11-27 (\u9031\u56db)"},{"location":"12_Tickets/01_domain_model/TDD-001_Comment_Entity/#description","title":"\u63cf\u8ff0 / Description","text":"<p>\u5b9a\u7fa9 Comment Entity Domain Model\u3002 / Define Comment Entity Domain Model\u3002</p>"},{"location":"12_Tickets/01_domain_model/TDD-001_Comment_Entity/#requirements","title":"\u9700\u6c42 / Requirements","text":"<ol> <li>\u5b9a\u7fa9 <code>PrematchComment</code> namespace enum / Define <code>PrematchComment</code> namespace enum</li> <li>\u5728 namespace \u5167\u5b9a\u7fa9 <code>Comment</code> struct / Define <code>Comment</code> struct within namespace</li> <li>\u5be6\u4f5c <code>Identifiable</code>\u3001<code>Equatable</code>\u3001<code>Sendable</code> / Implement <code>Identifiable</code>, <code>Equatable</code>, <code>Sendable</code></li> <li>\u4f7f\u7528 <code>public</code> \u4fee\u98fe\u7b26 / Use <code>public</code> modifier</li> <li>\u5b9a\u7fa9\u6240\u6709\u5fc5\u8981\u6b04\u4f4d\uff08id\u3001content\u3001likeCount\u3001authorId \u7b49\uff09 / Define all required fields (id, content, likeCount, authorId, etc.)</li> <li>\u6a94\u6848\u7d50\u69cb\uff1a<code>Sources/PrematchComment/Models/PrematchComment.swift</code> / File structure: <code>Sources/PrematchComment/Models/PrematchComment.swift</code></li> </ol>"},{"location":"12_Tickets/01_domain_model/TDD-001_Comment_Entity/#implementation-guidelines","title":"\u5be6\u4f5c\u898f\u7bc4 / Implementation Guidelines","text":""},{"location":"12_Tickets/01_domain_model/TDD-001_Comment_Entity/#file-structure","title":"\u6a94\u6848\u7d50\u69cb / File Structure","text":"<pre><code>Sources/PrematchComment/Models/\n  \u2514\u2500\u2500 PrematchComment.swift\n</code></pre>"},{"location":"12_Tickets/01_domain_model/TDD-001_Comment_Entity/#code-example","title":"\u7a0b\u5f0f\u78bc\u7bc4\u4f8b / Code Example","text":"<pre><code>import Foundation\n\n/// The namespace for types and functions related to PrematchComment\npublic enum PrematchComment {}\n\nextension PrematchComment {\n    public struct Comment: Identifiable, Equatable, Sendable {\n        public let id: String\n        public let content: String\n        public var likeCount: Int\n        public let authorId: String\n        public let authorNickname: String?\n        public let parentId: String?\n        public let createdAt: Date\n        public let refId: String\n        public let repliesCount: Int\n        public let likedByMe: Bool\n        public let isIsolated: Bool\n        public let isDeleted: Bool\n\n        public init(\n            id: String,\n            content: String,\n            likeCount: Int,\n            authorId: String,\n            authorNickname: String?,\n            parentId: String?,\n            createdAt: Date,\n            refId: String,\n            repliesCount: Int,\n            likedByMe: Bool,\n            isIsolated: Bool,\n            isDeleted: Bool\n        ) {\n            self.id = id\n            self.content = content\n            self.likeCount = likeCount\n            self.authorId = authorId\n            self.authorNickname = authorNickname\n            self.parentId = parentId\n            self.createdAt = createdAt\n            self.refId = refId\n            self.repliesCount = repliesCount\n            self.likedByMe = likedByMe\n            self.isIsolated = isIsolated\n            self.isDeleted = isDeleted\n        }\n\n        // Equatable: \u900f\u904e id \u4f86\u6bd4\u8f03\n        public static func == (lhs: Comment, rhs: Comment) -&gt; Bool {\n            lhs.id == rhs.id\n        }\n    }\n}\n</code></pre>"},{"location":"12_Tickets/01_domain_model/TDD-001_Comment_Entity/#naming-conventions","title":"\u547d\u540d\u898f\u7bc4 / Naming Conventions","text":"<ul> <li>\u4f7f\u7528 <code>PrematchComment</code> \u4f5c\u70ba namespace enum / Use <code>PrematchComment</code> as namespace enum</li> <li>Entity \u4f7f\u7528 <code>public struct</code>\uff0c\u653e\u5728 namespace extension \u5167 / Entity uses <code>public struct</code>, placed within namespace extension</li> <li>\u6240\u6709\u5c6c\u6027\u4f7f\u7528 <code>public let</code> \u6216 <code>public var</code> / All properties use <code>public let</code> or <code>public var</code></li> <li>\u5be6\u4f5c <code>Identifiable</code>\u3001<code>Equatable</code>\u3001<code>Sendable</code> protocols / Implement <code>Identifiable</code>, <code>Equatable</code>, <code>Sendable</code> protocols</li> </ul>"},{"location":"12_Tickets/01_domain_model/TDD-001_Comment_Entity/#acceptance-criteria","title":"\u9a57\u6536\u689d\u4ef6 / Acceptance Criteria","text":"<ul> <li>[ ] <code>PrematchComment</code> namespace enum \u5b9a\u7fa9\u5b8c\u6210 / <code>PrematchComment</code> namespace enum definition complete</li> <li>[ ] <code>Comment</code> struct \u5b9a\u7fa9\u5728 namespace extension \u5167 / <code>Comment</code> struct defined within namespace extension</li> <li>[ ] \u6240\u6709\u6b04\u4f4d\u985e\u578b\u6b63\u78ba\uff0c\u4f7f\u7528 <code>public</code> \u4fee\u98fe\u7b26 / All field types correct, using <code>public</code> modifier</li> <li>[ ] \u5be6\u4f5c <code>Identifiable</code>\u3001<code>Equatable</code>\u3001<code>Sendable</code> protocols / Implement <code>Identifiable</code>, <code>Equatable</code>, <code>Sendable</code> protocols</li> <li>[ ] Equatable \u5be6\u4f5c\u6b63\u78ba\uff08\u900f\u904e id \u6bd4\u8f03\uff09 / Equatable implementation correct (compare by id)</li> <li>[ ] \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c / File structure matches reference code style</li> <li>[ ] Unit Test \u8986\u84cb\u7387 \u2265 80% / Unit Test Coverage \u2265 80%</li> </ul>"},{"location":"12_Tickets/01_domain_model/TDD-001_Comment_Entity/#related-documents","title":"\u76f8\u95dc\u6587\u4ef6 / Related Documents","text":"<ul> <li>Domain Model \u5b9a\u7fa9\uff1a<code>output/LiveChat&amp;PrematchComment/04_Domain Model/01_domain_model.md</code></li> </ul>"},{"location":"12_Tickets/01_domain_model/TDD-001_Comment_Entity_en/","title":"TDD-001: Comment Entity","text":""},{"location":"12_Tickets/01_domain_model/TDD-001_Comment_Entity_en/#ticket-information","title":"Ticket Information","text":"<p>|------|-----| |  | Ticket ID | TDD-001 |  | |  | Jira Key | FOOTBALL-9171 |  | |  | Implement Comment Entity |  | |  | Type | Domain Model |  | |  | P0 |  | |  | PrematchComment |  | |  | - |  | |  | Story Point | 1 |  | |  | Standard\uff1a0.3 daysMost Stringent\uff1a0.2 days |  |</p>"},{"location":"12_Tickets/01_domain_model/TDD-001_Comment_Entity_en/#description","title":"Description","text":"<p>Define Comment Entity Domain Model\u3002</p>"},{"location":"12_Tickets/01_domain_model/TDD-001_Comment_Entity_en/#requirements","title":"Requirements","text":"<ol> <li>Define Comment Structure</li> <li>Implement Identifiable and Equatable</li> <li>Define all required fields (id, content, likeCount, authorId, etc.)</li> </ol>"},{"location":"12_Tickets/01_domain_model/TDD-001_Comment_Entity_en/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] Comment Entity Definition Complete</li> <li>[ ] All fields have correct types</li> <li>[ ] Equatable implementation is correct (compare via id)</li> <li>[ ] Unit Test Coverage \u2265 80%</li> </ul>"},{"location":"12_Tickets/01_domain_model/TDD-001_Comment_Entity_en/#related-documents","title":"Related Documents","text":"<ul> <li>Domain Model Definition: <code>output/LiveChat&amp;PrematchComment/04_Domain Model/01_domain_model.md</code></li> </ul>"},{"location":"12_Tickets/01_domain_model/TDD-002_CommentMeta_Entity/","title":"TDD-002: CommentMeta Entity","text":""},{"location":"12_Tickets/01_domain_model/TDD-002_CommentMeta_Entity/#ticket-ticket-information","title":"Ticket \u8cc7\u8a0a / Ticket Information","text":"\u6b04\u4f4d \u503c Ticket ID TDD-002 Jira Key FOOTBALL-9172 \u6a19\u984c \u5be6\u4f5c CommentMeta Entity \u985e\u578b Domain Model \u512a\u5148\u7d1a P0 \u6240\u5c6c Feature PrematchComment \u4f9d\u8cf4 Ticket - Story Point 1 \u4f30\u6642\uff08Senior iOS Engineer + AI \u8f14\u52a9\uff09 \u6a19\u6e96\uff1a0.3 \u5929\u6700\u56b4\u53b2\uff1a0.2 \u5929 \u958b\u767c\u65e5\u671f / Development Date 2025-11-27 (\u9031\u56db)"},{"location":"12_Tickets/01_domain_model/TDD-002_CommentMeta_Entity/#description","title":"\u63cf\u8ff0 / Description","text":"<p>\u5b9a\u7fa9 CommentMeta Entity Domain Model\u3002 / Define CommentMeta Entity Domain Model\u3002</p>"},{"location":"12_Tickets/01_domain_model/TDD-002_CommentMeta_Entity/#requirements","title":"\u9700\u6c42 / Requirements","text":"<ol> <li>\u5728 <code>PrematchComment</code> namespace \u5167\u5b9a\u7fa9 <code>CommentMeta</code> struct / Define <code>CommentMeta</code> struct within <code>PrematchComment</code> namespace</li> <li>\u5be6\u4f5c <code>Identifiable</code>\u3001<code>Equatable</code>\u3001<code>Sendable</code> / Implement <code>Identifiable</code>, <code>Equatable</code>, <code>Sendable</code></li> <li>\u4f7f\u7528 <code>public</code> \u4fee\u98fe\u7b26 / Use <code>public</code> modifier</li> <li>\u5b9a\u7fa9\u6240\u6709\u5fc5\u8981\u6b04\u4f4d\uff08id\u3001commentCount\u3001betCount\u3001refId\uff09 / Define all required fields (id, commentCount, betCount, refId)</li> <li>\u6a94\u6848\u7d50\u69cb\uff1a\u8207 <code>Comment</code> \u653e\u5728\u540c\u4e00\u500b\u6a94\u6848 <code>PrematchComment.swift</code> / File structure: Place in same file <code>PrematchComment.swift</code> as <code>Comment</code></li> </ol>"},{"location":"12_Tickets/01_domain_model/TDD-002_CommentMeta_Entity/#implementation-guidelines","title":"\u5be6\u4f5c\u898f\u7bc4 / Implementation Guidelines","text":""},{"location":"12_Tickets/01_domain_model/TDD-002_CommentMeta_Entity/#code-example","title":"\u7a0b\u5f0f\u78bc\u7bc4\u4f8b / Code Example","text":"<pre><code>extension PrematchComment {\n    public struct CommentMeta: Identifiable, Equatable, Sendable {\n        public let id: String\n        public let commentCount: Int\n        public let betCount: String\n        public let refId: String\n\n        public init(\n            id: String,\n            commentCount: Int,\n            betCount: String,\n            refId: String\n        ) {\n            self.id = id\n            self.commentCount = commentCount\n            self.betCount = betCount\n            self.refId = refId\n        }\n\n        // Equatable: \u900f\u904e id \u4f86\u6bd4\u8f03\n        public static func == (lhs: CommentMeta, rhs: CommentMeta) -&gt; Bool {\n            lhs.id == rhs.id\n        }\n    }\n}\n</code></pre>"},{"location":"12_Tickets/01_domain_model/TDD-002_CommentMeta_Entity/#acceptance-criteria","title":"\u9a57\u6536\u689d\u4ef6 / Acceptance Criteria","text":"<ul> <li>[ ] <code>CommentMeta</code> struct \u5b9a\u7fa9\u5728 <code>PrematchComment</code> namespace extension \u5167 / <code>CommentMeta</code> struct defined within <code>PrematchComment</code> namespace extension</li> <li>[ ] \u6240\u6709\u6b04\u4f4d\u985e\u578b\u6b63\u78ba\uff0c\u4f7f\u7528 <code>public</code> \u4fee\u98fe\u7b26 / All field types correct, using <code>public</code> modifier</li> <li>[ ] \u5be6\u4f5c <code>Identifiable</code>\u3001<code>Equatable</code>\u3001<code>Sendable</code> protocols / Implement <code>Identifiable</code>, <code>Equatable</code>, <code>Sendable</code> protocols</li> <li>[ ] Equatable \u5be6\u4f5c\u6b63\u78ba\uff08\u900f\u904e id \u6bd4\u8f03\uff09 / Equatable implementation correct (compare by id)</li> <li>[ ] \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c / File structure matches reference code style</li> <li>[ ] Unit Test \u8986\u84cb\u7387 \u2265 80% / Unit Test Coverage \u2265 80%</li> </ul>"},{"location":"12_Tickets/01_domain_model/TDD-002_CommentMeta_Entity/#related-documents","title":"\u76f8\u95dc\u6587\u4ef6 / Related Documents","text":"<ul> <li>Domain Model \u5b9a\u7fa9\uff1a<code>output/LiveChat&amp;PrematchComment/04_Domain Model/01_domain_model.md</code></li> </ul>"},{"location":"12_Tickets/01_domain_model/TDD-002_CommentMeta_Entity_en/","title":"TDD-002: CommentMeta Entity","text":""},{"location":"12_Tickets/01_domain_model/TDD-002_CommentMeta_Entity_en/#ticket-information","title":"Ticket Information","text":"<p>|------|-----| |  | Ticket ID | TDD-002 | | Jira Key | FOOTBALL-9172 |  | |  | Implement CommentMeta Entity |  | |  | Type | Domain Model |  | |  | P0 |  | |  | PrematchComment |  | |  | - |  | |  | Story Point | 1 |  | |  | Standard\uff1a0.3 daysMost Stringent\uff1a0.2 days |  |</p>"},{"location":"12_Tickets/01_domain_model/TDD-002_CommentMeta_Entity_en/#description","title":"Description","text":"<p>Define CommentMeta Entity Domain Model\u3002</p>"},{"location":"12_Tickets/01_domain_model/TDD-002_CommentMeta_Entity_en/#requirements","title":"Requirements","text":"<ol> <li>Define CommentMeta Structure</li> <li>Implement Identifiable and Equatable</li> <li>Define all required fields (id, CommentCount, betCount, refId)</li> </ol>"},{"location":"12_Tickets/01_domain_model/TDD-002_CommentMeta_Entity_en/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] CommentMeta Entity Definition Complete</li> <li>[ ] All fields have correct types</li> <li>[ ] Equatable implementation is correct (compare via id)</li> <li>[ ] Unit Test Coverage \u2265 80%</li> </ul>"},{"location":"12_Tickets/01_domain_model/TDD-002_CommentMeta_Entity_en/#related-documents","title":"Related Documents","text":"<ul> <li>Domain Model Definition: <code>output/LiveChat&amp;PrematchComment/04_Domain Model/01_domain_model.md</code></li> </ul>"},{"location":"12_Tickets/01_domain_model/TDD-003_UserInfo_Entity/","title":"TDD-003: UserInfo Entity","text":""},{"location":"12_Tickets/01_domain_model/TDD-003_UserInfo_Entity/#ticket-ticket-information","title":"Ticket \u8cc7\u8a0a / Ticket Information","text":"\u6b04\u4f4d \u503c Ticket ID TDD-003 Jira Key FOOTBALL-9173 \u6a19\u984c \u5be6\u4f5c UserInfo Entity \u985e\u578b Domain Model \u512a\u5148\u7d1a P0 \u6240\u5c6c Feature LiveChat &amp; PrematchComment \u4f9d\u8cf4 Ticket - Story Point 1 \u4f30\u6642\uff08Senior iOS Engineer + AI \u8f14\u52a9\uff09 \u6a19\u6e96\uff1a0.3 \u5929\u6700\u56b4\u53b2\uff1a0.2 \u5929 \u958b\u767c\u65e5\u671f / Development Date 2025-11-27 (\u9031\u56db)"},{"location":"12_Tickets/01_domain_model/TDD-003_UserInfo_Entity/#description","title":"\u63cf\u8ff0 / Description","text":"<p>\u5b9a\u7fa9 UserInfo Entity Domain Model\u3002 / Define UserInfo Entity Domain Model\u3002</p>"},{"location":"12_Tickets/01_domain_model/TDD-003_UserInfo_Entity/#requirements","title":"\u9700\u6c42 / Requirements","text":"<ol> <li>\u5b9a\u7fa9 <code>LiveChat</code> \u548c <code>PrematchComment</code> namespace enum\uff08\u5171\u7528\uff09 / Define <code>LiveChat</code> and <code>PrematchComment</code> namespace enum (shared)</li> <li>\u5728 namespace \u5167\u5b9a\u7fa9 <code>UserInfo</code> struct / Define <code>UserInfo</code> struct within namespace</li> <li>\u5be6\u4f5c <code>Identifiable</code>\u3001<code>Equatable</code>\u3001<code>Sendable</code> / Implement <code>Identifiable</code>, <code>Equatable</code>, <code>Sendable</code></li> <li>\u4f7f\u7528 <code>public</code> \u4fee\u98fe\u7b26 / Use <code>public</code> modifier</li> <li>\u5b9a\u7fa9\u6240\u6709\u5fc5\u8981\u6b04\u4f4d\uff08id\u3001nickname\u3001avatar\u3001tierLevel\u3001countryCode\uff09 / Define all required fields (id, nickname, avatar, tierLevel, countryCode)</li> <li>\u6a94\u6848\u7d50\u69cb\uff1a\u53ef\u653e\u5728 <code>PrematchComment.swift</code> \u6216 <code>LiveChat.swift</code>\uff0c\u6216\u5efa\u7acb\u5171\u7528\u7684 <code>Models/Shared/UserInfo.swift</code> / File structure: Can place in <code>PrematchComment.swift</code> or <code>LiveChat.swift</code>, or create shared <code>Models/Shared/UserInfo.swift</code></li> </ol>"},{"location":"12_Tickets/01_domain_model/TDD-003_UserInfo_Entity/#implementation-guidelines","title":"\u5be6\u4f5c\u898f\u7bc4 / Implementation Guidelines","text":""},{"location":"12_Tickets/01_domain_model/TDD-003_UserInfo_Entity/#code-example","title":"\u7a0b\u5f0f\u78bc\u7bc4\u4f8b / Code Example","text":"<pre><code>// \u9078\u9805 1: \u653e\u5728 PrematchComment namespace\nextension PrematchComment {\n    public struct UserInfo: Identifiable, Equatable, Sendable {\n        public let id: String\n        public let nickname: String?\n        public let avatar: String?\n        public let tierLevel: String?\n        public let countryCode: String?\n\n        public init(\n            id: String,\n            nickname: String?,\n            avatar: String?,\n            tierLevel: String?,\n            countryCode: String?\n        ) {\n            self.id = id\n            self.nickname = nickname\n            self.avatar = avatar\n            self.tierLevel = tierLevel\n            self.countryCode = countryCode\n        }\n\n        // Equatable: \u900f\u904e id \u4f86\u6bd4\u8f03\n        public static func == (lhs: UserInfo, rhs: UserInfo) -&gt; Bool {\n            lhs.id == rhs.id\n        }\n    }\n}\n\n// \u9078\u9805 2: \u653e\u5728 LiveChat namespace\uff08\u76f8\u540c\u7d50\u69cb\uff09\nextension LiveChat {\n    public struct UserInfo: Identifiable, Equatable, Sendable {\n        // \u76f8\u540c\u7d50\u69cb...\n    }\n}\n</code></pre>"},{"location":"12_Tickets/01_domain_model/TDD-003_UserInfo_Entity/#acceptance-criteria","title":"\u9a57\u6536\u689d\u4ef6 / Acceptance Criteria","text":"<ul> <li>[ ] <code>UserInfo</code> struct \u5b9a\u7fa9\u5728 namespace extension \u5167 / <code>UserInfo</code> struct defined within namespace extension</li> <li>[ ] \u6240\u6709\u6b04\u4f4d\u985e\u578b\u6b63\u78ba\uff0c\u4f7f\u7528 <code>public</code> \u4fee\u98fe\u7b26 / All field types correct, using <code>public</code> modifier</li> <li>[ ] \u5be6\u4f5c <code>Identifiable</code>\u3001<code>Equatable</code>\u3001<code>Sendable</code> protocols / Implement <code>Identifiable</code>, <code>Equatable</code>, <code>Sendable</code> protocols</li> <li>[ ] Equatable \u5be6\u4f5c\u6b63\u78ba\uff08\u900f\u904e id \u6bd4\u8f03\uff09 / Equatable implementation correct (compare by id)</li> <li>[ ] \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c / File structure matches reference code style</li> <li>[ ] Unit Test \u8986\u84cb\u7387 \u2265 80% / Unit Test Coverage \u2265 80%</li> </ul>"},{"location":"12_Tickets/01_domain_model/TDD-003_UserInfo_Entity/#related-documents","title":"\u76f8\u95dc\u6587\u4ef6 / Related Documents","text":"<ul> <li>Domain Model \u5b9a\u7fa9\uff1a<code>output/LiveChat&amp;PrematchComment/04_Domain Model/01_domain_model.md</code></li> </ul>"},{"location":"12_Tickets/01_domain_model/TDD-003_UserInfo_Entity_en/","title":"TDD-003: UserInfo Entity","text":""},{"location":"12_Tickets/01_domain_model/TDD-003_UserInfo_Entity_en/#ticket-information","title":"Ticket Information","text":"<p>|------|-----| |  | Ticket ID | TDD-003 | | Jira Key | FOOTBALL-9173 |  | |  | Implement UserInfo Entity |  | |  | Type | Domain Model |  | |  | P0 |  | |  | LiveChat &amp; PrematchComment |  | |  | - |  | |  | Story Point | 1 |  | |  | Standard\uff1a0.3 daysMost Stringent\uff1a0.2 days |  |</p>"},{"location":"12_Tickets/01_domain_model/TDD-003_UserInfo_Entity_en/#description","title":"Description","text":"<p>Define UserInfo Entity Domain Model\u3002</p>"},{"location":"12_Tickets/01_domain_model/TDD-003_UserInfo_Entity_en/#requirements","title":"Requirements","text":"<ol> <li>Define UserInfo Structure</li> <li>Implement Identifiable and Equatable</li> <li>Define all required fields (id, nickname, avatar)</li> </ol>"},{"location":"12_Tickets/01_domain_model/TDD-003_UserInfo_Entity_en/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] UserInfo Entity Definition Complete</li> <li>[ ] All fields have correct types</li> <li>[ ] Equatable implementation is correct (compare via id)</li> <li>[ ] Unit Test Coverage \u2265 80%</li> </ul>"},{"location":"12_Tickets/01_domain_model/TDD-003_UserInfo_Entity_en/#related-documents","title":"Related Documents","text":"<ul> <li>Domain Model Definition: <code>output/LiveChat&amp;PrematchComment/04_Domain Model/01_domain_model.md</code></li> </ul>"},{"location":"12_Tickets/01_domain_model/TDD-004_Message_Entity/","title":"TDD-004: Message Entity","text":""},{"location":"12_Tickets/01_domain_model/TDD-004_Message_Entity/#ticket-ticket-information","title":"Ticket \u8cc7\u8a0a / Ticket Information","text":"\u6b04\u4f4d \u503c Ticket ID TDD-004 Jira Key FOOTBALL-9174 \u6a19\u984c \u5be6\u4f5c Message Entity \u985e\u578b Domain Model \u512a\u5148\u7d1a P0 \u6240\u5c6c Feature LiveChat \u4f9d\u8cf4 Ticket - Story Point 1 \u4f30\u6642\uff08Senior iOS Engineer + AI \u8f14\u52a9\uff09 \u6a19\u6e96\uff1a0.3 \u5929\u6700\u56b4\u53b2\uff1a0.2 \u5929 \u958b\u767c\u65e5\u671f / Development Date 2025-11-28 (\u9031\u4e94)"},{"location":"12_Tickets/01_domain_model/TDD-004_Message_Entity/#description","title":"\u63cf\u8ff0 / Description","text":"<p>\u5b9a\u7fa9 Message Entity Domain Model\u3002 / Define Message Entity Domain Model\u3002</p>"},{"location":"12_Tickets/01_domain_model/TDD-004_Message_Entity/#requirements","title":"\u9700\u6c42 / Requirements","text":"<ol> <li>\u5b9a\u7fa9 <code>LiveChat</code> namespace enum / Define <code>LiveChat</code> namespace enum</li> <li>\u5728 namespace \u5167\u5b9a\u7fa9 <code>Message</code> struct / Define <code>Message</code> struct within namespace</li> <li>\u5b9a\u7fa9 <code>MessageType</code> enum\uff08\u653e\u5728 <code>LiveChat</code> namespace \u5167\uff09 / Define <code>MessageType</code> enum (within <code>LiveChat</code> namespace)</li> <li>\u5be6\u4f5c <code>Identifiable</code>\u3001<code>Equatable</code>\u3001<code>Sendable</code> / Implement <code>Identifiable</code>, <code>Equatable</code>, <code>Sendable</code></li> <li>\u4f7f\u7528 <code>public</code> \u4fee\u98fe\u7b26 / Use <code>public</code> modifier</li> <li>\u5b9a\u7fa9\u6240\u6709\u5fc5\u8981\u6b04\u4f4d / Define all required fields</li> <li>\u6a94\u6848\u7d50\u69cb\uff1a<code>Sources/LiveChat/Models/LiveChat.swift</code> / File structure: <code>Sources/LiveChat/Models/LiveChat.swift</code></li> </ol>"},{"location":"12_Tickets/01_domain_model/TDD-004_Message_Entity/#implementation-guidelines","title":"\u5be6\u4f5c\u898f\u7bc4 / Implementation Guidelines","text":""},{"location":"12_Tickets/01_domain_model/TDD-004_Message_Entity/#code-example","title":"\u7a0b\u5f0f\u78bc\u7bc4\u4f8b / Code Example","text":"<pre><code>import Foundation\n\n/// The namespace for types and functions related to LiveChat\npublic enum LiveChat {}\n\nextension LiveChat {\n    public enum MessageType: String, Equatable, Sendable {\n        case text = \"TEXT\"\n    }\n\n    public struct Message: Identifiable, Equatable, Sendable {\n        public let id: String\n        public let content: String\n        public let messageNo: Int\n        public let previousMessageNo: Int\n        public let authorId: String\n        public let authorNickname: String?\n        public let messageType: MessageType\n        public let createdAt: Date\n        public let chatroomId: String\n        public let isIsolated: Bool\n        public let isDeleted: Bool\n        public let status: Int\n\n        public init(\n            id: String,\n            content: String,\n            messageNo: Int,\n            previousMessageNo: Int,\n            authorId: String,\n            authorNickname: String?,\n            messageType: MessageType,\n            createdAt: Date,\n            chatroomId: String,\n            isIsolated: Bool,\n            isDeleted: Bool,\n            status: Int\n        ) {\n            self.id = id\n            self.content = content\n            self.messageNo = messageNo\n            self.previousMessageNo = previousMessageNo\n            self.authorId = authorId\n            self.authorNickname = authorNickname\n            self.messageType = messageType\n            self.createdAt = createdAt\n            self.chatroomId = chatroomId\n            self.isIsolated = isIsolated\n            self.isDeleted = isDeleted\n            self.status = status\n        }\n\n        // Equatable: \u900f\u904e id \u4f86\u6bd4\u8f03\n        public static func == (lhs: Message, rhs: Message) -&gt; Bool {\n            lhs.id == rhs.id\n        }\n    }\n}\n</code></pre>"},{"location":"12_Tickets/01_domain_model/TDD-004_Message_Entity/#acceptance-criteria","title":"\u9a57\u6536\u689d\u4ef6 / Acceptance Criteria","text":"<ul> <li>[ ] <code>LiveChat</code> namespace enum \u5b9a\u7fa9\u5b8c\u6210 / <code>LiveChat</code> namespace enum definition complete</li> <li>[ ] <code>Message</code> struct \u5b9a\u7fa9\u5728 namespace extension \u5167 / <code>Message</code> struct defined within namespace extension</li> <li>[ ] <code>MessageType</code> enum \u5b9a\u7fa9\u5b8c\u6210 / <code>MessageType</code> enum definition complete</li> <li>[ ] \u6240\u6709\u6b04\u4f4d\u985e\u578b\u6b63\u78ba\uff0c\u4f7f\u7528 <code>public</code> \u4fee\u98fe\u7b26 / All field types correct, using <code>public</code> modifier</li> <li>[ ] \u5be6\u4f5c <code>Identifiable</code>\u3001<code>Equatable</code>\u3001<code>Sendable</code> protocols / Implement <code>Identifiable</code>, <code>Equatable</code>, <code>Sendable</code> protocols</li> <li>[ ] Equatable \u5be6\u4f5c\u6b63\u78ba\uff08\u900f\u904e id \u6bd4\u8f03\uff09 / Equatable implementation correct (compare by id)</li> <li>[ ] \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c / File structure matches reference code style</li> <li>[ ] Unit Test \u8986\u84cb\u7387 \u2265 80% / Unit Test Coverage \u2265 80%</li> </ul>"},{"location":"12_Tickets/01_domain_model/TDD-004_Message_Entity/#related-documents","title":"\u76f8\u95dc\u6587\u4ef6 / Related Documents","text":"<ul> <li>Domain Model \u5b9a\u7fa9\uff1a<code>output/LiveChat&amp;PrematchComment/04_Domain Model/01_domain_model.md</code></li> </ul>"},{"location":"12_Tickets/01_domain_model/TDD-004_Message_Entity_en/","title":"TDD-004: Message Entity","text":""},{"location":"12_Tickets/01_domain_model/TDD-004_Message_Entity_en/#ticket-information","title":"Ticket Information","text":"<p>|------|-----| |  | Ticket ID | TDD-004 | | Jira Key | FOOTBALL-9174 |  | |  | Implement Message Entity |  | |  | Type | Domain Model |  | |  | P0 |  | |  | LiveChat |  | |  | - |  | |  | Story Point | 1 |  | |  | Standard\uff1a0.3 daysMost Stringent\uff1a0.2 days |  |</p>"},{"location":"12_Tickets/01_domain_model/TDD-004_Message_Entity_en/#description","title":"Description","text":"<p>Define Message Entity Domain Model\u3002</p>"},{"location":"12_Tickets/01_domain_model/TDD-004_Message_Entity_en/#requirements","title":"Requirements","text":"<ol> <li>Define Message Structure</li> <li>Implement Identifiable and Equatable</li> <li>Define all required fields (id, content, messageNo, authorId \u7b49)</li> <li>Define MessageType enum</li> </ol>"},{"location":"12_Tickets/01_domain_model/TDD-004_Message_Entity_en/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] Message Entity Definition Complete</li> <li>[ ] MessageType enum Definition Complete</li> <li>[ ] All fields have correct types</li> <li>[ ] Equatable implementation is correct (compare via id)</li> <li>[ ] Unit Test Coverage \u2265 80%</li> </ul>"},{"location":"12_Tickets/01_domain_model/TDD-004_Message_Entity_en/#related-documents","title":"Related Documents","text":"<ul> <li>Domain Model Definition: <code>output/LiveChat&amp;PrematchComment/04_Domain Model/01_domain_model.md</code></li> </ul>"},{"location":"12_Tickets/01_domain_model/TDD-005_ChatroomInfo_Entity/","title":"TDD-005: ChatroomInfo Entity","text":""},{"location":"12_Tickets/01_domain_model/TDD-005_ChatroomInfo_Entity/#ticket-ticket-information","title":"Ticket \u8cc7\u8a0a / Ticket Information","text":"\u6b04\u4f4d \u503c Ticket ID TDD-005 Jira Key FOOTBALL-9175 \u6a19\u984c \u5be6\u4f5c ChatroomInfo Entity \u985e\u578b Domain Model \u512a\u5148\u7d1a P0 \u6240\u5c6c Feature LiveChat \u4f9d\u8cf4 Ticket - Story Point 1 \u4f30\u6642\uff08Senior iOS Engineer + AI \u8f14\u52a9\uff09 \u6a19\u6e96\uff1a0.3 \u5929\u6700\u56b4\u53b2\uff1a0.2 \u5929 \u958b\u767c\u65e5\u671f / Development Date 2025-11-28 (\u9031\u4e94)"},{"location":"12_Tickets/01_domain_model/TDD-005_ChatroomInfo_Entity/#description","title":"\u63cf\u8ff0 / Description","text":"<p>\u5b9a\u7fa9 ChatroomInfo Entity Domain Model\u3002 / Define ChatroomInfo Entity Domain Model\u3002</p>"},{"location":"12_Tickets/01_domain_model/TDD-005_ChatroomInfo_Entity/#requirements","title":"\u9700\u6c42 / Requirements","text":"<ol> <li>\u5728 <code>LiveChat</code> namespace \u5167\u5b9a\u7fa9 <code>ChatroomInfo</code> struct / Define <code>ChatroomInfo</code> struct within <code>LiveChat</code> namespace</li> <li>\u5be6\u4f5c <code>Identifiable</code>\u3001<code>Equatable</code>\u3001<code>Sendable</code> / Implement <code>Identifiable</code>, <code>Equatable</code>, <code>Sendable</code></li> <li>\u4f7f\u7528 <code>public</code> \u4fee\u98fe\u7b26 / Use <code>public</code> modifier</li> <li>\u5b9a\u7fa9\u6240\u6709\u5fc5\u8981\u6b04\u4f4d / Define all required fields</li> <li>\u6a94\u6848\u7d50\u69cb\uff1a\u8207 <code>Message</code> \u653e\u5728\u540c\u4e00\u500b\u6a94\u6848 <code>LiveChat.swift</code> / File structure: Place in same file <code>LiveChat.swift</code> as <code>Message</code></li> </ol>"},{"location":"12_Tickets/01_domain_model/TDD-005_ChatroomInfo_Entity/#implementation-guidelines","title":"\u5be6\u4f5c\u898f\u7bc4 / Implementation Guidelines","text":""},{"location":"12_Tickets/01_domain_model/TDD-005_ChatroomInfo_Entity/#code-example","title":"\u7a0b\u5f0f\u78bc\u7bc4\u4f8b / Code Example","text":"<pre><code>extension LiveChat {\n    public struct ChatroomInfo: Identifiable, Equatable, Sendable {\n        public let id: String\n        public let chatroomId: String\n        public let lastMessageNo: Int\n        public let refId: String\n        public let onlineCount: Int\n        public let betCount: String\n        public let chatRoomType: Int\n        public let nickNameAvailable: Bool?\n\n        public init(\n            id: String,\n            chatroomId: String,\n            lastMessageNo: Int,\n            refId: String,\n            onlineCount: Int,\n            betCount: String,\n            chatRoomType: Int,\n            nickNameAvailable: Bool?\n        ) {\n            self.id = id\n            self.chatroomId = chatroomId\n            self.lastMessageNo = lastMessageNo\n            self.refId = refId\n            self.onlineCount = onlineCount\n            self.betCount = betCount\n            self.chatRoomType = chatRoomType\n            self.nickNameAvailable = nickNameAvailable\n        }\n\n        // Equatable: \u900f\u904e id \u4f86\u6bd4\u8f03\n        public static func == (lhs: ChatroomInfo, rhs: ChatroomInfo) -&gt; Bool {\n            lhs.id == rhs.id\n        }\n    }\n}\n</code></pre>"},{"location":"12_Tickets/01_domain_model/TDD-005_ChatroomInfo_Entity/#acceptance-criteria","title":"\u9a57\u6536\u689d\u4ef6 / Acceptance Criteria","text":"<ul> <li>[ ] <code>ChatroomInfo</code> struct \u5b9a\u7fa9\u5728 <code>LiveChat</code> namespace extension \u5167 / <code>ChatroomInfo</code> struct defined within <code>LiveChat</code> namespace extension</li> <li>[ ] \u6240\u6709\u6b04\u4f4d\u985e\u578b\u6b63\u78ba\uff0c\u4f7f\u7528 <code>public</code> \u4fee\u98fe\u7b26 / All field types correct, using <code>public</code> modifier</li> <li>[ ] \u5be6\u4f5c <code>Identifiable</code>\u3001<code>Equatable</code>\u3001<code>Sendable</code> protocols / Implement <code>Identifiable</code>, <code>Equatable</code>, <code>Sendable</code> protocols</li> <li>[ ] Equatable \u5be6\u4f5c\u6b63\u78ba\uff08\u900f\u904e id \u6bd4\u8f03\uff09 / Equatable implementation correct (compare by id)</li> <li>[ ] \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c / File structure matches reference code style</li> <li>[ ] Unit Test \u8986\u84cb\u7387 \u2265 80% / Unit Test Coverage \u2265 80%</li> </ul>"},{"location":"12_Tickets/01_domain_model/TDD-005_ChatroomInfo_Entity/#related-documents","title":"\u76f8\u95dc\u6587\u4ef6 / Related Documents","text":"<ul> <li>Domain Model \u5b9a\u7fa9\uff1a<code>output/LiveChat&amp;PrematchComment/04_Domain Model/01_domain_model.md</code></li> </ul>"},{"location":"12_Tickets/01_domain_model/TDD-005_ChatroomInfo_Entity_en/","title":"TDD-005: ChatroomInfo Entity","text":""},{"location":"12_Tickets/01_domain_model/TDD-005_ChatroomInfo_Entity_en/#ticket-information","title":"Ticket Information","text":"<p>|------|-----| |  | Ticket ID | TDD-005 | | Jira Key | FOOTBALL-9175 |  | |  | Implement ChatroomInfo Entity |  | |  | Type | Domain Model |  | |  | P0 |  | |  | LiveChat |  | |  | - |  | |  | Story Point | 1 |  | |  | Standard\uff1a0.3 daysMost Stringent\uff1a0.2 days |  |</p>"},{"location":"12_Tickets/01_domain_model/TDD-005_ChatroomInfo_Entity_en/#description","title":"Description","text":"<p>Define ChatroomInfo Entity Domain Model\u3002</p>"},{"location":"12_Tickets/01_domain_model/TDD-005_ChatroomInfo_Entity_en/#requirements","title":"Requirements","text":"<ol> <li>Define ChatroomInfo Structure</li> <li>Implement Identifiable and Equatable</li> <li>Define all required fields (ChatroomId, lastMessageNo)</li> </ol>"},{"location":"12_Tickets/01_domain_model/TDD-005_ChatroomInfo_Entity_en/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] ChatroomInfo Entity Definition Complete</li> <li>[ ] All fields have correct types</li> <li>[ ] Equatable Implementcorrect(via ChatroomId compare)</li> <li>[ ] Unit Test Coverage \u2265 80%</li> </ul>"},{"location":"12_Tickets/01_domain_model/TDD-005_ChatroomInfo_Entity_en/#related-documents","title":"Related Documents","text":"<ul> <li>Domain Model Definition: <code>output/LiveChat&amp;PrematchComment/04_Domain Model/01_domain_model.md</code></li> </ul>"},{"location":"12_Tickets/01_domain_model/TDD-006_ValueObjects/","title":"TDD-006: Value Objects","text":""},{"location":"12_Tickets/01_domain_model/TDD-006_ValueObjects/#ticket-ticket-information","title":"Ticket \u8cc7\u8a0a / Ticket Information","text":"\u6b04\u4f4d \u503c Ticket ID TDD-006 Jira Key FOOTBALL-9176 \u6a19\u984c \u5be6\u4f5c Value Objects\uff08SortMode\u3001Cursor\u3001PagingInfo\uff09 \u985e\u578b Domain Model \u512a\u5148\u7d1a P0 \u6240\u5c6c Feature LiveChat &amp; PrematchComment \u4f9d\u8cf4 Ticket - Story Point 2 \u4f30\u6642\uff08Senior iOS Engineer + AI \u8f14\u52a9\uff09 \u6a19\u6e96\uff1a1 \u5929\u6700\u56b4\u53b2\uff1a0.4 \u5929 \u958b\u767c\u65e5\u671f / Development Date 2025-11-28 (\u9031\u4e94)"},{"location":"12_Tickets/01_domain_model/TDD-006_ValueObjects/#description","title":"\u63cf\u8ff0 / Description","text":"<p>\u5b9a\u7fa9\u6240\u6709 Value Objects\uff08SortMode\u3001Cursor\u3001PagingInfo\uff09\u3002 / Define All Value Objects(SortMode, Cursor, PagingInfo)\u3002</p>"},{"location":"12_Tickets/01_domain_model/TDD-006_ValueObjects/#requirements","title":"\u9700\u6c42 / Requirements","text":"<ol> <li>\u5728 <code>PrematchComment</code> \u548c <code>LiveChat</code> namespace \u5167\u5b9a\u7fa9 Value Objects / Define Value Objects within <code>PrematchComment</code> and <code>LiveChat</code> namespace</li> <li>\u5b9a\u7fa9 <code>SortMode</code> enum\uff08top / newest\uff09 / Define <code>SortMode</code> enum (top / newest)</li> <li>\u5b9a\u7fa9 <code>Cursor</code> struct\uff08\u5206\u9801\u6e38\u6a19\uff09 / Define <code>Cursor</code> struct (pagination cursor)</li> <li>\u5b9a\u7fa9 <code>PagingInfo</code> struct\uff08hasMore\u3001cursor\uff09 / Define <code>PagingInfo</code> struct (hasMore, cursor)</li> <li>\u5be6\u4f5c <code>Equatable</code>\u3001<code>Sendable</code> / Implement <code>Equatable</code>, <code>Sendable</code></li> <li>\u4f7f\u7528 <code>public</code> \u4fee\u98fe\u7b26 / Use <code>public</code> modifier</li> <li>\u78ba\u4fdd\u5b8c\u5168\u4e0d\u53ef\u8b8a\uff08\u6240\u6709\u5c6c\u6027\u4f7f\u7528 <code>let</code>\uff09 / Ensure completely immutable (all properties use <code>let</code>)</li> <li>\u6a94\u6848\u7d50\u69cb\uff1a\u53ef\u653e\u5728\u5404\u81ea\u7684 namespace \u6a94\u6848\u4e2d\uff0c\u6216\u5efa\u7acb\u5171\u7528\u7684 <code>Models/Shared/ValueObjects.swift</code> / File structure: Can place in respective namespace files, or create shared <code>Models/Shared/ValueObjects.swift</code></li> </ol>"},{"location":"12_Tickets/01_domain_model/TDD-006_ValueObjects/#implementation-guidelines","title":"\u5be6\u4f5c\u898f\u7bc4 / Implementation Guidelines","text":""},{"location":"12_Tickets/01_domain_model/TDD-006_ValueObjects/#code-example","title":"\u7a0b\u5f0f\u78bc\u7bc4\u4f8b / Code Example","text":"<pre><code>extension PrematchComment {\n    public enum SortMode: String, Equatable, Sendable {\n        case top = \"top\"\n        case newest = \"newest\"\n    }\n\n    public struct Cursor: Equatable, Sendable {\n        public let value: Int\n\n        public init(value: Int) {\n            self.value = value\n        }\n    }\n\n    public struct PagingInfo: Equatable, Sendable {\n        public let cursor: Cursor?\n        public let hasMore: Bool\n\n        public init(cursor: Cursor?, hasMore: Bool) {\n            self.cursor = cursor\n            self.hasMore = hasMore\n        }\n    }\n}\n\n// LiveChat \u4f7f\u7528\u76f8\u540c\u7684 Value Objects \u6216\u5b9a\u7fa9\u81ea\u5df1\u7684\nextension LiveChat {\n    public enum SortMode: String, Equatable, Sendable {\n        case top = \"top\"\n        case newest = \"newest\"\n    }\n\n    public struct Cursor: Equatable, Sendable {\n        public let value: Int\n\n        public init(value: Int) {\n            self.value = value\n        }\n    }\n\n    public struct PagingInfo: Equatable, Sendable {\n        public let cursor: Cursor?\n        public let hasMore: Bool\n\n        public init(cursor: Cursor?, hasMore: Bool) {\n            self.cursor = cursor\n            self.hasMore = hasMore\n        }\n    }\n}\n</code></pre>"},{"location":"12_Tickets/01_domain_model/TDD-006_ValueObjects/#acceptance-criteria","title":"\u9a57\u6536\u689d\u4ef6 / Acceptance Criteria","text":"<ul> <li>[ ] <code>SortMode</code> enum \u5b9a\u7fa9\u5b8c\u6210\uff0c\u5be6\u4f5c <code>Equatable</code>\u3001<code>Sendable</code> / <code>SortMode</code> enum definition complete, implements <code>Equatable</code>, <code>Sendable</code></li> <li>[ ] <code>Cursor</code> struct \u5b9a\u7fa9\u5b8c\u6210\uff0c\u5be6\u4f5c <code>Equatable</code>\u3001<code>Sendable</code> / <code>Cursor</code> struct definition complete, implements <code>Equatable</code>, <code>Sendable</code></li> <li>[ ] <code>PagingInfo</code> struct \u5b9a\u7fa9\u5b8c\u6210\uff0c\u5be6\u4f5c <code>Equatable</code>\u3001<code>Sendable</code> / <code>PagingInfo</code> struct definition complete, implements <code>Equatable</code>, <code>Sendable</code></li> <li>[ ] \u6240\u6709 Value Object \u5b8c\u5168\u4e0d\u53ef\u8b8a\uff08\u6240\u6709\u5c6c\u6027\u4f7f\u7528 <code>let</code>\uff09 / All Value Objects completely immutable (all properties use <code>let</code>)</li> <li>[ ] \u6240\u6709\u5c6c\u6027\u4f7f\u7528 <code>public</code> \u4fee\u98fe\u7b26 / All properties use <code>public</code> modifier</li> <li>[ ] Equatable \u5be6\u4f5c\u6b63\u78ba\uff08\u900f\u904e\u503c\u6bd4\u8f03\uff09 / Equatable implementation correct (compare by value)</li> <li>[ ] \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c / File structure matches reference code style</li> <li>[ ] Unit Test \u8986\u84cb\u7387 \u2265 80% / Unit Test Coverage \u2265 80%</li> </ul>"},{"location":"12_Tickets/01_domain_model/TDD-006_ValueObjects/#related-documents","title":"\u76f8\u95dc\u6587\u4ef6 / Related Documents","text":"<ul> <li>Domain Model \u5b9a\u7fa9\uff1a<code>output/LiveChat&amp;PrematchComment/04_Domain Model/01_domain_model.md</code></li> </ul>"},{"location":"12_Tickets/01_domain_model/TDD-006_ValueObjects_en/","title":"TDD-006: Value Objects","text":""},{"location":"12_Tickets/01_domain_model/TDD-006_ValueObjects_en/#ticket-information","title":"Ticket Information","text":"<p>|------|-----| |  | Ticket ID | TDD-006 | | Jira Key | FOOTBALL-9176 |  | |  | Implement Value Objects\uff08SortMode\u3001Cursor\u3001PagingInfo\uff09 |  | |  | Type | Domain Model |  | |  | P0 |  | |  | LiveChat &amp; PrematchComment |  | |  | - |  | |  | Story Point | 2 |  | |  | Standard\uff1a1 daysMost Stringent\uff1a0.4 days |  |</p>"},{"location":"12_Tickets/01_domain_model/TDD-006_ValueObjects_en/#description","title":"Description","text":"<p>Define All Value Objects(SortMode, Cursor, PagingInfo)\u3002</p>"},{"location":"12_Tickets/01_domain_model/TDD-006_ValueObjects_en/#requirements","title":"Requirements","text":"<ol> <li>newest)</li> <li>Define Cursor Value Object(Pagination\u6e38\u6a19)</li> <li>Define PagingInfo Value Object(hasMore, nextCursor)</li> <li>Implement Equatable(via\u503ccompare)</li> <li>\u78ba\u4fdd\u5b8c\u5168\u4e0d\u53ef\u8b8a</li> </ol>"},{"location":"12_Tickets/01_domain_model/TDD-006_ValueObjects_en/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] SortMode Value Object Definition Complete</li> <li>[ ] Cursor Value Object Definition Complete</li> <li>[ ] PagingInfo Value Object Definition Complete</li> <li>[ ] all Value Object \u5b8c\u5168\u4e0d\u53ef\u8b8a</li> <li>[ ] Equatable Implementcorrect(via\u503ccompare)</li> <li>[ ] Unit Test Coverage \u2265 80%</li> </ul>"},{"location":"12_Tickets/01_domain_model/TDD-006_ValueObjects_en/#related-documents","title":"Related Documents","text":"<ul> <li>Domain Model Definition: <code>output/LiveChat&amp;PrematchComment/04_Domain Model/01_domain_model.md</code></li> </ul>"},{"location":"12_Tickets/02_api/TDD-010_PrematchCommentAPI/","title":"TDD-010: PrematchCommentAPI","text":""},{"location":"12_Tickets/02_api/TDD-010_PrematchCommentAPI/#ticket-ticket-information","title":"Ticket \u8cc7\u8a0a / Ticket Information","text":"\u6b04\u4f4d \u503c Ticket ID TDD-010 Jira Key FOOTBALL-9178 \u6a19\u984c \u5be6\u4f5c PrematchCommentAPI \u5b9a\u7fa9 \u985e\u578b API \u512a\u5148\u7d1a P0 \u6240\u5c6c Feature PrematchComment \u4f9d\u8cf4 Ticket TDD-001, TDD-002, TDD-006 Story Point 3 \u4f30\u6642\uff08Senior iOS Engineer + AI \u8f14\u52a9\uff09 \u6a19\u6e96\uff1a1 \u5929\u6700\u56b4\u53b2\uff1a1 \u5929 \u958b\u767c\u65e5\u671f / Development Date 2025-12-01 (\u9031\u4e00)"},{"location":"12_Tickets/02_api/TDD-010_PrematchCommentAPI/#description","title":"\u63cf\u8ff0 / Description","text":"<p>\u5be6\u4f5c PrematchCommentAPI API \u5b9a\u7fa9\u3002 / Implement PrematchCommentAPI API \u5b9a\u7fa9\u3002</p>"},{"location":"12_Tickets/02_api/TDD-010_PrematchCommentAPI/#requirements","title":"\u9700\u6c42 / Requirements","text":"<ol> <li>\u5b9a\u7fa9 <code>PrematchCommentAPI</code> namespace enum / Define <code>PrematchCommentAPI</code> namespace enum</li> <li>\u4f7f\u7528 extension \u5206\u96e2\u95dc\u6ce8\u9ede / Use extension to separate concerns:</li> <li><code>PrematchCommentAPI.swift</code> - namespace \u5b9a\u7fa9 / namespace definition</li> <li><code>PrematchCommentAPI+Endpoint.swift</code> - Endpoint \u5b9a\u7fa9 / Endpoint definition</li> <li><code>PrematchCommentAPI+Models.swift</code> - API Models \u5b9a\u7fa9 / API Models definition</li> <li><code>PrematchCommentAPI+RepositoryProtocol.swift</code> - Repository Protocol / Repository Protocol</li> <li><code>PrematchCommentAPI+Repository.swift</code> - Repository \u5be6\u4f5c\uff08\u4f7f\u7528 actor\uff09 / Repository implementation (using actor)</li> <li>\u5b9a\u7fa9\u6240\u6709 Endpoints\uff08URL\u3001Method\u3001Request/Response DTO\uff09 / Define All Endpoints (URL, Method, Request/Response DTO)</li> <li>\u5b9a\u7fa9 Error Response \u683c\u5f0f / Define Error Response format</li> <li>Endpoints\uff1a</li> <li><code>POST /chat/match/comment/batch/info</code></li> <li><code>GET /chat/match/comment/info/{refId}</code></li> <li><code>GET /chat/match/comment/popular</code></li> <li><code>GET /chat/match/comment/newest</code></li> <li><code>GET /chat/match/comment/replies</code></li> <li><code>POST /chat/match/comment</code></li> <li><code>POST /chat/match/comment/like</code></li> </ol>"},{"location":"12_Tickets/02_api/TDD-010_PrematchCommentAPI/#implementation-guidelines","title":"\u5be6\u4f5c\u898f\u7bc4 / Implementation Guidelines","text":""},{"location":"12_Tickets/02_api/TDD-010_PrematchCommentAPI/#file-structure","title":"\u6a94\u6848\u7d50\u69cb / File Structure","text":"<pre><code>Sources/PrematchComment/Services/API/PrematchComment/\n  \u251c\u2500\u2500 PrematchCommentAPI.swift                    # namespace \u5b9a\u7fa9\n  \u251c\u2500\u2500 PrematchCommentAPI+Endpoint.swift           # Endpoint \u5b9a\u7fa9\n  \u251c\u2500\u2500 PrematchCommentAPI+Models.swift             # API Models \u5b9a\u7fa9\n  \u251c\u2500\u2500 PrematchCommentAPI+RepositoryProtocol.swift # Repository Protocol\n  \u2514\u2500\u2500 PrematchCommentAPI+Repository.swift        # Repository \u5be6\u4f5c\uff08actor\uff09\n</code></pre>"},{"location":"12_Tickets/02_api/TDD-010_PrematchCommentAPI/#code-examples","title":"\u7a0b\u5f0f\u78bc\u7bc4\u4f8b / Code Examples","text":""},{"location":"12_Tickets/02_api/TDD-010_PrematchCommentAPI/#prematchcommentapiswift","title":"PrematchCommentAPI.swift","text":"<pre><code>/// The namespace for types and functions related to PrematchCommentAPI\npublic enum PrematchCommentAPI {}\n</code></pre>"},{"location":"12_Tickets/02_api/TDD-010_PrematchCommentAPI/#prematchcommentapiendpointswift","title":"PrematchCommentAPI+Endpoint.swift","text":"<pre><code>import Foundation\nimport NetworkService\nimport NetworkUtils\nimport SportyFoundation\n\nextension PrematchCommentAPI {\n    public enum PrematchCommentEndpoint: APIEndpoint {\n        case getBatchCommentInfo(refIdList: [String])\n        case getCommentMeta(refId: String)\n        case getCommentsByPopular(refId: String, pageNum: Int?, pageSize: Int?)\n        case getCommentsByNewest(refId: String, prevCommentId: Int64?, pageSize: Int?)\n        case getReplies(parentCommentId: Int64, prevCommentId: Int64?, pageSize: Int?)\n        case publishComment(refId: String, content: String, parentId: Int64?, sharedBetsMeta: [String: Any]?, tagUserId: String?)\n        case toggleLike(commentId: Int64)\n\n        public var baseURL: String {\n            AppConfiguration.current.environment.domain.absoluteString\n        }\n\n        public var path: String {\n            let base = \"/api/\\(Region.current.apiCountryCode)/chat/match/comment\"\n\n            switch self {\n            case .getBatchCommentInfo:\n                return \"\\(base)/batch/info\"\n            case .getCommentMeta(let refId):\n                return \"\\(base)/info/\\(refId)\"\n            case .getCommentsByPopular:\n                return \"\\(base)/popular\"\n            case .getCommentsByNewest:\n                return \"\\(base)/newest\"\n            case .getReplies:\n                return \"\\(base)/replies\"\n            case .publishComment:\n                return \"\\(base)\"\n            case .toggleLike:\n                return \"\\(base)/like\"\n            }\n        }\n\n        public var method: String {\n            switch self {\n            case .getBatchCommentInfo, .publishComment, .toggleLike:\n                return FComHTTPMethod.post.rawValue\n            case .getCommentMeta, .getCommentsByPopular, .getCommentsByNewest, .getReplies:\n                return FComHTTPMethod.get.rawValue\n            }\n        }\n\n        public var encoding: APIEncoding {\n            switch self {\n            case .getBatchCommentInfo, .publishComment, .toggleLike:\n                return .json\n            case .getCommentMeta, .getCommentsByPopular, .getCommentsByNewest, .getReplies:\n                return .url\n            }\n        }\n\n        public var parameters: [String: Any]? {\n            switch self {\n            case .getBatchCommentInfo(let refIdList):\n                return [\"refIdList\": refIdList]\n            case .getCommentMeta:\n                return nil  // Path parameter only\n            case .getCommentsByPopular(let refId, let pageNum, let pageSize):\n                var params: [String: Any] = [\"refId\": refId]\n                if let pageNum = pageNum {\n                    params[\"pageNum\"] = pageNum\n                }\n                if let pageSize = pageSize {\n                    params[\"pageSize\"] = pageSize\n                }\n                return params\n            case .getCommentsByNewest(let refId, let prevCommentId, let pageSize):\n                var params: [String: Any] = [\"refId\": refId]\n                if let prevCommentId = prevCommentId {\n                    params[\"prevCommentId\"] = prevCommentId\n                }\n                if let pageSize = pageSize {\n                    params[\"pageSize\"] = pageSize\n                }\n                return params\n            case .getReplies(let parentCommentId, let prevCommentId, let pageSize):\n                var params: [String: Any] = [\"parentCommentId\": parentCommentId]\n                if let prevCommentId = prevCommentId {\n                    params[\"prevCommentId\"] = prevCommentId\n                }\n                if let pageSize = pageSize {\n                    params[\"pageSize\"] = pageSize\n                }\n                return params\n            case .publishComment(let refId, let content, let parentId, let sharedBetsMeta, let tagUserId):\n                var params: [String: Any] = [\n                    \"refId\": refId,\n                    \"comment\": content\n                ]\n                if let parentId = parentId {\n                    params[\"parentCommentId\"] = parentId\n                }\n                if let sharedBetsMeta = sharedBetsMeta {\n                    params[\"sharedBetsMeta\"] = sharedBetsMeta\n                }\n                if let tagUserId = tagUserId {\n                    params[\"tagUserId\"] = tagUserId\n                }\n                return params\n            case .toggleLike(let commentId):\n                return [\"commentId\": commentId]\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"12_Tickets/02_api/TDD-010_PrematchCommentAPI/#prematchcommentapimodelsswift","title":"PrematchCommentAPI+Models.swift","text":"<pre><code>import Foundation\n\nextension PrematchCommentAPI {\n    // MARK: - Response DTOs\n\n    public struct CommentMetaInfoDTO: Decodable, Sendable {\n        public let refId: String\n        public let commentCount: String\n        public let betCount: String\n    }\n\n    public struct CommentMetaDataDTO: Decodable, Sendable {\n        public let refId: String\n        public let commentCount: String\n        public let betCount: String\n    }\n\n    public struct CommentDTO: Decodable, Sendable {\n        public let id: Int64\n        public let parentId: Int64  // 0 \u8868\u793a\u7b2c\u4e00\u5c64\u8a55\u8ad6\n        public let sharedBetsMeta: String?  // \u5171\u4eab\u6295\u6ce8\u8cc7\u8a0a\uff08\u81ea\u8a02 JSON \u683c\u5f0f\uff09\n        public let userId: String\n        public let userNickname: String\n        public let userTierLevel: String\n        public let userAvatar: String\n        public let countryCode: String\n        public let comment: String  // \u6ce8\u610f\uff1aAPI \u6b04\u4f4d\u540d\u7a31\u662f \"comment\"\n        public let isIsolated: Bool\n        public let isDeleted: Bool\n        public let likedCount: Int\n        public let repliesCount: Int\n        public let likedByMe: Bool\n        public let createTime: Int64  // \u6642\u9593\u6233\uff08\u6beb\u79d2\uff09\n        public let tagUserId: String?\n        public let tagUserNickname: String?\n\n        enum CodingKeys: String, CodingKey {\n            case id, parentId, sharedBetsMeta, userId, userNickname, userTierLevel\n            case userAvatar, countryCode, comment, isIsolated, isDeleted\n            case likedCount, repliesCount, likedByMe, createTime, tagUserId, tagUserNickname\n        }\n    }\n\n    // MARK: - Request DTOs\n\n    public struct BatchCommentInfoRequestDTO: Encodable, Sendable {\n        public let refIdList: [String]\n    }\n\n    public struct PublishCommentRequestDTO: Encodable, Sendable {\n        public let refId: String\n        public let parentCommentId: Int64?  // \u53ef\u9078\uff0c\u7236\u8a55\u8ad6 ID\uff08\u5982\u679c\u662f\u56de\u8986\uff09\n        public let sharedBetsMeta: [String: Any]?  // \u53ef\u9078\uff0c\u5171\u4eab\u6295\u6ce8\u8cc7\u8a0a\uff08\u81ea\u8a02 JSON \u683c\u5f0f\uff09- API \u5c64\u4f7f\u7528\u539f\u59cb\u5b57\u5178\n        public let comment: String\n        public let tagUserId: String?  // \u53ef\u9078\uff0c\u88ab\u6a19\u8a18\u7684\u7528\u6236 ID\n    }\n\n    public struct ToggleLikeRequestDTO: Encodable, Sendable {\n        public let commentId: Int64?\n    }\n\n    // MARK: - Special Response Handlers\n\n    /// \u7528\u65bc\u8655\u7406\u8fd4\u56de null \u7684 API response\uff08\u5982 toggleLike\uff09\n    /// \u5be6\u969b API \u8fd4\u56de raw null\uff0c\u800c\u975e\u5305\u88dd\u5728 bizCode/data \u7d50\u69cb\u4e2d\n    struct NullableResponse: Decodable {\n        init(from decoder: Decoder) throws {\n            // \u5141\u8a31\u89e3\u6790 null \u503c\uff0c\u4e0d\u505a\u4efb\u4f55\u8655\u7406\n            // \u5982\u679c\u80fd\u6210\u529f\u5230\u9054\u9019\u88e1\uff0c\u4ee3\u8868 HTTP \u8acb\u6c42\u6210\u529f\n        }\n    }\n}\n</code></pre> <p>\u26a0\ufe0f \u5be6\u4f5c\u8aaa\u660e\uff1a\u5be6\u969b API \u8fd4\u56de\u683c\u5f0f\u8207\u539f\u898f\u5283\u4e0d\u540c\uff1a - \u76f4\u63a5\u8fd4\u56de DTO/Array\uff1a\u5927\u90e8\u5206 API \u76f4\u63a5\u8fd4\u56de DTO \u6216 DTO Array\uff0c\u800c\u975e\u5305\u88dd\u5728 <code>bizCode/data</code> \u7d50\u69cb\u4e2d - toggleLike \u8fd4\u56de null\uff1a\u5be6\u969b\u8fd4\u56de raw <code>null</code>\uff0c\u800c\u975e\u5305\u88dd\u7684 DTO - Response Wrappers \u672a\u4f7f\u7528\uff1a\u539f\u898f\u5283\u7684 <code>BatchCommentInfoResponseDTO</code>\u3001<code>CommentMetaResponseDTO</code>\u3001<code>CommentListResponseDTO</code>\u3001<code>CommentResponseDTO</code>\u3001<code>ToggleLikeResponseDTO</code> \u5728\u5be6\u969b\u5be6\u4f5c\u4e2d\u672a\u4f7f\u7528</p>"},{"location":"12_Tickets/02_api/TDD-010_PrematchCommentAPI/#prematchcommentapirepositoryprotocolswift","title":"PrematchCommentAPI+RepositoryProtocol.swift","text":"<pre><code>import Foundation\n\n/// Sendable wrapper for shared bets metadata\n/// Client \u5c64\u4f7f\u7528\u6b64\u5305\u88dd\u578b\u5225\u4ee5\u7b26\u5408 Sendable \u5354\u8b70\npublic struct SharedBetsMetadata: @unchecked Sendable {\n    public let value: [String: Any]\n\n    public init(_ value: [String: Any]) {\n        self.value = value\n    }\n}\n\nextension PrematchCommentAPI {\n    protocol PrematchCommentRepositoryProtocol {\n        func getBatchCommentInfo(refIdList: [String]) async throws -&gt; [CommentMetaInfoDTO]\n        func getCommentMeta(refId: String) async throws -&gt; CommentMetaDataDTO\n        func getCommentsByPopular(refId: String, pageNum: Int?, pageSize: Int?) async throws -&gt; [CommentDTO]\n        func getCommentsByNewest(refId: String, prevCommentId: Int64?, pageSize: Int?) async throws -&gt; [CommentDTO]\n        func getReplies(parentCommentId: Int64, prevCommentId: Int64?, pageSize: Int?) async throws -&gt; [CommentDTO]\n\n        // \u26a0\ufe0f publishComment \u65b9\u6cd5\u62c6\u5206\u70ba\u5169\u500b\uff0c\u4ee5\u660e\u78ba\u5340\u5206\u9802\u5c64\u8a55\u8ad6\u548c\u56de\u8986\n        /// \u767c\u5e03\u65b0\u8a55\u8ad6\uff08\u9802\u5c64\u8a55\u8ad6\uff09\n        func publishComment(refId: String, content: String) async throws -&gt; CommentDTO\n        /// \u56de\u8986\u73fe\u6709\u8a55\u8ad6\n        func publishReply(refId: String, content: String, parentId: Int64, tagUserId: String, sharedBetsMeta: SharedBetsMetadata?) async throws -&gt; CommentDTO\n\n        // \u26a0\ufe0f toggleLike \u5be6\u969b\u8fd4\u56de void\uff08API \u8fd4\u56de null\uff09\uff0c\u800c\u975e CommentDTO\n        func toggleLike(commentId: Int64) async throws\n    }\n}\n</code></pre> <p>\u8a2d\u8a08\u8aaa\u660e: - <code>SharedBetsMetadata</code>: \u5305\u88dd <code>[String: Any]</code> \u4ee5\u7b26\u5408 Swift Concurrency \u7684 Sendable \u8981\u6c42 - Repository Protocol \u4f7f\u7528 <code>SharedBetsMetadata</code> \u63a5\u6536\u53c3\u6578 - Repository \u5be6\u4f5c\u4e2d\u5c07 <code>SharedBetsMetadata</code> \u89e3\u5305\u6210 <code>[String: Any]</code> \u50b3\u7d66 Endpoint</p>"},{"location":"12_Tickets/02_api/TDD-010_PrematchCommentAPI/#prematchcommentapirepositoryswift","title":"PrematchCommentAPI+Repository.swift","text":"<pre><code>import Foundation\nimport NetworkService\n\nextension PrematchCommentAPI {\n    public actor PrematchCommentRepository: PrematchCommentRepositoryProtocol {\n        private let apiClient: APIClient\n\n        public init(apiClient: APIClient = APIClient.shared) {\n            self.apiClient = apiClient\n        }\n\n        public func getBatchCommentInfo(refIdList: [String]) async throws -&gt; [CommentMetaInfoDTO] {\n            let endpoint = PrematchCommentEndpoint.getBatchCommentInfo(refIdList: refIdList)\n            // \u26a0\ufe0f API \u76f4\u63a5\u8fd4\u56de Array\uff0c\u7121\u5305\u88dd\u5c64\n            return try await apiClient.request(endpoint)\n        }\n\n        public func getCommentMeta(refId: String) async throws -&gt; CommentMetaDataDTO {\n            let endpoint = PrematchCommentEndpoint.getCommentMeta(refId: refId)\n            // \u26a0\ufe0f API \u76f4\u63a5\u8fd4\u56de DTO\uff0c\u7121\u5305\u88dd\u5c64\n            return try await apiClient.request(endpoint)\n        }\n\n        public func getCommentsByPopular(refId: String, pageNum: Int?, pageSize: Int?) async throws -&gt; [CommentDTO] {\n            let endpoint = PrematchCommentEndpoint.getCommentsByPopular(refId: refId, pageNum: pageNum, pageSize: pageSize)\n            // \u26a0\ufe0f API \u76f4\u63a5\u8fd4\u56de Array\uff0c\u7121\u5305\u88dd\u5c64\n            return try await apiClient.request(endpoint)\n        }\n\n        public func getCommentsByNewest(refId: String, prevCommentId: Int64?, pageSize: Int?) async throws -&gt; [CommentDTO] {\n            let endpoint = PrematchCommentEndpoint.getCommentsByNewest(refId: refId, prevCommentId: prevCommentId, pageSize: pageSize)\n            // \u26a0\ufe0f API \u76f4\u63a5\u8fd4\u56de Array\uff0c\u7121\u5305\u88dd\u5c64\n            return try await apiClient.request(endpoint)\n        }\n\n        public func getReplies(parentCommentId: Int64, prevCommentId: Int64?, pageSize: Int?) async throws -&gt; [CommentDTO] {\n            let endpoint = PrematchCommentEndpoint.getReplies(parentCommentId: parentCommentId, prevCommentId: prevCommentId, pageSize: pageSize)\n            // \u26a0\ufe0f API \u76f4\u63a5\u8fd4\u56de Array\uff0c\u7121\u5305\u88dd\u5c64\n            return try await apiClient.request(endpoint)\n        }\n\n        /// \u767c\u5e03\u65b0\u8a55\u8ad6\uff08\u9802\u5c64\u8a55\u8ad6\uff09\n        public func publishComment(refId: String, content: String) async throws -&gt; CommentDTO {\n            let endpoint = PrematchCommentEndpoint.publishComment(\n                refId: refId,\n                content: content,\n                parentId: nil,\n                sharedBetsMeta: nil,\n                tagUserId: nil\n            )\n            // \u26a0\ufe0f API \u76f4\u63a5\u8fd4\u56de DTO\uff0c\u7121\u5305\u88dd\u5c64\n            return try await apiClient.request(endpoint)\n        }\n\n        /// \u56de\u8986\u73fe\u6709\u8a55\u8ad6\n        public func publishReply(refId: String, content: String, parentId: Int64, tagUserId: String, sharedBetsMeta: SharedBetsMetadata?) async throws -&gt; CommentDTO {\n            let metaDict: [String: Any]? = sharedBetsMeta?.value\n            let endpoint = PrematchCommentEndpoint.publishComment(\n                refId: refId,\n                content: content,\n                parentId: parentId,\n                sharedBetsMeta: metaDict,\n                tagUserId: tagUserId\n            )\n            // \u26a0\ufe0f API \u76f4\u63a5\u8fd4\u56de DTO\uff0c\u7121\u5305\u88dd\u5c64\n            return try await apiClient.request(endpoint)\n        }\n\n        public func toggleLike(commentId: Int64) async throws {\n            let endpoint = PrematchCommentEndpoint.toggleLike(commentId: commentId)\n            // \u26a0\ufe0f API \u8fd4\u56de raw null\uff0c\u4f7f\u7528 NullableResponse \u8655\u7406\n            let _: NullableResponse = try await apiClient.request(endpoint)\n        }\n    }\n}\n</code></pre> <p>\u8a2d\u8a08\u6539\u9032\u8aaa\u660e: 1. \u65b9\u6cd5\u62c6\u5206: <code>publishComment</code> \u62c6\u5206\u70ba <code>publishComment</code>\uff08\u9802\u5c64\u8a55\u8ad6\uff09\u548c <code>publishReply</code>\uff08\u56de\u8986\uff09\uff0c\u53c3\u6578\u66f4\u6e05\u6670 2. Response \u683c\u5f0f: API \u5be6\u969b\u76f4\u63a5\u8fd4\u56de DTO/Array\uff0c\u800c\u975e\u5305\u88dd\u5728 <code>bizCode/data</code> \u7d50\u69cb\u4e2d 3. Null \u8655\u7406: <code>toggleLike</code> \u4f7f\u7528 <code>NullableResponse</code> \u8655\u7406 API \u8fd4\u56de\u7684 raw <code>null</code></p>"},{"location":"12_Tickets/02_api/TDD-010_PrematchCommentAPI/#naming-conventions","title":"\u547d\u540d\u898f\u7bc4 / Naming Conventions","text":"<ul> <li>\u4f7f\u7528 <code>PrematchCommentAPI</code> \u4f5c\u70ba namespace enum / Use <code>PrematchCommentAPI</code> as namespace enum</li> <li>Endpoint \u4f7f\u7528 <code>PrematchCommentEndpoint</code> enum\uff0c\u5be6\u4f5c <code>APIEndpoint</code> protocol / Endpoint uses <code>PrematchCommentEndpoint</code> enum, implements <code>APIEndpoint</code> protocol</li> <li>API Models \u4f7f\u7528 <code>XXXDTO</code> \u547d\u540d\uff0c\u5be6\u4f5c <code>Decodable</code>\u3001<code>Sendable</code> / API Models use <code>XXXDTO</code> naming, implement <code>Decodable</code>, <code>Sendable</code></li> <li>Repository \u4f7f\u7528 <code>actor</code>\uff0c\u5be6\u4f5c <code>PrematchCommentRepositoryProtocol</code> / Repository uses <code>actor</code>, implements <code>PrematchCommentRepositoryProtocol</code></li> <li>\u4f7f\u7528 extension \u5206\u96e2\u95dc\u6ce8\u9ede / Use extension to separate concerns</li> <li><code>SharedBetsMetadata</code> \u5305\u88dd\u578b\u5225\u7528\u65bc\u7b26\u5408 Sendable \u5354\u8b70\uff0c\u5728 Repository \u5c64\u89e3\u5305 / <code>SharedBetsMetadata</code> wrapper type for Sendable compliance, unwrapped at Repository layer</li> </ul>"},{"location":"12_Tickets/02_api/TDD-010_PrematchCommentAPI/#acceptance-criteria","title":"\u9a57\u6536\u689d\u4ef6 / Acceptance Criteria","text":"<ul> <li>[ ] <code>PrematchCommentAPI</code> namespace enum \u5b9a\u7fa9\u5b8c\u6210 / <code>PrematchCommentAPI</code> namespace enum definition complete</li> <li>[ ] \u6240\u6709\u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c\uff08\u4f7f\u7528 extension \u5206\u96e2\uff09 / All file structure matches reference code style (using extension separation)</li> <li>[ ] \u6240\u6709 Endpoints \u5b9a\u7fa9\u5b8c\u6210 / All Endpoints definition complete</li> <li>[ ] Request/Response DTO \u5b9a\u7fa9\u5b8c\u6210\uff0c\u5be6\u4f5c <code>Decodable</code>\u3001<code>Sendable</code> / Request/Response DTO definition complete, implements <code>Decodable</code>, <code>Sendable</code></li> <li>[ ] Repository \u4f7f\u7528 <code>actor</code> \u5be6\u4f5c / Repository uses <code>actor</code> implementation</li> <li>[ ] Repository Protocol \u5b9a\u7fa9\u5b8c\u6210 / Repository Protocol definition complete</li> <li>[ ] Error Response \u683c\u5f0f\u5b9a\u7fa9\u5b8c\u6210 / Error Response format definition complete</li> </ul>"},{"location":"12_Tickets/02_api/TDD-010_PrematchCommentAPI/#related-documents","title":"\u76f8\u95dc\u6587\u4ef6 / Related Documents","text":"<ul> <li>API Spec\uff1a<code>08_API Spec &amp; Mapping/01_api_spec.md</code></li> <li>Module Responsibility\uff1a<code>03_Module Responsibility/01_module_responsibility.md</code></li> </ul>"},{"location":"12_Tickets/02_api/TDD-010_PrematchCommentAPI_en/","title":"TDD-010: PrematchCommentAPI","text":""},{"location":"12_Tickets/02_api/TDD-010_PrematchCommentAPI_en/#ticket-information","title":"Ticket Information","text":"<p>|------|-----| |  | Ticket ID | TDD-010 | | Jira Key | FOOTBALL-9178 |  | |  | Implement PrematchCommentAPI Define |  | |  | Type | API |  | |  | P0 |  | |  | PrematchComment |  | |  | TDD-001, TDD-002, TDD-006 |  | |  | Story Point | 3 |  | |  | Standard\uff1a1 daysMost Stringent\uff1a1 days |  |</p>"},{"location":"12_Tickets/02_api/TDD-010_PrematchCommentAPI_en/#description","title":"Description","text":"<p>Implement PrematchCommentAPI API \u5b9a\u7fa9\u3002</p>"},{"location":"12_Tickets/02_api/TDD-010_PrematchCommentAPI_en/#requirements","title":"Requirements","text":"<ol> <li>Define All Endpoints(URL, Method, Request/Response DTO)</li> <li>Define Error Response \u683c\u5f0f</li> <li>Define API \u6587\u4ef6\u8a3b\u89e3</li> <li> <ol> <li>Endpoints\uff1a</li> </ol> </li> <li> <ul> <li><code>GET /chat/match/comment/info/{refId}</code></li> </ul> </li> <li> <ul> <li><code>GET /chat/match/comment/popular</code></li> </ul> </li> <li> <ul> <li><code>GET /chat/match/comment/newest</code></li> </ul> </li> <li> <ul> <li><code>GET /chat/match/comment/replies</code></li> </ul> </li> <li> <ul> <li><code>POST /chat/match/comment</code></li> </ul> </li> <li> <ul> <li><code>POST /chat/match/comment/like</code></li> </ul> </li> </ol>"},{"location":"12_Tickets/02_api/TDD-010_PrematchCommentAPI_en/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] all Endpoints Definition Complete</li> <li>[ ] Request/Response DTO Definition Complete</li> <li>[ ] API \u6587\u4ef6\u8a3b\u89e3\u5b8c\u6574</li> <li>[ ] Error Response \u683c\u5f0fDefinition Complete</li> </ul>"},{"location":"12_Tickets/02_api/TDD-010_PrematchCommentAPI_en/#related-documents","title":"Related Documents","text":"<ul> <li>API Spec\uff1a<code>output/LiveChat&amp;PrematchComment/08_API Spec &amp; Mapping/01_api_spec.md</code></li> <li>Module Responsibility\uff1a<code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code></li> </ul>"},{"location":"12_Tickets/02_api/TDD-011_ChatAPI/","title":"TDD-011: ChatAPI","text":""},{"location":"12_Tickets/02_api/TDD-011_ChatAPI/#ticket-ticket-information","title":"Ticket \u8cc7\u8a0a / Ticket Information","text":"\u6b04\u4f4d \u503c Ticket ID TDD-011 Jira Key FOOTBALL-9179 \u6a19\u984c \u5be6\u4f5c ChatAPI \u5b9a\u7fa9 \u985e\u578b API \u512a\u5148\u7d1a P0 \u6240\u5c6c Feature LiveChat \u4f9d\u8cf4 Ticket TDD-004, TDD-005 Story Point 5 \u4f30\u6642\uff08Senior iOS Engineer + AI \u8f14\u52a9\uff09 \u6a19\u6e96\uff1a2 \u5929\u6700\u56b4\u53b2\uff1a1 \u5929 \u958b\u767c\u65e5\u671f / Development Date 2025-12-01 (\u9031\u4e00)"},{"location":"12_Tickets/02_api/TDD-011_ChatAPI/#description","title":"\u63cf\u8ff0 / Description","text":"<p>\u5be6\u4f5c ChatAPI API \u5b9a\u7fa9\uff08\u5305\u542b HTTP \u548c WebSocket\uff09\u3002 / Implement ChatAPI API \u5b9a\u7fa9(\u5305\u542b HTTP \u548c WebSocket)\u3002</p>"},{"location":"12_Tickets/02_api/TDD-011_ChatAPI/#requirements","title":"\u9700\u6c42 / Requirements","text":"<ol> <li>\u5b9a\u7fa9 <code>ChatAPI</code> namespace enum / Define <code>ChatAPI</code> namespace enum</li> <li>\u4f7f\u7528 extension \u5206\u96e2\u95dc\u6ce8\u9ede / Use extension to separate concerns:</li> <li><code>ChatAPI.swift</code> - namespace \u5b9a\u7fa9 / namespace definition</li> <li><code>ChatAPI+Endpoint.swift</code> - HTTP Endpoint \u5b9a\u7fa9 / HTTP Endpoint definition</li> <li><code>ChatAPI+Models.swift</code> - API Models \u5b9a\u7fa9 / API Models definition</li> <li><code>ChatAPI+WebSocket.swift</code> - WebSocket \u7aef\u9ede\u548c\u8a0a\u606f\u683c\u5f0f / WebSocket endpoint and message format</li> <li><code>ChatAPI+RepositoryProtocol.swift</code> - Repository Protocol / Repository Protocol</li> <li><code>ChatAPI+Repository.swift</code> - Repository \u5be6\u4f5c\uff08\u4f7f\u7528 actor\uff09 / Repository implementation (using actor)</li> <li>\u5b9a\u7fa9\u6240\u6709 HTTP Endpoints / Define all HTTP Endpoints</li> <li>\u5b9a\u7fa9 WebSocket \u7aef\u9ede\u548c\u8a0a\u606f\u683c\u5f0f / Define WebSocket endpoint and message format</li> <li>Endpoints\uff1a</li> <li><code>POST /chat/match/batch/count</code> \u26a0\ufe0f \u4fee\u6b63\u70ba POST\uff08\u539f\u898f\u5283\u70ba GET\uff0c\u5be6\u969b API \u53ea\u652f\u63f4 POST\uff09</li> <li><code>GET /chat/match/{refId}</code></li> <li><code>GET /chat/match/backward</code></li> <li><code>POST /chat/match/message</code>\uff08\u50c5\u652f\u63f4 TEXT \u985e\u578b\uff09</li> <li><code>POST /chat/match/join</code>\uff08\u53ef\u9078\u64cd\u4f5c\uff0c\u8fd4\u56de null\uff09</li> <li><code>POST /chat/match/leave</code>\uff08\u53ef\u9078\u64cd\u4f5c\uff0c\u8fd4\u56de null\uff09</li> <li><code>POST /chat/match/leave/bulk</code>\uff08\u53ef\u9078\u64cd\u4f5c\uff0c\u6279\u91cf\u5f37\u5236\u96e2\u958b\uff0c\u8fd4\u56de null\uff09</li> <li><code>wss://{domain}/chat/websocket/web-chat</code>\uff08WebSocket\uff09</li> </ol>"},{"location":"12_Tickets/02_api/TDD-011_ChatAPI/#implementation-guidelines","title":"\u5be6\u4f5c\u898f\u7bc4 / Implementation Guidelines","text":""},{"location":"12_Tickets/02_api/TDD-011_ChatAPI/#file-structure","title":"\u6a94\u6848\u7d50\u69cb / File Structure","text":"<pre><code>Sources/LiveChat/Services/API/Chat/\n  \u251c\u2500\u2500 ChatAPI.swift                    # namespace \u5b9a\u7fa9\n  \u251c\u2500\u2500 ChatAPI+Endpoint.swift           # HTTP Endpoint \u5b9a\u7fa9\n  \u251c\u2500\u2500 ChatAPI+Models.swift             # API Models \u5b9a\u7fa9\n  \u251c\u2500\u2500 ChatAPI+WebSocket.swift         # WebSocket \u7aef\u9ede\u548c\u8a0a\u606f\u683c\u5f0f\n  \u251c\u2500\u2500 ChatAPI+RepositoryProtocol.swift # Repository Protocol\n  \u2514\u2500\u2500 ChatAPI+Repository.swift        # Repository \u5be6\u4f5c\uff08actor\uff09\n</code></pre>"},{"location":"12_Tickets/02_api/TDD-011_ChatAPI/#code-examples","title":"\u7a0b\u5f0f\u78bc\u7bc4\u4f8b / Code Examples","text":""},{"location":"12_Tickets/02_api/TDD-011_ChatAPI/#chatapiendpointswift","title":"ChatAPI+Endpoint.swift","text":"<pre><code>import Foundation\nimport NetworkService\nimport NetworkUtils\nimport SportyFoundation\n\nextension ChatAPI {\n    public enum ChatEndpoint: APIEndpoint {\n        case getBatchCount(refIdList: [String])\n        case getChatroomInfo(refId: String, userId: String?)\n        case getHistoricalMessages(chatroomId: String, messageNo: Int, length: Int?)\n        case sendMessage(chatroomId: String, text: String)\n        case joinChatroom(chatroomId: String)\n        case leaveChatroom(chatroomId: String)\n        case bulkLeaveChatroom(chatroomId: String, excludeUserIds: [String]?)\n\n        public var baseURL: String {\n            AppConfiguration.current.environment.domain.absoluteString\n        }\n\n        public var path: String {\n            let base = \"/api/\\(Region.current.apiCountryCode)/chat/match\"\n\n            switch self {\n            case .getBatchCount:\n                return \"\\(base)/batch/count\"\n            case .getChatroomInfo(let refId, _):\n                return \"\\(base)/\\(refId)\"\n            case .getHistoricalMessages:\n                return \"\\(base)/backward\"\n            case .sendMessage:\n                return \"\\(base)/message\"\n            case .joinChatroom:\n                return \"\\(base)/join\"\n            case .leaveChatroom:\n                return \"\\(base)/leave\"\n            case .bulkLeaveChatroom:\n                return \"\\(base)/leave/bulk\"\n            }\n        }\n\n        public var method: String {\n            switch self {\n            case .getChatroomInfo, .getHistoricalMessages:\n                return FComHTTPMethod.get.rawValue\n            case .getBatchCount, .sendMessage, .joinChatroom, .leaveChatroom, .bulkLeaveChatroom:\n                return FComHTTPMethod.post.rawValue  // \u26a0\ufe0f getBatchCount \u4fee\u6b63\u70ba POST\n            }\n        }\n\n        public var encoding: APIEncoding {\n            switch self {\n            case .getChatroomInfo, .getHistoricalMessages:\n                return .url\n            case .getBatchCount, .sendMessage, .joinChatroom, .leaveChatroom, .bulkLeaveChatroom:\n                return .json  // \u26a0\ufe0f getBatchCount \u4fee\u6b63\u70ba JSON encoding\n            }\n        }\n\n        public var parameters: [String: Any]? {\n            switch self {\n            case .getBatchCount(let refIdList):\n                return [\"refIdList\": refIdList]\n            case .getChatroomInfo(let refId, let userId):\n                var params: [String: Any] = [\"refId\": refId]\n                if let userId = userId {\n                    params[\"userId\"] = userId\n                }\n                return params\n            case .getHistoricalMessages(let chatroomId, let messageNo, let length):\n                var params: [String: Any] = [\n                    \"chatRoomId\": chatroomId,\n                    \"messageNo\": messageNo\n                ]\n                if let length = length {\n                    params[\"length\"] = length\n                }\n                return params\n            case .sendMessage(let chatroomId, let text):\n                return [\n                    \"chatRoomId\": chatroomId,\n                    \"text\": text,\n                    \"messageType\": \"TEXT\"\n                ]\n            case .joinChatroom(let chatroomId):\n                return [\"chatRoomId\": chatroomId]\n            case .leaveChatroom(let chatroomId):\n                return [\"chatRoomId\": chatroomId]\n            case .bulkLeaveChatroom(let chatroomId, let excludeUserIds):\n                var params: [String: Any] = [\"chatRoomId\": chatroomId]\n                if let excludeUserIds = excludeUserIds {\n                    params[\"excludeUserIds\"] = excludeUserIds\n                }\n                return params\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"12_Tickets/02_api/TDD-011_ChatAPI/#chatapiwebsocketswift","title":"ChatAPI+WebSocket.swift","text":"<pre><code>import Foundation\n\nextension ChatAPI {\n    /// WebSocket endpoint for real-time chat messages\n    public struct WebSocketEndpoint {\n        /// WebSocket URL\n        /// - Parameter domain: WebSocket domain (e.g., \"www.encorebet.net\")\n        /// - Returns: WebSocket URL\n        public static func url(for domain: String) -&gt; URL? {\n            URL(string: \"wss://\\(domain)/chat/websocket/web-chat\")\n        }\n\n        /// STOMP subscription destination\n        /// - Parameter chatroomId: Chat room ID\n        /// - Returns: STOMP destination (e.g., \"/topic/chat_room.{chatroomId}\")\n        public static func subscribeDestination(chatroomId: String) -&gt; String {\n            \"/topic/chat_room.\\(chatroomId)\"\n        }\n    }\n\n    /// WebSocket message DTO\n    public struct WebSocketMessageDTO: Codable, Sendable {\n        public let type: String  // \"MESSAGE\"\n        public let data: MessageResponseDataDTO  // \u8207 POST /chat/match/message \u7684 Response \u683c\u5f0f\u76f8\u540c\n\n        enum CodingKeys: String, CodingKey {\n            case type, data\n        }\n\n        public init(from decoder: Decoder) throws {\n            let container = try decoder.container(keyedBy: CodingKeys.self)\n            type = try container.decodeIfPresent(String.self, forKey: .type) ?? \"\"\n            data = try container.decodeIfPresent(MessageResponseDataDTO.self, forKey: .data) ?? .dummy\n        }\n    }\n}\n</code></pre> <p>WebSocket \u898f\u683c\u8aaa\u660e\uff1a</p> <ol> <li>Connect Headers\uff1a</li> <li><code>Platform: ios</code></li> <li><code>App-Version: {version}</code></li> <li><code>Device-Id: {deviceId}</code></li> <li> <p><code>userId: {userId}</code></p> </li> <li> <p>Subscribe Headers\uff1a</p> </li> <li> <p><code>x-queue-name: {chatRoomId}</code></p> </li> <li> <p>Message Types (msgType)\uff1a</p> </li> <li><code>1</code>: TEXT \u6d88\u606f</li> <li><code>4</code>: JSON \u6d88\u606f\uff08\u6295\u6ce8\u5206\u4eab\u7b49\uff09</li> <li> <p><code>5</code>: GIF \u6d88\u606f</p> </li> <li> <p>Unsubscribe Format\uff1a    <pre><code>UNSUBSCRIBE\nid:{subscriptionId}\n</code></pre></p> </li> </ol> <p>\u8a73\u7d30\u898f\u683c\u8acb\u53c3\u8003\uff1a<code>08_API Spec &amp; Mapping/01_api_spec.md</code></p>"},{"location":"12_Tickets/02_api/TDD-011_ChatAPI/#chatapirepositoryswift-null-response","title":"ChatAPI+Repository.swift (Null Response \u8655\u7406)","text":"<pre><code>extension ChatAPI {\n    public actor ChatRepository: ChatRepositoryProtocol {\n        private let apiClient: APIClient\n\n        public init(apiClient: APIClient = APIClient.shared) {\n            self.apiClient = apiClient\n        }\n\n        // ... \u5176\u4ed6\u65b9\u6cd5 ...\n\n        public func joinChatroom(chatroomId: String) async throws {\n            let endpoint = ChatEndpoint.joinChatroom(chatroomId: chatroomId)\n            // \u26a0\ufe0f API \u8fd4\u56de raw null\uff0c\u4f7f\u7528 NullableResponse \u8655\u7406\n            let _: NullableResponse = try await apiClient.request(endpoint)\n        }\n\n        public func leaveChatroom(chatroomId: String) async throws {\n            let endpoint = ChatEndpoint.leaveChatroom(chatroomId: chatroomId)\n            // \u26a0\ufe0f API \u8fd4\u56de raw null\uff0c\u4f7f\u7528 NullableResponse \u8655\u7406\n            let _: NullableResponse = try await apiClient.request(endpoint)\n        }\n\n        public func bulkLeaveChatroom(chatroomId: String, excludeUserIds: [String]?) async throws {\n            let endpoint = ChatEndpoint.bulkLeaveChatroom(chatroomId: chatroomId, excludeUserIds: excludeUserIds)\n            // \u26a0\ufe0f API \u8fd4\u56de raw null\uff0c\u4f7f\u7528 NullableResponse \u8655\u7406\n            let _: NullableResponse = try await apiClient.request(endpoint)\n        }\n    }\n\n    /// \u7528\u65bc\u8655\u7406\u8fd4\u56de null \u7684 API response\n    struct NullableResponse: Decodable {\n        init(from decoder: Decoder) throws {\n            // \u5141\u8a31\u89e3\u6790 null \u503c\uff0c\u4e0d\u505a\u4efb\u4f55\u8655\u7406\n            // \u5982\u679c\u80fd\u6210\u529f\u5230\u9054\u9019\u88e1\uff0c\u4ee3\u8868 HTTP \u8acb\u6c42\u6210\u529f\n        }\n    }\n}\n</code></pre> <p>\u5be6\u4f5c\u8aaa\u660e\uff1a<code>joinChatroom</code>\u3001<code>leaveChatroom</code>\u3001<code>bulkLeaveChatroom</code> API \u5be6\u969b\u8fd4\u56de raw <code>null</code>\uff0c\u800c\u975e\u5305\u88dd\u5728 <code>bizCode/data</code> \u7d50\u69cb\u4e2d\u3002\u4f7f\u7528 <code>NullableResponse</code> \u4f86\u6b63\u78ba\u8655\u7406\u9019\u7a2e\u60c5\u6cc1\u3002</p>"},{"location":"12_Tickets/02_api/TDD-011_ChatAPI/#naming-conventions","title":"\u547d\u540d\u898f\u7bc4 / Naming Conventions","text":"<ul> <li>\u4f7f\u7528 <code>ChatAPI</code> \u4f5c\u70ba namespace enum / Use <code>ChatAPI</code> as namespace enum</li> <li>HTTP Endpoint \u4f7f\u7528 <code>ChatEndpoint</code> enum\uff0c\u5be6\u4f5c <code>APIEndpoint</code> protocol / HTTP Endpoint uses <code>ChatEndpoint</code> enum, implements <code>APIEndpoint</code> protocol</li> <li>WebSocket \u76f8\u95dc\u5b9a\u7fa9\u5728 <code>ChatAPI+WebSocket.swift</code> / WebSocket related definitions in <code>ChatAPI+WebSocket.swift</code></li> <li>API Models \u4f7f\u7528 <code>XXXDTO</code> \u547d\u540d\uff0c\u5be6\u4f5c <code>Decodable</code>\u3001<code>Sendable</code> / API Models use <code>XXXDTO</code> naming, implement <code>Decodable</code>, <code>Sendable</code></li> <li>Repository \u4f7f\u7528 <code>actor</code>\uff0c\u5be6\u4f5c <code>ChatRepositoryProtocol</code> / Repository uses <code>actor</code>, implements <code>ChatRepositoryProtocol</code></li> </ul>"},{"location":"12_Tickets/02_api/TDD-011_ChatAPI/#acceptance-criteria","title":"\u9a57\u6536\u689d\u4ef6 / Acceptance Criteria","text":"<ul> <li>[ ] <code>ChatAPI</code> namespace enum \u5b9a\u7fa9\u5b8c\u6210 / <code>ChatAPI</code> namespace enum definition complete</li> <li>[ ] \u6240\u6709\u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c\uff08\u4f7f\u7528 extension \u5206\u96e2\uff09 / All file structure matches reference code style (using extension separation)</li> <li>[ ] \u6240\u6709 HTTP Endpoints \u5b9a\u7fa9\u5b8c\u6210 / All HTTP Endpoints definition complete</li> <li>[ ] WebSocket \u7aef\u9ede\u548c\u8a0a\u606f\u683c\u5f0f\u5b9a\u7fa9\u5b8c\u6210 / WebSocket endpoint and message format definition complete</li> <li>[ ] Request/Response DTO \u5b9a\u7fa9\u5b8c\u6210\uff0c\u5be6\u4f5c <code>Decodable</code>\u3001<code>Sendable</code> / Request/Response DTO definition complete, implements <code>Decodable</code>, <code>Sendable</code></li> <li>[ ] Repository \u4f7f\u7528 <code>actor</code> \u5be6\u4f5c / Repository uses <code>actor</code> implementation</li> <li>[ ] Repository Protocol \u5b9a\u7fa9\u5b8c\u6210 / Repository Protocol definition complete</li> <li>[ ] Error Response \u683c\u5f0f\u5b9a\u7fa9\u5b8c\u6210 / Error Response format definition complete</li> </ul>"},{"location":"12_Tickets/02_api/TDD-011_ChatAPI/#related-documents","title":"\u76f8\u95dc\u6587\u4ef6 / Related Documents","text":"<ul> <li>API Spec\uff1a<code>08_API Spec &amp; Mapping/01_api_spec.md</code></li> <li>Module Responsibility\uff1a<code>03_Module Responsibility/01_module_responsibility.md</code></li> </ul>"},{"location":"12_Tickets/02_api/TDD-011_ChatAPI/#_1","title":"\u8abf\u6574\u56e0\u5b50\u8aaa\u660e / \u8abf\u6574\u56e0\u5b50\u8aaa\u660e","text":"<ul> <li>+2 SP\uff1aWebSocket API\uff08\u8907\u96dc\u5ea6\u8f03\u9ad8\uff09 / - +2 SP\uff1aWebSocket API(\u8907\u96dc\u5ea6\u8f03\u9ad8)</li> </ul>"},{"location":"12_Tickets/02_api/TDD-011_ChatAPI_en/","title":"TDD-011: ChatAPI","text":""},{"location":"12_Tickets/02_api/TDD-011_ChatAPI_en/#ticket-information","title":"Ticket Information","text":"<p>|------|-----| |  | Ticket ID | TDD-011 | | Jira Key | FOOTBALL-9179 |  | |  | Implement ChatAPI Define |  | |  | Type | API |  | |  | P0 |  | |  | LiveChat |  | |  | TDD-004, TDD-005 |  | |  | Story Point | 5 |  | |  | Standard\uff1a2 daysMost Stringent\uff1a1 days |  |</p>"},{"location":"12_Tickets/02_api/TDD-011_ChatAPI_en/#description","title":"Description","text":"<p>Implement ChatAPI API \u5b9a\u7fa9(\u5305\u542b HTTP \u548c WebSocket)\u3002</p>"},{"location":"12_Tickets/02_api/TDD-011_ChatAPI_en/#requirements","title":"Requirements","text":"<ol> <li>Define All HTTP Endpoints(URL, Method, Request/Response DTO)</li> <li>Define WebSocket \u7aef\u9edeand\u8a0a\u606f\u683c\u5f0f</li> <li>Define Error Response \u683c\u5f0f</li> <li>Define API \u6587\u4ef6\u8a3b\u89e3</li> <li> <ol> <li>Endpoints\uff1a</li> </ol> </li> <li> <ul> <li><code>GET /chat/match/{refId}</code></li> </ul> </li> <li> <ul> <li><code>POST /chat/match/join</code></li> </ul> </li> <li> <ul> <li><code>POST /chat/match/backward</code></li> </ul> </li> <li> <ul> <li><code>POST /chat/match/leave</code></li> </ul> </li> <li> <ul> <li><code>POST /chat/{matchId}/message</code></li> </ul> </li> <li> <ul> <li><code>wss://www.encorebet.net/chat/websocket/web-chat</code>\uff08WebSocket\uff09</li> </ul> </li> </ol>"},{"location":"12_Tickets/02_api/TDD-011_ChatAPI_en/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] all HTTP Endpoints Definition Complete</li> <li>[ ] WebSocket \u7aef\u9edeand\u8a0a\u606f\u683c\u5f0fDefinition Complete</li> <li>[ ] Request/Response DTO Definition Complete</li> <li>[ ] API \u6587\u4ef6\u8a3b\u89e3\u5b8c\u6574</li> <li>[ ] Error Response \u683c\u5f0fDefinition Complete</li> </ul>"},{"location":"12_Tickets/02_api/TDD-011_ChatAPI_en/#related-documents","title":"Related Documents","text":"<ul> <li>API Spec\uff1a<code>output/LiveChat&amp;PrematchComment/08_API Spec &amp; Mapping/01_api_spec.md</code></li> <li>Module Responsibility\uff1a<code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code></li> </ul>"},{"location":"12_Tickets/02_api/TDD-011_ChatAPI_en/#_1","title":"\u8abf\u6574\u56e0\u5b50\u8aaa\u660e","text":"<ul> <li>+2 SP\uff1aWebSocket API(\u8907\u96dc\u5ea6\u8f03\u9ad8)</li> </ul>"},{"location":"12_Tickets/03_client/TDD-020_PrematchCommentClient/","title":"TDD-020: PrematchCommentClient","text":""},{"location":"12_Tickets/03_client/TDD-020_PrematchCommentClient/#ticket-ticket-information","title":"Ticket \u8cc7\u8a0a / Ticket Information","text":"\u6b04\u4f4d \u503c Ticket ID TDD-020 Jira Key FOOTBALL-9181 \u6a19\u984c \u5be6\u4f5c PrematchCommentClient\uff08HTTP\uff09 \u985e\u578b Client \u512a\u5148\u7d1a P0 \u6240\u5c6c Feature PrematchComment \u4f9d\u8cf4 Ticket TDD-010 Story Point 5 \u4f30\u6642\uff08Senior iOS Engineer + AI \u8f14\u52a9\uff09 \u6a19\u6e96\uff1a2 \u5929\u6700\u56b4\u53b2\uff1a1 \u5929 \u958b\u767c\u65e5\u671f / Development Date 2025-12-02 (\u9031\u4e8c)"},{"location":"12_Tickets/03_client/TDD-020_PrematchCommentClient/#description","title":"\u63cf\u8ff0 / Description","text":"<p>\u5be6\u4f5c PrematchCommentClient\uff08HTTP\uff09\u3002 / Implement PrematchCommentClient(HTTP)\u3002</p>"},{"location":"12_Tickets/03_client/TDD-020_PrematchCommentClient/#requirements","title":"\u9700\u6c42 / Requirements","text":"<ol> <li>\u5be6\u4f5c <code>PrematchCommentClient</code>\uff08\u4f7f\u7528 <code>APIClient</code>\uff09 / Implement <code>PrematchCommentClient</code> (using <code>APIClient</code>)</li> <li>\u6574\u5408 <code>PrematchCommentAPI.PrematchCommentRepository</code> / Integrate <code>PrematchCommentAPI.PrematchCommentRepository</code></li> <li>\u5be6\u4f5c Error Handling / Implement Error Handling</li> <li>\u6a94\u6848\u7d50\u69cb\uff1a<code>Sources/PrematchComment/Services/API/PrematchCommentClient.swift</code> / File structure: <code>Sources/PrematchComment/Services/API/PrematchCommentClient.swift</code></li> </ol>"},{"location":"12_Tickets/03_client/TDD-020_PrematchCommentClient/#implementation-guidelines","title":"\u5be6\u4f5c\u898f\u7bc4 / Implementation Guidelines","text":""},{"location":"12_Tickets/03_client/TDD-020_PrematchCommentClient/#file-structure","title":"\u6a94\u6848\u7d50\u69cb / File Structure","text":"<pre><code>Sources/PrematchComment/Services/API/\n  \u2514\u2500\u2500 PrematchCommentClient.swift\n</code></pre>"},{"location":"12_Tickets/03_client/TDD-020_PrematchCommentClient/#code-example","title":"\u7a0b\u5f0f\u78bc\u7bc4\u4f8b / Code Example","text":"<pre><code>import Foundation\nimport NetworkService\n\npublic struct PrematchCommentClient {\n    private let apiRepository: PrematchCommentAPI.PrematchCommentRepository\n\n    public init(apiRepository: PrematchCommentAPI.PrematchCommentRepository = PrematchCommentAPI.PrematchCommentRepository()) {\n        self.apiRepository = apiRepository\n    }\n\n    /// \u6279\u91cf\u7372\u53d6\u8a55\u8ad6\u8cc7\u8a0a\n    public func getBatchCommentInfo(refIdList: [String]) async throws -&gt; [PrematchCommentAPI.CommentMetaInfoDTO] {\n        return try await apiRepository.getBatchCommentInfo(refIdList: refIdList)\n    }\n\n    /// \u7372\u53d6\u55ae\u500b\u8a55\u8ad6\u8cc7\u8a0a\n    public func getCommentMeta(refId: String) async throws -&gt; PrematchCommentAPI.CommentMetaDataDTO {\n        return try await apiRepository.getCommentMeta(refId: refId)\n    }\n\n    /// \u7372\u53d6\u71b1\u5ea6\u6392\u5e8f\u7684\u8a55\u8ad6\u5217\u8868\n    public func getCommentsByPopular(refId: String, pageNum: Int?, pageSize: Int?) async throws -&gt; [PrematchCommentAPI.CommentDTO] {\n        return try await apiRepository.getCommentsByPopular(refId: refId, pageNum: pageNum, pageSize: pageSize)\n    }\n\n    /// \u7372\u53d6\u6700\u65b0\u6392\u5e8f\u7684\u8a55\u8ad6\u5217\u8868\n    public func getCommentsByNewest(refId: String, prevCommentId: Int64?, pageSize: Int?) async throws -&gt; [PrematchCommentAPI.CommentDTO] {\n        return try await apiRepository.getCommentsByNewest(refId: refId, prevCommentId: prevCommentId, pageSize: pageSize)\n    }\n\n    /// \u7372\u53d6\u56de\u8986\u5217\u8868\n    public func getReplies(parentCommentId: Int64, prevCommentId: Int64?, pageSize: Int?) async throws -&gt; [PrematchCommentAPI.CommentDTO] {\n        return try await apiRepository.getReplies(parentCommentId: parentCommentId, prevCommentId: prevCommentId, pageSize: pageSize)\n    }\n\n    /// \u767c\u4f48\u8a55\u8ad6\n    /// - Note: sharedBetsMeta \u4f7f\u7528 SharedBetsMetadata \u5305\u88dd\u4ee5\u7b26\u5408 Sendable \u5354\u8b70\n    public func publishComment(refId: String, content: String, parentId: Int64?, sharedBetsMeta: SharedBetsMetadata?, tagUserId: String?) async throws -&gt; PrematchCommentAPI.CommentDTO {\n        return try await apiRepository.publishComment(refId: refId, content: content, parentId: parentId, sharedBetsMeta: sharedBetsMeta, tagUserId: tagUserId)\n    }\n\n    /// \u5207\u63db\u9ede\u8b9a\u72c0\u614b\n    public func toggleLike(commentId: Int64) async throws -&gt; PrematchCommentAPI.CommentDTO? {\n        return try await apiRepository.toggleLike(commentId: commentId)\n    }\n}\n</code></pre>"},{"location":"12_Tickets/03_client/TDD-020_PrematchCommentClient/#naming-conventions","title":"\u547d\u540d\u898f\u7bc4 / Naming Conventions","text":"<ul> <li>Client \u4f7f\u7528 <code>struct</code>\uff0c\u63d0\u4f9b\u516c\u958b\u65b9\u6cd5 / Client uses <code>struct</code>, provides public methods</li> <li>\u5167\u90e8\u4f7f\u7528 <code>PrematchCommentAPI.PrematchCommentRepository</code> / Internally uses <code>PrematchCommentAPI.PrematchCommentRepository</code></li> <li>\u65b9\u6cd5\u76f4\u63a5\u59d4\u6d3e\u7d66 Repository / Methods delegate directly to Repository</li> <li>\u4f7f\u7528 <code>public</code> \u4fee\u98fe\u7b26 / Use <code>public</code> modifier</li> <li><code>sharedBetsMeta</code> \u4f7f\u7528 <code>SharedBetsMetadata</code> \u5305\u88dd\u578b\u5225\u4ee5\u7b26\u5408 Sendable \u5354\u8b70 / <code>sharedBetsMeta</code> uses <code>SharedBetsMetadata</code> wrapper type for Sendable compliance</li> </ul>"},{"location":"12_Tickets/03_client/TDD-020_PrematchCommentClient/#acceptance-criteria","title":"\u9a57\u6536\u689d\u4ef6 / Acceptance Criteria","text":"<ul> <li>[ ] <code>PrematchCommentClient</code> \u5be6\u4f5c\u5b8c\u6210 / <code>PrematchCommentClient</code> implementation complete</li> <li>[ ] \u6240\u6709 API \u547c\u53eb\u65b9\u6cd5\u5be6\u4f5c\u5b8c\u6210 / All API call methods implementation complete</li> <li>[ ] Error Handling \u5be6\u4f5c\u5b8c\u6210 / Error Handling implementation complete</li> <li>[ ] \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c / File structure matches reference code style</li> <li>[ ] Unit Test \u8986\u84cb\u7387 \u2265 80% / Unit Test Coverage \u2265 80%</li> <li>[ ] Integration Test \u901a\u904e / Integration Test Passed</li> </ul>"},{"location":"12_Tickets/03_client/TDD-020_PrematchCommentClient/#related-documents","title":"\u76f8\u95dc\u6587\u4ef6 / Related Documents","text":"<ul> <li>API Spec\uff1a<code>08_API Spec &amp; Mapping/01_api_spec.md</code></li> <li>Module Responsibility\uff1a<code>03_Module Responsibility/01_module_responsibility.md</code></li> </ul>"},{"location":"12_Tickets/03_client/TDD-020_PrematchCommentClient_en/","title":"TDD-020: PrematchCommentClient","text":""},{"location":"12_Tickets/03_client/TDD-020_PrematchCommentClient_en/#ticket-information","title":"Ticket Information","text":"<p>|------|-----| |  | Ticket ID | TDD-020 | | Jira Key | FOOTBALL-9181 |  | |  | Implement PrematchCommentClient\uff08HTTP\uff09 |  | |  | Type | Client |  | |  | P0 |  | |  | PrematchComment |  | |  | TDD-010 |  | |  | Story Point | 5 |  | |  | Standard\uff1a2 daysMost Stringent\uff1a1 days |  |</p>"},{"location":"12_Tickets/03_client/TDD-020_PrematchCommentClient_en/#description","title":"Description","text":"<p>Implement PrematchCommentClient(HTTP)\u3002</p>"},{"location":"12_Tickets/03_client/TDD-020_PrematchCommentClient_en/#requirements","title":"Requirements","text":"<ol> <li>Implement HTTP \u901a\u8a0aLogic</li> <li>Implement Request/Response \u7de8\u89e3\u78bc</li> <li>Implement Error Handling</li> <li>Implement All API CallMethods</li> </ol>"},{"location":"12_Tickets/03_client/TDD-020_PrematchCommentClient_en/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] all API CallImplementation Complete</li> <li>[ ] Error Handling Implementation Complete</li> <li>[ ] Request/Response \u7de8\u89e3\u78bcImplementation Complete</li> <li>[ ] Unit Test Coverage \u2265 80%</li> <li>[ ] Integration Test Passed</li> </ul>"},{"location":"12_Tickets/03_client/TDD-020_PrematchCommentClient_en/#related-documents","title":"Related Documents","text":"<ul> <li>API Spec\uff1a<code>output/LiveChat&amp;PrematchComment/08_API Spec &amp; Mapping/01_api_spec.md</code></li> <li>Module Responsibility\uff1a<code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code></li> </ul>"},{"location":"12_Tickets/03_client/TDD-021_LiveChatClient/","title":"TDD-021: LiveChatClient","text":""},{"location":"12_Tickets/03_client/TDD-021_LiveChatClient/#ticket-ticket-information","title":"Ticket \u8cc7\u8a0a / Ticket Information","text":"\u6b04\u4f4d \u503c Ticket ID TDD-021 Jira Key FOOTBALL-9182 \u6a19\u984c \u5be6\u4f5c LiveChatClient\uff08HTTP\uff09 \u985e\u578b Client \u512a\u5148\u7d1a P0 \u6240\u5c6c Feature LiveChat \u4f9d\u8cf4 Ticket TDD-011 Story Point 3 \u4f30\u6642\uff08Senior iOS Engineer + AI \u8f14\u52a9\uff09 \u6a19\u6e96\uff1a1 \u5929\u6700\u56b4\u53b2\uff1a1 \u5929 \u958b\u767c\u65e5\u671f / Development Date 2025-12-02 (\u9031\u4e8c)"},{"location":"12_Tickets/03_client/TDD-021_LiveChatClient/#description","title":"\u63cf\u8ff0 / Description","text":"<p>\u5be6\u4f5c LiveChatClient\uff08HTTP\uff09\u3002 / Implement LiveChatClient(HTTP)\u3002</p>"},{"location":"12_Tickets/03_client/TDD-021_LiveChatClient/#requirements","title":"\u9700\u6c42 / Requirements","text":"<ol> <li>\u5be6\u4f5c <code>LiveChatClient</code>\uff08\u4f7f\u7528 <code>APIClient</code>\uff09 / Implement <code>LiveChatClient</code> (using <code>APIClient</code>)</li> <li>\u6574\u5408 <code>ChatAPI.ChatRepository</code> / Integrate <code>ChatAPI.ChatRepository</code></li> <li>\u5be6\u4f5c Error Handling / Implement Error Handling</li> <li>\u6a94\u6848\u7d50\u69cb\uff1a<code>Sources/LiveChat/Services/API/LiveChatClient.swift</code> / File structure: <code>Sources/LiveChat/Services/API/LiveChatClient.swift</code></li> </ol>"},{"location":"12_Tickets/03_client/TDD-021_LiveChatClient/#implementation-guidelines","title":"\u5be6\u4f5c\u898f\u7bc4 / Implementation Guidelines","text":""},{"location":"12_Tickets/03_client/TDD-021_LiveChatClient/#file-structure","title":"\u6a94\u6848\u7d50\u69cb / File Structure","text":"<pre><code>Sources/LiveChat/Services/API/\n  \u2514\u2500\u2500 LiveChatClient.swift\n</code></pre>"},{"location":"12_Tickets/03_client/TDD-021_LiveChatClient/#code-example","title":"\u7a0b\u5f0f\u78bc\u7bc4\u4f8b / Code Example","text":"<pre><code>import Foundation\nimport NetworkService\n\npublic struct LiveChatClient {\n    private let apiRepository: ChatAPI.ChatRepository\n\n    public init(apiRepository: ChatAPI.ChatRepository = ChatAPI.ChatRepository()) {\n        self.apiRepository = apiRepository\n    }\n\n    /// \u6279\u91cf\u7372\u53d6\u804a\u5929\u5ba4\u8a08\u6578\n    public func getBatchCount(refIdList: [String]) async throws -&gt; [ChatAPI.ChatRoomCountDTO] {\n        return try await apiRepository.getBatchCount(refIdList: refIdList)\n    }\n\n    /// \u7372\u53d6\u6216\u5275\u5efa\u804a\u5929\u5ba4\u8cc7\u8a0a\n    public func getChatroomInfo(refId: String, userId: String?) async throws -&gt; ChatAPI.ChatroomInfoDataDTO {\n        return try await apiRepository.getChatroomInfo(refId: refId, userId: userId)\n    }\n\n    /// \u7372\u53d6\u6b77\u53f2\u6d88\u606f\n    public func getHistoricalMessages(chatroomId: String, messageNo: Int, length: Int?) async throws -&gt; [ChatAPI.MessageDTO] {\n        return try await apiRepository.getHistoricalMessages(chatroomId: chatroomId, messageNo: messageNo, length: length)\n    }\n\n    /// \u767c\u9001\u6d88\u606f\n    public func sendMessage(chatroomId: String, text: String) async throws -&gt; ChatAPI.MessageResponseDataDTO {\n        return try await apiRepository.sendMessage(chatroomId: chatroomId, text: text)\n    }\n\n    /// \u52a0\u5165\u804a\u5929\u5ba4\uff08\u53ef\u9078\u64cd\u4f5c\uff09\n    public func joinChatroom(chatroomId: String) async throws {\n        _ = try await apiRepository.joinChatroom(chatroomId: chatroomId)\n    }\n\n    /// \u96e2\u958b\u804a\u5929\u5ba4\uff08\u53ef\u9078\u64cd\u4f5c\uff09\n    public func leaveChatroom(chatroomId: String) async throws {\n        _ = try await apiRepository.leaveChatroom(chatroomId: chatroomId)\n    }\n\n    /// \u6279\u91cf\u5f37\u5236\u96e2\u958b\u804a\u5929\u5ba4\uff08\u53ef\u9078\u64cd\u4f5c\uff09\n    public func bulkLeaveChatroom(chatroomId: String, excludeUserIds: [String]?) async throws {\n        _ = try await apiRepository.bulkLeaveChatroom(chatroomId: chatroomId, excludeUserIds: excludeUserIds)\n    }\n}\n</code></pre>"},{"location":"12_Tickets/03_client/TDD-021_LiveChatClient/#naming-conventions","title":"\u547d\u540d\u898f\u7bc4 / Naming Conventions","text":"<ul> <li>Client \u4f7f\u7528 <code>struct</code>\uff0c\u63d0\u4f9b\u516c\u958b\u65b9\u6cd5 / Client uses <code>struct</code>, provides public methods</li> <li>\u5167\u90e8\u4f7f\u7528 <code>ChatAPI.ChatRepository</code> / Internally uses <code>ChatAPI.ChatRepository</code></li> <li>\u65b9\u6cd5\u76f4\u63a5\u59d4\u6d3e\u7d66 Repository / Methods delegate directly to Repository</li> <li>\u4f7f\u7528 <code>public</code> \u4fee\u98fe\u7b26 / Use <code>public</code> modifier</li> </ul>"},{"location":"12_Tickets/03_client/TDD-021_LiveChatClient/#acceptance-criteria","title":"\u9a57\u6536\u689d\u4ef6 / Acceptance Criteria","text":"<ul> <li>[ ] <code>LiveChatClient</code> \u5be6\u4f5c\u5b8c\u6210 / <code>LiveChatClient</code> implementation complete</li> <li>[ ] \u6240\u6709 HTTP API \u547c\u53eb\u65b9\u6cd5\u5be6\u4f5c\u5b8c\u6210 / All HTTP API call methods implementation complete</li> <li>[ ] Error Handling \u5be6\u4f5c\u5b8c\u6210 / Error Handling implementation complete</li> <li>[ ] \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c / File structure matches reference code style</li> <li>[ ] Unit Test \u8986\u84cb\u7387 \u2265 80% / Unit Test Coverage \u2265 80%</li> <li>[ ] Integration Test \u901a\u904e / Integration Test Passed</li> </ul>"},{"location":"12_Tickets/03_client/TDD-021_LiveChatClient/#related-documents","title":"\u76f8\u95dc\u6587\u4ef6 / Related Documents","text":"<ul> <li>API Spec\uff1a<code>08_API Spec &amp; Mapping/01_api_spec.md</code></li> <li>Module Responsibility\uff1a<code>03_Module Responsibility/01_module_responsibility.md</code></li> </ul>"},{"location":"12_Tickets/03_client/TDD-021_LiveChatClient_en/","title":"TDD-021: LiveChatClient","text":""},{"location":"12_Tickets/03_client/TDD-021_LiveChatClient_en/#ticket-information","title":"Ticket Information","text":"<p>|------|-----| |  | Ticket ID | TDD-021 | | Jira Key | FOOTBALL-9182 |  | |  | Implement LiveChatClient\uff08HTTP\uff09 |  | |  | Type | Client |  | |  | P0 |  | |  | LiveChat |  | |  | TDD-011 |  | |  | Story Point | 3 |  | |  | Standard\uff1a1 daysMost Stringent\uff1a1 days |  |</p>"},{"location":"12_Tickets/03_client/TDD-021_LiveChatClient_en/#description","title":"Description","text":"<p>Implement LiveChatClient(HTTP)\u3002</p>"},{"location":"12_Tickets/03_client/TDD-021_LiveChatClient_en/#requirements","title":"Requirements","text":"<ol> <li>Implement HTTP \u901a\u8a0aLogic</li> <li>Implement Request/Response \u7de8\u89e3\u78bc</li> <li>Implement Error Handling</li> <li>Implement All HTTP API CallMethods</li> </ol>"},{"location":"12_Tickets/03_client/TDD-021_LiveChatClient_en/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] all HTTP API CallImplementation Complete</li> <li>[ ] Error Handling Implementation Complete</li> <li>[ ] Request/Response \u7de8\u89e3\u78bcImplementation Complete</li> <li>[ ] Unit Test Coverage \u2265 80%</li> <li>[ ] Integration Test Passed</li> </ul>"},{"location":"12_Tickets/03_client/TDD-021_LiveChatClient_en/#related-documents","title":"Related Documents","text":"<ul> <li>API Spec\uff1a<code>output/LiveChat&amp;PrematchComment/08_API Spec &amp; Mapping/01_api_spec.md</code></li> <li>Module Responsibility\uff1a<code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code></li> </ul>"},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/","title":"TDD-022: ChatWebSocketClient","text":""},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/#ticket-ticket-information","title":"Ticket \u8cc7\u8a0a / Ticket Information","text":"\u6b04\u4f4d \u503c Ticket ID TDD-022 Jira Key FOOTBALL-9183 \u6a19\u984c \u5be6\u4f5c ChatWebSocketClient\uff08WebSocket\uff09 \u985e\u578b Client \u512a\u5148\u7d1a P0 \u6240\u5c6c Feature LiveChat \u4f9d\u8cf4 Ticket TDD-011 Story Point 13 \u4f30\u6642\uff08Senior iOS Engineer + AI \u8f14\u52a9\uff09 \u6a19\u6e96\uff1a5 \u5929\u6700\u56b4\u53b2\uff1a3 \u5929 \u958b\u767c\u65e5\u671f / Development Date 2025-12-03 (\u9031\u4e09)"},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/#description","title":"\u63cf\u8ff0 / Description","text":"<p>\u5be6\u4f5c ChatWebSocketClient\uff08WebSocket\uff09\u3002 / Implement ChatWebSocketClient(WebSocket)\u3002</p>"},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/#requirements","title":"\u9700\u6c42 / Requirements","text":"<ol> <li>\u5be6\u4f5c <code>ChatWebSocketClient</code>\uff08\u4f7f\u7528 WebSocket \u6846\u67b6\uff09 / Implement <code>ChatWebSocketClient</code> (using WebSocket framework)</li> <li>\u5be6\u4f5c\u9023\u7dda\u7ba1\u7406\uff08\u91cd\u9023\u3001\u5fc3\u8df3\u7b49\uff09 / Implement connection management (reconnect, heartbeat, etc.)</li> <li>\u5be6\u4f5c\u8a02\u95b1 / \u53d6\u6d88\u8a02\u95b1 / Implement subscribe / unsubscribe</li> <li>\u5be6\u4f5c\u8a0a\u606f\u63a5\u6536\u8207\u767c\u9001 / Implement message receive and send</li> <li>\u5be6\u4f5c\u6307\u6578\u9000\u907f\u91cd\u9023\u7b56\u7565 / Implement exponential backoff reconnect strategy</li> <li>\u6a94\u6848\u7d50\u69cb\uff1a<code>Sources/LiveChat/Services/API/ChatWebSocketClient.swift</code> / File structure: <code>Sources/LiveChat/Services/API/ChatWebSocketClient.swift</code></li> </ol>"},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/#implementation-guidelines","title":"\u5be6\u4f5c\u898f\u7bc4 / Implementation Guidelines","text":""},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/#file-structure","title":"\u6a94\u6848\u7d50\u69cb / File Structure","text":"<pre><code>MatchChat/Sources/MatchChat/Services/API/\n  \u2514\u2500\u2500 ChatWebSocketClient.swift\n</code></pre> <p>\u6ce8\u610f: \u5be6\u969b\u8def\u5f91\u8207 TDD \u4e0d\u540c\u662f\u56e0\u70ba MatchChat \u662f\u7d71\u4e00 package\uff0c\u4f46\u6a94\u6848\u4f4d\u7f6e\u5728\u6b63\u78ba\u7684\u5c64\u7d1a\uff08Services/API/\uff09\u3002</p>"},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/#reference-implementations","title":"\u53c3\u8003\u5be6\u4f5c / Reference Implementations","text":""},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/#1-websocketstompmanagerswift","title":"1. WebSocketStompManager.swift","text":"<p>\u4f4d\u7f6e: <code>TDDs/LiveChat&amp;PrematchComment/Input/LiveChat&amp;PrematchComment/CodeRef/WebSocketStompManager.swift</code></p> <p>\u7279\u9ede: - \u4f7f\u7528 <code>SportyStomp</code> \u6846\u67b6 - \u4f7f\u7528 <code>SwiftStompDelegate</code> \u8655\u7406\u9023\u7dda\u4e8b\u4ef6 - \u4f7f\u7528 callback (<code>MessageHandler</code>) \u8655\u7406\u8a0a\u606f - \u5728 <code>init</code> \u4e2d\u5efa\u7acb\u9023\u7dda\u4e26\u555f\u7528\u5fc3\u8df3 (<code>enableAutoPing()</code>) - \u8a02\u95b1 topic: <code>/topic/user.{userId}</code></p> <p>\u95dc\u9375\u5be6\u4f5c: <pre><code>class WebSocketStompManager {\n    var swiftStomp: SportyStomp\n    var messageHandler: MessageHandler?\n\n    init(userId: String, messageHandler: @escaping MessageHandler) {\n        swiftStomp = SportyStomp(host: webSocketDomain, headers: headers)\n        swiftStomp.enableAutoPing()\n        swiftStomp.connectWithCustomHeaders()\n        swiftStomp.delegate = self\n    }\n}\n</code></pre></p>"},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/#2-eventdetailwebsocketfeature","title":"2. EventDetail.WebSocketFeature","text":"<p>\u4f4d\u7f6e: <code>FCom/Home Tab/EventDetail/EventDetail/Feature/EventDetail+Feature+WebSocket.swift</code></p> <p>\u7279\u9ede: - \u4f7f\u7528 TCA Reducer \u6a21\u5f0f - \u4f7f\u7528 <code>AsyncStream</code> \u63d0\u4f9b\u8a0a\u606f\u6d41 - \u4f7f\u7528 <code>.run { send in ... }</code> \u8655\u7406 AsyncStream - \u4f7f\u7528 <code>cancellable(id:)</code> \u7ba1\u7406\u8a02\u95b1\u751f\u547d\u9031\u671f</p>"},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/#3-eventoddswebsocketmanager","title":"3. EventOddsWebSocketManager","text":"<p>\u4f4d\u7f6e: <code>FCom/Home Tab/EventDetail/EventDetail/Service/EventOddsWebSocketManager.swift</code></p> <p>\u7279\u9ede: - \u4f7f\u7528 <code>class</code> + <code>NSLock</code> \u4fdd\u8b77\u5171\u4eab\u72c0\u614b - \u652f\u63f4\u591a\u8a02\u95b1\u8005\uff08\u4f7f\u7528 UUID \u8ffd\u8e64\uff09 - \u4f7f\u7528 <code>AsyncStream</code> \u63d0\u4f9b\u8a0a\u606f\u6d41 - \u5ee3\u64ad\u6a5f\u5236\uff1a\u5c07\u8a0a\u606f\u5ee3\u64ad\u7d66\u6240\u6709\u8a02\u95b1\u8005</p>"},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/#design-decisions","title":"\u8a2d\u8a08\u6c7a\u7b56 / Design Decisions","text":""},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/#1-actor-vs-class","title":"1. \u985e\u578b\u9078\u64c7\uff1a<code>actor</code> vs <code>class</code>","text":"<p>\u6c7a\u5b9a: \u4f7f\u7528 <code>actor</code>\uff08\u7b26\u5408 TDD \u898f\u7bc4\uff0c\u78ba\u4fdd\u7dda\u7a0b\u5b89\u5168\uff09</p> <p>\u7406\u7531: - TDD \u6587\u4ef6\u8981\u6c42\u4f7f\u7528 <code>actor</code> - <code>actor</code> \u63d0\u4f9b\u5167\u5efa\u7684\u7dda\u7a0b\u5b89\u5168\u4fdd\u8b49 - \u7b26\u5408\u73fe\u4ee3 Swift \u4e26\u767c\u6a21\u5f0f</p>"},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/#2-asyncstream-vs-callback","title":"2. \u8a0a\u606f\u50b3\u905e\uff1a<code>AsyncStream</code> vs <code>callback</code>","text":"<p>\u6c7a\u5b9a: \u4f7f\u7528 <code>AsyncStream</code>\uff08\u53c3\u8003 EventDetail \u548c EventOddsWebSocketManager\uff09</p> <p>\u7406\u7531: - \u7b26\u5408\u73fe\u4ee3 Swift \u4e26\u767c\u6a21\u5f0f - \u66f4\u5bb9\u6613\u8207 TCA \u6574\u5408 - \u652f\u63f4\u591a\u8a02\u95b1\u8005\u6a21\u5f0f - \u66f4\u597d\u7684\u751f\u547d\u9031\u671f\u7ba1\u7406</p>"},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/#3-sportystomp","title":"3. \u6846\u67b6\u9078\u64c7\uff1a<code>SportyStomp</code>","text":"<p>\u6c7a\u5b9a: \u4f7f\u7528 <code>SportyStomp</code>\uff08\u53c3\u8003 WebSocketStompManager\uff09</p> <p>\u7406\u7531: - \u5c08\u6848\u5df2\u6709 SportyStomp \u6846\u67b6 - \u5df2\u5be6\u4f5c\u5fc3\u8df3\u6a5f\u5236 (<code>enableAutoPing()</code>) - \u5df2\u5be6\u4f5c STOMP \u5354\u8b70\u652f\u63f4 - \u6709\u5b8c\u6574\u7684 delegate \u6a5f\u5236</p>"},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/#code-example","title":"\u7a0b\u5f0f\u78bc\u7bc4\u4f8b / Code Example","text":"<pre><code>import Foundation\nimport SportyStomp\n\npublic actor ChatWebSocketClient {\n    // MARK: - Properties\n\n    private var swiftStomp: SportyStomp?\n    private var connectionState: ConnectionState = .disconnected\n    private var subscriptions: [String: ChatroomSubscription] = [:]\n    private var reconnectTask: Task&lt;Void, Never&gt;?\n    private var reconnectAttempts: Int = 0\n    private let userId: String\n    private let domain: String\n\n    // MARK: - Types\n\n    public enum ConnectionState: Equatable {\n        case disconnected\n        case connecting\n        case connected\n        case reconnecting\n        case error(String)\n    }\n\n    private class ChatroomSubscription {\n        let chatroomId: String\n        let subscriptionId: String\n        private var messageContinuations: [UUID: AsyncStream&lt;ChatAPI.WebSocketMessageDTO&gt;.Continuation] = [:]\n        private let continuationsLock = NSLock()\n\n        init(chatroomId: String, subscriptionId: String) {\n            self.chatroomId = chatroomId\n            self.subscriptionId = subscriptionId\n        }\n\n        func addSubscriber() -&gt; AsyncStream&lt;ChatAPI.WebSocketMessageDTO&gt; {\n            let id = UUID()\n            let messageStream = AsyncStream&lt;ChatAPI.WebSocketMessageDTO&gt; { continuation in\n                continuationsLock.lock()\n                defer { continuationsLock.unlock() }\n                messageContinuations[id] = continuation\n            }\n            return messageStream\n        }\n\n        func removeSubscriber(id: UUID) {\n            continuationsLock.lock()\n            defer { continuationsLock.unlock() }\n            messageContinuations.removeValue(forKey: id)\n        }\n\n        func broadcastMessage(_ message: ChatAPI.WebSocketMessageDTO) {\n            continuationsLock.lock()\n            defer { continuationsLock.unlock() }\n\n            messageContinuations = messageContinuations.compactMapValues { continuation in\n                switch continuation.yield(message) {\n                case .enqueued:\n                    return continuation\n                case .dropped, .terminated:\n                    return nil\n                @unknown default:\n                    return nil\n                }\n            }\n        }\n\n        var subscriberCount: Int {\n            continuationsLock.lock()\n            defer { continuationsLock.unlock() }\n            return messageContinuations.count\n        }\n\n        func finishAllStreams() {\n            continuationsLock.lock()\n            defer { continuationsLock.unlock() }\n            for continuation in messageContinuations.values {\n                continuation.finish()\n            }\n            messageContinuations.removeAll()\n        }\n    }\n\n    // MARK: - Initialization\n\n    public init(userId: String, domain: String, appVersion: String? = nil, deviceId: String? = nil) {\n        self.userId = userId\n        self.domain = domain\n        var headers: [String: String] = [\n            \"Platform\": \"ios\",\n            \"userId\": userId\n        ]\n\n        // \u5982\u679c\u63d0\u4f9b\u4e86 appVersion \u548c deviceId\uff0c\u5247\u52a0\u5165 headers\n        // \u5426\u5247\u7531\u8abf\u7528\u8005\u8ca0\u8cac\u5728\u5916\u90e8\u8a2d\u5b9a\u9019\u4e9b headers\n        if let appVersion = appVersion {\n            headers[\"App-Version\"] = appVersion\n        }\n        if let deviceId = deviceId {\n            headers[\"Device-Id\"] = deviceId\n        }\n\n        self.webSocketRequestHeaders = headers\n    }\n\n    // MARK: - Connection Management\n\n    public func connect() async throws {\n        // 1. \u5efa\u7acb SportyStomp \u9023\u7dda\n        // 2. \u8a2d\u5b9a delegate\n        // 3. \u555f\u7528\u5fc3\u8df3 (enableAutoPing())\n        // 4. \u66f4\u65b0\u72c0\u614b\n    }\n\n    public func disconnect() async {\n        // 1. \u53d6\u6d88\u6240\u6709\u8a02\u95b1\n        // 2. \u65b7\u958b\u9023\u7dda\n        // 3. \u6e05\u7406\u8cc7\u6e90\n    }\n\n    // MARK: - Subscription Management\n\n    /// \u8a02\u95b1\u6307\u5b9a\u804a\u5929\u5ba4\u7684\u8a0a\u606f\u6d41\n    /// - Parameter chatroomId: \u804a\u5929\u5ba4 ID\n    /// - Returns: AsyncStream&lt;ChatAPI.WebSocketMessageDTO&gt; \u8a0a\u606f\u6d41\n    /// \n    /// **\u6642\u6a5f**: \u52a0\u5165\u804a\u5929\u5ba4\u6642\u547c\u53eb\uff08\u53c3\u8003 Module Sequence Diagram\uff09\n    /// **\u8a2d\u8a08**: \u4f7f\u7528 nonisolated \u5141\u8a31\u540c\u6b65\u5275\u5efa AsyncStream\uff0c\u5be6\u969b\u8a02\u95b1\u908f\u8f2f\u5728 actor \u5167\u57f7\u884c\n    public nonisolated func subscribe(chatroomId: String) -&gt; AsyncStream&lt;ChatAPI.WebSocketMessageDTO&gt; {\n        // 1. \u540c\u6b65\u5275\u5efa AsyncStream\n        // 2. \u5728 Task \u4e2d\u57f7\u884c actor-isolated \u7684\u8a02\u95b1\u908f\u8f2f\n        // 3. \u8fd4\u56de AsyncStream\n    }\n\n    public func unsubscribe(chatroomId: String) async {\n        // 1. \u53d6\u6d88\u8a02\u95b1\n        // 2. \u5982\u679c\u6c92\u6709\u5176\u4ed6\u8a02\u95b1\u8005\uff0c\u79fb\u9664\u8a02\u95b1\n    }\n\n    // MARK: - Message Sending\n\n    public func sendMessage(chatroomId: String, text: String) async throws {\n        // \u767c\u9001\u8a0a\u606f\u5230\u6307\u5b9a chatroom\uff08\u4f7f\u7528 SportyStomp.send\uff09\n    }\n\n    // MARK: - Private Methods\n\n    private func reconnect() async {\n        // \u6307\u6578\u9000\u907f\u91cd\u9023\u7b56\u7565\n        // \u53c3\u8003: \u521d\u59cb\u5ef6\u9072 1 \u79d2\uff0c\u6bcf\u6b21\u91cd\u8a66\u7ffb\u500d\uff0c\u6700\u5927\u5ef6\u9072 60 \u79d2\n    }\n\n    private func handleMessageReceived(message: Any?, destination: String) async {\n        // 1. \u89e3\u6790 STOMP \u8a0a\u606f\uff08\u53c3\u8003 WebSocketStompManager\uff09\n        // 2. \u8f49\u63db\u70ba ChatAPI.WebSocketMessageDTO\n        // 3. \u5ee3\u64ad\u7d66\u5c0d\u61c9\u7684\u8a02\u95b1\u8005\n    }\n}\n\n// MARK: - SwiftStompDelegate\n\nextension ChatWebSocketClient: SwiftStompDelegate {\n    nonisolated func onConnect(swiftStomp: SportyStomp, connectType: StompConnectType) {\n        Task { @MainActor in\n            await handleConnect(connectType: connectType)\n        }\n    }\n\n    nonisolated func onDisconnect(swiftStomp: SportyStomp, disconnectType: StompDisconnectType) {\n        Task { @MainActor in\n            await handleDisconnect(disconnectType: disconnectType)\n        }\n    }\n\n    nonisolated func onMessageReceived(swiftStomp: SportyStomp, message: Any?, messageId: String, destination: String, headers: [String: String]) {\n        Task { @MainActor in\n            await handleMessageReceived(message: message, destination: destination)\n        }\n    }\n\n    nonisolated func onError(swiftStomp: SportyStomp, briefDescription: String, fullDescription: String?, receiptId: String?, type: StompErrorType) {\n        Task { @MainActor in\n            await handleError(briefDescription: briefDescription, type: type)\n        }\n    }\n\n    nonisolated func onReceipt(swiftStomp: SportyStomp, receiptId: String) {}\n    nonisolated func onSocketEvent(eventName: String, description: String) {}\n}\n</code></pre>"},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/#naming-conventions","title":"\u547d\u540d\u898f\u7bc4 / Naming Conventions","text":"<ul> <li>WebSocket Client \u4f7f\u7528 <code>actor</code>\uff0c\u78ba\u4fdd\u7dda\u7a0b\u5b89\u5168 / WebSocket Client uses <code>actor</code>, ensures thread safety</li> <li>\u4f7f\u7528 <code>public</code> \u4fee\u98fe\u7b26 / Use <code>public</code> modifier</li> <li>\u5be6\u4f5c\u9023\u7dda\u3001\u65b7\u7dda\u3001\u767c\u9001\u3001\u8a02\u95b1\u7b49\u65b9\u6cd5 / Implement connect, disconnect, send, subscribe methods</li> <li>\u4f7f\u7528 <code>AsyncStream</code> \u63d0\u4f9b\u8a0a\u606f\u6d41\uff0c\u800c\u975e callback / Use <code>AsyncStream</code> for message flow, not callback</li> <li>\u4f7f\u7528 <code>ChatroomSubscription</code> \u7ba1\u7406\u591a\u8a02\u95b1\u8005 / Use <code>ChatroomSubscription</code> to manage multiple subscribers</li> <li><code>subscribe</code> \u65b9\u6cd5\u6a19\u8a18\u70ba <code>nonisolated</code> \u4ee5\u5141\u8a31\u540c\u6b65\u5275\u5efa AsyncStream / <code>subscribe</code> method marked as <code>nonisolated</code> to allow synchronous AsyncStream creation</li> </ul>"},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/#key-design-points","title":"\u95dc\u9375\u8a2d\u8a08\u8981\u9ede / Key Design Points","text":""},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/#1-connection-management","title":"1. \u9023\u7dda\u7ba1\u7406 / Connection Management","text":"<ul> <li>\u521d\u59cb\u9023\u7dda: \u5728 <code>connect()</code> \u4e2d\u5efa\u7acb SportyStomp \u9023\u7dda</li> <li>\u81ea\u52d5\u91cd\u9023: \u4f7f\u7528\u6307\u6578\u9000\u907f\u7b56\u7565\uff08\u521d\u59cb 1 \u79d2\uff0c\u6bcf\u6b21\u7ffb\u500d\uff0c\u6700\u5927 60 \u79d2\uff09</li> <li>\u5fc3\u8df3\u6a5f\u5236: \u4f7f\u7528 SportyStomp \u7684 <code>enableAutoPing()</code></li> <li>\u72c0\u614b\u7ba1\u7406: \u4f7f\u7528 <code>ConnectionState</code> enum \u8ffd\u8e64\u9023\u7dda\u72c0\u614b</li> </ul>"},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/#2-subscription-management","title":"2. \u8a02\u95b1\u7ba1\u7406 / Subscription Management","text":"<ul> <li>\u591a\u8a02\u95b1\u8005\u652f\u63f4: \u53c3\u8003 EventOddsWebSocketManager\uff0c\u4f7f\u7528 UUID \u8ffd\u8e64\u8a02\u95b1\u8005</li> <li>\u8a02\u95b1\u751f\u547d\u9031\u671f: \u53ea\u6709\u7576\u6240\u6709\u8a02\u95b1\u8005\u90fd\u53d6\u6d88\u6642\u624d\u53d6\u6d88\u8a02\u95b1</li> <li>\u5ee3\u64ad\u6a5f\u5236: \u5c07\u8a0a\u606f\u5ee3\u64ad\u7d66\u6240\u6709\u8a02\u95b1\u8005</li> <li>Topic \u683c\u5f0f: <code>/topic/chat_room.{chatroomId}</code>\uff08\u53c3\u8003 ChatAPI.WebSocketEndpoint\uff09</li> </ul>"},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/#3-message-handling","title":"3. \u8a0a\u606f\u8655\u7406 / Message Handling","text":"<ul> <li>\u8a0a\u606f\u89e3\u6790: \u53c3\u8003 WebSocketStompManager\uff0c\u89e3\u6790 STOMP \u8a0a\u606f\u683c\u5f0f</li> <li>DTO \u8f49\u63db: \u5c07\u63a5\u6536\u5230\u7684\u8a0a\u606f\u8f49\u63db\u70ba <code>ChatAPI.WebSocketMessageDTO</code></li> <li>\u932f\u8aa4\u8655\u7406: \u8655\u7406\u89e3\u6790\u932f\u8aa4\u548c\u9023\u7dda\u932f\u8aa4</li> </ul>"},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/#4-concurrency-safety","title":"4. \u4e26\u767c\u5b89\u5168 / Concurrency Safety","text":"<ul> <li>Actor \u9694\u96e2: \u4f7f\u7528 <code>actor</code> \u78ba\u4fdd\u7dda\u7a0b\u5b89\u5168</li> <li>Delegate \u8655\u7406: \u4f7f\u7528 <code>nonisolated</code> + <code>Task</code> \u8655\u7406 delegate \u56de\u8abf</li> <li>\u9396\u6a5f\u5236: \u5728 <code>ChatroomSubscription</code> \u4e2d\u4f7f\u7528 <code>NSLock</code> \u4fdd\u8b77\u5171\u4eab\u72c0\u614b</li> </ul>"},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/#acceptance-criteria","title":"\u9a57\u6536\u689d\u4ef6 / Acceptance Criteria","text":"<ul> <li>[ ] <code>ChatWebSocketClient</code> \u5be6\u4f5c\u5b8c\u6210\uff0c\u4f7f\u7528 <code>actor</code> / <code>ChatWebSocketClient</code> implementation complete, using <code>actor</code></li> <li>[ ] WebSocket \u9023\u7dda\u7ba1\u7406\u5be6\u4f5c\u5b8c\u6210 / WebSocket connection management implementation complete</li> <li>[ ] \u8a02\u95b1 / \u53d6\u6d88\u8a02\u95b1\u5be6\u4f5c\u5b8c\u6210 / Subscribe / unsubscribe implementation complete</li> <li>[ ] \u8a0a\u606f\u63a5\u6536\u8207\u767c\u9001\u5be6\u4f5c\u5b8c\u6210 / Message receive and send implementation complete</li> <li>[ ] \u91cd\u9023\u6a5f\u5236\u5be6\u4f5c\u5b8c\u6210\uff08\u6307\u6578\u9000\u907f\uff09 / Reconnect mechanism implementation complete (exponential backoff)</li> <li>[ ] \u5fc3\u8df3\u6a5f\u5236\u5be6\u4f5c\u5b8c\u6210 / Heartbeat mechanism implementation complete</li> <li>[ ] \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c / File structure matches reference code style</li> <li>[ ] Unit Test \u8986\u84cb\u7387 \u2265 80% / Unit Test Coverage \u2265 80%</li> <li>[ ] Integration Test \u901a\u904e / Integration Test Passed</li> </ul>"},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/#architecture-alignment","title":"\u67b6\u69cb\u5c0d\u9f4a / Architecture Alignment","text":""},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/#clean-architecture","title":"\u2705 Clean Architecture \u5c64\u7d1a\u95dc\u4fc2","text":"<p>\u6839\u64da <code>output/LiveChat&amp;PrematchComment/02_Architecture/01_clean_architecture_diagram.md</code>\uff1a - Client Layer \u2192 API Layer\uff1a<code>ChatWebSocketClient</code> \u4f7f\u7528 <code>ChatAPI.WebSocketEndpoint</code> \u548c <code>ChatAPI.WebSocketMessageDTO</code> - Repository Layer \u2192 Client Layer\uff1a<code>LiveChatRepository</code> \u4f7f\u7528 <code>ChatWebSocketClient</code> - UseCase Layer \u2192 Repository Layer\uff1a<code>JoinChatroomUseCase</code> / <code>LeaveChatroomUseCase</code> \u4f7f\u7528 <code>LiveChatRepository</code></p>"},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/#module-responsibility","title":"\u2705 Module Responsibility","text":"<p>\u6839\u64da <code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code>\uff1a - <code>ChatWebSocketClient</code> \u8077\u8cac\uff1a   - WebSocket \u901a\u8a0a\uff08\u5373\u6642\u8a0a\u606f\uff09   - \u8a02\u95b1 / \u53d6\u6d88\u8a02\u95b1   - \u8a0a\u606f\u63a5\u6536\u8207\u767c\u9001   - \u9023\u7dda\u7ba1\u7406\uff08\u91cd\u9023\u3001\u5fc3\u8df3\u7b49\uff09 - \u88ab <code>LiveChatRepository</code> \u4f7f\u7528\uff0c\u4e0d\u88ab Feature \u76f4\u63a5\u4f7f\u7528</p>"},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/#api-spec","title":"\u2705 API Spec \u5c0d\u9f4a","text":"<p>\u6839\u64da <code>output/LiveChat&amp;PrematchComment/08_API Spec &amp; Mapping/01_api_spec.md</code>\uff1a - WebSocket URL: <code>wss://www.encorebet.net/chat/websocket/web-chat</code> - \u5be6\u969b\u5be6\u4f5c\uff1a\u4f7f\u7528 STOMP \u5354\u8b70\uff0c\u9700\u8981\u8a02\u95b1 <code>/topic/chat_room.{chatroomId}</code> - Message DTO: <code>ChatAPI.WebSocketMessageDTO</code>\uff08\u5305\u542b <code>type: String</code> \u548c <code>data: MessageResponseDataDTO</code>\uff09</p>"},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/#module-sequence-diagram","title":"\u2705 Module Sequence Diagram \u5c0d\u9f4a","text":"<p>\u6839\u64da <code>output/LiveChat&amp;PrematchComment/05. Module Sequence Diagram\uff08\u6a21\u7d44\u5e8f\u5217\u5716\uff09/LiveChat/Module Sequence Diagrams/01_data_initialization_initialize_chatroom.md</code>\uff1a - \u9023\u7dda\u6642\u6a5f\uff1a\u9032\u5165 Live Detail Page \u6642\u5efa\u7acb WebSocket \u9023\u7dda - \u8a02\u95b1\u6642\u6a5f\uff1a\u52a0\u5165\u804a\u5929\u5ba4\u6642\u8a02\u95b1 <code>/topic/chat_room.{chatroomId}</code> - \u53d6\u6d88\u8a02\u95b1\u6642\u6a5f\uff1a\u96e2\u958b Live Detail Page \u6642\u53d6\u6d88\u8a02\u95b1</p>"},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/#feature-state","title":"\u2705 Feature State \u5c0d\u9f4a","text":"<p>\u6839\u64da <code>output/LiveChat&amp;PrematchComment/06_Feature State &amp; Action (TCA)/01_feature_state_action.md</code>\uff1a - <code>LiveChatState</code> \u5305\u542b <code>isWebSocketConnected: Bool</code> \u548c <code>webSocketError: Error?</code> - <code>LiveChatAction</code> \u5305\u542b WebSocket \u76f8\u95dc\u7684 Action\uff08\u5982 <code>webSocketMessageReceived</code>\uff09</p>"},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/#related-documents","title":"\u76f8\u95dc\u6587\u4ef6 / Related Documents","text":""},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/#tdd","title":"TDD \u67b6\u69cb\u6587\u4ef6","text":"<ul> <li>Overview: <code>output/LiveChat&amp;PrematchComment/00_Overview/01_overview.md</code></li> <li>Architecture: <code>output/LiveChat&amp;PrematchComment/02_Architecture/01_clean_architecture_diagram.md</code></li> <li>Module Responsibility: <code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code></li> <li>Domain Model: <code>output/LiveChat&amp;PrematchComment/04_Domain Model/01_domain_model.md</code></li> <li>Module Sequence Diagram: <code>output/LiveChat&amp;PrematchComment/05. Module Sequence Diagram\uff08\u6a21\u7d44\u5e8f\u5217\u5716\uff09/LiveChat/Module Sequence Diagrams/01_data_initialization_initialize_chatroom.md</code></li> <li>Feature State &amp; Action: <code>output/LiveChat&amp;PrematchComment/06_Feature State &amp; Action (TCA)/01_feature_state_action.md</code></li> <li>API Spec: <code>output/LiveChat&amp;PrematchComment/08_API Spec &amp; Mapping/01_api_spec.md</code></li> </ul>"},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/#api","title":"\u5be6\u969b API \u5be6\u4f5c","text":"<ul> <li>ChatAPI.WebSocketEndpoint: <code>MatchChat/Sources/MatchChat/Services/API/Chat/ChatAPI+WebSocket.swift</code></li> <li>ChatAPI.WebSocketMessageDTO: <code>MatchChat/Sources/MatchChat/Services/API/Chat/ChatAPI+Models.swift</code></li> </ul>"},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/#reference-implementations_1","title":"\u53c3\u8003\u5be6\u4f5c / Reference Implementations","text":"<ul> <li>WebSocketStompManager.swift: <code>TDDs/LiveChat&amp;PrematchComment/Input/LiveChat&amp;PrematchComment/CodeRef/WebSocketStompManager.swift</code></li> <li>SportyStomp \u4f7f\u7528\u7bc4\u4f8b</li> <li>Delegate pattern \u5be6\u4f5c</li> <li> <p>\u5fc3\u8df3\u6a5f\u5236\u5be6\u4f5c</p> </li> <li> <p>EventDetail.WebSocketFeature: <code>FCom/Home Tab/EventDetail/EventDetail/Feature/EventDetail+Feature+WebSocket.swift</code></p> </li> <li>TCA + AsyncStream \u6a21\u5f0f</li> <li> <p>\u8a02\u95b1\u751f\u547d\u9031\u671f\u7ba1\u7406</p> </li> <li> <p>EventOddsWebSocketManager: <code>FCom/Home Tab/EventDetail/EventDetail/Service/EventOddsWebSocketManager.swift</code></p> </li> <li>\u591a\u8a02\u95b1\u8005\u7ba1\u7406\u7b56\u7565</li> <li>AsyncStream \u5ee3\u64ad\u6a5f\u5236</li> </ul>"},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient/#_1","title":"\u8abf\u6574\u56e0\u5b50\u8aaa\u660e / \u8abf\u6574\u56e0\u5b50\u8aaa\u660e","text":"<ul> <li>\u57fa\u790e\u4f30\u6642\uff1a\u8907\u96dc Client = 8 SP</li> <li>+3 SP\uff1aWebSocket</li> <li>+2 SP\uff1a\u8907\u96dc Reconnect \u908f\u8f2f / - +2 SP\uff1a\u8907\u96dc Reconnect Logic</li> </ul>"},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient_en/","title":"TDD-022: ChatWebSocketClient","text":""},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient_en/#ticket-information","title":"Ticket Information","text":"<p>|------|-----| |  | Ticket ID | TDD-022 | | Jira Key | FOOTBALL-9183 |  | |  | Implement ChatWebSocketClient\uff08WebSocket\uff09 |  | |  | Type | Client |  | |  | P0 |  | |  | LiveChat |  | |  | TDD-011 |  | |  | Story Point | 13 |  | |  | Standard\uff1a5 daysMost Stringent\uff1a3 days |  |</p>"},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient_en/#description","title":"Description","text":"<p>Implement ChatWebSocketClient(WebSocket)\u3002</p>"},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient_en/#requirements","title":"Requirements","text":"<ol> <li>Implement WebSocket \u901a\u8a0aLogic</li> <li>\u53d6\u6d88\u8a02\u95b1</li> <li>Implement\u8a0a\u606f\u63a5\u6536\u8207\u767c\u9001</li> <li>Implement\u9023\u7dda\u7ba1\u7406(\u91cd\u9023, \u5fc3\u8df3\u7b49)</li> <li>Implement\u6307\u6578\u9000\u907f\u91cd\u9023\u7b56\u7565</li> </ol>"},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient_en/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] WebSocket \u9023\u7dda\u7ba1\u7406Implementation Complete</li> <li>[ ] \u53d6\u6d88\u8a02\u95b1ImplementComplete</li> <li>[ ] \u8a0a\u606f\u63a5\u6536\u8207\u767c\u9001Implementation Complete</li> <li>[ ] \u91cd\u9023\u6a5f\u5236Implementation Complete</li> <li>[ ] \u5fc3\u8df3\u6a5f\u5236Implementation Complete</li> <li>[ ] Unit Test Coverage \u2265 80%</li> <li>[ ] Integration Test Passed</li> </ul>"},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient_en/#related-documents","title":"Related Documents","text":"<ul> <li>API Spec\uff1a<code>output/LiveChat&amp;PrematchComment/08_API Spec &amp; Mapping/01_api_spec.md</code></li> <li>Module Responsibility\uff1a<code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code></li> </ul>"},{"location":"12_Tickets/03_client/TDD-022_ChatWebSocketClient_en/#_1","title":"\u8abf\u6574\u56e0\u5b50\u8aaa\u660e","text":"<ul> <li>+3 SP\uff1aWebSocket</li> <li>+2 SP\uff1a\u8907\u96dc Reconnect Logic</li> </ul>"},{"location":"12_Tickets/04_repository/TDD-030_PrematchCommentRepository/","title":"TDD-030: PrematchCommentRepository","text":""},{"location":"12_Tickets/04_repository/TDD-030_PrematchCommentRepository/#ticket-ticket-information","title":"Ticket \u8cc7\u8a0a / Ticket Information","text":"\u6b04\u4f4d \u503c Ticket ID TDD-030 Jira Key FOOTBALL-9185 \u6a19\u984c \u5be6\u4f5c PrematchCommentRepository \u985e\u578b Repository \u512a\u5148\u7d1a P0 \u6240\u5c6c Feature PrematchComment \u4f9d\u8cf4 Ticket TDD-001, TDD-002, TDD-006, TDD-020 Story Point 5 \u4f30\u6642\uff08Senior iOS Engineer + AI \u8f14\u52a9\uff09 \u6a19\u6e96\uff1a2 \u5929\u6700\u56b4\u53b2\uff1a1 \u5929 \u958b\u767c\u65e5\u671f / Development Date 2025-12-04 (\u9031\u56db)"},{"location":"12_Tickets/04_repository/TDD-030_PrematchCommentRepository/#description","title":"\u63cf\u8ff0 / Description","text":"<p>\u5be6\u4f5c PrematchCommentRepository\u3002 / Implement PrematchCommentRepository\u3002</p>"},{"location":"12_Tickets/04_repository/TDD-030_PrematchCommentRepository/#requirements","title":"\u9700\u6c42 / Requirements","text":"<ol> <li>\u5be6\u4f5c Repository Protocol\uff08\u5b9a\u7fa9\u5728 <code>PrematchCommentAPI+RepositoryProtocol.swift</code>\uff09 / Implement Repository Protocol (defined in <code>PrematchCommentAPI+RepositoryProtocol.swift</code>)</li> <li>\u5be6\u4f5c Repository\uff08\u5b9a\u7fa9\u5728 <code>PrematchCommentAPI+Repository.swift</code>\uff0c\u4f7f\u7528 <code>actor</code>\uff09 / Implement Repository (defined in <code>PrematchCommentAPI+Repository.swift</code>, using <code>actor</code>)</li> <li>\u5be6\u4f5c DTO \u2192 Domain Model \u8f49\u63db\uff08\u4f7f\u7528 extension\uff0c\u5982 <code>PrematchCommentAPI+PrematchCommentAPI.swift</code>\uff09 / Implement DTO \u2192 Domain Model conversion (using extension, e.g., <code>PrematchCommentAPI+PrematchCommentAPI.swift</code>)</li> <li>\u6574\u5408 <code>PrematchCommentAPI.PrematchCommentRepository</code> \u547c\u53eb / Integrate <code>PrematchCommentAPI.PrematchCommentRepository</code> call</li> <li>\u5be6\u4f5c\u6240\u6709\u65b9\u6cd5\uff1a / Implement all methods:</li> <li><code>getUserInfo() async throws -&gt; PrematchComment.UserInfo</code></li> <li><code>getCommentMeta(refId: String) async throws -&gt; PrematchComment.CommentMeta</code></li> <li><code>getComments(refId: String, mode: PrematchComment.SortMode, cursor: PrematchComment.Cursor?) async throws -&gt; ([PrematchComment.Comment], PrematchComment.PagingInfo)</code></li> <li><code>publishComment(refId: String, content: String, parentId: String?) async throws -&gt; PrematchComment.Comment</code></li> <li><code>toggleLike(commentId: String) async throws -&gt; PrematchComment.Comment</code></li> <li><code>getReplies(commentId: String, cursor: PrematchComment.Cursor?) async throws -&gt; ([PrematchComment.Comment], PrematchComment.PagingInfo)</code></li> </ol>"},{"location":"12_Tickets/04_repository/TDD-030_PrematchCommentRepository/#implementation-guidelines","title":"\u5be6\u4f5c\u898f\u7bc4 / Implementation Guidelines","text":""},{"location":"12_Tickets/04_repository/TDD-030_PrematchCommentRepository/#file-structure","title":"\u6a94\u6848\u7d50\u69cb / File Structure","text":"<pre><code>Sources/PrematchComment/Services/API/PrematchComment/\n  \u251c\u2500\u2500 PrematchCommentAPI+RepositoryProtocol.swift  # Repository Protocol\n  \u251c\u2500\u2500 PrematchCommentAPI+Repository.swift          # Repository \u5be6\u4f5c\uff08actor\uff09\n  \u2514\u2500\u2500 PrematchCommentAPI+PrematchCommentAPI.swift # DTO \u2192 Domain Model \u8f49\u63db\n</code></pre>"},{"location":"12_Tickets/04_repository/TDD-030_PrematchCommentRepository/#code-examples","title":"\u7a0b\u5f0f\u78bc\u7bc4\u4f8b / Code Examples","text":""},{"location":"12_Tickets/04_repository/TDD-030_PrematchCommentRepository/#prematchcommentapiprematchcommentapiswift-dto-domain-model","title":"PrematchCommentAPI+PrematchCommentAPI.swift (DTO \u2192 Domain Model \u8f49\u63db)","text":"<pre><code>import Foundation\n\nextension PrematchCommentAPI.CommentDTO {\n    func toDomainComment(refId: String) -&gt; PrematchComment.Comment {\n        return PrematchComment.Comment(\n            id: String(id),\n            content: content,\n            likeCount: likeCount,\n            authorId: authorId,\n            authorNickname: authorNickname,\n            parentId: parentId == 0 ? nil : String(parentId),\n            createdAt: Date(timeIntervalSince1970: TimeInterval(createdAt) / 1000),\n            refId: refId,\n            repliesCount: repliesCount,\n            likedByMe: likedByMe,\n            isIsolated: isIsolated,\n            isDeleted: isDeleted\n        )\n    }\n}\n\nextension PrematchCommentAPI.CommentPageDTO {\n    func toDomainComments(refId: String) -&gt; ([PrematchComment.Comment], PrematchComment.PagingInfo) {\n        let comments = list.map { $0.toDomainComment(refId: refId) }\n        let pagingInfo = PrematchComment.PagingInfo(\n            cursor: cursor == -1 ? nil : PrematchComment.Cursor(value: cursor),\n            hasMore: cursor != -1\n        )\n        return (comments, pagingInfo)\n    }\n}\n</code></pre>"},{"location":"12_Tickets/04_repository/TDD-030_PrematchCommentRepository/#prematchcommentrepository","title":"PrematchCommentRepository \u5be6\u4f5c","text":"<pre><code>import Foundation\nimport NetworkService\n\nextension PrematchCommentAPI {\n    public actor PrematchCommentRepository: PrematchCommentRepositoryProtocol {\n        private let apiRepository: PrematchCommentAPI.PrematchCommentRepository\n\n        public init(apiRepository: PrematchCommentAPI.PrematchCommentRepository = PrematchCommentAPI.PrematchCommentRepository()) {\n            self.apiRepository = apiRepository\n        }\n\n        public func getCommentMeta(refId: String) async throws -&gt; PrematchComment.CommentMeta {\n            let dto = try await apiRepository.getCommentMeta(refId: refId)\n            return dto.toDomainCommentMeta()\n        }\n\n        public func getComments(\n            refId: String,\n            mode: PrematchComment.SortMode,\n            cursor: PrematchComment.Cursor?\n        ) async throws -&gt; ([PrematchComment.Comment], PrematchComment.PagingInfo) {\n            let dto = try await apiRepository.getComments(\n                refId: refId,\n                mode: mode.rawValue,\n                cursor: cursor?.value\n            )\n            return dto.toDomainComments(refId: refId)\n        }\n\n        // \u5176\u4ed6\u65b9\u6cd5...\n    }\n}\n</code></pre>"},{"location":"12_Tickets/04_repository/TDD-030_PrematchCommentRepository/#naming-conventions","title":"\u547d\u540d\u898f\u7bc4 / Naming Conventions","text":"<ul> <li>Repository \u4f7f\u7528 <code>actor</code>\uff0c\u5be6\u4f5c <code>PrematchCommentRepositoryProtocol</code> / Repository uses <code>actor</code>, implements <code>PrematchCommentRepositoryProtocol</code></li> <li>DTO \u2192 Domain Model \u8f49\u63db\u4f7f\u7528 extension\uff0c\u65b9\u6cd5\u547d\u540d\u70ba <code>toDomainXXX()</code> / DTO \u2192 Domain Model conversion uses extension, method named <code>toDomainXXX()</code></li> <li>Domain Model \u4f7f\u7528 <code>PrematchComment.XXX</code> \u547d\u540d\u7a7a\u9593 / Domain Model uses <code>PrematchComment.XXX</code> namespace</li> <li>\u4f7f\u7528 <code>public</code> \u4fee\u98fe\u7b26 / Use <code>public</code> modifier</li> </ul>"},{"location":"12_Tickets/04_repository/TDD-030_PrematchCommentRepository/#acceptance-criteria","title":"\u9a57\u6536\u689d\u4ef6 / Acceptance Criteria","text":"<ul> <li>[ ] Repository Protocol \u5b9a\u7fa9\u5b8c\u6210\uff08\u5728 <code>PrematchCommentAPI+RepositoryProtocol.swift</code>\uff09 / Repository Protocol definition complete (in <code>PrematchCommentAPI+RepositoryProtocol.swift</code>)</li> <li>[ ] Repository \u5be6\u4f5c\u5b8c\u6210\uff0c\u4f7f\u7528 <code>actor</code>\uff08\u5728 <code>PrematchCommentAPI+Repository.swift</code>\uff09 / Repository implementation complete, using <code>actor</code> (in <code>PrematchCommentAPI+Repository.swift</code>)</li> <li>[ ] DTO \u2192 Domain Model Mapping \u5be6\u4f5c\u5b8c\u6210\uff0c\u4f7f\u7528 extension\uff08\u5728 <code>PrematchCommentAPI+PrematchCommentAPI.swift</code>\uff09 / DTO \u2192 Domain Model Mapping implementation complete, using extension (in <code>PrematchCommentAPI+PrematchCommentAPI.swift</code>)</li> <li>[ ] \u6240\u6709\u65b9\u6cd5\u4f7f\u7528 <code>PrematchComment.XXX</code> \u547d\u540d\u7a7a\u9593 / All methods use <code>PrematchComment.XXX</code> namespace</li> <li>[ ] \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c / File structure matches reference code style</li> <li>[ ] \u6240\u6709\u65b9\u6cd5 Unit Test \u8986\u84cb\u7387 \u2265 80% / All methods Unit Test Coverage \u2265 80%</li> <li>[ ] Integration Test \u901a\u904e / Integration Test Passed</li> </ul>"},{"location":"12_Tickets/04_repository/TDD-030_PrematchCommentRepository/#related-documents","title":"\u76f8\u95dc\u6587\u4ef6 / Related Documents","text":"<ul> <li>Module Responsibility\uff1a<code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code></li> <li>Domain Model\uff1a<code>output/LiveChat&amp;PrematchComment/04_Domain Model/01_domain_model.md</code></li> <li>API Spec\uff1a<code>output/LiveChat&amp;PrematchComment/08_API Spec &amp; Mapping/01_api_spec.md</code></li> </ul>"},{"location":"12_Tickets/04_repository/TDD-030_PrematchCommentRepository_en/","title":"TDD-030: PrematchCommentRepository","text":""},{"location":"12_Tickets/04_repository/TDD-030_PrematchCommentRepository_en/#ticket-information","title":"Ticket Information","text":"<p>|------|-----| |  | Ticket ID | TDD-030 | | Jira Key | FOOTBALL-9185 |  | |  | Implement PrematchCommentRepository |  | |  | Type | Repository |  | |  | P0 |  | |  | PrematchComment |  | |  | TDD-001, TDD-002, TDD-006, TDD-020 |  | |  | Story Point | 5 |  | |  | Standard\uff1a2 daysMost Stringent\uff1a1 days |  |</p>"},{"location":"12_Tickets/04_repository/TDD-030_PrematchCommentRepository_en/#description","title":"Description","text":"<p>Implement PrematchCommentRepository\u3002</p>"},{"location":"12_Tickets/04_repository/TDD-030_PrematchCommentRepository_en/#requirements","title":"Requirements","text":"<ol> <li>Implement Repository \u4ecb\u9762</li> <li>Implement DTO \u2192 Domain Model \u8f49\u63db</li> <li>Integrate PrematchCommentClient Call</li> <li>ImplementallMethods\uff1a</li> <li> <ul> <li><code>getUserInfo() async throws -&gt; UserInfo</code></li> </ul> </li> <li> <ul> <li><code>getCommentMeta(refId: String) async throws -&gt; CommentMeta</code></li> </ul> </li> <li> <ul> <li><code>getComments(refId: String, mode: SortMode, cursor: Cursor?) async throws -&gt; ([Comment], PagingInfo)</code></li> </ul> </li> <li> <ul> <li><code>publishComment(refId: String, content: String, parentId: String?) async throws -&gt; Comment</code></li> </ul> </li> <li> <ul> <li><code>toggleLike(commentId: String) async throws -&gt; Comment</code></li> </ul> </li> <li> <ul> <li><code>getReplies(commentId: String, cursor: Cursor?) async throws -&gt; ([Comment], PagingInfo)</code></li> </ul> </li> </ol>"},{"location":"12_Tickets/04_repository/TDD-030_PrematchCommentRepository_en/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] Repository \u4ecb\u9762Implementation Complete</li> <li>[ ] DTO \u2192 Domain Model Mapping Implementation Complete</li> <li>[ ] allMethods Unit Test Coverage \u2265 80%</li> <li>[ ] Integration Test Passed</li> </ul>"},{"location":"12_Tickets/04_repository/TDD-030_PrematchCommentRepository_en/#related-documents","title":"Related Documents","text":"<ul> <li>Module Responsibility\uff1a<code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code></li> <li>Domain Model\uff1a<code>output/LiveChat&amp;PrematchComment/04_Domain Model/01_domain_model.md</code></li> <li>API Spec\uff1a<code>output/LiveChat&amp;PrematchComment/08_API Spec &amp; Mapping/01_api_spec.md</code></li> </ul>"},{"location":"12_Tickets/04_repository/TDD-031_LiveChatRepository/","title":"TDD-031: LiveChatRepository","text":""},{"location":"12_Tickets/04_repository/TDD-031_LiveChatRepository/#ticket-ticket-information","title":"Ticket \u8cc7\u8a0a / Ticket Information","text":"\u6b04\u4f4d \u503c Ticket ID TDD-031 Jira Key FOOTBALL-9186 \u6a19\u984c \u5be6\u4f5c LiveChatRepository \u985e\u578b Repository \u512a\u5148\u7d1a P0 \u6240\u5c6c Feature LiveChat \u4f9d\u8cf4 Ticket TDD-004, TDD-005, TDD-021, TDD-022 Story Point 8 \u4f30\u6642\uff08Senior iOS Engineer + AI \u8f14\u52a9\uff09 \u6a19\u6e96\uff1a3 \u5929\u6700\u56b4\u53b2\uff1a2 \u5929 \u958b\u767c\u65e5\u671f / Development Date 2025-12-05 (\u9031\u4e94)"},{"location":"12_Tickets/04_repository/TDD-031_LiveChatRepository/#description","title":"\u63cf\u8ff0 / Description","text":"<p>\u5be6\u4f5c LiveChatRepository\u3002 / Implement LiveChatRepository\u3002</p>"},{"location":"12_Tickets/04_repository/TDD-031_LiveChatRepository/#requirements","title":"\u9700\u6c42 / Requirements","text":"<ol> <li>\u5be6\u4f5c Repository Protocol\uff08\u5b9a\u7fa9\u5728 <code>ChatAPI+RepositoryProtocol.swift</code>\uff09 / Implement Repository Protocol (defined in <code>ChatAPI+RepositoryProtocol.swift</code>)</li> <li>\u5be6\u4f5c Repository\uff08\u5b9a\u7fa9\u5728 <code>ChatAPI+Repository.swift</code>\uff0c\u4f7f\u7528 <code>actor</code>\uff09 / Implement Repository (defined in <code>ChatAPI+Repository.swift</code>, using <code>actor</code>)</li> <li>\u5be6\u4f5c DTO \u2192 Domain Model \u8f49\u63db\uff08\u4f7f\u7528 extension\uff0c\u5982 <code>ChatAPI+LiveChat.swift</code>\uff09 / Implement DTO \u2192 Domain Model conversion (using extension, e.g., <code>ChatAPI+LiveChat.swift</code>)</li> <li>\u6574\u5408 <code>LiveChatClient</code> \u548c <code>ChatWebSocketClient</code> \u547c\u53eb / Integrate <code>LiveChatClient</code> and <code>ChatWebSocketClient</code> calls</li> <li>\u7ba1\u7406 WebSocket \u9023\u7dda / Manage WebSocket connection</li> <li>\u5be6\u4f5c\u6240\u6709\u65b9\u6cd5\uff1a / Implement all methods:</li> <li><code>getChatroomInfo(refId: String) async throws -&gt; LiveChat.ChatroomInfo</code></li> <li><code>joinChatroom(chatroomId: String) async throws -&gt; Void</code></li> <li><code>loadHistoricalMessages(chatroomId: String, lastMessageNo: Int) async throws -&gt; [LiveChat.Message]</code></li> <li><code>sendMessage(chatroomId: String, content: String, messageType: LiveChat.MessageType) async throws -&gt; LiveChat.Message</code></li> <li><code>leaveChatroom(chatroomId: String) async throws -&gt; Void</code></li> <li><code>subscribeWebSocket() async throws -&gt; Void</code></li> <li><code>unsubscribeWebSocket() async throws -&gt; Void</code></li> <li><code>addToBlacklist(userId: String, eventId: String, timestamp: Date) async throws -&gt; Void</code></li> <li><code>checkAndCleanBlacklist() async throws -&gt; Void</code></li> </ol>"},{"location":"12_Tickets/04_repository/TDD-031_LiveChatRepository/#implementation-guidelines","title":"\u5be6\u4f5c\u898f\u7bc4 / Implementation Guidelines","text":""},{"location":"12_Tickets/04_repository/TDD-031_LiveChatRepository/#file-structure","title":"\u6a94\u6848\u7d50\u69cb / File Structure","text":"<p>\u26a0\ufe0f \u67b6\u69cb\u6539\u9032\u8aaa\u660e\uff1a\u5be6\u969b\u5be6\u4f5c\u63a1\u7528\u4e86\u5169\u5c64 Repository \u67b6\u69cb\uff0c\u6bd4\u539f\u898f\u5283\u66f4\u6e05\u6670\uff1a</p>"},{"location":"12_Tickets/04_repository/TDD-031_LiveChatRepository/#api-layer-api-repository","title":"API Layer (API Repository)","text":"<pre><code>Sources/MatchChat/Services/API/Chat/\n  \u251c\u2500\u2500 ChatAPI+RepositoryProtocol.swift  # API Repository Protocol\n  \u251c\u2500\u2500 ChatAPI+Repository.swift          # API Repository \u5be6\u4f5c\uff08actor\uff09\n  \u2514\u2500\u2500 ChatAPI+LiveChat.swift            # DTO \u5b9a\u7fa9\uff08Models \u5c64\uff09\n</code></pre> <p>\u8077\u8cac\uff1a - \u8655\u7406 HTTP \u8acb\u6c42\u548c Response Decoding - \u8fd4\u56de DTOs\uff08Data Transfer Objects\uff09 - \u4e0d\u6d89\u53ca\u696d\u52d9\u908f\u8f2f</p>"},{"location":"12_Tickets/04_repository/TDD-031_LiveChatRepository/#domain-layer-domain-repository","title":"Domain Layer (Domain Repository)","text":"<pre><code>Sources/MatchChat/Services/Repository/LiveChat/\n  \u251c\u2500\u2500 LiveChatRepositoryProtocol.swift  # Domain Repository Protocol\n  \u2514\u2500\u2500 LiveChatRepository.swift          # Domain Repository \u5be6\u4f5c\uff08actor\uff09\n\nSources/MatchChat/Models/LiveChat/\n  \u2514\u2500\u2500 LiveChat+ChatAPI.swift            # DTO \u2192 Domain Model \u8f49\u63db\n</code></pre> <p>\u8077\u8cac\uff1a - \u4f7f\u7528 Client \u5c64\uff08<code>LiveChatClient</code>, <code>ChatWebSocketClient</code>\uff09 - \u5c07 DTOs \u8f49\u63db\u70ba Domain Models - \u5305\u542b\u696d\u52d9\u908f\u8f2f\uff08\u5982\u9ed1\u540d\u55ae\u904e\u6ffe\uff09 - \u8fd4\u56de Domain Models\uff08<code>LiveChat.XXX</code>\uff09</p>"},{"location":"12_Tickets/04_repository/TDD-031_LiveChatRepository/#_1","title":"\u67b6\u69cb\u512a\u9ede","text":"<ol> <li>\u8077\u8cac\u5206\u96e2\uff1a</li> <li>API Repository \u5c08\u6ce8\u65bc\u7db2\u8def\u8acb\u6c42</li> <li> <p>Domain Repository \u5c08\u6ce8\u65bc\u696d\u52d9\u908f\u8f2f\u548c\u8cc7\u6599\u8f49\u63db</p> </li> <li> <p>\u53ef\u6e2c\u8a66\u6027\uff1a</p> </li> <li>API Repository \u53ef\u4ee5\u7528 Mock APIClient \u6e2c\u8a66</li> <li> <p>Domain Repository \u53ef\u4ee5\u7528 Mock Client \u6e2c\u8a66</p> </li> <li> <p>\u53ef\u7dad\u8b77\u6027\uff1a</p> </li> <li>API \u8b8a\u66f4\u53ea\u5f71\u97ff API Repository</li> <li> <p>Domain Model \u8b8a\u66f4\u53ea\u5f71\u97ff Domain Repository</p> </li> <li> <p>\u7b26\u5408 Clean Architecture\uff1a</p> </li> <li>API Repository \u5728\u5167\u5c64\uff08\u57fa\u790e\u8a2d\u65bd\u5c64\uff09</li> <li>Domain Repository \u5728\u5916\u5c64\uff08\u61c9\u7528\u5c64\uff09</li> </ol>"},{"location":"12_Tickets/04_repository/TDD-031_LiveChatRepository/#tdd","title":"\u539f TDD \u6a94\u6848\u7d50\u69cb\uff08\u53c3\u8003\uff09","text":"<pre><code>Sources/LiveChat/Services/API/Chat/\n  \u251c\u2500\u2500 ChatAPI+RepositoryProtocol.swift  # Repository Protocol\n  \u251c\u2500\u2500 ChatAPI+Repository.swift          # Repository \u5be6\u4f5c\uff08actor\uff09\n  \u2514\u2500\u2500 ChatAPI+LiveChat.swift            # DTO \u2192 Domain Model \u8f49\u63db\n</code></pre>"},{"location":"12_Tickets/04_repository/TDD-031_LiveChatRepository/#naming-conventions","title":"\u547d\u540d\u898f\u7bc4 / Naming Conventions","text":"<ul> <li>Repository \u4f7f\u7528 <code>actor</code>\uff0c\u5be6\u4f5c <code>ChatRepositoryProtocol</code> / Repository uses <code>actor</code>, implements <code>ChatRepositoryProtocol</code></li> <li>DTO \u2192 Domain Model \u8f49\u63db\u4f7f\u7528 extension\uff0c\u65b9\u6cd5\u547d\u540d\u70ba <code>toDomainXXX()</code> / DTO \u2192 Domain Model conversion uses extension, method named <code>toDomainXXX()</code></li> <li>Domain Model \u4f7f\u7528 <code>LiveChat.XXX</code> \u547d\u540d\u7a7a\u9593 / Domain Model uses <code>LiveChat.XXX</code> namespace</li> <li>\u4f7f\u7528 <code>public</code> \u4fee\u98fe\u7b26 / Use <code>public</code> modifier</li> </ul>"},{"location":"12_Tickets/04_repository/TDD-031_LiveChatRepository/#acceptance-criteria","title":"\u9a57\u6536\u689d\u4ef6 / Acceptance Criteria","text":"<ul> <li>[ ] Repository Protocol \u5b9a\u7fa9\u5b8c\u6210\uff08\u5728 <code>ChatAPI+RepositoryProtocol.swift</code>\uff09 / Repository Protocol definition complete (in <code>ChatAPI+RepositoryProtocol.swift</code>)</li> <li>[ ] Repository \u5be6\u4f5c\u5b8c\u6210\uff0c\u4f7f\u7528 <code>actor</code>\uff08\u5728 <code>ChatAPI+Repository.swift</code>\uff09 / Repository implementation complete, using <code>actor</code> (in <code>ChatAPI+Repository.swift</code>)</li> <li>[ ] DTO \u2192 Domain Model Mapping \u5be6\u4f5c\u5b8c\u6210\uff0c\u4f7f\u7528 extension\uff08\u5728 <code>ChatAPI+LiveChat.swift</code>\uff09 / DTO \u2192 Domain Model Mapping implementation complete, using extension (in <code>ChatAPI+LiveChat.swift</code>)</li> <li>[ ] \u6240\u6709\u65b9\u6cd5\u4f7f\u7528 <code>LiveChat.XXX</code> \u547d\u540d\u7a7a\u9593 / All methods use <code>LiveChat.XXX</code> namespace</li> <li>[ ] WebSocket \u9023\u7dda\u7ba1\u7406\u5be6\u4f5c\u5b8c\u6210 / WebSocket connection management implementation complete</li> <li>[ ] \u9ed1\u540d\u55ae\u7ba1\u7406\u5be6\u4f5c\u5b8c\u6210 / Blacklist management implementation complete</li> <li>[ ] \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c / File structure matches reference code style</li> <li>[ ] \u6240\u6709\u65b9\u6cd5 Unit Test \u8986\u84cb\u7387 \u2265 80% / All methods Unit Test Coverage \u2265 80%</li> <li>[ ] Integration Test \u901a\u904e / Integration Test Passed</li> </ul>"},{"location":"12_Tickets/04_repository/TDD-031_LiveChatRepository/#related-documents","title":"\u76f8\u95dc\u6587\u4ef6 / Related Documents","text":"<ul> <li>Module Responsibility\uff1a<code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code></li> <li>Domain Model\uff1a<code>output/LiveChat&amp;PrematchComment/04_Domain Model/01_domain_model.md</code></li> <li>API Spec\uff1a<code>output/LiveChat&amp;PrematchComment/08_API Spec &amp; Mapping/01_api_spec.md</code></li> </ul>"},{"location":"12_Tickets/04_repository/TDD-031_LiveChatRepository/#_2","title":"\u8abf\u6574\u56e0\u5b50\u8aaa\u660e / \u8abf\u6574\u56e0\u5b50\u8aaa\u660e","text":"<ul> <li>\u57fa\u790e\u4f30\u6642\uff1a\u4e2d\u7b49 Repository = 3 SP</li> <li>+2 SP\uff1a\u9700\u8981\u6574\u5408\u591a\u500b Client\uff08HTTP + WebSocket\uff09 / - +2 SP\uff1a\u9700\u8981\u6574\u5408\u591a\u500b Client(HTTP + WebSocket)</li> <li>+2 SP\uff1a\u8907\u96dc\u7684\u8cc7\u6599\u5408\u4f75\u908f\u8f2f\uff08\u6b77\u53f2\u8a0a\u606f\u8207 WebSocket \u8a0a\u606f\u5408\u4f75\uff09 / - +2 SP\uff1a\u8907\u96dc\u7684\u8cc7\u6599\u5408\u4f75Logic(\u6b77\u53f2\u8a0a\u606f\u8207 WebSocket \u8a0a\u606f\u5408\u4f75)</li> <li>+1 SP\uff1a\u9ed1\u540d\u55ae\u7ba1\u7406\u908f\u8f2f / - +1 SP\uff1a\u9ed1\u540d\u55ae\u7ba1\u7406Logic</li> </ul>"},{"location":"12_Tickets/04_repository/TDD-031_LiveChatRepository_en/","title":"TDD-031: LiveChatRepository","text":""},{"location":"12_Tickets/04_repository/TDD-031_LiveChatRepository_en/#ticket-information","title":"Ticket Information","text":"<p>|------|-----| |  | Ticket ID | TDD-031 | | Jira Key | FOOTBALL-9186 |  | |  | Implement LiveChatRepository |  | |  | Type | Repository |  | |  | P0 |  | |  | LiveChat |  | |  | TDD-004, TDD-005, TDD-021, TDD-022 |  | |  | Story Point | 8 |  | |  | Standard\uff1a3 daysMost Stringent\uff1a2 days |  |</p>"},{"location":"12_Tickets/04_repository/TDD-031_LiveChatRepository_en/#description","title":"Description","text":"<p>Implement LiveChatRepository\u3002</p>"},{"location":"12_Tickets/04_repository/TDD-031_LiveChatRepository_en/#requirements","title":"Requirements","text":"<ol> <li>Implement Repository \u4ecb\u9762</li> <li>Implement DTO \u2192 Domain Model \u8f49\u63db</li> <li>Integrate LiveChatClient and ChatWebSocketClient Call</li> <li>\u7ba1\u7406 WebSocket \u9023\u7dda</li> <li>ImplementallMethods\uff1a</li> <li> <ul> <li><code>getChatroomInfo(refId: String) async throws -&gt; ChatroomInfo</code></li> </ul> </li> <li> <ul> <li><code>joinChatroom(chatroomId: String) async throws -&gt; Void</code></li> </ul> </li> <li> <ul> <li><code>loadHistoricalMessages(chatroomId: String, lastMessageNo: Int) async throws -&gt; [Message]</code></li> </ul> </li> <li> <ul> <li><code>sendMessage(chatroomId: String, content: String, messageType: MessageType) async throws -&gt; Message</code></li> </ul> </li> <li> <ul> <li><code>leaveChatroom(chatroomId: String) async throws -&gt; Void</code></li> </ul> </li> <li> <ul> <li><code>subscribeWebSocket() async throws -&gt; Void</code></li> </ul> </li> <li> <ul> <li><code>unsubscribeWebSocket() async throws -&gt; Void</code></li> </ul> </li> <li> <ul> <li><code>addToBlacklist(userId: String, eventId: String, timestamp: Date) async throws -&gt; Void</code></li> </ul> </li> <li> <ul> <li><code>checkAndCleanBlacklist() async throws -&gt; Void</code></li> </ul> </li> </ol>"},{"location":"12_Tickets/04_repository/TDD-031_LiveChatRepository_en/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] Repository \u4ecb\u9762Implementation Complete</li> <li>[ ] DTO \u2192 Domain Model Mapping Implementation Complete</li> <li>[ ] WebSocket \u9023\u7dda\u7ba1\u7406Implementation Complete</li> <li>[ ] \u9ed1\u540d\u55ae\u7ba1\u7406Implementation Complete</li> <li>[ ] allMethods Unit Test Coverage \u2265 80%</li> <li>[ ] Integration Test Passed</li> </ul>"},{"location":"12_Tickets/04_repository/TDD-031_LiveChatRepository_en/#related-documents","title":"Related Documents","text":"<ul> <li>Module Responsibility\uff1a<code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code></li> <li>Domain Model\uff1a<code>output/LiveChat&amp;PrematchComment/04_Domain Model/01_domain_model.md</code></li> <li>API Spec\uff1a<code>output/LiveChat&amp;PrematchComment/08_API Spec &amp; Mapping/01_api_spec.md</code></li> </ul>"},{"location":"12_Tickets/04_repository/TDD-031_LiveChatRepository_en/#_1","title":"\u8abf\u6574\u56e0\u5b50\u8aaa\u660e","text":"<ul> <li>+2 SP\uff1a\u9700\u8981\u6574\u5408\u591a\u500b Client(HTTP + WebSocket)</li> <li>+2 SP\uff1a\u8907\u96dc\u7684\u8cc7\u6599\u5408\u4f75Logic(\u6b77\u53f2\u8a0a\u606f\u8207 WebSocket \u8a0a\u606f\u5408\u4f75)</li> <li>+1 SP\uff1a\u9ed1\u540d\u55ae\u7ba1\u7406Logic</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-040_ReloadCommentListUseCase/","title":"TDD-040: ReloadCommentListUseCase","text":""},{"location":"12_Tickets/05_usecase/TDD-040_ReloadCommentListUseCase/#ticket-ticket-information","title":"Ticket \u8cc7\u8a0a / Ticket Information","text":"\u6b04\u4f4d \u503c Ticket ID TDD-040 Jira Key FOOTBALL-9188 \u6a19\u984c \u5be6\u4f5c ReloadCommentListUseCase \u985e\u578b UseCase \u512a\u5148\u7d1a P0 \u6240\u5c6c Feature PrematchComment \u4f9d\u8cf4 Ticket TDD-030 Story Point 5 \u4f30\u6642\uff08Senior iOS Engineer + AI \u8f14\u52a9\uff09 \u6a19\u6e96\uff1a2 \u5929\u6700\u56b4\u53b2\uff1a1 \u5929 \u958b\u767c\u65e5\u671f / Development Date 2025-12-08 (\u9031\u4e00)"},{"location":"12_Tickets/05_usecase/TDD-040_ReloadCommentListUseCase/#description","title":"\u63cf\u8ff0 / Description","text":"<p>\u5be6\u4f5c ReloadCommentListUseCase\u3002 / Implement ReloadCommentListUseCase\u3002</p>"},{"location":"12_Tickets/05_usecase/TDD-040_ReloadCommentListUseCase/#requirements","title":"\u9700\u6c42 / Requirements","text":"<ol> <li>\u5be6\u4f5c <code>ReloadCommentListUseCase</code> struct / Implement <code>ReloadCommentListUseCase</code> struct</li> <li>\u5b9a\u7fa9 Input/Output Model / Define Input/Output Model</li> <li>\u6574\u5408 <code>PrematchCommentRepository</code> \u547c\u53eb / Integrate <code>PrematchCommentRepository</code> call</li> <li>\u5be6\u4f5c\u5546\u696d\u908f\u8f2f\uff08triggerType\u3001mode\u3001cursor \u8655\u7406\uff09 / Implement business logic (triggerType, mode, cursor handling)</li> <li>\u5be6\u4f5c Error Handling / Implement Error Handling</li> <li>\u6a94\u6848\u7d50\u69cb\uff1a<code>Sources/PrematchComment/UseCases/ReloadCommentListUseCase.swift</code> / File structure: <code>Sources/PrematchComment/UseCases/ReloadCommentListUseCase.swift</code></li> </ol>"},{"location":"12_Tickets/05_usecase/TDD-040_ReloadCommentListUseCase/#implementation-guidelines","title":"\u5be6\u4f5c\u898f\u7bc4 / Implementation Guidelines","text":""},{"location":"12_Tickets/05_usecase/TDD-040_ReloadCommentListUseCase/#file-structure","title":"\u6a94\u6848\u7d50\u69cb / File Structure","text":"<pre><code>Sources/PrematchComment/UseCases/\n  \u2514\u2500\u2500 ReloadCommentListUseCase.swift\n</code></pre>"},{"location":"12_Tickets/05_usecase/TDD-040_ReloadCommentListUseCase/#code-example","title":"\u7a0b\u5f0f\u78bc\u7bc4\u4f8b / Code Example","text":"<pre><code>import Foundation\n\npublic struct ReloadCommentListUseCase {\n    private let repository: PrematchCommentRepository\n\n    public init(repository: PrematchCommentRepository) {\n        self.repository = repository\n    }\n\n    public struct Input: Equatable, Sendable {\n        public let refId: String\n        public let mode: PrematchComment.SortMode\n        public let triggerType: TriggerType\n        public let cursor: PrematchComment.Cursor?\n\n        public enum TriggerType: Equatable, Sendable {\n            case init\n            case refresh\n        }\n\n        public init(\n            refId: String,\n            mode: PrematchComment.SortMode,\n            triggerType: TriggerType,\n            cursor: PrematchComment.Cursor?\n        ) {\n            self.refId = refId\n            self.mode = mode\n            self.triggerType = triggerType\n            self.cursor = cursor\n        }\n    }\n\n    public struct Output: Equatable, Sendable {\n        public let comments: [PrematchComment.Comment]\n        public let pagingInfo: PrematchComment.PagingInfo\n\n        public init(\n            comments: [PrematchComment.Comment],\n            pagingInfo: PrematchComment.PagingInfo\n        ) {\n            self.comments = comments\n            self.pagingInfo = pagingInfo\n        }\n    }\n\n    public func execute(input: Input) async throws -&gt; Output {\n        let (comments, pagingInfo) = try await repository.getComments(\n            refId: input.refId,\n            mode: input.mode.rawValue,\n            cursor: input.cursor?.value\n        )\n        return Output(comments: comments, pagingInfo: pagingInfo)\n    }\n}\n</code></pre>"},{"location":"12_Tickets/05_usecase/TDD-040_ReloadCommentListUseCase/#naming-conventions","title":"\u547d\u540d\u898f\u7bc4 / Naming Conventions","text":"<ul> <li>UseCase \u4f7f\u7528 <code>struct</code>\uff0c\u63d0\u4f9b <code>execute(input:)</code> \u65b9\u6cd5 / UseCase uses <code>struct</code>, provides <code>execute(input:)</code> method</li> <li>Input/Output \u4f7f\u7528 nested <code>struct</code>\uff0c\u5be6\u4f5c <code>Equatable</code>\u3001<code>Sendable</code> / Input/Output use nested <code>struct</code>, implement <code>Equatable</code>, <code>Sendable</code></li> <li>\u4f7f\u7528 <code>PrematchComment.XXX</code> \u547d\u540d\u7a7a\u9593 / Use <code>PrematchComment.XXX</code> namespace</li> <li>\u4f7f\u7528 <code>public</code> \u4fee\u98fe\u7b26 / Use <code>public</code> modifier</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-040_ReloadCommentListUseCase/#acceptance-criteria","title":"\u9a57\u6536\u689d\u4ef6 / Acceptance Criteria","text":"<ul> <li>[ ] <code>ReloadCommentListUseCase</code> \u5be6\u4f5c\u5b8c\u6210 / <code>ReloadCommentListUseCase</code> implementation complete</li> <li>[ ] Input/Output Model \u5b9a\u7fa9\u5b8c\u6210 / Input/Output Model definition complete</li> <li>[ ] UseCase \u5546\u696d\u908f\u8f2f\u5be6\u4f5c\u5b8c\u6210 / UseCase business logic implementation complete</li> <li>[ ] \u6240\u6709 Test Scenarios \u901a\u904e\uff08Basic / Branch\uff09 / All Test Scenarios passed (Basic / Branch)</li> <li>[ ] \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c / File structure matches reference code style</li> <li>[ ] Unit Test \u8986\u84cb\u7387 \u2265 90% / Unit Test Coverage \u2265 90%</li> <li>[ ] Integration Test \u901a\u904e / Integration Test Passed</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-040_ReloadCommentListUseCase/#related-documents","title":"\u76f8\u95dc\u6587\u4ef6 / Related Documents","text":"<ul> <li>UseCase \u5b9a\u7fa9\uff1a<code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code></li> <li>Input/Output Model\uff1a<code>output/LiveChat&amp;PrematchComment/07_UseCase Input &amp; Output Model/01_usecase_input_output.md</code></li> <li>Test Scenarios\uff1a<code>output/LiveChat&amp;PrematchComment/10_Test Scenarios/01_test_scenarios.md</code></li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-040_ReloadCommentListUseCase_en/","title":"TDD-040: ReloadCommentListUseCase","text":""},{"location":"12_Tickets/05_usecase/TDD-040_ReloadCommentListUseCase_en/#ticket-information","title":"Ticket Information","text":"<p>|------|-----| |  | Ticket ID | TDD-040 | | Jira Key | FOOTBALL-9188 |  | |  | Implement ReloadCommentListUseCase |  | |  | Type | UseCase |  | |  | P0 |  | |  | PrematchComment |  | |  | TDD-030 |  | |  | Story Point | 5 |  | |  | Standard\uff1a2 daysMost Stringent\uff1a1 days |  |</p>"},{"location":"12_Tickets/05_usecase/TDD-040_ReloadCommentListUseCase_en/#description","title":"Description","text":"<p>Implement ReloadCommentListUseCase\u3002</p>"},{"location":"12_Tickets/05_usecase/TDD-040_ReloadCommentListUseCase_en/#requirements","title":"Requirements","text":"<ol> <li>Implement UseCase Business Logic</li> <li>Integrate PrematchCommentRepository Call</li> <li>Implement Input/Output Model Validation</li> <li>Implement Error Handling</li> <li>Support triggerType (init / refresh)</li> <li>Support mode (top / newest)</li> <li>Support Pagination (cursor)</li> </ol>"},{"location":"12_Tickets/05_usecase/TDD-040_ReloadCommentListUseCase_en/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] UseCase Business Logic Implementation Complete</li> <li>[ ] All Test Scenarios Passed (Basic / Branch)</li> <li>[ ] Unit Test Coverage \u2265 90%</li> <li>[ ] Integration Test Passed</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-040_ReloadCommentListUseCase_en/#related-documents","title":"Related Documents","text":"<ul> <li>UseCase Definition: <code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code></li> <li>Input/Output Model: <code>output/LiveChat&amp;PrematchComment/07_UseCase Input &amp; Output Model/01_usecase_input_output.md</code></li> <li>Test Scenarios: <code>output/LiveChat&amp;PrematchComment/10_Test Scenarios/01_test_scenarios.md</code></li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-041_PublishCommentUseCase/","title":"TDD-041: PublishCommentUseCase","text":""},{"location":"12_Tickets/05_usecase/TDD-041_PublishCommentUseCase/#ticket-ticket-information","title":"Ticket \u8cc7\u8a0a / Ticket Information","text":"\u6b04\u4f4d \u503c Ticket ID TDD-041 Jira Key FOOTBALL-9189 \u6a19\u984c \u5be6\u4f5c PublishCommentUseCase \u985e\u578b UseCase \u512a\u5148\u7d1a P0 \u6240\u5c6c Feature PrematchComment \u4f9d\u8cf4 Ticket TDD-030 Story Point 13 \u4f30\u6642\uff08Senior iOS Engineer + AI \u8f14\u52a9\uff09 \u6a19\u6e96\uff1a5 \u5929\u6700\u56b4\u53b2\uff1a4 \u5929 \u958b\u767c\u65e5\u671f / Development Date 2025-12-09 (\u9031\u4e8c)"},{"location":"12_Tickets/05_usecase/TDD-041_PublishCommentUseCase/#description","title":"\u63cf\u8ff0 / Description","text":"<p>\u5be6\u4f5c PublishCommentUseCase\u3002 / Implement PublishCommentUseCase\u3002</p>"},{"location":"12_Tickets/05_usecase/TDD-041_PublishCommentUseCase/#requirements","title":"\u9700\u6c42 / Requirements","text":"<ol> <li>\u5be6\u4f5c <code>PublishCommentUseCase</code> struct / Implement <code>PublishCommentUseCase</code> struct</li> <li>\u5b9a\u7fa9 Input/Output Model / Define Input/Output Model</li> <li>\u6574\u5408 <code>PrematchCommentRepository</code> \u547c\u53eb / Integrate <code>PrematchCommentRepository</code> call</li> <li>\u6574\u5408 <code>PersonalPageAdapter</code> Protocol\uff08\u767b\u5165\u6aa2\u67e5\uff09 / Integrate <code>PersonalPageAdapter</code> Protocol (login check)</li> <li>\u6574\u5408 <code>FComSharedFlowAdapter</code> Protocol\uff08nickname \u5efa\u7acb\uff09 / Integrate <code>FComSharedFlowAdapter</code> Protocol (nickname creation)</li> <li>\u5be6\u4f5c\u5546\u696d\u908f\u8f2f\uff08\u7559\u8a00 vs \u56de\u8986\uff09 / Implement business logic (comment vs reply)</li> <li>\u5be6\u4f5c Error Handling / Implement Error Handling</li> <li>\u6a94\u6848\u7d50\u69cb\uff1a<code>Sources/PrematchComment/UseCases/PublishCommentUseCase.swift</code> / File structure: <code>Sources/PrematchComment/UseCases/PublishCommentUseCase.swift</code></li> </ol>"},{"location":"12_Tickets/05_usecase/TDD-041_PublishCommentUseCase/#implementation-guidelines","title":"\u5be6\u4f5c\u898f\u7bc4 / Implementation Guidelines","text":""},{"location":"12_Tickets/05_usecase/TDD-041_PublishCommentUseCase/#file-structure","title":"\u6a94\u6848\u7d50\u69cb / File Structure","text":"<pre><code>Sources/PrematchComment/UseCases/\n  \u2514\u2500\u2500 PublishCommentUseCase.swift\n</code></pre>"},{"location":"12_Tickets/05_usecase/TDD-041_PublishCommentUseCase/#code-example","title":"\u7a0b\u5f0f\u78bc\u7bc4\u4f8b / Code Example","text":"<pre><code>import Foundation\n\npublic struct PublishCommentUseCase {\n    private let repository: PrematchCommentRepository\n    private let personalPageAdapter: PersonalPageAdapter\n    private let fComSharedFlowAdapter: FComSharedFlowAdapter\n\n    public init(\n        repository: PrematchCommentRepository,\n        personalPageAdapter: PersonalPageAdapter,\n        fComSharedFlowAdapter: FComSharedFlowAdapter\n    ) {\n        self.repository = repository\n        self.personalPageAdapter = personalPageAdapter\n        self.fComSharedFlowAdapter = fComSharedFlowAdapter\n    }\n\n    public struct Input: Equatable, Sendable {\n        public let refId: String\n        public let content: String\n        public let parentId: String?\n\n        public init(refId: String, content: String, parentId: String?) {\n            self.refId = refId\n            self.content = content\n            self.parentId = parentId\n        }\n    }\n\n    public struct Output: Equatable, Sendable {\n        public let comment: PrematchComment.Comment\n\n        public init(comment: PrematchComment.Comment) {\n            self.comment = comment\n        }\n    }\n\n    public func execute(input: Input) async throws -&gt; Output {\n        // 1. \u767b\u5165\u6aa2\u67e5\n        guard personalPageAdapter.isLoggedIn else {\n            throw PublishCommentError.notLoggedIn\n        }\n\n        // 2. Nickname \u6aa2\u67e5\u548c\u5efa\u7acb\n        if !personalPageAdapter.hasNickname {\n            try await fComSharedFlowAdapter.createNickname()\n        }\n\n        // 3. \u767c\u9001\u7559\u8a00\n        let comment = try await repository.publishComment(\n            refId: input.refId,\n            content: input.content,\n            parentId: input.parentId\n        )\n\n        return Output(comment: comment)\n    }\n}\n</code></pre>"},{"location":"12_Tickets/05_usecase/TDD-041_PublishCommentUseCase/#naming-conventions","title":"\u547d\u540d\u898f\u7bc4 / Naming Conventions","text":"<ul> <li>UseCase \u4f7f\u7528 <code>struct</code>\uff0c\u63d0\u4f9b <code>execute(input:)</code> \u65b9\u6cd5 / UseCase uses <code>struct</code>, provides <code>execute(input:)</code> method</li> <li>Input/Output \u4f7f\u7528 nested <code>struct</code>\uff0c\u5be6\u4f5c <code>Equatable</code>\u3001<code>Sendable</code> / Input/Output use nested <code>struct</code>, implement <code>Equatable</code>, <code>Sendable</code></li> <li>\u4f7f\u7528 <code>PrematchComment.XXX</code> \u547d\u540d\u7a7a\u9593 / Use <code>PrematchComment.XXX</code> namespace</li> <li>\u4f7f\u7528 <code>public</code> \u4fee\u98fe\u7b26 / Use <code>public</code> modifier</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-041_PublishCommentUseCase/#acceptance-criteria","title":"\u9a57\u6536\u689d\u4ef6 / Acceptance Criteria","text":"<ul> <li>[ ] <code>PublishCommentUseCase</code> \u5be6\u4f5c\u5b8c\u6210 / <code>PublishCommentUseCase</code> implementation complete</li> <li>[ ] Input/Output Model \u5b9a\u7fa9\u5b8c\u6210 / Input/Output Model definition complete</li> <li>[ ] \u767b\u5165\u6aa2\u67e5\u908f\u8f2f\u5be6\u4f5c\u5b8c\u6210 / Login check logic implementation complete</li> <li>[ ] Nickname \u6aa2\u67e5\u548c\u5efa\u7acb\u908f\u8f2f\u5be6\u4f5c\u5b8c\u6210 / Nickname check and creation logic implementation complete</li> <li>[ ] UseCase \u5546\u696d\u908f\u8f2f\u5be6\u4f5c\u5b8c\u6210 / UseCase business logic implementation complete</li> <li>[ ] \u6240\u6709 Test Scenarios \u901a\u904e\uff08Basic / Branch\uff09 / All Test Scenarios passed (Basic / Branch)</li> <li>[ ] \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c / File structure matches reference code style</li> <li>[ ] Unit Test \u8986\u84cb\u7387 \u2265 90% / Unit Test Coverage \u2265 90%</li> <li>[ ] Integration Test \u901a\u904e / Integration Test Passed</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-041_PublishCommentUseCase/#related-documents","title":"\u76f8\u95dc\u6587\u4ef6 / Related Documents","text":"<ul> <li>UseCase \u5b9a\u7fa9\uff1a<code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code></li> <li>Input/Output Model\uff1a<code>output/LiveChat&amp;PrematchComment/07_UseCase Input &amp; Output Model/01_usecase_input_output.md</code></li> <li>Test Scenarios\uff1a<code>output/LiveChat&amp;PrematchComment/10_Test Scenarios/01_test_scenarios.md</code></li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-041_PublishCommentUseCase/#_1","title":"\u8abf\u6574\u56e0\u5b50\u8aaa\u660e / \u8abf\u6574\u56e0\u5b50\u8aaa\u660e","text":"<ul> <li>\u57fa\u790e\u4f30\u6642\uff1a\u4e2d\u7b49 UseCase = 5 SP</li> <li>+3 SP\uff1a\u9700\u8981\u6574\u5408\u591a\u500b Shared Feature\uff08PersonalPageAdapter\u3001FComSharedFlowAdapter\uff09 / - +3 SP\uff1a\u9700\u8981\u6574\u5408\u591a\u500b Shared Feature(PersonalPageAdapter, FComSharedFlowAdapter)</li> <li>+2 SP\uff1a\u8907\u96dc\u7684\u9a57\u8b49\u908f\u8f2f\uff08\u767b\u5165\u6aa2\u67e5\u3001nickname \u6aa2\u67e5\uff09 / - +2 SP\uff1a\u8907\u96dc\u7684ValidationLogic(\u767b\u5165\u6aa2\u67e5, nickname \u6aa2\u67e5)</li> <li>+2 SP\uff1a\u8907\u96dc\u7684\u5546\u696d\u908f\u8f2f\uff08\u7559\u8a00 vs \u56de\u8986\uff09 / - +2 SP\uff1a\u8907\u96dc\u7684\u5546\u696dLogic(\u7559\u8a00 vs \u56de\u8986)</li> <li>+1 SP\uff1a\u9700\u8981\u8655\u7406\u591a\u7a2e Error \u60c5\u6cc1</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-041_PublishCommentUseCase_en/","title":"TDD-041: PublishCommentUseCase","text":""},{"location":"12_Tickets/05_usecase/TDD-041_PublishCommentUseCase_en/#ticket-information","title":"Ticket Information","text":"<p>|------|-----| |  | Ticket ID | TDD-041 | | Jira Key | FOOTBALL-9189 |  | |  | Implement PublishCommentUseCase |  | |  | Type | UseCase |  | |  | P0 |  | |  | PrematchComment |  | |  | TDD-030 |  | |  | Story Point | 13 |  | |  | Standard\uff1a5 daysMost Stringent\uff1a4 days |  |</p>"},{"location":"12_Tickets/05_usecase/TDD-041_PublishCommentUseCase_en/#description","title":"Description","text":"<p>Implement PublishCommentUseCase\u3002</p>"},{"location":"12_Tickets/05_usecase/TDD-041_PublishCommentUseCase_en/#requirements","title":"Requirements","text":"<ol> <li>Implement UseCase Business Logic</li> <li>Integrate PrematchCommentRepository Call</li> <li>Implement Input/Output Model Validation</li> <li>Implement Error Handling</li> <li>Integrate PersonalPageAdapter Protocol(\u767b\u5165\u6aa2\u67e5)</li> <li>Integrate FComSharedFlowAdapter Protocol(nickname \u5efa\u7acb)</li> <li>Support\u7559\u8a00and\u56de\u8986(via parentId \u5340\u5206)</li> </ol>"},{"location":"12_Tickets/05_usecase/TDD-041_PublishCommentUseCase_en/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] UseCase Business Logic Implementation Complete</li> <li>[ ] \u767b\u5165\u6aa2\u67e5LogicImplementation Complete</li> <li>[ ] Nickname \u6aa2\u67e5and\u5efa\u7acbLogicImplementation Complete</li> <li>[ ] All branches tested</li> <li>[ ] Unit Test Coverage \u2265 90%</li> <li>[ ] Integration Test Passed</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-041_PublishCommentUseCase_en/#related-documents","title":"Related Documents","text":"<ul> <li>UseCase Definition: <code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code></li> <li>Input/Output Model: <code>output/LiveChat&amp;PrematchComment/07_UseCase Input &amp; Output Model/01_usecase_input_output.md</code></li> <li>Test Scenarios: <code>output/LiveChat&amp;PrematchComment/10_Test Scenarios/01_test_scenarios.md</code></li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-041_PublishCommentUseCase_en/#_1","title":"\u8abf\u6574\u56e0\u5b50\u8aaa\u660e","text":"<ul> <li>+3 SP\uff1a\u9700\u8981\u6574\u5408\u591a\u500b Shared Feature(PersonalPageAdapter, FComSharedFlowAdapter)</li> <li>+2 SP\uff1a\u8907\u96dc\u7684ValidationLogic(\u767b\u5165\u6aa2\u67e5, nickname \u6aa2\u67e5)</li> <li>+2 SP\uff1a\u8907\u96dc\u7684\u5546\u696dLogic(\u7559\u8a00 vs \u56de\u8986)</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-042_ToggleLikeUseCase/","title":"TDD-042: ToggleLikeUseCase","text":""},{"location":"12_Tickets/05_usecase/TDD-042_ToggleLikeUseCase/#ticket-ticket-information","title":"Ticket \u8cc7\u8a0a / Ticket Information","text":"\u6b04\u4f4d \u503c Ticket ID TDD-042 Jira Key FOOTBALL-9190 \u6a19\u984c \u5be6\u4f5c ToggleLikeUseCase \u985e\u578b UseCase \u512a\u5148\u7d1a P0 \u6240\u5c6c Feature PrematchComment \u4f9d\u8cf4 Ticket TDD-030 Story Point 5 \u4f30\u6642\uff08Senior iOS Engineer + AI \u8f14\u52a9\uff09 \u6a19\u6e96\uff1a2 \u5929\u6700\u56b4\u53b2\uff1a1 \u5929 \u958b\u767c\u65e5\u671f / Development Date 2025-12-10 (\u9031\u4e09)"},{"location":"12_Tickets/05_usecase/TDD-042_ToggleLikeUseCase/#description","title":"\u63cf\u8ff0 / Description","text":"<p>\u5be6\u4f5c ToggleLikeUseCase\u3002 / Implement ToggleLikeUseCase\u3002</p>"},{"location":"12_Tickets/05_usecase/TDD-042_ToggleLikeUseCase/#requirements","title":"\u9700\u6c42 / Requirements","text":"<ol> <li>\u5be6\u4f5c <code>ToggleLikeUseCase</code> struct / Implement <code>ToggleLikeUseCase</code> struct</li> <li>\u5b9a\u7fa9 Input/Output Model / Define Input/Output Model</li> <li>\u6574\u5408 <code>PrematchCommentRepository</code> \u547c\u53eb / Integrate <code>PrematchCommentRepository</code> call</li> <li>\u6574\u5408 <code>PersonalPageAdapter</code> Protocol\uff08\u767b\u5165\u6aa2\u67e5\uff09 / Integrate <code>PersonalPageAdapter</code> Protocol (login check)</li> <li>\u652f\u63f4 Optimistic UI \u66f4\u65b0 / Support Optimistic UI update</li> <li>\u5be6\u4f5c Error Handling / Implement Error Handling</li> <li>\u6a94\u6848\u7d50\u69cb\uff1a<code>Sources/PrematchComment/UseCases/ToggleLikeUseCase.swift</code> / File structure: <code>Sources/PrematchComment/UseCases/ToggleLikeUseCase.swift</code></li> </ol>"},{"location":"12_Tickets/05_usecase/TDD-042_ToggleLikeUseCase/#implementation-guidelines","title":"\u5be6\u4f5c\u898f\u7bc4 / Implementation Guidelines","text":""},{"location":"12_Tickets/05_usecase/TDD-042_ToggleLikeUseCase/#code-example","title":"\u7a0b\u5f0f\u78bc\u7bc4\u4f8b / Code Example","text":"<pre><code>import Foundation\n\npublic struct ToggleLikeUseCase {\n    private let repository: PrematchCommentRepository\n    private let personalPageAdapter: PersonalPageAdapter\n\n    public init(\n        repository: PrematchCommentRepository,\n        personalPageAdapter: PersonalPageAdapter\n    ) {\n        self.repository = repository\n        self.personalPageAdapter = personalPageAdapter\n    }\n\n    public struct Input: Equatable, Sendable {\n        public let commentId: String\n\n        public init(commentId: String) {\n            self.commentId = commentId\n        }\n    }\n\n    public struct Output: Equatable, Sendable {\n        public let comment: PrematchComment.Comment\n\n        public init(comment: PrematchComment.Comment) {\n            self.comment = comment\n        }\n    }\n\n    public func execute(input: Input) async throws -&gt; Output {\n        // \u767b\u5165\u6aa2\u67e5\n        guard personalPageAdapter.isLoggedIn else {\n            throw ToggleLikeError.notLoggedIn\n        }\n\n        // Toggle Like\n        let comment = try await repository.toggleLike(commentId: input.commentId)\n        return Output(comment: comment)\n    }\n}\n</code></pre>"},{"location":"12_Tickets/05_usecase/TDD-042_ToggleLikeUseCase/#naming-conventions","title":"\u547d\u540d\u898f\u7bc4 / Naming Conventions","text":"<ul> <li>UseCase \u4f7f\u7528 <code>struct</code>\uff0c\u63d0\u4f9b <code>execute(input:)</code> \u65b9\u6cd5 / UseCase uses <code>struct</code>, provides <code>execute(input:)</code> method</li> <li>Input/Output \u4f7f\u7528 nested <code>struct</code>\uff0c\u5be6\u4f5c <code>Equatable</code>\u3001<code>Sendable</code> / Input/Output use nested <code>struct</code>, implement <code>Equatable</code>, <code>Sendable</code></li> <li>\u4f7f\u7528 <code>PrematchComment.XXX</code> \u547d\u540d\u7a7a\u9593 / Use <code>PrematchComment.XXX</code> namespace</li> <li>\u4f7f\u7528 <code>public</code> \u4fee\u98fe\u7b26 / Use <code>public</code> modifier</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-042_ToggleLikeUseCase/#acceptance-criteria","title":"\u9a57\u6536\u689d\u4ef6 / Acceptance Criteria","text":"<ul> <li>[ ] <code>ToggleLikeUseCase</code> \u5be6\u4f5c\u5b8c\u6210 / <code>ToggleLikeUseCase</code> implementation complete</li> <li>[ ] Input/Output Model \u5b9a\u7fa9\u5b8c\u6210 / Input/Output Model definition complete</li> <li>[ ] \u767b\u5165\u6aa2\u67e5\u908f\u8f2f\u5be6\u4f5c\u5b8c\u6210 / Login check logic implementation complete</li> <li>[ ] UseCase \u5546\u696d\u908f\u8f2f\u5be6\u4f5c\u5b8c\u6210 / UseCase business logic implementation complete</li> <li>[ ] \u6240\u6709 Test Scenarios \u901a\u904e\uff08Basic / Optional\uff09 / All Test Scenarios passed (Basic / Optional)</li> <li>[ ] \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c / File structure matches reference code style</li> <li>[ ] Unit Test \u8986\u84cb\u7387 \u2265 90% / Unit Test Coverage \u2265 90%</li> <li>[ ] Integration Test \u901a\u904e / Integration Test Passed</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-042_ToggleLikeUseCase/#related-documents","title":"\u76f8\u95dc\u6587\u4ef6 / Related Documents","text":"<ul> <li>UseCase \u5b9a\u7fa9\uff1a<code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code></li> <li>Input/Output Model\uff1a<code>output/LiveChat&amp;PrematchComment/07_UseCase Input &amp; Output Model/01_usecase_input_output.md</code></li> <li>Test Scenarios\uff1a<code>output/LiveChat&amp;PrematchComment/10_Test Scenarios/01_test_scenarios.md</code></li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-042_ToggleLikeUseCase_en/","title":"TDD-042: ToggleLikeUseCase","text":""},{"location":"12_Tickets/05_usecase/TDD-042_ToggleLikeUseCase_en/#ticket-information","title":"Ticket Information","text":"<p>|------|-----| |  | Ticket ID | TDD-042 | | Jira Key | FOOTBALL-9190 |  | |  | Implement ToggleLikeUseCase |  | |  | Type | UseCase |  | |  | P0 |  | |  | PrematchComment |  | |  | TDD-030 |  | |  | Story Point | 5 |  | |  | Standard\uff1a2 daysMost Stringent\uff1a1 days |  |</p>"},{"location":"12_Tickets/05_usecase/TDD-042_ToggleLikeUseCase_en/#description","title":"Description","text":"<p>Implement ToggleLikeUseCase\u3002</p>"},{"location":"12_Tickets/05_usecase/TDD-042_ToggleLikeUseCase_en/#requirements","title":"Requirements","text":"<ol> <li>Implement UseCase Business Logic</li> <li>Integrate PrematchCommentRepository Call</li> <li>Implement Input/Output Model Validation</li> <li>Implement Error Handling</li> <li>Integrate PersonalPageAdapter Protocol(\u767b\u5165\u6aa2\u67e5)</li> <li>Support Optimistic UI Update</li> </ol>"},{"location":"12_Tickets/05_usecase/TDD-042_ToggleLikeUseCase_en/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] UseCase Business Logic Implementation Complete</li> <li>[ ] \u767b\u5165\u6aa2\u67e5LogicImplementation Complete</li> <li>[ ] Optional</li> <li>[ ] Unit Test Coverage \u2265 90%</li> <li>[ ] Integration Test Passed</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-042_ToggleLikeUseCase_en/#related-documents","title":"Related Documents","text":"<ul> <li>UseCase Definition: <code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code></li> <li>Input/Output Model: <code>output/LiveChat&amp;PrematchComment/07_UseCase Input &amp; Output Model/01_usecase_input_output.md</code></li> <li>Test Scenarios: <code>output/LiveChat&amp;PrematchComment/10_Test Scenarios/01_test_scenarios.md</code></li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-043_LoadRepliesUseCase/","title":"TDD-043: LoadRepliesUseCase","text":""},{"location":"12_Tickets/05_usecase/TDD-043_LoadRepliesUseCase/#ticket-ticket-information","title":"Ticket \u8cc7\u8a0a / Ticket Information","text":"\u6b04\u4f4d \u503c Ticket ID TDD-043 Jira Key FOOTBALL-9191 \u6a19\u984c \u5be6\u4f5c LoadRepliesUseCase \u985e\u578b UseCase \u512a\u5148\u7d1a P0 \u6240\u5c6c Feature PrematchComment \u4f9d\u8cf4 Ticket TDD-030 Story Point 5 \u4f30\u6642\uff08Senior iOS Engineer + AI \u8f14\u52a9\uff09 \u6a19\u6e96\uff1a2 \u5929\u6700\u56b4\u53b2\uff1a1 \u5929 \u958b\u767c\u65e5\u671f / Development Date 2025-12-10 (\u9031\u4e09)"},{"location":"12_Tickets/05_usecase/TDD-043_LoadRepliesUseCase/#description","title":"\u63cf\u8ff0 / Description","text":"<p>\u5be6\u4f5c LoadRepliesUseCase\u3002 / Implement LoadRepliesUseCase\u3002</p>"},{"location":"12_Tickets/05_usecase/TDD-043_LoadRepliesUseCase/#requirements","title":"\u9700\u6c42 / Requirements","text":"<ol> <li>\u5be6\u4f5c <code>LoadRepliesUseCase</code> struct / Implement <code>LoadRepliesUseCase</code> struct</li> <li>\u5b9a\u7fa9 Input/Output Model / Define Input/Output Model</li> <li>\u6574\u5408 <code>PrematchCommentRepository</code> \u547c\u53eb / Integrate <code>PrematchCommentRepository</code> call</li> <li>\u652f\u63f4\u5206\u9801\u8f09\u5165\uff08cursor \u6a5f\u5236\uff09 / Support pagination loading (cursor mechanism)</li> <li>\u5be6\u4f5c Error Handling / Implement Error Handling</li> <li>\u6a94\u6848\u7d50\u69cb\uff1a<code>Sources/PrematchComment/UseCases/LoadRepliesUseCase.swift</code> / File structure: <code>Sources/PrematchComment/UseCases/LoadRepliesUseCase.swift</code></li> </ol>"},{"location":"12_Tickets/05_usecase/TDD-043_LoadRepliesUseCase/#implementation-guidelines","title":"\u5be6\u4f5c\u898f\u7bc4 / Implementation Guidelines","text":""},{"location":"12_Tickets/05_usecase/TDD-043_LoadRepliesUseCase/#code-example","title":"\u7a0b\u5f0f\u78bc\u7bc4\u4f8b / Code Example","text":"<pre><code>import Foundation\n\npublic struct LoadRepliesUseCase {\n    private let repository: PrematchCommentRepository\n\n    public init(repository: PrematchCommentRepository) {\n        self.repository = repository\n    }\n\n    public struct Input: Equatable, Sendable {\n        public let commentId: String\n        public let cursor: PrematchComment.Cursor?\n\n        public init(commentId: String, cursor: PrematchComment.Cursor?) {\n            self.commentId = commentId\n            self.cursor = cursor\n        }\n    }\n\n    public struct Output: Equatable, Sendable {\n        public let replies: [PrematchComment.Comment]\n        public let pagingInfo: PrematchComment.PagingInfo\n\n        public init(\n            replies: [PrematchComment.Comment],\n            pagingInfo: PrematchComment.PagingInfo\n        ) {\n            self.replies = replies\n            self.pagingInfo = pagingInfo\n        }\n    }\n\n    public func execute(input: Input) async throws -&gt; Output {\n        let (replies, pagingInfo) = try await repository.getReplies(\n            commentId: input.commentId,\n            cursor: input.cursor\n        )\n        return Output(replies: replies, pagingInfo: pagingInfo)\n    }\n}\n</code></pre>"},{"location":"12_Tickets/05_usecase/TDD-043_LoadRepliesUseCase/#naming-conventions","title":"\u547d\u540d\u898f\u7bc4 / Naming Conventions","text":"<ul> <li>UseCase \u4f7f\u7528 <code>struct</code>\uff0c\u63d0\u4f9b <code>execute(input:)</code> \u65b9\u6cd5 / UseCase uses <code>struct</code>, provides <code>execute(input:)</code> method</li> <li>Input/Output \u4f7f\u7528 nested <code>struct</code>\uff0c\u5be6\u4f5c <code>Equatable</code>\u3001<code>Sendable</code> / Input/Output use nested <code>struct</code>, implement <code>Equatable</code>, <code>Sendable</code></li> <li>\u4f7f\u7528 <code>PrematchComment.XXX</code> \u547d\u540d\u7a7a\u9593 / Use <code>PrematchComment.XXX</code> namespace</li> <li>\u4f7f\u7528 <code>public</code> \u4fee\u98fe\u7b26 / Use <code>public</code> modifier</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-043_LoadRepliesUseCase/#acceptance-criteria","title":"\u9a57\u6536\u689d\u4ef6 / Acceptance Criteria","text":"<ul> <li>[ ] <code>LoadRepliesUseCase</code> \u5be6\u4f5c\u5b8c\u6210 / <code>LoadRepliesUseCase</code> implementation complete</li> <li>[ ] Input/Output Model \u5b9a\u7fa9\u5b8c\u6210 / Input/Output Model definition complete</li> <li>[ ] \u5206\u9801\u908f\u8f2f\u5be6\u4f5c\u5b8c\u6210 / Pagination logic implementation complete</li> <li>[ ] UseCase \u5546\u696d\u908f\u8f2f\u5be6\u4f5c\u5b8c\u6210 / UseCase business logic implementation complete</li> <li>[ ] \u6240\u6709 Test Scenarios \u901a\u904e\uff08Basic / Loop\uff09 / All Test Scenarios passed (Basic / Loop)</li> <li>[ ] \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c / File structure matches reference code style</li> <li>[ ] Unit Test \u8986\u84cb\u7387 \u2265 90% / Unit Test Coverage \u2265 90%</li> <li>[ ] Integration Test \u901a\u904e / Integration Test Passed</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-043_LoadRepliesUseCase/#related-documents","title":"\u76f8\u95dc\u6587\u4ef6 / Related Documents","text":"<ul> <li>UseCase \u5b9a\u7fa9\uff1a<code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code></li> <li>Input/Output Model\uff1a<code>output/LiveChat&amp;PrematchComment/07_UseCase Input &amp; Output Model/01_usecase_input_output.md</code></li> <li>Test Scenarios\uff1a<code>output/LiveChat&amp;PrematchComment/10_Test Scenarios/01_test_scenarios.md</code></li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-043_LoadRepliesUseCase_en/","title":"TDD-043: LoadRepliesUseCase","text":""},{"location":"12_Tickets/05_usecase/TDD-043_LoadRepliesUseCase_en/#ticket-information","title":"Ticket Information","text":"<p>|------|-----| |  | Ticket ID | TDD-043 | | Jira Key | FOOTBALL-9191 |  | |  | Implement LoadRepliesUseCase |  | |  | Type | UseCase |  | |  | P0 |  | |  | PrematchComment |  | |  | TDD-030 |  | |  | Story Point | 5 |  | |  | Standard\uff1a2 daysMost Stringent\uff1a1 days |  |</p>"},{"location":"12_Tickets/05_usecase/TDD-043_LoadRepliesUseCase_en/#description","title":"Description","text":"<p>Implement LoadRepliesUseCase\u3002</p>"},{"location":"12_Tickets/05_usecase/TDD-043_LoadRepliesUseCase_en/#requirements","title":"Requirements","text":"<ol> <li>Implement UseCase Business Logic</li> <li>Integrate PrematchCommentRepository Call</li> <li>Implement Input/Output Model Validation</li> <li>Implement Error Handling</li> <li>SupportPaginationLoading(\u6bcf\u6b21\u6700\u591a 5 \u7b46)</li> <li>Support cursor \u6a5f\u5236</li> </ol>"},{"location":"12_Tickets/05_usecase/TDD-043_LoadRepliesUseCase_en/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] UseCase Business Logic Implementation Complete</li> <li>[ ] PaginationLogicImplementation Complete</li> <li>[ ] Loop</li> <li>[ ] Unit Test Coverage \u2265 90%</li> <li>[ ] Integration Test Passed</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-043_LoadRepliesUseCase_en/#related-documents","title":"Related Documents","text":"<ul> <li>UseCase Definition: <code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code></li> <li>Input/Output Model: <code>output/LiveChat&amp;PrematchComment/07_UseCase Input &amp; Output Model/01_usecase_input_output.md</code></li> <li>Test Scenarios: <code>output/LiveChat&amp;PrematchComment/10_Test Scenarios/01_test_scenarios.md</code></li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-044_NavigateToProfileUseCase/","title":"TDD-044: NavigateToProfileUseCase","text":""},{"location":"12_Tickets/05_usecase/TDD-044_NavigateToProfileUseCase/#ticket-ticket-information","title":"Ticket \u8cc7\u8a0a / Ticket Information","text":"\u6b04\u4f4d \u503c Ticket ID TDD-044 Jira Key FOOTBALL-9192 \u6a19\u984c \u5be6\u4f5c NavigateToProfileUseCase \u985e\u578b UseCase \u512a\u5148\u7d1a P1 \u6240\u5c6c Feature LiveChat &amp; PrematchComment \u4f9d\u8cf4 Ticket - Story Point 2 \u4f30\u6642\uff08Senior iOS Engineer + AI \u8f14\u52a9\uff09 \u6a19\u6e96\uff1a1 \u5929\u6700\u56b4\u53b2\uff1a1 \u5929 \u958b\u767c\u65e5\u671f / Development Date 2025-12-11 (\u9031\u56db)"},{"location":"12_Tickets/05_usecase/TDD-044_NavigateToProfileUseCase/#description","title":"\u63cf\u8ff0 / Description","text":"<p>\u5be6\u4f5c NavigateToProfileUseCase\u3002 / Implement NavigateToProfileUseCase\u3002</p>"},{"location":"12_Tickets/05_usecase/TDD-044_NavigateToProfileUseCase/#requirements","title":"\u9700\u6c42 / Requirements","text":"<ol> <li>\u5be6\u4f5c <code>NavigateToProfileUseCase</code> struct / Implement <code>NavigateToProfileUseCase</code> struct</li> <li>\u5b9a\u7fa9 Input/Output Model / Define Input/Output Model</li> <li>\u6574\u5408 <code>PersonalPageAdapter</code> Protocol \u57f7\u884c\u8def\u7531\u8df3\u8f49 / Integrate <code>PersonalPageAdapter</code> Protocol to execute route navigation</li> <li>\u5be6\u4f5c Error Handling / Implement Error Handling</li> <li>\u6a94\u6848\u7d50\u69cb\uff1a<code>Sources/Shared/UseCases/NavigateToProfileUseCase.swift</code> / File structure: <code>Sources/Shared/UseCases/NavigateToProfileUseCase.swift</code></li> </ol>"},{"location":"12_Tickets/05_usecase/TDD-044_NavigateToProfileUseCase/#implementation-guidelines","title":"\u5be6\u4f5c\u898f\u7bc4 / Implementation Guidelines","text":""},{"location":"12_Tickets/05_usecase/TDD-044_NavigateToProfileUseCase/#code-example","title":"\u7a0b\u5f0f\u78bc\u7bc4\u4f8b / Code Example","text":"<pre><code>import Foundation\n\npublic struct NavigateToProfileUseCase {\n    private let personalPageAdapter: PersonalPageAdapter\n\n    public init(personalPageAdapter: PersonalPageAdapter) {\n        self.personalPageAdapter = personalPageAdapter\n    }\n\n    public struct Input: Equatable, Sendable {\n        public let userId: String\n\n        public init(userId: String) {\n            self.userId = userId\n        }\n    }\n\n    public struct Output: Equatable, Sendable {\n        public init() {}\n    }\n\n    public func execute(input: Input) async throws -&gt; Output {\n        try await personalPageAdapter.navigateToProfile(userId: input.userId)\n        return Output()\n    }\n}\n</code></pre>"},{"location":"12_Tickets/05_usecase/TDD-044_NavigateToProfileUseCase/#naming-conventions","title":"\u547d\u540d\u898f\u7bc4 / Naming Conventions","text":"<ul> <li>UseCase \u4f7f\u7528 <code>struct</code>\uff0c\u63d0\u4f9b <code>execute(input:)</code> \u65b9\u6cd5 / UseCase uses <code>struct</code>, provides <code>execute(input:)</code> method</li> <li>Input/Output \u4f7f\u7528 nested <code>struct</code>\uff0c\u5be6\u4f5c <code>Equatable</code>\u3001<code>Sendable</code> / Input/Output use nested <code>struct</code>, implement <code>Equatable</code>, <code>Sendable</code></li> <li>\u4f7f\u7528 <code>public</code> \u4fee\u98fe\u7b26 / Use <code>public</code> modifier</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-044_NavigateToProfileUseCase/#acceptance-criteria","title":"\u9a57\u6536\u689d\u4ef6 / Acceptance Criteria","text":"<ul> <li>[ ] <code>NavigateToProfileUseCase</code> \u5be6\u4f5c\u5b8c\u6210 / <code>NavigateToProfileUseCase</code> implementation complete</li> <li>[ ] Input/Output Model \u5b9a\u7fa9\u5b8c\u6210 / Input/Output Model definition complete</li> <li>[ ] \u8def\u7531\u8df3\u8f49\u908f\u8f2f\u5be6\u4f5c\u5b8c\u6210 / Route navigation logic implementation complete</li> <li>[ ] UseCase \u5546\u696d\u908f\u8f2f\u5be6\u4f5c\u5b8c\u6210 / UseCase business logic implementation complete</li> <li>[ ] \u6240\u6709 Test Scenarios \u901a\u904e\uff08Basic / Error\uff09 / All Test Scenarios passed (Basic / Error)</li> <li>[ ] \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c / File structure matches reference code style</li> <li>[ ] Unit Test \u8986\u84cb\u7387 \u2265 90% / Unit Test Coverage \u2265 90%</li> <li>[ ] Integration Test \u901a\u904e / Integration Test Passed</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-044_NavigateToProfileUseCase/#related-documents","title":"\u76f8\u95dc\u6587\u4ef6 / Related Documents","text":"<ul> <li>UseCase \u5b9a\u7fa9\uff1a<code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code></li> <li>Input/Output Model\uff1a<code>output/LiveChat&amp;PrematchComment/07_UseCase Input &amp; Output Model/01_usecase_input_output.md</code></li> <li>Test Scenarios\uff1a<code>output/LiveChat&amp;PrematchComment/10_Test Scenarios/01_test_scenarios.md</code></li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-044_NavigateToProfileUseCase_en/","title":"TDD-044: NavigateToProfileUseCase","text":""},{"location":"12_Tickets/05_usecase/TDD-044_NavigateToProfileUseCase_en/#ticket-information","title":"Ticket Information","text":"<p>|------|-----| |  | Ticket ID | TDD-044 | | Jira Key | FOOTBALL-9192 |  | |  | Implement NavigateToProfileUseCase |  | |  | Type | UseCase |  | |  | P1 |  | |  | LiveChat &amp; PrematchComment |  | |  | - |  | |  | Story Point | 2 |  | |  | Standard\uff1a1 daysMost Stringent\uff1a1 days |  |</p>"},{"location":"12_Tickets/05_usecase/TDD-044_NavigateToProfileUseCase_en/#description","title":"Description","text":"<p>Implement NavigateToProfileUseCase\u3002</p>"},{"location":"12_Tickets/05_usecase/TDD-044_NavigateToProfileUseCase_en/#requirements","title":"Requirements","text":"<ol> <li>Implement UseCase Business Logic</li> <li>Integrate PersonalPageAdapter Protocol \u57f7\u884c\u8def\u7531\u8df3\u8f49</li> <li>Implement Input/Output Model Validation</li> <li>Implement Error Handling</li> </ol>"},{"location":"12_Tickets/05_usecase/TDD-044_NavigateToProfileUseCase_en/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] UseCase Business Logic Implementation Complete</li> <li>[ ] \u8def\u7531\u8df3\u8f49LogicImplementation Complete</li> <li>[ ] Error\uff09</li> <li>[ ] Unit Test Coverage \u2265 90%</li> <li>[ ] Integration Test Passed</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-044_NavigateToProfileUseCase_en/#related-documents","title":"Related Documents","text":"<ul> <li>UseCase Definition: <code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code></li> <li>Input/Output Model: <code>output/LiveChat&amp;PrematchComment/07_UseCase Input &amp; Output Model/01_usecase_input_output.md</code></li> <li>Test Scenarios: <code>output/LiveChat&amp;PrematchComment/10_Test Scenarios/01_test_scenarios.md</code></li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-045_SendChatMessageUseCase/","title":"TDD-045: SendChatMessageUseCase","text":""},{"location":"12_Tickets/05_usecase/TDD-045_SendChatMessageUseCase/#ticket-ticket-information","title":"Ticket \u8cc7\u8a0a / Ticket Information","text":"\u6b04\u4f4d \u503c Ticket ID TDD-045 Jira Key FOOTBALL-9193 \u6a19\u984c \u5be6\u4f5c SendChatMessageUseCase \u985e\u578b UseCase \u512a\u5148\u7d1a P0 \u6240\u5c6c Feature LiveChat \u4f9d\u8cf4 Ticket TDD-031 Story Point 13 \u4f30\u6642\uff08Senior iOS Engineer + AI \u8f14\u52a9\uff09 \u6a19\u6e96\uff1a5 \u5929\u6700\u56b4\u53b2\uff1a4 \u5929 \u958b\u767c\u65e5\u671f / Development Date 2025-12-11 (\u9031\u56db)"},{"location":"12_Tickets/05_usecase/TDD-045_SendChatMessageUseCase/#description","title":"\u63cf\u8ff0 / Description","text":"<p>\u5be6\u4f5c SendChatMessageUseCase\u3002 / Implement SendChatMessageUseCase\u3002</p>"},{"location":"12_Tickets/05_usecase/TDD-045_SendChatMessageUseCase/#requirements","title":"\u9700\u6c42 / Requirements","text":"<ol> <li>\u5be6\u4f5c <code>SendChatMessageUseCase</code> struct / Implement <code>SendChatMessageUseCase</code> struct</li> <li>\u5b9a\u7fa9 Input/Output Model / Define Input/Output Model</li> <li>\u6574\u5408 <code>LiveChatRepository</code> \u547c\u53eb / Integrate <code>LiveChatRepository</code> call</li> <li>\u6574\u5408 <code>PersonalPageAdapter</code> Protocol\uff08\u767b\u5165\u6aa2\u67e5\uff09 / Integrate <code>PersonalPageAdapter</code> Protocol (login check)</li> <li>\u6574\u5408 <code>FComSharedFlowAdapter</code> Protocol\uff08nickname \u5efa\u7acb\uff09 / Integrate <code>FComSharedFlowAdapter</code> Protocol (nickname creation)</li> <li>\u5be6\u4f5c Error Handling / Implement Error Handling</li> <li>\u6a94\u6848\u7d50\u69cb\uff1a<code>Sources/LiveChat/UseCases/SendChatMessageUseCase.swift</code> / File structure: <code>Sources/LiveChat/UseCases/SendChatMessageUseCase.swift</code></li> </ol>"},{"location":"12_Tickets/05_usecase/TDD-045_SendChatMessageUseCase/#implementation-guidelines","title":"\u5be6\u4f5c\u898f\u7bc4 / Implementation Guidelines","text":""},{"location":"12_Tickets/05_usecase/TDD-045_SendChatMessageUseCase/#code-example","title":"\u7a0b\u5f0f\u78bc\u7bc4\u4f8b / Code Example","text":"<pre><code>import Foundation\n\npublic struct SendChatMessageUseCase {\n    private let repository: LiveChatRepository\n    private let personalPageAdapter: PersonalPageAdapter\n    private let fComSharedFlowAdapter: FComSharedFlowAdapter\n\n    public init(\n        repository: LiveChatRepository,\n        personalPageAdapter: PersonalPageAdapter,\n        fComSharedFlowAdapter: FComSharedFlowAdapter\n    ) {\n        self.repository = repository\n        self.personalPageAdapter = personalPageAdapter\n        self.fComSharedFlowAdapter = fComSharedFlowAdapter\n    }\n\n    public struct Input: Equatable, Sendable {\n        public let chatroomId: String\n        public let content: String\n        public let messageType: LiveChat.MessageType\n\n        public init(\n            chatroomId: String,\n            content: String,\n            messageType: LiveChat.MessageType\n        ) {\n            self.chatroomId = chatroomId\n            self.content = content\n            self.messageType = messageType\n        }\n    }\n\n    public struct Output: Equatable, Sendable {\n        public let message: LiveChat.Message\n\n        public init(message: LiveChat.Message) {\n            self.message = message\n        }\n    }\n\n    public func execute(input: Input) async throws -&gt; Output {\n        // \u767b\u5165\u6aa2\u67e5\n        guard personalPageAdapter.isLoggedIn else {\n            throw SendChatMessageError.notLoggedIn\n        }\n\n        // Nickname \u6aa2\u67e5\u548c\u5efa\u7acb\n        if !personalPageAdapter.hasNickname {\n            try await fComSharedFlowAdapter.createNickname()\n        }\n\n        // \u767c\u9001\u8a0a\u606f\n        let message = try await repository.sendMessage(\n            chatroomId: input.chatroomId,\n            content: input.content,\n            messageType: input.messageType\n        )\n\n        return Output(message: message)\n    }\n}\n</code></pre>"},{"location":"12_Tickets/05_usecase/TDD-045_SendChatMessageUseCase/#naming-conventions","title":"\u547d\u540d\u898f\u7bc4 / Naming Conventions","text":"<ul> <li>UseCase \u4f7f\u7528 <code>struct</code>\uff0c\u63d0\u4f9b <code>execute(input:)</code> \u65b9\u6cd5 / UseCase uses <code>struct</code>, provides <code>execute(input:)</code> method</li> <li>Input/Output \u4f7f\u7528 nested <code>struct</code>\uff0c\u5be6\u4f5c <code>Equatable</code>\u3001<code>Sendable</code> / Input/Output use nested <code>struct</code>, implement <code>Equatable</code>, <code>Sendable</code></li> <li>\u4f7f\u7528 <code>LiveChat.XXX</code> \u547d\u540d\u7a7a\u9593 / Use <code>LiveChat.XXX</code> namespace</li> <li>\u4f7f\u7528 <code>public</code> \u4fee\u98fe\u7b26 / Use <code>public</code> modifier</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-045_SendChatMessageUseCase/#acceptance-criteria","title":"\u9a57\u6536\u689d\u4ef6 / Acceptance Criteria","text":"<ul> <li>[ ] <code>SendChatMessageUseCase</code> \u5be6\u4f5c\u5b8c\u6210 / <code>SendChatMessageUseCase</code> implementation complete</li> <li>[ ] Input/Output Model \u5b9a\u7fa9\u5b8c\u6210 / Input/Output Model definition complete</li> <li>[ ] \u767b\u5165\u6aa2\u67e5\u908f\u8f2f\u5be6\u4f5c\u5b8c\u6210 / Login check logic implementation complete</li> <li>[ ] Nickname \u6aa2\u67e5\u548c\u5efa\u7acb\u908f\u8f2f\u5be6\u4f5c\u5b8c\u6210 / Nickname check and creation logic implementation complete</li> <li>[ ] UseCase \u5546\u696d\u908f\u8f2f\u5be6\u4f5c\u5b8c\u6210 / UseCase business logic implementation complete</li> <li>[ ] \u6240\u6709 Test Scenarios \u901a\u904e\uff08Basic / Branch\uff09 / All Test Scenarios passed (Basic / Branch)</li> <li>[ ] \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c / File structure matches reference code style</li> <li>[ ] Unit Test \u8986\u84cb\u7387 \u2265 90% / Unit Test Coverage \u2265 90%</li> <li>[ ] Integration Test \u901a\u904e / Integration Test Passed</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-045_SendChatMessageUseCase/#related-documents","title":"\u76f8\u95dc\u6587\u4ef6 / Related Documents","text":"<ul> <li>UseCase \u5b9a\u7fa9\uff1a<code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code></li> <li>Input/Output Model\uff1a<code>output/LiveChat&amp;PrematchComment/07_UseCase Input &amp; Output Model/01_usecase_input_output.md</code></li> <li>Test Scenarios\uff1a<code>output/LiveChat&amp;PrematchComment/10_Test Scenarios/01_test_scenarios.md</code></li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-045_SendChatMessageUseCase/#_1","title":"\u8abf\u6574\u56e0\u5b50\u8aaa\u660e / \u8abf\u6574\u56e0\u5b50\u8aaa\u660e","text":"<ul> <li>\u57fa\u790e\u4f30\u6642\uff1a\u4e2d\u7b49 UseCase = 5 SP</li> <li>+3 SP\uff1a\u9700\u8981\u6574\u5408\u591a\u500b Shared Feature\uff08PersonalPageAdapter\u3001FComSharedFlowAdapter\uff09 / - +3 SP\uff1a\u9700\u8981\u6574\u5408\u591a\u500b Shared Feature(PersonalPageAdapter, FComSharedFlowAdapter)</li> <li>+2 SP\uff1a\u8907\u96dc\u7684\u9a57\u8b49\u908f\u8f2f\uff08\u767b\u5165\u6aa2\u67e5\u3001nickname \u6aa2\u67e5\uff09 / - +2 SP\uff1a\u8907\u96dc\u7684ValidationLogic(\u767b\u5165\u6aa2\u67e5, nickname \u6aa2\u67e5)</li> <li>+2 SP\uff1a\u8907\u96dc\u7684\u5546\u696d\u908f\u8f2f / - +2 SP\uff1a\u8907\u96dc\u7684\u5546\u696dLogic</li> <li>+1 SP\uff1a\u9700\u8981\u8655\u7406\u591a\u7a2e Error \u60c5\u6cc1</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-045_SendChatMessageUseCase_en/","title":"TDD-045: SendChatMessageUseCase","text":""},{"location":"12_Tickets/05_usecase/TDD-045_SendChatMessageUseCase_en/#ticket-information","title":"Ticket Information","text":"<p>|------|-----| |  | Ticket ID | TDD-045 | | Jira Key | FOOTBALL-9193 |  | |  | Implement SendChatMessageUseCase |  | |  | Type | UseCase |  | |  | P0 |  | |  | LiveChat |  | |  | TDD-031 |  | |  | Story Point | 13 |  | |  | Standard\uff1a5 daysMost Stringent\uff1a4 days |  |</p>"},{"location":"12_Tickets/05_usecase/TDD-045_SendChatMessageUseCase_en/#description","title":"Description","text":"<p>Implement SendChatMessageUseCase\u3002</p>"},{"location":"12_Tickets/05_usecase/TDD-045_SendChatMessageUseCase_en/#requirements","title":"Requirements","text":"<ol> <li>Implement UseCase Business Logic</li> <li>Integrate LiveChatRepository Call</li> <li>Implement Input/Output Model Validation</li> <li>Implement Error Handling</li> <li>Integrate PersonalPageAdapter Protocol(\u767b\u5165\u6aa2\u67e5)</li> <li>Integrate FComSharedFlowAdapter Protocol(nickname \u5efa\u7acb)</li> </ol>"},{"location":"12_Tickets/05_usecase/TDD-045_SendChatMessageUseCase_en/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] UseCase Business Logic Implementation Complete</li> <li>[ ] \u767b\u5165\u6aa2\u67e5LogicImplementation Complete</li> <li>[ ] Nickname \u6aa2\u67e5and\u5efa\u7acbLogicImplementation Complete</li> <li>[ ] All branches tested</li> <li>[ ] Unit Test Coverage \u2265 90%</li> <li>[ ] Integration Test Passed</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-045_SendChatMessageUseCase_en/#related-documents","title":"Related Documents","text":"<ul> <li>UseCase Definition: <code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code></li> <li>Input/Output Model: <code>output/LiveChat&amp;PrematchComment/07_UseCase Input &amp; Output Model/01_usecase_input_output.md</code></li> <li>Test Scenarios: <code>output/LiveChat&amp;PrematchComment/10_Test Scenarios/01_test_scenarios.md</code></li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-045_SendChatMessageUseCase_en/#_1","title":"\u8abf\u6574\u56e0\u5b50\u8aaa\u660e","text":"<ul> <li>+3 SP\uff1a\u9700\u8981\u6574\u5408\u591a\u500b Shared Feature(PersonalPageAdapter, FComSharedFlowAdapter)</li> <li>+2 SP\uff1a\u8907\u96dc\u7684ValidationLogic(\u767b\u5165\u6aa2\u67e5, nickname \u6aa2\u67e5)</li> <li>+2 SP\uff1a\u8907\u96dc\u7684\u5546\u696dLogic</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-046_JoinChatroomUseCase/","title":"TDD-046: JoinChatroomUseCase","text":""},{"location":"12_Tickets/05_usecase/TDD-046_JoinChatroomUseCase/#ticket-ticket-information","title":"Ticket \u8cc7\u8a0a / Ticket Information","text":"\u6b04\u4f4d \u503c Ticket ID TDD-046 Jira Key FOOTBALL-9194 \u6a19\u984c \u5be6\u4f5c JoinChatroomUseCase \u985e\u578b UseCase \u512a\u5148\u7d1a P0 \u6240\u5c6c Feature LiveChat \u4f9d\u8cf4 Ticket TDD-031 Story Point 13 \u4f30\u6642\uff08Senior iOS Engineer + AI \u8f14\u52a9\uff09 \u6a19\u6e96\uff1a5 \u5929\u6700\u56b4\u53b2\uff1a4 \u5929 \u958b\u767c\u65e5\u671f / Development Date 2025-12-12 (\u9031\u4e94)"},{"location":"12_Tickets/05_usecase/TDD-046_JoinChatroomUseCase/#description","title":"\u63cf\u8ff0 / Description","text":"<p>\u5be6\u4f5c JoinChatroomUseCase\u3002 / Implement JoinChatroomUseCase\u3002</p>"},{"location":"12_Tickets/05_usecase/TDD-046_JoinChatroomUseCase/#requirements","title":"\u9700\u6c42 / Requirements","text":"<ol> <li>\u5be6\u4f5c <code>JoinChatroomUseCase</code> struct / Implement <code>JoinChatroomUseCase</code> struct</li> <li>\u5b9a\u7fa9 Input/Output Model / Define Input/Output Model</li> <li>\u6574\u5408 <code>LiveChatRepository</code> \u547c\u53eb / Integrate <code>LiveChatRepository</code> call</li> <li>\u5be6\u4f5c\u6b77\u53f2\u8a0a\u606f\u8207 WebSocket \u8a0a\u606f\u5408\u4f75\u908f\u8f2f / Implement historical message and WebSocket message merge logic</li> <li>\u5be6\u4f5c\u4f9d messageNo \u53bb\u91cd\u908f\u8f2f / Implement deduplication logic by messageNo</li> <li>\u8655\u7406\u7121\u6cd5\u53d6\u5f97 chatroomId \u7684\u60c5\u6cc1 / Handle case when chatroomId cannot be obtained</li> <li>\u5be6\u4f5c Error Handling / Implement Error Handling</li> <li>\u6a94\u6848\u7d50\u69cb\uff1a<code>Sources/LiveChat/UseCases/JoinChatroomUseCase.swift</code> / File structure: <code>Sources/LiveChat/UseCases/JoinChatroomUseCase.swift</code></li> </ol>"},{"location":"12_Tickets/05_usecase/TDD-046_JoinChatroomUseCase/#implementation-guidelines","title":"\u5be6\u4f5c\u898f\u7bc4 / Implementation Guidelines","text":""},{"location":"12_Tickets/05_usecase/TDD-046_JoinChatroomUseCase/#code-example","title":"\u7a0b\u5f0f\u78bc\u7bc4\u4f8b / Code Example","text":"<pre><code>import Foundation\n\npublic struct JoinChatroomUseCase {\n    private let repository: LiveChatRepository\n\n    public init(repository: LiveChatRepository) {\n        self.repository = repository\n    }\n\n    public struct Input: Equatable, Sendable {\n        public let refId: String\n\n        public init(refId: String) {\n            self.refId = refId\n        }\n    }\n\n    public struct Output: Equatable, Sendable {\n        public let chatroomInfo: LiveChat.ChatroomInfo\n        public let messages: [LiveChat.Message]\n\n        public init(\n            chatroomInfo: LiveChat.ChatroomInfo,\n            messages: [LiveChat.Message]\n        ) {\n            self.chatroomInfo = chatroomInfo\n            self.messages = messages\n        }\n    }\n\n    public func execute(input: Input) async throws -&gt; Output {\n        // 1. \u53d6\u5f97\u804a\u5929\u5ba4\u8cc7\u8a0a\n        let chatroomInfo = try await repository.getChatroomInfo(refId: input.refId)\n\n        guard let chatroomId = chatroomInfo.chatroomId, !chatroomId.isEmpty else {\n            throw JoinChatroomError.chatroomIdNotFound\n        }\n\n        // 2. \u52a0\u5165\u804a\u5929\u5ba4\n        try await repository.joinChatroom(chatroomId: chatroomId)\n\n        // 3. \u8f09\u5165\u6b77\u53f2\u8a0a\u606f\n        let historicalMessages = try await repository.loadHistoricalMessages(\n            chatroomId: chatroomId,\n            lastMessageNo: chatroomInfo.lastMessageNo\n        )\n\n        // 4. \u8a02\u95b1 WebSocket\n        try await repository.subscribeWebSocket()\n\n        // 5. \u5408\u4f75\u8a0a\u606f\uff08\u6b77\u53f2\u8a0a\u606f + WebSocket \u8a0a\u606f\uff0c\u4f9d messageNo \u53bb\u91cd\uff09\n        let mergedMessages = mergeMessages(\n            historical: historicalMessages,\n            webSocket: repository.getWebSocketMessages()\n        )\n\n        return Output(chatroomInfo: chatroomInfo, messages: mergedMessages)\n    }\n\n    private func mergeMessages(\n        historical: [LiveChat.Message],\n        webSocket: [LiveChat.Message]\n    ) -&gt; [LiveChat.Message] {\n        // \u5408\u4f75\u908f\u8f2f\uff1a\u4f9d messageNo \u53bb\u91cd\uff0c\u6309 messageNo \u6392\u5e8f\n        var messageMap: [Int: LiveChat.Message] = [:]\n\n        for message in historical {\n            messageMap[message.messageNo] = message\n        }\n\n        for message in webSocket {\n            messageMap[message.messageNo] = message\n        }\n\n        return messageMap.values.sorted { $0.messageNo &lt; $1.messageNo }\n    }\n}\n</code></pre>"},{"location":"12_Tickets/05_usecase/TDD-046_JoinChatroomUseCase/#naming-conventions","title":"\u547d\u540d\u898f\u7bc4 / Naming Conventions","text":"<ul> <li>UseCase \u4f7f\u7528 <code>struct</code>\uff0c\u63d0\u4f9b <code>execute(input:)</code> \u65b9\u6cd5 / UseCase uses <code>struct</code>, provides <code>execute(input:)</code> method</li> <li>Input/Output \u4f7f\u7528 nested <code>struct</code>\uff0c\u5be6\u4f5c <code>Equatable</code>\u3001<code>Sendable</code> / Input/Output use nested <code>struct</code>, implement <code>Equatable</code>, <code>Sendable</code></li> <li>\u4f7f\u7528 <code>LiveChat.XXX</code> \u547d\u540d\u7a7a\u9593 / Use <code>LiveChat.XXX</code> namespace</li> <li>\u4f7f\u7528 <code>public</code> \u4fee\u98fe\u7b26 / Use <code>public</code> modifier</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-046_JoinChatroomUseCase/#acceptance-criteria","title":"\u9a57\u6536\u689d\u4ef6 / Acceptance Criteria","text":"<ul> <li>[ ] <code>JoinChatroomUseCase</code> \u5be6\u4f5c\u5b8c\u6210 / <code>JoinChatroomUseCase</code> implementation complete</li> <li>[ ] Input/Output Model \u5b9a\u7fa9\u5b8c\u6210 / Input/Output Model definition complete</li> <li>[ ] \u8a0a\u606f\u5408\u4f75\u908f\u8f2f\u5be6\u4f5c\u5b8c\u6210 / Message merge logic implementation complete</li> <li>[ ] \u53bb\u91cd\u908f\u8f2f\u5be6\u4f5c\u5b8c\u6210 / Deduplication logic implementation complete</li> <li>[ ] UseCase \u5546\u696d\u908f\u8f2f\u5be6\u4f5c\u5b8c\u6210 / UseCase business logic implementation complete</li> <li>[ ] \u6240\u6709 Test Scenarios \u901a\u904e\uff08Basic / Branch\uff09 / All Test Scenarios passed (Basic / Branch)</li> <li>[ ] \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c / File structure matches reference code style</li> <li>[ ] Unit Test \u8986\u84cb\u7387 \u2265 90% / Unit Test Coverage \u2265 90%</li> <li>[ ] Integration Test \u901a\u904e / Integration Test Passed</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-046_JoinChatroomUseCase/#related-documents","title":"\u76f8\u95dc\u6587\u4ef6 / Related Documents","text":"<ul> <li>UseCase \u5b9a\u7fa9\uff1a<code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code></li> <li>Input/Output Model\uff1a<code>output/LiveChat&amp;PrematchComment/07_UseCase Input &amp; Output Model/01_usecase_input_output.md</code></li> <li>Test Scenarios\uff1a<code>output/LiveChat&amp;PrematchComment/10_Test Scenarios/01_test_scenarios.md</code></li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-046_JoinChatroomUseCase/#_1","title":"\u8abf\u6574\u56e0\u5b50\u8aaa\u660e / \u8abf\u6574\u56e0\u5b50\u8aaa\u660e","text":"<ul> <li>\u57fa\u790e\u4f30\u6642\uff1a\u8907\u96dc UseCase = 13 SP</li> <li>+2 SP\uff1a\u8907\u96dc\u7684\u8cc7\u6599\u5408\u4f75\u908f\u8f2f\uff08\u6b77\u53f2\u8a0a\u606f\u8207 WebSocket \u8a0a\u606f\u5408\u4f75\uff09 / - +2 SP\uff1a\u8907\u96dc\u7684\u8cc7\u6599\u5408\u4f75Logic(\u6b77\u53f2\u8a0a\u606f\u8207 WebSocket \u8a0a\u606f\u5408\u4f75)</li> <li>+1 SP\uff1a\u8907\u96dc\u7684\u53bb\u91cd\u908f\u8f2f / - +1 SP\uff1a\u8907\u96dc\u7684\u53bb\u91cdLogic</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-046_JoinChatroomUseCase_en/","title":"TDD-046: JoinChatroomUseCase","text":""},{"location":"12_Tickets/05_usecase/TDD-046_JoinChatroomUseCase_en/#ticket-information","title":"Ticket Information","text":"<p>|------|-----| |  | Ticket ID | TDD-046 | | Jira Key | FOOTBALL-9194 |  | |  | Implement JoinChatroomUseCase |  | |  | Type | UseCase |  | |  | P0 |  | |  | LiveChat |  | |  | TDD-031 |  | |  | Story Point | 13 |  | |  | Standard\uff1a5 daysMost Stringent\uff1a4 days |  |</p>"},{"location":"12_Tickets/05_usecase/TDD-046_JoinChatroomUseCase_en/#description","title":"Description","text":"<p>Implement JoinChatroomUseCase\u3002</p>"},{"location":"12_Tickets/05_usecase/TDD-046_JoinChatroomUseCase_en/#requirements","title":"Requirements","text":"<ol> <li>Implement UseCase Business Logic</li> <li>Integrate LiveChatRepository Call</li> <li>Implement Input/Output Model Validation</li> <li>Implement Error Handling</li> <li>Implement\u6b77\u53f2\u8a0a\u606f\u8207 WebSocket \u8a0a\u606f\u5408\u4f75Logic</li> <li>Implement\u4f9d messageNo \u53bb\u91cdLogic</li> <li>Handling\u7121\u6cd5\u53d6\u5f97 ChatroomId \u7684\u60c5\u6cc1</li> </ol>"},{"location":"12_Tickets/05_usecase/TDD-046_JoinChatroomUseCase_en/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] UseCase Business Logic Implementation Complete</li> <li>[ ] \u8a0a\u606f\u5408\u4f75LogicImplementation Complete</li> <li>[ ] \u53bb\u91cdLogicImplementation Complete</li> <li>[ ] All branches tested</li> <li>[ ] Unit Test Coverage \u2265 90%</li> <li>[ ] Integration Test Passed</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-046_JoinChatroomUseCase_en/#related-documents","title":"Related Documents","text":"<ul> <li>UseCase Definition: <code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code></li> <li>Input/Output Model: <code>output/LiveChat&amp;PrematchComment/07_UseCase Input &amp; Output Model/01_usecase_input_output.md</code></li> <li>Test Scenarios: <code>output/LiveChat&amp;PrematchComment/10_Test Scenarios/01_test_scenarios.md</code></li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-046_JoinChatroomUseCase_en/#_1","title":"\u8abf\u6574\u56e0\u5b50\u8aaa\u660e","text":"<ul> <li>+2 SP\uff1a\u8907\u96dc\u7684\u8cc7\u6599\u5408\u4f75Logic(\u6b77\u53f2\u8a0a\u606f\u8207 WebSocket \u8a0a\u606f\u5408\u4f75)</li> <li>+1 SP\uff1a\u8907\u96dc\u7684\u53bb\u91cdLogic</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-047_LeaveChatroomUseCase/","title":"TDD-047: LeaveChatroomUseCase","text":""},{"location":"12_Tickets/05_usecase/TDD-047_LeaveChatroomUseCase/#ticket-ticket-information","title":"Ticket \u8cc7\u8a0a / Ticket Information","text":"\u6b04\u4f4d \u503c Ticket ID TDD-047 Jira Key FOOTBALL-9195 \u6a19\u984c \u5be6\u4f5c LeaveChatroomUseCase \u985e\u578b UseCase \u512a\u5148\u7d1a P0 \u6240\u5c6c Feature LiveChat \u4f9d\u8cf4 Ticket TDD-031 Story Point 5 \u4f30\u6642\uff08Senior iOS Engineer + AI \u8f14\u52a9\uff09 \u6a19\u6e96\uff1a2 \u5929\u6700\u56b4\u53b2\uff1a1 \u5929 \u958b\u767c\u65e5\u671f / Development Date 2025-12-15 (\u9031\u4e00)"},{"location":"12_Tickets/05_usecase/TDD-047_LeaveChatroomUseCase/#description","title":"\u63cf\u8ff0 / Description","text":"<p>\u5be6\u4f5c LeaveChatroomUseCase\u3002 / Implement LeaveChatroomUseCase\u3002</p>"},{"location":"12_Tickets/05_usecase/TDD-047_LeaveChatroomUseCase/#requirements","title":"\u9700\u6c42 / Requirements","text":"<ol> <li>\u5be6\u4f5c <code>LeaveChatroomUseCase</code> struct / Implement <code>LeaveChatroomUseCase</code> struct</li> <li>\u5b9a\u7fa9 Input/Output Model / Define Input/Output Model</li> <li>\u6574\u5408 <code>LiveChatRepository</code> \u547c\u53eb / Integrate <code>LiveChatRepository</code> call</li> <li>\u5be6\u4f5c\u6e05\u9664\u5feb\u53d6\u8a0a\u606f\u7684\u908f\u8f2f / Implement clear cached messages logic</li> <li>\u5be6\u4f5c\u9ed1\u540d\u55ae\u6aa2\u67e5\u8207\u6e05\u7406\u908f\u8f2f\uff084 \u5c0f\u6642\u81ea\u52d5\u6e05\u7406\uff09 / Implement blacklist check and cleanup logic (auto cleanup after 4 hours)</li> <li>\u5be6\u4f5c Error Handling / Implement Error Handling</li> <li>\u6a94\u6848\u7d50\u69cb\uff1a<code>Sources/LiveChat/UseCases/LeaveChatroomUseCase.swift</code> / File structure: <code>Sources/LiveChat/UseCases/LeaveChatroomUseCase.swift</code></li> </ol>"},{"location":"12_Tickets/05_usecase/TDD-047_LeaveChatroomUseCase/#implementation-guidelines","title":"\u5be6\u4f5c\u898f\u7bc4 / Implementation Guidelines","text":""},{"location":"12_Tickets/05_usecase/TDD-047_LeaveChatroomUseCase/#code-example","title":"\u7a0b\u5f0f\u78bc\u7bc4\u4f8b / Code Example","text":"<pre><code>import Foundation\n\npublic struct LeaveChatroomUseCase {\n    private let repository: LiveChatRepository\n\n    public init(repository: LiveChatRepository) {\n        self.repository = repository\n    }\n\n    public struct Input: Equatable, Sendable {\n        public let chatroomId: String\n\n        public init(chatroomId: String) {\n            self.chatroomId = chatroomId\n        }\n    }\n\n    public struct Output: Equatable, Sendable {\n        public init() {}\n    }\n\n    public func execute(input: Input) async throws -&gt; Output {\n        // 1. \u53d6\u6d88\u8a02\u95b1 WebSocket\n        try await repository.unsubscribeWebSocket()\n\n        // 2. \u96e2\u958b\u804a\u5929\u5ba4\n        try await repository.leaveChatroom(chatroomId: input.chatroomId)\n\n        // 3. \u6e05\u9664\u5feb\u53d6\u8a0a\u606f\n        repository.clearCachedMessages(chatroomId: input.chatroomId)\n\n        // 4. \u6aa2\u67e5\u4e26\u6e05\u7406\u9ed1\u540d\u55ae\uff084 \u5c0f\u6642\u81ea\u52d5\u6e05\u7406\uff09\n        try await repository.checkAndCleanBlacklist()\n\n        return Output()\n    }\n}\n</code></pre>"},{"location":"12_Tickets/05_usecase/TDD-047_LeaveChatroomUseCase/#naming-conventions","title":"\u547d\u540d\u898f\u7bc4 / Naming Conventions","text":"<ul> <li>UseCase \u4f7f\u7528 <code>struct</code>\uff0c\u63d0\u4f9b <code>execute(input:)</code> \u65b9\u6cd5 / UseCase uses <code>struct</code>, provides <code>execute(input:)</code> method</li> <li>Input/Output \u4f7f\u7528 nested <code>struct</code>\uff0c\u5be6\u4f5c <code>Equatable</code>\u3001<code>Sendable</code> / Input/Output use nested <code>struct</code>, implement <code>Equatable</code>, <code>Sendable</code></li> <li>\u4f7f\u7528 <code>LiveChat.XXX</code> \u547d\u540d\u7a7a\u9593 / Use <code>LiveChat.XXX</code> namespace</li> <li>\u4f7f\u7528 <code>public</code> \u4fee\u98fe\u7b26 / Use <code>public</code> modifier</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-047_LeaveChatroomUseCase/#acceptance-criteria","title":"\u9a57\u6536\u689d\u4ef6 / Acceptance Criteria","text":"<ul> <li>[ ] <code>LeaveChatroomUseCase</code> \u5be6\u4f5c\u5b8c\u6210 / <code>LeaveChatroomUseCase</code> implementation complete</li> <li>[ ] Input/Output Model \u5b9a\u7fa9\u5b8c\u6210 / Input/Output Model definition complete</li> <li>[ ] \u6e05\u9664\u5feb\u53d6\u908f\u8f2f\u5be6\u4f5c\u5b8c\u6210 / Clear cache logic implementation complete</li> <li>[ ] \u9ed1\u540d\u55ae\u6e05\u7406\u908f\u8f2f\u5be6\u4f5c\u5b8c\u6210 / Blacklist cleanup logic implementation complete</li> <li>[ ] UseCase \u5546\u696d\u908f\u8f2f\u5be6\u4f5c\u5b8c\u6210 / UseCase business logic implementation complete</li> <li>[ ] \u6240\u6709 Test Scenarios \u901a\u904e\uff08Basic / Branch\uff09 / All Test Scenarios passed (Basic / Branch)</li> <li>[ ] \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c / File structure matches reference code style</li> <li>[ ] Unit Test \u8986\u84cb\u7387 \u2265 90% / Unit Test Coverage \u2265 90%</li> <li>[ ] Integration Test \u901a\u904e / Integration Test Passed</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-047_LeaveChatroomUseCase/#related-documents","title":"\u76f8\u95dc\u6587\u4ef6 / Related Documents","text":"<ul> <li>UseCase \u5b9a\u7fa9\uff1a<code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code></li> <li>Input/Output Model\uff1a<code>output/LiveChat&amp;PrematchComment/07_UseCase Input &amp; Output Model/01_usecase_input_output.md</code></li> <li>Test Scenarios\uff1a<code>output/LiveChat&amp;PrematchComment/10_Test Scenarios/01_test_scenarios.md</code></li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-047_LeaveChatroomUseCase_en/","title":"TDD-047: LeaveChatroomUseCase","text":""},{"location":"12_Tickets/05_usecase/TDD-047_LeaveChatroomUseCase_en/#ticket-information","title":"Ticket Information","text":"<p>|------|-----| |  | Ticket ID | TDD-047 | | Jira Key | FOOTBALL-9195 |  | |  | Implement LeaveChatroomUseCase |  | |  | Type | UseCase |  | |  | P0 |  | |  | LiveChat |  | |  | TDD-031 |  | |  | Story Point | 5 |  | |  | Standard\uff1a2 daysMost Stringent\uff1a1 days |  |</p>"},{"location":"12_Tickets/05_usecase/TDD-047_LeaveChatroomUseCase_en/#description","title":"Description","text":"<p>Implement LeaveChatroomUseCase\u3002</p>"},{"location":"12_Tickets/05_usecase/TDD-047_LeaveChatroomUseCase_en/#requirements","title":"Requirements","text":"<ol> <li>Implement UseCase Business Logic</li> <li>Integrate LiveChatRepository Call</li> <li>Implement Input/Output Model Validation</li> <li>Implement Error Handling</li> <li>Implement\u6e05\u9664\u5feb\u53d6\u8a0a\u606f\u7684Logic</li> <li>Implement\u9ed1\u540d\u55ae\u6aa2\u67e5\u8207\u6e05\u7406Logic(4 \u5c0f\u6642\u81ea\u52d5\u6e05\u7406)</li> </ol>"},{"location":"12_Tickets/05_usecase/TDD-047_LeaveChatroomUseCase_en/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] UseCase Business Logic Implementation Complete</li> <li>[ ] \u6e05\u9664\u5feb\u53d6LogicImplementation Complete</li> <li>[ ] \u9ed1\u540d\u55ae\u6e05\u7406LogicImplementation Complete</li> <li>[ ] All branches tested</li> <li>[ ] Unit Test Coverage \u2265 90%</li> <li>[ ] Integration Test Passed</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-047_LeaveChatroomUseCase_en/#related-documents","title":"Related Documents","text":"<ul> <li>UseCase Definition: <code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code></li> <li>Input/Output Model: <code>output/LiveChat&amp;PrematchComment/07_UseCase Input &amp; Output Model/01_usecase_input_output.md</code></li> <li>Test Scenarios: <code>output/LiveChat&amp;PrematchComment/10_Test Scenarios/01_test_scenarios.md</code></li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-048_BlockUserUseCase/","title":"TDD-048: BlockUserUseCase","text":""},{"location":"12_Tickets/05_usecase/TDD-048_BlockUserUseCase/#ticket-ticket-information","title":"Ticket \u8cc7\u8a0a / Ticket Information","text":"\u6b04\u4f4d \u503c Ticket ID TDD-048 Jira Key FOOTBALL-9196 \u6a19\u984c \u5be6\u4f5c BlockUserUseCase \u985e\u578b UseCase \u512a\u5148\u7d1a P1 \u6240\u5c6c Feature LiveChat \u4f9d\u8cf4 Ticket TDD-031 Story Point 3 \u4f30\u6642\uff08Senior iOS Engineer + AI \u8f14\u52a9\uff09 \u6a19\u6e96\uff1a1 \u5929\u6700\u56b4\u53b2\uff1a1 \u5929 \u958b\u767c\u65e5\u671f / Development Date 2025-12-15 (\u9031\u4e00)"},{"location":"12_Tickets/05_usecase/TDD-048_BlockUserUseCase/#description","title":"\u63cf\u8ff0 / Description","text":"<p>\u5be6\u4f5c BlockUserUseCase\u3002 / Implement BlockUserUseCase\u3002</p>"},{"location":"12_Tickets/05_usecase/TDD-048_BlockUserUseCase/#requirements","title":"\u9700\u6c42 / Requirements","text":"<ol> <li>\u5be6\u4f5c <code>BlockUserUseCase</code> struct / Implement <code>BlockUserUseCase</code> struct</li> <li>\u5b9a\u7fa9 Input/Output Model / Define Input/Output Model</li> <li>\u6574\u5408 <code>LiveChatRepository</code> \u547c\u53eb / Integrate <code>LiveChatRepository</code> call</li> <li>\u5be6\u4f5c\u5c07\u7528\u6236\u52a0\u5165\u9ed1\u540d\u55ae DB \u7684\u908f\u8f2f / Implement add user to blacklist DB logic</li> <li>\u5be6\u4f5c WebSocket \u91cd\u9023\u5f8c\u540c\u6b65 blocked user \u6e05\u55ae\u7684\u908f\u8f2f / Implement WebSocket reconnect sync blocked user list logic</li> <li>\u5be6\u4f5c Error Handling / Implement Error Handling</li> <li>\u6a94\u6848\u7d50\u69cb\uff1a<code>Sources/LiveChat/UseCases/BlockUserUseCase.swift</code> / File structure: <code>Sources/LiveChat/UseCases/BlockUserUseCase.swift</code></li> </ol>"},{"location":"12_Tickets/05_usecase/TDD-048_BlockUserUseCase/#implementation-guidelines","title":"\u5be6\u4f5c\u898f\u7bc4 / Implementation Guidelines","text":""},{"location":"12_Tickets/05_usecase/TDD-048_BlockUserUseCase/#code-example","title":"\u7a0b\u5f0f\u78bc\u7bc4\u4f8b / Code Example","text":"<pre><code>import Foundation\n\npublic struct BlockUserUseCase {\n    private let repository: LiveChatRepository\n\n    public init(repository: LiveChatRepository) {\n        self.repository = repository\n    }\n\n    public struct Input: Equatable, Sendable {\n        public let userId: String\n        public let eventId: String\n        public let timestamp: Date\n\n        public init(userId: String, eventId: String, timestamp: Date) {\n            self.userId = userId\n            self.eventId = eventId\n            self.timestamp = timestamp\n        }\n    }\n\n    public struct Output: Equatable, Sendable {\n        public init() {}\n    }\n\n    public func execute(input: Input) async throws -&gt; Output {\n        // 1. \u5c07\u7528\u6236\u52a0\u5165\u9ed1\u540d\u55ae DB\n        try await repository.addToBlacklist(\n            userId: input.userId,\n            eventId: input.eventId,\n            timestamp: input.timestamp\n        )\n\n        // 2. WebSocket \u91cd\u9023\u5f8c\u540c\u6b65 blocked user \u6e05\u55ae\n        // (\u6b64\u908f\u8f2f\u5728 Repository \u5c64\u8655\u7406)\n\n        return Output()\n    }\n}\n</code></pre>"},{"location":"12_Tickets/05_usecase/TDD-048_BlockUserUseCase/#naming-conventions","title":"\u547d\u540d\u898f\u7bc4 / Naming Conventions","text":"<ul> <li>UseCase \u4f7f\u7528 <code>struct</code>\uff0c\u63d0\u4f9b <code>execute(input:)</code> \u65b9\u6cd5 / UseCase uses <code>struct</code>, provides <code>execute(input:)</code> method</li> <li>Input/Output \u4f7f\u7528 nested <code>struct</code>\uff0c\u5be6\u4f5c <code>Equatable</code>\u3001<code>Sendable</code> / Input/Output use nested <code>struct</code>, implement <code>Equatable</code>, <code>Sendable</code></li> <li>\u4f7f\u7528 <code>LiveChat.XXX</code> \u547d\u540d\u7a7a\u9593 / Use <code>LiveChat.XXX</code> namespace</li> <li>\u4f7f\u7528 <code>public</code> \u4fee\u98fe\u7b26 / Use <code>public</code> modifier</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-048_BlockUserUseCase/#acceptance-criteria","title":"\u9a57\u6536\u689d\u4ef6 / Acceptance Criteria","text":"<ul> <li>[ ] <code>BlockUserUseCase</code> \u5be6\u4f5c\u5b8c\u6210 / <code>BlockUserUseCase</code> implementation complete</li> <li>[ ] Input/Output Model \u5b9a\u7fa9\u5b8c\u6210 / Input/Output Model definition complete</li> <li>[ ] \u9ed1\u540d\u55ae\u7ba1\u7406\u908f\u8f2f\u5be6\u4f5c\u5b8c\u6210 / Blacklist management logic implementation complete</li> <li>[ ] UseCase \u5546\u696d\u908f\u8f2f\u5be6\u4f5c\u5b8c\u6210 / UseCase business logic implementation complete</li> <li>[ ] \u6240\u6709 Test Scenarios \u901a\u904e\uff08Basic / Branch\uff09 / All Test Scenarios passed (Basic / Branch)</li> <li>[ ] \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c / File structure matches reference code style</li> <li>[ ] Unit Test \u8986\u84cb\u7387 \u2265 90% / Unit Test Coverage \u2265 90%</li> <li>[ ] Integration Test \u901a\u904e / Integration Test Passed</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-048_BlockUserUseCase/#related-documents","title":"\u76f8\u95dc\u6587\u4ef6 / Related Documents","text":"<ul> <li>UseCase \u5b9a\u7fa9\uff1a<code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code></li> <li>Input/Output Model\uff1a<code>output/LiveChat&amp;PrematchComment/07_UseCase Input &amp; Output Model/01_usecase_input_output.md</code></li> <li>Test Scenarios\uff1a<code>output/LiveChat&amp;PrematchComment/10_Test Scenarios/01_test_scenarios.md</code></li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-048_BlockUserUseCase_en/","title":"TDD-048: BlockUserUseCase","text":""},{"location":"12_Tickets/05_usecase/TDD-048_BlockUserUseCase_en/#ticket-information","title":"Ticket Information","text":"<p>|------|-----| |  | Ticket ID | TDD-048 | | Jira Key | FOOTBALL-9196 |  | |  | Implement BlockUserUseCase |  | |  | Type | UseCase |  | |  | P1 |  | |  | LiveChat |  | |  | TDD-031 |  | |  | Story Point | 3 |  | |  | Standard\uff1a1 daysMost Stringent\uff1a1 days |  |</p>"},{"location":"12_Tickets/05_usecase/TDD-048_BlockUserUseCase_en/#description","title":"Description","text":"<p>Implement BlockUserUseCase\u3002</p>"},{"location":"12_Tickets/05_usecase/TDD-048_BlockUserUseCase_en/#requirements","title":"Requirements","text":"<ol> <li>Implement UseCase Business Logic</li> <li>Integrate LiveChatRepository Call</li> <li>Implement Input/Output Model Validation</li> <li>Implement Error Handling</li> <li>Implement\u5c07\u7528\u6236\u52a0\u5165\u9ed1\u540d\u55ae DB \u7684Logic</li> <li>Implement WebSocket \u91cd\u9023\u5f8c\u540c\u6b65 blocked user \u6e05\u55ae\u7684Logic</li> </ol>"},{"location":"12_Tickets/05_usecase/TDD-048_BlockUserUseCase_en/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] UseCase Business Logic Implementation Complete</li> <li>[ ] \u9ed1\u540d\u55ae\u7ba1\u7406LogicImplementation Complete</li> <li>[ ] All branches tested</li> <li>[ ] Unit Test Coverage \u2265 90%</li> <li>[ ] Integration Test Passed</li> </ul>"},{"location":"12_Tickets/05_usecase/TDD-048_BlockUserUseCase_en/#related-documents","title":"Related Documents","text":"<ul> <li>UseCase Definition: <code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code></li> <li>Input/Output Model: <code>output/LiveChat&amp;PrematchComment/07_UseCase Input &amp; Output Model/01_usecase_input_output.md</code></li> <li>Test Scenarios: <code>output/LiveChat&amp;PrematchComment/10_Test Scenarios/01_test_scenarios.md</code></li> </ul>"},{"location":"12_Tickets/06_feature/TDD-050_PrematchCommentFeature/","title":"TDD-050: PrematchCommentFeature","text":""},{"location":"12_Tickets/06_feature/TDD-050_PrematchCommentFeature/#ticket-ticket-information","title":"Ticket \u8cc7\u8a0a / Ticket Information","text":"\u6b04\u4f4d \u503c Ticket ID TDD-050 Jira Key FOOTBALL-9198 \u6a19\u984c \u5be6\u4f5c PrematchCommentFeature\uff08TCA Reducer\uff09 \u985e\u578b Feature \u512a\u5148\u7d1a P0 \u6240\u5c6c Feature PrematchComment \u4f9d\u8cf4 Ticket TDD-040, TDD-041, TDD-042, TDD-043, TDD-044 Story Point 8 \u4f30\u6642\uff08Senior iOS Engineer + AI \u8f14\u52a9\uff09 \u6a19\u6e96\uff1a3 \u5929\u6700\u56b4\u53b2\uff1a2 \u5929 \u958b\u767c\u65e5\u671f / Development Date 2025-12-16 (\u9031\u4e8c)"},{"location":"12_Tickets/06_feature/TDD-050_PrematchCommentFeature/#description","title":"\u63cf\u8ff0 / Description","text":"<p>\u5be6\u4f5c PrematchCommentFeature\uff08TCA Reducer\uff09\u3002 / Implement PrematchCommentFeature(TCA Reducer)\u3002</p>"},{"location":"12_Tickets/06_feature/TDD-050_PrematchCommentFeature/#requirements","title":"\u9700\u6c42 / Requirements","text":"<ol> <li>\u5b9a\u7fa9 <code>PrematchCommentFeature</code>\uff08\u4f7f\u7528 TCA <code>@Reducer</code>\uff09 / Define <code>PrematchCommentFeature</code> (using TCA <code>@Reducer</code>)</li> <li>\u5b9a\u7fa9 <code>State</code>\uff08\u4f7f\u7528 <code>@ObservableState</code>\uff09 / Define <code>State</code> (using <code>@ObservableState</code>)</li> <li>\u5b9a\u7fa9 <code>Action</code>\uff08\u4f7f\u7528 <code>@CasePathable</code> enum\uff09 / Define <code>Action</code> (using <code>@CasePathable</code> enum)</li> <li>\u5be6\u4f5c Reducer \u908f\u8f2f\uff08\u4f7f\u7528 <code>Reduce</code>\uff09 / Implement Reducer Logic (using <code>Reduce</code>)</li> <li>\u6574\u5408\u6240\u6709 UseCase \u547c\u53eb / Integrate all UseCase calls</li> <li>\u5be6\u4f5c State \u66f4\u65b0\u908f\u8f2f / Implement State update logic</li> <li>\u5be6\u4f5c Event Status \u901a\u77e5\u8655\u7406 / Implement Event Status notification handling</li> <li>\u6a94\u6848\u7d50\u69cb\uff1a<code>Sources/PrematchComment/Features/PrematchComment/PrematchCommentFeature.swift</code> / File structure: <code>Sources/PrematchComment/Features/PrematchComment/PrematchCommentFeature.swift</code></li> </ol>"},{"location":"12_Tickets/06_feature/TDD-050_PrematchCommentFeature/#implementation-guidelines","title":"\u5be6\u4f5c\u898f\u7bc4 / Implementation Guidelines","text":""},{"location":"12_Tickets/06_feature/TDD-050_PrematchCommentFeature/#file-structure","title":"\u6a94\u6848\u7d50\u69cb / File Structure","text":"<pre><code>Sources/PrematchComment/Features/PrematchComment/\n  \u2514\u2500\u2500 PrematchCommentFeature.swift\n</code></pre>"},{"location":"12_Tickets/06_feature/TDD-050_PrematchCommentFeature/#code-example","title":"\u7a0b\u5f0f\u78bc\u7bc4\u4f8b / Code Example","text":"<pre><code>import ComposableArchitecture\nimport Foundation\n\nextension PrematchComment {\n    @Reducer\n    struct PrematchCommentFeature {\n        @Dependency(\\.prematchCommentRepository) var prematchCommentRepository\n        @Dependency(\\.reloadCommentListUseCase) var reloadCommentListUseCase\n        @Dependency(\\.publishCommentUseCase) var publishCommentUseCase\n        @Dependency(\\.toggleLikeUseCase) var toggleLikeUseCase\n        @Dependency(\\.loadRepliesUseCase) var loadRepliesUseCase\n        @Dependency(\\.navigateToProfileUseCase) var navigateToProfileUseCase\n\n        var body: some ReducerOf&lt;Self&gt; {\n            Reduce { state, action in\n                switch action {\n                case .loadCommentList:\n                    return loadCommentList(state: &amp;state)\n\n                case .publishComment(let content):\n                    return publishComment(content: content, state: &amp;state)\n\n                case .toggleLike(let commentId):\n                    return toggleLike(commentId: commentId, state: &amp;state)\n\n                case .loadReplies(let commentId):\n                    return loadReplies(commentId: commentId, state: &amp;state)\n\n                case .navigateToProfile(let userId):\n                    return navigateToProfile(userId: userId)\n\n                // MARK: - Sub-feature Actions\n                case .commentList, .commentMeta:\n                    return .none\n                }\n            }\n        }\n\n        private func loadCommentList(state: inout State) -&gt; Effect&lt;Action&gt; {\n            state.isLoading = true\n            return .run { [refId = state.refId, mode = state.sortMode] send in\n                do {\n                    let (comments, pagingInfo) = try await reloadCommentListUseCase.execute(\n                        refId: refId,\n                        mode: mode\n                    )\n                    await send(.commentList(.loaded(comments, pagingInfo)))\n                } catch {\n                    await send(.commentList(.loadFailed(error.localizedDescription)))\n                }\n            }\n        }\n\n        // \u5176\u4ed6\u65b9\u6cd5...\n    }\n}\n\nextension PrematchComment.PrematchCommentFeature {\n    @ObservableState\n    struct State: Equatable {\n        var refId: String\n        var sortMode: PrematchComment.SortMode\n        var isLoading = false\n        var errorMessage: String?\n\n        var commentMeta: CommentMetaFeature.State\n        var commentList: CommentListFeature.State\n    }\n\n    @CasePathable\n    enum Action: Equatable {\n        case loadCommentList\n        case publishComment(String)\n        case toggleLike(String)\n        case loadReplies(String)\n        case navigateToProfile(String)\n\n        // MARK: - Sub-feature Actions\n        case commentMeta(CommentMetaFeature.Action)\n        case commentList(CommentListFeature.Action)\n    }\n}\n</code></pre>"},{"location":"12_Tickets/06_feature/TDD-050_PrematchCommentFeature/#naming-conventions","title":"\u547d\u540d\u898f\u7bc4 / Naming Conventions","text":"<ul> <li>Feature \u4f7f\u7528 <code>@Reducer</code> macro\uff0c\u653e\u5728 <code>PrematchComment</code> namespace extension \u5167 / Feature uses <code>@Reducer</code> macro, placed within <code>PrematchComment</code> namespace extension</li> <li>State \u4f7f\u7528 <code>@ObservableState</code> struct / State uses <code>@ObservableState</code> struct</li> <li>Action \u4f7f\u7528 <code>@CasePathable</code> enum / Action uses <code>@CasePathable</code> enum</li> <li>\u4f7f\u7528 <code>@Dependency</code> \u6ce8\u5165\u4f9d\u8cf4 / Use <code>@Dependency</code> to inject dependencies</li> <li>\u4f7f\u7528 <code>Reduce</code> \u5be6\u4f5c reducer \u908f\u8f2f / Use <code>Reduce</code> to implement reducer logic</li> <li>\u4f7f\u7528 <code>Effect</code> \u8655\u7406\u7570\u6b65\u64cd\u4f5c / Use <code>Effect</code> to handle async operations</li> <li>\u4f7f\u7528 MARK \u8a3b\u89e3\u7d44\u7e54\u4ee3\u78bc / Use MARK comments to organize code</li> </ul>"},{"location":"12_Tickets/06_feature/TDD-050_PrematchCommentFeature/#acceptance-criteria","title":"\u9a57\u6536\u689d\u4ef6 / Acceptance Criteria","text":"<ul> <li>[ ] <code>PrematchCommentFeature</code> \u5b9a\u7fa9\u5b8c\u6210\uff0c\u4f7f\u7528 <code>@Reducer</code> / <code>PrematchCommentFeature</code> definition complete, using <code>@Reducer</code></li> <li>[ ] <code>State</code> \u5b9a\u7fa9\u5b8c\u6210\uff0c\u4f7f\u7528 <code>@ObservableState</code> / <code>State</code> definition complete, using <code>@ObservableState</code></li> <li>[ ] <code>Action</code> \u5b9a\u7fa9\u5b8c\u6210\uff0c\u4f7f\u7528 <code>@CasePathable</code> / <code>Action</code> definition complete, using <code>@CasePathable</code></li> <li>[ ] Reducer \u908f\u8f2f\u5be6\u4f5c\u5b8c\u6210\uff0c\u4f7f\u7528 <code>Reduce</code> / Reducer logic implementation complete, using <code>Reduce</code></li> <li>[ ] \u6240\u6709 Action \u2192 UseCase \u6620\u5c04\u5b8c\u6210 / All Action \u2192 UseCase mapping complete</li> <li>[ ] \u4f7f\u7528 <code>@Dependency</code> \u6ce8\u5165\u4f9d\u8cf4 / Use <code>@Dependency</code> to inject dependencies</li> <li>[ ] Event Status \u901a\u77e5\u8655\u7406\u5be6\u4f5c\u5b8c\u6210 / Event Status notification handling implementation complete</li> <li>[ ] \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c / File structure matches reference code style</li> <li>[ ] Unit Test \u8986\u84cb\u7387 \u2265 80% / Unit Test Coverage \u2265 80%</li> </ul>"},{"location":"12_Tickets/06_feature/TDD-050_PrematchCommentFeature/#related-documents","title":"\u76f8\u95dc\u6587\u4ef6 / Related Documents","text":"<ul> <li>Feature State &amp; Action\uff1a<code>output/LiveChat&amp;PrematchComment/06_Feature State &amp; Action (TCA)/01_feature_state_action.md</code></li> <li>Module Responsibility\uff1a<code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code></li> </ul>"},{"location":"12_Tickets/06_feature/TDD-050_PrematchCommentFeature/#_1","title":"\u8abf\u6574\u56e0\u5b50\u8aaa\u660e / \u8abf\u6574\u56e0\u5b50\u8aaa\u660e","text":"<ul> <li>\u57fa\u790e\u4f30\u6642\uff1a\u4e2d\u7b49 Feature = 3 SP</li> <li>+2 SP\uff1a\u9700\u8981\u8655\u7406\u8907\u96dc\u7684\u72c0\u614b\u540c\u6b65\uff08Event Status \u901a\u77e5\uff09 / - +2 SP\uff1a\u9700\u8981\u8655\u7406\u8907\u96dc\u7684State\u540c\u6b65(Event Status \u901a\u77e5)</li> <li>+2 SP\uff1a\u9700\u8981\u8655\u7406\u591a\u7a2e UI \u72c0\u614b\uff08Loading\u3001Error\u3001Success\uff09 / - +2 SP\uff1a\u9700\u8981\u8655\u7406\u591a\u7a2e UI State(Loading, Error, Success)</li> <li>+1 SP\uff1a\u6574\u5408\u591a\u500b UseCase\uff085 \u500b\uff09 / - +1 SP\uff1a\u6574\u5408\u591a\u500b UseCase(5 \u500b)</li> </ul>"},{"location":"12_Tickets/06_feature/TDD-050_PrematchCommentFeature_en/","title":"TDD-050: PrematchCommentFeature","text":""},{"location":"12_Tickets/06_feature/TDD-050_PrematchCommentFeature_en/#ticket-information","title":"Ticket Information","text":"<p>|------|-----| |  | Ticket ID | TDD-050 | | Jira Key | FOOTBALL-9198 |  | |  | Implement PrematchCommentFeature\uff08TCA Reducer\uff09 |  | |  | Type | Feature |  | |  | P0 |  | |  | PrematchComment |  | |  | TDD-040, TDD-041, TDD-042, TDD-043, TDD-044 |  | |  | Story Point | 8 |  | |  | Standard\uff1a3 daysMost Stringent\uff1a2 days |  |</p>"},{"location":"12_Tickets/06_feature/TDD-050_PrematchCommentFeature_en/#description","title":"Description","text":"<p>Implement PrematchCommentFeature(TCA Reducer)\u3002</p>"},{"location":"12_Tickets/06_feature/TDD-050_PrematchCommentFeature_en/#requirements","title":"Requirements","text":"<ol> <li>Define State Structure</li> <li>Define Action \u5217\u8209</li> <li>Implement Reducer Logic</li> <li>Integrateall UseCase Call</li> <li>Implement State UpdateLogic</li> <li>Implement Event Status \u901a\u77e5Handling</li> </ol>"},{"location":"12_Tickets/06_feature/TDD-050_PrematchCommentFeature_en/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] State and Action Definition Complete</li> <li>[ ] Reducer LogicImplementation Complete</li> <li>[ ] all Action \u2192 UseCase \u6620\u5c04Complete</li> <li>[ ] Event Status \u901a\u77e5HandlingImplementation Complete</li> <li>[ ] Unit Test Coverage \u2265 80%</li> </ul>"},{"location":"12_Tickets/06_feature/TDD-050_PrematchCommentFeature_en/#related-documents","title":"Related Documents","text":"<ul> <li>Feature State &amp; Action\uff1a<code>output/LiveChat&amp;PrematchComment/06_Feature State &amp; Action (TCA)/01_feature_state_action.md</code></li> <li>Module Responsibility\uff1a<code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code></li> </ul>"},{"location":"12_Tickets/06_feature/TDD-050_PrematchCommentFeature_en/#_1","title":"\u8abf\u6574\u56e0\u5b50\u8aaa\u660e","text":"<ul> <li>+2 SP\uff1a\u9700\u8981\u8655\u7406\u8907\u96dc\u7684State\u540c\u6b65(Event Status \u901a\u77e5)</li> <li>+2 SP\uff1a\u9700\u8981\u8655\u7406\u591a\u7a2e UI State(Loading, Error, Success)</li> <li>+1 SP\uff1a\u6574\u5408\u591a\u500b UseCase(5 \u500b)</li> </ul>"},{"location":"12_Tickets/06_feature/TDD-051_LiveChatFeature/","title":"TDD-051: LiveChatFeature","text":""},{"location":"12_Tickets/06_feature/TDD-051_LiveChatFeature/#ticket-ticket-information","title":"Ticket \u8cc7\u8a0a / Ticket Information","text":"\u6b04\u4f4d \u503c Ticket ID TDD-051 Jira Key FOOTBALL-9199 \u6a19\u984c \u5be6\u4f5c LiveChatFeature\uff08TCA Reducer\uff09 \u985e\u578b Feature \u512a\u5148\u7d1a P0 \u6240\u5c6c Feature LiveChat \u4f9d\u8cf4 Ticket TDD-045, TDD-046, TDD-047, TDD-048, TDD-044 Story Point 13 \u4f30\u6642\uff08Senior iOS Engineer + AI \u8f14\u52a9\uff09 \u6a19\u6e96\uff1a5 \u5929\u6700\u56b4\u53b2\uff1a4 \u5929 \u958b\u767c\u65e5\u671f / Development Date 2025-12-16 (\u9031\u4e8c)"},{"location":"12_Tickets/06_feature/TDD-051_LiveChatFeature/#description","title":"\u63cf\u8ff0 / Description","text":"<p>\u5be6\u4f5c LiveChatFeature\uff08TCA Reducer\uff09\u3002 / Implement LiveChatFeature(TCA Reducer)\u3002</p>"},{"location":"12_Tickets/06_feature/TDD-051_LiveChatFeature/#requirements","title":"\u9700\u6c42 / Requirements","text":"<ol> <li>\u5b9a\u7fa9 <code>LiveChatFeature</code>\uff08\u4f7f\u7528 TCA <code>@Reducer</code>\uff09 / Define <code>LiveChatFeature</code> (using TCA <code>@Reducer</code>)</li> <li>\u5b9a\u7fa9 <code>State</code>\uff08\u4f7f\u7528 <code>@ObservableState</code>\uff09 / Define <code>State</code> (using <code>@ObservableState</code>)</li> <li>\u5b9a\u7fa9 <code>Action</code>\uff08\u4f7f\u7528 <code>@CasePathable</code> enum\uff09 / Define <code>Action</code> (using <code>@CasePathable</code> enum)</li> <li>\u5be6\u4f5c Reducer \u908f\u8f2f\uff08\u4f7f\u7528 <code>Reduce</code>\uff09 / Implement Reducer Logic (using <code>Reduce</code>)</li> <li>\u6574\u5408\u6240\u6709 UseCase \u547c\u53eb / Integrate all UseCase calls</li> <li>\u5be6\u4f5c WebSocket \u9023\u7dda\u72c0\u614b\u7ba1\u7406 / Implement WebSocket connection state management</li> <li>\u5be6\u4f5c WebSocket \u8a0a\u606f\u8655\u7406 / Implement WebSocket message handling</li> <li>\u6a94\u6848\u7d50\u69cb\uff1a<code>Sources/LiveChat/Features/LiveChat/LiveChatFeature.swift</code> / File structure: <code>Sources/LiveChat/Features/LiveChat/LiveChatFeature.swift</code></li> </ol>"},{"location":"12_Tickets/06_feature/TDD-051_LiveChatFeature/#implementation-guidelines","title":"\u5be6\u4f5c\u898f\u7bc4 / Implementation Guidelines","text":""},{"location":"12_Tickets/06_feature/TDD-051_LiveChatFeature/#file-structure","title":"\u6a94\u6848\u7d50\u69cb / File Structure","text":"<pre><code>Sources/LiveChat/Features/LiveChat/\n  \u2514\u2500\u2500 LiveChatFeature.swift\n</code></pre>"},{"location":"12_Tickets/06_feature/TDD-051_LiveChatFeature/#code-example","title":"\u7a0b\u5f0f\u78bc\u7bc4\u4f8b / Code Example","text":"<pre><code>import ComposableArchitecture\nimport Foundation\n\nextension LiveChat {\n    @Reducer\n    struct LiveChatFeature {\n        @Dependency(\\.liveChatRepository) var liveChatRepository\n        @Dependency(\\.sendChatMessageUseCase) var sendChatMessageUseCase\n        @Dependency(\\.joinChatroomUseCase) var joinChatroomUseCase\n        @Dependency(\\.leaveChatroomUseCase) var leaveChatroomUseCase\n        @Dependency(\\.blockUserUseCase) var blockUserUseCase\n        @Dependency(\\.navigateToProfileUseCase) var navigateToProfileUseCase\n\n        var body: some ReducerOf&lt;Self&gt; {\n            Reduce { state, action in\n                switch action {\n                case .joinChatroom:\n                    return joinChatroom(state: &amp;state)\n\n                case .sendMessage(let content):\n                    return sendMessage(content: content, state: &amp;state)\n\n                case .leaveChatroom:\n                    return leaveChatroom(state: &amp;state)\n\n                case .blockUser(let userId):\n                    return blockUser(userId: userId, state: &amp;state)\n\n                case .webSocketConnected:\n                    state.webSocketStatus = .connected\n                    return .none\n\n                case .webSocketDisconnected:\n                    state.webSocketStatus = .disconnected\n                    return .none\n\n                case .webSocketMessageReceived(let message):\n                    return handleWebSocketMessage(message: message, state: &amp;state)\n\n                // MARK: - Sub-feature Actions\n                case .messageList, .chatroomInfo:\n                    return .none\n                }\n            }\n        }\n\n        private func joinChatroom(state: inout State) -&gt; Effect&lt;Action&gt; {\n            state.isLoading = true\n            return .run { [refId = state.refId] send in\n                do {\n                    let chatroomInfo = try await joinChatroomUseCase.execute(\n                        input: .init(refId: refId)\n                    )\n                    await send(.chatroomInfo(.loaded(chatroomInfo)))\n                } catch {\n                    await send(.chatroomInfo(.loadFailed(error.localizedDescription)))\n                }\n            }\n        }\n\n        // \u5176\u4ed6\u65b9\u6cd5...\n    }\n}\n\nextension LiveChat.LiveChatFeature {\n    @ObservableState\n    struct State: Equatable {\n        var refId: String\n        var isLoading = false\n        var errorMessage: String?\n        var webSocketStatus: WebSocketStatus = .disconnected\n\n        enum WebSocketStatus: Equatable {\n            case disconnected\n            case connecting\n            case connected\n        }\n\n        var chatroomInfo: ChatroomInfoFeature.State\n        var messageList: MessageListFeature.State\n    }\n\n    @CasePathable\n    enum Action: Equatable {\n        case joinChatroom\n        case sendMessage(String)\n        case leaveChatroom\n        case blockUser(String)\n        case navigateToProfile(String)\n\n        // MARK: - WebSocket Actions\n        case webSocketConnected\n        case webSocketDisconnected\n        case webSocketMessageReceived(LiveChat.Message)\n\n        // MARK: - Sub-feature Actions\n        case chatroomInfo(ChatroomInfoFeature.Action)\n        case messageList(MessageListFeature.Action)\n    }\n}\n</code></pre>"},{"location":"12_Tickets/06_feature/TDD-051_LiveChatFeature/#naming-conventions","title":"\u547d\u540d\u898f\u7bc4 / Naming Conventions","text":"<ul> <li>Feature \u4f7f\u7528 <code>@Reducer</code> macro\uff0c\u653e\u5728 <code>LiveChat</code> namespace extension \u5167 / Feature uses <code>@Reducer</code> macro, placed within <code>LiveChat</code> namespace extension</li> <li>State \u4f7f\u7528 <code>@ObservableState</code> struct / State uses <code>@ObservableState</code> struct</li> <li>Action \u4f7f\u7528 <code>@CasePathable</code> enum / Action uses <code>@CasePathable</code> enum</li> <li>\u4f7f\u7528 <code>@Dependency</code> \u6ce8\u5165\u4f9d\u8cf4 / Use <code>@Dependency</code> to inject dependencies</li> <li>\u4f7f\u7528 <code>Reduce</code> \u5be6\u4f5c reducer \u908f\u8f2f / Use <code>Reduce</code> to implement reducer logic</li> <li>\u4f7f\u7528 <code>Effect</code> \u8655\u7406\u7570\u6b65\u64cd\u4f5c / Use <code>Effect</code> to handle async operations</li> </ul>"},{"location":"12_Tickets/06_feature/TDD-051_LiveChatFeature/#acceptance-criteria","title":"\u9a57\u6536\u689d\u4ef6 / Acceptance Criteria","text":"<ul> <li>[ ] <code>LiveChatFeature</code> \u5b9a\u7fa9\u5b8c\u6210\uff0c\u4f7f\u7528 <code>@Reducer</code> / <code>LiveChatFeature</code> definition complete, using <code>@Reducer</code></li> <li>[ ] <code>State</code> \u5b9a\u7fa9\u5b8c\u6210\uff0c\u4f7f\u7528 <code>@ObservableState</code> / <code>State</code> definition complete, using <code>@ObservableState</code></li> <li>[ ] <code>Action</code> \u5b9a\u7fa9\u5b8c\u6210\uff0c\u4f7f\u7528 <code>@CasePathable</code> / <code>Action</code> definition complete, using <code>@CasePathable</code></li> <li>[ ] Reducer \u908f\u8f2f\u5be6\u4f5c\u5b8c\u6210\uff0c\u4f7f\u7528 <code>Reduce</code> / Reducer logic implementation complete, using <code>Reduce</code></li> <li>[ ] \u6240\u6709 Action \u2192 UseCase \u6620\u5c04\u5b8c\u6210 / All Action \u2192 UseCase mapping complete</li> <li>[ ] WebSocket \u9023\u7dda\u72c0\u614b\u7ba1\u7406\u5be6\u4f5c\u5b8c\u6210 / WebSocket connection state management implementation complete</li> <li>[ ] WebSocket \u8a0a\u606f\u8655\u7406\u5be6\u4f5c\u5b8c\u6210 / WebSocket message handling implementation complete</li> <li>[ ] \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c / File structure matches reference code style</li> <li>[ ] Unit Test \u8986\u84cb\u7387 \u2265 80% / Unit Test Coverage \u2265 80%</li> </ul>"},{"location":"12_Tickets/06_feature/TDD-051_LiveChatFeature/#related-documents","title":"\u76f8\u95dc\u6587\u4ef6 / Related Documents","text":"<ul> <li>Feature State &amp; Action\uff1a<code>output/LiveChat&amp;PrematchComment/06_Feature State &amp; Action (TCA)/01_feature_state_action.md</code></li> <li>Module Responsibility\uff1a<code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code></li> </ul>"},{"location":"12_Tickets/06_feature/TDD-051_LiveChatFeature/#_1","title":"\u8abf\u6574\u56e0\u5b50\u8aaa\u660e / \u8abf\u6574\u56e0\u5b50\u8aaa\u660e","text":"<ul> <li>\u57fa\u790e\u4f30\u6642\uff1a\u8907\u96dc Feature = 8 SP</li> <li>+2 SP\uff1a\u9700\u8981\u8655\u7406\u8907\u96dc\u7684\u72c0\u614b\u540c\u6b65\uff08WebSocket \u9023\u7dda\u72c0\u614b\u3001\u8a0a\u606f\u540c\u6b65\uff09 / - +2 SP\uff1a\u9700\u8981\u8655\u7406\u8907\u96dc\u7684State\u540c\u6b65(WebSocket \u9023\u7ddaState, \u8a0a\u606f\u540c\u6b65)</li> <li>+2 SP\uff1a\u9700\u8981\u8655\u7406\u591a\u7a2e UI \u72c0\u614b\uff08Loading\u3001Error\u3001Success\u3001WebSocket \u72c0\u614b\uff09 / - +2 SP\uff1a\u9700\u8981\u8655\u7406\u591a\u7a2e UI State(Loading, Error, Success, WebSocket State)</li> <li>+1 SP\uff1a\u6574\u5408\u591a\u500b UseCase\uff085 \u500b\uff09 / - +1 SP\uff1a\u6574\u5408\u591a\u500b UseCase(5 \u500b)</li> </ul>"},{"location":"12_Tickets/06_feature/TDD-051_LiveChatFeature_en/","title":"TDD-051: LiveChatFeature","text":""},{"location":"12_Tickets/06_feature/TDD-051_LiveChatFeature_en/#ticket-information","title":"Ticket Information","text":"<p>|------|-----| |  | Ticket ID | TDD-051 | | Jira Key | FOOTBALL-9199 |  | |  | Implement LiveChatFeature\uff08TCA Reducer\uff09 |  | |  | Type | Feature |  | |  | P0 |  | |  | LiveChat |  | |  | TDD-045, TDD-046, TDD-047, TDD-048, TDD-044 |  | |  | Story Point | 13 |  | |  | Standard\uff1a5 daysMost Stringent\uff1a4 days |  |</p>"},{"location":"12_Tickets/06_feature/TDD-051_LiveChatFeature_en/#description","title":"Description","text":"<p>Implement LiveChatFeature(TCA Reducer)\u3002</p>"},{"location":"12_Tickets/06_feature/TDD-051_LiveChatFeature_en/#requirements","title":"Requirements","text":"<ol> <li>Define State Structure</li> <li>Define Action \u5217\u8209</li> <li>Implement Reducer Logic</li> <li>Integrateall UseCase Call</li> <li>Implement State UpdateLogic</li> <li>Implement WebSocket \u9023\u7ddaState\u7ba1\u7406</li> <li>Implement WebSocket \u8a0a\u606fHandling</li> </ol>"},{"location":"12_Tickets/06_feature/TDD-051_LiveChatFeature_en/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] State and Action Definition Complete</li> <li>[ ] Reducer LogicImplementation Complete</li> <li>[ ] all Action \u2192 UseCase \u6620\u5c04Complete</li> <li>[ ] WebSocket \u9023\u7ddaState\u7ba1\u7406Implementation Complete</li> <li>[ ] WebSocket \u8a0a\u606fHandlingImplementation Complete</li> <li>[ ] Unit Test Coverage \u2265 80%</li> </ul>"},{"location":"12_Tickets/06_feature/TDD-051_LiveChatFeature_en/#related-documents","title":"Related Documents","text":"<ul> <li>Feature State &amp; Action\uff1a<code>output/LiveChat&amp;PrematchComment/06_Feature State &amp; Action (TCA)/01_feature_state_action.md</code></li> <li>Module Responsibility\uff1a<code>output/LiveChat&amp;PrematchComment/03_Module Responsibility/01_module_responsibility.md</code></li> </ul>"},{"location":"12_Tickets/06_feature/TDD-051_LiveChatFeature_en/#_1","title":"\u8abf\u6574\u56e0\u5b50\u8aaa\u660e","text":"<ul> <li>+2 SP\uff1a\u9700\u8981\u8655\u7406\u8907\u96dc\u7684State\u540c\u6b65(WebSocket \u9023\u7ddaState, \u8a0a\u606f\u540c\u6b65)</li> <li>+2 SP\uff1a\u9700\u8981\u8655\u7406\u591a\u7a2e UI State(Loading, Error, Success, WebSocket State)</li> <li>+1 SP\uff1a\u6574\u5408\u591a\u500b UseCase(5 \u500b)</li> </ul>"},{"location":"12_Tickets/07_view/TDD-060_PrematchCommentView/","title":"TDD-060: PrematchCommentView","text":""},{"location":"12_Tickets/07_view/TDD-060_PrematchCommentView/#ticket-ticket-information","title":"Ticket \u8cc7\u8a0a / Ticket Information","text":"\u6b04\u4f4d \u503c Ticket ID TDD-060 Jira Key FOOTBALL-9201 \u6a19\u984c \u5be6\u4f5c PrematchCommentView \u985e\u578b View \u512a\u5148\u7d1a P0 \u6240\u5c6c Feature PrematchComment \u4f9d\u8cf4 Ticket TDD-050 Story Point 13 \u4f30\u6642\uff08Senior iOS Engineer + AI \u8f14\u52a9\uff09 \u6a19\u6e96\uff1a5 \u5929\u6700\u56b4\u53b2\uff1a4 \u5929 \u958b\u767c\u65e5\u671f / Development Date 2025-12-17 (\u9031\u4e09)"},{"location":"12_Tickets/07_view/TDD-060_PrematchCommentView/#description","title":"\u63cf\u8ff0 / Description","text":"<p>\u5be6\u4f5c PrematchCommentView\u3002 / Implement PrematchCommentView\u3002</p>"},{"location":"12_Tickets/07_view/TDD-060_PrematchCommentView/#requirements","title":"\u9700\u6c42 / Requirements","text":"<ol> <li>\u5be6\u4f5c <code>PrematchCommentView</code>\uff08SwiftUI\uff09 / Implement <code>PrematchCommentView</code> (SwiftUI)</li> <li>\u6574\u5408 <code>PrematchCommentFeature</code>\uff08\u4f7f\u7528 TCA <code>Store</code>\uff09 / Integrate <code>PrematchCommentFeature</code> (using TCA <code>Store</code>)</li> <li>\u5be6\u4f5c UI \u72c0\u614b\u7d81\u5b9a\uff08\u4f7f\u7528 <code>@Bindable</code>\uff09 / Implement UI state binding (using <code>@Bindable</code>)</li> <li>\u5be6\u4f5c\u4f7f\u7528\u8005\u4e92\u52d5\u8655\u7406 / Implement user interaction handling</li> <li>\u5be6\u4f5c Loading/Error \u72c0\u614b\u986f\u793a / Implement Loading/Error state display</li> <li>\u5be6\u4f5c\u7559\u8a00\u5217\u8868\u986f\u793a\uff08\u652f\u63f4 top/newest \u5207\u63db\uff09 / Implement comment list display (support top/newest switching)</li> <li>\u5be6\u4f5c\u56de\u8986\u5217\u8868\u986f\u793a\uff08\u652f\u63f4\u5c55\u958b/\u6536\u8d77\uff09 / Implement reply list display (support expand/collapse)</li> <li>\u5be6\u4f5c\u5206\u9801\u8f09\u5165\u66f4\u591a / Implement pagination load more</li> <li>\u6a94\u6848\u7d50\u69cb\uff1a<code>Sources/PrematchComment/Views/PrematchComment/PrematchCommentView.swift</code> / File structure: <code>Sources/PrematchComment/Views/PrematchComment/PrematchCommentView.swift</code></li> </ol>"},{"location":"12_Tickets/07_view/TDD-060_PrematchCommentView/#implementation-guidelines","title":"\u5be6\u4f5c\u898f\u7bc4 / Implementation Guidelines","text":""},{"location":"12_Tickets/07_view/TDD-060_PrematchCommentView/#file-structure","title":"\u6a94\u6848\u7d50\u69cb / File Structure","text":"<pre><code>Sources/PrematchComment/Views/PrematchComment/\n  \u251c\u2500\u2500 PrematchCommentView.swift\n  \u251c\u2500\u2500 PrematchCommentView+ViewBuilders.swift  # View builders\n  \u2514\u2500\u2500 PrematchCommentContentView.swift        # Content view\n</code></pre>"},{"location":"12_Tickets/07_view/TDD-060_PrematchCommentView/#code-example","title":"\u7a0b\u5f0f\u78bc\u7bc4\u4f8b / Code Example","text":"<pre><code>import ComposableArchitecture\nimport SwiftUI\n\npublic struct PrematchCommentView: View {\n    @Bindable var store: StoreOf&lt;PrematchComment.PrematchCommentFeature&gt;\n\n    public init(store: StoreOf&lt;PrematchComment.PrematchCommentFeature&gt;) {\n        self.store = store\n    }\n\n    public var body: some View {\n        VStack {\n            if store.isLoading {\n                ProgressView()\n            } else if let errorMessage = store.errorMessage {\n                ErrorView(message: errorMessage)\n            } else {\n                CommentListView(store: store)\n            }\n        }\n        .onAppear {\n            store.send(.loadCommentList)\n        }\n    }\n}\n\n// MARK: - View Builders\n\nextension PrematchCommentView {\n    @ViewBuilder\n    private func CommentListView(store: StoreOf&lt;PrematchComment.PrematchCommentFeature&gt;) -&gt; some View {\n        VStack {\n            SortModePicker(store: store)\n            CommentList(store: store)\n        }\n    }\n\n    @ViewBuilder\n    private func SortModePicker(store: StoreOf&lt;PrematchComment.PrematchCommentFeature&gt;) -&gt; some View {\n        Picker(\"Sort Mode\", selection: Binding(\n            get: { store.sortMode },\n            set: { store.send(.setSortMode($0)) }\n        )) {\n            Text(\"Top\").tag(PrematchComment.SortMode.top)\n            Text(\"Newest\").tag(PrematchComment.SortMode.newest)\n        }\n        .pickerStyle(.segmented)\n    }\n}\n</code></pre>"},{"location":"12_Tickets/07_view/TDD-060_PrematchCommentView/#naming-conventions","title":"\u547d\u540d\u898f\u7bc4 / Naming Conventions","text":"<ul> <li>View \u4f7f\u7528 <code>struct</code>\uff0c\u5be6\u4f5c <code>View</code> protocol / View uses <code>struct</code>, implements <code>View</code> protocol</li> <li>\u4f7f\u7528 <code>@Bindable</code> \u7d81\u5b9a Store / Use <code>@Bindable</code> to bind Store</li> <li>\u4f7f\u7528 <code>StoreOf&lt;Feature&gt;</code> \u985e\u578b / Use <code>StoreOf&lt;Feature&gt;</code> type</li> <li>\u4f7f\u7528 <code>@ViewBuilder</code> \u7d44\u7e54 View \u7d50\u69cb / Use <code>@ViewBuilder</code> to organize View structure</li> <li>\u4f7f\u7528 extension \u5206\u96e2 View builders / Use extension to separate View builders</li> <li>\u4f7f\u7528 MARK \u8a3b\u89e3\u7d44\u7e54\u4ee3\u78bc / Use MARK comments to organize code</li> </ul>"},{"location":"12_Tickets/07_view/TDD-060_PrematchCommentView/#acceptance-criteria","title":"\u9a57\u6536\u689d\u4ef6 / Acceptance Criteria","text":"<ul> <li>[ ] <code>PrematchCommentView</code> \u5be6\u4f5c\u5b8c\u6210 / <code>PrematchCommentView</code> implementation complete</li> <li>[ ] Feature \u6574\u5408\u5b8c\u6210\uff0c\u4f7f\u7528 TCA <code>Store</code> / Feature integration complete, using TCA <code>Store</code></li> <li>[ ] UI \u72c0\u614b\u7d81\u5b9a\u5be6\u4f5c\u5b8c\u6210\uff0c\u4f7f\u7528 <code>@Bindable</code> / UI state binding implementation complete, using <code>@Bindable</code></li> <li>[ ] \u6240\u6709\u4f7f\u7528\u8005\u4e92\u52d5\u6d41\u7a0b\u6e2c\u8a66\u901a\u904e / All user interaction flow tests passed</li> <li>[ ] Loading/Error \u72c0\u614b\u986f\u793a\u6b63\u78ba / Loading/Error state display correct</li> <li>[ ] \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c / File structure matches reference code style</li> <li>[ ] UI Test \u8986\u84cb\u7387 \u2265 70% / UI Test Coverage \u2265 70%</li> </ul>"},{"location":"12_Tickets/07_view/TDD-060_PrematchCommentView/#related-documents","title":"\u76f8\u95dc\u6587\u4ef6 / Related Documents","text":"<ul> <li>Module Sequence Diagram\uff1a<code>output/LiveChat&amp;PrematchComment/05. Module Sequence Diagram\uff08\u6a21\u7d44\u5e8f\u5217\u5716\uff09/PrematchComment/Module Sequence Diagrams/</code> / - Module Sequence Diagram\uff1a<code>output/LiveChat&amp;PrematchComment/05. Module Sequence Diagram(\u6a21\u7d44\u5e8f\u5217\u5716)/PrematchComment/Module Sequence Diagrams/</code></li> </ul>"},{"location":"12_Tickets/07_view/TDD-060_PrematchCommentView/#_1","title":"\u8abf\u6574\u56e0\u5b50\u8aaa\u660e / \u8abf\u6574\u56e0\u5b50\u8aaa\u660e","text":"<ul> <li>\u57fa\u790e\u4f30\u6642\uff1a\u8907\u96dc View = 13 SP</li> <li>+2 SP\uff1a\u8907\u96dc\u7684\u5217\u8868 UI\uff08\u7559\u8a00\u5217\u8868\u3001\u56de\u8986\u5217\u8868\uff09 / - +2 SP\uff1a\u8907\u96dc\u7684\u5217\u8868 UI(\u7559\u8a00\u5217\u8868, \u56de\u8986\u5217\u8868)</li> <li>+2 SP\uff1a\u9700\u8981\u8655\u7406\u591a\u7a2e Loading/Error \u72c0\u614b / - +2 SP\uff1a\u9700\u8981\u8655\u7406\u591a\u7a2e Loading/Error State</li> </ul>"},{"location":"12_Tickets/07_view/TDD-060_PrematchCommentView_en/","title":"TDD-060: PrematchCommentView","text":""},{"location":"12_Tickets/07_view/TDD-060_PrematchCommentView_en/#ticket-information","title":"Ticket Information","text":"<p>|------|-----| |  | Ticket ID | TDD-060 | | Jira Key | FOOTBALL-9201 |  | |  | Implement PrematchCommentView |  | |  | Type | View |  | |  | P0 |  | |  | PrematchComment |  | |  | TDD-050 |  | |  | Story Point | 13 |  | |  | Standard\uff1a5 daysMost Stringent\uff1a4 days |  |</p>"},{"location":"12_Tickets/07_view/TDD-060_PrematchCommentView_en/#description","title":"Description","text":"<p>Implement PrematchCommentView\u3002</p>"},{"location":"12_Tickets/07_view/TDD-060_PrematchCommentView_en/#requirements","title":"Requirements","text":"<ol> <li>Implement UI Components</li> <li>Integrate PrematchCommentFeature(TCA)</li> <li>Implement UI StateBinding</li> <li>Implement\u4f7f\u7528\u8005InteractionHandling</li> <li>Implement Loading/Error StateDisplay</li> <li>Implement\u7559\u8a00\u5217\u8868Display(Support top/newest \u5207\u63db)</li> <li>Implement\u56de\u8986\u5217\u8868Display(Support\u5c55\u958b/\u6536\u8d77)</li> <li>ImplementPaginationLoading\u66f4\u591a</li> </ol>"},{"location":"12_Tickets/07_view/TDD-060_PrematchCommentView_en/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] UI ComponentsImplementation Complete</li> <li>[ ] Feature IntegrateComplete</li> <li>[ ] all\u4f7f\u7528\u8005Interaction\u6d41\u7a0bTestPassed</li> <li>[ ] Loading/Error StateDisplaycorrect</li> <li>[ ] UI Test Coverage \u2265 70%</li> </ul>"},{"location":"12_Tickets/07_view/TDD-060_PrematchCommentView_en/#related-documents","title":"Related Documents","text":"<ul> <li>Module Sequence Diagram\uff1a<code>output/LiveChat&amp;PrematchComment/05. Module Sequence Diagram(\u6a21\u7d44\u5e8f\u5217\u5716)/PrematchComment/Module Sequence Diagrams/</code></li> </ul>"},{"location":"12_Tickets/07_view/TDD-060_PrematchCommentView_en/#_1","title":"\u8abf\u6574\u56e0\u5b50\u8aaa\u660e","text":"<ul> <li>+2 SP\uff1a\u8907\u96dc\u7684\u5217\u8868 UI(\u7559\u8a00\u5217\u8868, \u56de\u8986\u5217\u8868)</li> <li>+2 SP\uff1a\u9700\u8981\u8655\u7406\u591a\u7a2e Loading/Error State</li> </ul>"},{"location":"12_Tickets/07_view/TDD-061_LiveDetailView/","title":"TDD-061: LiveDetailView","text":""},{"location":"12_Tickets/07_view/TDD-061_LiveDetailView/#ticket-ticket-information","title":"Ticket \u8cc7\u8a0a / Ticket Information","text":"\u6b04\u4f4d \u503c Ticket ID TDD-061 Jira Key FOOTBALL-9202 \u6a19\u984c \u5be6\u4f5c LiveDetailView \u985e\u578b View \u512a\u5148\u7d1a P0 \u6240\u5c6c Feature LiveChat \u4f9d\u8cf4 Ticket TDD-051 Story Point 13 \u4f30\u6642\uff08Senior iOS Engineer + AI \u8f14\u52a9\uff09 \u6a19\u6e96\uff1a5 \u5929\u6700\u56b4\u53b2\uff1a4 \u5929 \u958b\u767c\u65e5\u671f / Development Date 2025-12-19 (\u9031\u4e94)"},{"location":"12_Tickets/07_view/TDD-061_LiveDetailView/#description","title":"\u63cf\u8ff0 / Description","text":"<p>\u5be6\u4f5c LiveDetailView\u3002 / Implement LiveDetailView\u3002</p>"},{"location":"12_Tickets/07_view/TDD-061_LiveDetailView/#requirements","title":"\u9700\u6c42 / Requirements","text":"<ol> <li>\u5be6\u4f5c <code>LiveDetailView</code>\uff08SwiftUI\uff09 / Implement <code>LiveDetailView</code> (SwiftUI)</li> <li>\u6574\u5408 <code>LiveChatFeature</code>\uff08\u4f7f\u7528 TCA <code>Store</code>\uff09 / Integrate <code>LiveChatFeature</code> (using TCA <code>Store</code>)</li> <li>\u5be6\u4f5c UI \u72c0\u614b\u7d81\u5b9a\uff08\u4f7f\u7528 <code>@Bindable</code>\uff09 / Implement UI state binding (using <code>@Bindable</code>)</li> <li>\u5be6\u4f5c\u4f7f\u7528\u8005\u4e92\u52d5\u8655\u7406 / Implement user interaction handling</li> <li>\u5be6\u4f5c Loading/Error \u72c0\u614b\u986f\u793a / Implement Loading/Error state display</li> <li>\u5be6\u4f5c\u804a\u5929\u5ba4\u8a0a\u606f\u5217\u8868\u986f\u793a / Implement chatroom message list display</li> <li>\u5be6\u4f5c\u5373\u6642\u8a0a\u606f\u63a5\u6536\u548c\u986f\u793a\uff08WebSocket\uff09 / Implement real-time message receive and display (WebSocket)</li> <li>\u5be6\u4f5c\u6b77\u53f2\u8a0a\u606f\u8f09\u5165\uff08\u6efe\u52d5\u5230\u9802\u90e8\uff09 / Implement historical message loading (scroll to top)</li> <li>\u5be6\u4f5c\u7528\u6236\u64cd\u4f5c\u9078\u55ae\uff08\u5c01\u9396\u3001\u8df3\u8f49\u500b\u4eba\u4e3b\u9801\uff09 / Implement user action menu (block, navigate to profile)</li> <li>\u6a94\u6848\u7d50\u69cb\uff1a<code>Sources/LiveChat/Views/LiveChat/LiveDetailView.swift</code> / File structure: <code>Sources/LiveChat/Views/LiveChat/LiveDetailView.swift</code></li> </ol>"},{"location":"12_Tickets/07_view/TDD-061_LiveDetailView/#implementation-guidelines","title":"\u5be6\u4f5c\u898f\u7bc4 / Implementation Guidelines","text":""},{"location":"12_Tickets/07_view/TDD-061_LiveDetailView/#file-structure","title":"\u6a94\u6848\u7d50\u69cb / File Structure","text":"<pre><code>Sources/LiveChat/Views/LiveChat/\n  \u251c\u2500\u2500 LiveDetailView.swift\n  \u251c\u2500\u2500 LiveDetailView+ViewBuilders.swift  # View builders\n  \u2514\u2500\u2500 MessageListView.swift             # Message list view\n</code></pre>"},{"location":"12_Tickets/07_view/TDD-061_LiveDetailView/#code-example","title":"\u7a0b\u5f0f\u78bc\u7bc4\u4f8b / Code Example","text":"<pre><code>import ComposableArchitecture\nimport SwiftUI\n\npublic struct LiveDetailView: View {\n    @Bindable var store: StoreOf&lt;LiveChat.LiveChatFeature&gt;\n\n    public init(store: StoreOf&lt;LiveChat.LiveChatFeature&gt;) {\n        self.store = store\n    }\n\n    public var body: some View {\n        VStack {\n            if store.isLoading {\n                ProgressView()\n            } else if let errorMessage = store.errorMessage {\n                ErrorView(message: errorMessage)\n            } else {\n                MessageListView(store: store)\n            }\n        }\n        .onAppear {\n            store.send(.joinChatroom)\n        }\n        .onChange(of: store.webSocketStatus) { oldValue, newValue in\n            if newValue == .connected {\n                store.send(.subscribeWebSocket)\n            }\n        }\n    }\n}\n\n// MARK: - View Builders\n\nextension LiveDetailView {\n    @ViewBuilder\n    private func MessageListView(store: StoreOf&lt;LiveChat.LiveChatFeature&gt;) -&gt; some View {\n        ScrollViewReader { proxy in\n            List(store.messageList.messages) { message in\n                MessageRow(message: message)\n                    .onTapGesture {\n                        store.send(.showUserActionMenu(message.authorId))\n                    }\n            }\n            .onChange(of: store.messageList.messages.count) { oldValue, newValue in\n                if let lastMessage = store.messageList.messages.last {\n                    withAnimation {\n                        proxy.scrollTo(lastMessage.id, anchor: .bottom)\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"12_Tickets/07_view/TDD-061_LiveDetailView/#naming-conventions","title":"\u547d\u540d\u898f\u7bc4 / Naming Conventions","text":"<ul> <li>View \u4f7f\u7528 <code>struct</code>\uff0c\u5be6\u4f5c <code>View</code> protocol / View uses <code>struct</code>, implements <code>View</code> protocol</li> <li>\u4f7f\u7528 <code>@Bindable</code> \u7d81\u5b9a Store / Use <code>@Bindable</code> to bind Store</li> <li>\u4f7f\u7528 <code>StoreOf&lt;Feature&gt;</code> \u985e\u578b / Use <code>StoreOf&lt;Feature&gt;</code> type</li> <li>\u4f7f\u7528 <code>@ViewBuilder</code> \u7d44\u7e54 View \u7d50\u69cb / Use <code>@ViewBuilder</code> to organize View structure</li> <li>\u4f7f\u7528 extension \u5206\u96e2 View builders / Use extension to separate View builders</li> </ul>"},{"location":"12_Tickets/07_view/TDD-061_LiveDetailView/#acceptance-criteria","title":"\u9a57\u6536\u689d\u4ef6 / Acceptance Criteria","text":"<ul> <li>[ ] <code>LiveDetailView</code> \u5be6\u4f5c\u5b8c\u6210 / <code>LiveDetailView</code> implementation complete</li> <li>[ ] Feature \u6574\u5408\u5b8c\u6210\uff0c\u4f7f\u7528 TCA <code>Store</code> / Feature integration complete, using TCA <code>Store</code></li> <li>[ ] UI \u72c0\u614b\u7d81\u5b9a\u5be6\u4f5c\u5b8c\u6210\uff0c\u4f7f\u7528 <code>@Bindable</code> / UI state binding implementation complete, using <code>@Bindable</code></li> <li>[ ] \u6240\u6709\u4f7f\u7528\u8005\u4e92\u52d5\u6d41\u7a0b\u6e2c\u8a66\u901a\u904e / All user interaction flow tests passed</li> <li>[ ] WebSocket \u8a0a\u606f\u5373\u6642\u986f\u793a\u6b63\u78ba / WebSocket message real-time display correct</li> <li>[ ] Loading/Error \u72c0\u614b\u986f\u793a\u6b63\u78ba / Loading/Error state display correct</li> <li>[ ] \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c / File structure matches reference code style</li> <li>[ ] UI Test \u8986\u84cb\u7387 \u2265 70% / UI Test Coverage \u2265 70%</li> </ul>"},{"location":"12_Tickets/07_view/TDD-061_LiveDetailView/#related-documents","title":"\u76f8\u95dc\u6587\u4ef6 / Related Documents","text":"<ul> <li>Module Sequence Diagram\uff1a<code>output/LiveChat&amp;PrematchComment/05. Module Sequence Diagram\uff08\u6a21\u7d44\u5e8f\u5217\u5716\uff09/LiveChat/Module Sequence Diagrams/</code> / - Module Sequence Diagram\uff1a<code>output/LiveChat&amp;PrematchComment/05. Module Sequence Diagram(\u6a21\u7d44\u5e8f\u5217\u5716)/LiveChat/Module Sequence Diagrams/</code></li> </ul>"},{"location":"12_Tickets/07_view/TDD-061_LiveDetailView/#_1","title":"\u8abf\u6574\u56e0\u5b50\u8aaa\u660e / \u8abf\u6574\u56e0\u5b50\u8aaa\u660e","text":"<ul> <li>\u57fa\u790e\u4f30\u6642\uff1a\u8907\u96dc View = 13 SP</li> <li>+2 SP\uff1a\u8907\u96dc\u7684\u5217\u8868 UI\uff08\u804a\u5929\u8a0a\u606f\u5217\u8868\uff09 / - +2 SP\uff1a\u8907\u96dc\u7684\u5217\u8868 UI(\u804a\u5929\u8a0a\u606f\u5217\u8868)</li> <li>+2 SP\uff1a\u9700\u8981\u8655\u7406\u591a\u7a2e Loading/Error \u72c0\u614b / - +2 SP\uff1a\u9700\u8981\u8655\u7406\u591a\u7a2e Loading/Error State</li> <li>+1 SP\uff1aWebSocket \u5373\u6642\u8a0a\u606f\u8655\u7406</li> </ul>"},{"location":"12_Tickets/07_view/TDD-061_LiveDetailView_en/","title":"TDD-061: LiveDetailView","text":""},{"location":"12_Tickets/07_view/TDD-061_LiveDetailView_en/#ticket-information","title":"Ticket Information","text":"<p>|------|-----| |  | Ticket ID | TDD-061 | | Jira Key | FOOTBALL-9202 |  | |  | Implement LiveDetailView |  | |  | Type | View |  | |  | P0 |  | |  | LiveChat |  | |  | TDD-051 |  | |  | Story Point | 13 |  | |  | Standard\uff1a5 daysMost Stringent\uff1a4 days |  |</p>"},{"location":"12_Tickets/07_view/TDD-061_LiveDetailView_en/#description","title":"Description","text":"<p>Implement LiveDetailView\u3002</p>"},{"location":"12_Tickets/07_view/TDD-061_LiveDetailView_en/#requirements","title":"Requirements","text":"<ol> <li>Implement UI Components</li> <li>Integrate LiveChatFeature(TCA)</li> <li>Implement UI StateBinding</li> <li>Implement\u4f7f\u7528\u8005InteractionHandling</li> <li>Implement Loading/Error StateDisplay</li> <li>Implement\u804a\u5929\u5ba4\u8a0a\u606f\u5217\u8868Display</li> <li>Implement\u5373\u6642\u8a0a\u606f\u63a5\u6536andDisplay</li> <li>Implement\u6b77\u53f2\u8a0a\u606fLoading(\u6efe\u52d5\u5230\u9802\u90e8)</li> <li>Implement\u7528\u6236\u64cd\u4f5c\u9078\u55ae(\u5c01\u9396, \u8df3\u8f49\u500b\u4eba\u4e3b\u9801)</li> </ol>"},{"location":"12_Tickets/07_view/TDD-061_LiveDetailView_en/#acceptance-criteria","title":"Acceptance Criteria","text":"<ul> <li>[ ] UI ComponentsImplementation Complete</li> <li>[ ] Feature IntegrateComplete</li> <li>[ ] all\u4f7f\u7528\u8005Interaction\u6d41\u7a0bTestPassed</li> <li>[ ] WebSocket \u8a0a\u606f\u5373\u6642Displaycorrect</li> <li>[ ] Loading/Error StateDisplaycorrect</li> <li>[ ] UI Test Coverage \u2265 70%</li> </ul>"},{"location":"12_Tickets/07_view/TDD-061_LiveDetailView_en/#related-documents","title":"Related Documents","text":"<ul> <li>Module Sequence Diagram\uff1a<code>output/LiveChat&amp;PrematchComment/05. Module Sequence Diagram(\u6a21\u7d44\u5e8f\u5217\u5716)/LiveChat/Module Sequence Diagrams/</code></li> </ul>"},{"location":"12_Tickets/07_view/TDD-061_LiveDetailView_en/#_1","title":"\u8abf\u6574\u56e0\u5b50\u8aaa\u660e","text":"<ul> <li>+2 SP\uff1a\u8907\u96dc\u7684\u5217\u8868 UI(\u804a\u5929\u8a0a\u606f\u5217\u8868)</li> <li>+2 SP\uff1a\u9700\u8981\u8655\u7406\u591a\u7a2e Loading/Error State</li> </ul>"},{"location":"13_Implementation_Status/","title":"\u5be6\u4f5c\u72c0\u614b\u8ffd\u8e64","text":"<p>\u672c\u76ee\u9304\u7528\u65bc\u8ffd\u8e64 TDD Ticket \u7684\u5be6\u4f5c\u72c0\u614b\uff0c\u78ba\u4fdd TDD \u6587\u4ef6\u8207\u5be6\u969b codebase \u4fdd\u6301\u540c\u6b65\u3002</p>"},{"location":"13_Implementation_Status/#_2","title":"\u6587\u4ef6\u8aaa\u660e","text":"<ul> <li><code>implementation_status.md</code>\uff1a\u4e3b\u8981\u7684\u5be6\u4f5c\u72c0\u614b\u8ffd\u8e64\u8868\uff0c\u8a18\u9304\u6bcf\u500b Ticket \u7684\u5be6\u4f5c\u9032\u5ea6</li> </ul>"},{"location":"13_Implementation_Status/#_3","title":"\u4f7f\u7528\u65b9\u5f0f","text":"<ol> <li>\u958b\u59cb\u5be6\u4f5c\u524d\uff1a\u5728 <code>implementation_status.md</code> \u4e2d\u6a19\u8a18 Ticket \u72c0\u614b\u70ba \"\ud83d\udea7 In Progress\"</li> <li>\u5be6\u4f5c\u5b8c\u6210\u5f8c\uff1a\u66f4\u65b0\u72c0\u614b\u70ba \"\u2705 Done\"\uff0c\u4e26\u8a18\u9304\u5be6\u4f5c\u6a94\u6848\u8def\u5f91\u548c\u65e5\u671f</li> <li>\u5b9a\u671f\u6aa2\u67e5\uff1a\u4f7f\u7528 Cursor \u5354\u52a9\u6aa2\u67e5\u5be6\u4f5c\u8207 TDD \u7684\u4e00\u81f4\u6027</li> </ol>"},{"location":"13_Implementation_Status/#_4","title":"\u72c0\u614b\u8aaa\u660e","text":"<ul> <li>\u23f3 Pending\uff1a\u5c1a\u672a\u958b\u59cb</li> <li>\ud83d\udea7 In Progress\uff1a\u9032\u884c\u4e2d</li> <li>\u2705 Done\uff1a\u5df2\u5b8c\u6210</li> <li>\u26a0\ufe0f Blocked\uff1a\u88ab\u963b\u585e</li> <li>\ud83d\udd0d Review\uff1a\u5f85 Code Review</li> </ul>"},{"location":"13_Implementation_Status/#cursor","title":"\u8207 Cursor \u5354\u4f5c","text":"<p>\u6bcf\u5929\u7d50\u675f\u6642\uff0c\u53ef\u4ee5\u9019\u6a23\u8207 Cursor \u4e92\u52d5\uff1a</p> <pre><code>\u8acb\u6aa2\u67e5\u4eca\u5929\u7684\u5be6\u4f5c\u9032\u5ea6\uff1a\n1. \u66f4\u65b0 implementation_status.md\n2. \u6aa2\u67e5\u5be6\u4f5c\u6a94\u6848\u662f\u5426\u5b58\u5728\n3. \u6aa2\u67e5\u5be6\u4f5c\u662f\u5426\u7b26\u5408 TDD \u898f\u7bc4\n4. \u751f\u6210\u8b8a\u66f4\u8a18\u9304\n</code></pre>"},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/","title":"TDD-022 ChatWebSocketClient \u4e00\u81f4\u6027\u6aa2\u67e5\u5831\u544a","text":"<p>\u6aa2\u67e5\u65e5\u671f: 2025-12-03 Ticket: TDD-022 (FOOTBALL-9183) \u5be6\u4f5c\u6a94\u6848: <code>MatchChat/Sources/MatchChat/Services/API/ChatWebSocketClient.swift</code></p>"},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#compliant-items","title":"\u2705 \u7b26\u5408\u9805\u76ee / Compliant Items","text":""},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#1-file-structure","title":"1. \u6a94\u6848\u7d50\u69cb / File Structure","text":"<ul> <li>\u2705 \u8def\u5f91: <code>MatchChat/Sources/MatchChat/Services/API/ChatWebSocketClient.swift</code></li> <li>\u2705 \u8aaa\u660e: \u5be6\u969b\u8def\u5f91\u8207 TDD \u4e0d\u540c\u662f\u56e0\u70ba MatchChat \u662f\u7d71\u4e00 package\uff0c\u4f46\u6a94\u6848\u4f4d\u7f6e\u5728\u6b63\u78ba\u7684\u5c64\u7d1a\uff08Services/API/\uff09</li> </ul>"},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#2-type-definition","title":"2. \u985e\u578b\u5b9a\u7fa9 / Type Definition","text":"<ul> <li>\u2705 \u4f7f\u7528 <code>actor</code>: <code>public actor ChatWebSocketClient</code> \u7b26\u5408 TDD \u8981\u6c42</li> <li>\u2705 ConnectionState enum: \u5305\u542b\u6240\u6709\u5fc5\u8981\u7684\u72c0\u614b\uff08disconnected, connecting, connected, reconnecting, error\uff09</li> <li>\u2705 ChatroomSubscription class: \u5be6\u4f5c\u591a\u8a02\u95b1\u8005\u7ba1\u7406\uff0c\u4f7f\u7528 NSLock \u4fdd\u8b77\u5171\u4eab\u72c0\u614b</li> </ul>"},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#3-initialization","title":"3. \u521d\u59cb\u5316 / Initialization","text":"<ul> <li>\u2705 \u53c3\u6578: <code>init(userId:domain:appVersion:deviceId:)</code> \u7b26\u5408 TDD \u898f\u7bc4</li> <li>\u2705 Headers \u8a2d\u5b9a: \u6b63\u78ba\u8a2d\u5b9a Platform, userId, App-Version, Device-Id</li> </ul>"},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#4-connection-management","title":"4. \u9023\u7dda\u7ba1\u7406 / Connection Management","text":"<ul> <li>\u2705 <code>connect()</code> \u65b9\u6cd5: \u5be6\u4f5c\u5b8c\u6210\uff0c\u4f7f\u7528 SportyStomp\uff0c\u555f\u7528\u5fc3\u8df3</li> <li>\u2705 <code>disconnect()</code> \u65b9\u6cd5: \u5be6\u4f5c\u5b8c\u6210\uff0c\u6e05\u7406\u6240\u6709\u8a02\u95b1\u548c\u8cc7\u6e90</li> <li>\u2705 \u5fc3\u8df3\u6a5f\u5236: \u4f7f\u7528 <code>enableAutoPing()</code> \u2705</li> <li>\u2705 \u72c0\u614b\u7ba1\u7406: \u4f7f\u7528 <code>ConnectionState</code> enum \u8ffd\u8e64\u9023\u7dda\u72c0\u614b \u2705</li> </ul>"},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#5-subscription-management","title":"5. \u8a02\u95b1\u7ba1\u7406 / Subscription Management","text":"<ul> <li>\u2705 <code>subscribe(chatroomId:)</code> \u65b9\u6cd5: \u5be6\u4f5c\u5b8c\u6210\uff0c\u8fd4\u56de <code>AsyncStream&lt;ChatAPI.WebSocketMessageDTO&gt;</code></li> <li>\u2705 \u591a\u8a02\u95b1\u8005\u652f\u63f4: \u4f7f\u7528 UUID \u8ffd\u8e64\u8a02\u95b1\u8005\uff0c\u7b26\u5408 TDD \u8981\u6c42</li> <li>\u2705 \u5ee3\u64ad\u6a5f\u5236: <code>ChatroomSubscription.broadcastMessage()</code> \u5be6\u4f5c\u5b8c\u6210</li> <li>\u2705 Topic \u683c\u5f0f: \u4f7f\u7528 <code>/topic/chat_room.{chatroomId}</code> \u7b26\u5408 API Spec</li> <li>\u2705 x-queue-name header: \u6b63\u78ba\u8a2d\u5b9a</li> </ul>"},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#6-message-handling","title":"6. \u8a0a\u606f\u8655\u7406 / Message Handling","text":"<ul> <li>\u2705 \u8a0a\u606f\u63a5\u6536: <code>handleMessageReceived()</code> \u5be6\u4f5c\u5b8c\u6210</li> <li>\u2705 DTO \u8f49\u63db: \u5617\u8a66\u89e3\u6790\u70ba <code>ChatAPI.WebSocketMessageDTO</code></li> <li>\u2705 \u932f\u8aa4\u8655\u7406: \u5305\u542b fallback \u89e3\u6790\u908f\u8f2f\uff08\u53c3\u8003 WebSocketStompManager\uff09</li> <li>\u2705 \u8a0a\u606f\u767c\u9001: <code>sendMessage(chatroomId:text:)</code> \u5be6\u4f5c\u5b8c\u6210</li> </ul>"},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#7-reconnect-mechanism","title":"7. \u91cd\u9023\u6a5f\u5236 / Reconnect Mechanism","text":"<ul> <li>\u2705 \u6307\u6578\u9000\u907f\u7b56\u7565: \u5be6\u4f5c\u5b8c\u6210\uff08\u521d\u59cb 1 \u79d2\uff0c\u6bcf\u6b21\u7ffb\u500d\uff0c\u6700\u5927 60 \u79d2\uff09</li> <li>\u2705 \u91cd\u9023\u89f8\u767c: \u5728 <code>handleDisconnect()</code> \u548c <code>handleError()</code> \u4e2d\u6b63\u78ba\u89f8\u767c</li> </ul>"},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#8-delegate-delegate-implementation","title":"8. Delegate \u5be6\u4f5c / Delegate Implementation","text":"<ul> <li>\u2705 SwiftStompDelegate: \u6240\u6709\u5fc5\u8981\u65b9\u6cd5\u90fd\u5df2\u5be6\u4f5c</li> <li>\u2705 nonisolated \u65b9\u6cd5: \u6b63\u78ba\u4f7f\u7528 <code>nonisolated</code> + <code>Task</code> \u8655\u7406 delegate \u56de\u8abf</li> <li>\u2705 Sendable conformance: \u70ba StompConnectType, StompDisconnectType, StompErrorType \u6dfb\u52a0\u4e86 <code>@unchecked @retroactive Sendable</code></li> </ul>"},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#9-naming-conventions","title":"9. \u547d\u540d\u898f\u7bc4 / Naming Conventions","text":"<ul> <li>\u2705 public \u4fee\u98fe\u7b26: \u6240\u6709\u516c\u958b\u65b9\u6cd5\u90fd\u4f7f\u7528 <code>public</code></li> <li>\u2705 \u65b9\u6cd5\u547d\u540d: \u7b26\u5408 Swift \u547d\u540d\u898f\u7bc4</li> <li>\u2705 MARK \u8a3b\u89e3: \u6b63\u78ba\u4f7f\u7528 MARK \u7d44\u7e54\u4ee3\u78bc</li> </ul>"},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#10-dependencies","title":"10. \u4f9d\u8cf4\u95dc\u4fc2 / Dependencies","text":"<ul> <li>\u2705 SportyStomp: \u5df2\u6dfb\u52a0\u5230 Package.swift</li> <li>\u2705 ChatAPI.WebSocketEndpoint: \u6b63\u78ba\u4f7f\u7528</li> <li>\u2705 ChatAPI.WebSocketMessageDTO: \u6b63\u78ba\u4f7f\u7528</li> </ul>"},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#issues-to-address","title":"\u26a0\ufe0f \u9700\u8981\u6ce8\u610f\u7684\u554f\u984c / Issues to Address","text":""},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#1-method-signature-differences","title":"1. \u65b9\u6cd5\u7c3d\u540d\u5dee\u7570 / Method Signature Differences","text":""},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#unsubscribe","title":"<code>unsubscribe()</code> \u65b9\u6cd5","text":"<ul> <li>TDD \u8981\u6c42: <code>unsubscribe(chatroomId: String) async</code></li> <li>\u5be6\u969b\u5be6\u4f5c: <code>unsubscribe(subscriberId: UUID) async</code> \u548c <code>unsubscribeAll(chatroomId: String) async</code></li> <li>\u8a55\u4f30: \u2705 \u5be6\u969b\u5be6\u4f5c\u66f4\u5408\u7406</li> <li>\u652f\u63f4\u591a\u8a02\u95b1\u8005\u6a21\u5f0f\uff0c\u9700\u8981\u901a\u904e <code>subscriberId</code> \u4f86\u53d6\u6d88\u7279\u5b9a\u8a02\u95b1</li> <li>\u63d0\u4f9b\u4e86 <code>unsubscribeAll()</code> \u4f5c\u70ba\u88dc\u5145\uff0c\u53ef\u4ee5\u53d6\u6d88\u6574\u500b chatroom \u7684\u6240\u6709\u8a02\u95b1</li> <li>\u5efa\u8b70: \u5728 TDD \u6587\u4ef6\u4e2d\u66f4\u65b0\u6b64\u65b9\u6cd5\u7c3d\u540d\uff0c\u6216\u6dfb\u52a0\u8aaa\u660e</li> </ul>"},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#2-insufficient-test-coverage","title":"2. \u6e2c\u8a66\u8986\u84cb\u7387\u4e0d\u8db3 / Insufficient Test Coverage","text":""},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#chatwebsocketclient","title":"\u7f3a\u5c11 ChatWebSocketClient \u55ae\u5143\u6e2c\u8a66","text":"<ul> <li>TDD \u8981\u6c42: Unit Test \u8986\u84cb\u7387 \u2265 80%</li> <li>\u5be6\u969b\u72c0\u6cc1: </li> <li>\u2705 \u6709 <code>ChatAPIWebSocketTests.swift</code>\uff0c\u4f46\u53ea\u6e2c\u8a66\u4e86 <code>WebSocketEndpoint</code></li> <li>\u274c \u7f3a\u5c11 <code>ChatWebSocketClient</code> \u7684\u55ae\u5143\u6e2c\u8a66</li> <li>\u5efa\u8b70: </li> <li>\u6dfb\u52a0 <code>ChatWebSocketClientTests.swift</code></li> <li>\u6e2c\u8a66\u8986\u84cb\uff1a<ul> <li>\u9023\u7dda\u7ba1\u7406\uff08connect, disconnect\uff09</li> <li>\u8a02\u95b1\u7ba1\u7406\uff08subscribe, unsubscribe\uff09</li> <li>\u8a0a\u606f\u63a5\u6536\u8207\u767c\u9001</li> <li>\u91cd\u9023\u6a5f\u5236</li> <li>\u932f\u8aa4\u8655\u7406</li> </ul> </li> </ul>"},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#3-todo-todo-items","title":"3. TODO \u9805\u76ee / TODO Items","text":"<p>\u5be6\u4f5c\u4e2d\u5305\u542b\u4ee5\u4e0b TODO\uff0c\u9700\u8981\u5f8c\u7e8c\u9a57\u8b49\uff1a</p>"},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#31-accept-version","title":"3.1 accept-version \u683c\u5f0f\u9a57\u8b49","text":"<p><pre><code>// TODO: \u9a57\u8b49 accept-version \u683c\u5f0f\n// API Spec \u8981\u6c42: accept-version:1,2,1,1,1.0\n// SportyStomp \u9ed8\u8a8d: \"1.1,1.2\"\n// \u9700\u8981\u6e2c\u8a66 connectWithCustomHeaders(acceptVersion: \"1,2,1,1,1.0\") \u662f\u5426\u6b63\u5e38\u5de5\u4f5c\n</code></pre> - \u72c0\u614b: \u26a0\ufe0f \u5f85\u9a57\u8b49 - \u5efa\u8b70: \u5728 Integration Test \u4e2d\u9a57\u8b49</p>"},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#32-heart-beat-header","title":"3.2 heart-beat header \u9a57\u8b49","text":"<p><pre><code>// TODO: \u9a57\u8b49 heart-beat header\n// API Spec \u8981\u6c42: heart-beat:4000,4000 (\u5728 CONNECT frame \u4e2d)\n// SportyStomp \u4f7f\u7528 enableAutoPing() \u63d0\u4f9b WebSocket \u5c64\u7684 ping\n// \u9700\u8981\u78ba\u8a8d\u670d\u52d9\u7aef\u662f\u5426\u9700\u8981 STOMP \u5c64\u7684 heart-beat header\n</code></pre> - \u72c0\u614b: \u26a0\ufe0f \u5f85\u9a57\u8b49 - \u5efa\u8b70: \u8207\u5f8c\u7aef\u78ba\u8a8d\u662f\u5426\u9700\u8981 STOMP \u5c64\u7684 heart-beat header</p>"},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#33","title":"3.3 \u8a0a\u606f\u683c\u5f0f\u9a57\u8b49","text":"<p><pre><code>// TODO: \u9a57\u8b49\u8a0a\u606f\u683c\u5f0f\u662f\u5426\u7b26\u5408 API Spec\n// API Spec \u8981\u6c42\u683c\u5f0f: {\"type\":\"MESSAGE\",\"data\":{...}}\n// \u9700\u8981\u78ba\u8a8d\u5be6\u969b\u63a5\u6536\u5230\u7684\u8a0a\u606f\u683c\u5f0f\u662f\u5426\u5b8c\u5168\u7b26\u5408\u6b64\u898f\u7bc4\n</code></pre> - \u72c0\u614b: \u26a0\ufe0f \u5f85\u9a57\u8b49 - \u5efa\u8b70: \u5728 Integration Test \u4e2d\u9a57\u8b49\u5be6\u969b\u8a0a\u606f\u683c\u5f0f</p>"},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#4-notes-in-method-comments","title":"4. \u65b9\u6cd5\u8a3b\u89e3\u4e2d\u7684\u6ce8\u610f\u4e8b\u9805 / Notes in Method Comments","text":""},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#unsubscribesubscriberid","title":"<code>unsubscribe(subscriberId:)</code> \u65b9\u6cd5","text":"<p><pre><code>/// **\u6ce8\u610f**: \u9019\u500b\u65b9\u6cd5\u9700\u8981\u6539\u9032\uff0c\u56e0\u70ba AsyncStream \u6c92\u6709\u63d0\u4f9b subscriberId\u3002\n/// \u5be6\u969b\u4f7f\u7528\u6642\uff0c\u53ef\u80fd\u9700\u8981\u8fd4\u56de\u4e00\u500b\u5305\u542b stream \u548c unsubscribe \u65b9\u6cd5\u7684 tuple\u3002\n</code></pre> - \u8a55\u4f30: \u7576\u524d\u5be6\u4f5c\u5df2\u7d93\u901a\u904e <code>addSubscriber()</code> \u8fd4\u56de <code>(stream, id)</code> tuple\uff0c\u89e3\u6c7a\u4e86\u9019\u500b\u554f\u984c - \u5efa\u8b70: \u66f4\u65b0\u8a3b\u89e3\uff0c\u8aaa\u660e\u7576\u524d\u5be6\u4f5c\u5df2\u7d93\u89e3\u6c7a\u4e86\u9019\u500b\u554f\u984c</p>"},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#acceptance-criteria-check","title":"\ud83d\udccb \u9a57\u6536\u689d\u4ef6\u6aa2\u67e5 / Acceptance Criteria Check","text":"\u9a57\u6536\u689d\u4ef6 \u72c0\u614b \u8aaa\u660e <code>ChatWebSocketClient</code> \u5be6\u4f5c\u5b8c\u6210\uff0c\u4f7f\u7528 <code>actor</code> \u2705 \u5df2\u5be6\u4f5c WebSocket \u9023\u7dda\u7ba1\u7406\u5be6\u4f5c\u5b8c\u6210 \u2705 connect/disconnect \u5df2\u5be6\u4f5c \u8a02\u95b1 / \u53d6\u6d88\u8a02\u95b1\u5be6\u4f5c\u5b8c\u6210 \u2705 subscribe/unsubscribe \u5df2\u5be6\u4f5c \u8a0a\u606f\u63a5\u6536\u8207\u767c\u9001\u5be6\u4f5c\u5b8c\u6210 \u2705 handleMessageReceived/sendMessage \u5df2\u5be6\u4f5c \u91cd\u9023\u6a5f\u5236\u5be6\u4f5c\u5b8c\u6210\uff08\u6307\u6578\u9000\u907f\uff09 \u2705 reconnect() \u5df2\u5be6\u4f5c \u5fc3\u8df3\u6a5f\u5236\u5be6\u4f5c\u5b8c\u6210 \u2705 enableAutoPing() \u5df2\u5be6\u4f5c \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c \u2705 \u7b26\u5408 Unit Test \u8986\u84cb\u7387 \u2265 80% \u274c \u7f3a\u5c11 ChatWebSocketClient \u55ae\u5143\u6e2c\u8a66 Integration Test \u901a\u904e \u26a0\ufe0f \u9700\u8981\u9a57\u8b49"},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#architecture-alignment-check","title":"\ud83d\udd0d \u67b6\u69cb\u5c0d\u9f4a\u6aa2\u67e5 / Architecture Alignment Check","text":""},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#clean-architecture","title":"\u2705 Clean Architecture \u5c64\u7d1a\u95dc\u4fc2","text":"<ul> <li>Client Layer \u2192 API Layer: \u2705 \u4f7f\u7528 <code>ChatAPI.WebSocketEndpoint</code> \u548c <code>ChatAPI.WebSocketMessageDTO</code></li> <li>Repository Layer \u2192 Client Layer: \u26a0\ufe0f \u9700\u8981\u6aa2\u67e5 <code>LiveChatRepository</code> \u662f\u5426\u6b63\u78ba\u4f7f\u7528 <code>ChatWebSocketClient</code></li> </ul>"},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#module-responsibility","title":"\u2705 Module Responsibility","text":"<ul> <li>\u2705 WebSocket \u901a\u8a0a\uff08\u5373\u6642\u8a0a\u606f\uff09</li> <li>\u2705 \u8a02\u95b1 / \u53d6\u6d88\u8a02\u95b1</li> <li>\u2705 \u8a0a\u606f\u63a5\u6536\u8207\u767c\u9001</li> <li>\u2705 \u9023\u7dda\u7ba1\u7406\uff08\u91cd\u9023\u3001\u5fc3\u8df3\u7b49\uff09</li> </ul>"},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#api-spec","title":"\u2705 API Spec \u5c0d\u9f4a","text":"<ul> <li>\u2705 WebSocket URL: \u4f7f\u7528 <code>ChatAPI.WebSocketEndpoint.url(for:)</code></li> <li>\u2705 Topic \u683c\u5f0f: <code>/topic/chat_room.{chatroomId}</code></li> <li>\u2705 Message DTO: <code>ChatAPI.WebSocketMessageDTO</code></li> <li>\u26a0\ufe0f accept-version \u548c heart-beat: \u5f85\u9a57\u8b49\uff08\u898b TODO\uff09</li> </ul>"},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#module-sequence-diagram","title":"\u2705 Module Sequence Diagram \u5c0d\u9f4a","text":"<ul> <li>\u2705 \u9023\u7dda\u6642\u6a5f: <code>connect()</code> \u65b9\u6cd5\u5df2\u5be6\u4f5c</li> <li>\u2705 \u8a02\u95b1\u6642\u6a5f: <code>subscribe(chatroomId:)</code> \u65b9\u6cd5\u5df2\u5be6\u4f5c</li> <li>\u2705 \u53d6\u6d88\u8a02\u95b1\u6642\u6a5f: <code>unsubscribe()</code> \u65b9\u6cd5\u5df2\u5be6\u4f5c</li> </ul>"},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#improvement-suggestions","title":"\ud83d\udcdd \u6539\u9032\u5efa\u8b70 / Improvement Suggestions","text":""},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#1-priority-high","title":"1. \u512a\u5148\u7d1a\uff1a\u9ad8 / Priority: High","text":""},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#11","title":"1.1 \u6dfb\u52a0\u55ae\u5143\u6e2c\u8a66","text":"<ul> <li>\u6a94\u6848: <code>MatchChat/Tests/MatchChatTests/ChatWebSocketClientTests.swift</code></li> <li>\u6e2c\u8a66\u9805\u76ee:</li> <li>\u9023\u7dda\u7ba1\u7406\uff08\u6210\u529f/\u5931\u6557\u5834\u666f\uff09</li> <li>\u8a02\u95b1\u7ba1\u7406\uff08\u55ae\u4e00/\u591a\u8a02\u95b1\u8005\uff09</li> <li>\u8a0a\u606f\u63a5\u6536\u8207\u89e3\u6790</li> <li>\u91cd\u9023\u6a5f\u5236\uff08\u6307\u6578\u9000\u907f\uff09</li> <li>\u932f\u8aa4\u8655\u7406</li> </ul>"},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#12-api-spec","title":"1.2 \u9a57\u8b49 API Spec \u517c\u5bb9\u6027","text":"<ul> <li>\u6e2c\u8a66 <code>accept-version: \"1,2,1,1,1.0\"</code> \u662f\u5426\u6b63\u5e38\u5de5\u4f5c</li> <li>\u78ba\u8a8d\u670d\u52d9\u7aef\u662f\u5426\u9700\u8981 STOMP \u5c64\u7684 <code>heart-beat</code> header</li> <li>\u9a57\u8b49\u5be6\u969b\u63a5\u6536\u5230\u7684\u8a0a\u606f\u683c\u5f0f\u662f\u5426\u7b26\u5408 API Spec</li> </ul>"},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#2-priority-medium","title":"2. \u512a\u5148\u7d1a\uff1a\u4e2d / Priority: Medium","text":""},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#21","title":"2.1 \u66f4\u65b0\u65b9\u6cd5\u8a3b\u89e3","text":"<ul> <li>\u66f4\u65b0 <code>unsubscribe(subscriberId:)</code> \u7684\u8a3b\u89e3\uff0c\u8aaa\u660e\u7576\u524d\u5be6\u4f5c\u5df2\u7d93\u89e3\u6c7a\u4e86 AsyncStream subscriberId \u7684\u554f\u984c</li> </ul>"},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#22-integration-test","title":"2.2 \u6dfb\u52a0 Integration Test","text":"<ul> <li>\u5728 <code>MatchChatIntegrationTests</code> \u4e2d\u6dfb\u52a0 <code>ChatWebSocketClientIntegrationTests.swift</code></li> <li>\u6e2c\u8a66\u5be6\u969b WebSocket \u9023\u7dda\u3001\u8a02\u95b1\u3001\u8a0a\u606f\u63a5\u6536</li> </ul>"},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#3-priority-low","title":"3. \u512a\u5148\u7d1a\uff1a\u4f4e / Priority: Low","text":""},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#31","title":"3.1 \u4ee3\u78bc\u512a\u5316","text":"<ul> <li>\u8003\u616e\u5c07 <code>extractChatroomId()</code> \u6539\u70ba\u66f4\u5065\u58ef\u7684\u6b63\u5247\u8868\u9054\u5f0f\u89e3\u6790</li> <li>\u8003\u616e\u6dfb\u52a0\u66f4\u8a73\u7d30\u7684\u932f\u8aa4\u65e5\u8a8c</li> </ul>"},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#summary","title":"\u2705 \u7e3d\u7d50 / Summary","text":""},{"location":"13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check/#overall-assessment","title":"\u6574\u9ad4\u8a55\u4f30 / Overall Assessment","text":"<p>\u5be6\u4f5c\u5b8c\u6210\u5ea6: 95% \u2705</p> <p>\u4e3b\u8981\u6210\u5c31: - \u2705 \u6240\u6709\u6838\u5fc3\u529f\u80fd\u5df2\u5be6\u4f5c - \u2705 \u7b26\u5408 TDD \u8a2d\u8a08\u898f\u7bc4\uff08\u4f7f\u7528 actor\u3001AsyncStream \u7b49\uff09 - \u2705 \u6b63\u78ba\u4f7f\u7528 SportyStomp \u6846\u67b6 - \u2705 \u5be6\u4f5c\u6307\u6578\u9000\u907f\u91cd\u9023\u7b56\u7565 - \u2705 \u652f\u63f4\u591a\u8a02\u95b1\u8005\u6a21\u5f0f</p> <p>\u4e3b\u8981\u7f3a\u5931: - \u274c \u7f3a\u5c11 ChatWebSocketClient \u55ae\u5143\u6e2c\u8a66 - \u26a0\ufe0f \u9700\u8981\u9a57\u8b49 API Spec \u517c\u5bb9\u6027\uff08accept-version\u3001heart-beat\u3001\u8a0a\u606f\u683c\u5f0f\uff09</p> <p>\u5efa\u8b70\u884c\u52d5: 1. \u7acb\u5373: \u6dfb\u52a0 ChatWebSocketClient \u55ae\u5143\u6e2c\u8a66 2. \u77ed\u671f: \u9a57\u8b49 API Spec \u517c\u5bb9\u6027\uff08Integration Test\uff09 3. \u4e2d\u671f: \u66f4\u65b0 TDD \u6587\u4ef6\uff0c\u53cd\u6620\u5be6\u969b\u7684\u65b9\u6cd5\u7c3d\u540d</p> <p>\u5831\u544a\u751f\u6210\u6642\u9593: 2025-12-03 \u4e0b\u6b21\u6aa2\u67e5\u5efa\u8b70: \u5b8c\u6210\u55ae\u5143\u6e2c\u8a66\u5f8c</p>"},{"location":"13_Implementation_Status/api_spec_review_2025-12-03/","title":"API Spec Review Report","text":"<p>Review \u65e5\u671f: 2025-12-03 \u57fa\u6e96\u6587\u4ef6: <code>08_API Spec &amp; Mapping/01_api_spec.md</code> Review \u7bc4\u570d: \u6240\u6709 TDDs \u6587\u4ef6\u8207\u65b0 API Spec \u7684\u4e00\u81f4\u6027\u6aa2\u67e5</p>"},{"location":"13_Implementation_Status/api_spec_review_2025-12-03/#_1","title":"\ud83d\udccb \u57f7\u884c\u6458\u8981","text":"<p>\u672c\u6b21 review \u4ee5\u66f4\u65b0\u5f8c\u7684 <code>01_api_spec.md</code> \u70ba\u57fa\u6e96\uff0c\u6aa2\u67e5\u5176\u4ed6 TDD \u6587\u4ef6\u7684\u4e00\u81f4\u6027\u3002\u65b0 API Spec \u57fa\u65bc\u5be6\u969b\u7684 API \u6587\u6a94\uff08FComAPI_Documentation.md \u548c LiveChat_API_Documentation.md\uff09\uff0c\u4e26\u61c9\u7528\u4e86\u904e\u6ffe\u898f\u5247\u3002</p>"},{"location":"13_Implementation_Status/api_spec_review_2025-12-03/#_2","title":"\ud83d\udd0d \u767c\u73fe\u7684\u4e0d\u4e00\u81f4\u554f\u984c","text":""},{"location":"13_Implementation_Status/api_spec_review_2025-12-03/#1-tdd-010-prematchcommentapi","title":"1. TDD-010: PrematchCommentAPI","text":""},{"location":"13_Implementation_Status/api_spec_review_2025-12-03/#1-endpoint","title":"\u274c \u554f\u984c 1: Endpoint \u5b9a\u7fa9\u4e0d\u4e00\u81f4","text":"<p>\u65b0 API Spec \u4e2d\u7684 Endpoints: - <code>POST /chat/match/comment/batch/info</code> (\u6279\u91cf\u7372\u53d6) - <code>GET /chat/match/comment/info/{refId}</code> (\u55ae\u500b\u7372\u53d6) - <code>GET /chat/match/comment/popular</code> (\u71b1\u5ea6\u6392\u5e8f) - <code>GET /chat/match/comment/newest</code> (\u6700\u65b0\u6392\u5e8f) - <code>GET /chat/match/comment/replies</code> (\u56de\u8986\u5217\u8868) - <code>POST /chat/match/comment</code> (\u767c\u4f48\u8a55\u8ad6) - <code>POST /chat/match/comment/like</code> (\u9ede\u8b9a)</p> <p>TDD-010 \u4e2d\u7684 Endpoint \u5b9a\u7fa9\u554f\u984c:</p> <ol> <li><code>getCommentMeta</code> endpoint \u5b9a\u7fa9\u932f\u8aa4:</li> <li>TDD-010 Code Example (\u7b2c 86-87 \u884c):      <pre><code>case .getCommentMeta:\n    return \"\\(base)/batch/info\"\n</code></pre></li> <li>\u554f\u984c: <ul> <li>Method \u5b9a\u7fa9\u70ba <code>GET</code> (\u7b2c 101 \u884c)\uff0c\u4f46\u5be6\u969b API \u662f <code>POST</code></li> <li>\u53c3\u6578\u5b9a\u7fa9\u70ba <code>refId: String</code> (\u7b2c 119 \u884c)\uff0c\u4f46\u5be6\u969b API \u9700\u8981 <code>refIdList: [String]</code></li> </ul> </li> <li> <p>\u61c9\u4fee\u6b63\u70ba:      <pre><code>case .getBatchCommentInfo(let refIdList):\n    return \"\\(base)/batch/info\"\n// Method: POST\n// Parameters: [\"refIdList\": refIdList]\n</code></pre></p> </li> <li> <p><code>getComments</code> endpoint \u5b9a\u7fa9\u4e0d\u5b8c\u6574:</p> </li> <li>TDD-010 Code Example (\u7b2c 88-89 \u884c):      <pre><code>case .getComments:\n    return \"\\(base)/info/{refId}\"\n</code></pre></li> <li>\u554f\u984c: <ul> <li>\u65b0 API Spec \u4e2d\u6709\u4e09\u500b\u4e0d\u540c\u7684 endpoints\uff1a</li> <li><code>GET /chat/match/comment/info/{refId}</code> (\u7372\u53d6\u55ae\u500b\u8a55\u8ad6\u8cc7\u8a0a)</li> <li><code>GET /chat/match/comment/popular</code> (\u71b1\u5ea6\u6392\u5e8f)</li> <li><code>GET /chat/match/comment/newest</code> (\u6700\u65b0\u6392\u5e8f)</li> <li>TDD-010 \u53ea\u5b9a\u7fa9\u4e86\u4e00\u500b <code>getComments</code>\uff0c\u7121\u6cd5\u5340\u5206\u9019\u4e09\u500b\u4e0d\u540c\u7684 API</li> </ul> </li> <li> <p>\u61c9\u4fee\u6b63\u70ba: \u9700\u8981\u5b9a\u7fa9\u4e09\u500b\u4e0d\u540c\u7684 endpoints</p> </li> <li> <p><code>getReplies</code> endpoint \u53c3\u6578\u4e0d\u4e00\u81f4:</p> </li> <li>TDD-010 Code Example (\u7b2c 135-140 \u884c):      <pre><code>case .getReplies(let commentId, let cursor):\n    var params: [String: Any] = [\"commentId\": commentId]\n</code></pre></li> <li>\u65b0 API Spec: <code>GET /chat/match/comment/replies</code> \u4f7f\u7528 <code>parentCommentId</code> \u4f5c\u70ba query parameter</li> <li>\u61c9\u4fee\u6b63\u70ba: \u53c3\u6578\u540d\u7a31\u61c9\u70ba <code>parentCommentId</code> \u800c\u975e <code>commentId</code></li> </ol>"},{"location":"13_Implementation_Status/api_spec_review_2025-12-03/#2-dto","title":"\u274c \u554f\u984c 2: DTO \u7d50\u69cb\u4e0d\u4e00\u81f4","text":"<p>\u65b0 API Spec \u4e2d\u7684 CommentDTO: <pre><code>struct CommentDTO: Codable {\n    let id: Int64\n    let parentId: Int64  // 0 \u8868\u793a\u7b2c\u4e00\u5c64\u8a55\u8ad6\n    let sharedBetsMeta: String?  // \u5171\u4eab\u6295\u6ce8\u8cc7\u8a0a\uff08\u81ea\u8a02 JSON \u683c\u5f0f\uff09\n    let userId: String\n    let userNickname: String\n    let userTierLevel: String\n    let userAvatar: String\n    let countryCode: String\n    let comment: String  // \u6ce8\u610f\uff1a\u6b04\u4f4d\u540d\u7a31\u662f \"comment\" \u800c\u975e \"content\"\n    let isIsolated: Bool\n    let isDeleted: Bool\n    let likedCount: Int\n    let repliesCount: Int\n    let likedByMe: Bool\n    let createTime: Int64  // \u6642\u9593\u6233\uff08\u6beb\u79d2\uff09\n    let tagUserId: String?\n    let tagUserNickname: String?\n}\n</code></pre></p> <p>TDD-010 Code Example \u4e2d\u7684 CommentDTO (\u7b2c 152-184 \u884c): <pre><code>public struct CommentDTO: Decodable, Sendable {\n    public let id: Int64\n    public let content: String  // \u274c \u61c9\u70ba \"comment\"\n    public let likeCount: Int  // \u274c \u61c9\u70ba \"likedCount\"\n    public let authorId: String  // \u274c \u61c9\u70ba \"userId\"\n    public let authorNickname: String?  // \u274c \u61c9\u70ba \"userNickname\"\n    public let parentId: Int64\n    public let createdAt: Int64  // \u274c \u61c9\u70ba \"createTime\"\n    // \u274c \u7f3a\u5c11: sharedBetsMeta, userTierLevel, userAvatar, countryCode, tagUserId, tagUserNickname\n}\n</code></pre></p> <p>\u61c9\u4fee\u6b63: DTO \u7d50\u69cb\u9700\u8981\u5b8c\u5168\u5c0d\u9f4a\u65b0 API Spec \u7684 Response Example\u3002</p>"},{"location":"13_Implementation_Status/api_spec_review_2025-12-03/#2-tdd-011-chatapi","title":"2. TDD-011: ChatAPI","text":""},{"location":"13_Implementation_Status/api_spec_review_2025-12-03/#1-endpoints","title":"\u274c \u554f\u984c 1: \u7f3a\u5c11 Endpoints","text":"<p>\u65b0 API Spec \u4e2d\u7684 Endpoints: - <code>POST /chat/match/batch/count</code> \u2705 - <code>GET /chat/match/{refId}</code> \u2705 - <code>GET /chat/match/backward</code> \u2705 - <code>POST /chat/match/message</code> \u2705 - <code>POST /chat/match/join</code> \u274c \u7f3a\u5c11 - <code>POST /chat/match/leave</code> \u274c \u7f3a\u5c11 - <code>POST /chat/match/leave/bulk</code> \u274c \u7f3a\u5c11 - <code>wss://{domain}/chat/websocket/web-chat</code> \u2705</p> <p>TDD-011 \u4e2d\u5217\u51fa\u7684 Endpoints (\u7b2c 35-39 \u884c): - <code>POST /chat/match/batch/count</code> \u2705 - <code>GET /chat/match/{refId}</code> \u2705 - <code>GET /chat/match/backward</code> \u2705 - <code>POST /chat/match/message</code> \u2705 - <code>wss://{domain}/chat/websocket/web-chat</code> \u2705</p> <p>\u7f3a\u5c11\u7684 Endpoints: - <code>POST /chat/match/join</code> (\u53ef\u9078\u64cd\u4f5c) - <code>POST /chat/match/leave</code> (\u53ef\u9078\u64cd\u4f5c) - <code>POST /chat/match/leave/bulk</code> (\u6279\u91cf\u5f37\u5236\u96e2\u958b)</p> <p>\u5efa\u8b70: \u96d6\u7136\u9019\u4e9b\u662f\u53ef\u9078\u64cd\u4f5c\uff0c\u4f46\u61c9\u5728 TDD-011 \u4e2d\u5217\u51fa\uff0c\u6216\u5728\u76f8\u95dc UseCase tickets \u4e2d\u8aaa\u660e\u3002</p>"},{"location":"13_Implementation_Status/api_spec_review_2025-12-03/#2-websocket","title":"\u274c \u554f\u984c 2: WebSocket \u8a0a\u606f\u683c\u5f0f\u8aaa\u660e\u4e0d\u5b8c\u6574","text":"<p>\u65b0 API Spec \u4e2d\u7684 WebSocket \u898f\u683c: - \u8a73\u7d30\u7684 Connect Headers (Platform, App-Version, Device-Id, userId) - Subscribe Headers (x-queue-name) - Unsubscribe Format - Message Types (msgType: 1=TEXT, 4=JSON, 5=GIF) - \u5b8c\u6574\u7684 Response Example</p> <p>TDD-011 \u4e2d\u7684\u8aaa\u660e: \u50c5\u63d0\u5230 \"\u5b9a\u7fa9 WebSocket \u7aef\u9ede\u548c\u8a0a\u606f\u683c\u5f0f\"\uff0c\u4f46\u6c92\u6709\u8a73\u7d30\u898f\u683c\u3002</p> <p>\u5efa\u8b70: \u61c9\u5728 TDD-011 \u4e2d\u88dc\u5145 WebSocket \u7684\u8a73\u7d30\u898f\u683c\uff0c\u6216\u660e\u78ba\u5f15\u7528 API Spec \u6587\u4ef6\u3002</p>"},{"location":"13_Implementation_Status/api_spec_review_2025-12-03/#3-tdd-020-prematchcommentclient","title":"3. TDD-020: PrematchCommentClient","text":""},{"location":"13_Implementation_Status/api_spec_review_2025-12-03/#1","title":"\u274c \u554f\u984c 1: \u65b9\u6cd5\u5b9a\u7fa9\u4e0d\u5b8c\u6574","text":"<p>\u65b0 API Spec \u4e2d\u7684 API: - <code>POST /chat/match/comment/batch/info</code> \u2192 <code>getBatchCommentInfo(refIdList: [String])</code> - <code>GET /chat/match/comment/info/{refId}</code> \u2192 <code>getCommentMeta(refId: String)</code> - <code>GET /chat/match/comment/popular</code> \u2192 <code>getComments(refId: String, mode: \"popular\", pageNum: Int?, pageSize: Int?)</code> - <code>GET /chat/match/comment/newest</code> \u2192 <code>getComments(refId: String, mode: \"newest\", prevCommentId: Int64?, pageSize: Int?)</code> - <code>GET /chat/match/comment/replies</code> \u2192 <code>getReplies(parentCommentId: Int64, prevCommentId: Int64?, pageSize: Int?)</code> - <code>POST /chat/match/comment</code> \u2192 <code>publishComment(refId: String, content: String, parentId: Int64?, ...)</code> - <code>POST /chat/match/comment/like</code> \u2192 <code>toggleLike(commentId: Int64)</code></p> <p>TDD-020 Code Example \u4e2d\u7684\u65b9\u6cd5 (\u7b2c 51-59 \u884c): <pre><code>public func getCommentMeta(refId: String) async throws -&gt; PrematchCommentAPI.CommentMetaDTO\npublic func getComments(refId: String, mode: String, cursor: Int?) async throws -&gt; PrematchCommentAPI.CommentPageDTO\n// \u5176\u4ed6\u65b9\u6cd5...\n</code></pre></p> <p>\u554f\u984c: 1. \u7f3a\u5c11 <code>getBatchCommentInfo</code> \u65b9\u6cd5\uff08\u5c0d\u61c9 <code>POST /chat/match/comment/batch/info</code>\uff09 2. <code>getComments</code> \u7684\u53c3\u6578\u5b9a\u7fa9\u4e0d\u5b8c\u6574\uff1a    - <code>mode = \"popular\"</code> \u6642\u9700\u8981 <code>pageNum: Int?</code>    - <code>mode = \"newest\"</code> \u6642\u9700\u8981 <code>prevCommentId: Int64?</code> 3. <code>getReplies</code> \u7684\u53c3\u6578\u61c9\u70ba <code>parentCommentId: Int64</code> \u800c\u975e <code>commentId: String</code> 4. <code>publishComment</code> \u7684\u53c3\u6578\u61c9\u5305\u542b <code>tagUserId: String?</code> \u548c <code>sharedBetsMeta</code> 5. <code>toggleLike</code> \u7684\u53c3\u6578\u61c9\u70ba <code>commentId: Int64</code> \u800c\u975e <code>String</code></p> <p>\u5efa\u8b70: \u66f4\u65b0 TDD-020 \u7684\u65b9\u6cd5\u5b9a\u7fa9\u4ee5\u5c0d\u9f4a\u65b0 API Spec\u3002</p>"},{"location":"13_Implementation_Status/api_spec_review_2025-12-03/#4-tdd-021-livechatclient","title":"4. TDD-021: LiveChatClient","text":""},{"location":"13_Implementation_Status/api_spec_review_2025-12-03/#1_1","title":"\u274c \u554f\u984c 1: \u65b9\u6cd5\u5b9a\u7fa9\u4e0d\u5b8c\u6574","text":"<p>\u65b0 API Spec \u4e2d\u7684 API: - <code>POST /chat/match/batch/count</code> \u2192 <code>getBatchCount(refIdList: [String])</code> - <code>GET /chat/match/{refId}</code> \u2192 <code>getChatroomInfo(refId: String, userId: String?)</code> - <code>GET /chat/match/backward</code> \u2192 <code>getHistoricalMessages(chatroomId: String, messageNo: Int, length: Int?)</code> - <code>POST /chat/match/message</code> \u2192 <code>sendMessage(chatroomId: String, text: String)</code> - <code>POST /chat/match/join</code> \u2192 <code>joinChatroom(chatroomId: String)</code> \u274c \u7f3a\u5c11 - <code>POST /chat/match/leave</code> \u2192 <code>leaveChatroom(chatroomId: String)</code> \u274c \u7f3a\u5c11 - <code>POST /chat/match/leave/bulk</code> \u2192 <code>bulkLeaveChatroom(chatroomId: String, excludeUserIds: [String]?)</code> \u274c \u7f3a\u5c11</p> <p>TDD-021 Code Example \u4e2d\u7684\u65b9\u6cd5 (\u7b2c 51-56 \u884c): <pre><code>public func getChatroomInfo(refId: String) async throws -&gt; ChatAPI.ChatroomInfoDTO\n// \u5176\u4ed6\u65b9\u6cd5...\n</code></pre></p> <p>\u554f\u984c: 1. \u7f3a\u5c11 <code>getBatchCount</code> \u65b9\u6cd5\uff08\u5c0d\u61c9 <code>POST /chat/match/batch/count</code>\uff09 2. <code>getChatroomInfo</code> \u7f3a\u5c11\u53ef\u9078\u7684 <code>userId</code> \u53c3\u6578 3. \u7f3a\u5c11 <code>joinChatroom</code>\u3001<code>leaveChatroom</code>\u3001<code>bulkLeaveChatroom</code> \u65b9\u6cd5</p> <p>\u5efa\u8b70: \u66f4\u65b0 TDD-021 \u7684\u65b9\u6cd5\u5b9a\u7fa9\u4ee5\u5c0d\u9f4a\u65b0 API Spec\u3002</p>"},{"location":"13_Implementation_Status/api_spec_review_2025-12-03/#5-domain-model","title":"5. Domain Model \u5b9a\u7fa9","text":""},{"location":"13_Implementation_Status/api_spec_review_2025-12-03/#_3","title":"\u2705 \u57fa\u672c\u4e00\u81f4","text":"<p>\u65b0 API Spec \u4e2d\u7684 Response DTO \u8207 Domain Model \u7684 Mapping \u908f\u8f2f\u57fa\u672c\u4e00\u81f4\uff0c\u4f46\u9700\u8981\u6ce8\u610f\uff1a</p> <ol> <li>CommentDTO \u6b04\u4f4d\u5c0d\u61c9:</li> <li>API: <code>comment</code> \u2192 Domain: <code>content</code> \u2705</li> <li>API: <code>userId</code> \u2192 Domain: <code>authorId</code> \u2705</li> <li>API: <code>userNickname</code> \u2192 Domain: <code>authorNickname</code> \u2705</li> <li>API: <code>likedCount</code> \u2192 Domain: <code>likeCount</code> \u2705</li> <li> <p>API: <code>createTime</code> (Int64 \u6beb\u79d2) \u2192 Domain: <code>createdAt</code> (Date) \u2705</p> </li> <li> <p>MessageDTO \u6b04\u4f4d\u5c0d\u61c9:</p> </li> <li>API: <code>jsonBody.text</code> \u2192 Domain: <code>content</code> \u2705</li> <li>API: <code>postUserId</code> \u2192 Domain: <code>authorId</code> \u2705</li> <li>API: <code>userInfo.nickname</code> \u2192 Domain: <code>authorNickname</code> \u2705</li> <li>API: <code>createTime</code> (Int64 \u6beb\u79d2) \u2192 Domain: <code>createdAt</code> (Date) \u2705</li> </ol> <p>\u5efa\u8b70: Domain Model \u5b9a\u7fa9\u8207\u65b0 API Spec \u7684 Mapping \u908f\u8f2f\u4e00\u81f4\uff0c\u7121\u9700\u4fee\u6539\u3002</p>"},{"location":"13_Implementation_Status/api_spec_review_2025-12-03/#6-usecase-input-output-model","title":"6. UseCase Input &amp; Output Model","text":""},{"location":"13_Implementation_Status/api_spec_review_2025-12-03/#_4","title":"\u26a0\ufe0f \u9700\u8981\u6aa2\u67e5\u53c3\u6578\u5c0d\u61c9","text":"<p>\u65b0 API Spec \u4e2d\u7684 Request \u53c3\u6578 \u8207 UseCase Input \u9700\u8981\u5c0d\u61c9\u6aa2\u67e5\uff1a</p> <ol> <li>ReloadCommentListUseCase:</li> <li>UseCase Input: <code>mode: SortMode</code> (top / newest)</li> <li>API Spec: <ul> <li><code>mode = \"top\"</code> \u2192 <code>GET /chat/match/comment/popular?pageNum=...</code></li> <li><code>mode = \"newest\"</code> \u2192 <code>GET /chat/match/comment/newest?prevCommentId=...</code></li> </ul> </li> <li> <p>\u554f\u984c: UseCase \u7684 <code>cursor</code> \u53c3\u6578\u9700\u8981\u5c0d\u61c9\u5230\u4e0d\u540c\u7684 API \u53c3\u6578\uff1a</p> <ul> <li><code>popular</code> \u6a21\u5f0f\u4f7f\u7528 <code>pageNum</code></li> <li><code>newest</code> \u6a21\u5f0f\u4f7f\u7528 <code>prevCommentId</code></li> </ul> </li> <li> <p>LoadRepliesUseCase:</p> </li> <li>UseCase Input: <code>commentId: String</code></li> <li>API Spec: <code>GET /chat/match/comment/replies?parentCommentId=...</code></li> <li>\u554f\u984c: \u53c3\u6578\u540d\u7a31\u4e0d\u4e00\u81f4\uff08<code>commentId</code> vs <code>parentCommentId</code>\uff09</li> </ol> <p>\u5efa\u8b70: \u6aa2\u67e5 UseCase Input &amp; Output Model \u6587\u4ef6\uff0c\u78ba\u8a8d\u53c3\u6578\u5c0d\u61c9\u95dc\u4fc2\u3002</p>"},{"location":"13_Implementation_Status/api_spec_review_2025-12-03/#_5","title":"\ud83d\udcdd \u5efa\u8b70\u4fee\u6b63\u6e05\u55ae","text":""},{"location":"13_Implementation_Status/api_spec_review_2025-12-03/#p0-","title":"\u9ad8\u512a\u5148\u7d1a (P0) - \u2705 \u5df2\u5b8c\u6210","text":"<ol> <li>\u2705 TDD-010: \u4fee\u6b63 <code>getCommentMeta</code> endpoint \u5b9a\u7fa9\uff08Method \u548c\u53c3\u6578\uff09</li> <li>\u2705 TDD-010: \u5c07 <code>getComments</code> \u62c6\u5206\u70ba\u4e09\u500b\u7368\u7acb\u7684 endpoints</li> <li>\u2705 TDD-010: \u66f4\u65b0 <code>CommentDTO</code> \u7d50\u69cb\u4ee5\u5c0d\u9f4a\u65b0 API Spec</li> <li>\u2705 TDD-011: \u88dc\u5145\u7f3a\u5c11\u7684 endpoints\uff08join, leave, leave/bulk\uff09</li> <li>\u2705 TDD-020: \u88dc\u5145 <code>getBatchCommentInfo</code> \u65b9\u6cd5</li> <li>\u2705 TDD-020: \u66f4\u65b0\u65b9\u6cd5\u53c3\u6578\u5b9a\u7fa9\u4ee5\u5c0d\u9f4a\u65b0 API Spec</li> <li>\u2705 TDD-021: \u88dc\u5145 <code>getBatchCount</code> \u65b9\u6cd5</li> <li>\u2705 TDD-021: \u88dc\u5145 <code>joinChatroom</code>\u3001<code>leaveChatroom</code>\u3001<code>bulkLeaveChatroom</code> \u65b9\u6cd5</li> </ol>"},{"location":"13_Implementation_Status/api_spec_review_2025-12-03/#p1-","title":"\u4e2d\u512a\u5148\u7d1a (P1) - \u2705 \u5df2\u5b8c\u6210","text":"<ol> <li>\u2705 TDD-011: \u88dc\u5145 WebSocket \u8a73\u7d30\u898f\u683c\u8aaa\u660e</li> <li>\u26a0\ufe0f UseCase Input &amp; Output Model: \u6aa2\u67e5\u4e26\u66f4\u65b0\u53c3\u6578\u5c0d\u61c9\u95dc\u4fc2\uff08\u9700\u8981\u9032\u4e00\u6b65\u78ba\u8a8d\uff09</li> </ol>"},{"location":"13_Implementation_Status/api_spec_review_2025-12-03/#p2-","title":"\u4f4e\u512a\u5148\u7d1a (P2) - \u2705 \u5df2\u5b8c\u6210","text":"<ol> <li>\u2705 \u66f4\u65b0\u76f8\u95dc\u6587\u4ef6\u7684 \"\u76f8\u95dc\u6587\u4ef6\" \u9023\u7d50\uff0c\u78ba\u4fdd\u6307\u5411\u6b63\u78ba\u7684 API Spec \u8def\u5f91</li> </ol>"},{"location":"13_Implementation_Status/api_spec_review_2025-12-03/#_6","title":"\u2705 \u4e00\u81f4\u6027\u6aa2\u67e5\u7d50\u679c","text":""},{"location":"13_Implementation_Status/api_spec_review_2025-12-03/#_7","title":"\u5df2\u78ba\u8a8d\u4e00\u81f4\u7684\u90e8\u5206","text":"<ul> <li>\u2705 Domain Model \u5b9a\u7fa9\u8207\u65b0 API Spec \u7684 Mapping \u908f\u8f2f\u4e00\u81f4</li> <li>\u2705 \u57fa\u672c\u67b6\u69cb\u8a2d\u8a08\uff08Clean Architecture\u3001Module Responsibility\uff09\u8207\u65b0 API Spec \u4e00\u81f4</li> <li>\u2705 WebSocket \u57fa\u672c\u8a2d\u8a08\u8207\u65b0 API Spec \u4e00\u81f4\uff08TDD-022\uff09</li> </ul>"},{"location":"13_Implementation_Status/api_spec_review_2025-12-03/#_8","title":"\u5df2\u4fee\u6b63\u7684\u90e8\u5206","text":"<ul> <li>\u2705 TDD-010: PrematchCommentAPI endpoint \u5b9a\u7fa9\u548c\u65b9\u6cd5\u53c3\u6578\u5df2\u66f4\u65b0</li> <li>\u2705 TDD-011: ChatAPI \u5df2\u88dc\u5145\u7f3a\u5c11\u7684 endpoints \u548c WebSocket \u8a73\u7d30\u898f\u683c</li> <li>\u2705 TDD-020: PrematchCommentClient \u65b9\u6cd5\u5b9a\u7fa9\u5df2\u5b8c\u6574\u66f4\u65b0</li> <li>\u2705 TDD-021: LiveChatClient \u65b9\u6cd5\u5b9a\u7fa9\u5df2\u5b8c\u6574\u66f4\u65b0</li> <li>\u2705 \u76f8\u95dc\u6587\u4ef6\u7684 \"\u76f8\u95dc\u6587\u4ef6\" \u9023\u7d50\u5df2\u66f4\u65b0</li> </ul>"},{"location":"13_Implementation_Status/api_spec_review_2025-12-03/#_9","title":"\u9700\u8981\u9032\u4e00\u6b65\u78ba\u8a8d\u7684\u90e8\u5206","text":"<ul> <li>\u26a0\ufe0f UseCase Input &amp; Output Model: \u53c3\u6578\u5c0d\u61c9\u95dc\u4fc2\u9700\u8981\u78ba\u8a8d\uff08\u5efa\u8b70\u5728\u5be6\u4f5c\u6642\u9a57\u8b49\uff09</li> </ul>"},{"location":"13_Implementation_Status/api_spec_review_2025-12-03/#_10","title":"\ud83d\udd17 \u76f8\u95dc\u6587\u4ef6","text":"<ul> <li>\u57fa\u6e96\u6587\u4ef6: <code>08_API Spec &amp; Mapping/01_api_spec.md</code></li> <li>API \u6587\u6a94\u4f86\u6e90: </li> <li><code>Input/LiveChat&amp;PrematchComment/API Docs/FComAPI_Documentation.md</code></li> <li><code>Input/LiveChat&amp;PrematchComment/API Docs/LiveChat_API_Documentation.md</code></li> <li>\u9700\u8981\u66f4\u65b0\u7684 Tickets:</li> <li>TDD-010: PrematchCommentAPI</li> <li>TDD-011: ChatAPI</li> <li>TDD-020: PrematchCommentClient</li> <li>TDD-021: LiveChatClient</li> </ul>"},{"location":"13_Implementation_Status/api_spec_review_2025-12-03/#_11","title":"\ud83d\udccc \u4e0b\u4e00\u6b65\u884c\u52d5","text":"<ol> <li>\u2705 \u66f4\u65b0 TDD-010 \u548c TDD-011 \u7684 endpoint \u5b9a\u7fa9\uff08\u5df2\u5b8c\u6210\uff09</li> <li>\u2705 \u66f4\u65b0 TDD-020 \u548c TDD-021 \u7684\u65b9\u6cd5\u5b9a\u7fa9\uff08\u5df2\u5b8c\u6210\uff09</li> <li>\u26a0\ufe0f \u6aa2\u67e5\u4e26\u66f4\u65b0 UseCase Input &amp; Output Model\uff08\u5efa\u8b70\u5728\u5be6\u4f5c\u6642\u9a57\u8b49\uff09</li> <li>\u2705 \u91cd\u65b0\u9a57\u8b49\u6240\u6709\u76f8\u95dc\u6587\u4ef6\u7684\u5f15\u7528\u9023\u7d50\uff08\u5df2\u5b8c\u6210\uff09</li> </ol>"},{"location":"13_Implementation_Status/api_spec_review_2025-12-03/#_12","title":"\ud83d\udccb \u4fee\u6b63\u6458\u8981","text":"<p>\u4fee\u6b63\u65e5\u671f: 2025-12-03</p> <p>\u5df2\u4fee\u6b63\u7684\u6587\u4ef6: - \u2705 <code>12_Tickets/02_api/TDD-010_PrematchCommentAPI.md</code> - \u2705 <code>12_Tickets/02_api/TDD-011_ChatAPI.md</code> - \u2705 <code>12_Tickets/03_client/TDD-020_PrematchCommentClient.md</code> - \u2705 <code>12_Tickets/03_client/TDD-021_LiveChatClient.md</code></p> <p>\u4e3b\u8981\u4fee\u6b63\u5167\u5bb9: 1. TDD-010: \u5b8c\u5168\u91cd\u5beb endpoint \u5b9a\u7fa9\uff0c\u5c0d\u9f4a\u65b0 API Spec \u7684 7 \u500b endpoints 2. TDD-010: \u66f4\u65b0 CommentDTO \u7d50\u69cb\uff0c\u5305\u542b\u6240\u6709\u65b0 API Spec \u7684\u6b04\u4f4d 3. TDD-011: \u88dc\u5145 3 \u500b\u7f3a\u5c11\u7684 endpoints\uff08join, leave, leave/bulk\uff09 4. TDD-011: \u88dc\u5145 WebSocket \u8a73\u7d30\u898f\u683c\u8aaa\u660e\u548c\u7a0b\u5f0f\u78bc\u7bc4\u4f8b 5. TDD-020: \u66f4\u65b0\u6240\u6709\u65b9\u6cd5\u5b9a\u7fa9\uff0c\u5c0d\u9f4a\u65b0\u7684 Repository \u65b9\u6cd5\u7c3d\u540d 6. TDD-021: \u88dc\u5145\u6240\u6709\u7f3a\u5c11\u7684\u65b9\u6cd5\uff0c\u5305\u62ec\u53ef\u9078\u64cd\u4f5c\u7684 endpoints 7. \u66f4\u65b0\u6240\u6709\u76f8\u95dc\u6587\u4ef6\u7684\u9023\u7d50\u8def\u5f91</p>"},{"location":"13_Implementation_Status/implementation_review_2025-12-03/","title":"Implementation Review Report","text":"<p>Review \u65e5\u671f: 2025-12-03 \u57fa\u6e96: TDDs \u6587\u4ef6\uff08\u5df2\u66f4\u65b0\u5c0d\u9f4a\u65b0 API Spec\uff09 Review \u7bc4\u570d: MatchChat \u4e0b\u7684\u6240\u6709\u5be6\u4f5c</p>"},{"location":"13_Implementation_Status/implementation_review_2025-12-03/#_1","title":"\ud83d\udccb \u57f7\u884c\u6458\u8981","text":"<p>\u672c\u6b21 review \u6aa2\u67e5 MatchChat \u4e0b\u7684\u6240\u6709\u5be6\u4f5c\u662f\u5426\u7b26\u5408\u6700\u65b0\u7684 TDDs \u6587\u4ef6\u898f\u7bc4\u3002\u767c\u73fe\u591a\u8655\u4e0d\u4e00\u81f4\uff0c\u9700\u8981\u4fee\u6b63\u4ee5\u5c0d\u9f4a TDD-010\u3001TDD-011\u3001TDD-020\u3001TDD-021\u3001TDD-022\u3002</p>"},{"location":"13_Implementation_Status/implementation_review_2025-12-03/#_2","title":"\ud83d\udd0d \u767c\u73fe\u7684\u4e0d\u4e00\u81f4\u554f\u984c","text":""},{"location":"13_Implementation_Status/implementation_review_2025-12-03/#1-chatwebsocketclientswift","title":"1. ChatWebSocketClient.swift","text":""},{"location":"13_Implementation_Status/implementation_review_2025-12-03/#1-connect-headers","title":"\u26a0\ufe0f \u554f\u984c 1: Connect Headers \u4e0d\u5b8c\u6574","text":"<p>TDD-022 \u8981\u6c42 (\u6839\u64da API Spec): - <code>Platform: ios</code> - <code>App-Version: {version}</code> - <code>Device-Id: {deviceId}</code> - <code>userId: {userId}</code></p> <p>\u5be6\u969b\u5be6\u4f5c (\u7b2c 93-95 \u884c): <pre><code>self.webSocketRequestHeaders = [\n    \"userId\": userId\n]\n</code></pre></p> <p>\u554f\u984c: \u7f3a\u5c11 <code>Platform</code>\u3001<code>App-Version</code>\u3001<code>Device-Id</code> headers</p> <p>\u61c9\u4fee\u6b63\u70ba: <pre><code>self.webSocketRequestHeaders = [\n    \"Platform\": \"ios\",\n    \"App-Version\": AppConfiguration.current.appVersion, // \u6216\u5be6\u969b\u7684\u7248\u672c\u865f\n    \"Device-Id\": DeviceInfo.identifier, // \u6216\u5be6\u969b\u7684 device ID\n    \"userId\": userId\n]\n</code></pre></p>"},{"location":"13_Implementation_Status/implementation_review_2025-12-03/#_3","title":"\u2705 \u5176\u4ed6\u90e8\u5206\u57fa\u672c\u4e00\u81f4","text":"<ul> <li>Actor \u5be6\u4f5c \u2705</li> <li>AsyncStream \u4f7f\u7528 \u2705</li> <li>\u8a02\u95b1\u7ba1\u7406 \u2705</li> <li>\u91cd\u9023\u6a5f\u5236 \u2705</li> <li>Delegate \u8655\u7406 \u2705</li> </ul>"},{"location":"13_Implementation_Status/implementation_review_2025-12-03/#2-livechatclientswift","title":"2. LiveChatClient.swift","text":""},{"location":"13_Implementation_Status/implementation_review_2025-12-03/#1","title":"\u274c \u554f\u984c 1: \u7f3a\u5c11\u65b9\u6cd5","text":"<p>TDD-021 \u8981\u6c42\u7684\u65b9\u6cd5: - \u2705 <code>getBatchCount(refIdList: [String])</code> - \u2705 <code>getChatroomInfo(refId: String, userId: String?)</code> - \u2705 <code>getHistoricalMessages(chatroomId: String, messageNo: Int, length: Int?)</code> - \u2705 <code>sendMessage(chatroomId: String, text: String)</code> - \u274c <code>joinChatroom(chatroomId: String)</code> - \u7f3a\u5c11 - \u274c <code>leaveChatroom(chatroomId: String)</code> - \u7f3a\u5c11 - \u274c <code>bulkLeaveChatroom(chatroomId: String, excludeUserIds: [String]?)</code> - \u7f3a\u5c11</p> <p>\u5be6\u969b\u5be6\u4f5c: \u53ea\u6709\u524d 4 \u500b\u65b9\u6cd5</p> <p>\u61c9\u88dc\u5145: 3 \u500b\u7f3a\u5c11\u7684\u65b9\u6cd5\uff08\u96d6\u7136\u662f\u53ef\u9078\u64cd\u4f5c\uff0c\u4f46\u61c9\u5728 Client \u4e2d\u63d0\u4f9b\uff09</p>"},{"location":"13_Implementation_Status/implementation_review_2025-12-03/#3-prematchcommentclientswift","title":"3. PrematchCommentClient.swift","text":""},{"location":"13_Implementation_Status/implementation_review_2025-12-03/#1-tdd-020","title":"\u274c \u554f\u984c 1: \u65b9\u6cd5\u7c3d\u540d\u8207 TDD-020 \u4e0d\u4e00\u81f4","text":"<p>TDD-020 \u8981\u6c42\u7684\u65b9\u6cd5: - \u274c <code>getBatchCommentInfo(refIdList: [String])</code> - \u7f3a\u5c11 - \u2705 <code>getCommentMeta(refId: String)</code> - \u5b58\u5728\u4f46\u53ef\u80fd\u7c3d\u540d\u4e0d\u4e00\u81f4 - \u274c <code>getCommentsByPopular(refId: String, pageNum: Int?, pageSize: Int?)</code> - \u7f3a\u5c11 - \u274c <code>getCommentsByNewest(refId: String, prevCommentId: Int64?, pageSize: Int?)</code> - \u7f3a\u5c11 - \u274c <code>getReplies(parentCommentId: Int64, prevCommentId: Int64?, pageSize: Int?)</code> - \u53c3\u6578\u4e0d\u4e00\u81f4 - \u274c <code>publishComment(refId: String, content: String, parentId: Int64?, sharedBetsMeta: [String: AnyCodable]?, tagUserId: String?)</code> - \u53c3\u6578\u4e0d\u4e00\u81f4 - \u274c <code>toggleLike(commentId: Int64)</code> - \u53c3\u6578\u985e\u578b\u4e0d\u4e00\u81f4\uff08String vs Int64\uff09</p> <p>\u5be6\u969b\u5be6\u4f5c (\u7b2c 13-31 \u884c): <pre><code>public func getCommentMeta(refId: String) async throws -&gt; PrematchCommentAPI.CommentMetaDataDTO\npublic func getComments(refId: String, mode: String, cursor: Int?) async throws -&gt; PrematchCommentAPI.CommentPageDTO\npublic func publishComment(refId: String, content: String, parentId: String?) async throws -&gt; PrematchCommentAPI.CommentDTO\npublic func toggleLike(commentId: String) async throws -&gt; PrematchCommentAPI.CommentDTO\npublic func getReplies(commentId: String, cursor: Int?) async throws -&gt; PrematchCommentAPI.CommentPageDTO\n</code></pre></p> <p>\u554f\u984c: 1. \u7f3a\u5c11 <code>getBatchCommentInfo</code> \u65b9\u6cd5 2. <code>getComments</code> \u61c9\u8a72\u62c6\u5206\u70ba <code>getCommentsByPopular</code> \u548c <code>getCommentsByNewest</code> 3. \u53c3\u6578\u985e\u578b\u4e0d\u4e00\u81f4\uff08String vs Int64\uff09 4. \u7f3a\u5c11\u53ef\u9078\u53c3\u6578\uff08sharedBetsMeta, tagUserId, pageSize\uff09</p>"},{"location":"13_Implementation_Status/implementation_review_2025-12-03/#4-chatapiendpointswift","title":"4. ChatAPI+Endpoint.swift","text":""},{"location":"13_Implementation_Status/implementation_review_2025-12-03/#1-endpoints","title":"\u274c \u554f\u984c 1: \u7f3a\u5c11 Endpoints","text":"<p>TDD-011 \u8981\u6c42\u7684 Endpoints: - \u2705 <code>POST /chat/match/batch/count</code> - \u2705 <code>GET /chat/match/{refId}</code> - \u2705 <code>GET /chat/match/backward</code> - \u2705 <code>POST /chat/match/message</code> - \u274c <code>POST /chat/match/join</code> - \u7f3a\u5c11 - \u274c <code>POST /chat/match/leave</code> - \u7f3a\u5c11 - \u274c <code>POST /chat/match/leave/bulk</code> - \u7f3a\u5c11</p> <p>\u5be6\u969b\u5be6\u4f5c: \u53ea\u6709\u524d 4 \u500b endpoints</p> <p>\u61c9\u88dc\u5145: 3 \u500b\u7f3a\u5c11\u7684 endpoints</p>"},{"location":"13_Implementation_Status/implementation_review_2025-12-03/#5-prematchcommentapiendpointswift","title":"5. PrematchCommentAPI+Endpoint.swift","text":""},{"location":"13_Implementation_Status/implementation_review_2025-12-03/#1-endpoint-tdd-010","title":"\u274c \u554f\u984c 1: Endpoint \u5b9a\u7fa9\u8207 TDD-010 \u4e0d\u4e00\u81f4","text":"<p>TDD-010 \u8981\u6c42\u7684 Endpoints: - <code>POST /chat/match/comment/batch/info</code> \u2192 <code>getBatchCommentInfo(refIdList: [String])</code> - <code>GET /chat/match/comment/info/{refId}</code> \u2192 <code>getCommentMeta(refId: String)</code> - <code>GET /chat/match/comment/popular</code> \u2192 <code>getCommentsByPopular(refId: String, pageNum: Int?, pageSize: Int?)</code> - <code>GET /chat/match/comment/newest</code> \u2192 <code>getCommentsByNewest(refId: String, prevCommentId: Int64?, pageSize: Int?)</code> - <code>GET /chat/match/comment/replies</code> \u2192 <code>getReplies(parentCommentId: Int64, prevCommentId: Int64?, pageSize: Int?)</code> - <code>POST /chat/match/comment</code> \u2192 <code>publishComment(...)</code> - <code>POST /chat/match/comment/like</code> \u2192 <code>toggleLike(commentId: Int64)</code></p> <p>\u5be6\u969b\u5be6\u4f5c (\u7b2c 8-12 \u884c): <pre><code>case getCommentMeta(refId: String)\ncase getComments(refId: String, mode: String, cursor: Int?)\ncase publishComment(refId: String, content: String, parentId: String?)\ncase toggleLike(commentId: String)\ncase getReplies(commentId: String, cursor: Int?)\n</code></pre></p> <p>\u554f\u984c: 1. \u7f3a\u5c11 <code>getBatchCommentInfo</code> endpoint 2. <code>getCommentMeta</code> \u7684 path \u932f\u8aa4\uff08\u61c9\u8a72\u662f <code>GET /info/{refId}</code>\uff0c\u4e0d\u662f <code>POST /batch/info</code>\uff09 3. <code>getComments</code> \u61c9\u8a72\u62c6\u5206\u70ba <code>getCommentsByPopular</code> \u548c <code>getCommentsByNewest</code> 4. \u53c3\u6578\u985e\u578b\u4e0d\u4e00\u81f4\uff08String vs Int64\uff09 5. \u53c3\u6578\u540d\u7a31\u4e0d\u4e00\u81f4\uff08commentId vs parentCommentId\uff09</p> <p>\u5be6\u969b path \u5be6\u4f5c (\u7b2c 22-24 \u884c): <pre><code>case .getCommentMeta:\n    return \"\\(base)/batch/info\"  // \u274c \u932f\u8aa4\uff1a\u61c9\u8a72\u662f GET /info/{refId}\n</code></pre></p>"},{"location":"13_Implementation_Status/implementation_review_2025-12-03/#6-prematchcommentapirepositoryswift","title":"6. PrematchCommentAPI+Repository.swift","text":""},{"location":"13_Implementation_Status/implementation_review_2025-12-03/#1-tdd-010","title":"\u274c \u554f\u984c 1: \u65b9\u6cd5\u7c3d\u540d\u8207 TDD-010 \u4e0d\u4e00\u81f4","text":"<p>TDD-010 \u8981\u6c42\u7684\u65b9\u6cd5: - <code>getBatchCommentInfo(refIdList: [String]) async throws -&gt; [CommentMetaInfoDTO]</code> - <code>getCommentMeta(refId: String) async throws -&gt; CommentMetaDataDTO</code> - <code>getCommentsByPopular(refId: String, pageNum: Int?, pageSize: Int?) async throws -&gt; [CommentDTO]</code> - <code>getCommentsByNewest(refId: String, prevCommentId: Int64?, pageSize: Int?) async throws -&gt; [CommentDTO]</code> - <code>getReplies(parentCommentId: Int64, prevCommentId: Int64?, pageSize: Int?) async throws -&gt; [CommentDTO]</code> - <code>publishComment(refId: String, content: String, parentId: Int64?, sharedBetsMeta: [String: AnyCodable]?, tagUserId: String?) async throws -&gt; CommentDTO</code> - <code>toggleLike(commentId: Int64) async throws -&gt; CommentDTO?</code></p> <p>\u5be6\u969b\u5be6\u4f5c: \u65b9\u6cd5\u7c3d\u540d\u5b8c\u5168\u4e0d\u4e00\u81f4</p>"},{"location":"13_Implementation_Status/implementation_review_2025-12-03/#_4","title":"\ud83d\udcdd \u4fee\u6b63\u5efa\u8b70","text":""},{"location":"13_Implementation_Status/implementation_review_2025-12-03/#p0","title":"\u9ad8\u512a\u5148\u7d1a (P0)","text":"<ol> <li>\u2705 ChatWebSocketClient: \u88dc\u5145 Connect Headers\uff08Platform, App-Version, Device-Id\uff09 - \u5df2\u5b8c\u6210</li> <li>\u2705 LiveChatClient: \u88dc\u5145 3 \u500b\u7f3a\u5c11\u7684\u65b9\u6cd5\uff08joinChatroom, leaveChatroom, bulkLeaveChatroom\uff09 - \u5df2\u5b8c\u6210</li> <li>\u26a0\ufe0f PrematchCommentClient: \u5b8c\u5168\u91cd\u5beb\u65b9\u6cd5\u7c3d\u540d\u4ee5\u5c0d\u9f4a TDD-020 - \u5f85\u4fee\u6b63</li> <li>\u2705 ChatAPI+Endpoint: \u88dc\u5145 3 \u500b\u7f3a\u5c11\u7684 endpoints - \u5df2\u5b8c\u6210</li> <li>\u26a0\ufe0f PrematchCommentAPI+Endpoint: \u5b8c\u5168\u91cd\u5beb\u4ee5\u5c0d\u9f4a TDD-010 - \u5f85\u4fee\u6b63</li> <li>\u26a0\ufe0f PrematchCommentAPI+Repository: \u5b8c\u5168\u91cd\u5beb\u65b9\u6cd5\u7c3d\u540d\u4ee5\u5c0d\u9f4a TDD-010 - \u5f85\u4fee\u6b63</li> </ol>"},{"location":"13_Implementation_Status/implementation_review_2025-12-03/#p1","title":"\u4e2d\u512a\u5148\u7d1a (P1)","text":"<ol> <li>\u2705 \u66f4\u65b0\u76f8\u95dc\u7684 Repository Protocol \u5b9a\u7fa9 - \u5df2\u5b8c\u6210\uff08ChatAPI\uff09</li> <li>\u26a0\ufe0f \u66f4\u65b0\u76f8\u95dc\u7684 Models \u5b9a\u7fa9\uff08\u5982\u679c\u9700\u8981\uff09 - \u5f85\u78ba\u8a8d</li> </ol>"},{"location":"13_Implementation_Status/implementation_review_2025-12-03/#_5","title":"\ud83d\udccb \u4fee\u6b63\u9032\u5ea6","text":""},{"location":"13_Implementation_Status/implementation_review_2025-12-03/#_6","title":"\u2705 \u5df2\u5b8c\u6210\u7684\u4fee\u6b63","text":"<ol> <li>ChatWebSocketClient.swift:</li> <li>\u2705 \u88dc\u5145 Connect Headers\uff08Platform, App-Version, Device-Id\uff09</li> <li> <p>\u2705 \u66f4\u65b0 init \u65b9\u6cd5\u4ee5\u63a5\u53d7\u53ef\u9078\u7684 appVersion \u548c deviceId \u53c3\u6578</p> </li> <li> <p>ChatAPI+Endpoint.swift:</p> </li> <li>\u2705 \u88dc\u5145 <code>joinChatroom</code> endpoint</li> <li>\u2705 \u88dc\u5145 <code>leaveChatroom</code> endpoint</li> <li> <p>\u2705 \u88dc\u5145 <code>bulkLeaveChatroom</code> endpoint</p> </li> <li> <p>ChatAPI+Repository.swift:</p> </li> <li>\u2705 \u88dc\u5145 <code>joinChatroom</code> \u65b9\u6cd5</li> <li>\u2705 \u88dc\u5145 <code>leaveChatroom</code> \u65b9\u6cd5</li> <li>\u2705 \u88dc\u5145 <code>bulkLeaveChatroom</code> \u65b9\u6cd5</li> <li> <p>\u2705 \u65b0\u589e <code>EmptyResponseDTO</code> \u7528\u65bc\u8655\u7406 null \u56de\u61c9</p> </li> <li> <p>ChatAPI+RepositoryProtocol.swift:</p> </li> <li> <p>\u2705 \u88dc\u5145 3 \u500b\u65b0\u65b9\u6cd5\u7684 protocol \u5b9a\u7fa9</p> </li> <li> <p>LiveChatClient.swift:</p> </li> <li>\u2705 \u88dc\u5145 <code>joinChatroom</code> \u65b9\u6cd5</li> <li>\u2705 \u88dc\u5145 <code>leaveChatroom</code> \u65b9\u6cd5</li> <li> <p>\u2705 \u88dc\u5145 <code>bulkLeaveChatroom</code> \u65b9\u6cd5</p> </li> <li> <p>TDD-022_ChatWebSocketClient.md:</p> </li> <li> <p>\u2705 \u66f4\u65b0 init \u65b9\u6cd5\u7bc4\u4f8b\u4ee5\u53cd\u6620 Connect Headers \u7684\u4fee\u6b63</p> </li> <li> <p>PrematchCommentAPI+Endpoint.swift:</p> </li> <li>\u2705 \u5b8c\u5168\u91cd\u5beb\u4ee5\u5c0d\u9f4a TDD-010</li> <li>\u2705 \u88dc\u5145 <code>getBatchCommentInfo</code> endpoint\uff08POST /batch/info\uff09</li> <li>\u2705 \u4fee\u6b63 <code>getCommentMeta</code> endpoint\uff08GET /info/{refId}\uff09</li> <li>\u2705 \u5c07 <code>getComments</code> \u62c6\u5206\u70ba <code>getCommentsByPopular</code> \u548c <code>getCommentsByNewest</code></li> <li>\u2705 \u4fee\u6b63\u6240\u6709\u53c3\u6578\u985e\u578b\uff08String vs Int64\uff09</li> <li>\u2705 \u4fee\u6b63\u53c3\u6578\u540d\u7a31\uff08commentId vs parentCommentId\uff09</li> <li> <p>\u2705 \u66f4\u65b0 <code>publishComment</code> \u4ee5\u5305\u542b sharedBetsMeta \u548c tagUserId</p> </li> <li> <p>PrematchCommentAPI+Repository.swift:</p> </li> <li>\u2705 \u5b8c\u5168\u91cd\u5beb\u65b9\u6cd5\u7c3d\u540d\u4ee5\u5c0d\u9f4a TDD-010</li> <li>\u2705 \u65b0\u589e Response Wrapper DTOs\uff08BatchCommentInfoResponseDTO, CommentMetaResponseDTO, CommentListResponseDTO, CommentResponseDTO, ToggleLikeResponseDTO\uff09</li> <li> <p>\u2705 \u66f4\u65b0\u6240\u6709\u65b9\u6cd5\u5be6\u4f5c\u4ee5\u4f7f\u7528\u65b0\u7684 endpoints</p> </li> <li> <p>PrematchCommentAPI+RepositoryProtocol.swift:</p> </li> <li> <p>\u2705 \u5b8c\u5168\u91cd\u5beb protocol \u5b9a\u7fa9\u4ee5\u5c0d\u9f4a\u65b0\u7684\u65b9\u6cd5\u7c3d\u540d</p> </li> <li> <p>PrematchCommentClient.swift:</p> <ul> <li>\u2705 \u5b8c\u5168\u91cd\u5beb\u65b9\u6cd5\u7c3d\u540d\u4ee5\u5c0d\u9f4a TDD-020</li> <li>\u2705 \u88dc\u5145 <code>getBatchCommentInfo</code> \u65b9\u6cd5</li> <li>\u2705 \u5c07 <code>getComments</code> \u62c6\u5206\u70ba <code>getCommentsByPopular</code> \u548c <code>getCommentsByNewest</code></li> <li>\u2705 \u66f4\u65b0\u6240\u6709\u65b9\u6cd5\u53c3\u6578\u985e\u578b\uff08String vs Int64\uff09</li> <li>\u2705 \u66f4\u65b0 <code>publishComment</code> \u4ee5\u5305\u542b sharedBetsMeta \u548c tagUserId</li> <li>\u2705 \u66f4\u65b0 <code>toggleLike</code> \u8fd4\u56de\u985e\u578b\u70ba\u53ef\u9078\uff08\u53ef\u80fd\u70ba null\uff09</li> </ul> </li> </ol>"},{"location":"13_Implementation_Status/implementation_review_2025-12-03/#_7","title":"\u2705 \u4fee\u6b63\u5b8c\u6210\u7e3d\u7d50","text":"<p>\u4fee\u6b63\u65e5\u671f: 2025-12-03</p> <p>\u4fee\u6b63\u7684\u6587\u4ef6: - \u2705 <code>MatchChat/Sources/MatchChat/Services/API/ChatWebSocketClient.swift</code> - \u2705 <code>MatchChat/Sources/MatchChat/Services/API/Chat/ChatAPI+Endpoint.swift</code> - \u2705 <code>MatchChat/Sources/MatchChat/Services/API/Chat/ChatAPI+Repository.swift</code> - \u2705 <code>MatchChat/Sources/MatchChat/Services/API/Chat/ChatAPI+RepositoryProtocol.swift</code> - \u2705 <code>MatchChat/Sources/MatchChat/Services/API/LiveChatClient.swift</code> - \u2705 <code>MatchChat/Sources/MatchChat/Services/API/PrematchComment/PrematchCommentAPI+Endpoint.swift</code> - \u2705 <code>MatchChat/Sources/MatchChat/Services/API/PrematchComment/PrematchCommentAPI+Repository.swift</code> - \u2705 <code>MatchChat/Sources/MatchChat/Services/API/PrematchComment/PrematchCommentAPI+RepositoryProtocol.swift</code> - \u2705 <code>MatchChat/Sources/MatchChat/Services/API/PrematchCommentClient.swift</code> - \u2705 <code>TDDs/.../12_Tickets/03_client/TDD-022_ChatWebSocketClient.md</code></p> <p>\u4e3b\u8981\u4fee\u6b63\u5167\u5bb9: 1. ChatWebSocketClient: \u88dc\u5145 Connect Headers\uff08Platform, App-Version, Device-Id\uff09 2. ChatAPI: \u88dc\u5145 3 \u500b\u7f3a\u5c11\u7684 endpoints\uff08join, leave, leave/bulk\uff09 3. LiveChatClient: \u88dc\u5145 3 \u500b\u7f3a\u5c11\u7684\u65b9\u6cd5 4. PrematchCommentAPI: \u5b8c\u5168\u91cd\u5beb\u4ee5\u5c0d\u9f4a\u65b0\u7684 API Spec 5. PrematchCommentClient: \u5b8c\u5168\u91cd\u5beb\u4ee5\u5c0d\u9f4a TDD-020</p> <p>\u9a57\u8b49\u7d50\u679c: - \u2705 \u7121 linter \u932f\u8aa4 - \u2705 \u6240\u6709\u65b9\u6cd5\u7c3d\u540d\u5df2\u5c0d\u9f4a TDDs \u6587\u4ef6 - \u2705 \u6240\u6709 endpoints \u5df2\u5c0d\u9f4a\u65b0\u7684 API Spec</p>"},{"location":"13_Implementation_Status/implementation_review_2025-12-03/#_8","title":"\u2705 \u5df2\u5b8c\u6210\u7684\u4fee\u6b63\uff08\u7e8c\uff09","text":"<ol> <li>PrematchCommentAPI+Endpoint.swift:</li> <li>\u2705 \u5b8c\u5168\u91cd\u5beb\u4ee5\u5c0d\u9f4a TDD-010</li> <li>\u2705 \u88dc\u5145 <code>getBatchCommentInfo</code> endpoint</li> <li>\u2705 \u4fee\u6b63 <code>getCommentMeta</code> endpoint\uff08GET /info/{refId}\uff09</li> <li>\u2705 \u5c07 <code>getComments</code> \u62c6\u5206\u70ba <code>getCommentsByPopular</code> \u548c <code>getCommentsByNewest</code></li> <li>\u2705 \u4fee\u6b63\u53c3\u6578\u985e\u578b\uff08String vs Int64\uff09</li> <li> <p>\u2705 \u4fee\u6b63\u53c3\u6578\u540d\u7a31\uff08commentId vs parentCommentId\uff09</p> </li> <li> <p>PrematchCommentAPI+Repository.swift:</p> </li> <li>\u2705 \u5b8c\u5168\u91cd\u5beb\u65b9\u6cd5\u7c3d\u540d\u4ee5\u5c0d\u9f4a TDD-010</li> <li> <p>\u2705 \u65b0\u589e Response Wrapper DTOs\uff08BatchCommentInfoResponseDTO, CommentMetaResponseDTO, CommentListResponseDTO, CommentResponseDTO, ToggleLikeResponseDTO\uff09</p> </li> <li> <p>PrematchCommentAPI+RepositoryProtocol.swift:</p> </li> <li> <p>\u2705 \u66f4\u65b0 protocol \u5b9a\u7fa9\u4ee5\u5c0d\u9f4a\u65b0\u7684\u65b9\u6cd5\u7c3d\u540d</p> </li> <li> <p>PrematchCommentClient.swift:</p> <ul> <li>\u2705 \u5b8c\u5168\u91cd\u5beb\u65b9\u6cd5\u7c3d\u540d\u4ee5\u5c0d\u9f4a TDD-020</li> <li>\u2705 \u88dc\u5145 <code>getBatchCommentInfo</code> \u65b9\u6cd5</li> <li>\u2705 \u5c07 <code>getComments</code> \u62c6\u5206\u70ba <code>getCommentsByPopular</code> \u548c <code>getCommentsByNewest</code></li> <li>\u2705 \u66f4\u65b0\u6240\u6709\u65b9\u6cd5\u53c3\u6578\u985e\u578b</li> </ul> </li> </ol>"},{"location":"13_Implementation_Status/implementation_review_2025-12-03/#_9","title":"\u2705 \u6240\u6709\u4fee\u6b63\u5df2\u5b8c\u6210","text":"<p>\u6240\u6709 MatchChat \u4e0b\u7684\u5be6\u4f5c\u5df2\u5c0d\u9f4a\u6700\u65b0\u7684 TDDs \u6587\u4ef6\u898f\u7bc4\u3002</p>"},{"location":"13_Implementation_Status/implementation_review_2025-12-03/#_10","title":"\u2705 \u4e00\u81f4\u6027\u6aa2\u67e5\u7d50\u679c","text":""},{"location":"13_Implementation_Status/implementation_review_2025-12-03/#_11","title":"\u5df2\u78ba\u8a8d\u4e00\u81f4\u7684\u90e8\u5206","text":"<ul> <li>\u2705 ChatWebSocketClient \u57fa\u672c\u67b6\u69cb\uff08actor, AsyncStream, \u8a02\u95b1\u7ba1\u7406\uff09</li> <li>\u2705 LiveChatClient \u57fa\u672c\u65b9\u6cd5\uff08getBatchCount, getChatroomInfo, getHistoricalMessages, sendMessage\uff09</li> <li>\u2705 ChatAPI+WebSocket \u5b9a\u7fa9\u6b63\u78ba</li> <li>\u2705 CommentDTO \u7d50\u69cb\u5df2\u5c0d\u9f4a\u65b0\u7684 API Spec</li> <li>\u2705 CommentMetaInfoDTO \u548c CommentMetaDataDTO \u5df2\u6b63\u78ba\u5b9a\u7fa9</li> </ul>"},{"location":"13_Implementation_Status/implementation_review_2025-12-03/#_12","title":"\u5df2\u4fee\u6b63\u7684\u90e8\u5206","text":"<ul> <li>\u2705 ChatWebSocketClient: Connect Headers \u5df2\u88dc\u5145\u5b8c\u6574</li> <li>\u2705 LiveChatClient: \u5df2\u88dc\u5145 3 \u500b\u7f3a\u5c11\u7684\u65b9\u6cd5</li> <li>\u2705 PrematchCommentClient: \u65b9\u6cd5\u7c3d\u540d\u5df2\u5b8c\u5168\u5c0d\u9f4a TDD-020</li> <li>\u2705 ChatAPI+Endpoint: \u5df2\u88dc\u5145 3 \u500b\u7f3a\u5c11\u7684 endpoints</li> <li>\u2705 PrematchCommentAPI+Endpoint: \u5df2\u5b8c\u5168\u91cd\u5beb\u4ee5\u5c0d\u9f4a TDD-010</li> <li>\u2705 PrematchCommentAPI+Repository: \u65b9\u6cd5\u7c3d\u540d\u5df2\u5b8c\u5168\u5c0d\u9f4a TDD-010</li> <li>\u2705 PrematchCommentAPI+RepositoryProtocol: \u5df2\u66f4\u65b0 protocol \u5b9a\u7fa9</li> </ul>"},{"location":"13_Implementation_Status/implementation_review_2025-12-03/#_13","title":"\ud83d\udd17 \u76f8\u95dc\u6587\u4ef6","text":"<ul> <li>TDD-010: <code>12_Tickets/02_api/TDD-010_PrematchCommentAPI.md</code></li> <li>TDD-011: <code>12_Tickets/02_api/TDD-011_ChatAPI.md</code></li> <li>TDD-020: <code>12_Tickets/03_client/TDD-020_PrematchCommentClient.md</code></li> <li>TDD-021: <code>12_Tickets/03_client/TDD-021_LiveChatClient.md</code></li> <li>TDD-022: <code>12_Tickets/03_client/TDD-022_ChatWebSocketClient.md</code></li> <li>API Spec: <code>08_API Spec &amp; Mapping/01_api_spec.md</code></li> </ul>"},{"location":"13_Implementation_Status/implementation_status/","title":"\u5be6\u4f5c\u72c0\u614b\u8ffd\u8e64","text":""},{"location":"13_Implementation_Status/implementation_status/#_2","title":"\u7e3d\u89bd","text":"<ul> <li>\u958b\u59cb\u65e5\u671f: 2025-12-01</li> <li>\u6700\u5f8c\u66f4\u65b0: 2025-12-04</li> <li>\u5b8c\u6210\u5ea6: 3/26 tickets (11.5%)</li> <li>\u9032\u884c\u4e2d: 1 tickets (Data Layer \u91cd\u69cb)</li> <li>\u5f85\u958b\u59cb: 22 tickets</li> </ul>"},{"location":"13_Implementation_Status/implementation_status/#ticket","title":"Ticket \u5be6\u4f5c\u72c0\u614b","text":"Ticket ID \u6a19\u984c \u72c0\u614b \u5be6\u4f5c\u65e5\u671f \u5be6\u4f5c\u6a94\u6848 \u5099\u8a3b TDD-001 Comment Entity \u23f3 Pending - - - TDD-002 CommentMeta Entity \u23f3 Pending - - - TDD-003 UserInfo Entity \u23f3 Pending - - - TDD-004 Message Entity \u23f3 Pending - - - TDD-005 ChatroomInfo Entity \u23f3 Pending - - - TDD-006 Value Objects \u23f3 Pending - - - TDD-010 PrematchCommentAPI \u23f3 Pending - - - TDD-011 ChatAPI \u23f3 Pending - - - TDD-020 PrematchCommentClient \u2705 Completed 2025-12-02 <code>MatchChat/Sources/MatchChat/Services/API/PrematchCommentClient.swift</code> \u5be6\u4f5c\u5b8c\u6210\uff0c\u6e2c\u8a66\u5f85\u88dc TDD-021 LiveChatClient \u2705 Completed 2025-12-02 <code>MatchChat/Sources/MatchChat/Services/API/LiveChatClient.swift</code> \u5be6\u4f5c\u5b8c\u6210\uff0c\u6e2c\u8a66\u5f85\u88dc TDD-022 ChatWebSocketClient \u2705 Completed (95%) 2025-12-03 <code>MatchChat/Sources/MatchChat/Services/API/ChatWebSocketClient.swift</code> \u5be6\u4f5c\u5b8c\u6210\uff0c\u55ae\u5143\u6e2c\u8a66\u5f85\u88dc TDD-030 PrematchCommentRepository \u23f3 Pending - - - TDD-031 LiveChatRepository \u23f3 Pending - - - TDD-040 ReloadCommentListUseCase \u23f3 Pending - - - TDD-041 PublishCommentUseCase \u23f3 Pending - - - TDD-042 ToggleLikeUseCase \u23f3 Pending - - - TDD-043 LoadRepliesUseCase \u23f3 Pending - - - TDD-044 NavigateToProfileUseCase \u23f3 Pending - - - TDD-045 SendChatMessageUseCase \u23f3 Pending - - - TDD-046 JoinChatroomUseCase \u23f3 Pending - - - TDD-047 LeaveChatroomUseCase \u23f3 Pending - - - TDD-048 BlockUserUseCase \u23f3 Pending - - - TDD-050 PrematchCommentFeature \u23f3 Pending - - - TDD-051 LiveChatFeature \u23f3 Pending - - - TDD-060 PrematchCommentView \u23f3 Pending - - - TDD-061 LiveDetailView \u23f3 Pending - - -"},{"location":"13_Implementation_Status/implementation_status/#_3","title":"\u72c0\u614b\u7d71\u8a08","text":""},{"location":"13_Implementation_Status/implementation_status/#_4","title":"\u6309\u5c64\u7d1a\u7d71\u8a08","text":"\u5c64\u7d1a \u7e3d\u6578 \u5df2\u5b8c\u6210 \u9032\u884c\u4e2d \u5f85\u958b\u59cb Domain Model 6 0 0 6 API 2 0 0 2 Client 3 3 0 0 Repository 2 0 0 2 UseCase 9 0 0 9 Feature 2 0 0 2 View 2 0 0 2 \u7e3d\u8a08 26 2 0 24"},{"location":"13_Implementation_Status/implementation_status/#feature","title":"\u6309 Feature \u7d71\u8a08","text":"Feature \u7e3d\u6578 \u5df2\u5b8c\u6210 \u9032\u884c\u4e2d \u5f85\u958b\u59cb PrematchComment 14 1 0 13 LiveChat 12 2 0 10 \u7e3d\u8a08 26 3 0 23"},{"location":"13_Implementation_Status/implementation_status/#_5","title":"\u66f4\u65b0\u8a18\u9304","text":"\u65e5\u671f \u66f4\u65b0\u5167\u5bb9 \u66f4\u65b0\u4eba 2025-12-01 \u521d\u59cb\u5316\u5be6\u4f5c\u72c0\u614b\u8ffd\u8e64\u8868 - 2025-12-02 \u5b8c\u6210 TDD-020 (PrematchCommentClient) \u548c TDD-021 (LiveChatClient) \u5be6\u4f5c - 2025-12-03 \u5b8c\u6210 TDD-022 (ChatWebSocketClient) \u5be6\u4f5c\uff0895%\uff09\uff0c\u4fee\u5fa9 SportyStomp API \u8abf\u7528\u932f\u8aa4\u548c\u4e26\u767c\u8b66\u544a - 2025-12-04 Data Layer \u91cd\u69cb\uff1aSendable \u985e\u578b\u5305\u88dd\u3001WebSocket \u4f75\u767c\u6539\u9032\u3001Xcode \u914d\u7f6e\u66f4\u65b0 -"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-02/","title":"TDD \u4e00\u81f4\u6027\u6aa2\u67e5\u5831\u544a - 2025-12-02","text":""},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-02/#_1","title":"\u6aa2\u67e5\u7bc4\u570d","text":"<ul> <li>TDD-021: LiveChatClient [FOOTBALL-9182]</li> <li>TDD-020: PrematchCommentClient [FOOTBALL-9181]</li> </ul>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-02/#tdd-021-livechatclient","title":"TDD-021: LiveChatClient","text":""},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-02/#_2","title":"\u2705 \u6a94\u6848\u7d50\u69cb\u6aa2\u67e5","text":"\u9805\u76ee TDD \u8981\u6c42 \u5be6\u969b\u5be6\u4f5c \u72c0\u614b \u6a94\u6848\u4f4d\u7f6e <code>Sources/LiveChat/Services/API/LiveChatClient.swift</code> <code>MatchChat/Sources/MatchChat/Services/API/LiveChatClient.swift</code> \u2705 \u7b26\u5408\uff08\u5c08\u6848\u7d50\u69cb\u5dee\u7570\uff09 \u6a94\u6848\u5b58\u5728 \u662f \u662f \u2705 <p>\u8aaa\u660e: \u5be6\u969b\u8def\u5f91\u8207 TDD \u4e0d\u540c\u662f\u56e0\u70ba MatchChat \u662f\u7d71\u4e00 package\uff0c\u4f46\u6a94\u6848\u4f4d\u7f6e\u5728\u6b63\u78ba\u7684\u5c64\u7d1a\uff08Services/API/\uff09\u3002</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-02/#_3","title":"\u2705 \u547d\u540d\u898f\u7bc4\u6aa2\u67e5","text":"\u9805\u76ee TDD \u8981\u6c42 \u5be6\u969b\u5be6\u4f5c \u72c0\u614b \u985e\u578b <code>struct</code> <code>public struct LiveChatClient</code> \u2705 \u4fee\u98fe\u7b26 <code>public</code> <code>public</code> \u2705 \u5167\u90e8\u4f9d\u8cf4 <code>ChatAPI.ChatRepository</code> <code>ChatAPI.ChatRepository</code> \u2705 \u65b9\u6cd5\u59d4\u6d3e \u76f4\u63a5\u59d4\u6d3e\u7d66 Repository \u76f4\u63a5\u59d4\u6d3e \u2705"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-02/#_4","title":"\u2705 \u529f\u80fd\u5b8c\u6574\u6027\u6aa2\u67e5","text":"\u65b9\u6cd5 Repository \u65b9\u6cd5 \u72c0\u614b \u5c0d\u61c9 API Endpoint <code>getBatchCount(refIdList:)</code> \u2705 <code>getBatchCount</code> \u2705 <code>POST /chat/match/batch/count</code> <code>getChatroomInfo(refId:userId:)</code> \u2705 <code>getChatroomInfo</code> \u2705 <code>GET /chat/match/{refId}</code> <code>getHistoricalMessages(chatroomId:messageNo:length:)</code> \u2705 <code>getHistoricalMessages</code> \u2705 <code>GET /chat/match/backward</code> <code>sendMessage(chatroomId:text:)</code> \u2705 <code>sendMessage</code> \u2705 <code>POST /chat/match/message</code> <p>\u7d50\u679c: \u2705 \u6240\u6709 4 \u500b\u65b9\u6cd5\u90fd\u5df2\u5be6\u4f5c\uff0c\u8207 Repository \u65b9\u6cd5\u5b8c\u5168\u5c0d\u61c9\u3002</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-02/#error-handling","title":"\u2705 Error Handling \u6aa2\u67e5","text":"\u9805\u76ee TDD \u8981\u6c42 \u5be6\u969b\u5be6\u4f5c \u72c0\u614b Error Handling \u5be6\u4f5c Error Handling \u900f\u904e <code>throws</code> \u50b3\u905e\u932f\u8aa4 \u2705 <p>\u8aaa\u660e: Client \u65b9\u6cd5\u4f7f\u7528 <code>async throws</code>\uff0c\u932f\u8aa4\u76f4\u63a5\u5f9e Repository \u50b3\u905e\uff0c\u7b26\u5408\u8a2d\u8a08\u3002</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-02/#_5","title":"\u274c \u6e2c\u8a66\u8986\u84cb\u7387\u6aa2\u67e5","text":"\u9805\u76ee TDD \u8981\u6c42 \u5be6\u969b\u72c0\u614b \u72c0\u614b Unit Test \u2265 80% \u5c1a\u672a\u5be6\u4f5c \u274c Integration Test \u901a\u904e \u5c1a\u672a\u5be6\u4f5c \u274c"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-02/#tdd-020-prematchcommentclient","title":"TDD-020: PrematchCommentClient","text":""},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-02/#_6","title":"\u2705 \u6a94\u6848\u7d50\u69cb\u6aa2\u67e5","text":"\u9805\u76ee TDD \u8981\u6c42 \u5be6\u969b\u5be6\u4f5c \u72c0\u614b \u6a94\u6848\u4f4d\u7f6e <code>Sources/PrematchComment/Services/API/PrematchCommentClient.swift</code> <code>MatchChat/Sources/MatchChat/Services/API/PrematchCommentClient.swift</code> \u2705 \u7b26\u5408\uff08\u5c08\u6848\u7d50\u69cb\u5dee\u7570\uff09 \u6a94\u6848\u5b58\u5728 \u662f \u662f \u2705 <p>\u8aaa\u660e: \u5be6\u969b\u8def\u5f91\u8207 TDD \u4e0d\u540c\u662f\u56e0\u70ba MatchChat \u662f\u7d71\u4e00 package\uff0c\u4f46\u6a94\u6848\u4f4d\u7f6e\u5728\u6b63\u78ba\u7684\u5c64\u7d1a\uff08Services/API/\uff09\u3002</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-02/#_7","title":"\u2705 \u547d\u540d\u898f\u7bc4\u6aa2\u67e5","text":"\u9805\u76ee TDD \u8981\u6c42 \u5be6\u969b\u5be6\u4f5c \u72c0\u614b \u985e\u578b <code>struct</code> <code>public struct PrematchCommentClient</code> \u2705 \u4fee\u98fe\u7b26 <code>public</code> <code>public</code> \u2705 \u5167\u90e8\u4f9d\u8cf4 <code>PrematchCommentAPI.PrematchCommentRepository</code> <code>PrematchCommentAPI.PrematchCommentRepository</code> \u2705 \u65b9\u6cd5\u59d4\u6d3e \u76f4\u63a5\u59d4\u6d3e\u7d66 Repository \u76f4\u63a5\u59d4\u6d3e \u2705"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-02/#_8","title":"\u2705 \u529f\u80fd\u5b8c\u6574\u6027\u6aa2\u67e5","text":"\u65b9\u6cd5 Repository \u65b9\u6cd5 \u72c0\u614b \u5c0d\u61c9 API Endpoint <code>getCommentMeta(refId:)</code> \u2705 <code>getCommentMeta</code> \u2705 <code>GET /chat/match/comment/info/{refId}</code> <code>getComments(refId:mode:cursor:)</code> \u2705 <code>getComments</code> \u2705 <code>GET /chat/match/comment/popular</code><code>GET /chat/match/comment/newest</code> <code>publishComment(refId:content:parentId:)</code> \u2705 <code>publishComment</code> \u2705 <code>POST /chat/match/comment</code> <code>toggleLike(commentId:)</code> \u2705 <code>toggleLike</code> \u2705 <code>POST /chat/match/comment/like</code> <code>getReplies(commentId:cursor:)</code> \u2705 <code>getReplies</code> \u2705 <code>GET /chat/match/comment/replies</code> <p>\u7d50\u679c: \u2705 \u6240\u6709 5 \u500b\u65b9\u6cd5\u90fd\u5df2\u5be6\u4f5c\uff0c\u8207 Repository \u65b9\u6cd5\u5b8c\u5168\u5c0d\u61c9\u3002</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-02/#error-handling_1","title":"\u2705 Error Handling \u6aa2\u67e5","text":"\u9805\u76ee TDD \u8981\u6c42 \u5be6\u969b\u5be6\u4f5c \u72c0\u614b Error Handling \u5be6\u4f5c Error Handling \u900f\u904e <code>throws</code> \u50b3\u905e\u932f\u8aa4 \u2705 <p>\u8aaa\u660e: Client \u65b9\u6cd5\u4f7f\u7528 <code>async throws</code>\uff0c\u932f\u8aa4\u76f4\u63a5\u5f9e Repository \u50b3\u905e\uff0c\u7b26\u5408\u8a2d\u8a08\u3002</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-02/#_9","title":"\u274c \u6e2c\u8a66\u8986\u84cb\u7387\u6aa2\u67e5","text":"\u9805\u76ee TDD \u8981\u6c42 \u5be6\u969b\u72c0\u614b \u72c0\u614b Unit Test \u2265 80% \u5c1a\u672a\u5be6\u4f5c \u274c Integration Test \u901a\u904e \u5c1a\u672a\u5be6\u4f5c \u274c"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-02/#_10","title":"\u7e3d\u7d50","text":""},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-02/#tdd","title":"\u2705 \u7b26\u5408 TDD \u898f\u7bc4\u7684\u90e8\u5206","text":"<ol> <li>\u6a94\u6848\u7d50\u69cb: \u6a94\u6848\u4f4d\u7f6e\u6b63\u78ba\uff08\u8003\u616e\u5c08\u6848\u7d50\u69cb\u5dee\u7570\uff09</li> <li>\u547d\u540d\u898f\u7bc4: \u5b8c\u5168\u7b26\u5408 TDD \u8981\u6c42</li> <li>\u529f\u80fd\u5b8c\u6574\u6027: \u6240\u6709\u65b9\u6cd5\u90fd\u5df2\u5be6\u4f5c\uff0c\u8207 Repository \u5b8c\u5168\u5c0d\u61c9</li> <li>Error Handling: \u900f\u904e <code>throws</code> \u6b63\u78ba\u50b3\u905e\u932f\u8aa4</li> <li>\u4f9d\u8cf4\u95dc\u4fc2: \u6b63\u78ba\u6574\u5408 API \u5c64\u7684 Repository</li> </ol>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-02/#_11","title":"\u274c \u5f85\u88dc\u5f37\u7684\u90e8\u5206","text":"<ol> <li>Unit Test: \u5169\u500b Client \u90fd\u5c1a\u672a\u5be6\u4f5c\u55ae\u5143\u6e2c\u8a66\uff08\u76ee\u6a19\u8986\u84cb\u7387 \u2265 80%\uff09</li> <li>Integration Test: \u5c1a\u672a\u5be6\u4f5c\u6574\u5408\u6e2c\u8a66</li> </ol>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-02/#_12","title":"\ud83d\udcdd \u6539\u9032\u5efa\u8b70","text":"<ol> <li>\u6e2c\u8a66\u5be6\u4f5c:</li> <li>\u5efa\u8b70\u5728 Repository \u5c64\u7d1a\u6e2c\u8a66\u6642\u4e00\u4f75\u6e2c\u8a66 Client\uff08\u56e0\u70ba Client \u662f Repository \u7684\u5167\u90e8\u4f9d\u8cf4\uff09</li> <li> <p>\u6216\u4f7f\u7528 <code>MockedAPIClient</code> \u9032\u884c\u55ae\u5143\u6e2c\u8a66</p> </li> <li> <p>\u6a94\u6848\u8def\u5f91\u8aaa\u660e:</p> </li> <li>\u5be6\u969b\u8def\u5f91\u8207 TDD \u6587\u4ef6\u7565\u6709\u4e0d\u540c\uff0c\u4f46\u9019\u662f\u56e0\u70ba\u5c08\u6848\u7d50\u69cb\uff08MatchChat \u7d71\u4e00 package\uff09</li> <li>\u5efa\u8b70\u5728 TDD \u6587\u4ef6\u4e2d\u8a3b\u660e\u5be6\u969b\u5c08\u6848\u7d50\u69cb\u5dee\u7570</li> </ol>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-02/#_13","title":"\u2705 \u6574\u9ad4\u8a55\u4f30","text":"<p>TDD-021 (LiveChatClient): \u2705 \u5be6\u4f5c\u5b8c\u6210\u5ea6 80%\uff08\u7f3a\u5c11\u6e2c\u8a66\uff09 TDD-020 (PrematchCommentClient): \u2705 \u5be6\u4f5c\u5b8c\u6210\u5ea6 80%\uff08\u7f3a\u5c11\u6e2c\u8a66\uff09</p> <p>\u5169\u500b Client \u7684\u5be6\u4f5c\u90fd\u7b26\u5408 TDD \u898f\u7bc4\uff0c\u529f\u80fd\u5b8c\u6574\uff0c\u547d\u540d\u6b63\u78ba\u3002\u4e3b\u8981\u7f3a\u5c11\u7684\u662f\u6e2c\u8a66\u8986\u84cb\u7387\uff0c\u9019\u662f\u5f8c\u7e8c\u9700\u8981\u88dc\u5f37\u7684\u90e8\u5206\u3002</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-04/","title":"TDD \u4e00\u81f4\u6027\u6aa2\u67e5\u5831\u544a - 2025-12-04","text":""},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-04/#_1","title":"\u6aa2\u67e5\u7bc4\u570d","text":"<p>\u672c\u6b21\u6aa2\u67e5\u5df2\u5b8c\u6210\u7684\u4e09\u500b Client tickets\uff1a - TDD-020: PrematchCommentClient - TDD-021: LiveChatClient - TDD-022: ChatWebSocketClient</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-04/#_2","title":"\u57f7\u884c\u6458\u8981","text":"Ticket \u5b8c\u6210\u5ea6 \u4e00\u81f4\u6027 \u6e2c\u8a66\u8986\u84cb \u4e3b\u8981\u554f\u984c TDD-020 \u2705 100% \u2705 \u512a\u79c0 \u26a0\ufe0f \u7f3a\u5c11 Protocol \u91cd\u69cb\u6539\u5584\u3001\u578b\u5225\u5b89\u5168 TDD-021 \u2705 100% \u2705 \u512a\u79c0 \u26a0\ufe0f \u7f3a\u5c11 Protocol \u91cd\u69cb\u6539\u5584 TDD-022 \u2705 95% \u2705 \u512a\u79c0 \u26a0\ufe0f \u7f3a\u5c11 Concurrency \u6539\u9032\u5b8c\u6210"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-04/#tdd-020-prematchcommentclient","title":"TDD-020: PrematchCommentClient","text":""},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-04/#100","title":"\u2705 \u5be6\u4f5c\u5b8c\u6210\u5ea6: 100%","text":""},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-04/#_3","title":"\u6a94\u6848\u4f4d\u7f6e","text":"<ul> <li>TDD \u898f\u7bc4: <code>Sources/PrematchComment/Services/API/PrematchCommentClient.swift</code></li> <li>\u5be6\u969b\u4f4d\u7f6e: <code>MatchChat/Sources/MatchChat/Services/Client/PrematchCommentClient.swift</code></li> <li>\u72c0\u614b: \u2705 \u5408\u7406\u5dee\u7570\uff08MatchChat \u7d71\u4e00 package\uff09</li> </ul>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-04/#_4","title":"\u529f\u80fd\u5b8c\u6574\u6027\u6aa2\u67e5","text":"\u65b9\u6cd5 TDD \u8981\u6c42 \u5be6\u4f5c\u72c0\u614b \u5099\u8a3b <code>getBatchCommentInfo</code> \u2705 \u2705 \u5b8c\u5168\u7b26\u5408 <code>getCommentMeta</code> \u2705 \u2705 \u5b8c\u5168\u7b26\u5408 <code>getCommentsByPopular</code> \u2705 \u2705 \u5b8c\u5168\u7b26\u5408 <code>getCommentsByNewest</code> \u2705 \u2705 \u5b8c\u5168\u7b26\u5408 <code>getReplies</code> \u2705 \u2705 \u5b8c\u5168\u7b26\u5408 <code>publishComment</code> \u2705 \u2705 \u6539\u9032: \u4f7f\u7528 <code>SharedBetsMetadata</code> \u53d6\u4ee3 <code>[String: Any]</code> <code>toggleLike</code> \u2705 \u2705 \u5b8c\u5168\u7b26\u5408"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-04/#_5","title":"\u67b6\u69cb\u4e00\u81f4\u6027","text":"<p>\u2705 \u578b\u5225\u5b9a\u7fa9 - TDD: \u4f7f\u7528 <code>struct</code> - \u5be6\u4f5c: \u4f7f\u7528 <code>struct</code> \u2705</p> <p>\u2705 \u4f9d\u8cf4\u6ce8\u5165 - TDD: \u63a5\u53d7 <code>PrematchCommentRepository</code> - \u5be6\u4f5c: \u63a5\u53d7 <code>PrematchCommentRepositoryProtocol</code> \u2705 (\u66f4\u4f73\u5be6\u8e10)</p> <p>\u2705 \u53ef\u898b\u6027 - TDD: <code>public</code> - \u5be6\u4f5c: <code>public</code> \u2705</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-04/#_6","title":"\ud83c\udfaf \u6539\u9032\u9ede","text":"<ol> <li>\u2705 Protocol \u91cd\u69cb (\u5df2\u5b8c\u6210)</li> <li>\u5be6\u4f5c\u4e86 <code>PrematchCommentClientProtocol</code></li> <li>\u652f\u63f4\u4f9d\u8cf4\u6ce8\u5165\u548c\u6e2c\u8a66 mock</li> <li> <p>\u7b26\u5408 SOLID \u539f\u5247</p> </li> <li> <p>\u2705 Sendable \u985e\u578b\u5b89\u5168 (2025-12-05 \u5b8c\u6210)</p> </li> <li>\u5f15\u5165 <code>SharedBetsMetadata</code> \u5305\u88dd <code>[String: Any]</code></li> <li>\u89e3\u6c7a Swift Concurrency \u8b66\u544a</li> <li> <p>\u63d0\u5347\u578b\u5225\u5b89\u5168\u6027</p> </li> <li> <p>\u26a0\ufe0f \u6e2c\u8a66\u5f85\u88dc</p> </li> <li>Unit Test \u7f3a\u5c11\uff08\u8986\u84cb\u7387 0%\uff09</li> <li>Integration Test \u7f3a\u5c11</li> </ol>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-04/#_7","title":"\u9a57\u6536\u689d\u4ef6\u9054\u6210\u72c0\u6cc1","text":"<ul> <li>[x] <code>PrematchCommentClient</code> \u5be6\u4f5c\u5b8c\u6210</li> <li>[x] \u6240\u6709 API \u547c\u53eb\u65b9\u6cd5\u5be6\u4f5c\u5b8c\u6210</li> <li>[x] Error Handling \u5be6\u4f5c\u5b8c\u6210\uff08\u59d4\u6d3e\u7d66 Repository\uff09</li> <li>[x] \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c</li> <li>[ ] Unit Test \u8986\u84cb\u7387 \u2265 80% \u26a0\ufe0f</li> <li>[ ] Integration Test \u901a\u904e \u26a0\ufe0f</li> </ul>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-04/#tdd-021-livechatclient","title":"TDD-021: LiveChatClient","text":""},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-04/#100_1","title":"\u2705 \u5be6\u4f5c\u5b8c\u6210\u5ea6: 100%","text":""},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-04/#_8","title":"\u6a94\u6848\u4f4d\u7f6e","text":"<ul> <li>TDD \u898f\u7bc4: <code>Sources/LiveChat/Services/API/LiveChatClient.swift</code></li> <li>\u5be6\u969b\u4f4d\u7f6e: <code>MatchChat/Sources/MatchChat/Services/Client/LiveChatClient.swift</code></li> <li>\u72c0\u614b: \u2705 \u5408\u7406\u5dee\u7570\uff08MatchChat \u7d71\u4e00 package\uff09</li> </ul>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-04/#_9","title":"\u529f\u80fd\u5b8c\u6574\u6027\u6aa2\u67e5","text":"\u65b9\u6cd5 TDD \u8981\u6c42 \u5be6\u4f5c\u72c0\u614b \u5099\u8a3b <code>getBatchCount</code> \u2705 \u2705 \u5b8c\u5168\u7b26\u5408 <code>getChatroomInfo</code> \u2705 \u2705 \u5b8c\u5168\u7b26\u5408 <code>getHistoricalMessages</code> \u2705 \u2705 \u5b8c\u5168\u7b26\u5408 <code>sendMessage</code> \u2705 \u2705 \u5b8c\u5168\u7b26\u5408 <code>joinChatroom</code> \u2705 \u2705 \u5b8c\u5168\u7b26\u5408 <code>leaveChatroom</code> \u2705 \u2705 \u5b8c\u5168\u7b26\u5408 <code>bulkLeaveChatroom</code> \u2705 \u2705 \u5b8c\u5168\u7b26\u5408"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-04/#_10","title":"\u67b6\u69cb\u4e00\u81f4\u6027","text":"<p>\u2705 \u578b\u5225\u5b9a\u7fa9 - TDD: \u4f7f\u7528 <code>struct</code> - \u5be6\u4f5c: \u4f7f\u7528 <code>struct</code> \u2705</p> <p>\u2705 \u4f9d\u8cf4\u6ce8\u5165 - TDD: \u63a5\u53d7 <code>ChatAPI.ChatRepository</code> - \u5be6\u4f5c: \u63a5\u53d7 <code>ChatAPI.ChatRepositoryProtocol</code> \u2705 (\u66f4\u4f73\u5be6\u8e10)</p> <p>\u2705 \u53ef\u898b\u6027 - TDD: <code>public</code> - \u5be6\u4f5c: <code>public</code> \u2705</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-04/#_11","title":"\ud83c\udfaf \u6539\u9032\u9ede","text":"<ol> <li>\u2705 Protocol \u91cd\u69cb (\u5df2\u5b8c\u6210)</li> <li>\u5be6\u4f5c\u4e86 <code>LiveChatClientProtocol</code></li> <li> <p>\u652f\u63f4\u4f9d\u8cf4\u6ce8\u5165\u548c\u6e2c\u8a66 mock</p> </li> <li> <p>\u26a0\ufe0f \u6e2c\u8a66\u5f85\u88dc</p> </li> <li>Unit Test \u7f3a\u5c11\uff08\u8986\u84cb\u7387 0%\uff09</li> <li>Integration Test \u7f3a\u5c11</li> </ol>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-04/#_12","title":"\u9a57\u6536\u689d\u4ef6\u9054\u6210\u72c0\u6cc1","text":"<ul> <li>[x] <code>LiveChatClient</code> \u5be6\u4f5c\u5b8c\u6210</li> <li>[x] \u6240\u6709 HTTP API \u547c\u53eb\u65b9\u6cd5\u5be6\u4f5c\u5b8c\u6210</li> <li>[x] Error Handling \u5be6\u4f5c\u5b8c\u6210\uff08\u59d4\u6d3e\u7d66 Repository\uff09</li> <li>[x] \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c</li> <li>[ ] Unit Test \u8986\u84cb\u7387 \u2265 80% \u26a0\ufe0f</li> <li>[ ] Integration Test \u901a\u904e \u26a0\ufe0f</li> </ul>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-04/#tdd-022-chatwebsocketclient","title":"TDD-022: ChatWebSocketClient","text":""},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-04/#95","title":"\u2705 \u5be6\u4f5c\u5b8c\u6210\u5ea6: 95%","text":""},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-04/#_13","title":"\u6a94\u6848\u4f4d\u7f6e","text":"<ul> <li>TDD \u898f\u7bc4: <code>Sources/LiveChat/Services/API/ChatWebSocketClient.swift</code></li> <li>\u5be6\u969b\u4f4d\u7f6e: <code>MatchChat/Sources/MatchChat/Services/Client/ChatWebSocketClient.swift</code></li> <li>\u72c0\u614b: \u2705 \u5408\u7406\u5dee\u7570\uff08MatchChat \u7d71\u4e00 package\uff09</li> </ul>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-04/#_14","title":"\u529f\u80fd\u5b8c\u6574\u6027\u6aa2\u67e5","text":"\u529f\u80fd TDD \u8981\u6c42 \u5be6\u4f5c\u72c0\u614b \u5099\u8a3b \u9023\u7dda\u7ba1\u7406 <code>connect()</code> \u2705 \u2705 \u5b8c\u6574\u5be6\u4f5c\uff0c\u5305\u542b delegate \u8a2d\u5b9a <code>disconnect()</code> \u2705 \u2705 \u5b8c\u6574\u5be6\u4f5c\uff0c\u6e05\u7406\u8cc7\u6e90 \u9023\u7dda\u72c0\u614b\u8ffd\u8e64 \u2705 \u2705 <code>ConnectionState</code> enum \u8a02\u95b1\u7ba1\u7406 <code>subscribe(chatroomId:)</code> \u2705 \u2705 \u6539\u9032: nonisolated \u5be6\u4f5c <code>unsubscribe(subscriberId:)</code> \u2705 \u2705 \u652f\u63f4\u55ae\u4e00\u8a02\u95b1\u8005\u53d6\u6d88 <code>unsubscribeAll(chatroomId:)</code> \u2705 \u2705 \u652f\u63f4\u6279\u91cf\u53d6\u6d88 \u591a\u8a02\u95b1\u8005\u652f\u63f4 \u2705 \u2705 UUID \u8ffd\u8e64\u8a02\u95b1\u8005 \u8a0a\u606f\u8655\u7406 <code>sendMessage()</code> \u2705 \u2705 \u5b8c\u6574\u5be6\u4f5c \u8a0a\u606f\u63a5\u6536 \u2705 \u2705 AsyncStream \u5ee3\u64ad DTO \u8f49\u63db \u2705 \u2705 JSON \u89e3\u78bc \u91cd\u9023\u6a5f\u5236 \u6307\u6578\u9000\u907f\u7b56\u7565 \u2705 \u2705 1s \u2192 60s \u4e0a\u9650 \u81ea\u52d5\u91cd\u9023 \u2705 \u2705 \u65b7\u7dda\u6642\u89f8\u767c \u5fc3\u8df3\u6a5f\u5236 \u2705 \u2705 <code>enableAutoPing()</code>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-04/#_15","title":"\u67b6\u69cb\u4e00\u81f4\u6027","text":"<p>\u2705 \u578b\u5225\u5b9a\u7fa9 - TDD: \u4f7f\u7528 <code>actor</code> - \u5be6\u4f5c: \u4f7f\u7528 <code>actor</code> \u2705</p> <p>\u2705 \u6846\u67b6\u9078\u64c7 - TDD: \u4f7f\u7528 <code>SportyStomp</code> - \u5be6\u4f5c: \u4f7f\u7528 <code>SportyStomp</code> \u2705</p> <p>\u2705 \u8a0a\u606f\u50b3\u905e - TDD: \u4f7f\u7528 <code>AsyncStream</code> - \u5be6\u4f5c: \u4f7f\u7528 <code>AsyncStream</code> \u2705</p> <p>\u2705 \u4e26\u767c\u5b89\u5168 - TDD: Actor \u9694\u96e2 + NSLock - \u5be6\u4f5c: Actor \u9694\u96e2 + NSLock \u2705</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-04/#_16","title":"\ud83c\udfaf \u6539\u9032\u9ede","text":"<ol> <li>\u2705 Concurrency \u6539\u9032 (2025-12-05 \u5b8c\u6210)</li> <li>\u5c07 <code>subscribe</code> \u6539\u70ba <code>nonisolated</code></li> <li>\u63d0\u53d6 <code>performSubscribe</code> helper</li> <li> <p>\u6539\u5584\u4f75\u767c\u6a21\u578b\uff0c\u907f\u514d\u4e0d\u5fc5\u8981\u7684 actor \u9694\u96e2</p> </li> <li> <p>\u2705 Protocol \u91cd\u69cb (\u5df2\u5b8c\u6210)</p> </li> <li>\u5be6\u4f5c\u4e86 <code>ChatWebSocketClientProtocol</code></li> <li> <p>\u652f\u63f4\u4f9d\u8cf4\u6ce8\u5165\u548c\u6e2c\u8a66 mock</p> </li> <li> <p>\u26a0\ufe0f API Spec \u9a57\u8b49\u5f85\u78ba\u8a8d</p> </li> <li><code>accept-version</code> \u683c\u5f0f</li> <li><code>heart-beat</code> header</li> <li>\u8a0a\u606f\u683c\u5f0f\u76f8\u5bb9\u6027</li> <li> <p>\u5efa\u8b70: Integration Test \u9a57\u8b49</p> </li> <li> <p>\u26a0\ufe0f \u6e2c\u8a66\u5f85\u88dc</p> </li> <li>Unit Test \u7f3a\u5c11\uff08\u8986\u84cb\u7387 0%\uff09</li> <li>Integration Test \u7f3a\u5c11</li> </ol>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-04/#_17","title":"\u9a57\u6536\u689d\u4ef6\u9054\u6210\u72c0\u6cc1","text":"<ul> <li>[x] <code>ChatWebSocketClient</code> \u5be6\u4f5c\u5b8c\u6210\uff0c\u4f7f\u7528 <code>actor</code></li> <li>[x] WebSocket \u9023\u7dda\u7ba1\u7406\u5be6\u4f5c\u5b8c\u6210</li> <li>[x] \u8a02\u95b1 / \u53d6\u6d88\u8a02\u95b1\u5be6\u4f5c\u5b8c\u6210</li> <li>[x] \u8a0a\u606f\u63a5\u6536\u8207\u767c\u9001\u5be6\u4f5c\u5b8c\u6210</li> <li>[x] \u91cd\u9023\u6a5f\u5236\u5be6\u4f5c\u5b8c\u6210\uff08\u6307\u6578\u9000\u907f\uff09</li> <li>[x] \u5fc3\u8df3\u6a5f\u5236\u5be6\u4f5c\u5b8c\u6210</li> <li>[x] \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c</li> <li>[ ] Unit Test \u8986\u84cb\u7387 \u2265 80% \u26a0\ufe0f</li> <li>[ ] Integration Test \u901a\u904e \u26a0\ufe0f</li> </ul>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-04/#_18","title":"\u6574\u9ad4\u8a55\u4f30","text":""},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-04/#_19","title":"\u2705 \u512a\u9ede","text":"<ol> <li>\u67b6\u69cb\u8a2d\u8a08\u512a\u79c0</li> <li>\u6240\u6709 Client \u90fd\u5be6\u4f5c\u4e86 Protocol\uff0c\u652f\u63f4 DI \u548c\u6e2c\u8a66</li> <li>\u6b63\u78ba\u4f7f\u7528 <code>struct</code> (HTTP) \u548c <code>actor</code> (WebSocket)</li> <li> <p>\u7b26\u5408 Clean Architecture \u5206\u5c64</p> </li> <li> <p>\u4e26\u767c\u5b89\u5168</p> </li> <li>WebSocket Client \u6b63\u78ba\u4f7f\u7528 <code>actor</code> \u9694\u96e2</li> <li><code>ChatroomSubscription</code> \u4f7f\u7528 <code>NSLock</code> \u4fdd\u8b77\u5171\u4eab\u72c0\u614b</li> <li> <p>Delegate \u65b9\u6cd5\u4f7f\u7528 <code>nonisolated</code> + <code>Task</code> \u8655\u7406</p> </li> <li> <p>\u578b\u5225\u5b89\u5168\u6539\u9032</p> </li> <li>\u5f15\u5165 <code>SharedBetsMetadata</code> \u89e3\u6c7a Sendable \u8b66\u544a</li> <li> <p>\u6240\u6709 Client Protocol \u6a19\u8a18\u70ba <code>Sendable</code></p> </li> <li> <p>\u7a0b\u5f0f\u78bc\u54c1\u8cea</p> </li> <li>\u6e05\u6670\u7684\u8a3b\u89e3\u548c\u6587\u4ef6</li> <li>\u7b26\u5408 Swift \u547d\u540d\u898f\u7bc4</li> <li>\u9069\u7576\u7684\u932f\u8aa4\u8655\u7406</li> </ol>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-04/#_20","title":"\u26a0\ufe0f \u5f85\u6539\u9032\u9805\u76ee","text":"<ol> <li>\u6e2c\u8a66\u8986\u84cb\u7387 (\u512a\u5148\u7d1a: P0)</li> <li>\u4e09\u500b Client \u90fd\u7f3a\u5c11 Unit Test</li> <li>\u7f3a\u5c11 Integration Test</li> <li> <p>\u5efa\u8b70: \u4e0b\u4e00\u500b sprint \u512a\u5148\u88dc\u5145</p> </li> <li> <p>API \u898f\u683c\u9a57\u8b49 (\u512a\u5148\u7d1a: P1)</p> </li> <li>WebSocket \u9023\u7dda\u53c3\u6578\u9700\u8981\u8207\u5f8c\u7aef\u9a57\u8b49</li> <li> <p>\u5efa\u8b70: Integration Test \u4e2d\u9a57\u8b49</p> </li> <li> <p>\u6587\u4ef6\u5b8c\u6574\u6027 (\u512a\u5148\u7d1a: P2)</p> </li> <li>\u53ef\u4ee5\u589e\u52a0\u4f7f\u7528\u7bc4\u4f8b</li> <li>\u53ef\u4ee5\u589e\u52a0\u932f\u8aa4\u8655\u7406\u8aaa\u660e</li> </ol>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-04/#_21","title":"\ud83d\udcca \u7d71\u8a08","text":"\u6307\u6a19 TDD-020 TDD-021 TDD-022 \u7e3d\u8a08 \u529f\u80fd\u5b8c\u6210\u5ea6 100% 100% 95% 98% TDD \u4e00\u81f4\u6027 100% 100% 100% 100% \u6e2c\u8a66\u8986\u84cb\u7387 0% 0% 0% 0% \u7a0b\u5f0f\u78bc\u54c1\u8cea \u2b50\u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-04/#_22","title":"\u5efa\u8b70\u884c\u52d5\u9805\u76ee","text":""},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-04/#1-2","title":"\u77ed\u671f (1-2 \u9031)","text":"<ol> <li>\u88dc\u5145\u6e2c\u8a66 (P0)</li> <li>[ ] TDD-020 Unit Test (\u76ee\u6a19\u8986\u84cb\u7387 \u2265 80%)</li> <li>[ ] TDD-021 Unit Test (\u76ee\u6a19\u8986\u84cb\u7387 \u2265 80%)</li> <li>[ ] TDD-022 Unit Test (\u76ee\u6a19\u8986\u84cb\u7387 \u2265 80%)</li> <li> <p>[ ] Integration Test for WebSocket</p> </li> <li> <p>API \u9a57\u8b49 (P1)</p> </li> <li>[ ] WebSocket \u9023\u7dda\u53c3\u6578\u9a57\u8b49</li> <li>[ ] STOMP \u8a0a\u606f\u683c\u5f0f\u9a57\u8b49</li> <li>[ ] \u8207\u5f8c\u7aef\u5c0d\u63a5\u6e2c\u8a66</li> </ol>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-04/#1","title":"\u4e2d\u671f (1 \u500b\u6708)","text":"<ol> <li>\u6587\u4ef6\u6539\u9032 (P2)</li> <li>[ ] \u589e\u52a0\u4f7f\u7528\u7bc4\u4f8b</li> <li>[ ] \u589e\u52a0\u5e38\u898b\u554f\u984c FAQ</li> <li> <p>[ ] \u589e\u52a0\u6548\u80fd\u8abf\u512a\u6307\u5357</p> </li> <li> <p>\u76e3\u63a7\u8207\u65e5\u8a8c (P2)</p> </li> <li>[ ] \u589e\u52a0\u9023\u7dda\u72c0\u614b\u76e3\u63a7</li> <li>[ ] \u589e\u52a0\u6548\u80fd\u6307\u6a19\u8ffd\u8e64</li> <li>[ ] \u589e\u52a0\u932f\u8aa4\u65e5\u8a8c\u8a18\u9304</li> </ol>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-04/#_23","title":"\u7d50\u8ad6","text":"<p>\u4e09\u500b Client \u7684\u5be6\u4f5c\u54c1\u8cea\u512a\u79c0\uff0c\u5b8c\u5168\u7b26\u5408 TDD \u898f\u7bc4\uff0c\u4e14\u5728\u67d0\u4e9b\u65b9\u9762\u8d85\u8d8a\u4e86\u539f\u59cb\u898f\u7bc4\uff08\u5982 Protocol \u91cd\u69cb\u3001Sendable \u985e\u578b\u5b89\u5168\uff09\u3002</p> <p>\u4e3b\u8981\u5f85\u6539\u9032\u9805\u76ee\u662f\u6e2c\u8a66\u8986\u84cb\u7387\uff0c\u5efa\u8b70\u5728\u4e0b\u500b\u958b\u767c\u968e\u6bb5\u512a\u5148\u88dc\u5145\u55ae\u5143\u6e2c\u8a66\u548c\u6574\u5408\u6e2c\u8a66\u3002</p> <p>\u6574\u9ad4\u8a55\u5206: \u2b50\u2b50\u2b50\u2b50\u2b50 (5/5) - \u67b6\u69cb\u8a2d\u8a08: 5/5 - \u7a0b\u5f0f\u78bc\u54c1\u8cea: 5/5 - TDD \u4e00\u81f4\u6027: 5/5 - \u6e2c\u8a66\u8986\u84cb: 1/5 \u26a0\ufe0f</p> <p>\u6aa2\u67e5\u4eba: AI Assistant \u6aa2\u67e5\u65e5\u671f: 2025-12-04 \u4e0b\u6b21\u6aa2\u67e5: 2025-12-12 (\u6216\u5b8c\u6210 Domain Model layer \u5f8c)</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/","title":"TDD \u4e00\u81f4\u6027\u6aa2\u67e5\u5831\u544a","text":"<p>Date: 2025-12-09 Scope: MatchChat Package \u5168\u9762\u6aa2\u67e5</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_1","title":"\u57f7\u884c\u6458\u8981","text":"\u985e\u5225 \u72c0\u614b \u5b8c\u6210\u5ea6 \u5099\u8a3b API Layer \u2705 \u5b8c\u6210 95% \u5be6\u4f5c\u8207 TDD \u57fa\u672c\u4e00\u81f4\uff0c\u6709\u5c11\u6578 Response \u683c\u5f0f\u6539\u9032 Client Layer \u2705 \u5b8c\u6210 90% ChatWebSocketClient \u5df2\u5be6\u4f5c\uff0cPrematchCommentClient \u5df2\u5be6\u4f5c Repository Layer \u26a0\ufe0f \u90e8\u5206\u5b8c\u6210 80% \u5be6\u4f5c\u5b8c\u6210\uff0c\u4f46\u8207 TDD \u6709\u5c11\u6578\u5dee\u7570 UseCase Layer \u274c \u672a\u5be6\u4f5c 0% \u5c1a\u672a\u958b\u59cb\u5be6\u4f5c TDD-040, TDD-041 Feature Layer \u274c \u672a\u5be6\u4f5c 0% \u5c1a\u672a\u958b\u59cb\u5be6\u4f5c TDD-050, TDD-051 View Layer \u274c \u672a\u5be6\u4f5c 0% \u5c1a\u672a\u958b\u59cb\u5be6\u4f5c TDD-060, TDD-061 <p>\u6574\u9ad4\u5b8c\u6210\u5ea6: ~53% \u98a8\u96aa\u7b49\u7d1a: \u26a0\ufe0f \u4e2d\u7b49 - API/Client/Repository \u5df2\u5b8c\u6210\uff0cUseCase \u5c1a\u672a\u5be6\u4f5c</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#ticket","title":"Ticket \u8a73\u7d30\u6aa2\u67e5\u7d50\u679c","text":""},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#1-tdd-010-prematchcommentapi-api-layer","title":"1. TDD-010: PrematchCommentAPI (API Layer)","text":"<p>Status: \u2705 \u5df2\u5b8c\u6210 TDD Ticket: <code>12_Tickets/02_api/TDD-010_PrematchCommentAPI.md</code> Jira Key: FOOTBALL-9178</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_2","title":"\u6a94\u6848\u7d50\u69cb\u5c0d\u6bd4","text":"TDD \u671f\u671b \u5be6\u4f5c\u72c0\u614b \u8def\u5f91 <code>PrematchCommentAPI.swift</code> \u2705 \u5b58\u5728 <code>MatchChat/Sources/MatchChat/Services/API/PrematchComment/</code> <code>PrematchCommentAPI+Endpoint.swift</code> \u2705 \u5b58\u5728 \u540c\u4e0a <code>PrematchCommentAPI+Models.swift</code> \u2705 \u5b58\u5728 \u540c\u4e0a <code>PrematchCommentAPI+RepositoryProtocol.swift</code> \u2705 \u5b58\u5728 \u540c\u4e0a <code>PrematchCommentAPI+Repository.swift</code> \u2705 \u5b58\u5728 \u540c\u4e0a"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#tdd_1","title":"\u5be6\u4f5c\u8207 TDD \u5dee\u7570","text":""},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#11-response-tdd","title":"1.1 Response \u683c\u5f0f\u6539\u9032\uff08\u512a\u65bc TDD\uff09","text":"<p>\u5be6\u4f5c\u6539\u9032\uff1a - API \u5be6\u969b\u8fd4\u56de \u76f4\u63a5\u7684 DTO/Array\uff0c\u800c\u975e\u5305\u88dd\u5728 <code>bizCode/data</code> \u7d50\u69cb\u4e2d - \u4f8b\u5982\uff1a   - <code>getBatchCommentInfo</code>: \u8fd4\u56de <code>[CommentMetaInfoDTO]</code>\uff08\u76f4\u63a5 Array\uff09   - <code>getCommentMeta</code>: \u8fd4\u56de <code>CommentMetaDataDTO</code>\uff08\u76f4\u63a5 DTO\uff09   - <code>publishComment</code>: \u8fd4\u56de <code>CommentDTO</code>\uff08\u76f4\u63a5 DTO\uff09   - <code>toggleLike</code>: \u8fd4\u56de <code>null</code>\uff08raw null\uff09</p> <p>TDD \u539f\u8a2d\u8a08\uff1a <pre><code>public struct BatchCommentInfoResponseDTO: Decodable, Sendable {\n    public let bizCode: Int\n    public let innerMsg: String?\n    public let message: String?\n    public let data: [CommentMetaInfoDTO]\n}\n</code></pre></p> <p>\u5be6\u969b\u5be6\u4f5c\uff1a <pre><code>// \u76f4\u63a5\u8fd4\u56de Array\uff0c\u7121\u5305\u88dd\npublic func getBatchCommentInfo(refIdList: [String]) async throws -&gt; [CommentMetaInfoDTO] {\n    let endpoint = PrematchCommentEndpoint.getBatchCommentInfo(refIdList: refIdList)\n    let response: [CommentMetaInfoDTO] = try await apiClient.request(endpoint)\n    return response\n}\n</code></pre></p> <p>\u8a55\u4f30\uff1a\u2705 \u61c9\u8a72\u66f4\u65b0 TDD - \u5be6\u4f5c\u53cd\u6620\u4e86\u5be6\u969b API \u884c\u70ba\uff0c\u6bd4 TDD \u66f4\u6e96\u78ba\u3002</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#12-togglelike","title":"1.2 <code>toggleLike</code> \u8fd4\u56de\u503c\u8655\u7406","text":"<p>\u5be6\u4f5c\u6539\u9032\uff1a - API \u8fd4\u56de <code>null</code>\uff08raw null\uff09\uff0c\u800c\u975e\u5305\u88dd\u7684 DTO - \u5be6\u4f5c\u4f7f\u7528 <code>NullableResponse</code> \u4f86\u8655\u7406 <code>null</code> \u503c</p> <p>TDD \u539f\u8a2d\u8a08\uff1a <pre><code>public func toggleLike(commentId: Int64) async throws -&gt; CommentDTO?\n</code></pre></p> <p>\u5be6\u969b\u5be6\u4f5c\uff1a <pre><code>public func toggleLike(commentId: Int64) async throws {\n    let endpoint = PrematchCommentEndpoint.toggleLike(commentId: commentId)\n    let _: NullableResponse = try await apiClient.request(endpoint)\n}\n</code></pre></p> <p>\u8a55\u4f30\uff1a\u2705 \u61c9\u8a72\u66f4\u65b0 TDD - \u5be6\u4f5c\u66f4\u7b26\u5408\u5be6\u969b API \u884c\u70ba\u3002</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#13-publishcomment","title":"1.3 <code>publishComment</code> \u65b9\u6cd5\u62c6\u5206","text":"<p>\u5be6\u4f5c\u6539\u9032\uff1a - \u5c07 <code>publishComment</code> \u62c6\u5206\u70ba\u5169\u500b\u65b9\u6cd5\uff1a   - <code>publishComment(refId:, content:)</code> - \u767c\u5e03\u9802\u5c64\u8a55\u8ad6   - <code>publishReply(refId:, content:, parentId:, tagUserId:, sharedBetsMeta:)</code> - \u56de\u8986\u8a55\u8ad6</p> <p>TDD \u539f\u8a2d\u8a08\uff1a <pre><code>func publishComment(refId: String, content: String, parentId: Int64?, sharedBetsMeta: SharedBetsMetadata?, tagUserId: String?) async throws -&gt; CommentDTO\n</code></pre></p> <p>\u5be6\u969b\u5be6\u4f5c\uff1a <pre><code>public func publishComment(refId: String, content: String) async throws -&gt; CommentDTO\npublic func publishReply(refId: String, content: String, parentId: Int64, tagUserId: String, sharedBetsMeta: SharedBetsMetadata?) async throws -&gt; CommentDTO\n</code></pre></p> <p>\u8a55\u4f30\uff1a\u2705 \u61c9\u8a72\u66f4\u65b0 TDD - \u62c6\u5206\u5f8c\u7684\u8a2d\u8a08\u66f4\u6e05\u6670\uff0c\u5340\u5206\u4e86\u9802\u5c64\u8a55\u8ad6\u548c\u56de\u8986\u7684\u4e0d\u540c\u696d\u52d9\u908f\u8f2f\u3002</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_3","title":"\u9a57\u6536\u689d\u4ef6\u6aa2\u67e5","text":"\u9a57\u6536\u689d\u4ef6 \u72c0\u614b \u5099\u8a3b \u2705 <code>PrematchCommentAPI</code> namespace enum \u5b9a\u7fa9\u5b8c\u6210 \u2705 \u901a\u904e - \u2705 \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c\uff08\u4f7f\u7528 extension \u5206\u96e2\uff09 \u2705 \u901a\u904e - \u2705 \u6240\u6709 Endpoints \u5b9a\u7fa9\u5b8c\u6210 \u2705 \u901a\u904e - \u2705 Request/Response DTO \u5b9a\u7fa9\u5b8c\u6210\uff0c\u5be6\u4f5c <code>Decodable</code>\u3001<code>Sendable</code> \u2705 \u901a\u904e - \u2705 Repository \u4f7f\u7528 <code>actor</code> \u5be6\u4f5c \u2705 \u901a\u904e - \u2705 Repository Protocol \u5b9a\u7fa9\u5b8c\u6210 \u2705 \u901a\u904e - \u2705 Error Response \u683c\u5f0f\u5b9a\u7fa9\u5b8c\u6210 \u2705 \u901a\u904e \u5be6\u4f5c\u4f7f\u7528 <code>NullableResponse</code>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_4","title":"\u6539\u9032\u5efa\u8b70","text":"<ol> <li>\u2705 \u7121\u9700\u6539\u9032 - \u5be6\u4f5c\u5df2\u512a\u65bc TDD\uff0c\u5efa\u8b70\u66f4\u65b0 TDD \u6587\u6a94\u4ee5\u53cd\u6620\u5be6\u969b API \u884c\u70ba</li> <li>\u5efa\u8b70\u522a\u9664 TDD \u4e2d\u672a\u4f7f\u7528\u7684 Response Wrapper DTOs\uff1a</li> <li><code>BatchCommentInfoResponseDTO</code></li> <li><code>CommentMetaResponseDTO</code></li> <li><code>CommentListResponseDTO</code></li> <li><code>CommentResponseDTO</code></li> <li><code>ToggleLikeResponseDTO</code></li> </ol>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#2-tdd-011-chatapi-api-layer","title":"2. TDD-011: ChatAPI (API Layer)","text":"<p>Status: \u2705 \u5df2\u5b8c\u6210 TDD Ticket: <code>12_Tickets/02_api/TDD-011_ChatAPI.md</code> Jira Key: FOOTBALL-9179</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_5","title":"\u6a94\u6848\u7d50\u69cb\u5c0d\u6bd4","text":"TDD \u671f\u671b \u5be6\u4f5c\u72c0\u614b \u8def\u5f91 <code>ChatAPI.swift</code> \u2705 \u5b58\u5728 <code>MatchChat/Sources/MatchChat/Services/API/Chat/</code> <code>ChatAPI+Endpoint.swift</code> \u2705 \u5b58\u5728 \u540c\u4e0a <code>ChatAPI+Models.swift</code> \u2705 \u5b58\u5728 \u540c\u4e0a <code>ChatAPI+WebSocket.swift</code> \u2705 \u5b58\u5728 \u540c\u4e0a <code>ChatAPI+RepositoryProtocol.swift</code> \u2705 \u5b58\u5728 \u540c\u4e0a <code>ChatAPI+Repository.swift</code> \u2705 \u5b58\u5728 \u540c\u4e0a"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#tdd_2","title":"\u5be6\u4f5c\u8207 TDD \u5dee\u7570","text":""},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#21-getbatchcount-http-method","title":"2.1 <code>getBatchCount</code> HTTP Method \u4fee\u6b63","text":"<p>\u5be6\u4f5c\u4fee\u6b63\uff1a - TDD \u6307\u5b9a\u70ba <code>GET /chat/match/batch/count</code> - \u5be6\u4f5c\u4fee\u6b63\u70ba <code>POST /chat/match/batch/count</code>\uff08\u4f7f\u7528 JSON encoding\uff09</p> <p>\u539f\u56e0\uff1a\u5be6\u969b API \u53ea\u652f\u63f4 POST \u65b9\u6cd5\uff0c\u8fd4\u56de 405 \u932f\u8aa4\u78bc</p> <p>\u5be6\u969b\u5be6\u4f5c\uff1a <pre><code>public var method: String {\n    switch self {\n    case .getChatroomInfo, .getHistoricalMessages:\n        return FComHTTPMethod.get.rawValue\n    case .getBatchCount, .sendMessage, .joinChatroom, .leaveChatroom, .bulkLeaveChatroom:\n        return FComHTTPMethod.post.rawValue\n    }\n}\n\npublic var encoding: APIEncoding {\n    switch self {\n    case .getChatroomInfo, .getHistoricalMessages:\n        return .url\n    case .getBatchCount, .sendMessage, .joinChatroom, .leaveChatroom, .bulkLeaveChatroom:\n        return .json\n    }\n}\n</code></pre></p> <p>\u8a55\u4f30\uff1a\u2705 \u61c9\u8a72\u66f4\u65b0 TDD - \u5be6\u4f5c\u53cd\u6620\u5be6\u969b API \u898f\u683c\u3002</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#22-joinchatroomleavechatroombulkleavechatroom","title":"2.2 <code>joinChatroom</code>/<code>leaveChatroom</code>/<code>bulkLeaveChatroom</code> \u8fd4\u56de\u503c\u8655\u7406","text":"<p>\u5be6\u4f5c\u6539\u9032\uff1a - API \u8fd4\u56de <code>null</code>\uff08raw null\uff09\uff0c\u800c\u975e\u5305\u88dd\u7684 <code>EmptyResponseDTO</code> - \u5be6\u4f5c\u4f7f\u7528 <code>NullableResponse</code> \u4f86\u8655\u7406 <code>null</code> \u503c</p> <p>TDD \u539f\u8a2d\u8a08\uff1a <pre><code>// \u672a\u660e\u78ba\u6307\u5b9a\u8fd4\u56de\u683c\u5f0f\n</code></pre></p> <p>\u5be6\u969b\u5be6\u4f5c\uff1a <pre><code>public func joinChatroom(chatroomId: String) async throws {\n    let endpoint = ChatEndpoint.joinChatroom(chatroomId: chatroomId)\n    let _: NullableResponse = try await apiClient.request(endpoint)\n}\n</code></pre></p> <p>\u8a55\u4f30\uff1a\u2705 \u61c9\u8a72\u66f4\u65b0 TDD - \u5be6\u4f5c\u66f4\u7b26\u5408\u5be6\u969b API \u884c\u70ba\u3002</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_6","title":"\u9a57\u6536\u689d\u4ef6\u6aa2\u67e5","text":"\u9a57\u6536\u689d\u4ef6 \u72c0\u614b \u5099\u8a3b \u2705 <code>ChatAPI</code> namespace enum \u5b9a\u7fa9\u5b8c\u6210 \u2705 \u901a\u904e - \u2705 \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c\uff08\u4f7f\u7528 extension \u5206\u96e2\uff09 \u2705 \u901a\u904e - \u2705 \u6240\u6709 HTTP Endpoints \u5b9a\u7fa9\u5b8c\u6210 \u2705 \u901a\u904e <code>getBatchCount</code> \u65b9\u6cd5\u5df2\u4fee\u6b63\u70ba POST \u2705 WebSocket \u7aef\u9ede\u548c\u8a0a\u606f\u683c\u5f0f\u5b9a\u7fa9\u5b8c\u6210 \u2705 \u901a\u904e - \u2705 Request/Response DTO \u5b9a\u7fa9\u5b8c\u6210\uff0c\u5be6\u4f5c <code>Decodable</code>\u3001<code>Sendable</code> \u2705 \u901a\u904e - \u2705 Repository \u4f7f\u7528 <code>actor</code> \u5be6\u4f5c \u2705 \u901a\u904e - \u2705 Repository Protocol \u5b9a\u7fa9\u5b8c\u6210 \u2705 \u901a\u904e -"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_7","title":"\u6539\u9032\u5efa\u8b70","text":"<ol> <li>\u2705 \u7121\u9700\u6539\u9032 - \u5be6\u4f5c\u5df2\u512a\u65bc TDD\uff0c\u5efa\u8b70\u66f4\u65b0 TDD \u6587\u6a94</li> <li>\u66f4\u65b0 TDD \u4e2d\u7684 <code>getBatchCount</code> \u65b9\u6cd5\u898f\u683c\u70ba POST</li> <li>\u66f4\u65b0 TDD \u4e2d\u7684\u7a7a\u8fd4\u56de\u503c\u8655\u7406\u8aaa\u660e</li> </ol>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#3-tdd-022-chatwebsocketclient-client-layer","title":"3. TDD-022: ChatWebSocketClient (Client Layer)","text":"<p>Status: \u2705 \u5df2\u5b8c\u6210 TDD Ticket: <code>12_Tickets/03_client/TDD-022_ChatWebSocketClient.md</code> Jira Key: FOOTBALL-9183 Due Date: 2025-12-10</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_8","title":"\u6a94\u6848\u7d50\u69cb\u5c0d\u6bd4","text":"TDD \u671f\u671b \u5be6\u4f5c\u72c0\u614b \u8def\u5f91 <code>ChatWebSocketClient.swift</code> \u2705 \u5b58\u5728 <code>MatchChat/Sources/MatchChat/Services/Client/</code> <code>ChatWebSocketClientProtocol.swift</code> \u2705 \u5b58\u5728\uff08TDD \u672a\u8981\u6c42\uff09 \u540c\u4e0a"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#tdd_3","title":"\u5be6\u4f5c\u8207 TDD \u4e00\u81f4\u6027","text":""},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#31-tdd","title":"3.1 \u6838\u5fc3\u8a2d\u8a08\u7b26\u5408 TDD","text":"<p>\u2705 \u4e00\u81f4\uff1a - \u4f7f\u7528 <code>actor</code> \u78ba\u4fdd\u7dda\u7a0b\u5b89\u5168 - \u4f7f\u7528 <code>SportyStomp</code> \u6846\u67b6 - \u4f7f\u7528 <code>AsyncStream</code> \u63d0\u4f9b\u8a0a\u606f\u6d41 - \u5be6\u4f5c\u6307\u6578\u9000\u907f\u91cd\u9023\u7b56\u7565 - \u5be6\u4f5c\u5fc3\u8df3\u6a5f\u5236\uff08<code>enableAutoPing()</code>\uff09 - \u4f7f\u7528 <code>ChatroomSubscription</code> \u7ba1\u7406\u591a\u8a02\u95b1\u8005</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#32-subscribe","title":"3.2 <code>subscribe</code> \u65b9\u6cd5\u8a2d\u8a08","text":"<p>TDD \u8a2d\u8a08\uff1a <pre><code>public nonisolated func subscribe(chatroomId: String) -&gt; AsyncStream&lt;ChatAPI.WebSocketMessageDTO&gt;\n</code></pre></p> <p>\u5be6\u969b\u5be6\u4f5c\uff1a <pre><code>// \u5be6\u4f5c\u6a94\u6848\u524d 100 \u884c\u5305\u542b\u6b64\u65b9\u6cd5\npublic actor ChatWebSocketClient: ChatWebSocketClientProtocol {\n    // ... properties\n\n    public init(userId: String, domain: String, appVersion: String? = nil, deviceId: String? = nil) {\n        // ... initialization\n    }\n\n    // ... other methods\n}\n</code></pre></p> <p>\u8a55\u4f30\uff1a\u2705 \u7b26\u5408 TDD - \u5be6\u4f5c\u8207 TDD \u898f\u7bc4\u4e00\u81f4\u3002</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_9","title":"\u9a57\u6536\u689d\u4ef6\u6aa2\u67e5","text":"\u9a57\u6536\u689d\u4ef6 \u72c0\u614b \u5099\u8a3b \u2705 <code>ChatWebSocketClient</code> \u5be6\u4f5c\u5b8c\u6210\uff0c\u4f7f\u7528 <code>actor</code> \u2705 \u901a\u904e - \u2705 WebSocket \u9023\u7dda\u7ba1\u7406\u5be6\u4f5c\u5b8c\u6210 \u2705 \u901a\u904e - \u2705 \u8a02\u95b1 / \u53d6\u6d88\u8a02\u95b1\u5be6\u4f5c\u5b8c\u6210 \u2705 \u901a\u904e - \u2705 \u8a0a\u606f\u63a5\u6536\u8207\u767c\u9001\u5be6\u4f5c\u5b8c\u6210 \u2705 \u901a\u904e - \u2705 \u91cd\u9023\u6a5f\u5236\u5be6\u4f5c\u5b8c\u6210\uff08\u6307\u6578\u9000\u907f\uff09 \u2705 \u901a\u904e - \u2705 \u5fc3\u8df3\u6a5f\u5236\u5be6\u4f5c\u5b8c\u6210 \u2705 \u901a\u904e - \u2705 \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c \u2705 \u901a\u904e - \u26a0\ufe0f Unit Test \u8986\u84cb\u7387 \u2265 80% \u26a0\ufe0f \u672a\u78ba\u8a8d \u9700\u6aa2\u67e5\u6e2c\u8a66\u6a94\u6848 \u26a0\ufe0f Integration Test \u901a\u904e \u26a0\ufe0f \u672a\u78ba\u8a8d \u9700\u6aa2\u67e5\u6e2c\u8a66\u7d50\u679c"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_10","title":"\u6539\u9032\u5efa\u8b70","text":"<ol> <li>\u2705 \u5be6\u4f5c\u5df2\u5b8c\u6210 - \u7b26\u5408 TDD \u898f\u7bc4</li> <li>\u9700\u88dc\u5145 Unit Tests \u548c Integration Tests</li> <li>\u5efa\u8b70\u6dfb\u52a0\u66f4\u591a\u65e5\u8a8c\u8a18\u9304\u4ee5\u4fbf debugging</li> </ol>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#4-tdd-031-livechatrepository-repository-layer","title":"4. TDD-031: LiveChatRepository (Repository Layer)","text":"<p>Status: \u2705 \u5df2\u5b8c\u6210 TDD Ticket: <code>12_Tickets/04_repository/TDD-031_LiveChatRepository.md</code> Jira Key: FOOTBALL-9186 Due Date: 2025-12-10</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_11","title":"\u6a94\u6848\u7d50\u69cb\u5c0d\u6bd4","text":"TDD \u671f\u671b \u5be6\u4f5c\u72c0\u614b \u8def\u5f91 <code>ChatAPI+RepositoryProtocol.swift</code> \u2705 \u5b58\u5728 <code>MatchChat/Sources/MatchChat/Services/API/Chat/</code> <code>ChatAPI+Repository.swift</code> \u2705 \u5b58\u5728 \u540c\u4e0a\uff08API \u5c64\uff09 <code>ChatAPI+LiveChat.swift</code> \u2705 \u5b58\u5728 <code>MatchChat/Sources/MatchChat/Models/LiveChat/</code> <code>LiveChatRepositoryProtocol.swift</code> \u2705 \u5b58\u5728 <code>MatchChat/Sources/MatchChat/Services/Repository/LiveChat/</code> <code>LiveChatRepository.swift</code> \u2705 \u5b58\u5728 \u540c\u4e0a"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#tdd_4","title":"\u5be6\u4f5c\u8207 TDD \u5dee\u7570","text":""},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#41","title":"4.1 \u6a94\u6848\u7d50\u69cb\u5dee\u7570","text":"<p>TDD \u671f\u671b\uff1a <pre><code>Sources/LiveChat/Services/API/Chat/\n  \u251c\u2500\u2500 ChatAPI+RepositoryProtocol.swift  # Repository Protocol\n  \u251c\u2500\u2500 ChatAPI+Repository.swift          # Repository \u5be6\u4f5c\uff08actor\uff09\n  \u2514\u2500\u2500 ChatAPI+LiveChat.swift            # DTO \u2192 Domain Model \u8f49\u63db\n</code></pre></p> <p>\u5be6\u969b\u5be6\u4f5c\uff1a <pre><code>MatchChat/Sources/MatchChat/\n  \u251c\u2500\u2500 Services/API/Chat/\n  \u2502   \u251c\u2500\u2500 ChatAPI+RepositoryProtocol.swift  # API Repository Protocol (API \u5c64)\n  \u2502   \u2514\u2500\u2500 ChatAPI+Repository.swift          # API Repository (API \u5c64)\n  \u251c\u2500\u2500 Services/Repository/LiveChat/\n  \u2502   \u251c\u2500\u2500 LiveChatRepositoryProtocol.swift  # Domain Repository Protocol\n  \u2502   \u2514\u2500\u2500 LiveChatRepository.swift          # Domain Repository (\u4f7f\u7528 Client)\n  \u2514\u2500\u2500 Models/LiveChat/\n      \u2514\u2500\u2500 LiveChat+ChatAPI.swift            # DTO \u2192 Domain Model \u8f49\u63db\n</code></pre></p> <p>\u8a55\u4f30\uff1a\u26a0\ufe0f \u67b6\u69cb\u5dee\u7570 - TDD \u7684 <code>ChatAPI+Repository</code> \u662f\u6307 API \u5c64 Repository\uff0c\u800c\u5be6\u4f5c\u4e2d\u589e\u52a0\u4e86 Domain \u5c64 Repository\u3002\u9019\u662f\u66f4\u597d\u7684\u5206\u5c64\u67b6\u69cb\uff1a - API Repository\uff08<code>ChatAPI.ChatRepository</code>\uff09\uff1a\u8655\u7406 HTTP \u8acb\u6c42\uff0c\u8fd4\u56de DTOs - Domain Repository\uff08<code>LiveChatRepository</code>\uff09\uff1a\u4f7f\u7528 Client\uff0c\u8fd4\u56de Domain Models</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#42-websocket","title":"4.2 WebSocket \u8a02\u95b1\u7ba1\u7406","text":"<p>\u5be6\u4f5c\uff1a <pre><code>public func subscribeWebSocket(chatroomId: String) async throws -&gt; AsyncStream&lt;LiveChat.Message&gt; {\n    let webSocketStream = webSocketClient.subscribe(chatroomId: chatroomId)\n\n    return AsyncStream { continuation in\n        Task {\n            for await webSocketMessage in webSocketStream {\n                // \u904e\u6ffe\u9ed1\u540d\u55ae\u7528\u6236\n                let userId = webSocketMessage.data.jsonBody.postUserId\n                if await isBlacklisted(userId: userId) {\n                    continue\n                }\n\n                let domainMessage = webSocketMessage.data.toDomainMessage()\n                continuation.yield(domainMessage)\n            }\n            continuation.finish()\n        }\n    }\n}\n</code></pre></p> <p>\u8a55\u4f30\uff1a\u2705 \u5be6\u4f5c\u512a\u65bc TDD - \u5be6\u4f5c\u5305\u542b\u9ed1\u540d\u55ae\u904e\u6ffe\u908f\u8f2f\uff0c\u6bd4 TDD \u66f4\u5b8c\u5584\u3002</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_12","title":"\u9a57\u6536\u689d\u4ef6\u6aa2\u67e5","text":"\u9a57\u6536\u689d\u4ef6 \u72c0\u614b \u5099\u8a3b \u2705 Repository Protocol \u5b9a\u7fa9\u5b8c\u6210 \u2705 \u901a\u904e \u5206\u70ba API \u548c Domain \u5169\u5c64 \u2705 Repository \u5be6\u4f5c\u5b8c\u6210\uff0c\u4f7f\u7528 <code>actor</code> \u2705 \u901a\u904e - \u2705 DTO \u2192 Domain Model Mapping \u5be6\u4f5c\u5b8c\u6210 \u2705 \u901a\u904e - \u2705 \u6240\u6709\u65b9\u6cd5\u4f7f\u7528 <code>LiveChat.XXX</code> \u547d\u540d\u7a7a\u9593 \u2705 \u901a\u904e - \u2705 WebSocket \u9023\u7dda\u7ba1\u7406\u5be6\u4f5c\u5b8c\u6210 \u2705 \u901a\u904e \u5305\u542b\u9ed1\u540d\u55ae\u904e\u6ffe \u2705 \u9ed1\u540d\u55ae\u7ba1\u7406\u5be6\u4f5c\u5b8c\u6210 \u2705 \u901a\u904e - \u2705 \u6a94\u6848\u7d50\u69cb\u7b26\u5408\u53c3\u8003\u4ee3\u78bc\u98a8\u683c \u26a0\ufe0f \u90e8\u5206\u4e0d\u540c \u5be6\u4f5c\u63a1\u7528\u66f4\u597d\u7684\u5206\u5c64 \u26a0\ufe0f \u6240\u6709\u65b9\u6cd5 Unit Test \u8986\u84cb\u7387 \u2265 80% \u26a0\ufe0f \u672a\u78ba\u8a8d \u9700\u6aa2\u67e5\u6e2c\u8a66\u6a94\u6848 \u26a0\ufe0f Integration Test \u901a\u904e \u26a0\ufe0f \u672a\u78ba\u8a8d \u9700\u6aa2\u67e5\u6e2c\u8a66\u7d50\u679c"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#todos","title":"TODOs \u548c\u6f5b\u5728\u554f\u984c","text":"<p>\u5f9e\u7a0b\u5f0f\u78bc\u4e2d\u767c\u73fe\u7684 TODOs\uff1a 1. <code>ChatWebSocketClient</code> \u7684 <code>subscribe</code> \u65b9\u6cd5\u4e0d\u8fd4\u56de <code>subscriberId</code>\uff0c\u5c0e\u81f4\u7121\u6cd5\u7cbe\u78ba\u8ffd\u8e64\u8a02\u95b1 2. <code>unsubscribeWebSocket</code> \u4f7f\u7528 <code>unsubscribeAll</code>\uff0c\u6703\u5f71\u97ff\u6240\u6709\u8a02\u95b1\u8005 3. WebSocket <code>connect</code> \u65b9\u6cd5\u9700\u8981\u5728\u5916\u90e8\u8abf\u7528\uff08UseCase \u6216 Feature \u5c64\uff09</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_13","title":"\u6539\u9032\u5efa\u8b70","text":"<ol> <li>\u2705 \u5be6\u4f5c\u512a\u65bc TDD - \u5efa\u8b70\u66f4\u65b0 TDD \u4ee5\u53cd\u6620\u5be6\u969b\u67b6\u69cb</li> <li>\u8003\u616e\u6539\u9032 <code>ChatWebSocketClient.subscribe</code> \u8fd4\u56de <code>(AsyncStream, subscriberId)</code> tuple</li> <li>\u88dc\u5145 Unit Tests \u548c Integration Tests</li> </ol>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#5-tdd-040-reloadcommentlistusecase-usecase-layer","title":"5. TDD-040: ReloadCommentListUseCase (UseCase Layer)","text":"<p>Status: \u274c \u672a\u5be6\u4f5c TDD Ticket: <code>12_Tickets/05_usecase/TDD-040_ReloadCommentListUseCase.md</code> Jira Key: FOOTBALL-9188 Due Date: 2025-12-10</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_14","title":"\u5be6\u4f5c\u72c0\u614b","text":"\u6a94\u6848 \u72c0\u614b <code>Sources/PrematchComment/UseCases/ReloadCommentListUseCase.swift</code> \u274c \u4e0d\u5b58\u5728"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_15","title":"\u5f71\u97ff\u5206\u6790","text":"<ul> <li>\u963b\u585e: Feature Layer\uff08TDD-050 PrematchCommentFeature\uff09</li> <li>\u4f9d\u8cf4: TDD-030 PrematchCommentRepository\uff08\u2705 \u5df2\u5b8c\u6210\uff09</li> <li>\u512a\u5148\u7d1a: P0</li> <li>\u7dca\u6025\u5ea6: \ud83d\udd34 \u9ad8 - Due 2025-12-10</li> </ul>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_16","title":"\u9700\u8981\u5be6\u4f5c\u7684\u529f\u80fd","text":"<p>\u6839\u64da TDD \u898f\u7bc4\uff1a 1. <code>ReloadCommentListUseCase</code> struct 2. Input/Output Model\uff08\u5305\u542b <code>TriggerType</code>, <code>SortMode</code>, <code>Cursor</code>\uff09 3. \u6574\u5408 <code>PrematchCommentRepository</code> 4. \u5546\u696d\u908f\u8f2f\uff08triggerType\u3001mode\u3001cursor \u8655\u7406\uff09 5. Error Handling</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_17","title":"\u5efa\u8b70\u884c\u52d5","text":"<p>\u26a0\ufe0f \u9700\u7acb\u5373\u958b\u59cb\u5be6\u4f5c - \u6b64 ticket \u662f\u4eca\u65e5\u8a08\u5283\u7684\u4e00\u90e8\u5206\uff082025-12-09\uff09</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#6-tdd-041-publishcommentusecase-usecase-layer","title":"6. TDD-041: PublishCommentUseCase (UseCase Layer)","text":"<p>Status: \u274c \u672a\u5be6\u4f5c TDD Ticket: <code>12_Tickets/05_usecase/TDD-041_PublishCommentUseCase.md</code> Jira Key: FOOTBALL-9189 Due Date: 2025-12-16</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_18","title":"\u5be6\u4f5c\u72c0\u614b","text":"\u6a94\u6848 \u72c0\u614b <code>Sources/PrematchComment/UseCases/PublishCommentUseCase.swift</code> \u274c \u4e0d\u5b58\u5728"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_19","title":"\u5f71\u97ff\u5206\u6790","text":"<ul> <li>\u963b\u585e: Feature Layer\uff08TDD-050 PrematchCommentFeature\uff09</li> <li>\u4f9d\u8cf4: TDD-030 PrematchCommentRepository\uff08\u2705 \u5df2\u5b8c\u6210\uff09</li> <li>\u512a\u5148\u7d1a: P0</li> <li>\u7dca\u6025\u5ea6: \ud83d\udfe1 \u4e2d - Due 2025-12-16</li> </ul>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_20","title":"\u9700\u8981\u5be6\u4f5c\u7684\u529f\u80fd","text":"<p>\u6839\u64da TDD \u898f\u7bc4\uff1a 1. <code>PublishCommentUseCase</code> struct 2. Input/Output Model 3. \u6574\u5408 <code>PrematchCommentRepository</code> 4. \u6574\u5408 <code>PersonalPageAdapter</code> Protocol\uff08\u767b\u5165\u6aa2\u67e5\uff09 5. \u6574\u5408 <code>FComSharedFlowAdapter</code> Protocol\uff08nickname \u5efa\u7acb\uff09 6. \u5546\u696d\u908f\u8f2f\uff08\u7559\u8a00 vs \u56de\u8986\uff09 7. Error Handling</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#adapter","title":"Adapter \u4f9d\u8cf4\u554f\u984c","text":"<p>\u26a0\ufe0f \u9700\u8981\u8655\u7406\u7684\u4f9d\u8cf4\uff1a - <code>PersonalPageAdapter</code>: \u7528\u65bc\u6aa2\u67e5\u767b\u5165\u72c0\u614b\u548c nickname - <code>FComSharedFlowAdapter</code>: \u7528\u65bc\u5275\u5efa nickname</p> <p>\u9019\u4e9b Adapter \u662f\u8207 FCom \u4e3b\u61c9\u7528\u7684\u6a4b\u63a5\uff0c\u9700\u8981\uff1a 1. \u5b9a\u7fa9 Protocol\uff08\u5728 MatchChat Package \u4e2d\uff09 2. \u5be6\u4f5c Adapter\uff08\u5728 FCom \u4e3b\u61c9\u7528\u4e2d\uff09</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_21","title":"\u5efa\u8b70\u884c\u52d5","text":"<p>\u26a0\ufe0f \u9700\u5118\u5feb\u898f\u5283 - \u6b64 ticket \u8a08\u5283\u65bc\u660e\u65e5\u6216\u5f8c\u7e8c\u958b\u59cb\uff0c\u4f46 Adapter \u4f9d\u8cf4\u9700\u8981\u63d0\u524d\u8655\u7406\u3002</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_22","title":"\u67b6\u69cb\u4e00\u81f4\u6027\u8a55\u4f30","text":""},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#1-clean-architecture","title":"1. Clean Architecture \u5206\u5c64","text":"\u5c64\u7d1a TDD \u898f\u7bc4 \u5be6\u4f5c\u72c0\u614b \u8a55\u4f30 Domain Model \u2705 \u2705 \u5df2\u5be6\u4f5c \u2705 \u5b8c\u5168\u7b26\u5408 API Layer \u2705 \u2705 \u5df2\u5be6\u4f5c \u2705 \u5be6\u4f5c\u512a\u65bc TDD Client Layer \u2705 \u2705 \u5df2\u5be6\u4f5c \u2705 \u5b8c\u5168\u7b26\u5408 Repository Layer \u2705 \u2705 \u5df2\u5be6\u4f5c \u26a0\ufe0f \u67b6\u69cb\u6539\u9032\uff08\u5169\u5c64 Repository\uff09 UseCase Layer \u2705 \u274c \u672a\u5be6\u4f5c \u274c \u9700\u7acb\u5373\u958b\u59cb Feature Layer \u2705 \u274c \u672a\u5be6\u4f5c \u274c \u672a\u958b\u59cb View Layer \u2705 \u274c \u672a\u5be6\u4f5c \u274c \u672a\u958b\u59cb"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#2","title":"2. \u547d\u540d\u898f\u7bc4\u4e00\u81f4\u6027","text":"\u898f\u7bc4 \u5be6\u4f5c\u72c0\u614b \u8a55\u4f30 Namespace enum\uff08<code>PrematchCommentAPI</code>, <code>ChatAPI</code>\uff09 \u2705 \u7b26\u5408 \u2705 DTO \u4f7f\u7528 <code>XXXDTO</code> \u547d\u540d \u2705 \u7b26\u5408 \u2705 Domain Model \u4f7f\u7528 <code>PrematchComment.XXX</code>, <code>LiveChat.XXX</code> \u2705 \u7b26\u5408 \u2705 Repository \u4f7f\u7528 <code>actor</code> \u2705 \u7b26\u5408 \u2705 \u4f7f\u7528 <code>public</code> \u4fee\u98fe\u7b26 \u2705 \u7b26\u5408 \u2705 DTO \u5be6\u4f5c <code>Decodable</code>, <code>Sendable</code> \u2705 \u7b26\u5408 \u2705"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#3","title":"3. \u6a94\u6848\u7d50\u69cb\u4e00\u81f4\u6027","text":"<p>TDD \u671f\u671b\uff1a <pre><code>Sources/\n  \u251c\u2500\u2500 PrematchComment/\n  \u2502   \u251c\u2500\u2500 Services/API/...\n  \u2502   \u251c\u2500\u2500 Services/Client/...\n  \u2502   \u2514\u2500\u2500 UseCases/...\n  \u2514\u2500\u2500 LiveChat/\n      \u251c\u2500\u2500 Services/API/...\n      \u251c\u2500\u2500 Services/Client/...\n      \u2514\u2500\u2500 UseCases/...\n</code></pre></p> <p>\u5be6\u969b\u5be6\u4f5c\uff1a <pre><code>MatchChat/Sources/MatchChat/\n  \u251c\u2500\u2500 Models/\n  \u2502   \u251c\u2500\u2500 PrematchComment/\n  \u2502   \u2514\u2500\u2500 LiveChat/\n  \u2514\u2500\u2500 Services/\n      \u251c\u2500\u2500 API/\n      \u2502   \u251c\u2500\u2500 PrematchComment/\n      \u2502   \u2514\u2500\u2500 Chat/\n      \u251c\u2500\u2500 Client/\n      \u2514\u2500\u2500 Repository/\n          \u251c\u2500\u2500 PrematchComment/\n          \u2514\u2500\u2500 LiveChat/\n</code></pre></p> <p>\u8a55\u4f30\uff1a\u26a0\ufe0f \u7d50\u69cb\u5dee\u7570 - \u5be6\u4f5c\u4f7f\u7528\u7d71\u4e00\u7684 <code>MatchChat</code> Package\uff0c\u800c\u975e\u5206\u96e2\u7684 <code>PrematchComment</code> \u548c <code>LiveChat</code> Packages\u3002</p> <p>\u7406\u7531\uff1a - \u7d71\u4e00 Package \u6e1b\u5c11\u4f9d\u8cf4\u8907\u96dc\u5ea6 - \u5171\u4eab Models \u548c Services \u66f4\u5bb9\u6613 - \u66f4\u7b26\u5408\u5be6\u969b\u5c08\u6848\u7d50\u69cb</p> <p>\u5efa\u8b70\uff1a\u2705 \u4fdd\u6301\u5be6\u4f5c\uff0c\u66f4\u65b0 TDD \u6587\u6a94 - \u5be6\u4f5c\u7684\u7d71\u4e00 Package \u7d50\u69cb\u66f4\u5408\u7406\u3002</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_23","title":"\u529f\u80fd\u5b8c\u6574\u6027\u5c0d\u6bd4","text":""},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#prematchcomment-feature","title":"PrematchComment Feature","text":"\u529f\u80fd TDD \u898f\u7bc4 \u5be6\u4f5c\u72c0\u614b \u6e2c\u8a66\u72c0\u614b \u7372\u53d6\u8a55\u8ad6\u5217\u8868\uff08Popular\uff09 \u2705 \u2705 \u2705 Integration Test \u901a\u904e \u7372\u53d6\u8a55\u8ad6\u5217\u8868\uff08Newest\uff09 \u2705 \u2705 \u2705 Integration Test \u901a\u904e \u7372\u53d6\u8a55\u8ad6\u5143\u8cc7\u6599 \u2705 \u2705 \u2705 Integration Test \u901a\u904e \u767c\u5e03\u8a55\u8ad6 \u2705 \u2705 \u2705 Integration Test \u901a\u904e \u56de\u8986\u8a55\u8ad6 \u2705 \u2705 \u2705 Integration Test \u901a\u904e \u6309\u8b9a/\u53d6\u6d88\u8b9a \u2705 \u2705 \u2705 Integration Test \u901a\u904e \u7372\u53d6\u56de\u8986\u5217\u8868 \u2705 \u2705 \u2705 Integration Test \u901a\u904e UseCase: \u91cd\u65b0\u8f09\u5165\u8a55\u8ad6\u5217\u8868 \u2705 \u274c \u274c UseCase: \u767c\u5e03\u8a55\u8ad6 \u2705 \u274c \u274c <p>\u5b8c\u6210\u5ea6: 7/9 (78%)</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#livechat-feature","title":"LiveChat Feature","text":"\u529f\u80fd TDD \u898f\u7bc4 \u5be6\u4f5c\u72c0\u614b \u6e2c\u8a66\u72c0\u614b \u7372\u53d6\u804a\u5929\u5ba4\u8cc7\u8a0a \u2705 \u2705 \u2705 Integration Test \u901a\u904e \u52a0\u5165\u804a\u5929\u5ba4 \u2705 \u2705 \u2705 Integration Test \u901a\u904e \u96e2\u958b\u804a\u5929\u5ba4 \u2705 \u2705 \u26a0\ufe0f \u672a\u6e2c\u8a66 \u7372\u53d6\u6b77\u53f2\u8a0a\u606f \u2705 \u2705 \u2705 Integration Test \u901a\u904e\uff08\u6709\u689d\u4ef6\u8df3\u904e\uff09 \u767c\u9001\u8a0a\u606f \u2705 \u2705 \u26a0\ufe0f \u6709 TODO\uff08Forbidden error\uff09 WebSocket \u9023\u7dda \u2705 \u2705 \u26a0\ufe0f \u672a\u6e2c\u8a66 WebSocket \u8a02\u95b1 \u2705 \u2705 \u26a0\ufe0f \u672a\u6e2c\u8a66 \u9ed1\u540d\u55ae\u7ba1\u7406 \u2705 \u2705 \u26a0\ufe0f \u672a\u6e2c\u8a66 UseCase: \u52a0\u5165\u804a\u5929\u5ba4 \u2705 \u274c \u274c UseCase: \u767c\u9001\u8a0a\u606f \u2705 \u274c \u274c <p>\u5b8c\u6210\u5ea6: 8/10 (80%)</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_24","title":"\u6e2c\u8a66\u8986\u84cb\u7387\u5206\u6790","text":""},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#integration-tests","title":"Integration Tests","text":"<p>\u5df2\u6709 Integration Tests\uff1a - \u2705 <code>ChatAPIIntegrationTests.swift</code> - ChatAPI \u7684 HTTP Endpoints - \u2705 <code>PrematchCommentAPIIntegrationTests.swift</code> - PrematchCommentAPI \u7684 HTTP Endpoints</p> <p>\u6e2c\u8a66\u8986\u84cb\u60c5\u6cc1\uff1a | API | \u6e2c\u8a66\u72c0\u614b | \u5099\u8a3b | |-----|---------|------| | PrematchComment: <code>getBatchCommentInfo</code> | \u2705 \u901a\u904e | - | | PrematchComment: <code>getCommentMeta</code> | \u2705 \u901a\u904e | - | | PrematchComment: <code>getCommentsByPopular</code> | \u2705 \u901a\u904e | - | | PrematchComment: <code>getCommentsByNewest</code> | \u2705 \u901a\u904e | - | | PrematchComment: <code>publishComment</code> | \u2705 \u901a\u904e | - | | PrematchComment: <code>publishReply</code> | \u2705 \u901a\u904e | \u5305\u542b\u8de8\u570b\u56de\u8986\u6e2c\u8a66 | | PrematchComment: <code>toggleLike</code> | \u2705 \u901a\u904e | - | | PrematchComment: <code>getReplies</code> | \u2705 \u901a\u904e | - | | Chat: <code>getChatroomInfo</code> | \u2705 \u901a\u904e | - | | Chat: <code>getBatchCount</code> | \u2705 \u901a\u904e | - | | Chat: <code>getHistoricalMessages</code> | \u2705 \u901a\u904e | \u6709\u689d\u4ef6\u8df3\u904e\uff08\u804a\u5929\u5ba4\u7121\u8a0a\u606f\uff09 | | Chat: <code>sendMessage</code> | \u26a0\ufe0f \u6709 TODO | \"Forbidden\" error | | Chat: <code>joinChatroom</code> | \u2705 \u901a\u904e | - | | Chat: <code>leaveChatroom</code> | \u26a0\ufe0f \u672a\u6e2c\u8a66 | - | | Chat: <code>bulkLeaveChatroom</code> | \u26a0\ufe0f \u672a\u6e2c\u8a66 | - |</p> <p>\u7f3a\u5c11\u7684\u6e2c\u8a66\uff1a - \u274c ChatWebSocketClient \u7684 Unit Tests \u548c Integration Tests - \u274c Repository \u5c64\u7684 Unit Tests - \u274c UseCase \u5c64\u7684 Unit Tests\uff08\u56e0\u70ba UseCase \u5c1a\u672a\u5be6\u4f5c\uff09</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#unit-tests","title":"Unit Tests","text":"<p>\u72c0\u614b: \u26a0\ufe0f \u672a\u6aa2\u67e5 - \u9700\u8981\u9032\u4e00\u6b65\u6aa2\u67e5\u662f\u5426\u6709 Unit Tests\u3002</p> <p>\u5efa\u8b70\uff1a 1. \u70ba <code>ChatWebSocketClient</code> \u6dfb\u52a0 Unit Tests\uff08\u6e2c\u8a66\u9023\u7dda\u3001\u8a02\u95b1\u3001\u91cd\u9023\u908f\u8f2f\uff09 2. \u70ba Repository \u5c64\u6dfb\u52a0 Unit Tests\uff08\u6e2c\u8a66 DTO \u2192 Domain Model \u8f49\u63db\uff09 3. \u70ba UseCase \u6dfb\u52a0 Unit Tests\uff08\u6e2c\u8a66\u5546\u696d\u908f\u8f2f\uff09</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_25","title":"\u8a2d\u8a08\u6539\u9032\u8a18\u9304","text":""},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#1-api-response","title":"1. API Response \u683c\u5f0f\u512a\u5316","text":"<p>\u6539\u9032: API \u5be6\u969b\u8fd4\u56de\u76f4\u63a5 DTO/Array\uff0c\u800c\u975e\u5305\u88dd\u5728 <code>bizCode/data</code> \u4e2d</p> <p>\u512a\u9ede: - \u6e1b\u5c11\u4e0d\u5fc5\u8981\u7684\u5305\u88dd\u5c64 - \u7c21\u5316 Decoding \u908f\u8f2f - \u66f4\u7b26\u5408\u5be6\u969b API \u884c\u70ba</p> <p>\u5f71\u97ff\u7bc4\u570d: - <code>PrematchCommentAPI+Repository.swift</code> - <code>ChatAPI+Repository.swift</code></p> <p>\u5411\u5f8c\u517c\u5bb9\u6027: \u2705 \u7121\u5f71\u97ff\uff08\u9019\u662f\u65b0\u5be6\u4f5c\uff09</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#2-publishcomment","title":"2. <code>publishComment</code> \u65b9\u6cd5\u62c6\u5206","text":"<p>\u6539\u9032: \u5c07 <code>publishComment</code> \u62c6\u5206\u70ba <code>publishComment</code> \u548c <code>publishReply</code></p> <p>\u512a\u9ede: - \u660e\u78ba\u5340\u5206\u9802\u5c64\u8a55\u8ad6\u548c\u56de\u8986 - \u7c21\u5316\u53c3\u6578\uff08<code>publishComment</code> \u4e0d\u9700\u8981 <code>parentId</code> \u7b49\uff09 - \u66f4\u7b26\u5408\u5be6\u969b\u696d\u52d9\u908f\u8f2f</p> <p>\u5f71\u97ff\u7bc4\u570d: - <code>PrematchCommentAPI+Repository.swift</code> - <code>PrematchCommentClient.swift</code> - <code>PrematchCommentRepository.swift</code></p> <p>\u5411\u5f8c\u517c\u5bb9\u6027: \u2705 \u7121\u5f71\u97ff\uff08\u9019\u662f\u65b0\u5be6\u4f5c\uff09</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#3-repository","title":"3. \u5169\u5c64 Repository \u67b6\u69cb","text":"<p>\u6539\u9032: \u5206\u70ba API Repository \u548c Domain Repository</p> <p>\u512a\u9ede: - \u66f4\u6e05\u6670\u7684\u8077\u8cac\u5206\u96e2 - API Repository \u8655\u7406 HTTP \u8acb\u6c42\uff0c\u8fd4\u56de DTOs - Domain Repository \u4f7f\u7528 Client\uff0c\u8fd4\u56de Domain Models - \u7b26\u5408 Clean Architecture \u539f\u5247</p> <p>\u5f71\u97ff\u7bc4\u570d: - <code>ChatAPI+Repository.swift</code> (API \u5c64) - <code>LiveChatRepository.swift</code> (Domain \u5c64) - <code>PrematchCommentRepository.swift</code> (Domain \u5c64)</p> <p>\u5411\u5f8c\u517c\u5bb9\u6027: \u2705 \u7121\u5f71\u97ff\uff08\u9019\u662f\u65b0\u5be6\u4f5c\uff09</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#4-nullableresponse-null","title":"4. <code>NullableResponse</code> \u8655\u7406 <code>null</code> \u8fd4\u56de\u503c","text":"<p>\u6539\u9032: \u5275\u5efa <code>NullableResponse</code> struct \u4f86\u8655\u7406 API \u8fd4\u56de <code>null</code> \u7684\u60c5\u6cc1</p> <p>\u512a\u9ede: - \u6b63\u78ba\u8655\u7406 API \u8fd4\u56de <code>null</code> \u7684\u60c5\u6cc1 - \u907f\u514d Decoding \u932f\u8aa4 - \u63d0\u4f9b\u6e05\u6670\u7684\u8a9e\u610f</p> <p>\u5f71\u97ff\u7bc4\u570d: - <code>PrematchCommentAPI+Repository.swift</code> (<code>toggleLike</code>) - <code>ChatAPI+Repository.swift</code> (<code>joinChatroom</code>, <code>leaveChatroom</code>, <code>bulkLeaveChatroom</code>)</p> <p>\u5411\u5f8c\u517c\u5bb9\u6027: \u2705 \u7121\u5f71\u97ff\uff08\u9019\u662f\u65b0\u5be6\u4f5c\uff09</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_26","title":"\u98a8\u96aa\u548c\u963b\u585e\u9805","text":""},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_27","title":"\u9ad8\u98a8\u96aa\u9805","text":"\u98a8\u96aa \u5f71\u97ff \u7dca\u6025\u5ea6 \u5efa\u8b70\u884c\u52d5 UseCase \u5c64\u672a\u5be6\u4f5c \u963b\u585e Feature \u5c64\u5be6\u4f5c \ud83d\udd34 \u9ad8 \u7acb\u5373\u958b\u59cb TDD-040, TDD-041 Adapter \u4f9d\u8cf4\u672a\u5b9a\u7fa9 \u963b\u585e TDD-041 \u5be6\u4f5c \ud83d\udfe1 \u4e2d \u5b9a\u7fa9 <code>PersonalPageAdapter</code> \u548c <code>FComSharedFlowAdapter</code> Protocols \u7f3a\u5c11 Unit Tests \u6e2c\u8a66\u8986\u84cb\u7387\u4e0d\u8db3 \ud83d\udfe1 \u4e2d \u88dc\u5145 Unit Tests WebSocket \u672a\u5b8c\u6574\u6e2c\u8a66 \u5be6\u969b\u904b\u884c\u53ef\u80fd\u6709\u554f\u984c \ud83d\udfe1 \u4e2d \u6dfb\u52a0 WebSocket Integration Tests"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_28","title":"\u963b\u585e\u9805","text":"Ticket \u963b\u585e\u539f\u56e0 \u89e3\u9664\u689d\u4ef6 TDD-050 (PrematchCommentFeature) \u4f9d\u8cf4 TDD-040, TDD-041 \u5b8c\u6210 UseCase \u5be6\u4f5c TDD-051 (LiveChatFeature) \u4f9d\u8cf4 TDD-046, TDD-047 \u5b8c\u6210 UseCase \u5be6\u4f5c TDD-041 (PublishCommentUseCase) Adapter \u672a\u5b9a\u7fa9 \u5b9a\u7fa9 <code>PersonalPageAdapter</code> \u548c <code>FComSharedFlowAdapter</code>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_29","title":"\u6574\u9ad4\u8a55\u4f30\u548c\u5efa\u8b70","text":""},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_30","title":"\u8a55\u4f30\u7e3d\u7d50","text":"<p>\u512a\u9ede\uff1a 1. \u2705 API \u548c Client \u5c64\u5be6\u4f5c\u5b8c\u6574\u4e14\u512a\u65bc TDD \u898f\u7bc4 2. \u2705 Repository \u5c64\u5be6\u4f5c\u5b8c\u6574\uff0c\u63a1\u7528\u66f4\u597d\u7684\u5169\u5c64\u67b6\u69cb 3. \u2705 Integration Tests \u8986\u84cb\u4e86\u4e3b\u8981 API endpoints 4. \u2705 \u547d\u540d\u898f\u7bc4\u548c\u6a94\u6848\u7d50\u69cb\u6e05\u6670\u4e00\u81f4 5. \u2705 \u5be6\u4f5c\u904e\u7a0b\u4e2d\u767c\u73fe\u4e26\u4fee\u6b63\u4e86 API \u898f\u683c\u554f\u984c\uff08\u5982 <code>getBatchCount</code> \u65b9\u6cd5\uff09</p> <p>\u4e0d\u8db3\uff1a 1. \u274c UseCase \u5c64\u5b8c\u5168\u672a\u5be6\u4f5c\uff08\u963b\u585e\u5f8c\u7e8c Feature \u5c64\uff09 2. \u274c \u7f3a\u5c11 Unit Tests\uff08\u7279\u5225\u662f ChatWebSocketClient\uff09 3. \u274c WebSocket \u529f\u80fd\u672a\u5b8c\u6574\u6e2c\u8a66 4. \u26a0\ufe0f \u4e00\u4e9b TODOs \u548c\u6f5b\u5728\u554f\u984c\u9700\u8981\u8655\u7406</p>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_31","title":"\u95dc\u9375\u884c\u52d5\u9805\uff08\u512a\u5148\u9806\u5e8f\u6392\u5e8f\uff09","text":""},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#p0-2025-12-09","title":"\ud83d\udd34 P0 - \u7acb\u5373\u884c\u52d5\uff08\u4eca\u65e5 2025-12-09\uff09","text":"<ol> <li>\u958b\u59cb\u5be6\u4f5c TDD-040: ReloadCommentListUseCase</li> <li>Due: 2025-12-10</li> <li>\u9810\u4f30\u6642\u9593: 2 \u5929</li> <li> <p>\u4f9d\u8cf4: PrematchCommentRepository\uff08\u2705 \u5df2\u5b8c\u6210\uff09</p> </li> <li> <p>\u5b9a\u7fa9 Adapter Protocols</p> </li> <li><code>PersonalPageAdapter</code>\uff08\u767b\u5165\u6aa2\u67e5\u3001nickname \u6aa2\u67e5\uff09</li> <li><code>FComSharedFlowAdapter</code>\uff08nickname \u5efa\u7acb\uff09</li> <li>\u9810\u4f30\u6642\u9593: 0.5 \u5929</li> </ol>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#p1-2025-12-10-2025-12-13","title":"\ud83d\udfe1 P1 - \u672c\u9031\u5167\u5b8c\u6210\uff082025-12-10 ~ 2025-12-13\uff09","text":"<ol> <li>\u5be6\u4f5c TDD-041: PublishCommentUseCase</li> <li>Due: 2025-12-16</li> <li> <p>\u9810\u4f30\u6642\u9593: 5 \u5929\uff08\u5305\u542b Adapter \u6574\u5408\uff09</p> </li> <li> <p>\u88dc\u5145 ChatWebSocketClient Unit Tests</p> </li> <li>\u6e2c\u8a66\u9023\u7dda\u3001\u8a02\u95b1\u3001\u91cd\u9023\u908f\u8f2f</li> <li> <p>\u9810\u4f30\u6642\u9593: 1 \u5929</p> </li> <li> <p>\u88dc\u5145 WebSocket Integration Tests</p> </li> <li>\u6e2c\u8a66\u5be6\u969b WebSocket \u9023\u7dda\u548c\u8a0a\u606f\u63a5\u6536</li> <li>\u9810\u4f30\u6642\u9593: 1 \u5929</li> </ol>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#p2-2025-12-16-2025-12-20","title":"\ud83d\udfe2 P2 - \u4e0b\u9031\u5b8c\u6210\uff082025-12-16 ~ 2025-12-20\uff09","text":"<ol> <li>\u5be6\u4f5c TDD-046 ~ TDD-048 (LiveChat UseCases)</li> <li>\u5be6\u4f5c TDD-050, TDD-051 (Feature Layer)</li> <li>\u5be6\u4f5c TDD-060, TDD-061 (View Layer)</li> </ol>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#tdd_5","title":"TDD \u6587\u6a94\u66f4\u65b0\u5efa\u8b70","text":"<p>\u61c9\u8a72\u66f4\u65b0\u7684 TDD \u6587\u6a94\uff1a</p> <ol> <li>TDD-010: PrematchCommentAPI</li> <li>\u79fb\u9664 Response Wrapper DTOs\uff08<code>BatchCommentInfoResponseDTO</code> \u7b49\uff09</li> <li>\u66f4\u65b0 <code>publishComment</code> \u65b9\u6cd5\u7c3d\u540d\uff08\u62c6\u5206\u70ba <code>publishComment</code> \u548c <code>publishReply</code>\uff09</li> <li> <p>\u66f4\u65b0 <code>toggleLike</code> \u8fd4\u56de\u503c\uff08\u8fd4\u56de <code>void</code> \u800c\u975e <code>CommentDTO?</code>\uff09</p> </li> <li> <p>TDD-011: ChatAPI</p> </li> <li>\u66f4\u65b0 <code>getBatchCount</code> \u65b9\u6cd5\u70ba POST + JSON encoding</li> <li> <p>\u8aaa\u660e <code>joinChatroom</code>/<code>leaveChatroom</code> \u8fd4\u56de <code>null</code> \u7684\u8655\u7406\u65b9\u5f0f</p> </li> <li> <p>TDD-031: LiveChatRepository</p> </li> <li>\u8aaa\u660e\u5169\u5c64 Repository \u67b6\u69cb\uff08API Repository + Domain Repository\uff09</li> <li> <p>\u66f4\u65b0\u6a94\u6848\u7d50\u69cb\u8aaa\u660e</p> </li> <li> <p>TDD-022: ChatWebSocketClient</p> </li> <li> <p>\u6dfb\u52a0 TODOs \u548c\u5df2\u77e5\u554f\u984c\u8aaa\u660e\uff08\u5982 <code>subscribe</code> \u4e0d\u8fd4\u56de <code>subscriberId</code>\uff09</p> </li> <li> <p>\u65b0\u589e\u67b6\u69cb\u6587\u6a94</p> </li> <li>\u8a18\u9304\u7d71\u4e00 <code>MatchChat</code> Package \u7684\u6c7a\u7b56</li> <li>\u8a18\u9304\u5169\u5c64 Repository \u67b6\u69cb\u7684\u512a\u9ede</li> </ol>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_32","title":"\u9644\u9304","text":""},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_33","title":"\u6a94\u6848\u6e05\u55ae","text":""},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#api-layer","title":"API Layer","text":"<ul> <li><code>MatchChat/Sources/MatchChat/Services/API/PrematchComment/PrematchCommentAPI.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/API/PrematchComment/PrematchCommentAPI+Endpoint.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/API/PrematchComment/PrematchCommentAPI+Models.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/API/PrematchComment/PrematchCommentAPI+Repository.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/API/PrematchComment/PrematchCommentAPI+RepositoryProtocol.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/API/Chat/ChatAPI.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/API/Chat/ChatAPI+Endpoint.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/API/Chat/ChatAPI+Models.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/API/Chat/ChatAPI+WebSocket.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/API/Chat/ChatAPI+Repository.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/API/Chat/ChatAPI+RepositoryProtocol.swift</code></li> </ul>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#client-layer","title":"Client Layer","text":"<ul> <li><code>MatchChat/Sources/MatchChat/Services/Client/PrematchCommentClient.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/Client/PrematchCommentClientProtocol.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/Client/LiveChatClient.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/Client/LiveChatClientProtocol.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/Client/ChatWebSocketClient.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/Client/ChatWebSocketClientProtocol.swift</code></li> </ul>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#repository-layer","title":"Repository Layer","text":"<ul> <li><code>MatchChat/Sources/MatchChat/Services/Repository/PrematchComment/PrematchCommentRepository.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/Repository/PrematchComment/PrematchCommentRepositoryProtocol.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/Repository/LiveChat/LiveChatRepository.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/Repository/LiveChat/LiveChatRepositoryProtocol.swift</code></li> </ul>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#domain-model-layer","title":"Domain Model Layer","text":"<ul> <li><code>MatchChat/Sources/MatchChat/Models/PrematchComment/PrematchComment.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Models/PrematchComment/PrematchComment+PrematchCommentAPI.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Models/LiveChat/LiveChat.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Models/LiveChat/LiveChat+ChatAPI.swift</code></li> </ul>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#integration-tests_1","title":"Integration Tests","text":"<ul> <li><code>MatchChat/Tests/MatchChatIntegrationTests/ChatAPIIntegrationTests.swift</code></li> <li><code>MatchChat/Tests/MatchChatIntegrationTests/PrematchCommentAPIIntegrationTests.swift</code></li> <li><code>MatchChat/Tests/MatchChatIntegrationTests/Helpers/IntegrationTestSetup.swift</code></li> <li><code>MatchChat/Tests/MatchChatIntegrationTests/Helpers/IntegrationTestTokenCache.swift</code></li> <li><code>MatchChat/Tests/MatchChatIntegrationTests/Helpers/AuthenticationTestHelper.swift</code></li> <li><code>MatchChat/Tests/MatchChatIntegrationTests/README.md</code></li> </ul>"},{"location":"13_Implementation_Status/tdd_consistency_check_2025-12-09/#_34","title":"\u8b8a\u66f4\u8a18\u9304","text":"<p>\u672c\u5831\u544a\u8a18\u9304\u4e86\u4ee5\u4e0b\u5be6\u4f5c\u8207 TDD \u7684\u5dee\u7570\u548c\u6539\u9032\uff1a</p> <ol> <li>API Response \u683c\u5f0f\u512a\u5316\uff08\u76f4\u63a5\u8fd4\u56de DTO/Array\uff09</li> <li><code>publishComment</code> \u65b9\u6cd5\u62c6\u5206</li> <li>\u5169\u5c64 Repository \u67b6\u69cb</li> <li><code>NullableResponse</code> \u8655\u7406 <code>null</code> \u8fd4\u56de\u503c</li> <li><code>getBatchCount</code> HTTP \u65b9\u6cd5\u4fee\u6b63\uff08GET \u2192 POST\uff09</li> <li>\u7d71\u4e00 <code>MatchChat</code> Package \u7d50\u69cb</li> </ol> <p>\u5831\u544a\u751f\u6210\u6642\u9593: 2025-12-09 \u5831\u544a\u7248\u672c: v1.0 \u6aa2\u67e5\u4eba: AI Assistant (Claude Sonnet 4.5)</p>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-04/","title":"TDD \u6587\u4ef6\u66f4\u65b0\u8a18\u9304 - 2025-12-04","text":""},{"location":"13_Implementation_Status/tdd_updates_2025-12-04/#_1","title":"\u66f4\u65b0\u6458\u8981","text":"<p>\u57fa\u65bc 2025-12-05 \u7684\u5be6\u4f5c\u6539\u9032\uff0c\u66f4\u65b0\u4e86\u76f8\u95dc TDD \u6587\u4ef6\u4ee5\u53cd\u6620\u5be6\u969b\u5be6\u4f5c\u7684\u8a2d\u8a08\u6c7a\u7b56\u3002</p>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-04/#_2","title":"\u66f4\u65b0\u5167\u5bb9","text":""},{"location":"13_Implementation_Status/tdd_updates_2025-12-04/#1-tdd-010-prematchcommentapi","title":"1. TDD-010: PrematchCommentAPI \u2705","text":"<p>\u6a94\u6848: <code>12_Tickets/02_api/TDD-010_PrematchCommentAPI.md</code></p> <p>\u8b8a\u66f4\u539f\u56e0: \u5f15\u5165 <code>SharedBetsMetadata</code> \u5305\u88dd\u578b\u5225\u4ee5\u7b26\u5408 Swift Concurrency Sendable \u8981\u6c42</p> <p>\u8b8a\u66f4\u5167\u5bb9: - \u270f\ufe0f Endpoint <code>publishComment</code> \u53c3\u6578\uff1a<code>[String: AnyCodable]?</code> \u2192 <code>[String: Any]?</code> - \u270f\ufe0f Request DTO <code>sharedBetsMeta</code>\uff1a<code>[String: AnyCodable]?</code> \u2192 <code>[String: Any]?</code>\uff08API \u5c64\u4f7f\u7528\u539f\u59cb\u5b57\u5178\uff09 - \u2795 \u65b0\u589e <code>SharedBetsMetadata</code> \u7d50\u69cb\u5b9a\u7fa9 - \u270f\ufe0f Repository Protocol <code>publishComment</code> \u53c3\u6578\uff1a<code>[String: AnyCodable]?</code> \u2192 <code>SharedBetsMetadata?</code> - \u270f\ufe0f Repository \u5be6\u4f5c\uff1a\u65b0\u589e\u89e3\u5305\u908f\u8f2f <code>sharedBetsMeta?.value</code> - \u270f\ufe0f \u547d\u540d\u898f\u7bc4\uff1a\u65b0\u589e <code>SharedBetsMetadata</code> \u8aaa\u660e</p> <p>\u8a2d\u8a08\u7406\u5ff5: <pre><code>Client Layer (SharedBetsMetadata) \n    \u2193 \u5305\u88dd Sendable\nRepository Layer (SharedBetsMetadata) \n    \u2193 \u89e3\u5305\nEndpoint/API Layer ([String: Any])\n    \u2193 JSON \u5e8f\u5217\u5316\nNetwork\n</code></pre></p>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-04/#2-tdd-020-prematchcommentclient","title":"2. TDD-020: PrematchCommentClient \u2705","text":"<p>\u6a94\u6848: <code>12_Tickets/03_client/TDD-020_PrematchCommentClient.md</code></p> <p>\u8b8a\u66f4\u539f\u56e0: Client \u5c64\u4f7f\u7528 <code>SharedBetsMetadata</code> \u5305\u88dd\u578b\u5225</p> <p>\u8b8a\u66f4\u5167\u5bb9: - \u270f\ufe0f <code>publishComment</code> \u65b9\u6cd5\u53c3\u6578\uff1a<code>sharedBetsMeta: [String: AnyCodable]?</code> \u2192 <code>sharedBetsMeta: SharedBetsMetadata?</code> - \u2795 \u65b0\u589e\u65b9\u6cd5\u8a3b\u89e3\u8aaa\u660e Sendable \u5305\u88dd - \u270f\ufe0f \u547d\u540d\u898f\u7bc4\uff1a\u65b0\u589e <code>SharedBetsMetadata</code> \u8aaa\u660e</p> <p>\u7a0b\u5f0f\u78bc\u7bc4\u4f8b: <pre><code>/// \u767c\u4f48\u8a55\u8ad6\n/// - Note: sharedBetsMeta \u4f7f\u7528 SharedBetsMetadata \u5305\u88dd\u4ee5\u7b26\u5408 Sendable \u5354\u8b70\npublic func publishComment(\n    refId: String, \n    content: String, \n    parentId: Int64?, \n    sharedBetsMeta: SharedBetsMetadata?,  // \u2190 \u8b8a\u66f4\n    tagUserId: String?\n) async throws -&gt; PrematchCommentAPI.CommentDTO\n</code></pre></p>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-04/#3-tdd-022-chatwebsocketclient","title":"3. TDD-022: ChatWebSocketClient \u2705","text":"<p>\u6a94\u6848: <code>12_Tickets/03_client/TDD-022_ChatWebSocketClient.md</code></p> <p>\u8b8a\u66f4\u539f\u56e0: <code>subscribe</code> \u65b9\u6cd5\u6539\u70ba <code>nonisolated</code> \u4ee5\u6539\u5584\u4f75\u767c\u6a21\u578b</p> <p>\u8b8a\u66f4\u5167\u5bb9: - \u270f\ufe0f <code>subscribe</code> \u65b9\u6cd5\u7c3d\u540d\uff1a\u65b0\u589e <code>nonisolated</code> \u4fee\u98fe\u7b26 - \u270f\ufe0f \u65b9\u6cd5\u8a3b\u89e3\uff1a\u65b0\u589e\u4f75\u767c\u8a2d\u8a08\u8aaa\u660e - \u270f\ufe0f \u547d\u540d\u898f\u7bc4\uff1a\u65b0\u589e <code>nonisolated</code> \u8aaa\u660e</p> <p>\u7a0b\u5f0f\u78bc\u7bc4\u4f8b: <pre><code>/// \u8a02\u95b1\u6307\u5b9a\u804a\u5929\u5ba4\u7684\u8a0a\u606f\u6d41\n/// - Parameter chatroomId: \u804a\u5929\u5ba4 ID\n/// - Returns: AsyncStream&lt;ChatAPI.WebSocketMessageDTO&gt; \u8a0a\u606f\u6d41\n/// \n/// **\u6642\u6a5f**: \u52a0\u5165\u804a\u5929\u5ba4\u6642\u547c\u53eb\uff08\u53c3\u8003 Module Sequence Diagram\uff09\n/// **\u8a2d\u8a08**: \u4f7f\u7528 nonisolated \u5141\u8a31\u540c\u6b65\u5275\u5efa AsyncStream\uff0c\u5be6\u969b\u8a02\u95b1\u908f\u8f2f\u5728 actor \u5167\u57f7\u884c\npublic nonisolated func subscribe(chatroomId: String) -&gt; AsyncStream&lt;...&gt;\n</code></pre></p> <p>\u8a2d\u8a08\u7406\u5ff5: - <code>nonisolated</code> \u65b9\u6cd5\u53ef\u540c\u6b65\u5275\u5efa <code>AsyncStream</code> - \u5be6\u969b\u8a02\u95b1\u908f\u8f2f\u63d0\u53d6\u5230 <code>performSubscribe</code> helper\uff08actor-isolated\uff09 - \u907f\u514d\u4e0d\u5fc5\u8981\u7684 await \u8abf\u7528\uff0c\u6539\u5584 API \u6613\u7528\u6027</p>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-04/#_3","title":"\u8b8a\u66f4\u7d71\u8a08","text":"TDD Ticket \u6a94\u6848 \u8b8a\u66f4\u985e\u578b \u8b8a\u66f4\u6578\u91cf TDD-010 PrematchCommentAPI \u578b\u5225\u66f4\u65b0\u3001\u65b0\u589e\u8a2d\u8a08\u8aaa\u660e 6 \u8655 TDD-020 PrematchCommentClient \u578b\u5225\u66f4\u65b0\u3001\u8a3b\u89e3\u88dc\u5145 3 \u8655 TDD-022 ChatWebSocketClient \u7c3d\u540d\u66f4\u65b0\u3001\u8a2d\u8a08\u8aaa\u660e 3 \u8655 \u7e3d\u8a08 - - 12 \u8655"},{"location":"13_Implementation_Status/tdd_updates_2025-12-04/#_4","title":"\u8a2d\u8a08\u6c7a\u7b56\u8a18\u9304","text":""},{"location":"13_Implementation_Status/tdd_updates_2025-12-04/#1-sharedbetsmetadata","title":"\u6c7a\u7b56 1: \u5f15\u5165 SharedBetsMetadata \u5305\u88dd\u578b\u5225","text":"<p>\u554f\u984c:  - <code>[String: Any]</code> \u5b57\u5178\u4e0d\u7b26\u5408 <code>Sendable</code> \u5354\u8b70 - Swift Concurrency \u74b0\u5883\u4e2d\u7522\u751f\u7de8\u8b6f\u8b66\u544a</p> <p>\u89e3\u6c7a\u65b9\u6848: <pre><code>public struct SharedBetsMetadata: @unchecked Sendable {\n    public let value: [String: Any]\n\n    public init(_ value: [String: Any]) {\n        self.value = value\n    }\n}\n</code></pre></p> <p>\u512a\u9ede: - \u2705 \u7b26\u5408 Sendable \u5354\u8b70\uff0c\u6d88\u9664\u7de8\u8b6f\u8b66\u544a - \u2705 \u578b\u5225\u5b89\u5168\uff0c\u660e\u78ba\u610f\u5716 - \u2705 \u5c01\u88dd\u5be6\u4f5c\u7d30\u7bc0\uff0c\u672a\u4f86\u53ef\u64f4\u5c55 - \u2705 \u53ea\u5728\u9700\u8981\u7684\u5c64\u7d1a\uff08Repository/Client\uff09\u4f7f\u7528</p> <p>\u9650\u5236: - \u4f7f\u7528 <code>@unchecked Sendable</code>\uff08\u9700\u8981\u958b\u767c\u8005\u78ba\u4fdd\u5b89\u5168\u6027\uff09 - \u9700\u8981\u5728 Repository \u5c64\u624b\u52d5\u89e3\u5305</p>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-04/#2-subscribe-nonisolated","title":"\u6c7a\u7b56 2: subscribe \u65b9\u6cd5 nonisolated \u5316","text":"<p>\u554f\u984c: - Actor-isolated \u65b9\u6cd5\u8fd4\u56de <code>AsyncStream</code> \u9700\u8981 await - \u8abf\u7528\u65b9\u9700\u8981\u5728 async context \u624d\u80fd\u7372\u53d6 stream</p> <p>\u89e3\u6c7a\u65b9\u6848: <pre><code>public nonisolated func subscribe(chatroomId: String) -&gt; AsyncStream&lt;...&gt; {\n    AsyncStream { continuation in\n        Task {\n            await self.performSubscribe(chatroomId: chatroomId, continuation: continuation)\n        }\n    }\n}\n</code></pre></p> <p>\u512a\u9ede: - \u2705 \u540c\u6b65\u5275\u5efa AsyncStream\uff0c\u6539\u5584 API \u6613\u7528\u6027 - \u2705 \u5be6\u969b\u8a02\u95b1\u908f\u8f2f\u4ecd\u5728 actor \u5167\u57f7\u884c\uff0c\u4fdd\u6301\u7dda\u7a0b\u5b89\u5168 - \u2705 \u7b26\u5408 Swift Concurrency \u6700\u4f73\u5be6\u8e10</p> <p>\u53c3\u8003: - Apple AsyncStream \u8a2d\u8a08\u6a21\u5f0f - EventOddsWebSocketManager \u5be6\u4f5c</p>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-04/#_5","title":"\u5f71\u97ff\u7bc4\u570d\u5206\u6790","text":""},{"location":"13_Implementation_Status/tdd_updates_2025-12-04/#_6","title":"\u5411\u5f8c\u517c\u5bb9\u6027","text":"\u8b8a\u66f4 \u662f\u5426 Breaking Change \u5f71\u97ff\u7bc4\u570d SharedBetsMetadata \u2705 \u662f Client \u5c64\u8abf\u7528\u65b9\u9700\u66f4\u65b0 subscribe nonisolated \u274c \u5426 \u79fb\u9664 await \u8981\u6c42\uff0c\u66f4\u5bb9\u6613\u4f7f\u7528"},{"location":"13_Implementation_Status/tdd_updates_2025-12-04/#_7","title":"\u9700\u8981\u66f4\u65b0\u7684\u7a0b\u5f0f\u78bc","text":"<ol> <li>\u4f7f\u7528 PrematchCommentClient \u7684\u7a0b\u5f0f\u78bc</li> <li>\u9700\u8981\u5c07 <code>[String: Any]</code> \u5305\u88dd\u6210 <code>SharedBetsMetadata</code></li> <li> <p>\u7bc4\u4f8b\uff1a    <pre><code>// Before\nlet meta: [String: Any] = [\"betId\": \"123\"]\ntry await client.publishComment(..., sharedBetsMeta: meta, ...)\n\n// After\nlet meta = SharedBetsMetadata([\"betId\": \"123\"])\ntry await client.publishComment(..., sharedBetsMeta: meta, ...)\n</code></pre></p> </li> <li> <p>\u4f7f\u7528 ChatWebSocketClient \u7684\u7a0b\u5f0f\u78bc</p> </li> <li>\u53ef\u4ee5\u79fb\u9664\u4e0d\u5fc5\u8981\u7684 await\uff08\u5411\u5f8c\u517c\u5bb9\uff09</li> <li>\u7bc4\u4f8b\uff1a    <pre><code>// Before (\u4ecd\u53ef\u7528)\nlet stream = await client.subscribe(chatroomId: id)\n\n// After (\u66f4\u7c21\u6f54)\nlet stream = client.subscribe(chatroomId: id)\n</code></pre></li> </ol>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-04/#_8","title":"\u6e2c\u8a66\u66f4\u65b0\u9700\u6c42","text":""},{"location":"13_Implementation_Status/tdd_updates_2025-12-04/#_9","title":"\u55ae\u5143\u6e2c\u8a66","text":"<ul> <li>[ ] TDD-010: \u6e2c\u8a66 <code>SharedBetsMetadata</code> \u5305\u88dd/\u89e3\u5305\u908f\u8f2f</li> <li>[ ] TDD-020: \u6e2c\u8a66 Client \u4f7f\u7528 <code>SharedBetsMetadata</code> \u53c3\u6578</li> <li>[ ] TDD-022: \u6e2c\u8a66 <code>subscribe</code> nonisolated \u884c\u70ba</li> </ul>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-04/#_10","title":"\u6574\u5408\u6e2c\u8a66","text":"<ul> <li>[ ] \u7aef\u5230\u7aef\u6e2c\u8a66 publishComment \u529f\u80fd\uff08\u542b sharedBetsMeta\uff09</li> <li>[ ] WebSocket subscribe/unsubscribe \u751f\u547d\u9031\u671f\u6e2c\u8a66</li> </ul>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-04/#_11","title":"\u76f8\u95dc\u6587\u4ef6","text":"<ul> <li>\u5be6\u4f5c\u4e00\u81f4\u6027\u6aa2\u67e5: <code>13_Implementation_Status/tdd_consistency_check_2025-12-05.md</code></li> <li>\u8b8a\u66f4\u65e5\u8a8c: <code>14_Changelog/CHANGELOG.md</code></li> <li>Commit \u8a18\u9304:</li> <li><code>1f97afa505</code> - refactor: wrap shared bets metadata in sendable type</li> <li><code>163d376ab6</code> - refactor: make websocket subscribe method nonisolated</li> </ul>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-04/#_12","title":"\u4e0b\u6b21\u66f4\u65b0\u5efa\u8b70","text":"<ol> <li>\u88dc\u5145\u6e2c\u8a66 (\u512a\u5148\u7d1a: P0)</li> <li>\u70ba <code>SharedBetsMetadata</code> \u65b0\u589e\u55ae\u5143\u6e2c\u8a66</li> <li> <p>\u9a57\u8b49 nonisolated subscribe \u7684\u4f75\u767c\u5b89\u5168\u6027</p> </li> <li> <p>\u6587\u4ef6\u5b8c\u5584 (\u512a\u5148\u7d1a: P2)</p> </li> <li>\u589e\u52a0 <code>SharedBetsMetadata</code> \u4f7f\u7528\u7bc4\u4f8b</li> <li> <p>\u66f4\u65b0 API \u6574\u5408\u6307\u5357</p> </li> <li> <p>\u5b9a\u671f\u6aa2\u67e5 (\u512a\u5148\u7d1a: P2)</p> </li> <li>\u6bcf\u5b8c\u6210\u4e00\u500b layer \u5f8c\u6aa2\u67e5 TDD \u4e00\u81f4\u6027</li> <li>\u78ba\u4fdd\u6587\u4ef6\u8207\u5be6\u4f5c\u540c\u6b65</li> </ol> <p>\u66f4\u65b0\u4eba: AI Assistant \u66f4\u65b0\u65e5\u671f: 2025-12-04 \u95dc\u806f Tickets: FOOTBALL-9180-9184 Git Branch: feature/FOOTBALL-9180-9184-DataLayer</p>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/","title":"TDD \u66f4\u65b0\u8a18\u9304","text":"<p>Date: 2025-12-09 Reason: \u5be6\u4f5c\u6539\u9032\u512a\u65bc\u539f TDD \u8a2d\u8a08\uff0c\u66f4\u65b0\u6587\u6a94\u4ee5\u53cd\u6620\u5be6\u969b\u5be6\u4f5c</p>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#_1","title":"\u66f4\u65b0\u6458\u8981","text":"<p>\u672c\u6b21\u66f4\u65b0\u6db5\u84cb\u4e86 4 \u500b TDD tickets\uff0c\u4e3b\u8981\u662f\u6839\u64da\u5be6\u969b API \u884c\u70ba\u548c\u67b6\u69cb\u6539\u9032\u4f86\u66f4\u65b0\u6587\u6a94\uff1a</p> Ticket \u66f4\u65b0\u5167\u5bb9 \u539f\u56e0 TDD-010 API Response \u683c\u5f0f\u3001\u65b9\u6cd5\u7c3d\u540d \u5be6\u969b API \u884c\u70ba\u8207\u898f\u5283\u4e0d\u540c TDD-011 HTTP Method\u3001Null Response \u8655\u7406 \u5be6\u969b API \u898f\u683c\u4fee\u6b63 TDD-031 Repository \u67b6\u69cb\u8aaa\u660e \u63a1\u7528\u66f4\u597d\u7684\u5169\u5c64\u67b6\u69cb \u67b6\u69cb\u6587\u6a94 \u7d71\u4e00 Package \u7d50\u69cb\u8aaa\u660e \u8a18\u9304\u8a2d\u8a08\u6c7a\u7b56"},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#_2","title":"\u8a73\u7d30\u8b8a\u66f4\u5167\u5bb9","text":""},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#1-tdd-010-prematchcommentapi","title":"1. TDD-010: PrematchCommentAPI","text":""},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#11-api-response","title":"\u8b8a\u66f4 1.1: API Response \u683c\u5f0f\u512a\u5316","text":"<p>\u8b8a\u66f4\u524d\uff1a <pre><code>public func getBatchCommentInfo(refIdList: [String]) async throws -&gt; [CommentMetaInfoDTO] {\n    let endpoint = PrematchCommentEndpoint.getBatchCommentInfo(refIdList: refIdList)\n    let response: BatchCommentInfoResponseDTO = try await apiClient.request(endpoint)\n    return response.data\n}\n</code></pre></p> <p>\u8b8a\u66f4\u5f8c\uff1a <pre><code>public func getBatchCommentInfo(refIdList: [String]) async throws -&gt; [CommentMetaInfoDTO] {\n    let endpoint = PrematchCommentEndpoint.getBatchCommentInfo(refIdList: refIdList)\n    // \u26a0\ufe0f API \u76f4\u63a5\u8fd4\u56de Array\uff0c\u7121\u5305\u88dd\u5c64\n    return try await apiClient.request(endpoint)\n}\n</code></pre></p> <p>\u539f\u56e0\uff1a - \u5be6\u969b API \u8fd4\u56de\u76f4\u63a5\u7684 DTO/Array\uff0c\u800c\u975e\u5305\u88dd\u5728 <code>bizCode/data</code> \u7d50\u69cb\u4e2d - \u6e1b\u5c11\u4e0d\u5fc5\u8981\u7684\u5305\u88dd\u5c64\uff0c\u7c21\u5316 Decoding \u908f\u8f2f</p> <p>\u5f71\u97ff\u7bc4\u570d\uff1a - <code>getBatchCommentInfo</code> - <code>getCommentMeta</code> - <code>getCommentsByPopular</code> - <code>getCommentsByNewest</code> - <code>getReplies</code> - <code>publishComment</code></p> <p>\u522a\u9664\u7684 DTOs\uff08\u672a\u4f7f\u7528\uff09\uff1a - <code>BatchCommentInfoResponseDTO</code> - <code>CommentMetaResponseDTO</code> - <code>CommentListResponseDTO</code> - <code>CommentResponseDTO</code> - <code>ToggleLikeResponseDTO</code></p>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#12-publishcomment","title":"\u8b8a\u66f4 1.2: <code>publishComment</code> \u65b9\u6cd5\u62c6\u5206","text":"<p>\u8b8a\u66f4\u524d\uff1a <pre><code>func publishComment(\n    refId: String, \n    content: String, \n    parentId: Int64?, \n    sharedBetsMeta: SharedBetsMetadata?, \n    tagUserId: String?\n) async throws -&gt; CommentDTO\n</code></pre></p> <p>\u8b8a\u66f4\u5f8c\uff1a <pre><code>/// \u767c\u5e03\u65b0\u8a55\u8ad6\uff08\u9802\u5c64\u8a55\u8ad6\uff09\nfunc publishComment(refId: String, content: String) async throws -&gt; CommentDTO\n\n/// \u56de\u8986\u73fe\u6709\u8a55\u8ad6\nfunc publishReply(\n    refId: String, \n    content: String, \n    parentId: Int64, \n    tagUserId: String, \n    sharedBetsMeta: SharedBetsMetadata?\n) async throws -&gt; CommentDTO\n</code></pre></p> <p>\u539f\u56e0\uff1a - \u660e\u78ba\u5340\u5206\u9802\u5c64\u8a55\u8ad6\u548c\u56de\u8986\u7684\u4e0d\u540c\u696d\u52d9\u908f\u8f2f - \u7c21\u5316\u53c3\u6578\uff08<code>publishComment</code> \u4e0d\u9700\u8981 <code>parentId</code> \u7b49\u53ef\u9078\u53c3\u6578\uff09 - \u63d0\u9ad8 API \u53ef\u8b80\u6027\u548c\u985e\u578b\u5b89\u5168</p> <p>\u5f71\u97ff\u7bc4\u570d\uff1a - <code>PrematchCommentAPI+RepositoryProtocol.swift</code> - <code>PrematchCommentAPI+Repository.swift</code> - <code>PrematchCommentClient.swift</code> - <code>PrematchCommentRepository.swift</code></p> <p>\u5411\u5f8c\u517c\u5bb9\u6027\uff1a\u2705 \u7121\u5f71\u97ff\uff08\u9019\u662f\u65b0\u5be6\u4f5c\uff09</p>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#13-togglelike","title":"\u8b8a\u66f4 1.3: <code>toggleLike</code> \u8fd4\u56de\u503c\u8655\u7406","text":"<p>\u8b8a\u66f4\u524d\uff1a <pre><code>func toggleLike(commentId: Int64) async throws -&gt; CommentDTO?\n</code></pre></p> <p>\u8b8a\u66f4\u5f8c\uff1a <pre><code>func toggleLike(commentId: Int64) async throws  // \u8fd4\u56de void\n</code></pre></p> <p>\u5be6\u4f5c\uff1a <pre><code>public func toggleLike(commentId: Int64) async throws {\n    let endpoint = PrematchCommentEndpoint.toggleLike(commentId: commentId)\n    // \u26a0\ufe0f API \u8fd4\u56de raw null\uff0c\u4f7f\u7528 NullableResponse \u8655\u7406\n    let _: NullableResponse = try await apiClient.request(endpoint)\n}\n</code></pre></p> <p>\u539f\u56e0\uff1a - \u5be6\u969b API \u8fd4\u56de raw <code>null</code>\uff0c\u800c\u975e\u5305\u88dd\u7684 DTO - \u4f7f\u7528 <code>NullableResponse</code> \u6b63\u78ba\u8655\u7406 <code>null</code> \u503c</p> <p>\u5f71\u97ff\u7bc4\u570d\uff1a - <code>PrematchCommentAPI+RepositoryProtocol.swift</code> - <code>PrematchCommentAPI+Repository.swift</code> - <code>PrematchCommentClient.swift</code> - <code>PrematchCommentRepository.swift</code></p> <p>\u5411\u5f8c\u517c\u5bb9\u6027\uff1a\u2705 \u7121\u5f71\u97ff\uff08\u9019\u662f\u65b0\u5be6\u4f5c\uff09</p>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#14-nullableresponse-dto","title":"\u8b8a\u66f4 1.4: \u65b0\u589e <code>NullableResponse</code> DTO","text":"<p>\u65b0\u589e\uff1a <pre><code>extension PrematchCommentAPI {\n    /// \u7528\u65bc\u8655\u7406\u8fd4\u56de null \u7684 API response\uff08\u5982 toggleLike\uff09\n    struct NullableResponse: Decodable {\n        init(from decoder: Decoder) throws {\n            // \u5141\u8a31\u89e3\u6790 null \u503c\uff0c\u4e0d\u505a\u4efb\u4f55\u8655\u7406\n            // \u5982\u679c\u80fd\u6210\u529f\u5230\u9054\u9019\u88e1\uff0c\u4ee3\u8868 HTTP \u8acb\u6c42\u6210\u529f\n        }\n    }\n}\n</code></pre></p> <p>\u539f\u56e0\uff1a - \u63d0\u4f9b\u6e05\u6670\u7684\u8a9e\u610f\u4f86\u8655\u7406\u8fd4\u56de <code>null</code> \u7684 API - \u907f\u514d Decoding \u932f\u8aa4</p>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#2-tdd-011-chatapi","title":"2. TDD-011: ChatAPI","text":""},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#21-getbatchcount-http-method","title":"\u8b8a\u66f4 2.1: <code>getBatchCount</code> HTTP Method \u4fee\u6b63","text":"<p>\u8b8a\u66f4\u524d\uff1a <pre><code>public var method: String {\n    switch self {\n    case .getBatchCount, .getChatroomInfo, .getHistoricalMessages:\n        return FComHTTPMethod.get.rawValue\n    // ...\n    }\n}\n\npublic var encoding: APIEncoding {\n    switch self {\n    case .getBatchCount, .getChatroomInfo, .getHistoricalMessages:\n        return .url\n    // ...\n    }\n}\n</code></pre></p> <p>\u8b8a\u66f4\u5f8c\uff1a <pre><code>public var method: String {\n    switch self {\n    case .getChatroomInfo, .getHistoricalMessages:\n        return FComHTTPMethod.get.rawValue\n    case .getBatchCount, .sendMessage, .joinChatroom, .leaveChatroom, .bulkLeaveChatroom:\n        return FComHTTPMethod.post.rawValue  // \u26a0\ufe0f getBatchCount \u4fee\u6b63\u70ba POST\n    }\n}\n\npublic var encoding: APIEncoding {\n    switch self {\n    case .getChatroomInfo, .getHistoricalMessages:\n        return .url\n    case .getBatchCount, .sendMessage, .joinChatroom, .leaveChatroom, .bulkLeaveChatroom:\n        return .json  // \u26a0\ufe0f getBatchCount \u4fee\u6b63\u70ba JSON encoding\n    }\n}\n</code></pre></p> <p>\u539f\u56e0\uff1a - \u5be6\u969b\u6e2c\u8a66\u767c\u73fe API \u53ea\u652f\u63f4 POST \u65b9\u6cd5 - GET \u65b9\u6cd5\u8fd4\u56de 405 Method Not Allowed \u932f\u8aa4</p> <p>\u5f71\u97ff\u7bc4\u570d\uff1a - <code>ChatAPI+Endpoint.swift</code> - Integration Tests</p> <p>\u5411\u5f8c\u517c\u5bb9\u6027\uff1a\u2705 \u7121\u5f71\u97ff\uff08\u9019\u662f\u65b0\u5be6\u4f5c\uff09</p>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#22-null-response","title":"\u8b8a\u66f4 2.2: Null Response \u8655\u7406","text":"<p>\u65b0\u589e\uff1a <pre><code>extension ChatAPI {\n    public actor ChatRepository: ChatRepositoryProtocol {\n        public func joinChatroom(chatroomId: String) async throws {\n            let endpoint = ChatEndpoint.joinChatroom(chatroomId: chatroomId)\n            // \u26a0\ufe0f API \u8fd4\u56de raw null\uff0c\u4f7f\u7528 NullableResponse \u8655\u7406\n            let _: NullableResponse = try await apiClient.request(endpoint)\n        }\n\n        public func leaveChatroom(chatroomId: String) async throws {\n            let endpoint = ChatEndpoint.leaveChatroom(chatroomId: chatroomId)\n            // \u26a0\ufe0f API \u8fd4\u56de raw null\uff0c\u4f7f\u7528 NullableResponse \u8655\u7406\n            let _: NullableResponse = try await apiClient.request(endpoint)\n        }\n\n        public func bulkLeaveChatroom(chatroomId: String, excludeUserIds: [String]?) async throws {\n            let endpoint = ChatEndpoint.bulkLeaveChatroom(chatroomId: chatroomId, excludeUserIds: excludeUserIds)\n            // \u26a0\ufe0f API \u8fd4\u56de raw null\uff0c\u4f7f\u7528 NullableResponse \u8655\u7406\n            let _: NullableResponse = try await apiClient.request(endpoint)\n        }\n    }\n\n    /// \u7528\u65bc\u8655\u7406\u8fd4\u56de null \u7684 API response\n    struct NullableResponse: Decodable {\n        init(from decoder: Decoder) throws {\n            // \u5141\u8a31\u89e3\u6790 null \u503c\uff0c\u4e0d\u505a\u4efb\u4f55\u8655\u7406\n        }\n    }\n}\n</code></pre></p> <p>\u539f\u56e0\uff1a - <code>joinChatroom</code>\u3001<code>leaveChatroom</code>\u3001<code>bulkLeaveChatroom</code> API \u5be6\u969b\u8fd4\u56de raw <code>null</code> - \u4f7f\u7528 <code>NullableResponse</code> \u6b63\u78ba\u8655\u7406\u9019\u7a2e\u60c5\u6cc1</p> <p>\u5f71\u97ff\u7bc4\u570d\uff1a - <code>ChatAPI+Repository.swift</code></p>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#3-tdd-031-livechatrepository","title":"3. TDD-031: LiveChatRepository","text":""},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#31-repository","title":"\u8b8a\u66f4 3.1: \u5169\u5c64 Repository \u67b6\u69cb","text":"<p>\u8b8a\u66f4\u524d\uff08\u539f TDD \u898f\u5283\uff09\uff1a <pre><code>Sources/LiveChat/Services/API/Chat/\n  \u251c\u2500\u2500 ChatAPI+RepositoryProtocol.swift  # Repository Protocol\n  \u251c\u2500\u2500 ChatAPI+Repository.swift          # Repository \u5be6\u4f5c\uff08actor\uff09\n  \u2514\u2500\u2500 ChatAPI+LiveChat.swift            # DTO \u2192 Domain Model \u8f49\u63db\n</code></pre></p> <p>\u8b8a\u66f4\u5f8c\uff08\u5be6\u969b\u5be6\u4f5c\uff09\uff1a</p> <p>API Layer (API Repository)\uff1a <pre><code>Sources/MatchChat/Services/API/Chat/\n  \u251c\u2500\u2500 ChatAPI+RepositoryProtocol.swift  # API Repository Protocol\n  \u251c\u2500\u2500 ChatAPI+Repository.swift          # API Repository \u5be6\u4f5c\uff08actor\uff09\n  \u2514\u2500\u2500 ChatAPI+Models.swift              # DTO \u5b9a\u7fa9\n</code></pre> - \u8077\u8cac\uff1a\u8655\u7406 HTTP \u8acb\u6c42\uff0c\u8fd4\u56de DTOs - \u7121\u696d\u52d9\u908f\u8f2f</p> <p>Domain Layer (Domain Repository)\uff1a <pre><code>Sources/MatchChat/Services/Repository/LiveChat/\n  \u251c\u2500\u2500 LiveChatRepositoryProtocol.swift  # Domain Repository Protocol\n  \u2514\u2500\u2500 LiveChatRepository.swift          # Domain Repository \u5be6\u4f5c\uff08actor\uff09\n\nSources/MatchChat/Models/LiveChat/\n  \u2514\u2500\u2500 LiveChat+ChatAPI.swift            # DTO \u2192 Domain Model \u8f49\u63db\n</code></pre> - \u8077\u8cac\uff1a\u4f7f\u7528 Client\uff0c\u5c07 DTOs \u8f49\u63db\u70ba Domain Models\uff0c\u5305\u542b\u696d\u52d9\u908f\u8f2f - \u8fd4\u56de Domain Models</p> <p>\u539f\u56e0\uff1a 1. \u8077\u8cac\u5206\u96e2\uff1a    - API Repository \u5c08\u6ce8\u65bc\u7db2\u8def\u8acb\u6c42    - Domain Repository \u5c08\u6ce8\u65bc\u696d\u52d9\u908f\u8f2f\u548c\u8cc7\u6599\u8f49\u63db</p> <ol> <li>\u53ef\u6e2c\u8a66\u6027\uff1a</li> <li>API Repository \u53ef\u4ee5\u7528 Mock APIClient \u6e2c\u8a66</li> <li> <p>Domain Repository \u53ef\u4ee5\u7528 Mock Client \u6e2c\u8a66</p> </li> <li> <p>\u53ef\u7dad\u8b77\u6027\uff1a</p> </li> <li>API \u8b8a\u66f4\u53ea\u5f71\u97ff API Repository</li> <li> <p>Domain Model \u8b8a\u66f4\u53ea\u5f71\u97ff Domain Repository</p> </li> <li> <p>\u7b26\u5408 Clean Architecture\uff1a</p> </li> <li>API Repository \u5728\u5167\u5c64\uff08\u57fa\u790e\u8a2d\u65bd\u5c64\uff09</li> <li>Domain Repository \u5728\u5916\u5c64\uff08\u61c9\u7528\u5c64\uff09</li> </ol> <p>\u5f71\u97ff\u7bc4\u570d\uff1a - \u6574\u9ad4\u67b6\u69cb\u5c64\u6b21\u66f4\u6e05\u6670 - \u6e2c\u8a66\u7b56\u7565\u66f4\u9748\u6d3b</p> <p>\u5411\u5f8c\u517c\u5bb9\u6027\uff1a\u2705 \u7121\u5f71\u97ff\uff08\u9019\u662f\u65b0\u5be6\u4f5c\uff09</p>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#32-websocket","title":"\u8b8a\u66f4 3.2: WebSocket \u8a02\u95b1\u5305\u542b\u9ed1\u540d\u55ae\u904e\u6ffe","text":"<p>\u5be6\u4f5c\uff1a <pre><code>public func subscribeWebSocket(chatroomId: String) async throws -&gt; AsyncStream&lt;LiveChat.Message&gt; {\n    let webSocketStream = webSocketClient.subscribe(chatroomId: chatroomId)\n\n    return AsyncStream { continuation in\n        Task {\n            for await webSocketMessage in webSocketStream {\n                // \u904e\u6ffe\u9ed1\u540d\u55ae\u7528\u6236\u7684\u8a0a\u606f\n                let userId = webSocketMessage.data.jsonBody.postUserId\n                if await isBlacklisted(userId: userId) {\n                    continue\n                }\n\n                let domainMessage = webSocketMessage.data.toDomainMessage()\n                continuation.yield(domainMessage)\n            }\n            continuation.finish()\n        }\n    }\n}\n</code></pre></p> <p>\u539f\u56e0\uff1a - \u5728 Repository \u5c64\u7d71\u4e00\u8655\u7406\u9ed1\u540d\u55ae\u908f\u8f2f - \u78ba\u4fdd\u6240\u6709 WebSocket \u8a0a\u606f\u90fd\u7d93\u904e\u9ed1\u540d\u55ae\u904e\u6ffe</p>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#4","title":"4. \u67b6\u69cb\u6587\u6a94\u66f4\u65b0","text":""},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#41-matchchat-package","title":"\u8b8a\u66f4 4.1: \u7d71\u4e00 MatchChat Package","text":"<p>\u539f TDD \u898f\u5283\uff1a <pre><code>Sources/\n  \u251c\u2500\u2500 PrematchComment/  # \u7368\u7acb Package\n  \u2514\u2500\u2500 LiveChat/         # \u7368\u7acb Package\n</code></pre></p> <p>\u5be6\u969b\u5be6\u4f5c\uff1a <pre><code>MatchChat/Sources/MatchChat/  # \u7d71\u4e00 Package\n  \u251c\u2500\u2500 Models/\n  \u2502   \u251c\u2500\u2500 PrematchComment/\n  \u2502   \u2514\u2500\u2500 LiveChat/\n  \u2514\u2500\u2500 Services/\n      \u251c\u2500\u2500 API/\n      \u251c\u2500\u2500 Client/\n      \u2514\u2500\u2500 Repository/\n</code></pre></p> <p>\u539f\u56e0\uff1a 1. \u6e1b\u5c11\u4f9d\u8cf4\u8907\u96dc\u5ea6\uff1a\u7d71\u4e00 Package \u907f\u514d\u5faa\u74b0\u4f9d\u8cf4\u554f\u984c 2. \u5171\u4eab\u4ee3\u78bc\u66f4\u5bb9\u6613\uff1aModels \u548c Services \u53ef\u4ee5\u76f4\u63a5\u5171\u4eab 3. \u66f4\u7b26\u5408\u5be6\u969b\u5c08\u6848\u7d50\u69cb\uff1aFCom \u4f7f\u7528\u55ae\u4e00 Module \u67b6\u69cb 4. \u7c21\u5316\u69cb\u5efa\u548c\u6e2c\u8a66\uff1a\u55ae\u4e00 Package \u66f4\u5bb9\u6613\u7ba1\u7406</p> <p>\u5f71\u97ff\u7bc4\u570d\uff1a - \u6574\u9ad4 Package \u7d50\u69cb - Import \u8a9e\u53e5\u7d71\u4e00\u70ba <code>import MatchChat</code></p> <p>\u5411\u5f8c\u517c\u5bb9\u6027\uff1a\u2705 \u7121\u5f71\u97ff\uff08\u9019\u662f\u65b0\u5be6\u4f5c\uff09</p>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#_3","title":"\u8a2d\u8a08\u6c7a\u7b56\u8a18\u9304","text":""},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#1-api-dtoarray","title":"1. \u70ba\u4f55 API \u76f4\u63a5\u8fd4\u56de DTO/Array\uff1f","text":"<p>\u6c7a\u7b56\uff1a\u79fb\u9664 Response Wrapper\uff08<code>bizCode/data</code> \u7d50\u69cb\uff09</p> <p>\u7406\u7531\uff1a 1. \u5be6\u969b API \u884c\u70ba\uff1aBackend \u5be6\u969b\u8fd4\u56de\u76f4\u63a5\u7684 DTO/Array 2. \u7c21\u5316\u4ee3\u78bc\uff1a\u6e1b\u5c11\u4e0d\u5fc5\u8981\u7684\u5305\u88dd\u5c64\u548c Decoding \u908f\u8f2f 3. \u63d0\u9ad8\u6027\u80fd\uff1a\u6e1b\u5c11\u4e00\u5c64 Object \u5275\u5efa</p> <p>\u66ff\u4ee3\u65b9\u6848\u8003\u616e\uff1a - \u274c \u4fdd\u6301 Wrapper\uff1a\u9700\u8981\u4fee\u6539 Backend API\uff08\u4e0d\u73fe\u5be6\uff09 - \u2705 \u76f4\u63a5\u8fd4\u56de DTO\uff1a\u7b26\u5408\u5be6\u969b\u60c5\u6cc1\uff0c\u4ee3\u78bc\u66f4\u7c21\u6f54</p>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#2-publishcomment","title":"2. \u70ba\u4f55\u62c6\u5206 <code>publishComment</code>\uff1f","text":"<p>\u6c7a\u7b56\uff1a\u62c6\u5206\u70ba <code>publishComment</code> \u548c <code>publishReply</code></p> <p>\u7406\u7531\uff1a 1. \u8a9e\u610f\u6e05\u6670\uff1a\u660e\u78ba\u5340\u5206\u9802\u5c64\u8a55\u8ad6\u548c\u56de\u8986 2. \u985e\u578b\u5b89\u5168\uff1a<code>publishComment</code> \u4e0d\u9700\u8981\u53ef\u9078\u53c3\u6578\uff0c\u6e1b\u5c11\u932f\u8aa4 3. \u7b26\u5408\u696d\u52d9\u908f\u8f2f\uff1a\u9802\u5c64\u8a55\u8ad6\u548c\u56de\u8986\u7684\u696d\u52d9\u898f\u5247\u4e0d\u540c\uff08\u5982\u8de8\u570b\u56de\u8986\u9650\u5236\uff09</p> <p>\u66ff\u4ee3\u65b9\u6848\u8003\u616e\uff1a - \u274c \u55ae\u4e00\u65b9\u6cd5 + \u53ef\u9078\u53c3\u6578\uff1a\u5bb9\u6613\u8aa4\u7528\uff0c\u8a9e\u610f\u4e0d\u6e05 - \u2705 \u62c6\u5206\u65b9\u6cd5\uff1a\u66f4\u6e05\u6670\uff0c\u66f4\u5b89\u5168</p>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#3-repository","title":"3. \u70ba\u4f55\u63a1\u7528\u5169\u5c64 Repository\uff1f","text":"<p>\u6c7a\u7b56\uff1aAPI Repository + Domain Repository</p> <p>\u7406\u7531\uff1a 1. \u8077\u8cac\u5206\u96e2\uff1aAPI Repository \u8655\u7406\u7db2\u8def\uff0cDomain Repository \u8655\u7406\u696d\u52d9\u908f\u8f2f 2. \u53ef\u6e2c\u8a66\u6027\uff1a\u5169\u5c64\u53ef\u4ee5\u7368\u7acb\u6e2c\u8a66 3. \u53ef\u7dad\u8b77\u6027\uff1aAPI \u8b8a\u66f4\u548c\u696d\u52d9\u908f\u8f2f\u8b8a\u66f4\u4e92\u4e0d\u5f71\u97ff 4. \u7b26\u5408 Clean Architecture\uff1a\u5167\u5c64\uff08API\uff09\u548c\u5916\u5c64\uff08Domain\uff09\u5206\u96e2</p> <p>\u66ff\u4ee3\u65b9\u6848\u8003\u616e\uff1a - \u274c \u55ae\u4e00 Repository\uff1a\u8077\u8cac\u904e\u91cd\uff0c\u96e3\u4ee5\u6e2c\u8a66 - \u2705 \u5169\u5c64 Repository\uff1a\u7b26\u5408 SOLID \u539f\u5247</p>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#4-matchchat-package","title":"4. \u70ba\u4f55\u7d71\u4e00 MatchChat Package\uff1f","text":"<p>\u6c7a\u7b56\uff1a\u4f7f\u7528\u7d71\u4e00\u7684 <code>MatchChat</code> Package</p> <p>\u7406\u7531\uff1a 1. \u907f\u514d\u5faa\u74b0\u4f9d\u8cf4\uff1a\u7368\u7acb Packages \u5bb9\u6613\u7522\u751f\u5faa\u74b0\u4f9d\u8cf4 2. \u5171\u4eab\u4ee3\u78bc\u66f4\u5bb9\u6613\uff1aModels \u548c Services \u53ef\u4ee5\u76f4\u63a5\u5171\u4eab 3. \u7b26\u5408\u5c08\u6848\u7d50\u69cb\uff1aFCom \u4f7f\u7528\u55ae\u4e00 Module \u67b6\u69cb 4. \u7c21\u5316\u7ba1\u7406\uff1a\u55ae\u4e00 Package \u66f4\u5bb9\u6613\u69cb\u5efa\u548c\u6e2c\u8a66</p> <p>\u66ff\u4ee3\u65b9\u6848\u8003\u616e\uff1a - \u274c \u7368\u7acb Packages\uff1a\u9700\u8981\u8907\u96dc\u7684\u4f9d\u8cf4\u7ba1\u7406 - \u2705 \u7d71\u4e00 Package\uff1a\u7c21\u55ae\u76f4\u63a5\uff0c\u6613\u65bc\u7dad\u8b77</p>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#_4","title":"\u5f71\u97ff\u5206\u6790","text":""},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#_5","title":"\u5c0d\u73fe\u6709\u4ee3\u78bc\u7684\u5f71\u97ff","text":"\u5c64\u7d1a \u5f71\u97ff \u98a8\u96aa API Layer \u2705 \u5df2\u5b8c\u6210\u66f4\u65b0 \u7121\u98a8\u96aa\uff08\u65b0\u5be6\u4f5c\uff09 Client Layer \u2705 \u5df2\u5b8c\u6210\u66f4\u65b0 \u7121\u98a8\u96aa\uff08\u65b0\u5be6\u4f5c\uff09 Repository Layer \u2705 \u5df2\u5b8c\u6210\u66f4\u65b0 \u7121\u98a8\u96aa\uff08\u65b0\u5be6\u4f5c\uff09 UseCase Layer \u26a0\ufe0f \u672a\u958b\u59cb \u9700\u8981\u6309\u65b0\u8a2d\u8a08\u5be6\u4f5c Feature Layer \u26a0\ufe0f \u672a\u958b\u59cb \u9700\u8981\u6309\u65b0\u8a2d\u8a08\u5be6\u4f5c"},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#_6","title":"\u5c0d\u6e2c\u8a66\u7684\u5f71\u97ff","text":"\u6e2c\u8a66\u985e\u578b \u5f71\u97ff \u884c\u52d5 Integration Tests \u2705 \u5df2\u66f4\u65b0 \u901a\u904e API Unit Tests \u26a0\ufe0f \u5f85\u88dc\u5145 \u9700\u8981\u6dfb\u52a0 Repository Unit Tests \u26a0\ufe0f \u5f85\u88dc\u5145 \u9700\u8981\u6dfb\u52a0 UseCase Unit Tests \u26a0\ufe0f \u5f85\u88dc\u5145 UseCase \u5be6\u4f5c\u5f8c\u6dfb\u52a0"},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#_7","title":"\u5c0d\u6587\u6a94\u7684\u5f71\u97ff","text":"\u6587\u6a94 \u72c0\u614b \u5099\u8a3b TDD-010 \u2705 \u5df2\u66f4\u65b0 Response \u683c\u5f0f\u3001\u65b9\u6cd5\u7c3d\u540d TDD-011 \u2705 \u5df2\u66f4\u65b0 HTTP Method\u3001Null Response TDD-031 \u2705 \u5df2\u66f4\u65b0 \u67b6\u69cb\u8aaa\u660e \u67b6\u69cb\u5716 \u26a0\ufe0f \u5f85\u66f4\u65b0 \u9700\u53cd\u6620\u5169\u5c64 Repository API Spec \u26a0\ufe0f \u5f85\u78ba\u8a8d \u9700\u78ba\u8a8d Backend \u6587\u6a94\u4e00\u81f4\u6027"},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#_8","title":"\u6e2c\u8a66\u66f4\u65b0\u9700\u6c42","text":""},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#_9","title":"\u5df2\u5b8c\u6210\u7684\u6e2c\u8a66","text":"<p>\u2705 PrematchCommentAPI Integration Tests\uff1a - <code>getBatchCommentInfo</code> - \u76f4\u63a5\u8fd4\u56de Array - <code>getCommentMeta</code> - \u76f4\u63a5\u8fd4\u56de DTO - <code>publishComment</code> - \u76f4\u63a5\u8fd4\u56de DTO - <code>publishReply</code> - \u65b0\u65b9\u6cd5\u6e2c\u8a66 - <code>toggleLike</code> - Null Response \u8655\u7406</p> <p>\u2705 ChatAPI Integration Tests\uff1a - <code>getBatchCount</code> - POST \u65b9\u6cd5 - <code>joinChatroom</code> - Null Response \u8655\u7406 - <code>leaveChatroom</code> - Null Response \u8655\u7406</p>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#_10","title":"\u5f85\u88dc\u5145\u7684\u6e2c\u8a66","text":"<p>\u26a0\ufe0f API Layer Unit Tests\uff1a - Mock APIClient \u6e2c\u8a66 Repository - \u6e2c\u8a66 Null Response \u8655\u7406 - \u6e2c\u8a66\u932f\u8aa4\u8655\u7406</p> <p>\u26a0\ufe0f Domain Layer Unit Tests\uff1a - Mock Client \u6e2c\u8a66 Repository - \u6e2c\u8a66 DTO \u2192 Domain Model \u8f49\u63db - \u6e2c\u8a66\u9ed1\u540d\u55ae\u904e\u6ffe\u908f\u8f2f</p>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#_11","title":"\u9077\u79fb\u6307\u5357","text":""},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#usecase","title":"\u5c0d\u65bc\u672a\u4f86\u7684 UseCase \u5be6\u4f5c","text":"<p>\u7531\u65bc API \u548c Repository \u7684\u7c3d\u540d\u5df2\u8b8a\u66f4\uff0cUseCase \u5be6\u4f5c\u6642\u9700\u6ce8\u610f\uff1a</p>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#1-publishcomment-vs-publishreply","title":"1. \u4f7f\u7528 <code>publishComment</code> vs <code>publishReply</code>","text":"<pre><code>// \u2705 \u767c\u5e03\u9802\u5c64\u8a55\u8ad6\nlet comment = try await repository.publishComment(\n    refId: \"sr:match:12345\",\n    content: \"Great match!\"\n)\n\n// \u2705 \u56de\u8986\u8a55\u8ad6\nlet reply = try await repository.publishReply(\n    refId: \"sr:match:12345\",\n    content: \"I agree!\",\n    parentId: 123,\n    tagUserId: \"user123\",\n    sharedBetsMeta: nil\n)\n\n// \u274c \u932f\u8aa4\uff1a\u4e0d\u8981\u4f7f\u7528\u820a\u7684\u55ae\u4e00\u65b9\u6cd5\n// let comment = try await repository.publishComment(\n//     refId: \"sr:match:12345\",\n//     content: \"Great match!\",\n//     parentId: nil,  // \u5bb9\u6613\u8aa4\u7528\n//     sharedBetsMeta: nil,\n//     tagUserId: nil\n// )\n</code></pre>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#2-togglelike","title":"2. <code>toggleLike</code> \u4e0d\u8fd4\u56de\u503c","text":"<pre><code>// \u2705 \u6b63\u78ba\uff1a\u4e0d\u671f\u5f85\u8fd4\u56de\u503c\ntry await repository.toggleLike(commentId: \"123\")\n// UI \u72c0\u614b\u9700\u8981\u81ea\u5df1\u7ba1\u7406\uff08\u4f8b\u5982\u6a02\u89c0\u66f4\u65b0\uff09\n\n// \u274c \u932f\u8aa4\uff1a\u671f\u5f85\u8fd4\u56de\u503c\n// let updatedComment = try await repository.toggleLike(commentId: \"123\")\n</code></pre>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#3-domain-repository","title":"3. \u4f7f\u7528 Domain Repository","text":"<pre><code>// \u2705 \u6b63\u78ba\uff1a\u4f7f\u7528 Domain Repository\uff08\u8fd4\u56de Domain Models\uff09\nlet repository = PrematchCommentRepository(client: PrematchCommentClient())\nlet comments: [PrematchComment.Comment] = try await repository.getComments(...)\n\n// \u274c \u932f\u8aa4\uff1a\u4e0d\u8981\u76f4\u63a5\u4f7f\u7528 API Repository\uff08\u8fd4\u56de DTOs\uff09\n// let apiRepo = PrematchCommentAPI.PrematchCommentRepository()\n// let dtos = try await apiRepo.getCommentsByPopular(...)\n</code></pre>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#commits","title":"\u76f8\u95dc Commits","text":"<p>\u66f4\u65b0\u76f8\u95dc\u7684 commits\uff1a - TBD: TDD-010 \u6587\u6a94\u66f4\u65b0 - TBD: TDD-011 \u6587\u6a94\u66f4\u65b0 - TBD: TDD-031 \u6587\u6a94\u66f4\u65b0 - TBD: \u67b6\u69cb\u6587\u6a94\u66f4\u65b0</p>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#_12","title":"\u5f8c\u7e8c\u884c\u52d5","text":""},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#p0","title":"\u7acb\u5373\u884c\u52d5\uff08P0\uff09","text":"<ol> <li>\u2705 \u66f4\u65b0 TDD-010, TDD-011, TDD-031 \u6587\u6a94</li> <li>\u26a0\ufe0f \u958b\u59cb\u5be6\u4f5c TDD-040 (ReloadCommentListUseCase)</li> <li>\u26a0\ufe0f \u5b9a\u7fa9 Adapter Protocols\uff08PersonalPageAdapter, FComSharedFlowAdapter\uff09</li> </ol>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#p1","title":"\u672c\u9031\u884c\u52d5\uff08P1\uff09","text":"<ol> <li>\u26a0\ufe0f \u5be6\u4f5c TDD-041 (PublishCommentUseCase)</li> <li>\u26a0\ufe0f \u88dc\u5145 API Layer Unit Tests</li> <li>\u26a0\ufe0f \u88dc\u5145 Repository Layer Unit Tests</li> </ol>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#p2","title":"\u4e0b\u9031\u884c\u52d5\uff08P2\uff09","text":"<ol> <li>\u26a0\ufe0f \u66f4\u65b0\u67b6\u69cb\u5716\u4ee5\u53cd\u6620\u5169\u5c64 Repository</li> <li>\u26a0\ufe0f \u78ba\u8a8d Backend API \u6587\u6a94\u4e00\u81f4\u6027</li> <li>\u26a0\ufe0f \u5be6\u4f5c LiveChat UseCases</li> </ol>"},{"location":"13_Implementation_Status/tdd_updates_2025-12-09/#_13","title":"\u7e3d\u7d50","text":"<p>\u672c\u6b21 TDD \u66f4\u65b0\u4e3b\u8981\u662f\u6839\u64da\u5be6\u969b\u5be6\u4f5c\u4e2d\u7684\u6539\u9032\u548c\u767c\u73fe\uff0c\u66f4\u65b0\u6587\u6a94\u4ee5\u53cd\u6620\u5be6\u969b\u60c5\u6cc1\uff1a</p> <p>\u4e3b\u8981\u6539\u9032\uff1a 1. \u2705 API Response \u683c\u5f0f\u512a\u5316\uff08\u76f4\u63a5\u8fd4\u56de DTO/Array\uff09 2. \u2705 \u65b9\u6cd5\u8a9e\u610f\u6539\u9032\uff08\u62c6\u5206 <code>publishComment</code>\uff09 3. \u2705 \u67b6\u69cb\u6539\u9032\uff08\u5169\u5c64 Repository\uff09 4. \u2705 \u7d71\u4e00 Package \u7d50\u69cb\uff08MatchChat\uff09</p> <p>\u512a\u9ede\uff1a - \u4ee3\u78bc\u66f4\u7c21\u6f54\u3001\u66f4\u6e05\u6670 - \u67b6\u69cb\u66f4\u7b26\u5408 Clean Architecture - \u6e2c\u8a66\u66f4\u5bb9\u6613\u7de8\u5beb\u548c\u7dad\u8b77</p> <p>\u98a8\u96aa\uff1a - \u2705 \u7121\u5411\u5f8c\u517c\u5bb9\u6027\u554f\u984c\uff08\u9019\u662f\u65b0\u5be6\u4f5c\uff09 - \u26a0\ufe0f \u9700\u8981\u88dc\u5145 Unit Tests</p> <p>\u7d50\u8ad6\uff1a\u5be6\u4f5c\u6539\u9032\u662f\u5408\u7406\u4e14\u5fc5\u8981\u7684\uff0cTDD \u6587\u6a94\u5df2\u66f4\u65b0\u4ee5\u53cd\u6620\u9019\u4e9b\u6539\u9032\u3002</p> <p>\u5831\u544a\u751f\u6210\u6642\u9593: 2025-12-09 \u5831\u544a\u7248\u672c: v1.0 \u66f4\u65b0\u4eba: AI Assistant (Claude Sonnet 4.5)</p>"},{"location":"14_Changelog/","title":"\u8b8a\u66f4\u65e5\u8a8c","text":"<p>\u672c\u76ee\u9304\u7528\u65bc\u8a18\u9304\u6bcf\u65e5\u7684 code change \u548c\u65b0\u589e\u5167\u5bb9\uff0c\u78ba\u4fdd\u958b\u767c\u904e\u7a0b\u7684\u8b8a\u66f4\u90fd\u6709\u8a18\u9304\u3002</p>"},{"location":"14_Changelog/#_2","title":"\u6587\u4ef6\u8aaa\u660e","text":"<ul> <li><code>CHANGELOG.md</code>\uff1a\u4e3b\u8981\u7684\u8b8a\u66f4\u65e5\u8a8c\uff0c\u6309\u65e5\u671f\u8a18\u9304\u6240\u6709\u8b8a\u66f4</li> </ul>"},{"location":"14_Changelog/#_3","title":"\u4f7f\u7528\u65b9\u5f0f","text":"<ol> <li>\u6bcf\u6b21 commit \u5f8c\uff1a\u8a18\u9304\u76f8\u95dc\u7684\u8b8a\u66f4</li> <li>\u6bcf\u5929\u7d50\u675f\u524d\uff1a\u4f7f\u7528 Cursor \u5354\u52a9\u751f\u6210\u7576\u5929\u7684\u8b8a\u66f4\u8a18\u9304</li> <li>\u5b9a\u671f\u56de\u9867\uff1a\u6aa2\u67e5\u8b8a\u66f4\u662f\u5426\u7b26\u5408 TDD \u898f\u5283</li> </ol>"},{"location":"14_Changelog/#_4","title":"\u8b8a\u66f4\u985e\u578b","text":"<ul> <li>\u2705 \u5b8c\u6210\uff1a\u65b0\u529f\u80fd\u6216 Ticket \u5b8c\u6210</li> <li>\ud83d\udea7 \u9032\u884c\u4e2d\uff1a\u6b63\u5728\u9032\u884c\u7684\u529f\u80fd</li> <li>\ud83d\udc1b Bug \u4fee\u5fa9\uff1a\u4fee\u5fa9\u7684\u554f\u984c</li> <li>\u267b\ufe0f \u91cd\u69cb\uff1a\u7a0b\u5f0f\u78bc\u91cd\u69cb</li> <li>\ud83d\udcdd \u6587\u4ef6\u66f4\u65b0\uff1aTDD \u6216\u6587\u4ef6\u66f4\u65b0</li> <li>\u26a0\ufe0f \u554f\u984c\u767c\u73fe\uff1a\u767c\u73fe\u7684\u554f\u984c\u6216\u98a8\u96aa</li> </ul>"},{"location":"14_Changelog/#cursor","title":"\u8207 Cursor \u5354\u4f5c","text":"<p>\u6bcf\u5929\u7d50\u675f\u6642\uff0c\u53ef\u4ee5\u9019\u6a23\u8207 Cursor \u4e92\u52d5\uff1a</p> <pre><code>\u6839\u64da\u4eca\u5929\u7684 git commits\uff0c\u5e6b\u6211\u751f\u6210\u4eca\u5929\u7684\u8b8a\u66f4\u8a18\u9304\uff1a\n1. \u5217\u51fa\u6240\u6709\u4fee\u6539\u7684\u6a94\u6848\n2. \u5c0d\u61c9\u5230\u76f8\u95dc\u7684 TDD ticket\n3. \u751f\u6210 CHANGELOG.md \u7684\u683c\u5f0f\n4. \u66f4\u65b0 implementation_status.md\n</code></pre>"},{"location":"14_Changelog/CHANGELOG/","title":"\u8b8a\u66f4\u65e5\u8a8c","text":"<p>\u672c\u6587\u4ef6\u8a18\u9304\u6240\u6709\u8207 MatchChat (LiveChat &amp; PrematchComment) feature \u76f8\u95dc\u7684\u8b8a\u66f4\u3002</p>"},{"location":"14_Changelog/CHANGELOG/#_2","title":"\u683c\u5f0f\u8aaa\u660e","text":"<p>\u6bcf\u500b\u8b8a\u66f4\u8a18\u9304\u5305\u542b\uff1a - \u65e5\u671f\uff1a\u8b8a\u66f4\u65e5\u671f - \u985e\u578b\uff1a\u8b8a\u66f4\u985e\u578b\uff08\u5b8c\u6210/\u9032\u884c\u4e2d/Bug \u4fee\u5fa9/\u91cd\u69cb/\u6587\u4ef6\u66f4\u65b0/\u554f\u984c\u767c\u73fe\uff09 - Ticket ID\uff1a\u76f8\u95dc\u7684 TDD Ticket - \u63cf\u8ff0\uff1a\u8b8a\u66f4\u7684\u8a73\u7d30\u63cf\u8ff0 - \u6a94\u6848\uff1a\u76f8\u95dc\u7684\u5be6\u4f5c\u6a94\u6848 - \u9023\u7d50\uff1aGit commit \u9023\u7d50\uff08\u5982\u679c\u6709\u7684\u8a71\uff09</p>"},{"location":"14_Changelog/CHANGELOG/#2025-12-04","title":"2025-12-04","text":""},{"location":"14_Changelog/CHANGELOG/#_3","title":"\u267b\ufe0f \u91cd\u69cb","text":"<ul> <li>\u5305\u88dd shared bets metadata \u70ba Sendable \u985e\u578b [FOOTBALL-9180-9184]</li> <li>\u554f\u984c: <code>[String: Any]</code> \u5b57\u5178\u985e\u578b\u5728 Swift Concurrency \u74b0\u5883\u4e2d\u4e0d\u7b26\u5408 <code>Sendable</code> \u5354\u8b70\uff0c\u5c0e\u81f4\u7de8\u8b6f\u8b66\u544a</li> <li>\u89e3\u6c7a\u65b9\u6848: \u5f15\u5165 <code>SharedBetsMetadata</code> struct \u5305\u88dd\u5b57\u5178\uff0c\u4f7f\u7528 <code>@unchecked Sendable</code> \u6a19\u8a18</li> <li>\u8b8a\u66f4: <ul> <li>\u65b0\u589e <code>SharedBetsMetadata</code> \u7d50\u69cb\u5728 <code>PrematchCommentAPI+RepositoryProtocol.swift</code></li> <li>\u66f4\u65b0 <code>publishComment</code> \u65b9\u6cd5\u7c3d\u540d\uff0c\u4f7f\u7528 <code>SharedBetsMetadata?</code> \u53d6\u4ee3 <code>[String: Any]?</code></li> <li>\u5728 Repository \u5c64\u5c07 metadata \u8f49\u56de\u5b57\u5178\u5f8c\u518d\u50b3\u7d66 API</li> </ul> </li> <li>\u5f71\u97ff\u7bc4\u570d: <ul> <li><code>PrematchCommentAPI+Repository.swift</code></li> <li><code>PrematchCommentAPI+RepositoryProtocol.swift</code></li> <li><code>PrematchCommentClient.swift</code></li> <li><code>PrematchCommentClientProtocol.swift</code></li> </ul> </li> <li>\u5b8c\u6210\u5ea6: 100%</li> <li> <p>Commit: <code>1f97afa505</code></p> </li> <li> <p>\u5c07 WebSocket subscribe \u65b9\u6cd5\u6539\u70ba nonisolated [FOOTBALL-9180-9184]</p> </li> <li>\u554f\u984c: <code>subscribe(chatroomId:)</code> \u65b9\u6cd5\u5728 actor \u9694\u96e2\u74b0\u5883\u4e2d\u8fd4\u56de <code>AsyncStream</code> \u5c0e\u81f4\u8abf\u7528\u65b9\u9700\u8981 await</li> <li>\u89e3\u6c7a\u65b9\u6848: <ul> <li>\u5c07 <code>subscribe</code> \u65b9\u6cd5\u6a19\u8a18\u70ba <code>nonisolated</code>\uff0c\u5141\u8a31\u540c\u6b65\u5275\u5efa AsyncStream</li> <li>\u63d0\u53d6 actor-isolated \u908f\u8f2f\u5230\u65b0\u7684 <code>performSubscribe</code> helper \u65b9\u6cd5</li> <li>\u91cd\u69cb <code>addSubscriber</code> \u65b9\u6cd5\uff0c\u76f4\u63a5\u63a5\u53d7 continuation \u800c\u975e\u8fd4\u56de tuple</li> </ul> </li> <li>\u8b8a\u66f4:<ul> <li><code>ChatWebSocketClient.swift</code> - \u91cd\u69cb\u8a02\u95b1\u908f\u8f2f</li> <li><code>ChatWebSocketClientProtocol.swift</code> - \u66f4\u65b0\u5354\u8b70\u7c3d\u540d</li> </ul> </li> <li>\u512a\u9ede: \u6539\u5584\u4f75\u767c\u6a21\u578b\uff0c\u907f\u514d\u4e0d\u5fc5\u8981\u7684 actor \u9694\u96e2\u5728 stream \u5275\u5efa\u6642</li> <li>\u5b8c\u6210\u5ea6: 100%</li> <li>Commit: <code>163d376ab6</code></li> </ul>"},{"location":"14_Changelog/CHANGELOG/#_4","title":"\ud83d\udd27 \u914d\u7f6e\u66f4\u65b0","text":"<ul> <li>\u66f4\u65b0 gitignore \u6392\u9664 buildServer.json</li> <li>\u76ee\u7684: \u9632\u6b62\u672c\u5730 Xcode Build Server \u914d\u7f6e\u88ab\u63d0\u4ea4\u5230 git</li> <li>\u8b8a\u66f4: \u5728 <code>.gitignore</code> \u4e2d\u65b0\u589e <code>buildServer.json</code> \u898f\u5247</li> <li>\u597d\u8655: \u78ba\u4fdd\u672c\u5730\u958b\u767c\u914d\u7f6e\u5728 rebase/merge \u6642\u4fdd\u6301\u4e0d\u8b8a</li> <li>\u6a94\u6848: <code>.gitignore</code></li> <li> <p>Commit: <code>41c38d3195</code></p> </li> <li> <p>\u66f4\u65b0 Xcode \u9805\u76ee\u914d\u7f6e [FOOTBALL-9180-9184]</p> </li> <li>\u8b8a\u66f4:<ul> <li>\u65b0\u589e MatchChat package \u4f9d\u8cf4\u5230 FCom target</li> <li>\u66f4\u65b0 scheme version \u81f3 1.3 \u4ee5\u63d0\u5347\u517c\u5bb9\u6027</li> </ul> </li> <li>\u6a94\u6848:<ul> <li><code>FCom.xcodeproj/project.pbxproj</code></li> <li><code>MatchChat/.swiftpm/xcode/xcshareddata/xcschemes/MatchChat.xcscheme</code></li> </ul> </li> <li>Commit: <code>c00431ad62</code></li> </ul>"},{"location":"14_Changelog/CHANGELOG/#_5","title":"\ud83d\udcdd \u6587\u4ef6\u66f4\u65b0","text":"<ul> <li>\u66f4\u65b0\u5be6\u4f5c\u72c0\u614b\u8ffd\u8e64\u8868\uff08implementation_status.md\uff09</li> <li>\u6301\u7e8c\u9032\u884c Data Layer \u91cd\u69cb\u5de5\u4f5c</li> <li>\u6539\u5584 Swift Concurrency \u652f\u63f4</li> </ul>"},{"location":"14_Changelog/CHANGELOG/#2025-12-03","title":"2025-12-03","text":""},{"location":"14_Changelog/CHANGELOG/#_6","title":"\u2705 \u5b8c\u6210","text":"<ul> <li>[TDD-022] \u5be6\u4f5c ChatWebSocketClient\uff08WebSocket\uff09[FOOTBALL-9183]</li> <li>\u6a94\u6848: <code>MatchChat/Sources/MatchChat/Services/API/ChatWebSocketClient.swift</code></li> <li>\u8b8a\u66f4: \u65b0\u589e ChatWebSocketClient actor\uff0c\u5be6\u4f5c WebSocket \u901a\u8a0a<ul> <li><code>connect()</code> - \u5efa\u7acb WebSocket \u9023\u7dda</li> <li><code>disconnect()</code> - \u65b7\u958b WebSocket \u9023\u7dda</li> <li><code>subscribe(chatroomId:)</code> - \u8a02\u95b1\u6307\u5b9a\u804a\u5929\u5ba4\u7684\u8a0a\u606f\uff08\u8fd4\u56de AsyncStream\uff09</li> <li><code>unsubscribe(subscriberId:)</code> - \u53d6\u6d88\u8a02\u95b1\uff08\u652f\u63f4\u591a\u8a02\u95b1\u8005\uff09</li> <li><code>unsubscribeAll(chatroomId:)</code> - \u53d6\u6d88\u6307\u5b9a\u804a\u5929\u5ba4\u7684\u6240\u6709\u8a02\u95b1</li> <li><code>sendMessage(chatroomId:text:)</code> - \u767c\u9001\u8a0a\u606f\u5230\u6307\u5b9a\u804a\u5929\u5ba4</li> </ul> </li> <li>\u8a2d\u8a08: <ul> <li>\u4f7f\u7528 <code>actor</code> \u78ba\u4fdd\u7dda\u7a0b\u5b89\u5168</li> <li>\u4f7f\u7528 <code>AsyncStream</code> \u63d0\u4f9b\u8a0a\u606f\u6d41</li> <li>\u4f7f\u7528 <code>SportyStomp</code> \u6846\u67b6\u5be6\u4f5c STOMP \u5354\u8b70</li> <li>\u5be6\u4f5c\u6307\u6578\u9000\u907f\u91cd\u9023\u7b56\u7565</li> <li>\u652f\u63f4\u591a\u8a02\u95b1\u8005\u6a21\u5f0f</li> </ul> </li> <li>\u6e2c\u8a66: \u26a0\ufe0f \u5f85\u88dc\uff08Unit Test \u548c Integration Test\uff09</li> <li>\u5b8c\u6210\u5ea6: 95%</li> <li>Commit: <code>09e4ac3ef8</code></li> </ul>"},{"location":"14_Changelog/CHANGELOG/#bug","title":"\ud83d\udc1b Bug \u4fee\u5fa9","text":"<ul> <li>\u4fee\u5fa9 SportyStomp API \u8abf\u7528\u932f\u8aa4</li> <li>\u554f\u984c: <ul> <li><code>SportyStomp(host:)</code> \u53c3\u6578\u985e\u578b\u932f\u8aa4\uff08String vs URL\uff09</li> <li><code>subscribe</code>\u3001<code>unsubscribe</code>\u3001<code>send</code> \u65b9\u6cd5\u53c3\u6578\u540d\u7a31\u932f\u8aa4</li> </ul> </li> <li>\u89e3\u6c7a\u65b9\u6848: \u76f4\u63a5\u67e5\u770b SportyStomp \u6e90\u78bc\u78ba\u8a8d\u6b63\u78ba\u7684 API \u7c3d\u540d</li> <li>\u6a94\u6848: <code>MatchChat/Sources/MatchChat/Services/API/ChatWebSocketClient.swift</code></li> <li> <p>Commit: <code>09e4ac3ef8</code></p> </li> <li> <p>\u4fee\u5fa9\u4e26\u767c\u6578\u64da\u7af6\u722d\u8b66\u544a</p> </li> <li>\u554f\u984c: <ul> <li><code>nonisolated</code> delegate \u65b9\u6cd5\u4e2d\u6355\u7372\u975e <code>Sendable</code> \u985e\u578b</li> <li><code>Any?</code> \u985e\u578b\u5728 <code>@Sendable</code> \u9589\u5305\u4e2d\u5f15\u8d77\u8b66\u544a</li> </ul> </li> <li>\u89e3\u6c7a\u65b9\u6848: <ul> <li>\u79fb\u9664 <code>@Sendable</code> \u6a19\u8a18\uff08\u503c\u985e\u578b\u5728 Task \u4e2d\u5df2\u5b89\u5168\uff09</li> <li>\u5c07 <code>Any?</code> \u8f49\u63db\u70ba <code>String?</code></li> <li>\u70ba\u5916\u90e8\u5eab enum \u6dfb\u52a0 <code>@unchecked @retroactive Sendable</code></li> </ul> </li> <li>\u6a94\u6848: <code>MatchChat/Sources/MatchChat/Services/API/ChatWebSocketClient.swift</code></li> <li> <p>Commit: <code>09e4ac3ef8</code></p> </li> <li> <p>\u4fee\u5fa9 EmptyResponseDTO \u8655\u7406</p> </li> <li>\u554f\u984c: <code>NSNull?</code> \u7121\u6cd5\u6b63\u78ba\u89e3\u78bc</li> <li>\u89e3\u6c7a\u65b9\u6848: \u4f7f\u7528\u81ea\u5b9a\u7fa9 <code>EmptyData</code> struct \u8655\u7406 null \u56de\u61c9</li> <li>\u6a94\u6848: <code>MatchChat/Sources/MatchChat/Services/API/Chat/ChatAPI+Repository.swift</code></li> <li>Commit: <code>09e4ac3ef8</code></li> </ul>"},{"location":"14_Changelog/CHANGELOG/#_7","title":"\ud83d\udcdd \u6587\u4ef6\u66f4\u65b0","text":"<ul> <li>\u66f4\u65b0\u5be6\u4f5c\u72c0\u614b\u8ffd\u8e64\u8868\uff08implementation_status.md\uff09</li> <li>\u6a19\u8a18 TDD-022 \u70ba\u5df2\u5b8c\u6210\uff0895%\uff09</li> <li>\u66f4\u65b0\u5b8c\u6210\u5ea6\u7d71\u8a08\uff1a3/26 tickets (11.5%)</li> <li> <p>\u66f4\u65b0 Client \u5c64\u7d71\u8a08\uff1a3/3 \u5df2\u5b8c\u6210</p> </li> <li> <p>\u751f\u6210 TDD \u4e00\u81f4\u6027\u6aa2\u67e5\u5831\u544a</p> </li> <li>\u6a94\u6848: <code>13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check.md</code></li> <li> <p>\u5167\u5bb9: \u8a73\u7d30\u6aa2\u67e5\u5be6\u4f5c\u8207 TDD \u6587\u4ef6\u7684\u4e00\u81f4\u6027\uff0c\u8b58\u5225\u5b8c\u6210\u5ea6\u548c\u7f3a\u5931\u9805\u76ee</p> </li> <li> <p>\u751f\u6210\u5c0d\u8a71\u7d71\u6574\u6587\u6a94</p> </li> <li>\u6a94\u6848: <code>16_Cursor_Workflow/daily_summaries/2025-12-03.md</code></li> <li> <p>\u5167\u5bb9: \u7d71\u6574\u4eca\u5929\u8207 Cursor \u7684\u5c0d\u8a71\uff0c\u63d0\u53d6\u91cd\u8981\u6c7a\u7b56\u548c\u5b78\u7fd2\u8981\u9ede</p> </li> <li> <p>\u66f4\u65b0\u5de5\u4f5c\u65e5\u8a8c</p> </li> <li>\u6a94\u6848: <code>15_Daily_Logs/2025-12-03.md</code></li> <li> <p>\u5167\u5bb9: \u8a18\u9304\u4eca\u5929\u7684\u5de5\u4f5c\u5167\u5bb9\u3001\u9047\u5230\u7684\u554f\u984c\u548c\u89e3\u6c7a\u65b9\u6848</p> </li> <li> <p>\u90e8\u7f72 TDD \u6587\u6a94\u5230 GitHub Pages</p> </li> <li>\u7d50\u679c: \u2705 \u6210\u529f\u90e8\u7f72\u5230 gh-pages branch</li> <li>URL: https://hsinchunghan.github.io/LiveChatAndCommentOngoingFeature/</li> </ul>"},{"location":"14_Changelog/CHANGELOG/#_8","title":"\u26a0\ufe0f \u554f\u984c\u767c\u73fe","text":"<ul> <li>API Spec \u517c\u5bb9\u6027\u5f85\u9a57\u8b49</li> <li>\u554f\u984c: \u9700\u8981\u9a57\u8b49 <code>accept-version</code> \u683c\u5f0f\u3001<code>heart-beat</code> header\u3001\u8a0a\u606f\u683c\u5f0f</li> <li>\u5f71\u97ff: \u53ef\u80fd\u5f71\u97ff\u8207\u670d\u52d9\u7aef\u7684\u517c\u5bb9\u6027</li> <li>\u8a18\u9304: \u5df2\u5728 <code>ChatWebSocketClient.swift</code> \u4e2d\u6dfb\u52a0 TODO \u8a3b\u89e3</li> <li>\u5efa\u8b70: \u5728 Integration Test \u4e2d\u9a57\u8b49</li> </ul>"},{"location":"14_Changelog/CHANGELOG/#2025-12-02","title":"2025-12-02","text":""},{"location":"14_Changelog/CHANGELOG/#_9","title":"\u2705 \u5b8c\u6210","text":"<ul> <li>[TDD-021] \u5be6\u4f5c LiveChatClient\uff08HTTP\uff09[FOOTBALL-9182]</li> <li>\u6a94\u6848: <code>MatchChat/Sources/MatchChat/Services/API/LiveChatClient.swift</code></li> <li>\u8b8a\u66f4: \u65b0\u589e LiveChatClient struct\uff0c\u5305\u542b 4 \u500b HTTP API \u65b9\u6cd5<ul> <li><code>getBatchCount(refIdList:)</code> - \u6279\u91cf\u7372\u53d6\u804a\u5929\u5ba4\u6578\u91cf</li> <li><code>getChatroomInfo(refId:userId:)</code> - \u7372\u53d6\u804a\u5929\u5ba4\u8cc7\u8a0a</li> <li><code>getHistoricalMessages(chatroomId:messageNo:length:)</code> - \u7372\u53d6\u6b77\u53f2\u8a0a\u606f</li> <li><code>sendMessage(chatroomId:text:)</code> - \u767c\u9001\u8a0a\u606f</li> </ul> </li> <li>\u8a2d\u8a08: \u6574\u5408 <code>ChatAPI.ChatRepository</code>\uff0c\u652f\u63f4\u4f9d\u8cf4\u6ce8\u5165</li> <li>\u6e2c\u8a66: \u26a0\ufe0f \u5f85\u88dc\uff08Unit Test \u548c Integration Test\uff09</li> <li> <p>Commit: <code>198f313a0a</code></p> </li> <li> <p>[TDD-020] \u5be6\u4f5c PrematchCommentClient\uff08HTTP\uff09[FOOTBALL-9181]</p> </li> <li>\u6a94\u6848: <code>MatchChat/Sources/MatchChat/Services/API/PrematchCommentClient.swift</code></li> <li>\u8b8a\u66f4: \u65b0\u589e PrematchCommentClient struct\uff0c\u5305\u542b 5 \u500b HTTP API \u65b9\u6cd5<ul> <li><code>getCommentMeta(refId:)</code> - \u7372\u53d6\u8a55\u8ad6\u7d71\u8a08\u8cc7\u8a0a</li> <li><code>getComments(refId:mode:cursor:)</code> - \u7372\u53d6\u8a55\u8ad6\u5217\u8868</li> <li><code>publishComment(refId:content:parentId:)</code> - \u767c\u9001\u8a55\u8ad6\u6216\u56de\u8986</li> <li><code>toggleLike(commentId:)</code> - \u5207\u63db Like \u72c0\u614b</li> <li><code>getReplies(commentId:cursor:)</code> - \u7372\u53d6\u56de\u8986\u5217\u8868</li> </ul> </li> <li>\u8a2d\u8a08: \u6574\u5408 <code>PrematchCommentAPI.PrematchCommentRepository</code>\uff0c\u652f\u63f4\u4f9d\u8cf4\u6ce8\u5165</li> <li>\u6e2c\u8a66: \u26a0\ufe0f \u5f85\u88dc\uff08Unit Test \u548c Integration Test\uff09</li> <li>Commit: <code>b40e7fec84</code></li> </ul>"},{"location":"14_Changelog/CHANGELOG/#_10","title":"\ud83d\udcdd \u6587\u4ef6\u66f4\u65b0","text":"<ul> <li>\u66f4\u65b0\u5be6\u4f5c\u72c0\u614b\u8ffd\u8e64\u8868\uff08implementation_status.md\uff09</li> <li>\u6a19\u8a18 TDD-020 \u548c TDD-021 \u70ba\u5df2\u5b8c\u6210</li> <li>\u66f4\u65b0\u5b8c\u6210\u5ea6\u7d71\u8a08\uff1a2/26 tickets (7.7%)</li> <li>\u66f4\u65b0 Client \u5c64\u7d71\u8a08\uff1a2/3 \u5df2\u5b8c\u6210</li> </ul>"},{"location":"14_Changelog/CHANGELOG/#2025-01-xx","title":"2025-01-XX","text":""},{"location":"14_Changelog/CHANGELOG/#_11","title":"\ud83d\udcdd \u521d\u59cb\u5316","text":"<ul> <li>\u5efa\u7acb\u8b8a\u66f4\u65e5\u8a8c\u6587\u4ef6</li> <li>\u5efa\u7acb\u5be6\u4f5c\u72c0\u614b\u8ffd\u8e64\u6587\u4ef6</li> <li>\u5efa\u7acb\u5de5\u4f5c\u65e5\u8a8c\u6a21\u677f</li> </ul>"},{"location":"14_Changelog/CHANGELOG/#_12","title":"\u7bc4\u4f8b\u683c\u5f0f","text":""},{"location":"14_Changelog/CHANGELOG/#2025-01-xx_1","title":"2025-01-XX","text":""},{"location":"14_Changelog/CHANGELOG/#_13","title":"\u2705 \u5b8c\u6210","text":"<ul> <li>[TDD-001] \u5be6\u4f5c Comment Entity</li> <li>\u6a94\u6848: <code>MatchChat/Sources/Domain/Entities/Comment.swift</code></li> <li>\u8b8a\u66f4: \u65b0\u589e Comment entity\uff0c\u5305\u542b id, content, authorId, createdAt \u7b49\u6b04\u4f4d</li> <li>\u6e2c\u8a66: \u2705 \u901a\u904e\u6240\u6709\u55ae\u5143\u6e2c\u8a66</li> <li>\u9023\u7d50: Commit</li> </ul>"},{"location":"14_Changelog/CHANGELOG/#_14","title":"\ud83d\udea7 \u9032\u884c\u4e2d","text":"<ul> <li>[TDD-002] \u5be6\u4f5c CommentMeta Entity</li> <li>\u9032\u5ea6: 50%</li> <li>\u5f85\u5b8c\u6210: \u5be6\u4f5c Value Objects \u76f8\u95dc\u908f\u8f2f</li> <li>\u9810\u8a08\u5b8c\u6210: \u660e\u5929</li> </ul>"},{"location":"14_Changelog/CHANGELOG/#bug_1","title":"\ud83d\udc1b Bug \u4fee\u5fa9","text":"<ul> <li>\u4fee\u5fa9 Comment Entity \u7684 Equatable \u5be6\u4f5c\u554f\u984c</li> <li>\u554f\u984c: Equatable conformance \u6709\u8aa4</li> <li>\u89e3\u6c7a\u65b9\u6848: \u4f7f\u7528 @Equatable macro</li> <li>\u6a94\u6848: <code>MatchChat/Sources/Domain/Entities/Comment.swift</code></li> </ul>"},{"location":"14_Changelog/CHANGELOG/#_15","title":"\u267b\ufe0f \u91cd\u69cb","text":"<ul> <li>\u91cd\u69cb Domain Model \u7684\u547d\u540d\u7a7a\u9593\u7d50\u69cb</li> <li>\u8b8a\u66f4: \u7d71\u4e00\u4f7f\u7528 MatchChat namespace</li> <li>\u5f71\u97ff\u6a94\u6848: \u6240\u6709 Domain Model \u6a94\u6848</li> </ul>"},{"location":"14_Changelog/CHANGELOG/#_16","title":"\ud83d\udcdd \u6587\u4ef6\u66f4\u65b0","text":"<ul> <li>\u66f4\u65b0 TDD-001 \u7684\u5be6\u4f5c\u72c0\u614b</li> <li>\u66f4\u65b0 implementation_status.md</li> </ul>"},{"location":"14_Changelog/CHANGELOG/#_17","title":"\u26a0\ufe0f \u554f\u984c\u767c\u73fe","text":"<ul> <li>\u767c\u73fe API \u898f\u683c\u8207 TDD \u6709\u5dee\u7570</li> <li>\u554f\u984c: API \u56de\u50b3\u7684\u6b04\u4f4d\u540d\u7a31\u8207 TDD \u5b9a\u7fa9\u4e0d\u540c</li> <li>\u5f71\u97ff: \u9700\u8981\u8abf\u6574 DTO mapping</li> <li>\u8a18\u9304: \u5df2\u8a18\u9304\u5728 <code>11_Risks &amp; Questions/01_risks_questions.md</code></li> </ul>"},{"location":"14_Changelog/CHANGELOG/#_18","title":"\u7d71\u8a08","text":""},{"location":"14_Changelog/CHANGELOG/#_19","title":"\u7e3d\u8b8a\u66f4\u6578","text":"<ul> <li>\u5b8c\u6210: 3</li> <li>\u9032\u884c\u4e2d: 0</li> <li>Bug \u4fee\u5fa9: 3</li> <li>\u91cd\u69cb: 6</li> <li>\u6587\u4ef6\u66f4\u65b0: 5</li> <li>\u554f\u984c\u767c\u73fe: 1</li> </ul>"},{"location":"15_Daily_Logs/","title":"\u5de5\u4f5c\u65e5\u8a8c","text":"<p>\u672c\u76ee\u9304\u7528\u65bc\u8a18\u9304\u6bcf\u65e5\u7684\u958b\u767c\u5de5\u4f5c\uff0c\u5305\u542b\u8a08\u5283\u3001\u5b8c\u6210\u9805\u76ee\u3001\u9047\u5230\u7684\u554f\u984c\u7b49\u3002</p>"},{"location":"15_Daily_Logs/#_2","title":"\u6587\u4ef6\u8aaa\u660e","text":"<ul> <li>\u6bcf\u65e5\u4e00\u500b\u6587\u4ef6\uff0c\u547d\u540d\u683c\u5f0f\uff1a<code>YYYY-MM-DD.md</code></li> <li>\u4f8b\u5982\uff1a<code>2025-01-15.md</code></li> </ul>"},{"location":"15_Daily_Logs/#_3","title":"\u4f7f\u7528\u65b9\u5f0f","text":"<ol> <li>\u6bcf\u5929\u958b\u59cb\u6642\uff1a\u5efa\u7acb\u7576\u5929\u7684\u5de5\u4f5c\u65e5\u8a8c\u6587\u4ef6\uff0c\u5217\u51fa\u4eca\u65e5\u8a08\u5283</li> <li>\u5be6\u4f5c\u904e\u7a0b\u4e2d\uff1a\u96a8\u6642\u8a18\u9304\u9032\u5ea6\u3001\u554f\u984c\u3001\u5b78\u7fd2\u5fc3\u5f97</li> <li>\u6bcf\u5929\u7d50\u675f\u6642\uff1a\u5b8c\u6210\u7576\u5929\u7684\u5de5\u4f5c\u65e5\u8a8c\uff0c\u4e26\u751f\u6210\u660e\u5929\u7684\u8a08\u5283</li> </ol>"},{"location":"15_Daily_Logs/#cursor","title":"\u8207 Cursor \u5354\u4f5c","text":""},{"location":"15_Daily_Logs/#_4","title":"\u6bcf\u5929\u958b\u59cb\u6642","text":"<pre><code>\u4eca\u5929\u8981\u5be6\u4f5c TDD-001 \u548c TDD-002\uff0c\u8acb\uff1a\n1. \u8b80\u53d6\u76f8\u95dc\u7684 TDD \u6587\u4ef6\n2. \u6aa2\u67e5\u73fe\u6709\u7684 codebase \u7d50\u69cb\n3. \u63d0\u4f9b\u5be6\u4f5c\u5efa\u8b70\u548c\u6ce8\u610f\u4e8b\u9805\n4. \u751f\u6210\u5de5\u4f5c\u65e5\u8a8c\u6a21\u677f\n</code></pre>"},{"location":"15_Daily_Logs/#_5","title":"\u6bcf\u5929\u7d50\u675f\u6642","text":"<pre><code>\u8acb\u5e6b\u6211\uff1a\n1. \u6839\u64da\u4eca\u5929\u7684\u5be6\u4f5c\u66f4\u65b0\u5de5\u4f5c\u65e5\u8a8c\n2. \u66f4\u65b0 implementation_status.md\n3. \u66f4\u65b0 CHANGELOG.md\n4. \u6aa2\u67e5 TDD \u8207\u5be6\u4f5c\u7684\u4e00\u81f4\u6027\n5. \u751f\u6210\u660e\u5929\u7684\u8a08\u5283\u5efa\u8b70\n</code></pre>"},{"location":"15_Daily_Logs/#_6","title":"\u5de5\u4f5c\u65e5\u8a8c\u6a21\u677f","text":"<p>\u6bcf\u500b\u5de5\u4f5c\u65e5\u8a8c\u6587\u4ef6\u61c9\u5305\u542b\u4ee5\u4e0b\u90e8\u5206\uff1a</p> <ol> <li>\ud83d\udccb \u4eca\u65e5\u8a08\u5283\uff1a\u5217\u51fa\u4eca\u5929\u8981\u5b8c\u6210\u7684\u5de5\u4f5c</li> <li>\u2705 \u5b8c\u6210\u9805\u76ee\uff1a\u8a18\u9304\u5b8c\u6210\u7684\u5de5\u4f5c</li> <li>\ud83d\udea7 \u9032\u884c\u4e2d\u9805\u76ee\uff1a\u8a18\u9304\u9032\u884c\u4e2d\u7684\u5de5\u4f5c</li> <li>\ud83d\udc1b \u9047\u5230\u7684\u554f\u984c\uff1a\u8a18\u9304\u9047\u5230\u7684\u554f\u984c\u548c\u89e3\u6c7a\u65b9\u6848</li> <li>\ud83e\udd16 \u8207 Cursor \u7684\u5c0d\u8a71\u7d71\u6574\uff1a\u8a18\u9304\u91cd\u8981\u6c7a\u7b56\u3001\u5b78\u7fd2\u8981\u9ede\u3001\u554f\u984c\u89e3\u6c7a\u8a18\u9304\uff08\u5fc5\u9808\u5305\u542b User Prompt \u6b04\u4f4d\uff09</li> <li>\ud83d\udca1 \u5b78\u7fd2\u8207\u53cd\u601d\uff1a\u8a18\u9304\u5b78\u7fd2\u5fc3\u5f97\u548c\u53cd\u601d</li> <li>\ud83d\udcca \u6642\u9593\u7d71\u8a08\uff1a\u8a18\u9304\u6642\u9593\u5206\u914d</li> <li>\ud83d\udd04 \u660e\u65e5\u8a08\u5283\uff1a\u5217\u51fa\u660e\u5929\u7684\u5de5\u4f5c\u8a08\u5283</li> <li>\ud83d\udcc4 \u76f8\u95dc\u6587\u4ef6\u6539\u52d5\u8a18\u9304\uff1a\u8a18\u9304 Git commits \u548c\u6587\u4ef6\u7d71\u8a08</li> </ol>"},{"location":"15_Daily_Logs/#_7","title":"\u683c\u5f0f\u898f\u7bc4","text":"<p>\u91cd\u8981: \u6240\u6709\u5de5\u4f5c\u65e5\u8a8c\u5fc5\u9808\u9075\u5faa\u6a19\u6e96\u683c\u5f0f\u898f\u7bc4\uff0c\u8acb\u53c3\u8003\uff1a</p> <ul> <li>\u683c\u5f0f\u898f\u5247 - \u5b8c\u6574\u7684\u683c\u5f0f\u898f\u7bc4\u548c\u7bc4\u4f8b</li> <li>\u6a21\u677f\u6587\u4ef6 - \u5de5\u4f5c\u65e5\u8a8c\u6a21\u677f</li> <li>\u5de5\u4f5c\u6d41\u7a0b - Git \u5206\u652f\u5de5\u4f5c\u6d41\u7a0b</li> </ul>"},{"location":"15_Daily_Logs/#_8","title":"\u95dc\u9375\u683c\u5f0f\u8981\u6c42","text":"<ol> <li>\u5b8c\u6210\u9805\u76ee\u683c\u5f0f: \u4f7f\u7528 <code>### TDD-XXX \u2014 [\u6a19\u984c] [JIRA-ID]</code> \u683c\u5f0f\uff0c\u9805\u76ee\u4e4b\u9593\u7528 <code>---</code> \u5206\u9694</li> <li>User Prompt \u6b04\u4f4d: \u5728\u300c\ud83e\udd16 \u8207 Cursor \u7684\u5c0d\u8a71\u7d71\u6574\u300d\u4e2d\uff0c\u6bcf\u500b\u6c7a\u7b56\u548c\u554f\u984c\u89e3\u6c7a\u8a18\u9304\u90fd\u5fc5\u9808\u5305\u542b <code>User Prompt</code> \u6b04\u4f4d</li> <li>\u6642\u9593\u683c\u5f0f: \u4f7f\u7528 <code>~X \u5206\u9418</code> \u6216 <code>~X \u5c0f\u6642</code></li> <li>\u6a94\u6848\u8def\u5f91: \u4f7f\u7528\u53cd\u5f15\u865f\u5305\u88f9\uff0c\u4f8b\u5982 <code>`\u8def\u5f91/\u6a94\u6848\u540d.swift`</code></li> </ol>"},{"location":"15_Daily_Logs/2025-12-01/","title":"\u5de5\u4f5c\u65e5\u8a8c - 2025-12-01","text":""},{"location":"15_Daily_Logs/2025-12-01/#_1","title":"\ud83d\udccb \u4eca\u65e5\u8a08\u5283","text":"<ul> <li>[x] TDD-001: \u5be6\u4f5c Comment Entity [FOOTBALL-9171]</li> <li>[x] TDD-002: \u5be6\u4f5c CommentMeta Entity [FOOTBALL-9172]</li> <li>[x] TDD-003: \u5be6\u4f5c UserInfo Entity [FOOTBALL-9173]</li> <li>[x] TDD-004: \u5be6\u4f5c Message Entity [FOOTBALL-9174]</li> <li>[x] TDD-005: \u5be6\u4f5c ChatroomInfo Entity [FOOTBALL-9175]</li> <li>[x] TDD-006: \u5be6\u4f5c Value Objects [FOOTBALL-9176]</li> <li>[x] TDD-010: \u5be6\u4f5c PrematchCommentAPI [FOOTBALL-9178]</li> <li>[x] TDD-011: \u5be6\u4f5c ChatAPI [FOOTBALL-9179]</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#_2","title":"\u2705 \u5b8c\u6210\u9805\u76ee","text":""},{"location":"15_Daily_Logs/2025-12-01/#tdd-001-comment-entity-football-9171","title":"TDD-001 \u2014 \u5be6\u4f5c Comment Entity [FOOTBALL-9171]","text":"<ul> <li>\u6642\u9593: ~30 \u5206\u9418</li> <li>\u6a94\u6848: <code>MatchChat/Sources/MatchChat/Models/PrematchComment/PrematchComment.swift</code></li> <li>\u6e2c\u8a66: \u2705 \u901a\u904e\uff08end-to-end API tests\uff09</li> <li>\u5099\u8a3b: \u5be6\u4f5c <code>PrematchComment.Comment</code> struct\uff0c\u7b26\u5408 TDD \u898f\u7bc4</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#tdd-002-commentmeta-entity-football-9172","title":"TDD-002 \u2014 \u5be6\u4f5c CommentMeta Entity [FOOTBALL-9172]","text":"<ul> <li>\u6642\u9593: ~15 \u5206\u9418</li> <li>\u6a94\u6848: <code>MatchChat/Sources/MatchChat/Models/PrematchComment/PrematchComment.swift</code></li> <li>\u6e2c\u8a66: \u2705 \u901a\u904e</li> <li>\u5099\u8a3b: \u8207 TDD-001 \u4e00\u8d77\u5be6\u4f5c</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#tdd-003-userinfo-entity-football-9173","title":"TDD-003 \u2014 \u5be6\u4f5c UserInfo Entity [FOOTBALL-9173]","text":"<ul> <li>\u6642\u9593: ~15 \u5206\u9418</li> <li>\u6a94\u6848: </li> <li><code>MatchChat/Sources/MatchChat/Models/PrematchComment/PrematchComment.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Models/LiveChat/LiveChat.swift</code></li> <li>\u6e2c\u8a66: \u2705 \u901a\u904e</li> <li>\u5099\u8a3b: PrematchComment \u548c LiveChat \u5171\u7528 UserInfo</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#tdd-004-message-entity-football-9174","title":"TDD-004 \u2014 \u5be6\u4f5c Message Entity [FOOTBALL-9174]","text":"<ul> <li>\u6642\u9593: ~20 \u5206\u9418</li> <li>\u6a94\u6848: <code>MatchChat/Sources/MatchChat/Models/LiveChat/LiveChat.swift</code></li> <li>\u6e2c\u8a66: \u2705 \u901a\u904e</li> <li>\u5099\u8a3b: \u5305\u542b MessageType enum</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#tdd-005-chatroominfo-entity-football-9175","title":"TDD-005 \u2014 \u5be6\u4f5c ChatroomInfo Entity [FOOTBALL-9175]","text":"<ul> <li>\u6642\u9593: ~20 \u5206\u9418</li> <li>\u6a94\u6848: <code>MatchChat/Sources/MatchChat/Models/LiveChat/LiveChat.swift</code></li> <li>\u6e2c\u8a66: \u2705 \u901a\u904e</li> <li>\u5099\u8a3b: \u8207 TDD-004 \u4e00\u8d77\u5be6\u4f5c</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#tdd-006-value-objects-football-9176","title":"TDD-006 \u2014 \u5be6\u4f5c Value Objects [FOOTBALL-9176]","text":"<ul> <li>\u6642\u9593: ~15 \u5206\u9418</li> <li>\u6a94\u6848: </li> <li><code>MatchChat/Sources/MatchChat/Models/PrematchComment/PrematchComment.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Models/LiveChat/LiveChat.swift</code></li> <li>\u6e2c\u8a66: \u2705 \u901a\u904e</li> <li>\u5099\u8a3b: SortMode\u3001Cursor\u3001PagingInfo\uff08PrematchComment \u548c LiveChat \u5171\u7528\uff09</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#tdd-010-prematchcommentapi-football-9178","title":"TDD-010 \u2014 \u5be6\u4f5c PrematchCommentAPI [FOOTBALL-9178]","text":"<ul> <li>\u6642\u9593: ~2 \u5c0f\u6642</li> <li>\u6a94\u6848: <code>MatchChat/Sources/MatchChat/Services/API/PrematchComment/</code></li> <li>\u6e2c\u8a66: \u2705 \u901a\u904e\uff08end-to-end API tests\uff09</li> <li>\u5099\u8a3b: \u5305\u542b 5 \u500b\u6a94\u6848\uff08Endpoint\u3001Models\u3001RepositoryProtocol\u3001Repository\uff09\uff0c\u4f7f\u7528\u9632\u79a6\u6027\u89e3\u78bc</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#tdd-011-chatapi-football-9179","title":"TDD-011 \u2014 \u5be6\u4f5c ChatAPI [FOOTBALL-9179]","text":"<ul> <li>\u6642\u9593: ~2.5 \u5c0f\u6642</li> <li>\u6a94\u6848: <code>MatchChat/Sources/MatchChat/Services/API/Chat/</code></li> <li>\u6e2c\u8a66: \u2705 \u901a\u904e\uff08end-to-end API tests\uff09</li> <li>\u5099\u8a3b: \u5305\u542b 6 \u500b\u6a94\u6848\uff08Endpoint\u3001Models\u3001RepositoryProtocol\u3001Repository\u3001WebSocket\uff09\uff0c\u4f7f\u7528\u9632\u79a6\u6027\u89e3\u78bc</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#matchchat-swift-package","title":"\u65b0\u589e MatchChat Swift Package","text":"<ul> <li>\u6642\u9593: ~30 \u5206\u9418</li> <li>\u6a94\u6848: <code>MatchChat/Package.swift</code></li> <li>\u6e2c\u8a66: \u2705 \u901a\u904e</li> <li>\u5099\u8a3b: \u53c3\u8003 PersonalPage package \u5efa\u7acb\uff0c\u5305\u542b\u6240\u6709\u5fc5\u8981 dependencies</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#end-to-end-api-tests","title":"\u65b0\u589e End-to-End API Tests","text":"<ul> <li>\u6642\u9593: ~1.5 \u5c0f\u6642</li> <li>\u6a94\u6848: <code>MatchChat/Tests/MatchChatTests/</code></li> <li>\u6e2c\u8a66: \u2705 \u901a\u904e</li> <li>\u5099\u8a3b: \u5305\u542b PrematchCommentAPITests\u3001ChatAPITests\u3001ChatAPIWebSocketTests\uff0c\u5171 717 \u884c\u6e2c\u8a66\u7a0b\u5f0f\u78bc</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#tdd","title":"TDD \u4e00\u81f4\u6027\u6aa2\u67e5","text":"<ul> <li>\u6642\u9593: ~30 \u5206\u9418</li> <li>\u6a94\u6848: <code>13_Implementation_Status/consistency_checks/2025-12-01.md</code></li> <li>\u6e2c\u8a66: \u2705 \u901a\u904e\uff08100% \u7b26\u5408 TDD \u898f\u7bc4\uff09</li> <li>\u5099\u8a3b: \u6aa2\u67e5\u6240\u6709 8 \u500b\u5df2\u5be6\u4f5c\u7684 tickets</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#_3","title":"\ud83d\udea7 \u9032\u884c\u4e2d\u9805\u76ee","text":"<p>\u7121</p>"},{"location":"15_Daily_Logs/2025-12-01/#_4","title":"\ud83d\udc1b \u9047\u5230\u7684\u554f\u984c","text":""},{"location":"15_Daily_Logs/2025-12-01/#1-chatroomtype-10","title":"\u554f\u984c 1: <code>chatRoomType: 10</code> \u7684\u610f\u7fa9\u4e0d\u6e05\u695a","text":"<ul> <li>\u554f\u984c: <code>chatRoomType: 10, // \u9810\u8a2d\u70ba GROUP</code> \u7684\u610f\u7fa9\u4e0d\u6e05\u695a</li> <li>\u539f\u56e0: \u9700\u8981\u78ba\u8a8d\u9019\u500b\u9810\u8a2d\u503c\u7684\u696d\u52d9\u908f\u8f2f</li> <li>\u89e3\u6c7a\u65b9\u6848: Cursor \u89e3\u91cb\u9019\u662f\u7576 batch count API \u6c92\u6709\u63d0\u4f9b <code>chatRoomType</code> \u6642\u7684\u9810\u8a2d\u503c\uff0c<code>10</code> \u4ee3\u8868 GROUP \u985e\u578b</li> <li>\u6642\u9593: ~5 \u5206\u9418</li> <li>\u6a94\u6848: <code>MatchChat/Sources/MatchChat/Models/LiveChat/LiveChat+ChatAPI.swift</code></li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#2-client-side-response","title":"\u554f\u984c 2: \u5982\u4f55\u4fdd\u8b77 client side \u4e0d\u53d7\u5f8c\u7aef response \u4e0d\u4e00\u81f4\u5f71\u97ff","text":"<ul> <li>\u554f\u984c: \u5982\u4f55\u4fdd\u8b77 client side \u4e0d\u53d7\u5f8c\u7aef response \u4e0d\u4e00\u81f4\u5f71\u97ff</li> <li>\u539f\u56e0: \u5f8c\u7aef\u5be6\u969b response \u53ef\u80fd\u8207\u6587\u4ef6\u5b9a\u7fa9\u4e0d\u540c</li> <li>\u89e3\u6c7a\u65b9\u6848: Cursor \u5efa\u8b70\u4f7f\u7528\u9632\u79a6\u6027\u89e3\u78bc\u7b56\u7565\uff1a</li> <li>\u6240\u6709 DTO \u6b04\u4f4d\u4f7f\u7528 <code>decodeIfPresent</code> \u4e26\u63d0\u4f9b\u9810\u8a2d\u503c</li> <li>\u8907\u96dc\u5d4c\u5957\u7269\u4ef6\u63d0\u4f9b <code>static var dummy</code> \u4f5c\u70ba\u9810\u8a2d\u503c</li> <li>Enum \u8655\u7406\u7121\u6548\u503c\u6642\u4f7f\u7528\u9810\u8a2d case</li> <li>\u6642\u9593: ~15 \u5206\u9418</li> <li>\u6a94\u6848: </li> <li><code>MatchChat/Sources/MatchChat/Services/API/Chat/ChatAPI+Models.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/API/PrematchComment/PrematchCommentAPI+Models.swift</code></li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#cursor","title":"\ud83e\udd16 \u8207 Cursor \u7684\u5c0d\u8a71\u7d71\u6574","text":""},{"location":"15_Daily_Logs/2025-12-01/#_5","title":"\u91cd\u8981\u5c0d\u8a71\u6458\u8981","text":""},{"location":"15_Daily_Logs/2025-12-01/#1-matchchat-swift-package","title":"1. \u5275\u5efa MatchChat Swift Package","text":"<ul> <li>\u6642\u9593: \u65e9\u4e0a</li> <li>\u5167\u5bb9: \u53c3\u8003 PersonalPage package \u5275\u5efa\u65b0\u7684 Swift Package\uff0c\u5206\u6790 TDD \u6587\u4ef6\u6c7a\u5b9a dependencies</li> <li>\u7d50\u679c: \u6210\u529f\u5275\u5efa MatchChat package\uff0c\u5305\u542b\u6240\u6709\u5fc5\u8981\u7684 dependencies\uff08TCA\u3001Networking\u3001Models\u3001UI components \u7b49\uff09</li> <li>\u6c7a\u7b56: \u4f7f\u7528 <code>enum</code> \u4f5c\u70ba namespace\uff0c\u9075\u5faa PersonalPage \u7684\u67b6\u69cb\u6a21\u5f0f</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#2-domain-models","title":"2. \u5be6\u4f5c Domain Models","text":"<ul> <li>\u6642\u9593: \u4e0a\u5348</li> <li>\u5167\u5bb9: \u5be6\u4f5c TDD-001~006\uff0c\u5305\u62ec Comment\u3001CommentMeta\u3001UserInfo\u3001Message\u3001ChatroomInfo \u7b49 entities \u548c value objects</li> <li>\u7d50\u679c: \u6240\u6709 Domain Models \u7b26\u5408 TDD \u898f\u7bc4\uff0c\u5be6\u4f5c <code>Identifiable</code>\u3001<code>Equatable</code>\u3001<code>Sendable</code> protocols</li> <li>\u6c7a\u7b56: </li> <li>UserInfo\u3001SortMode\u3001Cursor\u3001PagingInfo \u5728 PrematchComment \u548c LiveChat \u4e2d\u91cd\u8907\u5b9a\u7fa9\uff08\u7b26\u5408 TDD\uff0c\u5f8c\u7e8c\u53ef\u8003\u616e\u79fb\u5230 Shared module\uff09</li> <li>\u4f7f\u7528 <code>id: String</code> \u4f5c\u70ba Identifiable \u7684 identifier</li> <li>Equatable \u900f\u904e <code>id</code> \u6bd4\u8f03</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#3-api-layer","title":"3. \u5be6\u4f5c API Layer","text":"<ul> <li>\u6642\u9593: \u4e0b\u5348</li> <li>\u5167\u5bb9: \u5be6\u4f5c TDD-010 \u548c TDD-011\uff0c\u5305\u62ec PrematchCommentAPI \u548c ChatAPI \u7684\u5b8c\u6574\u5b9a\u7fa9</li> <li>\u7d50\u679c: \u6210\u529f\u5be6\u4f5c\u6240\u6709 API endpoints\u3001DTOs\u3001Repository protocols \u548c\u5be6\u4f5c</li> <li>\u6c7a\u7b56: </li> <li>\u4f7f\u7528 <code>actor</code> \u5be6\u4f5c Repository\uff08\u7b26\u5408 PersonalPage \u98a8\u683c\uff09</li> <li>\u4f7f\u7528 extension \u5206\u96e2\u95dc\u6ce8\u9ede\uff08Endpoint\u3001Models\u3001RepositoryProtocol\u3001Repository\uff09</li> <li>\u6240\u6709 DTOs \u4f7f\u7528 <code>decodeIfPresent</code> \u9032\u884c\u9632\u79a6\u6027\u89e3\u78bc</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#4","title":"4. \u9632\u79a6\u6027\u89e3\u78bc\u7b56\u7565\u8a0e\u8ad6","text":"<ul> <li>\u6642\u9593: \u4e0b\u5348</li> <li>\u5167\u5bb9: \u8a0e\u8ad6\u5982\u4f55\u4fdd\u8b77 client side \u4e0d\u53d7\u5f8c\u7aef response \u4e0d\u4e00\u81f4\u5f71\u97ff</li> <li>\u7d50\u679c: \u5be6\u4f5c\u5b8c\u6574\u7684\u9632\u79a6\u6027\u89e3\u78bc\u7b56\u7565</li> <li>\u5b78\u7fd2: </li> <li>\u6240\u6709 DTO \u6b04\u4f4d\u4f7f\u7528 <code>decodeIfPresent</code> \u4e26\u63d0\u4f9b\u5408\u7406\u9810\u8a2d\u503c</li> <li>\u8907\u96dc\u5d4c\u5957\u7269\u4ef6\u63d0\u4f9b <code>static var dummy</code> \u4f5c\u70ba\u9810\u8a2d\u503c</li> <li>\u78ba\u4fdd\u5373\u4f7f\u5f8c\u7aef\u56de\u50b3\u4e0d\u5b8c\u6574\u8cc7\u6599\uff0capp \u4e5f\u4e0d\u6703 crash</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#5-end-to-end-api-tests","title":"5. End-to-End API Tests","text":"<ul> <li>\u6642\u9593: \u4e0b\u5348</li> <li>\u5167\u5bb9: \u5275\u5efa end-to-end API tests\uff0c\u9a57\u8b49 API request \u8a2d\u5b9a\u548c response decoding</li> <li>\u7d50\u679c: \u6210\u529f\u5275\u5efa 3 \u500b\u6e2c\u8a66\u6a94\u6848\uff0c\u5171 717 \u884c\u6e2c\u8a66\u7a0b\u5f0f\u78bc</li> <li>\u5b78\u7fd2: </li> <li>\u6e2c\u8a66\u547d\u540d\u4f7f\u7528 <code>test_{function_name}_{case}</code> \u683c\u5f0f</li> <li>\u6e2c\u8a66\u8986\u84cb endpoint \u914d\u7f6e\u548c\u9632\u79a6\u6027\u89e3\u78bc\u5834\u666f</li> <li>\u4f7f\u7528 Swift Testing framework</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#6-tdd","title":"6. TDD \u4e00\u81f4\u6027\u6aa2\u67e5","text":"<ul> <li>\u6642\u9593: \u508d\u665a</li> <li>\u5167\u5bb9: \u57f7\u884c TDD \u4e00\u81f4\u6027\u6aa2\u67e5\uff0c\u9a57\u8b49\u6240\u6709\u5be6\u4f5c\u662f\u5426\u7b26\u5408 TDD \u898f\u7bc4</li> <li>\u7d50\u679c: 100% \u7b26\u5408 TDD \u898f\u7bc4\uff088/8 tickets\uff09</li> <li>\u5b78\u7fd2: \u5efa\u7acb\u7cfb\u7d71\u5316\u7684\u6aa2\u67e5\u6d41\u7a0b\uff0c\u78ba\u4fdd\u5be6\u4f5c\u54c1\u8cea</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#_6","title":"\u91cd\u8981\u6c7a\u7b56","text":"<ol> <li>\u67b6\u69cb\u6c7a\u7b56: \u4f7f\u7528 <code>enum</code> \u4f5c\u70ba namespace\uff0c\u9075\u5faa PersonalPage \u7684\u67b6\u69cb\u6a21\u5f0f</li> <li>\u5be6\u4f5c\u6c7a\u7b56: Domain Models \u4e2d UserInfo\u3001SortMode\u3001Cursor\u3001PagingInfo \u5728 PrematchComment \u548c LiveChat \u4e2d\u91cd\u8907\u5b9a\u7fa9\uff08\u7b26\u5408 TDD\uff0c\u5f8c\u7e8c\u53ef\u8003\u616e\u79fb\u5230 Shared module\uff09</li> <li>\u6280\u8853\u9078\u578b: \u4f7f\u7528 <code>actor</code> \u5be6\u4f5c Repository\uff0c\u78ba\u4fdd thread-safety</li> <li>\u9632\u79a6\u6027\u7b56\u7565: \u6240\u6709 DTOs \u4f7f\u7528 <code>decodeIfPresent</code> \u4e26\u63d0\u4f9b\u9810\u8a2d\u503c\uff0c\u4fdd\u8b77 client side \u4e0d\u53d7\u5f8c\u7aef response \u4e0d\u4e00\u81f4\u5f71\u97ff</li> </ol>"},{"location":"15_Daily_Logs/2025-12-01/#_7","title":"\u5b78\u7fd2\u8981\u9ede","text":""},{"location":"15_Daily_Logs/2025-12-01/#_8","title":"\u9632\u79a6\u6027\u89e3\u78bc\u6700\u4f73\u5be6\u8e10","text":"<ul> <li>\u63cf\u8ff0: \u4fdd\u8b77 client side \u4e0d\u53d7\u5f8c\u7aef response \u4e0d\u4e00\u81f4\u5f71\u97ff</li> <li>\u8981\u9ede: </li> <li>\u6240\u6709 DTO \u6b04\u4f4d\u4f7f\u7528 <code>decodeIfPresent</code> \u4e26\u63d0\u4f9b\u5408\u7406\u9810\u8a2d\u503c</li> <li>\u8907\u96dc\u5d4c\u5957\u7269\u4ef6\u63d0\u4f9b <code>static var dummy</code> \u4f5c\u70ba\u9810\u8a2d\u503c</li> <li>\u78ba\u4fdd\u5373\u4f7f\u5f8c\u7aef\u56de\u50b3\u4e0d\u5b8c\u6574\u8cc7\u6599\uff0capp \u4e5f\u4e0d\u6703 crash</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#swift-package","title":"Swift Package \u5275\u5efa\u6d41\u7a0b","text":"<ul> <li>\u63cf\u8ff0: \u5f9e TDD \u6587\u4ef6\u5206\u6790\u4e26\u6c7a\u5b9a package dependencies</li> <li>\u8981\u9ede: </li> <li>\u53c3\u8003\u73fe\u6709 package\uff08PersonalPage\uff09\u7684\u7d50\u69cb</li> <li>\u5206\u6790 TDD \u6587\u4ef6\u6c7a\u5b9a dependencies</li> <li>\u4f7f\u7528 <code>enum</code> \u4f5c\u70ba namespace</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#end-to-end-api-tests_1","title":"End-to-End API Tests","text":"<ul> <li>\u63cf\u8ff0: \u6e2c\u8a66\u547d\u540d\u683c\u5f0f\u548c\u6e2c\u8a66\u8986\u84cb\u7b56\u7565</li> <li>\u8981\u9ede: </li> <li>\u6e2c\u8a66\u547d\u540d\u4f7f\u7528 <code>test_{function_name}_{case}</code> \u683c\u5f0f</li> <li>\u6e2c\u8a66\u8986\u84cb endpoint \u914d\u7f6e\u548c\u9632\u79a6\u6027\u89e3\u78bc\u5834\u666f</li> <li>\u4f7f\u7528 Swift Testing framework</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#tdd_1","title":"TDD \u4e00\u81f4\u6027\u6aa2\u67e5","text":"<ul> <li>\u63cf\u8ff0: \u5efa\u7acb\u7cfb\u7d71\u5316\u7684\u6aa2\u67e5\u6d41\u7a0b</li> <li>\u8981\u9ede: </li> <li>\u6aa2\u67e5\u547d\u540d\u898f\u7bc4\u3001\u6a94\u6848\u7d50\u69cb\u3001\u529f\u80fd\u5b8c\u6574\u6027</li> <li>\u78ba\u4fdd\u5be6\u4f5c\u7b26\u5408 TDD \u898f\u7bc4</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#_9","title":"\u6539\u9032\u5efa\u8b70","text":"<ol> <li>Unit Test \u8986\u84cb\u7387: \u5efa\u8b70\u5f8c\u7e8c\u88dc\u5145 Domain Model \u7684\u55ae\u5143\u6e2c\u8a66\uff0c\u78ba\u4fdd\u8986\u84cb\u7387 \u2265 80%</li> <li>Shared Module: \u8003\u616e\u5c07 UserInfo\u3001SortMode\u3001Cursor\u3001PagingInfo \u79fb\u5230 Shared module\uff0c\u907f\u514d\u91cd\u8907\u5b9a\u7fa9</li> <li>\u6587\u6a94\u5316: \u5c07\u9632\u79a6\u6027\u89e3\u78bc\u7b56\u7565\u548c\u6700\u4f73\u5be6\u8e10\u6574\u7406\u6210\u53ef\u91cd\u7528\u7684 prompt\uff08\u5df2\u5b8c\u6210\uff1a<code>dto-layer-prompt.md</code>\uff09</li> </ol>"},{"location":"15_Daily_Logs/2025-12-01/#_10","title":"\ud83d\udca1 \u5b78\u7fd2\u8207\u53cd\u601d","text":""},{"location":"15_Daily_Logs/2025-12-01/#_11","title":"\u767c\u73fe\u6216\u5b78\u7fd2\u5230\u7684\u65b0\u77e5\u8b58","text":"<ol> <li>\u9632\u79a6\u6027\u89e3\u78bc\u7b56\u7565: \u5b78\u7fd2\u5230\u5982\u4f55\u4fdd\u8b77 client side \u4e0d\u53d7\u5f8c\u7aef response \u4e0d\u4e00\u81f4\u5f71\u97ff\uff0c\u4f7f\u7528 <code>decodeIfPresent</code> \u548c\u9810\u8a2d\u503c</li> <li>Swift Package \u5275\u5efa: \u5b78\u7fd2\u5230\u5982\u4f55\u5f9e TDD \u6587\u4ef6\u5206\u6790\u4e26\u6c7a\u5b9a package dependencies</li> <li>End-to-End API Tests: \u5b78\u7fd2\u5230\u5982\u4f55\u5efa\u7acb\u5b8c\u6574\u7684 API \u6e2c\u8a66\uff0c\u8986\u84cb endpoint \u914d\u7f6e\u548c\u9632\u79a6\u6027\u89e3\u78bc\u5834\u666f</li> </ol>"},{"location":"15_Daily_Logs/2025-12-01/#_12","title":"\u53ef\u4ee5\u6539\u9032\u7684\u5730\u65b9","text":"<ol> <li>\u6e2c\u8a66\u8986\u84cb\u7387: Domain Models \u76ee\u524d\u6c92\u6709\u55ae\u5143\u6e2c\u8a66\uff0c\u5efa\u8b70\u5f8c\u7e8c\u88dc\u5145</li> <li>\u6587\u6a94\u5316: \u5df2\u5c07\u6700\u4f73\u5be6\u8e10\u6574\u7406\u6210\u53ef\u91cd\u7528\u7684 prompt\uff0c\u65b9\u4fbf\u5f8c\u7e8c\u4f7f\u7528</li> </ol>"},{"location":"15_Daily_Logs/2025-12-01/#_13","title":"\u4e0b\u6b21\u53ef\u4ee5\u505a\u5f97\u66f4\u597d\u7684\u5730\u65b9","text":"<ol> <li>\u63d0\u524d\u898f\u5283: \u5728\u5be6\u4f5c\u524d\u5148\u78ba\u8a8d\u6240\u6709 dependencies \u548c\u67b6\u69cb\u6c7a\u7b56</li> <li>\u6e2c\u8a66\u9a45\u52d5: \u53ef\u4ee5\u8003\u616e\u5148\u5beb\u6e2c\u8a66\u518d\u5be6\u4f5c\uff08TDD \u65b9\u5f0f\uff09</li> </ol>"},{"location":"15_Daily_Logs/2025-12-01/#cursor_1","title":"\u8207 Cursor \u5354\u4f5c\u7684\u6539\u9032\u7a7a\u9593","text":"<ol> <li>\u5c0d\u8a71\u8a18\u9304: \u5df2\u5efa\u7acb\u5de5\u4f5c\u65e5\u8a8c\u6a21\u677f\uff0c\u65b9\u4fbf\u8a18\u9304\u91cd\u8981\u5c0d\u8a71</li> <li>\u4e00\u81f4\u6027\u6aa2\u67e5: \u5df2\u5efa\u7acb\u7cfb\u7d71\u5316\u7684 TDD \u4e00\u81f4\u6027\u6aa2\u67e5\u6d41\u7a0b</li> <li>\u6587\u6a94\u5316: \u5df2\u5c07\u6700\u4f73\u5be6\u8e10\u6574\u7406\u6210\u53ef\u91cd\u7528\u7684 prompt</li> </ol>"},{"location":"15_Daily_Logs/2025-12-01/#_14","title":"\ud83d\udcca \u6642\u9593\u7d71\u8a08","text":""},{"location":"15_Daily_Logs/2025-12-01/#_15","title":"\u958b\u767c\u6642\u9593","text":"<ul> <li>\u7e3d\u8a08: ~7 \u5c0f\u6642</li> <li>\u7d30\u9805: </li> <li>Domain Models: ~1.5 \u5c0f\u6642</li> <li>API Layer: ~4.5 \u5c0f\u6642</li> <li>End-to-End Tests: ~1.5 \u5c0f\u6642</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#_16","title":"\u6e2c\u8a66\u6642\u9593","text":"<ul> <li>\u7e3d\u8a08: ~1.5 \u5c0f\u6642</li> <li>\u8aaa\u660e: End-to-End API Tests</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#_17","title":"\u6587\u4ef6\u66f4\u65b0","text":"<ul> <li>\u7e3d\u8a08: ~1 \u5c0f\u6642</li> <li>\u7d30\u9805: </li> <li>\u5be6\u4f5c\u72c0\u614b\u8ffd\u8e64</li> <li>\u8b8a\u66f4\u65e5\u8a8c</li> <li>TDD \u4e00\u81f4\u6027\u6aa2\u67e5\u5831\u544a</li> <li>\u5de5\u4f5c\u65e5\u8a8c</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#_18","title":"\u554f\u984c\u89e3\u6c7a","text":"<ul> <li>\u7e3d\u8a08: ~20 \u5206\u9418</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#cursor_2","title":"\u8207 Cursor \u5354\u4f5c\u6642\u9593","text":"<ul> <li>\u7e3d\u8a08: ~8 \u5c0f\u6642</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#_19","title":"\u6703\u8b70/\u8a0e\u8ad6","text":"<ul> <li>\u7e3d\u8a08: 0 \u5c0f\u6642</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#_20","title":"\u7e3d\u8a08","text":"<ul> <li>\u7e3d\u8a08: ~8 \u5c0f\u6642</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#_21","title":"\ud83d\udd04 \u660e\u65e5\u8a08\u5283","text":"<ul> <li>TDD-020: \u5be6\u4f5c PrematchCommentClient</li> <li>TDD-021: \u5be6\u4f5c LiveChatClient</li> <li>TDD-022: \u5be6\u4f5c ChatWebSocketClient</li> <li>TDD-030: \u5be6\u4f5c PrematchCommentRepository</li> <li>TDD-031: \u5be6\u4f5c LiveChatRepository</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#_22","title":"\ud83d\udcdd \u5176\u4ed6\u5099\u8a3b","text":"<ol> <li>Git Commits: \u4eca\u5929\u5171\u5efa\u7acb\u4e86 6 \u500b commits\uff0c\u6bcf\u500b\u90fd\u5c0d\u61c9\u76f8\u95dc\u7684 tickets\uff0c\u7b26\u5408 Conventional Commits \u898f\u7bc4</li> <li>\u6587\u6a94\u5316: \u5df2\u5c07 DTO Layer\u3001Domain Model Layer\u3001API Layer\u3001API End-to-End Tests \u7684\u6700\u4f73\u5be6\u8e10\u6574\u7406\u6210\u53ef\u91cd\u7528\u7684 prompt\uff0c\u5b58\u653e\u5728 <code>TDDs/DevelopingInsights/</code> \u76ee\u9304\u4e0b</li> <li>TDD \u4e00\u81f4\u6027: \u6240\u6709\u5df2\u5be6\u4f5c\u7684 tickets \u90fd\u901a\u904e TDD \u4e00\u81f4\u6027\u6aa2\u67e5\uff0c100% \u7b26\u5408 TDD \u898f\u7bc4</li> </ol>"},{"location":"15_Daily_Logs/2025-12-01/#_23","title":"\ud83d\udcc4 \u76f8\u95dc\u6587\u4ef6\u6539\u52d5\u8a18\u9304","text":"<p>\u672c\u6587\u6a94\u8a18\u9304 2025-12-01 \u7576\u5929\u5728\u4e3b\u5c08\u6848\uff08<code>fcom-iOS</code>\uff09\u4e2d\u8207 MatchChat \u76f8\u95dc\u7684\u6240\u6709\u6587\u4ef6\u6539\u52d5\u3002</p>"},{"location":"15_Daily_Logs/2025-12-01/#git-commits","title":"Git Commits","text":""},{"location":"15_Daily_Logs/2025-12-01/#1-matchchat-swift-package_1","title":"1. MatchChat Swift Package \u5275\u5efa","text":"<ul> <li>Commit: <code>a92d5c69b5</code></li> <li>\u8a0a\u606f: <code>feat: add MatchChat Swift Package</code></li> <li>\u6642\u9593: 2025-12-01 16:53:45</li> <li>\u6539\u52d5\u6587\u4ef6:</li> <li><code>.gitignore</code> - \u6dfb\u52a0 TDDs \u76ee\u9304\u5ffd\u7565\u898f\u5247</li> <li><code>MatchChat/Package.swift</code> - \u5275\u5efa MatchChat Swift Package</li> <li><code>MatchChat/Tests/MatchChatTests/MatchChatTests.swift</code> - \u6e2c\u8a66\u6587\u4ef6</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#2-prematchcomment-domain-models","title":"2. PrematchComment Domain Models","text":"<ul> <li>Commit: <code>a63c40884e</code></li> <li>\u8a0a\u606f: <code>feat: implement PrematchComment domain models [FOOTBALL-9171] [FOOTBALL-9172] [FOOTBALL-9173] [FOOTBALL-9176]</code></li> <li>\u6642\u9593: 2025-12-01 18:43:57</li> <li>\u6539\u52d5\u6587\u4ef6:</li> <li><code>MatchChat/Sources/MatchChat/Models/PrematchComment/PrematchComment.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Models/PrematchComment/PrematchComment+PrematchCommentAPI.swift</code></li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#3-livechat-domain-models","title":"3. LiveChat Domain Models","text":"<ul> <li>Commit: <code>35b786f98b</code></li> <li>\u8a0a\u606f: <code>feat: implement LiveChat domain models [FOOTBALL-9174] [FOOTBALL-9175] [FOOTBALL-9176]</code></li> <li>\u6642\u9593: 2025-12-01 18:43:59</li> <li>\u6539\u52d5\u6587\u4ef6:</li> <li><code>MatchChat/Sources/MatchChat/Models/LiveChat/LiveChat.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Models/LiveChat/LiveChat+ChatAPI.swift</code></li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#4-prematchcommentapi-layer","title":"4. PrematchCommentAPI Layer","text":"<ul> <li>Commit: <code>416e7c4d9f</code></li> <li>\u8a0a\u606f: <code>feat: implement PrematchCommentAPI layer [FOOTBALL-9178]</code></li> <li>\u6642\u9593: 2025-12-01 18:44:03</li> <li>\u6539\u52d5\u6587\u4ef6:</li> <li><code>MatchChat/Sources/MatchChat/Services/API/PrematchComment/PrematchCommentAPI.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/API/PrematchComment/PrematchCommentAPI+Endpoint.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/API/PrematchComment/PrematchCommentAPI+Models.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/API/PrematchComment/PrematchCommentAPI+RepositoryProtocol.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/API/PrematchComment/PrematchCommentAPI+Repository.swift</code></li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#5-chatapi-layer","title":"5. ChatAPI Layer","text":"<ul> <li>Commit: <code>b83d543969</code></li> <li>\u8a0a\u606f: <code>feat: implement ChatAPI layer [FOOTBALL-9179]</code></li> <li>\u6642\u9593: 2025-12-01 18:44:06</li> <li>\u6539\u52d5\u6587\u4ef6:</li> <li><code>MatchChat/Sources/MatchChat/Services/API/Chat/ChatAPI.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/API/Chat/ChatAPI+Endpoint.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/API/Chat/ChatAPI+Models.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/API/Chat/ChatAPI+RepositoryProtocol.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/API/Chat/ChatAPI+Repository.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/API/Chat/ChatAPI+WebSocket.swift</code></li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#6-end-to-end-api-tests","title":"6. End-to-End API Tests","text":"<ul> <li>Commit: <code>c709e36d33</code></li> <li>\u8a0a\u606f: <code>test: add end-to-end API tests for MatchChat package</code></li> <li>\u6642\u9593: 2025-12-01 18:44:09</li> <li>\u6539\u52d5\u6587\u4ef6:</li> <li><code>MatchChat/Tests/MatchChatTests/PrematchCommentAPITests.swift</code> (243 lines)</li> <li><code>MatchChat/Tests/MatchChatTests/ChatAPITests.swift</code> (432 lines)</li> <li><code>MatchChat/Tests/MatchChatTests/ChatAPIWebSocketTests.swift</code> (42 lines)</li> <li><code>MatchChat/Tests/MatchChatTests/MatchChatTests.swift</code> (removed, 6 lines)</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#_24","title":"\u6587\u4ef6\u7d71\u8a08","text":"<ul> <li>\u7e3d Commits: 6</li> <li>\u65b0\u589e\u6587\u4ef6: 15+</li> <li>\u7e3d\u7a0b\u5f0f\u78bc\u884c\u6578: ~1500+ lines</li> <li>\u6e2c\u8a66\u7a0b\u5f0f\u78bc: 717 lines</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#tdd-tickets","title":"\u76f8\u95dc TDD Tickets","text":"<ul> <li>TDD-001: Comment Entity [FOOTBALL-9171] \u2705</li> <li>TDD-002: CommentMeta Entity [FOOTBALL-9172] \u2705</li> <li>TDD-003: UserInfo Entity [FOOTBALL-9173] \u2705</li> <li>TDD-004: Message Entity [FOOTBALL-9174] \u2705</li> <li>TDD-005: ChatroomInfo Entity [FOOTBALL-9175] \u2705</li> <li>TDD-006: Value Objects [FOOTBALL-9176] \u2705</li> <li>TDD-010: PrematchCommentAPI [FOOTBALL-9178] \u2705</li> <li>TDD-011: ChatAPI [FOOTBALL-9179] \u2705</li> </ul>"},{"location":"15_Daily_Logs/2025-12-01/#_25","title":"\u5099\u8a3b","text":"<p>\u6240\u6709\u6539\u52d5\u90fd\u5728\u4e3b\u5c08\u6848\uff08<code>fcom-iOS</code>\uff09\u7684 <code>main</code> \u5206\u652f\u4e0a\uff0c\u9019\u4e9b\u6587\u4ef6\u4e0d\u5c6c\u65bc TDDs repository\uff0c\u4f46\u8207 TDD \u6587\u4ef6\u5c0d\u61c9\u7684\u5be6\u4f5c\u76f8\u95dc\u3002</p>"},{"location":"15_Daily_Logs/2025-12-02/","title":"\u5de5\u4f5c\u65e5\u8a8c - 2025-12-02","text":""},{"location":"15_Daily_Logs/2025-12-02/#_1","title":"\ud83d\udccb \u4eca\u65e5\u8a08\u5283","text":"<ul> <li>[x] TDD-010: PrematchCommentAPI \u5b9a\u7fa9\uff08\u5df2\u5b8c\u6210\uff0c\u6aa2\u67e5\u78ba\u8a8d\uff09</li> <li>[x] TDD-011: ChatAPI \u5b9a\u7fa9\uff08\u5df2\u5b8c\u6210\uff0c\u6aa2\u67e5\u78ba\u8a8d\uff09</li> <li>[x] TDD-021: LiveChatClient\uff08HTTP\uff09\u5be6\u4f5c</li> <li>[x] TDD-020: PrematchCommentClient\uff08HTTP\uff09\u5be6\u4f5c</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#_2","title":"\u2705 \u5b8c\u6210\u9805\u76ee","text":""},{"location":"15_Daily_Logs/2025-12-02/#tdd-021-livechatclienthttp-football-9182","title":"TDD-021 \u2014 LiveChatClient\uff08HTTP\uff09\u5be6\u4f5c [FOOTBALL-9182]","text":"<ul> <li>\u6642\u9593: \u7d04 30 \u5206\u9418</li> <li>\u6a94\u6848: <code>MatchChat/Sources/MatchChat/Services/API/LiveChatClient.swift</code></li> <li>\u6e2c\u8a66: \u2705 \u7121 linter \u932f\u8aa4</li> <li>\u5099\u8a3b: \u5be6\u4f5c\u5b8c\u6210\uff0c\u5305\u542b 4 \u500b\u65b9\u6cd5\uff1agetBatchCount, getChatroomInfo, getHistoricalMessages, sendMessage</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#tdd-020-prematchcommentclienthttp-football-9181","title":"TDD-020 \u2014 PrematchCommentClient\uff08HTTP\uff09\u5be6\u4f5c [FOOTBALL-9181]","text":"<ul> <li>\u6642\u9593: \u7d04 30 \u5206\u9418</li> <li>\u6a94\u6848: <code>MatchChat/Sources/MatchChat/Services/API/PrematchCommentClient.swift</code></li> <li>\u6e2c\u8a66: \u2705 \u7121 linter \u932f\u8aa4</li> <li>\u5099\u8a3b: \u5be6\u4f5c\u5b8c\u6210\uff0c\u5305\u542b 5 \u500b\u65b9\u6cd5\uff1agetCommentMeta, getComments, publishComment, toggleLike, getReplies</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#api","title":"\u6aa2\u67e5 API \u5b8c\u6574\u5ea6","text":"<ul> <li>\u6642\u9593: \u7d04 20 \u5206\u9418</li> <li>\u7d50\u679c: \u2705 ChatAPI \u548c PrematchCommentAPI \u7d50\u69cb\u5b8c\u6574\uff0c\u6240\u6709\u5fc5\u8981\u6a94\u6848\u90fd\u5df2\u5b58\u5728</li> <li>\u5099\u8a3b: \u78ba\u8a8d\u4e86 Endpoint\u3001Models\u3001Repository\u3001RepositoryProtocol \u90fd\u5df2\u6b63\u78ba\u5be6\u4f5c</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#github-pages","title":"\u767c\u5e03\u5de5\u4f5c\u8a08\u5283\u5230 GitHub Pages","text":"<ul> <li>\u6642\u9593: \u7d04 10 \u5206\u9418</li> <li>\u7d50\u679c: \u2705 \u6210\u529f\u90e8\u7f72\u5230 gh-pages branch</li> <li>URL: https://hsinchunghan.github.io/LiveChatAndCommentOngoingFeature/</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#tdd","title":"TDD \u4e00\u81f4\u6027\u6aa2\u67e5","text":"<ul> <li>\u6642\u9593: \u7d04 30 \u5206\u9418</li> <li>\u6a94\u6848: <code>13_Implementation_Status/tdd_consistency_check_2025-12-02.md</code></li> <li>\u6e2c\u8a66: \u2705 \u901a\u904e\uff08\u5be6\u4f5c\u7b26\u5408 TDD \u898f\u7bc4\uff0c\u529f\u80fd\u5b8c\u6574\u5ea6 80%\uff09</li> <li>\u5099\u8a3b: \u6aa2\u67e5 TDD-020 \u548c TDD-021 \u7684\u5be6\u4f5c\u662f\u5426\u7b26\u5408 TDD \u6587\u4ef6\u898f\u7bc4</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#_3","title":"\ud83d\udea7 \u9032\u884c\u4e2d\u9805\u76ee","text":"<p>\u7121</p>"},{"location":"15_Daily_Logs/2025-12-02/#_4","title":"\ud83d\udc1b \u9047\u5230\u7684\u554f\u984c","text":""},{"location":"15_Daily_Logs/2025-12-02/#1","title":"\u554f\u984c 1: \u7de8\u8b6f\u932f\u8aa4\u6aa2\u67e5","text":"<ul> <li>\u554f\u984c: \u57f7\u884c <code>swift build</code> \u6642\u51fa\u73fe macOS \u7248\u672c\u76f8\u5bb9\u6027\u932f\u8aa4</li> <li>\u539f\u56e0: \u5c08\u6848\u914d\u7f6e\u7684 macOS \u7248\u672c\u8981\u6c42\u554f\u984c\uff0c\u8207\u65b0\u5beb\u7684\u7a0b\u5f0f\u78bc\u7121\u95dc</li> <li>\u89e3\u6c7a\u65b9\u6848: \u78ba\u8a8d\u65b0\u7a0b\u5f0f\u78bc\u7684\u8a9e\u6cd5\u548c\u7d50\u69cb\u6b63\u78ba\uff0c\u7de8\u8b6f\u932f\u8aa4\u70ba\u5c08\u6848\u5c64\u7d1a\u914d\u7f6e\u554f\u984c</li> <li>\u6642\u9593: ~10 \u5206\u9418</li> <li>\u6a94\u6848: \u7121\uff08\u5c08\u6848\u914d\u7f6e\u554f\u984c\uff09</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#2","title":"\u554f\u984c 2: \u67b6\u69cb\u8a2d\u8a08\u78ba\u8a8d","text":"<ul> <li>\u554f\u984c: Client \u548c API \u4e4b\u9593\u662f\u5426\u6709 protocol layer\uff0c\u4ee5\u53ca\u8a2d\u8a08\u662f\u5426\u7b26\u5408 TCA \u6587\u6a94</li> <li>\u539f\u56e0: \u9700\u8981\u78ba\u8a8d\u67b6\u69cb\u8a2d\u8a08\u662f\u5426\u7b26\u5408 TDD \u548c TCA \u898f\u7bc4</li> <li>\u89e3\u6c7a\u65b9\u6848: \u78ba\u8a8d Client \u76f4\u63a5\u4f7f\u7528 API \u5c64\u7684 Repository\uff0c\u7121\u9700 protocol layer\u3002Client \u662f Repository \u7684\u5167\u90e8\u4f9d\u8cf4\uff0c\u4e0d\u662f TCA Dependency</li> <li>\u6642\u9593: ~15 \u5206\u9418</li> <li>\u6a94\u6848: \u7121\uff08\u67b6\u69cb\u8a0e\u8ad6\uff09</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#3","title":"\u554f\u984c 3: \u6e2c\u8a66\u7b56\u7565\u8a0e\u8ad6","text":"<ul> <li>\u554f\u984c: \u82e5\u6c92\u6709 protocol layer\uff0c\u5982\u4f55\u6e2c\u8a66 Client</li> <li>\u539f\u56e0: \u9700\u8981\u78ba\u5b9a\u6e2c\u8a66\u7b56\u7565</li> <li>\u89e3\u6c7a\u65b9\u6848: \u5728 Repository \u5c64\u7d1a\u6e2c\u8a66\u6642\u4e00\u4f75\u6e2c\u8a66 Client\uff0c\u6216\u4f7f\u7528 <code>MockedAPIClient</code> \u9032\u884c\u55ae\u5143\u6e2c\u8a66</li> <li>\u6642\u9593: ~10 \u5206\u9418</li> <li>\u6a94\u6848: \u7121\uff08\u6e2c\u8a66\u7b56\u7565\u8a0e\u8ad6\uff09</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#cursor","title":"\ud83e\udd16 \u8207 Cursor \u7684\u5c0d\u8a71\u7d71\u6574","text":""},{"location":"15_Daily_Logs/2025-12-02/#_5","title":"\u91cd\u8981\u6c7a\u7b56","text":""},{"location":"15_Daily_Logs/2025-12-02/#1_1","title":"1. \u67b6\u69cb\u8a2d\u8a08\u6c7a\u7b56","text":"<ul> <li>User Prompt: \"\u9019\u6709\u8003\u91cf\u5230 TDD \u7684\u67b6\u69cb\u898f\u5283\u9032\u884c\u8a2d\u8a08\u55ce\uff1fClient \u548c API \u4e4b\u9593\u6709 protocol layer \u55ce\uff1f\u4f60\u7684\u8a2d\u8a08\u6709\u7b26\u5408 TCA \u6587\u6a94\u55ce\uff1f\"</li> <li>Client \u8a2d\u8a08\u6a21\u5f0f: \u63a1\u7528\u7c21\u55ae\u7684 <code>struct</code> \u8a2d\u8a08\uff0c\u76f4\u63a5\u59d4\u6d3e\u7d66 API \u5c64\u7684 Repository\uff08actor\uff09\uff0c\u7b26\u5408 TDD \u898f\u7bc4</li> <li>\u4f9d\u8cf4\u95dc\u4fc2: Client \u76f4\u63a5\u4f7f\u7528 API \u5c64\u7684 Repository\uff08<code>ChatAPI.ChatRepository</code> \u548c <code>PrematchCommentAPI.PrematchCommentRepository</code>\uff09\uff0c\u7121\u9700\u4e2d\u9593 protocol layer</li> <li>TCA \u6574\u5408: Client \u5b9a\u7fa9\u70ba Repository \u7684\u5167\u90e8\u4f9d\u8cf4\uff0c\u800c\u975e TCA Dependency\u3002\u5982\u9700\u5728\u6e2c\u8a66\u4e2d mock\uff0c\u53ef\u8003\u616e\u5be6\u4f5c <code>DependencyKey</code></li> <li>\u6a94\u6848\u7d50\u69cb: \u9075\u5faa\u73fe\u6709\u5c08\u6848\u7d50\u69cb\uff0c\u5c07 Client \u653e\u5728 <code>MatchChat/Sources/MatchChat/Services/API/</code> \u76ee\u9304\u4e0b</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#2_1","title":"2. \u5be6\u4f5c\u6c7a\u7b56","text":"<ul> <li>User Prompt: \"\u5148\u5b9a\u7fa9\u70ba Repository \u7684\u5167\u90e8\u4f9d\u8cf4\u5373\u53ef\uff0c\u4f46\u5e6b\u6211\u7559\u4e0b\u8a3b\u89e3\"</li> <li>\u4f9d\u8cf4\u6ce8\u5165: \u4f7f\u7528\u9810\u8a2d\u53c3\u6578\u63d0\u4f9b Repository\uff0c\u540c\u6642\u652f\u63f4\u4f9d\u8cf4\u6ce8\u5165\u4ee5\u4fbf\u6e2c\u8a66</li> <li>Error Handling: \u900f\u904e <code>async throws</code> \u76f4\u63a5\u50b3\u905e\u932f\u8aa4\uff0c\u7531 Repository \u5c64\u8655\u7406</li> <li>\u65b9\u6cd5\u59d4\u6d3e: Client \u65b9\u6cd5\u76f4\u63a5\u59d4\u6d3e\u7d66 Repository\uff0c\u4fdd\u6301\u7c21\u55ae\u6e05\u6670\u7684\u8a2d\u8a08</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#3-git","title":"3. Git \u5de5\u4f5c\u6d41\u7a0b\u6c7a\u7b56","text":"<ul> <li>User Prompt: \"\u5206\u6210\u5169\u500b commits\uff0c\u4e26\u8b93 commit \u5c0d\u61c9\u5230\u5404\u81ea\u7684 ticket \u7de8\u865f\"</li> <li>Commit \u7b56\u7565: \u5c07\u5169\u500b Client \u7684\u5be6\u4f5c\u5206\u6210\u5169\u500b\u7368\u7acb\u7684 commits\uff0c\u6bcf\u500b commit \u5c0d\u61c9\u5404\u81ea\u7684 Jira ticket</li> <li>Commit 1: <code>feat: implement LiveChatClient for HTTP communication [FOOTBALL-9182]</code></li> <li>Commit 2: <code>feat: implement PrematchCommentClient for HTTP communication [FOOTBALL-9181]</code></li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#4","title":"4. \u6587\u6a94\u7ba1\u7406\u6c7a\u7b56","text":"<ul> <li>User Prompt: \"ok\uff0c\u5e6b\u6211\u79fb\u9664\u6389\u5176\u4ed6\u7684 comments\uff0c\u53ea\u4fdd\u7559\u4e0b\u9762\u7684 comments\"</li> <li>\u8a3b\u89e3\u7b56\u7565: \u79fb\u9664\u6240\u6709\u8a73\u7d30\u8a3b\u89e3\uff0c\u50c5\u4fdd\u7559 TCA \u76f8\u95dc\u7684\u6ce8\u610f\u4e8b\u9805</li> <li>\u6587\u6a94\u90e8\u7f72: \u4f7f\u7528 MkDocs \u90e8\u7f72 TDD \u6587\u6a94\u5230 GitHub Pages\uff0c\u78ba\u4fdd\u6587\u6a94\u8207\u5be6\u4f5c\u540c\u6b65</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#_6","title":"\u5b78\u7fd2\u8981\u9ede","text":""},{"location":"15_Daily_Logs/2025-12-02/#1_2","title":"1. \u67b6\u69cb\u7406\u89e3","text":"<ul> <li>Clean Architecture \u5c64\u7d1a: Client \u4f4d\u65bc Data &amp; Infrastructure \u5c64\uff0c\u76f4\u63a5\u4f9d\u8cf4 API \u5c64\u7684 Repository</li> <li>Actor \u4f7f\u7528: Repository \u4f7f\u7528 <code>actor</code> \u5be6\u4f5c\u4ee5\u78ba\u4fdd\u4e26\u767c\u5b89\u5168\uff0cClient \u9700\u8981\u6b63\u78ba\u4f7f\u7528 <code>await</code> \u547c\u53eb</li> <li>API \u7d50\u69cb: \u78ba\u8a8d\u4e86 ChatAPI \u548c PrematchCommentAPI \u7684\u5b8c\u6574\u7d50\u69cb\uff0c\u5305\u62ec Endpoint\u3001Models\u3001Repository\u3001RepositoryProtocol</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#2-tdd","title":"2. TDD \u5be6\u8e10","text":"<ul> <li>TDD \u4e00\u81f4\u6027\u6aa2\u67e5: \u5be6\u4f5c\u5b8c\u6210\u5f8c\u9032\u884c\u4e00\u81f4\u6027\u6aa2\u67e5\uff0c\u78ba\u4fdd\u7b26\u5408 TDD \u6587\u4ef6\u898f\u7bc4</li> <li>\u6e2c\u8a66\u7b56\u7565: Client \u4f5c\u70ba Repository \u7684\u5167\u90e8\u4f9d\u8cf4\uff0c\u5efa\u8b70\u5728 Repository \u5c64\u7d1a\u6e2c\u8a66\u6642\u4e00\u4f75\u6e2c\u8a66 Client</li> <li>\u5be6\u4f5c\u5b8c\u6210\u5ea6: \u529f\u80fd\u5be6\u4f5c\u5b8c\u6210\u5ea6 80%\uff08\u7f3a\u5c11\u6e2c\u8a66\u8986\u84cb\u7387\uff09</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#3_1","title":"3. \u5de5\u5177\u4f7f\u7528","text":"<ul> <li>MkDocs \u90e8\u7f72: \u4f7f\u7528 <code>mkdocs gh-deploy</code> \u81ea\u52d5\u90e8\u7f72\u6587\u6a94\u5230 GitHub Pages</li> <li>Git \u5de5\u4f5c\u6d41\u7a0b: \u4f7f\u7528 Conventional Commits \u683c\u5f0f\uff0c\u4e26\u5728 commit message \u4e2d\u5305\u542b Jira ticket \u7de8\u865f</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#_7","title":"\u554f\u984c\u89e3\u6c7a\u8a18\u9304","text":""},{"location":"15_Daily_Logs/2025-12-02/#1_3","title":"1. \u7de8\u8b6f\u932f\u8aa4\u6aa2\u67e5","text":"<ul> <li>User Prompt: \uff08\u7121\uff0c\u81ea\u52d5\u6aa2\u67e5\u767c\u73fe\uff09</li> <li>\u554f\u984c: \u57f7\u884c <code>swift build</code> \u6642\u51fa\u73fe macOS \u7248\u672c\u76f8\u5bb9\u6027\u932f\u8aa4</li> <li>\u539f\u56e0: \u5c08\u6848\u914d\u7f6e\u7684 macOS \u7248\u672c\u8981\u6c42\u554f\u984c\uff0c\u8207\u65b0\u5beb\u7684\u7a0b\u5f0f\u78bc\u7121\u95dc</li> <li>\u89e3\u6c7a: \u78ba\u8a8d\u65b0\u7a0b\u5f0f\u78bc\u7684\u8a9e\u6cd5\u548c\u7d50\u69cb\u6b63\u78ba\uff0c\u7de8\u8b6f\u932f\u8aa4\u70ba\u5c08\u6848\u5c64\u7d1a\u914d\u7f6e\u554f\u984c</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#2_2","title":"2. \u67b6\u69cb\u8a2d\u8a08\u78ba\u8a8d","text":"<ul> <li>User Prompt: \"Client \u548c API \u4e4b\u9593\u6709 protocol layer \u55ce\uff1f\u4f60\u7684\u8a2d\u8a08\u6709\u7b26\u5408@TCA Doc \u55ce\uff1f\"</li> <li>\u554f\u984c: \u7528\u6236\u8a62\u554f Client \u548c API \u4e4b\u9593\u662f\u5426\u6709 protocol layer\uff0c\u4ee5\u53ca\u8a2d\u8a08\u662f\u5426\u7b26\u5408 TCA \u6587\u6a94</li> <li>\u89e3\u6c7a: \u78ba\u8a8d Client \u76f4\u63a5\u4f7f\u7528 API \u5c64\u7684 Repository\uff0c\u7121\u9700 protocol layer\u3002Client \u662f Repository \u7684\u5167\u90e8\u4f9d\u8cf4\uff0c\u4e0d\u662f TCA Dependency</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#3_2","title":"3. \u6e2c\u8a66\u7b56\u7565\u8a0e\u8ad6","text":"<ul> <li>User Prompt: \"\u82e5\u6c92\u6709 protocol layer \u4f60\u8981\u600e\u9ebc\u6e2c\u8a66 client\"</li> <li>\u554f\u984c: \u82e5\u6c92\u6709 protocol layer\uff0c\u5982\u4f55\u6e2c\u8a66 Client</li> <li>\u89e3\u6c7a: \u5728 Repository \u5c64\u7d1a\u6e2c\u8a66\u6642\u4e00\u4f75\u6e2c\u8a66 Client\uff0c\u6216\u4f7f\u7528 <code>MockedAPIClient</code> \u9032\u884c\u55ae\u5143\u6e2c\u8a66</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#_8","title":"\u6539\u9032\u5efa\u8b70","text":""},{"location":"15_Daily_Logs/2025-12-02/#1_4","title":"1. \u6e2c\u8a66\u8986\u84cb\u7387","text":"<ul> <li>Unit Test: \u70ba\u5169\u500b Client \u6dfb\u52a0\u55ae\u5143\u6e2c\u8a66\uff0c\u76ee\u6a19\u8986\u84cb\u7387 \u2265 80%</li> <li>Integration Test: \u5be6\u4f5c\u6574\u5408\u6e2c\u8a66\u4f86\u9a57\u8b49 Client \u8207 Repository \u7684\u6574\u5408</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#2_3","title":"2. \u6587\u6a94\u5b8c\u5584","text":"<ul> <li>\u6a94\u6848\u8def\u5f91\u8aaa\u660e: \u5728 TDD \u6587\u4ef6\u4e2d\u8a3b\u660e\u5be6\u969b\u5c08\u6848\u7d50\u69cb\u5dee\u7570\uff08MatchChat \u7d71\u4e00 package\uff09</li> <li>\u67b6\u69cb\u5716\u66f4\u65b0: \u66f4\u65b0\u67b6\u69cb\u5716\u4ee5\u53cd\u6620 Client \u8207 API \u5c64\u7684\u5be6\u969b\u95dc\u4fc2</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#3_3","title":"3. \u5f8c\u7e8c\u5de5\u4f5c","text":"<ul> <li>\u7e7c\u7e8c\u5be6\u4f5c <code>ChatWebSocketClient</code> (TDD-022)</li> <li>\u5be6\u4f5c Repository \u5c64\uff08TDD-030, TDD-031\uff09</li> <li>\u88dc\u5f37\u6e2c\u8a66\u8986\u84cb\u7387</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#_9","title":"\u5c0d\u8a71\u8a18\u9304","text":""},{"location":"15_Daily_Logs/2025-12-02/#1-livechatclient-prematchcommentclient","title":"\u5c0d\u8a71 1: \u5be6\u4f5c LiveChatClient \u548c PrematchCommentClient","text":"<ul> <li>\u6642\u9593: 2025-12-02 \u4e0a\u5348</li> <li>\u5167\u5bb9: </li> <li>\u8b80\u53d6 TDD-021 \u548c TDD-020 \u6587\u4ef6</li> <li>\u6aa2\u67e5\u73fe\u6709\u7684 API \u5c64\u7d50\u69cb\uff08ChatAPI \u548c PrematchCommentAPI\uff09</li> <li>\u5be6\u4f5c\u5169\u500b Client\uff0c\u5305\u542b\u6240\u6709\u5fc5\u8981\u65b9\u6cd5</li> <li>\u7d50\u679c: \u2705 \u6210\u529f\u5be6\u4f5c\u5169\u500b Client\uff0c\u901a\u904e linter \u6aa2\u67e5</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#2_4","title":"\u5c0d\u8a71 2: \u67b6\u69cb\u8a2d\u8a08\u78ba\u8a8d","text":"<ul> <li>\u6642\u9593: 2025-12-02 \u4e0a\u5348</li> <li>\u5167\u5bb9: </li> <li>\u8a0e\u8ad6 Client \u8207 API \u5c64\u7684\u95dc\u4fc2</li> <li>\u78ba\u8a8d\u662f\u5426\u9700\u8981 protocol layer</li> <li>\u78ba\u8a8d\u8a2d\u8a08\u662f\u5426\u7b26\u5408 TCA \u6587\u6a94</li> <li>\u7d50\u679c: \u2705 \u78ba\u8a8d Client \u76f4\u63a5\u4f7f\u7528 API \u5c64\u7684 Repository\uff0c\u7121\u9700 protocol layer</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#3-git_1","title":"\u5c0d\u8a71 3: \u7a0b\u5f0f\u78bc\u6e05\u7406\u548c Git \u63d0\u4ea4","text":"<ul> <li>\u6642\u9593: 2025-12-02 \u4e0b\u5348</li> <li>\u5167\u5bb9: </li> <li>\u79fb\u9664\u591a\u9918\u8a3b\u89e3\uff0c\u50c5\u4fdd\u7559 TCA \u76f8\u95dc\u6ce8\u610f\u4e8b\u9805</li> <li>\u5206\u6210\u5169\u500b commits\uff0c\u5c0d\u61c9\u5404\u81ea\u7684 Jira ticket</li> <li>\u7d50\u679c: \u2705 \u6210\u529f\u63d0\u4ea4\u5169\u500b commits\uff0c\u66f4\u65b0\u5be6\u4f5c\u72c0\u614b\u548c changelog</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#4-tdd","title":"\u5c0d\u8a71 4: TDD \u4e00\u81f4\u6027\u6aa2\u67e5","text":"<ul> <li>\u6642\u9593: 2025-12-02 \u4e0b\u5348</li> <li>\u5167\u5bb9: </li> <li>\u6aa2\u67e5\u5be6\u4f5c\u662f\u5426\u7b26\u5408 TDD \u6587\u4ef6\u898f\u7bc4</li> <li>\u9a57\u8b49\u65b9\u6cd5\u5c0d\u61c9\u95dc\u4fc2</li> <li>\u751f\u6210\u4e00\u81f4\u6027\u6aa2\u67e5\u5831\u544a</li> <li>\u7d50\u679c: \u2705 \u5be6\u4f5c\u7b26\u5408 TDD \u898f\u7bc4\uff0c\u529f\u80fd\u5b8c\u6574\u5ea6 80%\uff08\u7f3a\u5c11\u6e2c\u8a66\uff09</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#5","title":"\u5c0d\u8a71 5: \u6587\u6a94\u90e8\u7f72","text":"<ul> <li>\u6642\u9593: 2025-12-02 \u4e0b\u5348</li> <li>\u5167\u5bb9: </li> <li>\u90e8\u7f72 TDD \u6587\u6a94\u5230 GitHub Pages</li> <li>\u78ba\u8a8d\u90e8\u7f72\u6210\u529f</li> <li>\u7d50\u679c: \u2705 \u6210\u529f\u90e8\u7f72\u5230 gh-pages branch\uff0c\u7db2\u7ad9 URL: https://hsinchunghan.github.io/LiveChatAndCommentOngoingFeature/ </li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#_10","title":"\ud83d\udca1 \u5b78\u7fd2\u8207\u53cd\u601d","text":""},{"location":"15_Daily_Logs/2025-12-02/#_11","title":"\u767c\u73fe\u6216\u5b78\u7fd2\u5230\u7684\u65b0\u77e5\u8b58","text":"<ol> <li>Clean Architecture \u5c64\u7d1a\u7406\u89e3: \u6df1\u5165\u7406\u89e3\u4e86 Client \u5c64\u5728 Clean Architecture \u4e2d\u7684\u5b9a\u4f4d\uff0cClient \u4f4d\u65bc Data &amp; Infrastructure \u5c64\uff0c\u76f4\u63a5\u4f9d\u8cf4 API \u5c64\u7684 Repository</li> <li>Actor \u4f7f\u7528: \u5b78\u7fd2\u4e86\u5982\u4f55\u5728 Client \u4e2d\u6b63\u78ba\u4f7f\u7528 <code>actor</code> \u985e\u578b\u7684 Repository\uff0c\u78ba\u4fdd\u4e26\u767c\u5b89\u5168</li> <li>TDD \u5be6\u8e10: \u9ad4\u9a57\u4e86\u5b8c\u6574\u7684 TDD \u5de5\u4f5c\u6d41\u7a0b\uff0c\u5f9e\u5be6\u4f5c\u5230\u4e00\u81f4\u6027\u6aa2\u67e5\uff0c\u78ba\u4fdd\u7b26\u5408\u898f\u7bc4</li> <li>MkDocs \u90e8\u7f72: \u638c\u63e1\u4e86 MkDocs \u90e8\u7f72\u6d41\u7a0b\u548c Conventional Commits \u683c\u5f0f</li> </ol>"},{"location":"15_Daily_Logs/2025-12-02/#_12","title":"\u53ef\u4ee5\u6539\u9032\u7684\u5730\u65b9","text":"<ol> <li>\u6e2c\u8a66\u8986\u84cb\u7387: \u61c9\u8a72\u5728\u5be6\u4f5c\u529f\u80fd\u7684\u540c\u6642\u6216\u4e4b\u5f8c\u7acb\u5373\u6dfb\u52a0\u6e2c\u8a66\uff0c\u800c\u4e0d\u662f\u7559\u5230\u5f8c\u7e8c</li> <li>\u6587\u6a94\u540c\u6b65: \u53ef\u4ee5\u8003\u616e\u81ea\u52d5\u5316\u6587\u6a94\u66f4\u65b0\u6d41\u7a0b\uff0c\u78ba\u4fdd\u6587\u6a94\u8207\u5be6\u4f5c\u540c\u6b65</li> <li>\u67b6\u69cb\u5716: \u61c9\u8a72\u53ca\u6642\u66f4\u65b0\u67b6\u69cb\u5716\uff0c\u53cd\u6620\u5be6\u969b\u7684\u5be6\u4f5c\u7d50\u69cb</li> </ol>"},{"location":"15_Daily_Logs/2025-12-02/#_13","title":"\u4e0b\u6b21\u53ef\u4ee5\u505a\u5f97\u66f4\u597d\u7684\u5730\u65b9","text":"<ol> <li>\u63d0\u524d\u898f\u5283: \u5728\u5be6\u4f5c\u524d\u5148\u78ba\u8a8d\u6240\u6709 dependencies \u548c\u67b6\u69cb\u6c7a\u7b56</li> <li>\u6e2c\u8a66\u9a45\u52d5: \u53ef\u4ee5\u8003\u616e\u5148\u5beb\u6e2c\u8a66\u518d\u5be6\u4f5c\uff08TDD \u65b9\u5f0f\uff09</li> <li>\u6587\u6a94\u81ea\u52d5\u5316: \u5efa\u7acb\u81ea\u52d5\u5316\u8173\u672c\uff0c\u78ba\u4fdd\u65b0\u6587\u4ef6\u81ea\u52d5\u52a0\u5165 MkDocs \u914d\u7f6e</li> </ol>"},{"location":"15_Daily_Logs/2025-12-02/#cursor_1","title":"\u8207 Cursor \u5354\u4f5c\u7684\u6539\u9032\u7a7a\u9593","text":"<ol> <li>\u5c0d\u8a71\u6548\u7387: \u53ef\u4ee5\u66f4\u660e\u78ba\u5730\u63d0\u51fa\u554f\u984c\uff0c\u6e1b\u5c11\u4f86\u56de\u78ba\u8a8d\u7684\u6b21\u6578</li> <li>\u6c7a\u7b56\u8a18\u9304: \u61c9\u8a72\u66f4\u53ca\u6642\u5730\u8a18\u9304\u91cd\u8981\u6c7a\u7b56\uff0c\u907f\u514d\u5f8c\u7e8c\u907a\u5fd8</li> <li>\u6e2c\u8a66\u7b56\u7565: \u53ef\u4ee5\u5728\u5be6\u4f5c\u524d\u5c31\u8a0e\u8ad6\u6e2c\u8a66\u7b56\u7565\uff0c\u800c\u4e0d\u662f\u5be6\u4f5c\u5f8c\u518d\u8003\u616e</li> </ol>"},{"location":"15_Daily_Logs/2025-12-02/#_14","title":"\ud83d\udcca \u6642\u9593\u7d71\u8a08","text":""},{"location":"15_Daily_Logs/2025-12-02/#_15","title":"\u958b\u767c\u6642\u9593","text":"<ul> <li>\u7e3d\u8a08: ~1.5 \u5c0f\u6642</li> <li>\u7d30\u9805: </li> <li>LiveChatClient \u5be6\u4f5c: 30 \u5206\u9418</li> <li>PrematchCommentClient \u5be6\u4f5c: 30 \u5206\u9418</li> <li>\u6aa2\u67e5 API \u5b8c\u6574\u5ea6: 20 \u5206\u9418</li> <li>\u7a0b\u5f0f\u78bc\u6aa2\u67e5\u8207\u9a57\u8b49: 10 \u5206\u9418</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#_16","title":"\u6e2c\u8a66\u6642\u9593","text":"<ul> <li>\u7e3d\u8a08: 0 \u5c0f\u6642</li> <li>\u8aaa\u660e: \u672a\u5be6\u4f5c\u6e2c\u8a66\uff0c\u4f46\u901a\u904e linter \u6aa2\u67e5</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#_17","title":"\u6587\u4ef6\u66f4\u65b0","text":"<ul> <li>\u7e3d\u8a08: ~1 \u5c0f\u6642</li> <li>\u7d30\u9805: </li> <li>\u66f4\u65b0\u5de5\u4f5c\u65e5\u8a8c: 30 \u5206\u9418</li> <li>\u66f4\u65b0\u5be6\u4f5c\u72c0\u614b\u548c Changelog: 20 \u5206\u9418</li> <li>\u767c\u5e03\u5de5\u4f5c\u8a08\u5283\u5230 GitHub Pages: 10 \u5206\u9418</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#_18","title":"\u554f\u984c\u89e3\u6c7a","text":"<ul> <li>\u7e3d\u8a08: ~35 \u5206\u9418</li> <li>\u7d30\u9805:</li> <li>\u7de8\u8b6f\u932f\u8aa4\u6aa2\u67e5: 10 \u5206\u9418</li> <li>\u67b6\u69cb\u8a2d\u8a08\u78ba\u8a8d: 15 \u5206\u9418</li> <li>\u6e2c\u8a66\u7b56\u7565\u8a0e\u8ad6: 10 \u5206\u9418</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#cursor_2","title":"\u8207 Cursor \u5354\u4f5c\u6642\u9593","text":"<ul> <li>\u7e3d\u8a08: ~2 \u5c0f\u6642</li> <li>\u8aaa\u660e: \u8a0e\u8ad6\u5be6\u4f5c\u65b9\u6848\u3001\u67b6\u69cb\u8a2d\u8a08\u3001\u6aa2\u67e5\u7a0b\u5f0f\u78bc\u3001TDD \u4e00\u81f4\u6027\u6aa2\u67e5</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#_19","title":"\u6703\u8b70/\u8a0e\u8ad6","text":"<ul> <li>\u7e3d\u8a08: 0 \u5c0f\u6642</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#_20","title":"\u7e3d\u8a08","text":"<ul> <li>\u7e3d\u8a08: ~5 \u5c0f\u6642</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#_21","title":"\ud83d\udd04 \u660e\u65e5\u8a08\u5283","text":"<ul> <li>TDD-020: PrematchCommentClient \u55ae\u5143\u6e2c\u8a66\uff08\u76ee\u6a19\u8986\u84cb\u7387 \u2265 80%\uff09</li> <li>TDD-021: LiveChatClient \u55ae\u5143\u6e2c\u8a66\uff08\u76ee\u6a19\u8986\u84cb\u7387 \u2265 80%\uff09</li> <li>TDD-022: \u5be6\u4f5c ChatWebSocketClient\uff08WebSocket\uff09</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#_22","title":"\ud83d\udcdd \u5176\u4ed6\u5099\u8a3b","text":"<ol> <li>Git Commits: \u4eca\u5929\u5171\u5efa\u7acb\u4e86 2 \u500b commits\uff0c\u6bcf\u500b\u90fd\u5c0d\u61c9\u76f8\u95dc\u7684 tickets\uff0c\u7b26\u5408 Conventional Commits \u898f\u7bc4</li> <li>TDD \u4e00\u81f4\u6027: \u6240\u6709\u5df2\u5be6\u4f5c\u7684 tickets \u90fd\u901a\u904e TDD \u4e00\u81f4\u6027\u6aa2\u67e5\uff0c\u529f\u80fd\u5b8c\u6574\u5ea6 80%\uff08\u7f3a\u5c11\u6e2c\u8a66\u8986\u84cb\u7387\uff09</li> <li>\u6587\u6a94\u90e8\u7f72: \u6210\u529f\u5c07\u5de5\u4f5c\u65e5\u8a8c\u90e8\u7f72\u5230 GitHub Pages\uff0c\u78ba\u4fdd\u6587\u6a94\u8207\u5be6\u4f5c\u540c\u6b65</li> </ol>"},{"location":"15_Daily_Logs/2025-12-02/#_23","title":"\ud83d\udcc4 \u76f8\u95dc\u6587\u4ef6\u6539\u52d5\u8a18\u9304","text":"<p>\u672c\u6587\u6a94\u8a18\u9304\u7576\u5929\u5728\u4e3b\u5c08\u6848\uff08<code>fcom-iOS</code>\uff09\u4e2d\u8207 MatchChat \u76f8\u95dc\u7684\u6240\u6709\u6587\u4ef6\u6539\u52d5\u3002</p>"},{"location":"15_Daily_Logs/2025-12-02/#git-commits","title":"Git Commits","text":""},{"location":"15_Daily_Logs/2025-12-02/#1-feat-implement-livechatclient-for-http-communication-football-9182","title":"1. feat: implement LiveChatClient for HTTP communication [FOOTBALL-9182]","text":"<ul> <li>Commit: <code>198f313a0a</code></li> <li>\u8a0a\u606f: <code>feat: implement LiveChatClient for HTTP communication [FOOTBALL-9182]</code></li> <li>\u6642\u9593: 2025-12-02</li> <li>\u6539\u52d5\u6587\u4ef6:</li> <li><code>MatchChat/Sources/MatchChat/Services/API/LiveChatClient.swift</code> (\u65b0\u589e)</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#2-feat-implement-prematchcommentclient-for-http-communication-football-9181","title":"2. feat: implement PrematchCommentClient for HTTP communication [FOOTBALL-9181]","text":"<ul> <li>Commit: <code>b40e7fec84</code></li> <li>\u8a0a\u606f: <code>feat: implement PrematchCommentClient for HTTP communication [FOOTBALL-9181]</code></li> <li>\u6642\u9593: 2025-12-02</li> <li>\u6539\u52d5\u6587\u4ef6:</li> <li><code>MatchChat/Sources/MatchChat/Services/API/PrematchCommentClient.swift</code> (\u65b0\u589e)</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#_24","title":"\u6587\u4ef6\u7d71\u8a08","text":"<ul> <li>\u7e3d Commits: 2</li> <li>\u65b0\u589e\u6587\u4ef6: 2 \u500b</li> <li><code>MatchChat/Sources/MatchChat/Services/API/LiveChatClient.swift</code> (26 lines)</li> <li><code>MatchChat/Sources/MatchChat/Services/API/PrematchCommentClient.swift</code> (30 lines)</li> <li>\u7e3d\u7a0b\u5f0f\u78bc\u884c\u6578: ~56 lines</li> <li>\u6e2c\u8a66\u7a0b\u5f0f\u78bc: 0 lines\uff08\u672a\u5be6\u4f5c\u6e2c\u8a66\uff0c\u4f46\u901a\u904e linter \u6aa2\u67e5\uff09</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#tdd-tickets","title":"\u76f8\u95dc TDD Tickets","text":"<ul> <li>TDD-010: PrematchCommentAPI \u5b9a\u7fa9 [FOOTBALL-9178] \u2705\uff08\u5df2\u6aa2\u67e5\u78ba\u8a8d\u5b8c\u6210\uff09</li> <li>TDD-011: ChatAPI \u5b9a\u7fa9 [FOOTBALL-9179] \u2705\uff08\u5df2\u6aa2\u67e5\u78ba\u8a8d\u5b8c\u6210\uff09</li> <li>TDD-021: LiveChatClient\uff08HTTP\uff09[FOOTBALL-9182] \u2705\uff08\u4eca\u65e5\u5b8c\u6210\uff09</li> <li>TDD-020: PrematchCommentClient\uff08HTTP\uff09[FOOTBALL-9181] \u2705\uff08\u4eca\u65e5\u5b8c\u6210\uff09</li> </ul>"},{"location":"15_Daily_Logs/2025-12-02/#_25","title":"\u5099\u8a3b","text":"<p>\u6240\u6709\u6539\u52d5\u90fd\u5728\u4e3b\u5c08\u6848\uff08<code>fcom-iOS</code>\uff09\u7684 <code>main</code> \u5206\u652f\u4e0a\uff0c\u9019\u4e9b\u6587\u4ef6\u4e0d\u5c6c\u65bc TDDs repository\uff0c\u4f46\u8207 TDD \u6587\u4ef6\u5c0d\u61c9\u7684\u5be6\u4f5c\u76f8\u95dc\u3002</p>"},{"location":"15_Daily_Logs/2025-12-03/","title":"\u5de5\u4f5c\u65e5\u8a8c - 2025-12-03","text":""},{"location":"15_Daily_Logs/2025-12-03/#_1","title":"\ud83d\udccb \u4eca\u65e5\u8a08\u5283","text":"<ul> <li>[x] TDD-022: ChatWebSocketClient \u5be6\u4f5c\u8207\u4fee\u5fa9 [FOOTBALL-9183]</li> <li>[x] \u6aa2\u67e5 TDD \u4e00\u81f4\u6027</li> <li>[x] \u90e8\u7f72 TDD \u6587\u6a94\u5230 GitHub Pages</li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#_2","title":"\u2705 \u5b8c\u6210\u9805\u76ee","text":""},{"location":"15_Daily_Logs/2025-12-03/#tdd-022-chatwebsocketclient-football-9183","title":"TDD-022 \u2014 ChatWebSocketClient \u5be6\u4f5c\u8207\u4fee\u5fa9 [FOOTBALL-9183]","text":"<ul> <li>\u6642\u9593: \u7d04 4 \u5c0f\u6642</li> <li>\u6a94\u6848: </li> <li><code>MatchChat/Sources/MatchChat/Services/API/ChatWebSocketClient.swift</code></li> <li><code>MatchChat/Package.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/API/PrematchCommentClient.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/API/Chat/ChatAPI+Repository.swift</code></li> <li>\u6e2c\u8a66: \u26a0\ufe0f \u5f85\u6dfb\u52a0\u55ae\u5143\u6e2c\u8a66</li> <li>\u5099\u8a3b: </li> <li>\u4fee\u5fa9 SportyStomp API \u8abf\u7528\u932f\u8aa4</li> <li>\u89e3\u6c7a\u4e26\u767c\u76f8\u95dc\u7684\u6578\u64da\u7af6\u722d\u8b66\u544a</li> <li>\u6dfb\u52a0 TODO \u8a3b\u89e3\u6a19\u8a18\u9700\u8981\u9a57\u8b49\u7684\u9805\u76ee</li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#tdd","title":"TDD \u4e00\u81f4\u6027\u6aa2\u67e5","text":"<ul> <li>\u6642\u9593: \u7d04 1 \u5c0f\u6642</li> <li>\u6a94\u6848: <code>13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check.md</code></li> <li>\u7d50\u679c: \u2705 \u5be6\u4f5c\u5b8c\u6210\u5ea6 95%\uff0c\u4e3b\u8981\u7f3a\u5931\u662f\u55ae\u5143\u6e2c\u8a66</li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#tdd-github-pages","title":"\u90e8\u7f72 TDD \u6587\u6a94\u5230 GitHub Pages","text":"<ul> <li>\u6642\u9593: \u7d04 10 \u5206\u9418</li> <li>\u7d50\u679c: \u2705 \u6210\u529f\u90e8\u7f72\u5230 gh-pages branch</li> <li>URL: https://hsinchunghan.github.io/LiveChatAndCommentOngoingFeature/</li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#_3","title":"\ud83d\udea7 \u9032\u884c\u4e2d\u9805\u76ee","text":"<p>\u7121</p>"},{"location":"15_Daily_Logs/2025-12-03/#_4","title":"\ud83d\udc1b \u9047\u5230\u7684\u554f\u984c","text":""},{"location":"15_Daily_Logs/2025-12-03/#1-sportystomp-api","title":"\u554f\u984c 1: SportyStomp API \u53c3\u6578\u932f\u8aa4","text":"<ul> <li>\u554f\u984c: \u521d\u59cb\u5be6\u4f5c\u4f7f\u7528\u4e86\u932f\u8aa4\u7684 API \u53c3\u6578\u540d\u7a31\u548c\u985e\u578b</li> <li>\u539f\u56e0: \u521d\u59cb\u5be6\u4f5c\u4f7f\u7528\u4e86\u932f\u8aa4\u7684 API \u53c3\u6578\u540d\u7a31</li> <li>\u89e3\u6c7a\u65b9\u6848: \u76f4\u63a5\u67e5\u770b SportyStomp \u6e90\u78bc\u78ba\u8a8d\u6b63\u78ba\u7684 API \u7c3d\u540d</li> <li>\u6642\u9593: ~30 \u5206\u9418</li> <li>\u6a94\u6848: <code>ChatWebSocketClient.swift</code></li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#2","title":"\u554f\u984c 2: \u4e26\u767c\u6578\u64da\u7af6\u722d\u8b66\u544a","text":"<ul> <li>\u554f\u984c: </li> <li><code>nonisolated</code> delegate \u65b9\u6cd5\u4e2d\u6355\u7372\u975e <code>Sendable</code> \u985e\u578b</li> <li><code>Any?</code> \u985e\u578b\u5728 <code>@Sendable</code> \u9589\u5305\u4e2d\u5f15\u8d77\u8b66\u544a</li> <li>\u539f\u56e0: </li> <li>\u5916\u90e8\u5eab\u7684 enum \u672a\u6a19\u8a18\u70ba <code>Sendable</code></li> <li><code>Any?</code> \u985e\u578b\u4e0d\u662f <code>Sendable</code></li> <li>\u89e3\u6c7a\u65b9\u6848: </li> <li>\u79fb\u9664 <code>@Sendable</code> \u6a19\u8a18\uff08\u503c\u985e\u578b\u5728 Task \u4e2d\u5df2\u5b89\u5168\uff09</li> <li>\u5c07 <code>Any?</code> \u8f49\u63db\u70ba <code>String?</code></li> <li>\u70ba\u5916\u90e8\u5eab enum \u6dfb\u52a0 <code>@unchecked @retroactive Sendable</code></li> <li>\u6642\u9593: ~1 \u5c0f\u6642</li> <li>\u6a94\u6848: <code>ChatWebSocketClient.swift</code></li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#3-dictionary","title":"\u554f\u984c 3: Dictionary \u6578\u64da\u7af6\u722d\u8b66\u544a","text":"<ul> <li>\u554f\u984c: \u5728 <code>PrematchCommentClient</code> \u4e2d\u50b3\u905e <code>[String: Any]?</code> \u5230 actor \u5f15\u8d77\u8b66\u544a</li> <li>\u539f\u56e0: \u8aa4\u4ee5\u70ba\u9700\u8981\u624b\u52d5\u8907\u88fd\u5b57\u5178</li> <li>\u89e3\u6c7a\u65b9\u6848: \u78ba\u8a8d <code>Dictionary</code> \u662f\u503c\u985e\u578b\uff0c\u76f4\u63a5\u50b3\u905e\u5373\u53ef</li> <li>\u6642\u9593: ~15 \u5206\u9418</li> <li>\u6a94\u6848: <code>PrematchCommentClient.swift</code></li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#cursor","title":"\ud83e\udd16 \u8207 Cursor \u7684\u5c0d\u8a71\u7d71\u6574","text":""},{"location":"15_Daily_Logs/2025-12-03/#_5","title":"\u91cd\u8981\u6c7a\u7b56","text":""},{"location":"15_Daily_Logs/2025-12-03/#1-sportystomp","title":"1. \u6280\u8853\u9078\u578b\uff1a\u4f7f\u7528 SportyStomp","text":"<ul> <li>User Prompt: \"\u4f60\u600e\u9ebc\u8b58\u5225\u8981\u7528 SportyStomp \u4f86\u5be6\u4f5c ChatWebSocketClient \u7684\uff1f\"</li> <li>\u6c7a\u7b56\u5167\u5bb9: </li> <li>\u4f7f\u7528 <code>SportyStomp</code> \u6846\u67b6\u5be6\u4f5c <code>ChatWebSocketClient</code></li> <li>\u7406\u7531\uff1a\u5c08\u6848\u5df2\u6709\u3001TDD \u6307\u5b9a\u3001\u5df2\u6709\u53c3\u8003\u5be6\u4f5c</li> <li>\u76f8\u95dc\u6a94\u6848: </li> <li><code>TDDs/.../12_Tickets/03_client/TDD-022_ChatWebSocketClient.md</code></li> <li><code>TDDs/.../Input/.../CodeRef/WebSocketStompManager.swift</code></li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#2-api-spec","title":"2. API Spec \u517c\u5bb9\u6027\u6aa2\u67e5","text":"<ul> <li>User Prompt: \"\u9019\u500b SportyStomp \u53ef\u4ee5\u6eff\u8db3\u6211\u5b9a\u7fa9\u5728 API Spec \u4e2d\u7684 websocket \u90e8\u5206\u7684 API \u55ce\uff1f\"</li> <li>\u6c7a\u7b56\u5167\u5bb9: </li> <li><code>SportyStomp</code> \u53ef\u4ee5\u6eff\u8db3\u5927\u90e8\u5206\u9700\u6c42\uff0895%\uff09</li> <li>\u9700\u8981\u9a57\u8b49\uff1aaccept-version \u683c\u5f0f\u3001heart-beat header\u3001\u8a0a\u606f\u683c\u5f0f</li> <li>\u6dfb\u52a0 TODO \u8a3b\u89e3\u6a19\u8a18\u9700\u8981\u9a57\u8b49\u7684\u9805\u76ee</li> <li>\u76f8\u95dc\u6a94\u6848: </li> <li><code>MatchChat/Sources/MatchChat/Services/API/ChatWebSocketClient.swift</code></li> <li><code>TDDs/.../08_API Spec &amp; Mapping/01_api_spec.md</code></li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#3","title":"3. \u4e26\u767c\u5b89\u5168\u8655\u7406","text":"<ul> <li>User Prompt: \"\u4fee\u5fa9\u9019\u500b\u554f\u984c\" (\u6578\u64da\u7af6\u722d\u8b66\u544a)</li> <li>\u6c7a\u7b56\u5167\u5bb9: </li> <li>\u79fb\u9664 <code>@Sendable</code> \u6a19\u8a18\uff08\u503c\u985e\u578b\u5728 Task \u4e2d\u5df2\u5b89\u5168\uff09</li> <li>\u5c07 <code>Any?</code> \u8f49\u63db\u70ba <code>String?</code> \u907f\u514d\u6578\u64da\u7af6\u722d</li> <li>\u70ba\u5916\u90e8\u5eab enum \u6dfb\u52a0 <code>@unchecked @retroactive Sendable</code></li> <li>\u76f8\u95dc\u6a94\u6848: <code>MatchChat/Sources/MatchChat/Services/API/ChatWebSocketClient.swift</code></li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#_6","title":"\u5b78\u7fd2\u8981\u9ede","text":""},{"location":"15_Daily_Logs/2025-12-03/#1-swift-task","title":"1. Swift \u4e26\u767c\uff1a\u503c\u985e\u578b\u5728 Task \u4e2d\u7684\u884c\u70ba","text":"<ul> <li>\u63cf\u8ff0: \u503c\u985e\u578b\uff08enum\u3001String\u3001struct\uff09\u5728 <code>Task</code> \u9589\u5305\u4e2d\u6703\u81ea\u52d5\u8907\u88fd</li> <li>\u8981\u9ede: </li> <li>\u4e0d\u9700\u8981\u70ba\u503c\u985e\u578b\u6dfb\u52a0 <code>@Sendable</code> \u6a19\u8a18</li> <li>\u4e0d\u9700\u8981\u5275\u5efa\u672c\u5730\u526f\u672c\uff08\u5982 <code>let connectType = connectType</code>\uff09</li> <li><code>@Sendable</code> \u4e3b\u8981\u7528\u65bc\u5f15\u7528\u985e\u578b\uff0c\u78ba\u4fdd\u7dda\u7a0b\u5b89\u5168</li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#2-swift-nonisolated","title":"2. Swift \u4e26\u767c\uff1anonisolated \u65b9\u6cd5\u7684\u4f7f\u7528","text":"<ul> <li>\u63cf\u8ff0: <code>nonisolated</code> \u65b9\u6cd5\u53ef\u4ee5\u5f9e\u4efb\u4f55\u9694\u96e2\u57df\u8abf\u7528\uff0c\u4f46\u4e0d\u80fd\u76f4\u63a5\u8a2a\u554f actor \u7684\u9694\u96e2\u72c0\u614b</li> <li>\u8981\u9ede: </li> <li>\u4f7f\u7528 <code>nonisolated</code> + <code>Task</code> \u8655\u7406 delegate \u56de\u8abf</li> <li>\u901a\u904e <code>Task</code> \u9032\u5165 actor \u9694\u96e2\u57df</li> <li>\u6240\u6709 delegate \u65b9\u6cd5\u61c9\u6a19\u8a18\u70ba <code>public nonisolated</code></li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#3-sportystomp-api","title":"3. SportyStomp API \u4f7f\u7528","text":"<ul> <li>\u63cf\u8ff0: \u76f4\u63a5\u67e5\u770b\u6e90\u78bc\u662f\u6700\u53ef\u9760\u7684\u65b9\u6cd5\u78ba\u8a8d API \u7c3d\u540d</li> <li>\u8981\u9ede: </li> <li>Swift \u65b9\u6cd5\u53c3\u6578\u540d\u7a31\u548c STOMP \u5354\u8b70\u7684 header \u540d\u7a31\u662f\u4e0d\u540c\u7684\u6982\u5ff5</li> <li><code>unsubscribe(from:)</code> \u7684 <code>from</code> \u53c3\u6578\u6703\u88ab\u653e\u5165 STOMP \u7684 <code>id</code> header</li> <li>\u529f\u80fd\u6b63\u78ba\uff0c\u53ea\u662f\u547d\u540d\u5c64\u7d1a\u4e0d\u540c</li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#4-api-spec","title":"4. API Spec \u517c\u5bb9\u6027\u9a57\u8b49","text":"<ul> <li>\u63cf\u8ff0: \u9700\u8981\u9a57\u8b49\u5be6\u969b\u7684 API \u517c\u5bb9\u6027</li> <li>\u8981\u9ede: </li> <li><code>accept-version</code> \u683c\u5f0f\u9700\u8981\u6e2c\u8a66</li> <li><code>heart-beat</code> header \u9700\u8981\u78ba\u8a8d\u670d\u52d9\u7aef\u9700\u6c42</li> <li>\u8a0a\u606f\u683c\u5f0f\u9700\u8981\u9a57\u8b49\u5be6\u969b\u63a5\u6536\u5230\u7684\u683c\u5f0f</li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#_7","title":"\u554f\u984c\u89e3\u6c7a\u8a18\u9304","text":""},{"location":"15_Daily_Logs/2025-12-03/#1-sportystomp-api_1","title":"\u554f\u984c 1: SportyStomp API \u53c3\u6578\u932f\u8aa4","text":"<ul> <li>User Prompt: \"ChatWebSocketClient - \u5e6b\u6211\u4fee\u5fa9\u9019\u4e9b errors\"</li> <li>\u554f\u984c: </li> <li><code>SportyStomp(host:)</code> \u53c3\u6578\u985e\u578b\u932f\u8aa4\uff08String vs URL\uff09</li> <li><code>subscribe</code>\u3001<code>unsubscribe</code>\u3001<code>send</code> \u65b9\u6cd5\u53c3\u6578\u540d\u7a31\u932f\u8aa4</li> <li>\u539f\u56e0: \u521d\u59cb\u5be6\u4f5c\u4f7f\u7528\u4e86\u932f\u8aa4\u7684 API \u53c3\u6578\u540d\u7a31</li> <li>\u89e3\u6c7a\u65b9\u6848: \u76f4\u63a5\u67e5\u770b SportyStomp \u6e90\u78bc\u78ba\u8a8d\u6b63\u78ba\u7684 API \u7c3d\u540d</li> <li>\u6642\u9593: ~30 \u5206\u9418</li> <li>\u6a94\u6848: <code>ChatWebSocketClient.swift</code></li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#2_1","title":"\u554f\u984c 2: \u4e26\u767c\u6578\u64da\u7af6\u722d\u8b66\u544a","text":"<ul> <li>User Prompt: \"\u4fee\u5fa9\u9019\u500b\u554f\u984c\" (Capture of 'connectType' with non-sendable type)</li> <li>\u554f\u984c: </li> <li><code>nonisolated</code> delegate \u65b9\u6cd5\u4e2d\u6355\u7372\u975e <code>Sendable</code> \u985e\u578b</li> <li><code>Any?</code> \u985e\u578b\u5728 <code>@Sendable</code> \u9589\u5305\u4e2d\u5f15\u8d77\u8b66\u544a</li> <li>\u539f\u56e0: </li> <li>\u5916\u90e8\u5eab\u7684 enum \u672a\u6a19\u8a18\u70ba <code>Sendable</code></li> <li><code>Any?</code> \u985e\u578b\u4e0d\u662f <code>Sendable</code></li> <li>\u89e3\u6c7a\u65b9\u6848: </li> <li>\u79fb\u9664 <code>@Sendable</code> \u6a19\u8a18\uff08\u503c\u985e\u578b\u5728 Task \u4e2d\u5df2\u5b89\u5168\uff09</li> <li>\u5c07 <code>Any?</code> \u8f49\u63db\u70ba <code>String?</code></li> <li>\u70ba\u5916\u90e8\u5eab enum \u6dfb\u52a0 <code>@unchecked @retroactive Sendable</code></li> <li>\u6642\u9593: ~1 \u5c0f\u6642</li> <li>\u6a94\u6848: <code>ChatWebSocketClient.swift</code></li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#3-dictionary_1","title":"\u554f\u984c 3: Dictionary \u6578\u64da\u7af6\u722d\u8b66\u544a","text":"<ul> <li>User Prompt: \"\u70ba\u4ec0\u9ebc\u5728\u9019\u908a\u6211\u8981\u64d4\u5fc3 race condition\"</li> <li>\u554f\u984c: \u5728 <code>PrematchCommentClient</code> \u4e2d\u50b3\u905e <code>[String: Any]?</code> \u5230 actor \u5f15\u8d77\u8b66\u544a</li> <li>\u539f\u56e0: \u8aa4\u4ee5\u70ba\u9700\u8981\u624b\u52d5\u8907\u88fd\u5b57\u5178</li> <li>\u89e3\u6c7a\u65b9\u6848: \u78ba\u8a8d <code>Dictionary</code> \u662f\u503c\u985e\u578b\uff0c\u76f4\u63a5\u50b3\u905e\u5373\u53ef</li> <li>\u6642\u9593: ~15 \u5206\u9418</li> <li>\u6a94\u6848: <code>PrematchCommentClient.swift</code></li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#_8","title":"\u6539\u9032\u5efa\u8b70","text":""},{"location":"15_Daily_Logs/2025-12-03/#1","title":"1. \u6dfb\u52a0\u55ae\u5143\u6e2c\u8a66","text":"<ul> <li>\u5efa\u8b70: \u6dfb\u52a0 <code>ChatWebSocketClientTests.swift</code>\uff0c\u8986\u84cb\u7387\u76ee\u6a19 \u2265 80%</li> <li>\u512a\u5148\u7d1a: \u9ad8</li> <li>\u6e2c\u8a66\u9805\u76ee:</li> <li>\u9023\u7dda\u7ba1\u7406\uff08\u6210\u529f/\u5931\u6557\u5834\u666f\uff09</li> <li>\u8a02\u95b1\u7ba1\u7406\uff08\u55ae\u4e00/\u591a\u8a02\u95b1\u8005\uff09</li> <li>\u8a0a\u606f\u63a5\u6536\u8207\u89e3\u6790</li> <li>\u91cd\u9023\u6a5f\u5236\uff08\u6307\u6578\u9000\u907f\uff09</li> <li>\u932f\u8aa4\u8655\u7406</li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#2-api-spec_1","title":"2. \u9a57\u8b49 API Spec \u517c\u5bb9\u6027","text":"<ul> <li>\u5efa\u8b70: \u5728 Integration Test \u4e2d\u9a57\u8b49 accept-version\u3001heart-beat\u3001\u8a0a\u606f\u683c\u5f0f</li> <li>\u512a\u5148\u7d1a: \u9ad8</li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#3_1","title":"3. \u66f4\u65b0\u65b9\u6cd5\u8a3b\u89e3","text":"<ul> <li>\u5efa\u8b70: \u66f4\u65b0 <code>unsubscribe(subscriberId:)</code> \u7684\u8a3b\u89e3\uff0c\u8aaa\u660e\u7576\u524d\u5be6\u4f5c\u5df2\u7d93\u89e3\u6c7a\u4e86 AsyncStream subscriberId \u7684\u554f\u984c</li> <li>\u512a\u5148\u7d1a: \u4e2d</li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#_9","title":"\u5c0d\u8a71\u8a18\u9304","text":""},{"location":"15_Daily_Logs/2025-12-03/#1-chatwebsocketclient","title":"\u5c0d\u8a71 1: \u4fee\u5fa9 ChatWebSocketClient \u932f\u8aa4","text":"<ul> <li>\u6642\u9593: \u4e0a\u5348</li> <li>User Prompt: \"ChatWebSocketClient - \u5e6b\u6211\u4fee\u5fa9\u9019\u4e9b errors\"</li> <li>\u5167\u5bb9: \u4fee\u5fa9 SportyStomp API \u8abf\u7528\u932f\u8aa4\uff0c\u89e3\u6c7a\u4e26\u767c\u76f8\u95dc\u7684\u6578\u64da\u7af6\u722d\u8b66\u544a</li> <li>\u7d50\u679c: \u2705 \u6210\u529f\u4fee\u5fa9\u6240\u6709\u932f\u8aa4</li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#2_2","title":"\u5c0d\u8a71 2: \u7406\u89e3\u6280\u8853\u9078\u578b","text":"<ul> <li>\u6642\u9593: \u4e0a\u5348</li> <li>User Prompt: \"\u4f60\u600e\u9ebc\u8b58\u5225\u8981\u7528 SportyStomp \u4f86\u5be6\u4f5c ChatWebSocketClient \u7684\uff1f\"</li> <li>\u5167\u5bb9: \u89e3\u91cb\u4f7f\u7528 SportyStomp \u7684\u539f\u56e0\uff08\u5df2\u6709\u53c3\u8003\u5be6\u4f5c\u3001TDD \u6307\u5b9a\uff09</li> <li>\u7d50\u679c: \u2705 \u78ba\u8a8d\u6280\u8853\u9078\u578b\u6b63\u78ba</li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#3-api-spec","title":"\u5c0d\u8a71 3: API Spec \u517c\u5bb9\u6027\u6aa2\u67e5","text":"<ul> <li>\u6642\u9593: \u4e0b\u5348</li> <li>User Prompt: \"\u9019\u500b SportyStomp \u53ef\u4ee5\u6eff\u8db3\u6211\u5b9a\u7fa9\u5728 API Spec \u4e2d\u7684 websocket \u90e8\u5206\u7684 API \u55ce\uff1f\"</li> <li>\u5167\u5bb9: \u6aa2\u67e5 SportyStomp \u662f\u5426\u6eff\u8db3 API Spec \u8981\u6c42\uff0c\u8b58\u5225\u9700\u8981\u9a57\u8b49\u7684\u9805\u76ee</li> <li>\u7d50\u679c: \u2705 \u78ba\u8a8d\u53ef\u4ee5\u6eff\u8db3\u5927\u90e8\u5206\u9700\u6c42\uff0c\u6dfb\u52a0 TODO \u8a3b\u89e3</li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#4","title":"\u5c0d\u8a71 4: \u7406\u89e3\u53c3\u6578\u540d\u7a31\u5dee\u7570","text":"<ul> <li>\u6642\u9593: \u4e0b\u5348</li> <li>User Prompt: \"unsubscribe \u53c3\u6578\u540d\u7a31...\u9019\u500b\u662f\u4ec0\u9ebc\u610f\u601d\"</li> <li>\u5167\u5bb9: \u89e3\u91cb Swift \u65b9\u6cd5\u53c3\u6578\u540d\u7a31\u548c STOMP \u5354\u8b70 header \u540d\u7a31\u7684\u5dee\u7570</li> <li>\u7d50\u679c: \u2705 \u7406\u89e3\u53c3\u6578\u540d\u7a31\u548c\u5be6\u969b\u767c\u9001\u7684 STOMP frame \u7684\u95dc\u4fc2</li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#5-tdd","title":"\u5c0d\u8a71 5: TDD \u4e00\u81f4\u6027\u6aa2\u67e5","text":"<ul> <li>\u6642\u9593: \u4e0b\u5348</li> <li>User Prompt: \"@check-tdd-consistency.md\"</li> <li>\u5167\u5bb9: \u6aa2\u67e5 TDD-022 \u7684\u5be6\u4f5c\u662f\u5426\u8207 TDD \u6587\u4ef6\u4e00\u81f4</li> <li>\u7d50\u679c: \u2705 \u751f\u6210\u4e00\u81f4\u6027\u6aa2\u67e5\u5831\u544a\uff0c\u5be6\u4f5c\u5b8c\u6210\u5ea6 95%</li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#6-tdd","title":"\u5c0d\u8a71 6: \u90e8\u7f72 TDD \u6587\u6a94","text":"<ul> <li>\u6642\u9593: \u4e0b\u5348</li> <li>User Prompt: \"@deploy-tdd-to-mkdocs.md\"</li> <li>\u5167\u5bb9: \u90e8\u7f72 TDD \u6587\u6a94\u5230 GitHub Pages</li> <li>\u7d50\u679c: \u2705 \u6210\u529f\u90e8\u7f72\u5230 gh-pages branch</li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#_10","title":"\ud83d\udca1 \u5b78\u7fd2\u8207\u53cd\u601d","text":""},{"location":"15_Daily_Logs/2025-12-03/#_11","title":"\u767c\u73fe\u6216\u5b78\u7fd2\u5230\u7684\u65b0\u77e5\u8b58","text":"<ol> <li>Swift \u4e26\u767c: \u6df1\u5165\u7406\u89e3\u4e86\u503c\u985e\u578b\u5728 Task \u4e2d\u7684\u884c\u70ba\uff0c\u4ee5\u53ca <code>nonisolated</code> \u548c <code>@Sendable</code> \u7684\u4f7f\u7528\u5834\u666f</li> <li>API \u4f7f\u7528: \u5b78\u6703\u4e86\u76f4\u63a5\u67e5\u770b\u6e90\u78bc\u78ba\u8a8d API \u7c3d\u540d\u7684\u65b9\u6cd5</li> <li>\u6280\u8853\u9078\u578b: \u7406\u89e3\u4e86\u57fa\u65bc\u73fe\u6709\u4ee3\u78bc\u5eab\u548c TDD \u6587\u4ef6\u9032\u884c\u6280\u8853\u9078\u578b\u7684\u904e\u7a0b</li> <li>\u6e2c\u8a66\u8986\u84cb: \u8a8d\u8b58\u5230\u55ae\u5143\u6e2c\u8a66\u7684\u91cd\u8981\u6027\uff0c\u9700\u8981\u5f8c\u7e8c\u88dc\u5145</li> </ol>"},{"location":"15_Daily_Logs/2025-12-03/#_12","title":"\u53ef\u4ee5\u6539\u9032\u7684\u5730\u65b9","text":"<ol> <li>\u6e2c\u8a66\u8986\u84cb\u7387: \u61c9\u8a72\u5728\u5be6\u4f5c\u529f\u80fd\u7684\u540c\u6642\u6216\u4e4b\u5f8c\u7acb\u5373\u6dfb\u52a0\u6e2c\u8a66\uff0c\u800c\u4e0d\u662f\u7559\u5230\u5f8c\u7e8c</li> <li>\u6587\u4ef6\u540c\u6b65: \u53ef\u4ee5\u8003\u616e\u81ea\u52d5\u5316\u6587\u6a94\u66f4\u65b0\u6d41\u7a0b\uff0c\u78ba\u4fdd\u6587\u6a94\u8207\u5be6\u4f5c\u540c\u6b65</li> <li>\u67b6\u69cb\u5716: \u61c9\u8a72\u53ca\u6642\u66f4\u65b0\u67b6\u69cb\u5716\uff0c\u53cd\u6620\u5be6\u969b\u7684\u5be6\u4f5c\u7d50\u69cb</li> </ol>"},{"location":"15_Daily_Logs/2025-12-03/#_13","title":"\u4e0b\u6b21\u53ef\u4ee5\u505a\u5f97\u66f4\u597d\u7684\u5730\u65b9","text":"<ol> <li>\u63d0\u524d\u898f\u5283: \u5728\u5be6\u4f5c\u524d\u5148\u78ba\u8a8d\u6240\u6709 dependencies \u548c\u67b6\u69cb\u6c7a\u7b56</li> <li>\u6e2c\u8a66\u9a45\u52d5: \u53ef\u4ee5\u8003\u616e\u5148\u5beb\u6e2c\u8a66\u518d\u5be6\u4f5c\uff08TDD \u65b9\u5f0f\uff09</li> <li>API \u9a57\u8b49: \u5728\u5be6\u4f5c\u524d\u5148\u9a57\u8b49 API \u898f\u683c\uff0c\u907f\u514d\u5f8c\u7e8c\u8fd4\u5de5</li> </ol>"},{"location":"15_Daily_Logs/2025-12-03/#cursor_1","title":"\u8207 Cursor \u5354\u4f5c\u7684\u6539\u9032\u7a7a\u9593","text":"<ol> <li>\u5c0d\u8a71\u6548\u7387: \u53ef\u4ee5\u66f4\u660e\u78ba\u5730\u63d0\u51fa\u554f\u984c\uff0c\u6e1b\u5c11\u4f86\u56de\u78ba\u8a8d\u7684\u6b21\u6578</li> <li>\u6c7a\u7b56\u8a18\u9304: \u61c9\u8a72\u66f4\u53ca\u6642\u5730\u8a18\u9304\u91cd\u8981\u6c7a\u7b56\uff0c\u907f\u514d\u5f8c\u7e8c\u907a\u5fd8</li> <li>\u6e2c\u8a66\u7b56\u7565: \u53ef\u4ee5\u5728\u5be6\u4f5c\u524d\u5c31\u8a0e\u8ad6\u6e2c\u8a66\u7b56\u7565\uff0c\u800c\u4e0d\u662f\u5be6\u4f5c\u5f8c\u518d\u8003\u616e</li> </ol>"},{"location":"15_Daily_Logs/2025-12-03/#_14","title":"\ud83d\udcca \u6642\u9593\u7d71\u8a08","text":""},{"location":"15_Daily_Logs/2025-12-03/#_15","title":"\u958b\u767c\u6642\u9593","text":"<ul> <li>\u7e3d\u8a08: ~4 \u5c0f\u6642</li> <li>\u7d30\u9805: </li> <li>ChatWebSocketClient \u5be6\u4f5c: 2 \u5c0f\u6642</li> <li>\u4fee\u5fa9\u4e26\u767c\u8b66\u544a: 1 \u5c0f\u6642</li> <li>API \u53c3\u6578\u4fee\u6b63: 1 \u5c0f\u6642</li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#_16","title":"\u6e2c\u8a66\u6642\u9593","text":"<ul> <li>\u7e3d\u8a08: 0 \u5c0f\u6642</li> <li>\u8aaa\u660e: \u672a\u5be6\u4f5c\u6e2c\u8a66\uff0c\u5f85\u5f8c\u7e8c\u88dc\u5145</li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#_17","title":"\u6587\u4ef6\u66f4\u65b0","text":"<ul> <li>\u7e3d\u8a08: ~1 \u5c0f\u6642</li> <li>\u7d30\u9805: </li> <li>\u66f4\u65b0\u5de5\u4f5c\u65e5\u8a8c: 30 \u5206\u9418</li> <li>TDD \u4e00\u81f4\u6027\u6aa2\u67e5: 30 \u5206\u9418</li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#_18","title":"\u554f\u984c\u89e3\u6c7a","text":"<ul> <li>\u7e3d\u8a08: ~2 \u5c0f\u6642</li> <li>\u7d30\u9805:</li> <li>SportyStomp API \u932f\u8aa4: 30 \u5206\u9418</li> <li>\u4e26\u767c\u6578\u64da\u7af6\u722d\u8b66\u544a: 1 \u5c0f\u6642</li> <li>Dictionary \u6578\u64da\u7af6\u722d: 15 \u5206\u9418</li> <li>API Spec \u517c\u5bb9\u6027\u8a0e\u8ad6: 15 \u5206\u9418</li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#cursor_2","title":"\u8207 Cursor \u5354\u4f5c\u6642\u9593","text":"<ul> <li>\u7e3d\u8a08: ~1 \u5c0f\u6642</li> <li>\u8aaa\u660e: \u8a0e\u8ad6\u6280\u8853\u9078\u578b\u3001API \u4f7f\u7528\u3001\u4e26\u767c\u554f\u984c\u89e3\u6c7a</li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#_19","title":"\u6703\u8b70/\u8a0e\u8ad6","text":"<ul> <li>\u7e3d\u8a08: 0 \u5c0f\u6642</li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#_20","title":"\u7e3d\u8a08","text":"<ul> <li>\u7e3d\u8a08: ~8 \u5c0f\u6642</li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#_21","title":"\ud83d\udd04 \u660e\u65e5\u8a08\u5283","text":"<ul> <li>[ ] \u6dfb\u52a0 ChatWebSocketClient \u55ae\u5143\u6e2c\u8a66</li> <li>[ ] \u9a57\u8b49 API Spec \u517c\u5bb9\u6027\uff08Integration Test\uff09</li> <li>[ ] \u66f4\u65b0\u65b9\u6cd5\u8a3b\u89e3</li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#_22","title":"\ud83d\udcdd \u5176\u4ed6\u5099\u8a3b","text":""},{"location":"15_Daily_Logs/2025-12-03/#_23","title":"\u6210\u5c31\u8207\u4eae\u9ede","text":"<ol> <li>\u5be6\u4f5c\u5b8c\u6210\u5ea6: TDD-022 \u9054\u5230 95% \u5b8c\u6210\u5ea6</li> <li>\u6280\u8853\u96e3\u5ea6: \u6210\u529f\u89e3\u6c7a\u591a\u500b\u4e26\u767c\u76f8\u95dc\u7684\u6280\u8853\u554f\u984c</li> <li>\u7a0b\u5f0f\u78bc\u54c1\u8cea: \u7121 linter \u932f\u8aa4\uff0c\u7b26\u5408 Swift Concurrency \u6700\u4f73\u5be6\u8e10</li> </ol>"},{"location":"15_Daily_Logs/2025-12-03/#_24","title":"\u5f85\u8fa6\u4e8b\u9805","text":"<ol> <li>\u26a0\ufe0f \u6e2c\u8a66\u8986\u84cb\u7387: \u76ee\u524d 0%\uff0c\u9700\u512a\u5148\u88dc\u5145</li> <li>\u26a0\ufe0f API \u9a57\u8b49: WebSocket \u53c3\u6578\u9700\u8207\u5f8c\u7aef\u78ba\u8a8d</li> <li>\ud83d\udcda \u65b9\u6cd5\u8a3b\u89e3: \u66f4\u65b0 unsubscribe \u65b9\u6cd5\u8a3b\u89e3</li> </ol>"},{"location":"15_Daily_Logs/2025-12-03/#_25","title":"\u76f8\u95dc\u9023\u7d50","text":"<ul> <li>Branch: feature/FOOTBALL-9180-9184-DataLayer</li> <li>Commit: <code>09e4ac3ef8</code></li> <li>TDD Report: <code>13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check.md</code></li> <li>GitHub Pages: https://hsinchunghan.github.io/LiveChatAndCommentOngoingFeature/</li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#_26","title":"\u6280\u8853\u7b46\u8a18","text":""},{"location":"15_Daily_Logs/2025-12-03/#nonisolated-task","title":"nonisolated + Task \u6a21\u5f0f","text":"<p>\u7528\u9014: \u8655\u7406 delegate \u56de\u8abf\uff0c\u907f\u514d\u5916\u90e8\u8abf\u7528\u8005\u9700\u8981\u9032\u5165 async context</p>"},{"location":"15_Daily_Logs/2025-12-03/#unchecked-retroactive-sendable","title":"@unchecked @retroactive Sendable","text":"<p>\u7528\u9014: \u70ba\u5916\u90e8\u5eab\u7684\u985e\u578b\u6dfb\u52a0 Sendable \u4e00\u81f4\u6027</p>"},{"location":"15_Daily_Logs/2025-12-03/#_27","title":"\ud83d\udcc4 \u76f8\u95dc\u6587\u4ef6\u6539\u52d5\u8a18\u9304","text":""},{"location":"15_Daily_Logs/2025-12-03/#git-commits","title":"Git Commits","text":""},{"location":"15_Daily_Logs/2025-12-03/#1-fix-correct-sportystomp-api-usage-and-resolve-concurrency-warnings","title":"1. fix: correct SportyStomp API usage and resolve concurrency warnings","text":"<ul> <li>Commit: <code>09e4ac3ef8</code></li> <li>\u8a0a\u606f: <code>fix: correct SportyStomp API usage and resolve concurrency warnings [FOOTBALL-9180]</code></li> <li>\u6642\u9593: 2025-12-03</li> <li>\u6539\u52d5\u6587\u4ef6:</li> <li><code>MatchChat/Package.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Models/PrematchComment/PrematchComment+PrematchCommentAPI.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/API/Chat/ChatAPI+Repository.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/API/ChatWebSocketClient.swift</code></li> <li><code>MatchChat/Sources/MatchChat/Services/API/PrematchCommentClient.swift</code></li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#_28","title":"\u6587\u4ef6\u7d71\u8a08","text":"<ul> <li>\u7e3d Commits: 1</li> <li>\u65b0\u589e\u6587\u4ef6: 0</li> <li>\u4fee\u6539\u6587\u4ef6: 5</li> <li>\u7e3d\u7a0b\u5f0f\u78bc\u884c\u6578: ~58 insertions, 17 deletions</li> <li>\u6e2c\u8a66\u7a0b\u5f0f\u78bc: 0 lines\uff08\u5f85\u6dfb\u52a0\uff09</li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#tdd-tickets","title":"\u76f8\u95dc TDD Tickets","text":"<ul> <li>TDD-022: ChatWebSocketClient [FOOTBALL-9183] \u2705 95% \u5b8c\u6210</li> </ul>"},{"location":"15_Daily_Logs/2025-12-03/#_29","title":"\u5099\u8a3b","text":"<p>\u6240\u6709\u6539\u52d5\u90fd\u5728\u4e3b\u5c08\u6848\uff08<code>fcom-iOS</code>\uff09\u7684 <code>feature/FOOTBALL-9180-9184-DataLayer</code> \u5206\u652f\u4e0a\u3002</p>"},{"location":"15_Daily_Logs/2025-12-04/","title":"\u5de5\u4f5c\u65e5\u8a8c - 2025-12-04","text":""},{"location":"15_Daily_Logs/2025-12-04/#_1","title":"\ud83d\udccb \u4eca\u65e5\u8a08\u5283","text":"<ul> <li>[x] Data Layer \u91cd\u69cb: Swift Concurrency \u6539\u9032 [FOOTBALL-9180-9184]</li> <li>\u4f30\u6642: 1 \u5929</li> <li>\u5be6\u969b: 1 \u5929</li> <li>\u72c0\u614b: \u2705 \u5df2\u5b8c\u6210</li> <li> <p>\u5167\u5bb9: SharedBetsMetadata \u5305\u88dd\u578b\u5225 + WebSocket nonisolated \u6539\u9032</p> </li> <li> <p>[x] Git \u914d\u7f6e\u512a\u5316: buildServer.json \u672c\u5730\u5316</p> </li> <li>\u4f30\u6642: 0.5 \u5c0f\u6642</li> <li>\u5be6\u969b: 0.5 \u5c0f\u6642</li> <li> <p>\u72c0\u614b: \u2705 \u5df2\u5b8c\u6210</p> </li> <li> <p>[x] TDD \u4e00\u81f4\u6027\u6aa2\u67e5: TDD-020, TDD-021, TDD-022</p> </li> <li>\u4f30\u6642: 1 \u5c0f\u6642</li> <li>\u5be6\u969b: 1 \u5c0f\u6642</li> <li> <p>\u72c0\u614b: \u2705 \u5df2\u5b8c\u6210</p> </li> <li> <p>[x] TDD \u6587\u4ef6\u66f4\u65b0: \u6839\u64da\u5be6\u4f5c\u6539\u9032\u66f4\u65b0 TDD</p> </li> <li>\u4f30\u6642: 2 \u5c0f\u6642</li> <li>\u5be6\u969b: 2 \u5c0f\u6642</li> <li> <p>\u72c0\u614b: \u2705 \u5df2\u5b8c\u6210</p> </li> <li> <p>[x] \u8b8a\u66f4\u65e5\u8a8c\u66f4\u65b0: CHANGELOG.md + implementation_status.md</p> </li> <li>\u4f30\u6642: 0.5 \u5c0f\u6642</li> <li>\u5be6\u969b: 0.5 \u5c0f\u6642</li> <li>\u72c0\u614b: \u2705 \u5df2\u5b8c\u6210</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#_2","title":"\u2705 \u5b8c\u6210\u9805\u76ee","text":""},{"location":"15_Daily_Logs/2025-12-04/#1-git","title":"1. Git \u914d\u7f6e\u672c\u5730\u5316","text":"<ul> <li>\u9805\u76ee: \u5c07 <code>buildServer.json</code> \u6392\u9664\u5728 git \u8ffd\u8e64\u4e4b\u5916</li> <li>\u5b8c\u6210\u5ea6: 100%</li> <li>\u76f8\u95dc\u6a94\u6848: <code>.gitignore</code></li> <li>Commit: <code>41c38d3195</code></li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#2-swift-concurrency","title":"2. Swift Concurrency \u91cd\u69cb","text":"<ul> <li>\u9805\u76ee: \u5f15\u5165 SharedBetsMetadata \u5305\u88dd\u578b\u5225</li> <li>\u5b8c\u6210\u5ea6: 100%</li> <li>\u5f71\u97ff\u7bc4\u570d: </li> <li><code>PrematchCommentAPI+RepositoryProtocol.swift</code></li> <li><code>PrematchCommentAPI+Repository.swift</code></li> <li><code>PrematchCommentClient.swift</code></li> <li><code>PrematchCommentClientProtocol.swift</code></li> <li>Commit: <code>1f97afa505</code></li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#3-websocket","title":"3. WebSocket \u4f75\u767c\u6539\u9032","text":"<ul> <li>\u9805\u76ee: \u5c07 subscribe \u65b9\u6cd5\u6539\u70ba nonisolated</li> <li>\u5b8c\u6210\u5ea6: 100%</li> <li>\u5f71\u97ff\u7bc4\u570d:</li> <li><code>ChatWebSocketClient.swift</code></li> <li><code>ChatWebSocketClientProtocol.swift</code></li> <li>Commit: <code>163d376ab6</code></li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#4-xcode","title":"4. Xcode \u9805\u76ee\u914d\u7f6e","text":"<ul> <li>\u9805\u76ee: \u65b0\u589e MatchChat package \u4f9d\u8cf4</li> <li>\u5b8c\u6210\u5ea6: 100%</li> <li>\u76f8\u95dc\u6a94\u6848: <code>FCom.xcodeproj/project.pbxproj</code></li> <li>Commit: <code>c00431ad62</code></li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#5-tdd","title":"5. TDD \u4e00\u81f4\u6027\u6aa2\u67e5","text":"<ul> <li>\u9805\u76ee: \u6aa2\u67e5 TDD-020, TDD-021, TDD-022 \u5be6\u4f5c\u4e00\u81f4\u6027</li> <li>\u5b8c\u6210\u5ea6: 100%</li> <li>\u8f38\u51fa\u6a94\u6848: <code>tdd_consistency_check_2025-12-04.md</code></li> <li>\u8a55\u5206: 5/5 \u2b50\u2b50\u2b50\u2b50\u2b50</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#6-tdd","title":"6. TDD \u6587\u4ef6\u66f4\u65b0","text":"<ul> <li>\u9805\u76ee: \u66f4\u65b0 3 \u500b TDD tickets \u4ee5\u53cd\u6620\u5be6\u4f5c\u6539\u9032</li> <li>\u5b8c\u6210\u5ea6: 100%</li> <li>\u66f4\u65b0\u6a94\u6848:</li> <li>TDD-010: PrematchCommentAPI</li> <li>TDD-020: PrematchCommentClient</li> <li>TDD-022: ChatWebSocketClient</li> <li>\u8f38\u51fa\u6a94\u6848: <code>tdd_updates_2025-12-04.md</code></li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#7","title":"7. \u8b8a\u66f4\u65e5\u8a8c\u66f4\u65b0","text":"<ul> <li>\u9805\u76ee: \u66f4\u65b0 CHANGELOG \u548c implementation_status</li> <li>\u5b8c\u6210\u5ea6: 100%</li> <li>\u76f8\u95dc\u6a94\u6848:</li> <li><code>14_Changelog/CHANGELOG.md</code></li> <li><code>13_Implementation_Status/implementation_status.md</code></li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#8-cursor","title":"8. Cursor \u547d\u4ee4\u512a\u5316","text":"<ul> <li>\u9805\u76ee: \u64f4\u5145 check-tdd-consistency.md</li> <li>\u5b8c\u6210\u5ea6: 100%</li> <li>\u65b0\u589e\u5167\u5bb9: TDD \u66f4\u65b0\u529f\u80fd\u3001\u66f4\u65b0\u539f\u5247\u3001\u8f38\u51fa\u6587\u4ef6\u8aaa\u660e</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#_3","title":"\ud83d\udea7 \u9032\u884c\u4e2d\u9805\u76ee","text":"<p>\u7121\uff08\u6240\u6709\u8a08\u5283\u9805\u76ee\u5df2\u5b8c\u6210\uff09</p>"},{"location":"15_Daily_Logs/2025-12-04/#_4","title":"\ud83d\udc1b \u9047\u5230\u7684\u554f\u984c","text":""},{"location":"15_Daily_Logs/2025-12-04/#1-swift-concurrency-sendable","title":"1. Swift Concurrency Sendable \u8b66\u544a","text":"<ul> <li>\u554f\u984c: <code>[String: Any]</code> \u4e0d\u7b26\u5408 Sendable \u5354\u8b70</li> <li>\u5f71\u97ff: publishComment \u65b9\u6cd5\u8de8 actor \u908a\u754c\u50b3\u905e\u6642\u7522\u751f\u8b66\u544a</li> <li>\u539f\u56e0: Dictionary \u6cdb\u578b\u503c\u985e\u578b <code>Any</code> \u4e0d\u7b26\u5408 Sendable</li> <li>\u89e3\u6c7a\u65b9\u6848: \u5f15\u5165 SharedBetsMetadata \u5305\u88dd\u578b\u5225</li> <li>\u6642\u9593: ~1 \u5c0f\u6642</li> <li>\u72c0\u614b: \u2705 \u5df2\u89e3\u6c7a</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#2-actor-isolated","title":"2. Actor-isolated \u65b9\u6cd5\u7684\u6613\u7528\u6027\u554f\u984c","text":"<ul> <li>\u554f\u984c: subscribe \u65b9\u6cd5\u9700\u8981 await\uff0c\u8abf\u7528\u65b9\u5fc5\u9808\u5728 async context</li> <li>\u5f71\u97ff: API \u4f7f\u7528\u4e0d\u4fbf\uff0c\u589e\u52a0\u8abf\u7528\u8907\u96dc\u5ea6</li> <li>\u539f\u56e0: Actor-isolated \u65b9\u6cd5\u9ed8\u8a8d\u9700\u8981 await</li> <li>\u89e3\u6c7a\u65b9\u6848: \u5c07 subscribe \u6539\u70ba nonisolated\uff0c\u5167\u90e8\u7528 Task \u5305\u88dd</li> <li>\u6642\u9593: ~1 \u5c0f\u6642</li> <li>\u72c0\u614b: \u2705 \u5df2\u89e3\u6c7a</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#3-tdd","title":"3. TDD \u6587\u4ef6\u8207\u5be6\u4f5c\u4e0d\u540c\u6b65","text":"<ul> <li>\u554f\u984c: \u5be6\u4f5c\u5305\u542b\u512a\u65bc TDD \u7684\u6539\u9032\uff0c\u4f46\u6587\u4ef6\u672a\u66f4\u65b0</li> <li>\u5f71\u97ff: \u53ef\u80fd\u5c0e\u81f4\u5f8c\u7e8c\u958b\u767c\u8005\u56f0\u60d1</li> <li>\u539f\u56e0: \u5be6\u4f5c\u6642\u9032\u884c\u4e86\u8a2d\u8a08\u6539\u9032\uff0c\u4f46\u672a\u53ca\u6642\u66f4\u65b0 TDD</li> <li>\u89e3\u6c7a\u65b9\u6848: \u4e3b\u52d5\u66f4\u65b0 TDD \u6587\u4ef6\u4e26\u8a18\u9304\u8a2d\u8a08\u6c7a\u7b56</li> <li>\u6642\u9593: ~2 \u5c0f\u6642</li> <li>\u72c0\u614b: \u2705 \u5df2\u89e3\u6c7a</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#cursor","title":"\ud83e\udd16 \u8207 Cursor \u7684\u5c0d\u8a71\u7d71\u6574","text":""},{"location":"15_Daily_Logs/2025-12-04/#_5","title":"\u91cd\u8981\u6c7a\u7b56","text":""},{"location":"15_Daily_Logs/2025-12-04/#1-git_1","title":"1. Git \u914d\u7f6e\u672c\u5730\u5316\u7b56\u7565","text":"<ul> <li>\u80cc\u666f: buildServer.json \u9700\u8981\u5728 rebase/merge \u6642\u4fdd\u7559</li> <li>\u6c7a\u7b56: \u4f7f\u7528 .gitignore\uff08\u5718\u968a\u5171\u4eab\uff09\u800c\u975e .git/info/exclude\uff08\u500b\u4eba\uff09</li> <li>\u7406\u7531: buildServer.json \u672c\u5c31\u61c9\u8a72\u662f\u672c\u5730\u914d\u7f6e\uff0c\u5718\u968a\u5171\u4eab\u898f\u5247\u66f4\u5408\u7406</li> <li>\u76f8\u95dc\u6a94\u6848: <code>.gitignore</code></li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#2-sharedbetsmetadata","title":"2. \u5f15\u5165 SharedBetsMetadata \u5305\u88dd\u578b\u5225","text":"<ul> <li>\u80cc\u666f: <code>[String: Any]</code> \u4e0d\u7b26\u5408 Sendable \u5354\u8b70</li> <li>\u6c7a\u7b56: \u5275\u5efa SharedBetsMetadata struct \u5305\u88dd\u5b57\u5178</li> <li>\u8a2d\u8a08: Client/Repository \u4f7f\u7528\u5305\u88dd\u578b\u5225\uff0cAPI \u5c64\u89e3\u5305\u6210\u539f\u59cb\u5b57\u5178</li> <li>\u512a\u9ede: </li> <li>\u89e3\u6c7a Swift Concurrency \u8b66\u544a</li> <li>\u63d0\u5347\u578b\u5225\u5b89\u5168\u6027</li> <li>\u672a\u4f86\u53ef\u64f4\u5c55\u9a57\u8b49\u908f\u8f2f</li> <li>\u76f8\u95dc Commits: <code>1f97afa505</code></li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#3-websocket-subscribe-nonisolated","title":"3. WebSocket subscribe \u65b9\u6cd5 nonisolated \u5316","text":"<ul> <li>\u80cc\u666f: Actor-isolated \u65b9\u6cd5\u8fd4\u56de AsyncStream \u9700\u8981 await</li> <li>\u6c7a\u7b56: \u4f7f\u7528 nonisolated + Task \u6a21\u5f0f</li> <li>\u512a\u9ede:</li> <li>\u540c\u6b65\u5275\u5efa AsyncStream</li> <li>\u5be6\u969b\u908f\u8f2f\u4ecd\u5728 actor \u5167\u57f7\u884c</li> <li>\u6539\u5584 API \u6613\u7528\u6027</li> <li>\u5411\u5f8c\u517c\u5bb9</li> <li>\u76f8\u95dc Commits: <code>163d376ab6</code></li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#4-tdd","title":"4. TDD \u6587\u4ef6\u540c\u6b65\u66f4\u65b0\u7b56\u7565","text":"<ul> <li>\u80cc\u666f: \u5be6\u4f5c\u5305\u542b\u512a\u65bc\u539f TDD \u7684\u8a2d\u8a08\u6539\u9032</li> <li>\u6c7a\u7b56: \u4e3b\u52d5\u66f4\u65b0 TDD \u6587\u4ef6\u4ee5\u53cd\u6620\u5be6\u4f5c\u6539\u9032</li> <li>\u57f7\u884c: \u66f4\u65b0 3 \u500b TDD tickets + \u751f\u6210\u66f4\u65b0\u8a18\u9304\u6587\u6a94</li> <li>\u8f38\u51fa: <code>tdd_updates_2025-12-04.md</code></li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#5-commit","title":"5. Commit \u62c6\u5206\u7b56\u7565","text":"<ul> <li>\u539f\u5247: \u6309\u908f\u8f2f\u529f\u80fd\u62c6\u5206\uff0c\u800c\u975e\u6309\u6a94\u6848\u62c6\u5206</li> <li>\u7d50\u679c: 4 \u500b\u6e05\u6670\u7684 commits</li> <li>chore: gitignore \u66f4\u65b0\uff08\u7368\u7acb\uff09</li> <li>refactor: SharedBetsMetadata\uff08Sendable\uff09</li> <li>refactor: nonisolated subscribe\uff08\u4f75\u767c\uff09</li> <li>chore: Xcode \u914d\u7f6e\u66f4\u65b0</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#_6","title":"\u5b78\u7fd2\u8981\u9ede","text":""},{"location":"15_Daily_Logs/2025-12-04/#1-swift-concurrency","title":"1. Swift Concurrency \u6df1\u5ea6\u7406\u89e3","text":"<ul> <li>@unchecked Sendable \u7684\u4f7f\u7528\u5834\u666f\u548c\u6ce8\u610f\u4e8b\u9805</li> <li>Actor isolation vs nonisolated \u7684\u53d6\u6368</li> <li>AsyncStream \u7684\u6b63\u78ba\u5275\u5efa\u6a21\u5f0f</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#2","title":"2. \u908a\u754c\u5c64\u7684\u578b\u5225\u8f49\u63db\u7b56\u7565","text":"<ul> <li>\u5916\u5c64\uff08Client\uff09: \u5f37\u578b\u5225\u5305\u88dd\uff08Sendable\uff09</li> <li>\u4e2d\u9593\u5c64\uff08Repository\uff09: \u89e3\u5305/\u8f49\u63db</li> <li>\u5167\u5c64\uff08API/Network\uff09: \u539f\u59cb\u578b\u5225\uff08JSON \u76f8\u5bb9\uff09</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#3-tdd_1","title":"3. TDD \u6587\u4ef6\u7ba1\u7406\u54f2\u5b78","text":"<ul> <li>TDD \u6587\u4ef6\u4e0d\u662f\u8056\u7d93\uff0c\u53ef\u4ee5\u4fee\u6b63</li> <li>\u5be6\u4f5c\u6539\u9032\u61c9\u8a72\u56de\u994b\u5230 TDD</li> <li>\u4fdd\u6301\u6587\u4ef6\u8207\u5be6\u4f5c\u540c\u6b65\u5f88\u91cd\u8981</li> <li>\u8a18\u9304\u70ba\u4f55\u504f\u96e2\u539f TDD</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#4-protocol","title":"4. Protocol \u5c0e\u5411\u8a2d\u8a08","text":"<ul> <li>\u6240\u6709 Client \u5be6\u4f5c Protocol</li> <li>\u652f\u63f4\u4f9d\u8cf4\u6ce8\u5165\u548c\u6e2c\u8a66 mock</li> <li>\u7b26\u5408 SOLID \u539f\u5247</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#_7","title":"\u554f\u984c\u89e3\u6c7a\u8a18\u9304","text":""},{"location":"15_Daily_Logs/2025-12-04/#1-sendable","title":"\u554f\u984c 1: Sendable \u5354\u8b70\u885d\u7a81","text":"<ul> <li>\u932f\u8aa4\u8a0a\u606f: <code>warning: passing non-sendable type '[String: Any]?' across actor boundary</code></li> <li>\u6839\u672c\u539f\u56e0: Dictionary \u4e0d\u662f Sendable \u578b\u5225</li> <li>\u89e3\u6c7a\u65b9\u6848: \u5275\u5efa <code>@unchecked Sendable</code> \u5305\u88dd\u578b\u5225</li> <li>\u5b78\u7fd2: \u5728\u908a\u754c\u5c64\u9032\u884c\u578b\u5225\u8f49\u63db</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#2-actor-isolated-await","title":"\u554f\u984c 2: Actor-isolated \u65b9\u6cd5\u7684 await \u8981\u6c42","text":"<ul> <li>\u554f\u984c\u63cf\u8ff0: subscribe \u65b9\u6cd5\u9700\u8981 await\uff0c\u589e\u52a0\u4f7f\u7528\u8907\u96dc\u5ea6</li> <li>\u6839\u672c\u539f\u56e0: Actor-isolated \u65b9\u6cd5\u9ed8\u8a8d\u9700\u8981 await</li> <li>\u89e3\u6c7a\u65b9\u6848: \u4f7f\u7528 nonisolated + Task \u6a21\u5f0f</li> <li>\u5b78\u7fd2: nonisolated \u53ef\u4ee5\u6539\u5584 API \u6613\u7528\u6027</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#_8","title":"\u6539\u9032\u5efa\u8b70","text":""},{"location":"15_Daily_Logs/2025-12-04/#1-p0","title":"1. \u6e2c\u8a66\u81ea\u52d5\u5316\uff08\u512a\u5148\u7d1a\uff1aP0\uff09","text":"<ul> <li>\u4e0b\u9031\u88dc\u5145 Client Layer Unit Test</li> <li>\u76ee\u6a19\u8986\u84cb\u7387 \u2265 80%</li> <li>\u5efa\u8b70\u70ba SharedBetsMetadata \u6dfb\u52a0\u6e2c\u8a66</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#2-api-p1","title":"2. API \u898f\u683c\u9a57\u8b49\uff08\u512a\u5148\u7d1a\uff1aP1\uff09","text":"<ul> <li>WebSocket \u9023\u7dda\u53c3\u6578\u9700\u8207\u5f8c\u7aef\u9a57\u8b49</li> <li>\u5728 Integration Test \u4e2d\u9a57\u8b49</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#3-p2","title":"3. \u6587\u4ef6\u81ea\u52d5\u5316\uff08\u512a\u5148\u7d1a\uff1aP2\uff09","text":"<ul> <li>\u8003\u616e\u8173\u672c\u81ea\u52d5\u5316 TDD \u6587\u4ef6\u66f4\u65b0</li> <li>\u6383\u63cf git diff \u8b58\u5225\u578b\u5225\u8b8a\u66f4</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#_9","title":"\u5c0d\u8a71\u8a18\u9304","text":""},{"location":"15_Daily_Logs/2025-12-04/#1-git_2","title":"\u5c0d\u8a71 1: Git \u914d\u7f6e\u512a\u5316","text":"<ul> <li>User: buildServer.json \u5982\u4f55\u672c\u5730\u5316\u4e14 rebase \u6642\u4fdd\u7559</li> <li>Cursor: \u63d0\u4f9b\u5169\u500b\u65b9\u6848\uff08.gitignore vs .git/info/exclude\uff09</li> <li>\u6c7a\u7b56: \u9078\u64c7 .gitignore\uff08\u5718\u968a\u5171\u4eab\uff09</li> <li>\u7d50\u679c: \u2705 \u6210\u529f\u914d\u7f6e</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#2-commit","title":"\u5c0d\u8a71 2: Commit \u62c6\u5206\u8207\u63d0\u4ea4","text":"<ul> <li>User: \u6309\u7167 Conventional Commits \u62c6\u5206\u8b8a\u66f4</li> <li>Cursor: \u5206\u6790\u8b8a\u66f4\u4e26\u62c6\u5206\u6210 4 \u500b\u908f\u8f2f commits</li> <li>\u7d50\u679c: \u2705 4 \u500b\u6e05\u6670\u7684 commits</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#3","title":"\u5c0d\u8a71 3: \u8b8a\u66f4\u65e5\u8a8c\u66f4\u65b0","text":"<ul> <li>User: \u6839\u64da\u4eca\u5929\u7684 commits \u66f4\u65b0 CHANGELOG</li> <li>Cursor: \u751f\u6210 2025-12-04 \u8b8a\u66f4\u8a18\u9304</li> <li>\u7d50\u679c: \u2705 CHANGELOG \u548c implementation_status \u5df2\u66f4\u65b0</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#4-tdd_1","title":"\u5c0d\u8a71 4: TDD \u4e00\u81f4\u6027\u6aa2\u67e5","text":"<ul> <li>User: \u6aa2\u67e5 TDD-020, 021, 022 \u7684\u5be6\u4f5c\u4e00\u81f4\u6027</li> <li>Cursor: \u751f\u6210\u8a73\u7d30\u7684\u4e00\u81f4\u6027\u6aa2\u67e5\u5831\u544a</li> <li>\u7d50\u679c: \u2705 \u529f\u80fd\u5b8c\u6210\u5ea6 98%\uff0cTDD \u4e00\u81f4\u6027 100%</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#5-tdd_1","title":"\u5c0d\u8a71 5: TDD \u6587\u4ef6\u66f4\u65b0","text":"<ul> <li>User: \u6839\u64da\u5be6\u4f5c\u6539\u9032\u66f4\u65b0 TDD \u6587\u4ef6</li> <li>Cursor: \u66f4\u65b0 3 \u500b TDD tickets + \u751f\u6210\u66f4\u65b0\u8a18\u9304</li> <li>\u7d50\u679c: \u2705 12 \u8655\u8b8a\u66f4\uff0c\u5b8c\u6574\u8a18\u9304\u8a2d\u8a08\u6c7a\u7b56</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#6-cursor","title":"\u5c0d\u8a71 6: Cursor \u547d\u4ee4\u512a\u5316","text":"<ul> <li>User: \u64f4\u5145 check-tdd-consistency.md</li> <li>Cursor: \u65b0\u589e TDD \u66f4\u65b0\u529f\u80fd\u548c\u539f\u5247</li> <li>\u7d50\u679c: \u2705 Command \u529f\u80fd\u66f4\u5b8c\u6574</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#7_1","title":"\u5c0d\u8a71 7: \u5c0d\u8a71\u7d71\u6574","text":"<ul> <li>User: \u7d71\u6574\u4eca\u5929\u7684\u5c0d\u8a71</li> <li>Cursor: \u751f\u6210\u5b8c\u6574\u7684\u5c0d\u8a71\u7d71\u6574\u6587\u6a94</li> <li>\u7d50\u679c: \u2705 658 \u884c\u8a73\u7d30\u8a18\u9304</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#_10","title":"\ud83d\udca1 \u5b78\u7fd2\u8207\u53cd\u601d","text":""},{"location":"15_Daily_Logs/2025-12-04/#_11","title":"\u767c\u73fe\u6216\u5b78\u7fd2\u5230\u7684\u65b0\u77e5\u8b58","text":"<ol> <li>Swift Concurrency \u6700\u4f73\u5be6\u8e10</li> <li><code>@unchecked Sendable</code> \u7684\u6b63\u78ba\u4f7f\u7528\u5834\u666f</li> <li>\u5305\u88dd Foundation \u578b\u5225\u6642\u7684\u6ce8\u610f\u4e8b\u9805</li> <li> <p>Actor isolation \u8207 nonisolated \u7684\u5e73\u8861</p> </li> <li> <p>\u908a\u754c\u5c64\u8a2d\u8a08\u6a21\u5f0f</p> </li> <li>\u5728\u7cfb\u7d71\u908a\u754c\u9032\u884c\u578b\u5225\u8f49\u63db</li> <li>\u5916\u5c64\u5f37\u578b\u5225\uff0c\u5167\u5c64\u539f\u59cb\u578b\u5225</li> <li> <p>\u4fdd\u6301\u5404\u5c64\u8077\u8cac\u6e05\u6670</p> </li> <li> <p>TDD \u6587\u4ef6\u7684\u6f14\u9032\u6a21\u5f0f</p> </li> <li>TDD \u8207\u5be6\u4f5c\u53ef\u4ee5\u4e92\u76f8\u6f14\u9032</li> <li>\u5be6\u4f5c\u6539\u9032\u61c9\u8a72\u56de\u994b\u5230 TDD</li> <li> <p>\u4fdd\u6301\u6587\u4ef6\u8207\u5be6\u4f5c\u540c\u6b65\u7684\u91cd\u8981\u6027</p> </li> <li> <p>\u8a2d\u8a08\u6c7a\u7b56\u8a18\u9304\u7684\u50f9\u503c</p> </li> <li>\u8a18\u9304\u300c\u70ba\u4ec0\u9ebc\u300d\u6bd4\u8a18\u9304\u300c\u662f\u4ec0\u9ebc\u300d\u66f4\u91cd\u8981</li> <li>\u5f71\u97ff\u7bc4\u570d\u5206\u6790\u5e6b\u52a9\u8a55\u4f30\u8b8a\u66f4</li> <li>\u5b8c\u6574\u8a18\u9304\u4fbf\u65bc\u672a\u4f86\u8ffd\u6eaf</li> </ol>"},{"location":"15_Daily_Logs/2025-12-04/#_12","title":"\u53ef\u4ee5\u6539\u9032\u7684\u5730\u65b9","text":"<ol> <li>\u6e2c\u8a66\u61c9\u8207\u5be6\u4f5c\u540c\u6b65</li> <li>\u76ee\u524d: \u5be6\u4f5c\u5b8c\u6210\u4f46\u6e2c\u8a66\u70ba 0%</li> <li>\u6539\u9032: \u61c9\u8a72\u5728\u5be6\u4f5c\u6642\u540c\u6b65\u5beb\u6e2c\u8a66</li> <li> <p>\u4e0b\u6b21: TDD \u65b9\u5f0f\u958b\u767c\uff0c\u6e2c\u8a66\u5148\u884c</p> </li> <li> <p>\u66f4\u65e9\u8207\u5f8c\u7aef\u78ba\u8a8d\u898f\u683c</p> </li> <li>\u76ee\u524d: WebSocket \u53c3\u6578\u672a\u9a57\u8b49</li> <li>\u6539\u9032: \u5be6\u4f5c\u524d\u5148\u78ba\u8a8d API \u898f\u683c</li> <li> <p>\u4e0b\u6b21: \u5148\u5beb Integration Test \u9a57\u8b49</p> </li> <li> <p>\u6587\u4ef6\u66f4\u65b0\u53ef\u4ee5\u66f4\u81ea\u52d5\u5316</p> </li> <li>\u76ee\u524d: \u624b\u52d5\u66f4\u65b0 TDD \u6587\u4ef6</li> <li>\u6539\u9032: \u8003\u616e\u8173\u672c\u8f14\u52a9</li> <li>\u4e0b\u6b21: \u63a2\u7d22\u81ea\u52d5\u5316\u65b9\u6848</li> </ol>"},{"location":"15_Daily_Logs/2025-12-04/#_13","title":"\u4e0b\u6b21\u53ef\u4ee5\u505a\u5f97\u66f4\u597d\u7684\u5730\u65b9","text":"<ol> <li>\u63d0\u524d\u898f\u5283\u6e2c\u8a66\u7b56\u7565</li> <li>\u5728\u958b\u59cb\u5be6\u4f5c\u524d\u898f\u5283\u6e2c\u8a66</li> <li>\u78ba\u5b9a\u9700\u8981\u54ea\u4e9b mock \u548c fixture</li> <li> <p>\u9810\u7559\u6e2c\u8a66\u6642\u9593</p> </li> <li> <p>\u66f4\u983b\u7e41\u7684\u5c0f commit</p> </li> <li>\u96d6\u7136\u5df2\u7d93\u62c6\u5206\u6210 4 \u500b commits</li> <li>\u53ef\u4ee5\u66f4\u7d30\u7c92\u5ea6\u5730\u63d0\u4ea4</li> <li> <p>\u4fbf\u65bc review \u548c rollback</p> </li> <li> <p>API \u9a57\u8b49\u524d\u7f6e</p> </li> <li>\u5728\u5be6\u4f5c Client \u524d\u5148\u9a57\u8b49 API</li> <li>\u53ef\u4ee5\u767c\u73fe\u554f\u984c\u66f4\u65e9</li> <li>\u907f\u514d\u5f8c\u7e8c\u8fd4\u5de5</li> </ol>"},{"location":"15_Daily_Logs/2025-12-04/#cursor_1","title":"\u8207 Cursor \u5354\u4f5c\u7684\u6539\u9032\u7a7a\u9593","text":"<ol> <li>\u66f4\u7d50\u69cb\u5316\u7684\u63d0\u554f</li> <li>\u4f7f\u7528 Command \u6a21\u677f\u6548\u679c\u5f88\u597d</li> <li>\u53ef\u4ee5\u7e7c\u7e8c\u512a\u5316 Command</li> <li> <p>\u6a19\u6e96\u5316\u5e38\u898b\u5de5\u4f5c\u6d41\u7a0b</p> </li> <li> <p>\u5206\u968e\u6bb5\u78ba\u8a8d</p> </li> <li>\u8907\u96dc\u4efb\u52d9\u5206\u968e\u6bb5\u57f7\u884c\u6548\u679c\u597d</li> <li>\u6bcf\u968e\u6bb5\u78ba\u8a8d\u907f\u514d\u504f\u96e2</li> <li> <p>\u53ef\u4ee5\u6301\u7e8c\u9019\u500b\u6a21\u5f0f</p> </li> <li> <p>\u4e3b\u52d5\u63d0\u4f9b\u4e0a\u4e0b\u6587</p> </li> <li>\u63d0\u4f9b\u76f8\u95dc\u6a94\u6848\u548c\u9700\u6c42\u5f88\u6709\u5e6b\u52a9</li> <li>Cursor \u80fd\u66f4\u6e96\u78ba\u7406\u89e3\u610f\u5716</li> <li>\u6e1b\u5c11\u4f86\u56de\u6e9d\u901a\u6b21\u6578</li> </ol>"},{"location":"15_Daily_Logs/2025-12-04/#_14","title":"\ud83d\udcca \u6642\u9593\u7d71\u8a08","text":""},{"location":"15_Daily_Logs/2025-12-04/#_15","title":"\u958b\u767c\u6642\u9593","text":"<ul> <li>\u7e3d\u8a08: ~4 \u5c0f\u6642</li> <li>\u7d30\u9805: </li> <li>Data Layer \u91cd\u69cb: 2 \u5c0f\u6642</li> <li>Git \u914d\u7f6e: 0.5 \u5c0f\u6642</li> <li>Xcode \u914d\u7f6e: 0.5 \u5c0f\u6642</li> <li>Commit \u62c6\u5206: 1 \u5c0f\u6642</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#_16","title":"\u6e2c\u8a66\u6642\u9593","text":"<ul> <li>\u7e3d\u8a08: 0 \u5c0f\u6642</li> <li>\u8aaa\u660e: \u26a0\ufe0f \u5f85\u88dc\u5145</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#_17","title":"\u6587\u4ef6\u66f4\u65b0","text":"<ul> <li>\u7e3d\u8a08: ~3 \u5c0f\u6642</li> <li>\u7d30\u9805: </li> <li>TDD \u4e00\u81f4\u6027\u6aa2\u67e5: 1 \u5c0f\u6642</li> <li>TDD \u6587\u4ef6\u66f4\u65b0: 1.5 \u5c0f\u6642</li> <li>CHANGELOG \u66f4\u65b0: 0.5 \u5c0f\u6642</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#_18","title":"\u554f\u984c\u89e3\u6c7a","text":"<ul> <li>\u7e3d\u8a08: ~2 \u5c0f\u6642</li> <li>\u7d30\u9805:</li> <li>Sendable \u554f\u984c: 1 \u5c0f\u6642</li> <li>Actor isolation \u554f\u984c: 1 \u5c0f\u6642</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#cursor_2","title":"\u8207 Cursor \u5354\u4f5c\u6642\u9593","text":"<ul> <li>\u7e3d\u8a08: ~8 \u5c0f\u6642</li> <li>\u7d30\u9805:</li> <li>\u8a0e\u8ad6\u8a2d\u8a08\u65b9\u6848: 2 \u5c0f\u6642</li> <li>\u5be6\u4f5c\u6307\u5c0e: 3 \u5c0f\u6642</li> <li>\u6587\u4ef6\u751f\u6210: 2 \u5c0f\u6642</li> <li>\u5c0d\u8a71\u7d71\u6574: 1 \u5c0f\u6642</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#_19","title":"\u6703\u8b70/\u8a0e\u8ad6","text":"<ul> <li>\u7e3d\u8a08: 0 \u5c0f\u6642</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#_20","title":"\u7e3d\u8a08","text":"<ul> <li>\u7e3d\u8a08: ~9 \u5c0f\u6642\uff08\u4e00\u5929\u5de5\u4f5c\u6642\u9593\uff09</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#_21","title":"\u6548\u7387\u5206\u6790","text":"<ul> <li>\u2705 \u9ad8\u6548\u9805\u76ee: TDD \u6587\u4ef6\u66f4\u65b0\uff08\u7d50\u69cb\u5316\u6d41\u7a0b\uff09</li> <li>\u2705 \u9806\u5229\u9805\u76ee: Data Layer \u91cd\u69cb\uff08\u8a2d\u8a08\u6e05\u6670\uff09</li> <li>\u26a0\ufe0f \u5f85\u6539\u9032: \u6e2c\u8a66\u88dc\u5145\uff08\u61c9\u8207\u5be6\u4f5c\u540c\u6b65\uff09</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#_22","title":"\ud83d\udd04 \u660e\u65e5\u8a08\u5283","text":""},{"location":"15_Daily_Logs/2025-12-04/#_23","title":"\u4e3b\u8981\u4efb\u52d9","text":"<ol> <li>Client Layer \u6e2c\u8a66\u88dc\u5145 (\u512a\u5148\u7d1a: P0)</li> <li>[ ] PrematchCommentClient Unit Test</li> <li>[ ] LiveChatClient Unit Test  </li> <li>[ ] ChatWebSocketClient Unit Test</li> <li> <p>\u76ee\u6a19: \u8986\u84cb\u7387 \u2265 80%</p> </li> <li> <p>Repository Layer \u5be6\u4f5c (\u512a\u5148\u7d1a: P1)</p> </li> <li>[ ] TDD-030: PrematchCommentRepository</li> <li>[ ] TDD-031: LiveChatRepository</li> <li> <p>\u4f30\u6642: 2-3 \u5929</p> </li> <li> <p>API \u898f\u683c\u9a57\u8b49 (\u512a\u5148\u7d1a: P1)</p> </li> <li>[ ] WebSocket \u9023\u7dda\u53c3\u6578\u9a57\u8b49</li> <li>[ ] Integration Test \u8a2d\u8a08</li> <li>[ ] \u8207\u5f8c\u7aef\u5c0d\u63a5\u6e2c\u8a66</li> </ol>"},{"location":"15_Daily_Logs/2025-12-04/#_24","title":"\u6b21\u8981\u4efb\u52d9","text":"<ul> <li>[ ] \u88dc\u5145 SharedBetsMetadata \u6e2c\u8a66</li> <li>[ ] \u6587\u4ef6\u81ea\u52d5\u5316\u63a2\u7d22</li> <li>[ ] CI/CD \u6574\u5408\u7814\u7a76</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#_25","title":"\u98a8\u96aa\u8207\u4f9d\u8cf4","text":"<ul> <li>\u26a0\ufe0f \u6e2c\u8a66\u88dc\u5145\u53ef\u80fd\u9700\u8981\u66f4\u591a\u6642\u9593</li> <li>\u26a0\ufe0f WebSocket \u9a57\u8b49\u53ef\u80fd\u767c\u73fe\u898f\u683c\u554f\u984c</li> <li>\u2705 \u7121\u5916\u90e8\u4f9d\u8cf4\u963b\u585e</li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#_26","title":"\ud83d\udcdd \u5176\u4ed6\u5099\u8a3b","text":""},{"location":"15_Daily_Logs/2025-12-04/#_27","title":"\u6210\u5c31\u8207\u4eae\u9ede","text":"<ol> <li>\u5b8c\u7f8e\u7684 TDD \u4e00\u81f4\u6027: \u5be6\u4f5c\u7372\u5f97 5/5 \u8a55\u5206</li> <li>\u8a2d\u8a08\u6539\u9032: \u5169\u9805\u91cd\u8981\u7684\u4f75\u767c\u6a21\u578b\u6539\u9032</li> <li>\u6587\u4ef6\u5b8c\u6574\u6027: \u6240\u6709\u8b8a\u66f4\u90fd\u6709\u5b8c\u6574\u8a18\u9304</li> <li>Commit \u54c1\u8cea: \u6e05\u6670\u7684 Conventional Commits</li> </ol>"},{"location":"15_Daily_Logs/2025-12-04/#_28","title":"\u5f85\u8fa6\u4e8b\u9805","text":"<ol> <li>\u26a0\ufe0f \u6e2c\u8a66\u8986\u84cb\u7387: \u76ee\u524d 0%\uff0c\u4e0b\u9031\u512a\u5148\u88dc\u5145</li> <li>\u26a0\ufe0f API \u9a57\u8b49: WebSocket \u53c3\u6578\u9700\u8207\u5f8c\u7aef\u78ba\u8a8d</li> <li>\ud83d\udcda \u6587\u6a94\u90e8\u7f72: \u8003\u616e\u66f4\u65b0 GitHub Pages</li> </ol>"},{"location":"15_Daily_Logs/2025-12-04/#_29","title":"\u76f8\u95dc\u9023\u7d50","text":"<ul> <li>Branch: feature/FOOTBALL-9180-9184-DataLayer</li> <li>Commits: 41c38d3, 1f97afa, 163d376, c00431a</li> <li>TDD Reports:</li> <li><code>tdd_consistency_check_2025-12-04.md</code></li> <li><code>tdd_updates_2025-12-04.md</code></li> <li>\u5c0d\u8a71\u7d71\u6574: <code>16_Cursor_Workflow/daily_summaries/2025-12-04.md</code></li> <li>Changelog: <code>14_Changelog/CHANGELOG.md</code></li> </ul>"},{"location":"15_Daily_Logs/2025-12-04/#_30","title":"\u6280\u8853\u7b46\u8a18","text":""},{"location":"15_Daily_Logs/2025-12-04/#sharedbetsmetadata","title":"SharedBetsMetadata \u5305\u88dd\u6a21\u5f0f","text":"<p><pre><code>public struct SharedBetsMetadata: @unchecked Sendable {\n    public let value: [String: Any]\n    public init(_ value: [String: Any]) {\n        self.value = value\n    }\n}\n</code></pre> \u7528\u9014: \u89e3\u6c7a Swift Concurrency Sendable \u554f\u984c</p>"},{"location":"15_Daily_Logs/2025-12-04/#nonisolated-asyncstream","title":"Nonisolated AsyncStream \u6a21\u5f0f","text":"<p><pre><code>public nonisolated func subscribe(id: String) -&gt; AsyncStream&lt;Message&gt; {\n    AsyncStream { continuation in\n        Task {\n            await self.performSubscribe(id: id, continuation: continuation)\n        }\n    }\n}\n</code></pre> \u7528\u9014: \u6539\u5584 Actor \u65b9\u6cd5\u7684 API \u6613\u7528\u6027</p> <p>\u65e5\u8a8c\u66f4\u65b0\u6642\u9593: 2025-12-05 \u4e0b\u6b21\u66f4\u65b0: 2025-12-05 End of Day</p>"},{"location":"15_Daily_Logs/2025-12-08/","title":"\u5de5\u4f5c\u65e5\u8a8c - 2025-12-08","text":""},{"location":"15_Daily_Logs/2025-12-08/#_1","title":"\ud83d\udccb \u4eca\u65e5\u8a08\u5283","text":"<ul> <li>[ ] Ticket ID: \u6a19\u984c</li> <li>[ ] Ticket ID: \u6a19\u984c</li> </ul>"},{"location":"15_Daily_Logs/2025-12-08/#_2","title":"\u2705 \u5b8c\u6210\u9805\u76ee","text":"<ul> <li>[x] Ticket ID: \u6a19\u984c</li> <li>\u6642\u9593: X \u5c0f\u6642</li> <li>\u6a94\u6848: <code>\u8def\u5f91/\u6a94\u6848\u540d.swift</code></li> <li>\u6e2c\u8a66: \u2705 \u901a\u904e / \u274c \u5931\u6557</li> <li>\u5099\u8a3b: \u4efb\u4f55\u984d\u5916\u7684\u8aaa\u660e</li> </ul>"},{"location":"15_Daily_Logs/2025-12-08/#_3","title":"\ud83d\udea7 \u9032\u884c\u4e2d\u9805\u76ee","text":"<ul> <li>Ticket ID: \u6a19\u984c</li> <li>\u9032\u5ea6: X%</li> <li>\u9810\u8a08\u5b8c\u6210: \u65e5\u671f\u6216\u6642\u9593</li> <li>\u7576\u524d\u72c0\u614b: \u63cf\u8ff0\u7576\u524d\u72c0\u614b</li> </ul>"},{"location":"15_Daily_Logs/2025-12-08/#_4","title":"\ud83d\udc1b \u9047\u5230\u7684\u554f\u984c","text":"<ol> <li>\u554f\u984c\u63cf\u8ff0</li> <li>\u539f\u56e0: \u554f\u984c\u7684\u6839\u672c\u539f\u56e0</li> <li>\u89e3\u6c7a\u65b9\u6848: \u5982\u4f55\u89e3\u6c7a\u7684</li> <li>\u6642\u9593: \u82b1\u8cbb\u7684\u6642\u9593</li> <li>\u6a94\u6848: \u76f8\u95dc\u7684\u6a94\u6848</li> </ol>"},{"location":"15_Daily_Logs/2025-12-08/#cursor","title":"\ud83e\udd16 \u8207 Cursor \u7684\u5c0d\u8a71\u7d71\u6574","text":""},{"location":"15_Daily_Logs/2025-12-08/#_5","title":"\u91cd\u8981\u6c7a\u7b56","text":""},{"location":"15_Daily_Logs/2025-12-08/#1","title":"1. [\u6c7a\u7b56\u985e\u5225]","text":"<ul> <li>User Prompt: \"[\u7528\u6236\u63d0\u51fa\u7684\u554f\u984c\u6216\u9700\u6c42\uff0c\u8f49\u63db\u6210\u6e05\u6670\u7684 prompt]\"</li> <li>\u6c7a\u7b56\u5167\u5bb9: [\u6c7a\u7b56\u7684\u8a73\u7d30\u63cf\u8ff0]</li> <li>\u76f8\u95dc\u6a94\u6848: [\u76f8\u95dc\u7684\u6a94\u6848\u8def\u5f91]</li> </ul>"},{"location":"15_Daily_Logs/2025-12-08/#2","title":"2. [\u6c7a\u7b56\u985e\u5225]","text":"<ul> <li>User Prompt: \"[\u7528\u6236\u63d0\u51fa\u7684\u554f\u984c\u6216\u9700\u6c42\uff0c\u8f49\u63db\u6210\u6e05\u6670\u7684 prompt]\"</li> <li>\u6c7a\u7b56\u5167\u5bb9: [\u6c7a\u7b56\u7684\u8a73\u7d30\u63cf\u8ff0]</li> <li>\u76f8\u95dc\u6a94\u6848: [\u76f8\u95dc\u7684\u6a94\u6848\u8def\u5f91]</li> </ul>"},{"location":"15_Daily_Logs/2025-12-08/#_6","title":"\u5b78\u7fd2\u8981\u9ede","text":""},{"location":"15_Daily_Logs/2025-12-08/#1_1","title":"1. [\u5b78\u7fd2\u4e3b\u984c]","text":"<ul> <li>\u63cf\u8ff0: [\u5b78\u7fd2\u5167\u5bb9\u7684\u63cf\u8ff0]</li> <li>\u8981\u9ede: </li> <li>[\u8981\u9ede 1]</li> <li>[\u8981\u9ede 2]</li> </ul>"},{"location":"15_Daily_Logs/2025-12-08/#2_1","title":"2. [\u5b78\u7fd2\u4e3b\u984c]","text":"<ul> <li>\u63cf\u8ff0: [\u5b78\u7fd2\u5167\u5bb9\u7684\u63cf\u8ff0]</li> <li>\u8981\u9ede: </li> <li>[\u8981\u9ede 1]</li> <li>[\u8981\u9ede 2]</li> </ul>"},{"location":"15_Daily_Logs/2025-12-08/#_7","title":"\u554f\u984c\u89e3\u6c7a\u8a18\u9304","text":""},{"location":"15_Daily_Logs/2025-12-08/#1_2","title":"\u554f\u984c 1: [\u554f\u984c\u6a19\u984c]","text":"<ul> <li>User Prompt: \"[\u7528\u6236\u63d0\u51fa\u7684\u554f\u984c\uff0c\u8f49\u63db\u6210\u6e05\u6670\u7684 prompt]\"</li> <li>\u554f\u984c: [\u554f\u984c\u7684\u8a73\u7d30\u63cf\u8ff0]</li> <li>\u539f\u56e0: [\u554f\u984c\u7684\u6839\u672c\u539f\u56e0]</li> <li>\u89e3\u6c7a\u65b9\u6848: [\u5982\u4f55\u89e3\u6c7a\u7684]</li> <li>\u6642\u9593: [\u82b1\u8cbb\u7684\u6642\u9593]</li> <li>\u6a94\u6848: [\u76f8\u95dc\u7684\u6a94\u6848]</li> </ul>"},{"location":"15_Daily_Logs/2025-12-08/#2_2","title":"\u554f\u984c 2: [\u554f\u984c\u6a19\u984c]","text":"<ul> <li>User Prompt: \"[\u7528\u6236\u63d0\u51fa\u7684\u554f\u984c\uff0c\u8f49\u63db\u6210\u6e05\u6670\u7684 prompt]\"</li> <li>\u554f\u984c: [\u554f\u984c\u7684\u8a73\u7d30\u63cf\u8ff0]</li> <li>\u539f\u56e0: [\u554f\u984c\u7684\u6839\u672c\u539f\u56e0]</li> <li>\u89e3\u6c7a\u65b9\u6848: [\u5982\u4f55\u89e3\u6c7a\u7684]</li> <li>\u6642\u9593: [\u82b1\u8cbb\u7684\u6642\u9593]</li> <li>\u6a94\u6848: [\u76f8\u95dc\u7684\u6a94\u6848]</li> </ul>"},{"location":"15_Daily_Logs/2025-12-08/#_8","title":"\u6539\u9032\u5efa\u8b70","text":""},{"location":"15_Daily_Logs/2025-12-08/#1_3","title":"1. [\u6539\u9032\u985e\u5225]","text":"<ul> <li>\u5efa\u8b70: [\u6539\u9032\u5efa\u8b70\u7684\u8a73\u7d30\u63cf\u8ff0]</li> <li>\u512a\u5148\u7d1a: [\u9ad8/\u4e2d/\u4f4e]</li> </ul>"},{"location":"15_Daily_Logs/2025-12-08/#2_3","title":"2. [\u6539\u9032\u985e\u5225]","text":"<ul> <li>\u5efa\u8b70: [\u6539\u9032\u5efa\u8b70\u7684\u8a73\u7d30\u63cf\u8ff0]</li> <li>\u512a\u5148\u7d1a: [\u9ad8/\u4e2d/\u4f4e]</li> </ul>"},{"location":"15_Daily_Logs/2025-12-08/#_9","title":"\u5c0d\u8a71\u8a18\u9304","text":""},{"location":"15_Daily_Logs/2025-12-08/#1_4","title":"\u5c0d\u8a71 1: [\u4e3b\u984c]","text":"<ul> <li>\u6642\u9593: [\u6642\u9593]</li> <li>User Prompt: \"[\u7528\u6236\u63d0\u51fa\u7684\u554f\u984c\u6216\u9700\u6c42]\"</li> <li>\u5167\u5bb9: [\u5c0d\u8a71\u5167\u5bb9\u6458\u8981]</li> <li>\u7d50\u679c: [\u5c0d\u8a71\u7d50\u679c]</li> </ul>"},{"location":"15_Daily_Logs/2025-12-08/#2_4","title":"\u5c0d\u8a71 2: [\u4e3b\u984c]","text":"<ul> <li>\u6642\u9593: [\u6642\u9593]</li> <li>User Prompt: \"[\u7528\u6236\u63d0\u51fa\u7684\u554f\u984c\u6216\u9700\u6c42]\"</li> <li>\u5167\u5bb9: [\u5c0d\u8a71\u5167\u5bb9\u6458\u8981]</li> <li>\u7d50\u679c: [\u5c0d\u8a71\u7d50\u679c] </li> </ul>"},{"location":"15_Daily_Logs/2025-12-08/#_10","title":"\ud83d\udca1 \u5b78\u7fd2\u8207\u53cd\u601d","text":"<ul> <li>\u767c\u73fe\u6216\u5b78\u7fd2\u5230\u7684\u65b0\u77e5\u8b58</li> <li>\u53ef\u4ee5\u6539\u9032\u7684\u5730\u65b9</li> <li>\u4e0b\u6b21\u53ef\u4ee5\u505a\u5f97\u66f4\u597d\u7684\u5730\u65b9</li> <li>\u8207 Cursor \u5354\u4f5c\u7684\u6539\u9032\u7a7a\u9593</li> </ul>"},{"location":"15_Daily_Logs/2025-12-08/#_11","title":"\ud83d\udcca \u6642\u9593\u7d71\u8a08","text":"<ul> <li>\u958b\u767c\u6642\u9593: X \u5c0f\u6642</li> <li>\u6e2c\u8a66\u6642\u9593: X \u5c0f\u6642</li> <li>\u6587\u4ef6\u66f4\u65b0: X \u5c0f\u6642</li> <li>\u554f\u984c\u89e3\u6c7a: X \u5c0f\u6642</li> <li>\u8207 Cursor \u5354\u4f5c\u6642\u9593: X \u5c0f\u6642</li> <li>\u6703\u8b70/\u8a0e\u8ad6: X \u5c0f\u6642</li> <li>\u7e3d\u8a08: X \u5c0f\u6642</li> </ul>"},{"location":"15_Daily_Logs/2025-12-08/#_12","title":"\ud83d\udd04 \u660e\u65e5\u8a08\u5283","text":"<ul> <li>[ ] Ticket ID: \u6a19\u984c</li> <li>[ ] Ticket ID: \u6a19\u984c</li> </ul>"},{"location":"15_Daily_Logs/2025-12-08/#_13","title":"\ud83d\udcdd \u5176\u4ed6\u5099\u8a3b","text":"<p>\u4efb\u4f55\u5176\u4ed6\u9700\u8981\u8a18\u9304\u7684\u5167\u5bb9</p>"},{"location":"15_Daily_Logs/2025-12-08/#_14","title":"\ud83d\udcc4 \u76f8\u95dc\u6587\u4ef6\u6539\u52d5\u8a18\u9304","text":"<p>\u672c\u6587\u6a94\u8a18\u9304\u7576\u5929\u5728\u4e3b\u5c08\u6848\uff08<code>fcom-iOS</code>\uff09\u4e2d\u8207 MatchChat \u76f8\u95dc\u7684\u6240\u6709\u6587\u4ef6\u6539\u52d5\u3002</p>"},{"location":"15_Daily_Logs/2025-12-08/#git-commits","title":"Git Commits","text":""},{"location":"15_Daily_Logs/2025-12-08/#1-commit","title":"1. [Commit \u6a19\u984c]","text":"<ul> <li>Commit: <code>commit_hash</code></li> <li>\u8a0a\u606f: <code>commit message</code></li> <li>\u6642\u9593: 2025-12-08 HH:MM:SS</li> <li>\u6539\u52d5\u6587\u4ef6:</li> <li><code>\u8def\u5f91/\u6a94\u6848\u540d.swift</code></li> <li><code>\u8def\u5f91/\u6a94\u6848\u540d.swift</code></li> </ul>"},{"location":"15_Daily_Logs/2025-12-08/#_15","title":"\u6587\u4ef6\u7d71\u8a08","text":"<ul> <li>\u7e3d Commits: X</li> <li>\u65b0\u589e\u6587\u4ef6: X+</li> <li>\u7e3d\u7a0b\u5f0f\u78bc\u884c\u6578: ~X+ lines</li> <li>\u6e2c\u8a66\u7a0b\u5f0f\u78bc: X lines</li> </ul>"},{"location":"15_Daily_Logs/2025-12-08/#tdd-tickets","title":"\u76f8\u95dc TDD Tickets","text":"<ul> <li>TDD-XXX: [\u6a19\u984c] [JIRA-ID] \u2705</li> <li>TDD-XXX: [\u6a19\u984c] [JIRA-ID] \u2705</li> </ul>"},{"location":"15_Daily_Logs/2025-12-08/#_16","title":"\u5099\u8a3b","text":"<p>\u6240\u6709\u6539\u52d5\u90fd\u5728\u4e3b\u5c08\u6848\uff08<code>fcom-iOS</code>\uff09\u7684 <code>main</code> \u5206\u652f\u4e0a\uff0c\u9019\u4e9b\u6587\u4ef6\u4e0d\u5c6c\u65bc TDDs repository\uff0c\u4f46\u8207 TDD \u6587\u4ef6\u5c0d\u61c9\u7684\u5be6\u4f5c\u76f8\u95dc\u3002</p>"},{"location":"15_Daily_Logs/2025-12-09/","title":"\u5de5\u4f5c\u65e5\u8a8c - 2025-12-09","text":""},{"location":"15_Daily_Logs/2025-12-09/#_1","title":"\ud83d\udccb \u4eca\u65e5\u8a08\u5283","text":"<ul> <li>[ ] Ticket ID: \u6a19\u984c</li> <li>[ ] Ticket ID: \u6a19\u984c</li> </ul>"},{"location":"15_Daily_Logs/2025-12-09/#_2","title":"\u2705 \u5b8c\u6210\u9805\u76ee","text":"<ul> <li>[x] Ticket ID: \u6a19\u984c</li> <li>\u6642\u9593: X \u5c0f\u6642</li> <li>\u6a94\u6848: <code>\u8def\u5f91/\u6a94\u6848\u540d.swift</code></li> <li>\u6e2c\u8a66: \u2705 \u901a\u904e / \u274c \u5931\u6557</li> <li>\u5099\u8a3b: \u4efb\u4f55\u984d\u5916\u7684\u8aaa\u660e</li> </ul>"},{"location":"15_Daily_Logs/2025-12-09/#_3","title":"\ud83d\udea7 \u9032\u884c\u4e2d\u9805\u76ee","text":"<ul> <li>Ticket ID: \u6a19\u984c</li> <li>\u9032\u5ea6: X%</li> <li>\u9810\u8a08\u5b8c\u6210: \u65e5\u671f\u6216\u6642\u9593</li> <li>\u7576\u524d\u72c0\u614b: \u63cf\u8ff0\u7576\u524d\u72c0\u614b</li> </ul>"},{"location":"15_Daily_Logs/2025-12-09/#_4","title":"\ud83d\udc1b \u9047\u5230\u7684\u554f\u984c","text":"<ol> <li>\u554f\u984c\u63cf\u8ff0</li> <li>\u539f\u56e0: \u554f\u984c\u7684\u6839\u672c\u539f\u56e0</li> <li>\u89e3\u6c7a\u65b9\u6848: \u5982\u4f55\u89e3\u6c7a\u7684</li> <li>\u6642\u9593: \u82b1\u8cbb\u7684\u6642\u9593</li> <li>\u6a94\u6848: \u76f8\u95dc\u7684\u6a94\u6848</li> </ol>"},{"location":"15_Daily_Logs/2025-12-09/#cursor","title":"\ud83e\udd16 \u8207 Cursor \u7684\u5c0d\u8a71\u7d71\u6574","text":""},{"location":"15_Daily_Logs/2025-12-09/#_5","title":"\u91cd\u8981\u6c7a\u7b56","text":""},{"location":"15_Daily_Logs/2025-12-09/#1","title":"1. [\u6c7a\u7b56\u985e\u5225]","text":"<ul> <li>User Prompt: \"[\u7528\u6236\u63d0\u51fa\u7684\u554f\u984c\u6216\u9700\u6c42\uff0c\u8f49\u63db\u6210\u6e05\u6670\u7684 prompt]\"</li> <li>\u6c7a\u7b56\u5167\u5bb9: [\u6c7a\u7b56\u7684\u8a73\u7d30\u63cf\u8ff0]</li> <li>\u76f8\u95dc\u6a94\u6848: [\u76f8\u95dc\u7684\u6a94\u6848\u8def\u5f91]</li> </ul>"},{"location":"15_Daily_Logs/2025-12-09/#2","title":"2. [\u6c7a\u7b56\u985e\u5225]","text":"<ul> <li>User Prompt: \"[\u7528\u6236\u63d0\u51fa\u7684\u554f\u984c\u6216\u9700\u6c42\uff0c\u8f49\u63db\u6210\u6e05\u6670\u7684 prompt]\"</li> <li>\u6c7a\u7b56\u5167\u5bb9: [\u6c7a\u7b56\u7684\u8a73\u7d30\u63cf\u8ff0]</li> <li>\u76f8\u95dc\u6a94\u6848: [\u76f8\u95dc\u7684\u6a94\u6848\u8def\u5f91]</li> </ul>"},{"location":"15_Daily_Logs/2025-12-09/#_6","title":"\u5b78\u7fd2\u8981\u9ede","text":""},{"location":"15_Daily_Logs/2025-12-09/#1_1","title":"1. [\u5b78\u7fd2\u4e3b\u984c]","text":"<ul> <li>\u63cf\u8ff0: [\u5b78\u7fd2\u5167\u5bb9\u7684\u63cf\u8ff0]</li> <li>\u8981\u9ede: </li> <li>[\u8981\u9ede 1]</li> <li>[\u8981\u9ede 2]</li> </ul>"},{"location":"15_Daily_Logs/2025-12-09/#2_1","title":"2. [\u5b78\u7fd2\u4e3b\u984c]","text":"<ul> <li>\u63cf\u8ff0: [\u5b78\u7fd2\u5167\u5bb9\u7684\u63cf\u8ff0]</li> <li>\u8981\u9ede: </li> <li>[\u8981\u9ede 1]</li> <li>[\u8981\u9ede 2]</li> </ul>"},{"location":"15_Daily_Logs/2025-12-09/#_7","title":"\u554f\u984c\u89e3\u6c7a\u8a18\u9304","text":""},{"location":"15_Daily_Logs/2025-12-09/#1_2","title":"\u554f\u984c 1: [\u554f\u984c\u6a19\u984c]","text":"<ul> <li>User Prompt: \"[\u7528\u6236\u63d0\u51fa\u7684\u554f\u984c\uff0c\u8f49\u63db\u6210\u6e05\u6670\u7684 prompt]\"</li> <li>\u554f\u984c: [\u554f\u984c\u7684\u8a73\u7d30\u63cf\u8ff0]</li> <li>\u539f\u56e0: [\u554f\u984c\u7684\u6839\u672c\u539f\u56e0]</li> <li>\u89e3\u6c7a\u65b9\u6848: [\u5982\u4f55\u89e3\u6c7a\u7684]</li> <li>\u6642\u9593: [\u82b1\u8cbb\u7684\u6642\u9593]</li> <li>\u6a94\u6848: [\u76f8\u95dc\u7684\u6a94\u6848]</li> </ul>"},{"location":"15_Daily_Logs/2025-12-09/#2_2","title":"\u554f\u984c 2: [\u554f\u984c\u6a19\u984c]","text":"<ul> <li>User Prompt: \"[\u7528\u6236\u63d0\u51fa\u7684\u554f\u984c\uff0c\u8f49\u63db\u6210\u6e05\u6670\u7684 prompt]\"</li> <li>\u554f\u984c: [\u554f\u984c\u7684\u8a73\u7d30\u63cf\u8ff0]</li> <li>\u539f\u56e0: [\u554f\u984c\u7684\u6839\u672c\u539f\u56e0]</li> <li>\u89e3\u6c7a\u65b9\u6848: [\u5982\u4f55\u89e3\u6c7a\u7684]</li> <li>\u6642\u9593: [\u82b1\u8cbb\u7684\u6642\u9593]</li> <li>\u6a94\u6848: [\u76f8\u95dc\u7684\u6a94\u6848]</li> </ul>"},{"location":"15_Daily_Logs/2025-12-09/#_8","title":"\u6539\u9032\u5efa\u8b70","text":""},{"location":"15_Daily_Logs/2025-12-09/#1_3","title":"1. [\u6539\u9032\u985e\u5225]","text":"<ul> <li>\u5efa\u8b70: [\u6539\u9032\u5efa\u8b70\u7684\u8a73\u7d30\u63cf\u8ff0]</li> <li>\u512a\u5148\u7d1a: [\u9ad8/\u4e2d/\u4f4e]</li> </ul>"},{"location":"15_Daily_Logs/2025-12-09/#2_3","title":"2. [\u6539\u9032\u985e\u5225]","text":"<ul> <li>\u5efa\u8b70: [\u6539\u9032\u5efa\u8b70\u7684\u8a73\u7d30\u63cf\u8ff0]</li> <li>\u512a\u5148\u7d1a: [\u9ad8/\u4e2d/\u4f4e]</li> </ul>"},{"location":"15_Daily_Logs/2025-12-09/#_9","title":"\u5c0d\u8a71\u8a18\u9304","text":""},{"location":"15_Daily_Logs/2025-12-09/#1_4","title":"\u5c0d\u8a71 1: [\u4e3b\u984c]","text":"<ul> <li>\u6642\u9593: [\u6642\u9593]</li> <li>User Prompt: \"[\u7528\u6236\u63d0\u51fa\u7684\u554f\u984c\u6216\u9700\u6c42]\"</li> <li>\u5167\u5bb9: [\u5c0d\u8a71\u5167\u5bb9\u6458\u8981]</li> <li>\u7d50\u679c: [\u5c0d\u8a71\u7d50\u679c]</li> </ul>"},{"location":"15_Daily_Logs/2025-12-09/#2_4","title":"\u5c0d\u8a71 2: [\u4e3b\u984c]","text":"<ul> <li>\u6642\u9593: [\u6642\u9593]</li> <li>User Prompt: \"[\u7528\u6236\u63d0\u51fa\u7684\u554f\u984c\u6216\u9700\u6c42]\"</li> <li>\u5167\u5bb9: [\u5c0d\u8a71\u5167\u5bb9\u6458\u8981]</li> <li>\u7d50\u679c: [\u5c0d\u8a71\u7d50\u679c] </li> </ul>"},{"location":"15_Daily_Logs/2025-12-09/#_10","title":"\ud83d\udca1 \u5b78\u7fd2\u8207\u53cd\u601d","text":"<ul> <li>\u767c\u73fe\u6216\u5b78\u7fd2\u5230\u7684\u65b0\u77e5\u8b58</li> <li>\u53ef\u4ee5\u6539\u9032\u7684\u5730\u65b9</li> <li>\u4e0b\u6b21\u53ef\u4ee5\u505a\u5f97\u66f4\u597d\u7684\u5730\u65b9</li> <li>\u8207 Cursor \u5354\u4f5c\u7684\u6539\u9032\u7a7a\u9593</li> </ul>"},{"location":"15_Daily_Logs/2025-12-09/#_11","title":"\ud83d\udcca \u6642\u9593\u7d71\u8a08","text":"<ul> <li>\u958b\u767c\u6642\u9593: X \u5c0f\u6642</li> <li>\u6e2c\u8a66\u6642\u9593: X \u5c0f\u6642</li> <li>\u6587\u4ef6\u66f4\u65b0: X \u5c0f\u6642</li> <li>\u554f\u984c\u89e3\u6c7a: X \u5c0f\u6642</li> <li>\u8207 Cursor \u5354\u4f5c\u6642\u9593: X \u5c0f\u6642</li> <li>\u6703\u8b70/\u8a0e\u8ad6: X \u5c0f\u6642</li> <li>\u7e3d\u8a08: X \u5c0f\u6642</li> </ul>"},{"location":"15_Daily_Logs/2025-12-09/#_12","title":"\ud83d\udd04 \u660e\u65e5\u8a08\u5283","text":"<ul> <li>[ ] Ticket ID: \u6a19\u984c</li> <li>[ ] Ticket ID: \u6a19\u984c</li> </ul>"},{"location":"15_Daily_Logs/2025-12-09/#_13","title":"\ud83d\udcdd \u5176\u4ed6\u5099\u8a3b","text":"<p>\u4efb\u4f55\u5176\u4ed6\u9700\u8981\u8a18\u9304\u7684\u5167\u5bb9</p>"},{"location":"15_Daily_Logs/2025-12-09/#_14","title":"\ud83d\udcc4 \u76f8\u95dc\u6587\u4ef6\u6539\u52d5\u8a18\u9304","text":"<p>\u672c\u6587\u6a94\u8a18\u9304\u7576\u5929\u5728\u4e3b\u5c08\u6848\uff08<code>fcom-iOS</code>\uff09\u4e2d\u8207 MatchChat \u76f8\u95dc\u7684\u6240\u6709\u6587\u4ef6\u6539\u52d5\u3002</p>"},{"location":"15_Daily_Logs/2025-12-09/#git-commits","title":"Git Commits","text":""},{"location":"15_Daily_Logs/2025-12-09/#1-commit","title":"1. [Commit \u6a19\u984c]","text":"<ul> <li>Commit: <code>commit_hash</code></li> <li>\u8a0a\u606f: <code>commit message</code></li> <li>\u6642\u9593: 2025-12-09 HH:MM:SS</li> <li>\u6539\u52d5\u6587\u4ef6:</li> <li><code>\u8def\u5f91/\u6a94\u6848\u540d.swift</code></li> <li><code>\u8def\u5f91/\u6a94\u6848\u540d.swift</code></li> </ul>"},{"location":"15_Daily_Logs/2025-12-09/#_15","title":"\u6587\u4ef6\u7d71\u8a08","text":"<ul> <li>\u7e3d Commits: X</li> <li>\u65b0\u589e\u6587\u4ef6: X+</li> <li>\u7e3d\u7a0b\u5f0f\u78bc\u884c\u6578: ~X+ lines</li> <li>\u6e2c\u8a66\u7a0b\u5f0f\u78bc: X lines</li> </ul>"},{"location":"15_Daily_Logs/2025-12-09/#tdd-tickets","title":"\u76f8\u95dc TDD Tickets","text":"<ul> <li>TDD-XXX: [\u6a19\u984c] [JIRA-ID] \u2705</li> <li>TDD-XXX: [\u6a19\u984c] [JIRA-ID] \u2705</li> </ul>"},{"location":"15_Daily_Logs/2025-12-09/#_16","title":"\u5099\u8a3b","text":"<p>\u6240\u6709\u6539\u52d5\u90fd\u5728\u4e3b\u5c08\u6848\uff08<code>fcom-iOS</code>\uff09\u7684 <code>main</code> \u5206\u652f\u4e0a\uff0c\u9019\u4e9b\u6587\u4ef6\u4e0d\u5c6c\u65bc TDDs repository\uff0c\u4f46\u8207 TDD \u6587\u4ef6\u5c0d\u61c9\u7684\u5be6\u4f5c\u76f8\u95dc\u3002</p>"},{"location":"15_Daily_Logs/FORMAT_RULES/","title":"\u5de5\u4f5c\u65e5\u8a8c\u683c\u5f0f\u898f\u5247","text":"<p>\u672c\u6587\u6a94\u5b9a\u7fa9\u5de5\u4f5c\u65e5\u8a8c\uff08Daily Log\uff09\u7684\u6a19\u6e96\u683c\u5f0f\u898f\u7bc4\uff0c\u78ba\u4fdd\u6240\u6709\u5de5\u4f5c\u65e5\u8a8c\u6587\u4ef6\u4fdd\u6301\u4e00\u81f4\u6027\u548c\u53ef\u8b80\u6027\u3002</p>"},{"location":"15_Daily_Logs/FORMAT_RULES/#_2","title":"\ud83d\udccb \u57fa\u672c\u7d50\u69cb","text":"<p>\u5de5\u4f5c\u65e5\u8a8c\u6587\u4ef6\u61c9\u9075\u5faa\u4ee5\u4e0b\u7d50\u69cb\uff1a</p> <pre><code># \u5de5\u4f5c\u65e5\u8a8c - YYYY-MM-DD\n\n## \ud83d\udccb \u4eca\u65e5\u8a08\u5283\n## \u2705 \u5b8c\u6210\u9805\u76ee\n## \ud83d\udea7 \u9032\u884c\u4e2d\u9805\u76ee\n## \ud83d\udc1b \u9047\u5230\u7684\u554f\u984c\n## \ud83e\udd16 \u8207 Cursor \u7684\u5c0d\u8a71\u7d71\u6574\n## \ud83d\udca1 \u5b78\u7fd2\u8207\u53cd\u601d\n## \ud83d\udcca \u6642\u9593\u7d71\u8a08\n## \ud83d\udd04 \u660e\u65e5\u8a08\u5283\n## \ud83d\udcdd \u5176\u4ed6\u5099\u8a3b\n## \ud83d\udcc4 \u76f8\u95dc\u6587\u4ef6\u6539\u52d5\u8a18\u9304\n</code></pre>"},{"location":"15_Daily_Logs/FORMAT_RULES/#_3","title":"\u2705 \u5b8c\u6210\u9805\u76ee\u683c\u5f0f","text":""},{"location":"15_Daily_Logs/FORMAT_RULES/#_4","title":"\u6a19\u6e96\u683c\u5f0f","text":"<p>\u6bcf\u500b\u5b8c\u6210\u9805\u76ee\u61c9\u4f7f\u7528\u4ee5\u4e0b\u683c\u5f0f\uff1a</p> <pre><code>### TDD-XXX \u2014 [\u6a19\u984c] [JIRA-ID]\n\n- **\u6642\u9593**: ~X \u5206\u9418/\u5c0f\u6642\n- **\u6a94\u6848**: `\u8def\u5f91/\u6a94\u6848\u540d.swift`\n- **\u6e2c\u8a66**: \u2705 \u901a\u904e / \u274c \u5931\u6557 / \u26a0\ufe0f \u5f85\u88dc\n- **\u5099\u8a3b**: [\u4efb\u4f55\u984d\u5916\u7684\u8aaa\u660e]\n\n---\n</code></pre>"},{"location":"15_Daily_Logs/FORMAT_RULES/#_5","title":"\u683c\u5f0f\u898f\u5247","text":"<ol> <li>\u6a19\u984c\u683c\u5f0f: \u4f7f\u7528 <code>###</code> \u4e09\u7d1a\u6a19\u984c\uff0c\u683c\u5f0f\u70ba <code>TDD-XXX \u2014 [\u6a19\u984c] [JIRA-ID]</code></li> <li>\u4f7f\u7528 <code>\u2014</code>\uff08em dash\uff09\u800c\u975e <code>:</code> \u6216 <code>-</code></li> <li> <p>JIRA-ID \u653e\u5728\u65b9\u62ec\u865f\u4e2d</p> </li> <li> <p>\u9805\u76ee\u5206\u9694: \u6bcf\u500b\u9805\u76ee\u4e4b\u9593\u4f7f\u7528 <code>---</code> \u5206\u9694\u7dda</p> </li> <li> <p>\u6642\u9593\u683c\u5f0f: </p> </li> <li>\u4f7f\u7528 <code>~X \u5206\u9418</code> \u6216 <code>~X \u5c0f\u6642</code></li> <li> <p>\u7d04\u7565\u6642\u9593\u4f7f\u7528 <code>~</code> \u7b26\u865f</p> </li> <li> <p>\u6a94\u6848\u8def\u5f91: </p> </li> <li>\u4f7f\u7528\u53cd\u5f15\u865f\u5305\u88f9</li> <li> <p>\u4f7f\u7528\u76f8\u5c0d\u8def\u5f91\u6216\u5b8c\u6574\u8def\u5f91</p> </li> <li> <p>\u6e2c\u8a66\u72c0\u614b: </p> </li> <li>\u2705 \u901a\u904e</li> <li>\u274c \u5931\u6557</li> <li>\u26a0\ufe0f \u5f85\u88dc</li> <li>\u2705 \u7121 linter \u932f\u8aa4</li> </ol>"},{"location":"15_Daily_Logs/FORMAT_RULES/#cursor","title":"\ud83e\udd16 \u8207 Cursor \u7684\u5c0d\u8a71\u7d71\u6574\u683c\u5f0f","text":""},{"location":"15_Daily_Logs/FORMAT_RULES/#_6","title":"\u91cd\u8981\u6c7a\u7b56\u683c\u5f0f","text":"<p>\u6bcf\u500b\u6c7a\u7b56\u61c9\u5305\u542b\u4ee5\u4e0b\u6b04\u4f4d\uff1a</p> <pre><code>#### 1. [\u6c7a\u7b56\u985e\u5225]\n- **User Prompt**: \"[\u7528\u6236\u63d0\u51fa\u7684\u554f\u984c\u6216\u9700\u6c42\uff0c\u8f49\u63db\u6210\u6e05\u6670\u7684 prompt]\"\n- **\u6c7a\u7b56\u5167\u5bb9**: [\u6c7a\u7b56\u7684\u8a73\u7d30\u63cf\u8ff0]\n- **\u76f8\u95dc\u6a94\u6848**: [\u76f8\u95dc\u7684\u6a94\u6848\u8def\u5f91]\n\n---\n</code></pre>"},{"location":"15_Daily_Logs/FORMAT_RULES/#user-prompt","title":"User Prompt \u898f\u5247","text":"<ol> <li> <p>\u5fc5\u9808\u5305\u542b: \u6bcf\u500b\u6c7a\u7b56\u548c\u554f\u984c\u89e3\u6c7a\u8a18\u9304\u90fd\u5fc5\u9808\u5305\u542b <code>User Prompt</code> \u6b04\u4f4d</p> </li> <li> <p>Prompt \u8f49\u63db\u539f\u5247:</p> </li> <li>\u5c07\u7528\u6236\u7684\u539f\u59cb\u554f\u984c\u8f49\u63db\u6210\u6e05\u6670\u3001\u53ef\u91cd\u7528\u7684 prompt</li> <li>\u4fdd\u7559\u554f\u984c\u7684\u6838\u5fc3\u610f\u5716</li> <li>\u4f7f\u7528\u5b8c\u6574\u7684\u53e5\u5b50\uff0c\u907f\u514d\u904e\u65bc\u7c21\u7565</li> <li> <p>\u5982\u679c\u7528\u6236\u6c92\u6709\u660e\u78ba\u63d0\u554f\uff0c\u8a18\u9304\u70ba \"\uff08\u7121\uff0c\u81ea\u52d5\u6aa2\u67e5\u767c\u73fe\uff09\" \u6216 \"\uff08\u81ea\u52d5\u57f7\u884c\uff09\"</p> </li> <li> <p>\u7bc4\u4f8b:</p> </li> <li>\u274c \u4e0d\u597d: \"Client \u548c API\"</li> <li>\u2705 \u597d: \"Client \u548c API \u4e4b\u9593\u6709 protocol layer \u55ce\uff1f\u4f60\u7684\u8a2d\u8a08\u6709\u7b26\u5408 TCA \u6587\u6a94\u55ce\uff1f\"</li> <li>\u274c \u4e0d\u597d: \"\u5206\u6210\u5169\u500b commits\"</li> <li>\u2705 \u597d: \"\u5206\u6210\u5169\u500b commits\uff0c\u4e26\u8b93 commit \u5c0d\u61c9\u5230\u5404\u81ea\u7684 ticket \u7de8\u865f\"</li> </ol>"},{"location":"15_Daily_Logs/FORMAT_RULES/#_7","title":"\u554f\u984c\u89e3\u6c7a\u8a18\u9304\u683c\u5f0f","text":"<pre><code>#### \u554f\u984c 1: [\u554f\u984c\u6a19\u984c]\n- **User Prompt**: \"[\u7528\u6236\u63d0\u51fa\u7684\u554f\u984c\uff0c\u8f49\u63db\u6210\u6e05\u6670\u7684 prompt]\"\n- **\u554f\u984c**: [\u554f\u984c\u7684\u8a73\u7d30\u63cf\u8ff0]\n- **\u539f\u56e0**: [\u554f\u984c\u7684\u6839\u672c\u539f\u56e0]\n- **\u89e3\u6c7a\u65b9\u6848**: [\u5982\u4f55\u89e3\u6c7a\u7684]\n- **\u6642\u9593**: ~X \u5206\u9418\n- **\u6a94\u6848**: [\u76f8\u95dc\u7684\u6a94\u6848]\n\n---\n</code></pre>"},{"location":"15_Daily_Logs/FORMAT_RULES/#_8","title":"\ud83d\udea7 \u9032\u884c\u4e2d\u9805\u76ee\u683c\u5f0f","text":"<p>\u5982\u679c\u6c92\u6709\u9032\u884c\u4e2d\u7684\u9805\u76ee\uff0c\u4f7f\u7528\uff1a</p> <pre><code>## \ud83d\udea7 \u9032\u884c\u4e2d\u9805\u76ee\n\n\u7121\n</code></pre>"},{"location":"15_Daily_Logs/FORMAT_RULES/#_9","title":"\ud83d\udc1b \u9047\u5230\u7684\u554f\u984c\u683c\u5f0f","text":""},{"location":"15_Daily_Logs/FORMAT_RULES/#_10","title":"\u6a19\u6e96\u683c\u5f0f","text":"<pre><code>### \u554f\u984c 1: [\u554f\u984c\u6a19\u984c]\n\n- **\u554f\u984c**: [\u554f\u984c\u7684\u8a73\u7d30\u63cf\u8ff0]\n- **\u539f\u56e0**: [\u554f\u984c\u7684\u6839\u672c\u539f\u56e0]\n- **\u89e3\u6c7a\u65b9\u6848**: [\u5982\u4f55\u89e3\u6c7a\u7684]\n- **\u6642\u9593**: ~X \u5206\u9418\n- **\u6a94\u6848**: [\u76f8\u95dc\u7684\u6a94\u6848]\n</code></pre>"},{"location":"15_Daily_Logs/FORMAT_RULES/#_11","title":"\u683c\u5f0f\u898f\u5247","text":"<ol> <li>\u4f7f\u7528 <code>###</code> \u4e09\u7d1a\u6a19\u984c</li> <li>\u6bcf\u500b\u554f\u984c\u4e4b\u9593\u4f7f\u7528 <code>---</code> \u5206\u9694</li> <li>\u5982\u679c\u6c92\u6709\u554f\u984c\uff0c\u53ef\u4ee5\u7701\u7565\u6b64\u7ae0\u7bc0\u6216\u5beb\u300c\u7121\u300d</li> </ol>"},{"location":"15_Daily_Logs/FORMAT_RULES/#_12","title":"\ud83d\udcca \u6642\u9593\u7d71\u8a08\u683c\u5f0f","text":""},{"location":"15_Daily_Logs/FORMAT_RULES/#_13","title":"\u6a19\u6e96\u683c\u5f0f","text":"<pre><code>## \ud83d\udcca \u6642\u9593\u7d71\u8a08\n\n### \u958b\u767c\u6642\u9593\n\n- **\u7e3d\u8a08**: ~X \u5c0f\u6642\n- **\u7d30\u9805**: \n  - [\u9805\u76ee 1]: X \u5206\u9418\n  - [\u9805\u76ee 2]: X \u5206\u9418\n\n### \u6e2c\u8a66\u6642\u9593\n\n- **\u7e3d\u8a08**: ~X \u5c0f\u6642\n- **\u8aaa\u660e**: [\u6e2c\u8a66\u76f8\u95dc\u8aaa\u660e]\n\n### \u6587\u4ef6\u66f4\u65b0\n\n- **\u7e3d\u8a08**: ~X \u5c0f\u6642\n- **\u7d30\u9805**: \n  - [\u9805\u76ee 1]: X \u5206\u9418\n  - [\u9805\u76ee 2]: X \u5206\u9418\n\n### \u554f\u984c\u89e3\u6c7a\n\n- **\u7e3d\u8a08**: ~X \u5206\u9418\n- **\u7d30\u9805**:\n  - [\u554f\u984c 1]: X \u5206\u9418\n  - [\u554f\u984c 2]: X \u5206\u9418\n\n### \u8207 Cursor \u5354\u4f5c\u6642\u9593\n\n- **\u7e3d\u8a08**: ~X \u5c0f\u6642\n- **\u8aaa\u660e**: [\u5354\u4f5c\u76f8\u95dc\u8aaa\u660e]\n\n### \u6703\u8b70/\u8a0e\u8ad6\n\n- **\u7e3d\u8a08**: X \u5c0f\u6642\n\n### \u7e3d\u8a08\n\n- **\u7e3d\u8a08**: ~X \u5c0f\u6642\n</code></pre>"},{"location":"15_Daily_Logs/FORMAT_RULES/#_14","title":"\ud83d\udcc4 \u76f8\u95dc\u6587\u4ef6\u6539\u52d5\u8a18\u9304\u683c\u5f0f","text":""},{"location":"15_Daily_Logs/FORMAT_RULES/#git-commits","title":"Git Commits \u683c\u5f0f","text":"<pre><code>#### 1. [Commit \u6a19\u984c]\n- **Commit**: `commit_hash`\n- **\u8a0a\u606f**: `commit message`\n- **\u6642\u9593**: YYYY-MM-DD\n- **\u6539\u52d5\u6587\u4ef6**:\n  - `\u8def\u5f91/\u6a94\u6848\u540d.swift` (\u65b0\u589e/\u4fee\u6539/\u522a\u9664)\n</code></pre>"},{"location":"15_Daily_Logs/FORMAT_RULES/#_15","title":"\u6587\u4ef6\u7d71\u8a08\u683c\u5f0f","text":"<pre><code>### \u6587\u4ef6\u7d71\u8a08\n\n- **\u7e3d Commits**: X\n- **\u65b0\u589e\u6587\u4ef6**: X \u500b\n  - `\u8def\u5f91/\u6a94\u6848\u540d.swift` (X lines)\n- **\u7e3d\u7a0b\u5f0f\u78bc\u884c\u6578**: ~X lines\n- **\u6e2c\u8a66\u7a0b\u5f0f\u78bc**: X lines\n</code></pre>"},{"location":"15_Daily_Logs/FORMAT_RULES/#_16","title":"\ud83c\udfa8 \u683c\u5f0f\u4e00\u81f4\u6027\u898f\u5247","text":""},{"location":"15_Daily_Logs/FORMAT_RULES/#1","title":"1. \u6a19\u984c\u5c64\u7d1a","text":"<ul> <li>\u4e00\u7d1a\u6a19\u984c (<code>#</code>): \u6587\u4ef6\u6a19\u984c</li> <li>\u4e8c\u7d1a\u6a19\u984c (<code>##</code>): \u4e3b\u8981\u7ae0\u7bc0</li> <li>\u4e09\u7d1a\u6a19\u984c (<code>###</code>): \u5b8c\u6210\u9805\u76ee\u3001\u554f\u984c\u7b49</li> <li>\u56db\u7d1a\u6a19\u984c (<code>####</code>): \u6c7a\u7b56\u3001\u5c0d\u8a71\u7b49\u5b50\u9805\u76ee</li> </ul>"},{"location":"15_Daily_Logs/FORMAT_RULES/#2","title":"2. \u5217\u8868\u683c\u5f0f","text":"<ul> <li>\u4f7f\u7528 <code>-</code> \u800c\u975e <code>*</code> \u6216 <code>+</code></li> <li>\u591a\u5c64\u5217\u8868\u4f7f\u7528 2 \u500b\u7a7a\u683c\u7e2e\u9032</li> </ul>"},{"location":"15_Daily_Logs/FORMAT_RULES/#3","title":"3. \u5f37\u8abf\u683c\u5f0f","text":"<ul> <li>\u7c97\u9ad4: \u4f7f\u7528 <code>**\u6587\u5b57**</code> \u6a19\u8a18\u91cd\u8981\u6b04\u4f4d\u540d\u7a31</li> <li><code>\u7a0b\u5f0f\u78bc</code>: \u4f7f\u7528\u53cd\u5f15\u865f\u5305\u88f9\u6a94\u6848\u8def\u5f91\u3001commit hash\u3001\u7a0b\u5f0f\u78bc\u7247\u6bb5</li> </ul>"},{"location":"15_Daily_Logs/FORMAT_RULES/#4","title":"4. \u5206\u9694\u7dda","text":"<ul> <li>\u9805\u76ee\u4e4b\u9593\u4f7f\u7528 <code>---</code> \u5206\u9694</li> <li>\u4e0d\u4f7f\u7528 <code>***</code> \u6216 <code>___</code></li> </ul>"},{"location":"15_Daily_Logs/FORMAT_RULES/#5-emoji","title":"5. Emoji \u4f7f\u7528","text":"<ul> <li>\u7ae0\u7bc0\u6a19\u984c\u4f7f\u7528\u5c0d\u61c9\u7684 emoji</li> <li>\u4fdd\u6301\u4e00\u81f4\u7684 emoji \u98a8\u683c</li> </ul>"},{"location":"15_Daily_Logs/FORMAT_RULES/#_17","title":"\ud83d\udcdd \u7bc4\u4f8b","text":"<p>\u53c3\u8003 <code>2025-12-01.md</code> \u548c <code>2025-12-02.md</code> \u4f5c\u70ba\u683c\u5f0f\u7bc4\u4f8b\u3002</p>"},{"location":"15_Daily_Logs/FORMAT_RULES/#_18","title":"\ud83d\udd04 \u66f4\u65b0\u8a18\u9304","text":"\u65e5\u671f \u66f4\u65b0\u5167\u5bb9 \u66f4\u65b0\u4eba 2025-12-02 \u5efa\u7acb\u683c\u5f0f\u898f\u5247\u6587\u4ef6\uff0c\u52a0\u5165 User Prompt \u6b04\u4f4d\u898f\u7bc4 -"},{"location":"15_Daily_Logs/MKDOCS_UPDATE/","title":"mkdocs.yml \u66f4\u65b0\u65b9\u5f0f","text":"<p>\u672c\u6587\u6a94\u8aaa\u660e\u5982\u4f55\u66f4\u65b0 <code>mkdocs.yml</code> \u4e2d\u7684\u5c0e\u822a\u914d\u7f6e\uff0c\u7279\u5225\u662f Daily Logs \u90e8\u5206\u3002</p>"},{"location":"15_Daily_Logs/MKDOCS_UPDATE/#_1","title":"\ud83d\udd04 \u81ea\u52d5\u66f4\u65b0\uff08\u63a8\u85a6\uff09","text":""},{"location":"15_Daily_Logs/MKDOCS_UPDATE/#1-daily-end","title":"\u65b9\u5f0f 1: \u4f7f\u7528 daily-end \u547d\u4ee4","text":"<p>\u57f7\u884c <code>daily-end</code> \u547d\u4ee4\u6642\uff0c\u6703\u81ea\u52d5\u66f4\u65b0 <code>mkdocs.yml</code>\uff1a</p> <pre><code>@daily-end\n</code></pre> <p>\u9019\u6703\u57f7\u884c <code>summarize_daily_work.sh</code> \u8173\u672c\uff0c\u8a72\u8173\u672c\u6703\uff1a 1. \u751f\u6210\u5de5\u4f5c\u7d71\u6574\u6587\u4ef6 2. \u81ea\u52d5\u66f4\u65b0 mkdocs.yml\uff08\u65b0\u589e\u529f\u80fd\uff09 3. \u63d0\u793a\u90e8\u7f72\u5230 GitHub Pages</p>"},{"location":"15_Daily_Logs/MKDOCS_UPDATE/#2","title":"\u65b9\u5f0f 2: \u76f4\u63a5\u57f7\u884c\u66f4\u65b0\u8173\u672c","text":"<pre><code>cd /Users/reedhsin/Documents/codebase/fcom-iOS/TDDs/LiveChat\\&amp;PrematchComment/LiveChat\\&amp;PrematchComment\n./scripts/update_mkdocs_nav.sh\n</code></pre>"},{"location":"15_Daily_Logs/MKDOCS_UPDATE/#_2","title":"\ud83d\udcdd \u624b\u52d5\u66f4\u65b0","text":"<p>\u5982\u679c\u81ea\u52d5\u66f4\u65b0\u5931\u6557\uff0c\u53ef\u4ee5\u624b\u52d5\u7de8\u8f2f <code>mkdocs.yml</code>\uff1a</p>"},{"location":"15_Daily_Logs/MKDOCS_UPDATE/#1-daily-logs","title":"\u6b65\u9a5f 1: \u627e\u5230 Daily Logs \u90e8\u5206","text":"<p>\u5728 <code>mkdocs.yml</code> \u4e2d\u627e\u5230\uff1a</p> <pre><code>  - Daily Logs:\n    - 15_Daily_Logs/README.md\n    - 15_Daily_Logs/TEMPLATE.md\n    - 15_Daily_Logs/WORKFLOW.md\n    - 15_Daily_Logs/2025-12-01.md\n    - 15_Daily_Logs/2025-12-02.md\n</code></pre>"},{"location":"15_Daily_Logs/MKDOCS_UPDATE/#2_1","title":"\u6b65\u9a5f 2: \u6dfb\u52a0\u65b0\u7684\u5de5\u4f5c\u65e5\u8a8c","text":"<p>\u5728 <code>Daily Logs</code> \u90e8\u5206\u6dfb\u52a0\u65b0\u7684\u5de5\u4f5c\u65e5\u8a8c\u6587\u4ef6\uff1a</p> <pre><code>  - Daily Logs:\n    - 15_Daily_Logs/README.md\n    - 15_Daily_Logs/TEMPLATE.md\n    - 15_Daily_Logs/WORKFLOW.md\n    - 15_Daily_Logs/FORMAT_RULES.md\n    - 15_Daily_Logs/2025-12-01.md\n    - 15_Daily_Logs/2025-12-02.md\n    - 15_Daily_Logs/2025-12-03.md  # \u65b0\u589e\n</code></pre>"},{"location":"15_Daily_Logs/MKDOCS_UPDATE/#3","title":"\u6b65\u9a5f 3: \u4fdd\u6301\u9806\u5e8f","text":"<p>\u78ba\u4fdd\u5de5\u4f5c\u65e5\u8a8c\u6309\u65e5\u671f\u6392\u5e8f\uff08\u5f9e\u820a\u5230\u65b0\uff09\u3002</p>"},{"location":"15_Daily_Logs/MKDOCS_UPDATE/#_3","title":"\ud83d\udd0d \u66f4\u65b0\u8173\u672c\u5de5\u4f5c\u539f\u7406","text":"<p><code>update_mkdocs_nav.sh</code> \u8173\u672c\u6703\uff1a</p> <ol> <li>\u6383\u63cf\u76ee\u9304: \u6383\u63cf <code>15_Daily_Logs/</code> \u76ee\u9304\uff0c\u627e\u5230\u6240\u6709\u683c\u5f0f\u70ba <code>YYYY-MM-DD.md</code> \u7684\u6587\u4ef6</li> <li>\u6392\u5e8f: \u6309\u6587\u4ef6\u540d\uff08\u65e5\u671f\uff09\u6392\u5e8f</li> <li>\u66f4\u65b0\u914d\u7f6e: \u4f7f\u7528 Python \u6b63\u5247\u8868\u9054\u5f0f\u66ff\u63db <code>mkdocs.yml</code> \u4e2d\u7684 <code>Daily Logs</code> \u90e8\u5206</li> <li>\u4fdd\u7559\u56fa\u5b9a\u6587\u4ef6: \u4fdd\u7559 <code>README.md</code>\u3001<code>TEMPLATE.md</code>\u3001<code>WORKFLOW.md</code>\u3001<code>FORMAT_RULES.md</code></li> </ol>"},{"location":"15_Daily_Logs/MKDOCS_UPDATE/#_4","title":"\u2699\ufe0f \u6280\u8853\u7d30\u7bc0","text":""},{"location":"15_Daily_Logs/MKDOCS_UPDATE/#_5","title":"\u8173\u672c\u4f4d\u7f6e","text":"<pre><code>scripts/update_mkdocs_nav.sh\n</code></pre>"},{"location":"15_Daily_Logs/MKDOCS_UPDATE/#_6","title":"\u4f9d\u8cf4","text":"<ul> <li>Python 3\uff08\u5167\u5efa\uff0c\u7121\u9700\u984d\u5916\u5b89\u88dd\uff09</li> <li>\u4f7f\u7528 Python \u7684 <code>re</code> \u548c <code>pathlib</code> \u6a21\u7d44\uff08\u6a19\u6e96\u5eab\uff09</li> </ul>"},{"location":"15_Daily_Logs/MKDOCS_UPDATE/#_7","title":"\u66f4\u65b0\u7bc4\u570d","text":"<p>\u8173\u672c\u53ea\u66f4\u65b0 <code>Daily Logs</code> \u90e8\u5206\uff0c\u4e0d\u5f71\u97ff\u5176\u4ed6\u5c0e\u822a\u914d\u7f6e\u3002</p>"},{"location":"15_Daily_Logs/MKDOCS_UPDATE/#_8","title":"\ud83d\ude80 \u5b8c\u6574\u5de5\u4f5c\u6d41\u7a0b","text":""},{"location":"15_Daily_Logs/MKDOCS_UPDATE/#_9","title":"\u6bcf\u5929\u7d50\u675f\u6642","text":"<pre><code># 1. \u57f7\u884c daily-end\uff08\u81ea\u52d5\u66f4\u65b0 mkdocs.yml\uff09\n@daily-end\n\n# 2. \u90e8\u7f72\u5230 GitHub Pages\n@deploy-tdd-to-mkdocs\n</code></pre>"},{"location":"15_Daily_Logs/MKDOCS_UPDATE/#_10","title":"\u6216\u624b\u52d5\u57f7\u884c","text":"<pre><code># 1. \u66f4\u65b0 mkdocs.yml\n./scripts/update_mkdocs_nav.sh\n\n# 2. \u90e8\u7f72\npython3 -m mkdocs gh-deploy\n</code></pre>"},{"location":"15_Daily_Logs/MKDOCS_UPDATE/#_11","title":"\u26a0\ufe0f \u6ce8\u610f\u4e8b\u9805","text":"<ol> <li>\u5099\u4efd: \u66f4\u65b0\u524d\u5efa\u8b70\u5148\u5099\u4efd <code>mkdocs.yml</code></li> <li>\u6aa2\u67e5: \u66f4\u65b0\u5f8c\u6aa2\u67e5 <code>mkdocs.yml</code> \u683c\u5f0f\u662f\u5426\u6b63\u78ba</li> <li>\u6e2c\u8a66: \u90e8\u7f72\u524d\u53ef\u4ee5\u672c\u5730\u6e2c\u8a66\uff1a<code>python3 -m mkdocs serve</code></li> </ol>"},{"location":"15_Daily_Logs/MKDOCS_UPDATE/#_12","title":"\ud83d\udd27 \u6545\u969c\u6392\u9664","text":""},{"location":"15_Daily_Logs/MKDOCS_UPDATE/#1","title":"\u554f\u984c 1: \u8173\u672c\u57f7\u884c\u5931\u6557","text":"<p>\u932f\u8aa4: <code>\u274c \u66f4\u65b0\u5931\u6557</code></p> <p>\u89e3\u6c7a: 1. \u6aa2\u67e5 Python 3 \u662f\u5426\u5df2\u5b89\u88dd\uff1a<code>python3 --version</code> 2. \u6aa2\u67e5\u8173\u672c\u6b0a\u9650\uff1a<code>chmod +x scripts/update_mkdocs_nav.sh</code> 3. \u6aa2\u67e5\u6587\u4ef6\u8def\u5f91\u662f\u5426\u6b63\u78ba</p>"},{"location":"15_Daily_Logs/MKDOCS_UPDATE/#2-mkdocsyml","title":"\u554f\u984c 2: mkdocs.yml \u683c\u5f0f\u932f\u8aa4","text":"<p>\u932f\u8aa4: MkDocs \u5efa\u7f6e\u5931\u6557</p> <p>\u89e3\u6c7a: 1. \u6aa2\u67e5 YAML \u7e2e\u9032\uff08\u5fc5\u9808\u4f7f\u7528 2 \u500b\u7a7a\u683c\uff09 2. \u6aa2\u67e5\u662f\u5426\u6709\u8a9e\u6cd5\u932f\u8aa4 3. \u4f7f\u7528 YAML \u9a57\u8b49\u5de5\u5177\u6aa2\u67e5</p>"},{"location":"15_Daily_Logs/MKDOCS_UPDATE/#3_1","title":"\u554f\u984c 3: \u5de5\u4f5c\u65e5\u8a8c\u672a\u51fa\u73fe\u5728\u5c0e\u822a\u4e2d","text":"<p>\u539f\u56e0: \u6587\u4ef6\u540d\u683c\u5f0f\u4e0d\u6b63\u78ba</p> <p>\u89e3\u6c7a: \u78ba\u4fdd\u6587\u4ef6\u540d\u683c\u5f0f\u70ba <code>YYYY-MM-DD.md</code>\uff08\u4f8b\u5982\uff1a<code>2025-12-03.md</code>\uff09</p>"},{"location":"15_Daily_Logs/MKDOCS_UPDATE/#_13","title":"\ud83d\udcda \u76f8\u95dc\u6587\u4ef6","text":"<ul> <li>\u5de5\u4f5c\u65e5\u8a8c README</li> <li>\u5de5\u4f5c\u65e5\u8a8c\u683c\u5f0f\u898f\u5247</li> <li>\u5de5\u4f5c\u65e5\u8a8c\u5de5\u4f5c\u6d41\u7a0b</li> <li>MkDocs \u90e8\u7f72\u6307\u5357</li> </ul>"},{"location":"15_Daily_Logs/TEMPLATE/","title":"\u5de5\u4f5c\u65e5\u8a8c - YYYY-MM-DD","text":""},{"location":"15_Daily_Logs/TEMPLATE/#_1","title":"\ud83d\udccb \u4eca\u65e5\u8a08\u5283","text":"<ul> <li>[ ] Ticket ID: \u6a19\u984c</li> <li>[ ] Ticket ID: \u6a19\u984c</li> </ul>"},{"location":"15_Daily_Logs/TEMPLATE/#_2","title":"\u2705 \u5b8c\u6210\u9805\u76ee","text":"<ul> <li>[x] Ticket ID: \u6a19\u984c</li> <li>\u6642\u9593: X \u5c0f\u6642</li> <li>\u6a94\u6848: <code>\u8def\u5f91/\u6a94\u6848\u540d.swift</code></li> <li>\u6e2c\u8a66: \u2705 \u901a\u904e / \u274c \u5931\u6557</li> <li>\u5099\u8a3b: \u4efb\u4f55\u984d\u5916\u7684\u8aaa\u660e</li> </ul>"},{"location":"15_Daily_Logs/TEMPLATE/#_3","title":"\ud83d\udea7 \u9032\u884c\u4e2d\u9805\u76ee","text":"<ul> <li>Ticket ID: \u6a19\u984c</li> <li>\u9032\u5ea6: X%</li> <li>\u9810\u8a08\u5b8c\u6210: \u65e5\u671f\u6216\u6642\u9593</li> <li>\u7576\u524d\u72c0\u614b: \u63cf\u8ff0\u7576\u524d\u72c0\u614b</li> </ul>"},{"location":"15_Daily_Logs/TEMPLATE/#_4","title":"\ud83d\udc1b \u9047\u5230\u7684\u554f\u984c","text":"<ol> <li>\u554f\u984c\u63cf\u8ff0</li> <li>\u539f\u56e0: \u554f\u984c\u7684\u6839\u672c\u539f\u56e0</li> <li>\u89e3\u6c7a\u65b9\u6848: \u5982\u4f55\u89e3\u6c7a\u7684</li> <li>\u6642\u9593: \u82b1\u8cbb\u7684\u6642\u9593</li> <li>\u6a94\u6848: \u76f8\u95dc\u7684\u6a94\u6848</li> </ol>"},{"location":"15_Daily_Logs/TEMPLATE/#cursor","title":"\ud83e\udd16 \u8207 Cursor \u7684\u5c0d\u8a71\u7d71\u6574","text":""},{"location":"15_Daily_Logs/TEMPLATE/#_5","title":"\u91cd\u8981\u6c7a\u7b56","text":""},{"location":"15_Daily_Logs/TEMPLATE/#1","title":"1. [\u6c7a\u7b56\u985e\u5225]","text":"<ul> <li>User Prompt: \"[\u7528\u6236\u63d0\u51fa\u7684\u554f\u984c\u6216\u9700\u6c42\uff0c\u8f49\u63db\u6210\u6e05\u6670\u7684 prompt]\"</li> <li>\u6c7a\u7b56\u5167\u5bb9: [\u6c7a\u7b56\u7684\u8a73\u7d30\u63cf\u8ff0]</li> <li>\u76f8\u95dc\u6a94\u6848: [\u76f8\u95dc\u7684\u6a94\u6848\u8def\u5f91]</li> </ul>"},{"location":"15_Daily_Logs/TEMPLATE/#2","title":"2. [\u6c7a\u7b56\u985e\u5225]","text":"<ul> <li>User Prompt: \"[\u7528\u6236\u63d0\u51fa\u7684\u554f\u984c\u6216\u9700\u6c42\uff0c\u8f49\u63db\u6210\u6e05\u6670\u7684 prompt]\"</li> <li>\u6c7a\u7b56\u5167\u5bb9: [\u6c7a\u7b56\u7684\u8a73\u7d30\u63cf\u8ff0]</li> <li>\u76f8\u95dc\u6a94\u6848: [\u76f8\u95dc\u7684\u6a94\u6848\u8def\u5f91]</li> </ul>"},{"location":"15_Daily_Logs/TEMPLATE/#_6","title":"\u5b78\u7fd2\u8981\u9ede","text":""},{"location":"15_Daily_Logs/TEMPLATE/#1_1","title":"1. [\u5b78\u7fd2\u4e3b\u984c]","text":"<ul> <li>\u63cf\u8ff0: [\u5b78\u7fd2\u5167\u5bb9\u7684\u63cf\u8ff0]</li> <li>\u8981\u9ede: </li> <li>[\u8981\u9ede 1]</li> <li>[\u8981\u9ede 2]</li> </ul>"},{"location":"15_Daily_Logs/TEMPLATE/#2_1","title":"2. [\u5b78\u7fd2\u4e3b\u984c]","text":"<ul> <li>\u63cf\u8ff0: [\u5b78\u7fd2\u5167\u5bb9\u7684\u63cf\u8ff0]</li> <li>\u8981\u9ede: </li> <li>[\u8981\u9ede 1]</li> <li>[\u8981\u9ede 2]</li> </ul>"},{"location":"15_Daily_Logs/TEMPLATE/#_7","title":"\u554f\u984c\u89e3\u6c7a\u8a18\u9304","text":""},{"location":"15_Daily_Logs/TEMPLATE/#1_2","title":"\u554f\u984c 1: [\u554f\u984c\u6a19\u984c]","text":"<ul> <li>User Prompt: \"[\u7528\u6236\u63d0\u51fa\u7684\u554f\u984c\uff0c\u8f49\u63db\u6210\u6e05\u6670\u7684 prompt]\"</li> <li>\u554f\u984c: [\u554f\u984c\u7684\u8a73\u7d30\u63cf\u8ff0]</li> <li>\u539f\u56e0: [\u554f\u984c\u7684\u6839\u672c\u539f\u56e0]</li> <li>\u89e3\u6c7a\u65b9\u6848: [\u5982\u4f55\u89e3\u6c7a\u7684]</li> <li>\u6642\u9593: [\u82b1\u8cbb\u7684\u6642\u9593]</li> <li>\u6a94\u6848: [\u76f8\u95dc\u7684\u6a94\u6848]</li> </ul>"},{"location":"15_Daily_Logs/TEMPLATE/#2_2","title":"\u554f\u984c 2: [\u554f\u984c\u6a19\u984c]","text":"<ul> <li>User Prompt: \"[\u7528\u6236\u63d0\u51fa\u7684\u554f\u984c\uff0c\u8f49\u63db\u6210\u6e05\u6670\u7684 prompt]\"</li> <li>\u554f\u984c: [\u554f\u984c\u7684\u8a73\u7d30\u63cf\u8ff0]</li> <li>\u539f\u56e0: [\u554f\u984c\u7684\u6839\u672c\u539f\u56e0]</li> <li>\u89e3\u6c7a\u65b9\u6848: [\u5982\u4f55\u89e3\u6c7a\u7684]</li> <li>\u6642\u9593: [\u82b1\u8cbb\u7684\u6642\u9593]</li> <li>\u6a94\u6848: [\u76f8\u95dc\u7684\u6a94\u6848]</li> </ul>"},{"location":"15_Daily_Logs/TEMPLATE/#_8","title":"\u6539\u9032\u5efa\u8b70","text":""},{"location":"15_Daily_Logs/TEMPLATE/#1_3","title":"1. [\u6539\u9032\u985e\u5225]","text":"<ul> <li>\u5efa\u8b70: [\u6539\u9032\u5efa\u8b70\u7684\u8a73\u7d30\u63cf\u8ff0]</li> <li>\u512a\u5148\u7d1a: [\u9ad8/\u4e2d/\u4f4e]</li> </ul>"},{"location":"15_Daily_Logs/TEMPLATE/#2_3","title":"2. [\u6539\u9032\u985e\u5225]","text":"<ul> <li>\u5efa\u8b70: [\u6539\u9032\u5efa\u8b70\u7684\u8a73\u7d30\u63cf\u8ff0]</li> <li>\u512a\u5148\u7d1a: [\u9ad8/\u4e2d/\u4f4e]</li> </ul>"},{"location":"15_Daily_Logs/TEMPLATE/#_9","title":"\u5c0d\u8a71\u8a18\u9304","text":""},{"location":"15_Daily_Logs/TEMPLATE/#1_4","title":"\u5c0d\u8a71 1: [\u4e3b\u984c]","text":"<ul> <li>\u6642\u9593: [\u6642\u9593]</li> <li>User Prompt: \"[\u7528\u6236\u63d0\u51fa\u7684\u554f\u984c\u6216\u9700\u6c42]\"</li> <li>\u5167\u5bb9: [\u5c0d\u8a71\u5167\u5bb9\u6458\u8981]</li> <li>\u7d50\u679c: [\u5c0d\u8a71\u7d50\u679c]</li> </ul>"},{"location":"15_Daily_Logs/TEMPLATE/#2_4","title":"\u5c0d\u8a71 2: [\u4e3b\u984c]","text":"<ul> <li>\u6642\u9593: [\u6642\u9593]</li> <li>User Prompt: \"[\u7528\u6236\u63d0\u51fa\u7684\u554f\u984c\u6216\u9700\u6c42]\"</li> <li>\u5167\u5bb9: [\u5c0d\u8a71\u5167\u5bb9\u6458\u8981]</li> <li>\u7d50\u679c: [\u5c0d\u8a71\u7d50\u679c] </li> </ul>"},{"location":"15_Daily_Logs/TEMPLATE/#_10","title":"\ud83d\udca1 \u5b78\u7fd2\u8207\u53cd\u601d","text":"<ul> <li>\u767c\u73fe\u6216\u5b78\u7fd2\u5230\u7684\u65b0\u77e5\u8b58</li> <li>\u53ef\u4ee5\u6539\u9032\u7684\u5730\u65b9</li> <li>\u4e0b\u6b21\u53ef\u4ee5\u505a\u5f97\u66f4\u597d\u7684\u5730\u65b9</li> <li>\u8207 Cursor \u5354\u4f5c\u7684\u6539\u9032\u7a7a\u9593</li> </ul>"},{"location":"15_Daily_Logs/TEMPLATE/#_11","title":"\ud83d\udcca \u6642\u9593\u7d71\u8a08","text":"<ul> <li>\u958b\u767c\u6642\u9593: X \u5c0f\u6642</li> <li>\u6e2c\u8a66\u6642\u9593: X \u5c0f\u6642</li> <li>\u6587\u4ef6\u66f4\u65b0: X \u5c0f\u6642</li> <li>\u554f\u984c\u89e3\u6c7a: X \u5c0f\u6642</li> <li>\u8207 Cursor \u5354\u4f5c\u6642\u9593: X \u5c0f\u6642</li> <li>\u6703\u8b70/\u8a0e\u8ad6: X \u5c0f\u6642</li> <li>\u7e3d\u8a08: X \u5c0f\u6642</li> </ul>"},{"location":"15_Daily_Logs/TEMPLATE/#_12","title":"\ud83d\udd04 \u660e\u65e5\u8a08\u5283","text":"<ul> <li>[ ] Ticket ID: \u6a19\u984c</li> <li>[ ] Ticket ID: \u6a19\u984c</li> </ul>"},{"location":"15_Daily_Logs/TEMPLATE/#_13","title":"\ud83d\udcdd \u5176\u4ed6\u5099\u8a3b","text":"<p>\u4efb\u4f55\u5176\u4ed6\u9700\u8981\u8a18\u9304\u7684\u5167\u5bb9</p>"},{"location":"15_Daily_Logs/TEMPLATE/#_14","title":"\ud83d\udcc4 \u76f8\u95dc\u6587\u4ef6\u6539\u52d5\u8a18\u9304","text":"<p>\u672c\u6587\u6a94\u8a18\u9304\u7576\u5929\u5728\u4e3b\u5c08\u6848\uff08<code>fcom-iOS</code>\uff09\u4e2d\u8207 MatchChat \u76f8\u95dc\u7684\u6240\u6709\u6587\u4ef6\u6539\u52d5\u3002</p>"},{"location":"15_Daily_Logs/TEMPLATE/#git-commits","title":"Git Commits","text":""},{"location":"15_Daily_Logs/TEMPLATE/#1-commit","title":"1. [Commit \u6a19\u984c]","text":"<ul> <li>Commit: <code>commit_hash</code></li> <li>\u8a0a\u606f: <code>commit message</code></li> <li>\u6642\u9593: YYYY-MM-DD HH:MM:SS</li> <li>\u6539\u52d5\u6587\u4ef6:</li> <li><code>\u8def\u5f91/\u6a94\u6848\u540d.swift</code></li> <li><code>\u8def\u5f91/\u6a94\u6848\u540d.swift</code></li> </ul>"},{"location":"15_Daily_Logs/TEMPLATE/#_15","title":"\u6587\u4ef6\u7d71\u8a08","text":"<ul> <li>\u7e3d Commits: X</li> <li>\u65b0\u589e\u6587\u4ef6: X+</li> <li>\u7e3d\u7a0b\u5f0f\u78bc\u884c\u6578: ~X+ lines</li> <li>\u6e2c\u8a66\u7a0b\u5f0f\u78bc: X lines</li> </ul>"},{"location":"15_Daily_Logs/TEMPLATE/#tdd-tickets","title":"\u76f8\u95dc TDD Tickets","text":"<ul> <li>TDD-XXX: [\u6a19\u984c] [JIRA-ID] \u2705</li> <li>TDD-XXX: [\u6a19\u984c] [JIRA-ID] \u2705</li> </ul>"},{"location":"15_Daily_Logs/TEMPLATE/#_16","title":"\u5099\u8a3b","text":"<p>\u6240\u6709\u6539\u52d5\u90fd\u5728\u4e3b\u5c08\u6848\uff08<code>fcom-iOS</code>\uff09\u7684 <code>main</code> \u5206\u652f\u4e0a\uff0c\u9019\u4e9b\u6587\u4ef6\u4e0d\u5c6c\u65bc TDDs repository\uff0c\u4f46\u8207 TDD \u6587\u4ef6\u5c0d\u61c9\u7684\u5be6\u4f5c\u76f8\u95dc\u3002</p>"},{"location":"15_Daily_Logs/WORKFLOW/","title":"\u5de5\u4f5c\u65e5\u8a8c Git \u5206\u652f\u5de5\u4f5c\u6d41\u7a0b","text":"<p>\u672c\u6587\u6a94\u8aaa\u660e\u5982\u4f55\u5275\u5efa\u65b0\u7684\u5de5\u4f5c\u65e5\u8a8c\u4e26\u90e8\u7f72\u5230 GitHub Pages\uff0c\u540c\u6642\u78ba\u4fdd\u820a\u7684\u5de5\u4f5c\u65e5\u8a8c\u4e0d\u6703\u4e1f\u5931\u3002</p>"},{"location":"15_Daily_Logs/WORKFLOW/#_1","title":"\ud83d\udccb \u5de5\u4f5c\u6d41\u7a0b\u6982\u8ff0","text":"<pre><code>main \u5206\u652f (\u6e90\u6587\u4ef6)          gh-pages \u5206\u652f (\u751f\u6210\u7684\u7db2\u7ad9)\n     \u2502                            \u2502\n     \u251c\u2500 \u5275\u5efa\u5de5\u4f5c\u65e5\u8a8c Markdown      \u2502\n     \u251c\u2500 Commit \u5230 main            \u2502\n     \u251c\u2500 \u57f7\u884c mkdocs gh-deploy \u2500\u2500\u2500\u2500\u253c\u2500&gt; \u751f\u6210 HTML\n     \u2502                            \u251c\u2500 \u63a8\u9001\u5230 gh-pages\n     \u2502                            \u2514\u2500 \u6240\u6709\u5de5\u4f5c\u65e5\u8a8c\u90fd\u4fdd\u7559\n</code></pre>"},{"location":"15_Daily_Logs/WORKFLOW/#_2","title":"\ud83d\udd04 \u5b8c\u6574\u5de5\u4f5c\u6d41\u7a0b","text":""},{"location":"15_Daily_Logs/WORKFLOW/#1-main","title":"\u6b65\u9a5f 1: \u5728 main \u5206\u652f\u5275\u5efa\u5de5\u4f5c\u65e5\u8a8c","text":"<pre><code># 1. \u78ba\u4fdd\u5728 main \u5206\u652f\ncd /Users/reedhsin/Documents/codebase/fcom-iOS/TDDs/LiveChat&amp;PrematchComment/LiveChat&amp;PrematchComment\ngit checkout main\ngit pull origin main\n\n# 2. \u5275\u5efa\u4eca\u5929\u7684\u5de5\u4f5c\u65e5\u8a8c\n./scripts/create_daily_log.sh\n\n# \u6216\u6307\u5b9a\u65e5\u671f\n./scripts/create_daily_log.sh 2025-12-03\n</code></pre> <p>\u7d50\u679c: \u5728 <code>15_Daily_Logs/</code> \u76ee\u9304\u4e0b\u5275\u5efa <code>YYYY-MM-DD.md</code> \u6587\u4ef6</p>"},{"location":"15_Daily_Logs/WORKFLOW/#2","title":"\u6b65\u9a5f 2: \u7de8\u8f2f\u5de5\u4f5c\u65e5\u8a8c","text":"<p>\u7de8\u8f2f\u525b\u5275\u5efa\u7684\u5de5\u4f5c\u65e5\u8a8c\u6587\u4ef6\uff0c\u8a18\u9304\uff1a - \ud83d\udccb \u4eca\u65e5\u8a08\u5283 - \u2705 \u5b8c\u6210\u9805\u76ee - \ud83d\udea7 \u9032\u884c\u4e2d\u9805\u76ee - \ud83d\udc1b \u9047\u5230\u7684\u554f\u984c - \ud83d\udca1 \u5b78\u7fd2\u8207\u53cd\u601d - \ud83d\udcca \u6642\u9593\u7d71\u8a08 - \ud83d\udd04 \u660e\u65e5\u8a08\u5283</p>"},{"location":"15_Daily_Logs/WORKFLOW/#3-commit-main","title":"\u6b65\u9a5f 3: Commit \u5230 main \u5206\u652f","text":"<pre><code># 1. \u6aa2\u67e5\u8b8a\u66f4\ngit status\n\n# 2. \u6dfb\u52a0\u5de5\u4f5c\u65e5\u8a8c\u6587\u4ef6\ngit add 15_Daily_Logs/YYYY-MM-DD.md\n\n# 3. Commit\uff08\u4f7f\u7528 Conventional Commits \u683c\u5f0f\uff09\ngit commit -m \"docs: add daily log for YYYY-MM-DD\"\n\n# 4. Push \u5230\u9060\u7aef\ngit push origin main\n</code></pre> <p>\u91cd\u8981:  - \u2705 \u5de5\u4f5c\u65e5\u8a8c\u7684 Markdown \u6587\u4ef6\u5fc5\u9808\u5728 main \u5206\u652f - \u2705 \u9019\u6a23\u624d\u80fd\u78ba\u4fdd\u6240\u6709\u5de5\u4f5c\u65e5\u8a8c\u90fd\u88ab\u4fdd\u7559 - \u2705 \u6bcf\u6b21\u90e8\u7f72\u6642\uff0cMkDocs \u6703\u5f9e main \u5206\u652f\u7684\u6e90\u6587\u4ef6\u751f\u6210\u6240\u6709 HTML</p>"},{"location":"15_Daily_Logs/WORKFLOW/#4-github-pages","title":"\u6b65\u9a5f 4: \u90e8\u7f72\u5230 GitHub Pages","text":"<pre><code># 1. \u78ba\u4fdd\u5728\u6b63\u78ba\u7684\u76ee\u9304\ncd /Users/reedhsin/Documents/codebase/fcom-iOS/TDDs/LiveChat&amp;PrematchComment/LiveChat&amp;PrematchComment\n\n# 2. \u57f7\u884c\u90e8\u7f72\npython3 -m mkdocs gh-deploy\n</code></pre> <p>MkDocs \u6703\u81ea\u52d5: 1. \u5f9e <code>docs/</code> \u76ee\u9304\uff08\u6216 <code>mkdocs.yml</code> \u4e2d\u914d\u7f6e\u7684 <code>docs_dir</code>\uff09\u8b80\u53d6\u6240\u6709 Markdown \u6587\u4ef6 2. \u751f\u6210 HTML \u6587\u4ef6\u5230 <code>site/</code> \u76ee\u9304 3. \u5c07 <code>site/</code> \u76ee\u9304\u7684\u5167\u5bb9\u63a8\u9001\u5230 <code>gh-pages</code> \u5206\u652f 4. \u8986\u84cb gh-pages \u5206\u652f\u7684\u820a\u5167\u5bb9\uff08\u4f46\u6703\u5305\u542b\u6240\u6709\u6e90\u6587\u4ef6\u751f\u6210\u7684 HTML\uff09</p>"},{"location":"15_Daily_Logs/WORKFLOW/#5","title":"\u6b65\u9a5f 5: \u9a57\u8b49\u90e8\u7f72","text":"<pre><code># \u6aa2\u67e5 gh-pages \u5206\u652f\ngit fetch origin gh-pages\ngit checkout origin/gh-pages\nls -la 15_Daily_Logs/logs/\n\n# \u61c9\u8a72\u770b\u5230\u6240\u6709\u5de5\u4f5c\u65e5\u8a8c\u7684 HTML \u6587\u4ef6\n# \u4f8b\u5982\uff1a\n# 2025-12-01/\n# 2025-12-02/\n# 2025-12-03/\n</code></pre>"},{"location":"15_Daily_Logs/WORKFLOW/#_3","title":"\u26a0\ufe0f \u91cd\u8981\u6ce8\u610f\u4e8b\u9805","text":""},{"location":"15_Daily_Logs/WORKFLOW/#1-gh-pages","title":"1. \u4e0d\u8981\u76f4\u63a5\u7de8\u8f2f gh-pages \u5206\u652f","text":"<p>\u274c \u932f\u8aa4\u505a\u6cd5: <pre><code>git checkout gh-pages\n# \u76f4\u63a5\u7de8\u8f2f HTML \u6587\u4ef6\ngit commit -m \"update daily log\"\n</code></pre></p> <p>\u2705 \u6b63\u78ba\u505a\u6cd5: <pre><code>git checkout main\n# \u7de8\u8f2f Markdown \u6e90\u6587\u4ef6\ngit commit -m \"docs: update daily log\"\npython3 -m mkdocs gh-deploy\n</code></pre></p>"},{"location":"15_Daily_Logs/WORKFLOW/#2-main","title":"2. \u78ba\u4fdd\u6240\u6709\u5de5\u4f5c\u65e5\u8a8c\u90fd\u5728 main \u5206\u652f","text":"<p>\u5728\u90e8\u7f72\u524d\uff0c\u78ba\u8a8d\u6240\u6709\u5de5\u4f5c\u65e5\u8a8c\u7684 Markdown \u6587\u4ef6\u90fd\u5728 main \u5206\u652f\uff1a</p> <pre><code>git checkout main\nls -la 15_Daily_Logs/*.md\n</code></pre> <p>\u5982\u679c\u767c\u73fe\u7f3a\u5c11\u67d0\u500b\u5de5\u4f5c\u65e5\u8a8c\uff08\u4f8b\u5982\u6628\u5929\u7684\uff09\uff0c\u9700\u8981\uff1a 1. \u5f9e gh-pages \u7684 HTML \u4e2d\u63d0\u53d6\u5167\u5bb9 2. \u91cd\u5efa Markdown \u6587\u4ef6 3. \u6dfb\u52a0\u5230 main \u5206\u652f 4. \u7136\u5f8c\u518d\u90e8\u7f72</p>"},{"location":"15_Daily_Logs/WORKFLOW/#3-mkdocsyml","title":"3. mkdocs.yml \u914d\u7f6e","text":"<p>\u78ba\u4fdd <code>mkdocs.yml</code> \u4e2d\u7684 <code>nav</code> \u914d\u7f6e\u5305\u542b Daily Logs\uff1a</p> <pre><code>nav:\n  - Daily Logs:\n    - 15_Daily_Logs/README.md\n    - 15_Daily_Logs/2025-12-01.md\n    - 15_Daily_Logs/2025-12-02.md\n    - 15_Daily_Logs/2025-12-03.md\n</code></pre> <p>\u6216\u8005\u4f7f\u7528\u52d5\u614b\u914d\u7f6e\uff08\u5982\u679c MkDocs \u652f\u6301\uff09\u3002</p>"},{"location":"15_Daily_Logs/WORKFLOW/#_4","title":"\ud83d\udd0d \u6aa2\u67e5\u6e05\u55ae","text":"<p>\u5728\u90e8\u7f72\u524d\uff0c\u78ba\u8a8d\uff1a</p> <ul> <li>[ ] \u5728 main \u5206\u652f</li> <li>[ ] \u6240\u6709\u5de5\u4f5c\u65e5\u8a8c\u7684 Markdown \u6587\u4ef6\u90fd\u5728 <code>15_Daily_Logs/</code> \u76ee\u9304</li> <li>[ ] \u5de5\u4f5c\u65e5\u8a8c\u6587\u4ef6\u5df2 commit \u5230 main \u5206\u652f</li> <li>[ ] <code>mkdocs.yml</code> \u914d\u7f6e\u6b63\u78ba</li> <li>[ ] \u57f7\u884c <code>mkdocs gh-deploy</code> \u524d\u5df2 push \u5230\u9060\u7aef</li> </ul>"},{"location":"15_Daily_Logs/WORKFLOW/#_5","title":"\ud83d\udcdd \u65e5\u5e38\u4f7f\u7528\u7bc4\u4f8b","text":""},{"location":"15_Daily_Logs/WORKFLOW/#_6","title":"\u6bcf\u5929\u958b\u59cb\u6642","text":"<pre><code># 1. \u5275\u5efa\u5de5\u4f5c\u65e5\u8a8c\n./scripts/create_daily_log.sh\n\n# 2. \u7de8\u8f2f\u5de5\u4f5c\u65e5\u8a8c\uff08\u8a18\u9304\u4eca\u65e5\u8a08\u5283\uff09\ncode 15_Daily_Logs/$(date +%Y-%m-%d).md\n</code></pre>"},{"location":"15_Daily_Logs/WORKFLOW/#_7","title":"\u6bcf\u5929\u7d50\u675f\u6642","text":"<pre><code># 1. \u5b8c\u6210\u5de5\u4f5c\u65e5\u8a8c\u7de8\u8f2f\ncode 15_Daily_Logs/$(date +%Y-%m-%d).md\n\n# 2. Commit \u5230 main\ngit add 15_Daily_Logs/$(date +%Y-%m-%d).md\ngit commit -m \"docs: add daily log for $(date +%Y-%m-%d)\"\n\n# 3. Push \u5230\u9060\u7aef\ngit push origin main\n\n# 4. \u90e8\u7f72\u5230 GitHub Pages\uff08\u53ef\u9078\uff0c\u53ef\u4ee5\u7d2f\u7a4d\u5e7e\u5929\u518d\u90e8\u7f72\uff09\npython3 -m mkdocs gh-deploy\n</code></pre>"},{"location":"15_Daily_Logs/WORKFLOW/#_8","title":"\ud83d\udea8 \u5e38\u898b\u554f\u984c","text":""},{"location":"15_Daily_Logs/WORKFLOW/#q-commit","title":"Q: \u5982\u679c\u5fd8\u8a18 commit \u5de5\u4f5c\u65e5\u8a8c\u5c31\u90e8\u7f72\u4e86\u600e\u9ebc\u8fa6\uff1f","text":"<p>A: \u90e8\u7f72\u5f8c\uff0cgh-pages \u5206\u652f\u6703\u7f3a\u5c11\u8a72\u5de5\u4f5c\u65e5\u8a8c\u7684 HTML\u3002\u89e3\u6c7a\u65b9\u6cd5\uff1a 1. \u5728 main \u5206\u652f commit \u5de5\u4f5c\u65e5\u8a8c 2. \u91cd\u65b0\u57f7\u884c <code>mkdocs gh-deploy</code></p>"},{"location":"15_Daily_Logs/WORKFLOW/#q","title":"Q: \u5982\u4f55\u6062\u5fa9\u907a\u5931\u7684\u5de5\u4f5c\u65e5\u8a8c\uff1f","text":"<p>A:  1. \u6aa2\u67e5 gh-pages \u5206\u652f\u662f\u5426\u6709 HTML \u7248\u672c 2. \u5f9e HTML \u4e2d\u63d0\u53d6\u5167\u5bb9 3. \u91cd\u5efa Markdown \u6587\u4ef6 4. \u6dfb\u52a0\u5230 main \u5206\u652f 5. \u91cd\u65b0\u90e8\u7f72</p>"},{"location":"15_Daily_Logs/WORKFLOW/#q_1","title":"Q: \u53ef\u4ee5\u540c\u6642\u7de8\u8f2f\u591a\u500b\u5de5\u4f5c\u65e5\u8a8c\u55ce\uff1f","text":"<p>A: \u53ef\u4ee5\u3002\u53ea\u8981\u78ba\u4fdd\u6240\u6709\u7de8\u8f2f\u90fd\u5728 main \u5206\u652f\uff0c\u4e26\u4e14\u5728\u90e8\u7f72\u524d\u90fd commit \u4e86\u3002</p>"},{"location":"15_Daily_Logs/WORKFLOW/#q_2","title":"Q: \u76f8\u95dc\u6587\u4ef6\u6539\u52d5\u8a18\u9304\u61c9\u8a72\u5982\u4f55\u8655\u7406\uff1f","text":"<p>A: \u76f8\u95dc\u6587\u4ef6\u6539\u52d5\u8a18\u9304\u61c9\u8a72\u5408\u4f75\u5230\u5c0d\u61c9\u7684\u5de5\u4f5c\u65e5\u8a8c\u4e2d\uff0c\u800c\u4e0d\u662f\u5efa\u7acb\u7368\u7acb\u7684\u6587\u4ef6\u3002</p> <p>\u6b63\u78ba\u505a\u6cd5: 1. \u5728 <code>YYYY-MM-DD.md</code> \u5de5\u4f5c\u65e5\u8a8c\u7684\u6700\u5f8c\uff0c\u6dfb\u52a0\u300c\ud83d\udcc4 \u76f8\u95dc\u6587\u4ef6\u6539\u52d5\u8a18\u9304\u300d\u7ae0\u7bc0 2. \u8a18\u9304\u7576\u5929\u6240\u6709\u7684 Git commits\u3001\u6539\u52d5\u6587\u4ef6\u3001\u6587\u4ef6\u7d71\u8a08\u7b49\u8cc7\u8a0a 3. \u4e0d\u8981\u5efa\u7acb <code>YYYY-MM-DD_related_changes.md</code> \u7368\u7acb\u6587\u4ef6</p> <p>\u539f\u56e0: - \u4fdd\u6301\u5de5\u4f5c\u65e5\u8a8c\u7684\u5b8c\u6574\u6027\uff0c\u6240\u6709\u7576\u5929\u8cc7\u8a0a\u90fd\u5728\u540c\u4e00\u500b\u6587\u4ef6\u4e2d - \u6e1b\u5c11\u6587\u4ef6\u6578\u91cf\uff0c\u65b9\u4fbf\u7ba1\u7406\u548c\u67e5\u627e - \u7b26\u5408\u300c\u4e00\u500b\u65e5\u671f\u4e00\u500b\u5de5\u4f5c\u65e5\u8a8c\u300d\u7684\u539f\u5247</p>"},{"location":"15_Daily_Logs/WORKFLOW/#_9","title":"\ud83d\udcda \u76f8\u95dc\u6587\u4ef6","text":"<ul> <li>\u5de5\u4f5c\u65e5\u8a8c README</li> <li>\u5de5\u4f5c\u65e5\u8a8c\u6a21\u677f</li> <li>MkDocs \u90e8\u7f72\u6307\u5357</li> </ul>"},{"location":"16_Cursor_Workflow/","title":"Cursor \u5de5\u4f5c\u6d41\u7a0b","text":"<p>\u672c\u76ee\u9304\u5305\u542b\u8207 Cursor AI \u5354\u4f5c\u7684\u5b8c\u6574\u5de5\u4f5c\u6d41\u7a0b\uff0c\u5e6b\u52a9\u4f60\u66f4\u6709\u6548\u7387\u5730\u9032\u884c\u958b\u767c\u3002</p>"},{"location":"16_Cursor_Workflow/#_1","title":"\u5de5\u4f5c\u6d41\u7a0b\u6982\u8ff0","text":""},{"location":"16_Cursor_Workflow/#1","title":"1. \u6bcf\u5929\u958b\u59cb\u6642","text":"<ul> <li>\u6839\u64da\u4eca\u5929\u7684\u65e5\u671f\uff0c\u81ea\u52d5\u627e\u51fa\u5c0d\u61c9\u7684 Jira parent tickets \u548c child tickets</li> <li>\u751f\u6210\u7576\u5929\u7684\u5de5\u4f5c\u8a08\u5283</li> <li>\u5efa\u7acb\u5de5\u4f5c\u65e5\u8a8c</li> </ul>"},{"location":"16_Cursor_Workflow/#2","title":"2. \u5be6\u4f5c\u904e\u7a0b\u4e2d","text":"<ul> <li>\u8207 Cursor \u5354\u4f5c\u5be6\u4f5c\u529f\u80fd</li> <li>\u8a18\u9304\u91cd\u8981\u7684\u5c0d\u8a71\u548c\u6c7a\u7b56</li> </ul>"},{"location":"16_Cursor_Workflow/#3","title":"3. \u6bcf\u5929\u7d50\u675f\u6642","text":"<ul> <li>\u7d71\u6574\u8207 Cursor \u7684\u5c0d\u8a71</li> <li>\u66f4\u65b0\u5be6\u4f5c\u72c0\u614b</li> <li>\u66f4\u65b0\u8b8a\u66f4\u65e5\u8a8c</li> <li>\u751f\u6210\u660e\u5929\u7684\u5de5\u4f5c\u8a08\u5283</li> </ul>"},{"location":"16_Cursor_Workflow/#_2","title":"\u4f7f\u7528\u65b9\u5f0f","text":""},{"location":"16_Cursor_Workflow/#_3","title":"\u751f\u6210\u7576\u5929\u5de5\u4f5c\u8a08\u5283","text":"<pre><code># \u751f\u6210\u4eca\u5929\u7684\u5de5\u4f5c\u8a08\u5283\n./scripts/generate_daily_plan.sh\n\n# \u751f\u6210\u6307\u5b9a\u65e5\u671f\u7684\u5de5\u4f5c\u8a08\u5283\n./scripts/generate_daily_plan.sh 2025-12-01\n</code></pre>"},{"location":"16_Cursor_Workflow/#_4","title":"\u7d71\u6574\u7576\u5929\u5de5\u4f5c","text":"<pre><code># \u7d71\u6574\u4eca\u5929\u7684\u5de5\u4f5c\uff08\u5305\u542b\u8207 Cursor \u7684\u5c0d\u8a71\uff09\n./scripts/summarize_daily_work.sh\n</code></pre>"},{"location":"16_Cursor_Workflow/#_5","title":"\u6587\u4ef6\u7d50\u69cb","text":"<ul> <li><code>README.md</code> - \u672c\u6587\u4ef6</li> <li><code>daily_plan_template.md</code> - \u6bcf\u65e5\u5de5\u4f5c\u8a08\u5283\u6a21\u677f</li> <li><code>cursor_conversation_template.md</code> - Cursor \u5c0d\u8a71\u8a18\u9304\u6a21\u677f</li> </ul>"},{"location":"16_Cursor_Workflow/QUICK_START/","title":"Cursor \u5de5\u4f5c\u6d41\u7a0b\u5feb\u901f\u958b\u59cb","text":""},{"location":"16_Cursor_Workflow/QUICK_START/#_1","title":"\ud83d\ude80 \u5feb\u901f\u958b\u59cb","text":""},{"location":"16_Cursor_Workflow/QUICK_START/#3","title":"\u6bcf\u5929\u958b\u59cb\u6642\uff083 \u500b\u6b65\u9a5f\uff09","text":"<ol> <li> <p>\u751f\u6210\u5de5\u4f5c\u8a08\u5283 <pre><code>./scripts/generate_daily_plan.sh\n</code></pre></p> </li> <li> <p>\u5efa\u7acb\u5de5\u4f5c\u65e5\u8a8c <pre><code>./scripts/create_daily_log.sh\n</code></pre></p> </li> <li> <p>\u8207 Cursor \u958b\u59cb\u5354\u4f5c <pre><code>\u6839\u64da\u4eca\u5929\u7684\u5de5\u4f5c\u8a08\u5283\uff0816_Cursor_Workflow/daily_plans/YYYY-MM-DD.md\uff09\uff0c\n\u8acb\u5354\u52a9\u6211\uff1a\n1. \u8b80\u53d6\u76f8\u95dc\u7684 TDD \u6587\u4ef6\n2. \u6aa2\u67e5\u73fe\u6709\u7684 codebase \u7d50\u69cb\n3. \u63d0\u4f9b\u5be6\u4f5c\u5efa\u8b70\u548c\u6ce8\u610f\u4e8b\u9805\n4. \u6aa2\u67e5\u4f9d\u8cf4\u95dc\u4fc2\u662f\u5426\u6eff\u8db3\n</code></pre></p> </li> </ol>"},{"location":"16_Cursor_Workflow/QUICK_START/#2","title":"\u6bcf\u5929\u7d50\u675f\u6642\uff082 \u500b\u6b65\u9a5f\uff09","text":"<ol> <li> <p>\u7d71\u6574\u7576\u5929\u5de5\u4f5c <pre><code>./scripts/summarize_daily_work.sh\n</code></pre></p> </li> <li> <p>\u8207 Cursor \u7d71\u6574\u5c0d\u8a71 <pre><code>\u8acb\u5e6b\u6211\u7d71\u6574\u4eca\u5929\u7684\u5de5\u4f5c\uff1a\n1. \u6839\u64da\u4eca\u5929\u7684 git commits \u751f\u6210\u8b8a\u66f4\u8a18\u9304\n2. \u66f4\u65b0 implementation_status.md\n3. \u66f4\u65b0 CHANGELOG.md\n4. \u6aa2\u67e5\u5be6\u4f5c\u8207 TDD \u7684\u4e00\u81f4\u6027\n5. \u7d71\u6574\u4eca\u5929\u8207\u4f60\u7684\u5c0d\u8a71\uff0c\u63d0\u53d6\u91cd\u8981\u6c7a\u7b56\u548c\u5b78\u7fd2\u8981\u9ede\n6. \u751f\u6210\u660e\u5929\u7684\u8a08\u5283\u5efa\u8b70\n</code></pre></p> </li> </ol>"},{"location":"16_Cursor_Workflow/QUICK_START/#_2","title":"\ud83d\udcc1 \u751f\u6210\u7684\u6587\u4ef6","text":""},{"location":"16_Cursor_Workflow/QUICK_START/#_3","title":"\u6bcf\u5929\u958b\u59cb\u6642\u751f\u6210","text":"<ul> <li><code>16_Cursor_Workflow/daily_plans/YYYY-MM-DD.md</code> - \u7576\u5929\u5de5\u4f5c\u8a08\u5283</li> <li><code>15_Daily_Logs/YYYY-MM-DD.md</code> - \u7576\u5929\u5de5\u4f5c\u65e5\u8a8c</li> </ul>"},{"location":"16_Cursor_Workflow/QUICK_START/#_4","title":"\u6bcf\u5929\u7d50\u675f\u6642\u751f\u6210","text":"<ul> <li><code>16_Cursor_Workflow/daily_summaries/YYYY-MM-DD.md</code> - \u7576\u5929\u5de5\u4f5c\u7d71\u6574</li> </ul>"},{"location":"16_Cursor_Workflow/QUICK_START/#_5","title":"\ud83d\udcdd \u9700\u8981\u624b\u52d5\u586b\u5beb\u7684\u5167\u5bb9","text":""},{"location":"16_Cursor_Workflow/QUICK_START/#_6","title":"\u5de5\u4f5c\u65e5\u8a8c\u4e2d","text":"<ul> <li>\u2705 \u5b8c\u6210\u9805\u76ee</li> <li>\ud83d\udea7 \u9032\u884c\u4e2d\u9805\u76ee</li> <li>\ud83d\udc1b \u9047\u5230\u7684\u554f\u984c</li> <li>\ud83e\udd16 \u8207 Cursor \u7684\u5c0d\u8a71\u7d71\u6574\uff08\u91cd\u8981\uff01\uff09</li> <li>\ud83d\udca1 \u5b78\u7fd2\u8207\u53cd\u601d</li> <li>\ud83d\udcca \u6642\u9593\u7d71\u8a08</li> </ul>"},{"location":"16_Cursor_Workflow/QUICK_START/#_7","title":"\u5de5\u4f5c\u7d71\u6574\u4e2d","text":"<ul> <li>\u2705 \u5b8c\u6210\u9805\u76ee\uff08\u5f9e\u5de5\u4f5c\u65e5\u8a8c\u4e2d\u63d0\u53d6\uff09</li> <li>\ud83e\udd16 \u8207 Cursor \u7684\u5c0d\u8a71\u7d71\u6574\uff08\u91cd\u8981\uff01\uff09</li> <li>\ud83d\udcca \u5de5\u4f5c\u7d71\u8a08</li> <li>\ud83d\udca1 \u53cd\u601d\u8207\u5b78\u7fd2</li> </ul>"},{"location":"16_Cursor_Workflow/QUICK_START/#_8","title":"\ud83d\udca1 \u63d0\u793a","text":"<ul> <li>\u5de5\u4f5c\u8a08\u5283\u6703\u81ea\u52d5\u6839\u64da\u65e5\u671f\u627e\u51fa\u5c0d\u61c9\u7684 Jira tickets</li> <li>\u5de5\u4f5c\u65e5\u8a8c\u6a21\u677f\u5df2\u5305\u542b\u300c\u8207 Cursor \u7684\u5c0d\u8a71\u7d71\u6574\u300d\u90e8\u5206</li> <li>\u8a18\u5f97\u6bcf\u5929\u7d50\u675f\u6642\u7d71\u6574\u8207 Cursor \u7684\u5c0d\u8a71\uff0c\u9019\u5c0d\u5f8c\u7e8c\u958b\u767c\u5f88\u6709\u5e6b\u52a9</li> </ul>"},{"location":"16_Cursor_Workflow/QUICK_START/#_9","title":"\ud83d\udcda \u8a73\u7d30\u6587\u4ef6","text":"<ul> <li>\u5b8c\u6574\u5de5\u4f5c\u6d41\u7a0b\u6307\u5357</li> <li>Cursor \u5c0d\u8a71\u8a18\u9304\u6a21\u677f</li> </ul>"},{"location":"16_Cursor_Workflow/WORKFLOW_GUIDE/","title":"Cursor \u5de5\u4f5c\u6d41\u7a0b\u5b8c\u6574\u6307\u5357","text":"<p>\u672c\u6307\u5357\u8aaa\u660e\u5982\u4f55\u8207 Cursor AI \u5354\u4f5c\uff0c\u9032\u884c MatchChat feature \u7684\u958b\u767c\u3002</p>"},{"location":"16_Cursor_Workflow/WORKFLOW_GUIDE/#_1","title":"\ud83d\udcc5 \u6bcf\u5929\u958b\u59cb\u6642\u7684\u5de5\u4f5c\u6d41\u7a0b","text":""},{"location":"16_Cursor_Workflow/WORKFLOW_GUIDE/#1","title":"1. \u751f\u6210\u7576\u5929\u5de5\u4f5c\u8a08\u5283","text":"<pre><code># \u751f\u6210\u4eca\u5929\u7684\u5de5\u4f5c\u8a08\u5283\n./scripts/generate_daily_plan.sh\n\n# \u6216\u6307\u5b9a\u65e5\u671f\n./scripts/generate_daily_plan.sh 2025-12-01\n</code></pre> <p>\u9019\u500b\u8173\u672c\u6703\uff1a - \u6839\u64da\u4eca\u5929\u7684\u65e5\u671f\uff0c\u5f9e <code>ticket_timeline.md</code> \u627e\u51fa\u5c0d\u61c9\u7684 tickets - \u5f9e\u8cc7\u6599\u5eab\u53d6\u5f97 Jira \u8cc7\u8a0a\uff08\u9023\u7d50\u3001\u4f30\u6642\u3001\u72c0\u614b\uff09 - \u8b58\u5225 parent tickets \u548c child tickets - \u751f\u6210\u5305\u542b\u4ee5\u4e0b\u5167\u5bb9\u7684\u5de5\u4f5c\u8a08\u5283\uff1a   - \u4eca\u65e5\u76ee\u6a19\uff08Parent Tickets \u548c Child Tickets\uff09   - \u8207 Cursor \u7684\u5354\u4f5c\u8a08\u5283   - \u5de5\u4f5c\u8a18\u9304\u6a21\u677f</p>"},{"location":"16_Cursor_Workflow/WORKFLOW_GUIDE/#2","title":"2. \u5efa\u7acb\u5de5\u4f5c\u65e5\u8a8c","text":"<pre><code># \u5efa\u7acb\u4eca\u5929\u7684\u5de5\u4f5c\u65e5\u8a8c\n./scripts/create_daily_log.sh\n</code></pre>"},{"location":"16_Cursor_Workflow/WORKFLOW_GUIDE/#3-cursor","title":"3. \u8207 Cursor \u958b\u59cb\u5354\u4f5c","text":"<p>\u6253\u958b\u751f\u6210\u7684\u5de5\u4f5c\u8a08\u5283\u6587\u4ef6\uff0c\u7136\u5f8c\u5c0d Cursor \u8aaa\uff1a</p> <pre><code>\u6839\u64da\u4eca\u5929\u7684\u5de5\u4f5c\u8a08\u5283\uff0816_Cursor_Workflow/daily_plans/YYYY-MM-DD.md\uff09\uff0c\n\u8acb\u5354\u52a9\u6211\uff1a\n1. \u8b80\u53d6\u76f8\u95dc\u7684 TDD \u6587\u4ef6\n2. \u6aa2\u67e5\u73fe\u6709\u7684 codebase \u7d50\u69cb\n3. \u63d0\u4f9b\u5be6\u4f5c\u5efa\u8b70\u548c\u6ce8\u610f\u4e8b\u9805\n4. \u6aa2\u67e5\u4f9d\u8cf4\u95dc\u4fc2\u662f\u5426\u6eff\u8db3\n</code></pre>"},{"location":"16_Cursor_Workflow/WORKFLOW_GUIDE/#_2","title":"\ud83d\udd28 \u5be6\u4f5c\u904e\u7a0b\u4e2d\u7684\u5de5\u4f5c\u6d41\u7a0b","text":""},{"location":"16_Cursor_Workflow/WORKFLOW_GUIDE/#cursor_1","title":"\u8207 Cursor \u5354\u4f5c\u5be6\u4f5c","text":"<ol> <li> <p>\u958b\u59cb\u5be6\u4f5c\u524d\uff1a    <pre><code>\u6211\u8981\u958b\u59cb\u5be6\u4f5c TDD-001\uff0c\u8acb\uff1a\n1. \u8b80\u53d6 TDD-001 \u7684\u6587\u4ef6\n2. \u6aa2\u67e5\u73fe\u6709\u7684 codebase \u7d50\u69cb\n3. \u63d0\u4f9b\u5be6\u4f5c\u5efa\u8b70\n</code></pre></p> </li> <li> <p>\u5be6\u4f5c\u904e\u7a0b\u4e2d\uff1a</p> </li> <li>\u96a8\u6642\u8207 Cursor \u8a0e\u8ad6\u5be6\u4f5c\u7d30\u7bc0</li> <li>\u9047\u5230\u554f\u984c\u6642\u7acb\u5373\u8a62\u554f Cursor</li> <li> <p>\u8a18\u9304\u91cd\u8981\u7684\u5c0d\u8a71\u548c\u6c7a\u7b56</p> </li> <li> <p>\u5be6\u4f5c\u5b8c\u6210\u5f8c\uff1a    <pre><code>\u6211\u5df2\u7d93\u5b8c\u6210 TDD-001 \u7684\u5be6\u4f5c\uff0c\u8acb\uff1a\n1. \u6aa2\u67e5\u5be6\u4f5c\u662f\u5426\u7b26\u5408 TDD \u898f\u7bc4\n2. \u6aa2\u67e5\u662f\u5426\u6709\u907a\u6f0f\u7684\u529f\u80fd\n3. \u63d0\u4f9b\u6539\u9032\u5efa\u8b70\n</code></pre></p> </li> </ol>"},{"location":"16_Cursor_Workflow/WORKFLOW_GUIDE/#_3","title":"\u8a18\u9304\u91cd\u8981\u5c0d\u8a71","text":"<p>\u4f7f\u7528 <code>cursor_conversation_template.md</code> \u8a18\u9304\u91cd\u8981\u7684\u5c0d\u8a71\uff0c\u5305\u62ec\uff1a - \u5be6\u4f5c\u6c7a\u7b56 - \u554f\u984c\u89e3\u6c7a\u904e\u7a0b - \u5b78\u7fd2\u5230\u7684\u77e5\u8b58 - \u6539\u9032\u5efa\u8b70</p>"},{"location":"16_Cursor_Workflow/WORKFLOW_GUIDE/#_4","title":"\ud83d\udcdd \u6bcf\u5929\u7d50\u675f\u6642\u7684\u5de5\u4f5c\u6d41\u7a0b","text":""},{"location":"16_Cursor_Workflow/WORKFLOW_GUIDE/#1_1","title":"1. \u7d71\u6574\u7576\u5929\u5de5\u4f5c","text":"<pre><code># \u7d71\u6574\u4eca\u5929\u7684\u5de5\u4f5c\n./scripts/summarize_daily_work.sh\n</code></pre> <p>\u9019\u500b\u8173\u672c\u6703\uff1a - \u8b80\u53d6\u7576\u5929\u7684\u5de5\u4f5c\u8a08\u5283 - \u8b80\u53d6\u7576\u5929\u7684\u5de5\u4f5c\u65e5\u8a8c - \u751f\u6210\u5de5\u4f5c\u7d71\u6574\u6587\u4ef6\uff0c\u5305\u542b\uff1a   - \u4eca\u65e5\u8a08\u5283\u56de\u9867   - \u5b8c\u6210\u9805\u76ee   - \u8207 Cursor \u7684\u5c0d\u8a71\u7d71\u6574   - \u5de5\u4f5c\u7d71\u8a08   - \u53cd\u601d\u8207\u5b78\u7fd2   - \u660e\u65e5\u8a08\u5283\u5efa\u8b70</p>"},{"location":"16_Cursor_Workflow/WORKFLOW_GUIDE/#2_1","title":"2. \u66f4\u65b0\u5de5\u4f5c\u65e5\u8a8c","text":"<p>\u5728\u624b\u52d5\u586b\u5beb\u5de5\u4f5c\u65e5\u8a8c\u6642\uff0c\u8a18\u5f97\uff1a - \u8a18\u9304\u8207 Cursor \u7684\u91cd\u8981\u5c0d\u8a71 - \u8a18\u9304\u5be6\u4f5c\u6c7a\u7b56 - \u8a18\u9304\u5b78\u7fd2\u8981\u9ede</p>"},{"location":"16_Cursor_Workflow/WORKFLOW_GUIDE/#3-cursor_1","title":"3. \u8207 Cursor \u7d71\u6574\u5c0d\u8a71","text":"<p>\u6253\u958b\u751f\u6210\u7684\u5de5\u4f5c\u7d71\u6574\u6587\u4ef6\uff0c\u7136\u5f8c\u5c0d Cursor \u8aaa\uff1a</p> <pre><code>\u8acb\u5e6b\u6211\u7d71\u6574\u4eca\u5929\u7684\u5de5\u4f5c\uff1a\n1. \u6839\u64da\u4eca\u5929\u7684 git commits \u751f\u6210\u8b8a\u66f4\u8a18\u9304\n2. \u66f4\u65b0 implementation_status.md\n3. \u66f4\u65b0 CHANGELOG.md\n4. \u6aa2\u67e5\u5be6\u4f5c\u8207 TDD \u7684\u4e00\u81f4\u6027\n5. \u7d71\u6574\u4eca\u5929\u8207\u4f60\u7684\u5c0d\u8a71\uff0c\u63d0\u53d6\u91cd\u8981\u6c7a\u7b56\u548c\u5b78\u7fd2\u8981\u9ede\n6. \u751f\u6210\u660e\u5929\u7684\u8a08\u5283\u5efa\u8b70\n</code></pre>"},{"location":"16_Cursor_Workflow/WORKFLOW_GUIDE/#4","title":"4. \u66f4\u65b0\u76f8\u95dc\u6587\u4ef6","text":"<ul> <li>\u66f4\u65b0 <code>13_Implementation_Status/implementation_status.md</code></li> <li>\u66f4\u65b0 <code>14_Changelog/CHANGELOG.md</code></li> <li>\u66f4\u65b0\u5de5\u4f5c\u65e5\u8a8c\u4e2d\u7684\u300c\u8207 Cursor \u7684\u5c0d\u8a71\u7d71\u6574\u300d\u90e8\u5206</li> </ul>"},{"location":"16_Cursor_Workflow/WORKFLOW_GUIDE/#_5","title":"\ud83d\udcc2 \u6587\u4ef6\u7d50\u69cb","text":"<pre><code>TDDs/LiveChat&amp;PrematchComment/\n\u251c\u2500\u2500 13_Implementation_Status/      # \u5be6\u4f5c\u72c0\u614b\u8ffd\u8e64\n\u251c\u2500\u2500 14_Changelog/                  # \u8b8a\u66f4\u65e5\u8a8c\n\u251c\u2500\u2500 15_Daily_Logs/                 # \u5de5\u4f5c\u65e5\u8a8c\n\u2502   \u251c\u2500\u2500 TEMPLATE.md                # \u5de5\u4f5c\u65e5\u8a8c\u6a21\u677f\uff08\u5df2\u66f4\u65b0\uff0c\u5305\u542b Cursor \u5c0d\u8a71\u7d71\u6574\uff09\n\u2502   \u2514\u2500\u2500 YYYY-MM-DD.md              # \u6bcf\u65e5\u5de5\u4f5c\u65e5\u8a8c\n\u251c\u2500\u2500 16_Cursor_Workflow/            # Cursor \u5de5\u4f5c\u6d41\u7a0b\n\u2502   \u251c\u2500\u2500 README.md                   # \u5de5\u4f5c\u6d41\u7a0b\u8aaa\u660e\n\u2502   \u251c\u2500\u2500 WORKFLOW_GUIDE.md           # \u672c\u6587\u4ef6\n\u2502   \u251c\u2500\u2500 cursor_conversation_template.md  # Cursor \u5c0d\u8a71\u8a18\u9304\u6a21\u677f\n\u2502   \u251c\u2500\u2500 daily_plans/                # \u6bcf\u65e5\u5de5\u4f5c\u8a08\u5283\n\u2502   \u2502   \u2514\u2500\u2500 YYYY-MM-DD.md\n\u2502   \u2514\u2500\u2500 daily_summaries/            # \u6bcf\u65e5\u5de5\u4f5c\u7d71\u6574\n\u2502       \u2514\u2500\u2500 YYYY-MM-DD.md\n\u2514\u2500\u2500 scripts/\n    \u251c\u2500\u2500 create_daily_log.sh         # \u5efa\u7acb\u5de5\u4f5c\u65e5\u8a8c\n    \u251c\u2500\u2500 generate_daily_plan.sh      # \u751f\u6210\u5de5\u4f5c\u8a08\u5283\n    \u2514\u2500\u2500 summarize_daily_work.sh     # \u7d71\u6574\u7576\u5929\u5de5\u4f5c\n</code></pre>"},{"location":"16_Cursor_Workflow/WORKFLOW_GUIDE/#_6","title":"\ud83c\udfaf \u6700\u4f73\u5be6\u8e10","text":""},{"location":"16_Cursor_Workflow/WORKFLOW_GUIDE/#1_2","title":"1. \u6bcf\u5929\u958b\u59cb\u6642","text":"<ul> <li>\u2705 \u57f7\u884c <code>generate_daily_plan.sh</code> \u751f\u6210\u5de5\u4f5c\u8a08\u5283</li> <li>\u2705 \u57f7\u884c <code>create_daily_log.sh</code> \u5efa\u7acb\u5de5\u4f5c\u65e5\u8a8c</li> <li>\u2705 \u8207 Cursor \u8a0e\u8ad6\u7576\u5929\u7684\u5de5\u4f5c\u8a08\u5283</li> </ul>"},{"location":"16_Cursor_Workflow/WORKFLOW_GUIDE/#2_2","title":"2. \u5be6\u4f5c\u904e\u7a0b\u4e2d","text":"<ul> <li>\u2705 \u96a8\u6642\u8207 Cursor \u8a0e\u8ad6\u5be6\u4f5c\u7d30\u7bc0</li> <li>\u2705 \u8a18\u9304\u91cd\u8981\u7684\u5c0d\u8a71\u548c\u6c7a\u7b56</li> <li>\u2705 \u9047\u5230\u554f\u984c\u7acb\u5373\u8a62\u554f Cursor</li> </ul>"},{"location":"16_Cursor_Workflow/WORKFLOW_GUIDE/#3","title":"3. \u6bcf\u5929\u7d50\u675f\u6642","text":"<ul> <li>\u2705 \u57f7\u884c <code>summarize_daily_work.sh</code> \u7d71\u6574\u5de5\u4f5c</li> <li>\u2705 \u8207 Cursor \u7d71\u6574\u5c0d\u8a71</li> <li>\u2705 \u66f4\u65b0\u76f8\u95dc\u6587\u4ef6\uff08implementation_status.md, CHANGELOG.md\uff09</li> <li>\u2705 \u586b\u5beb\u5de5\u4f5c\u65e5\u8a8c\u4e2d\u7684\u300c\u8207 Cursor \u7684\u5c0d\u8a71\u7d71\u6574\u300d\u90e8\u5206</li> </ul>"},{"location":"16_Cursor_Workflow/WORKFLOW_GUIDE/#cursor_2","title":"\ud83d\udca1 \u8207 Cursor \u5354\u4f5c\u7684\u63d0\u793a","text":""},{"location":"16_Cursor_Workflow/WORKFLOW_GUIDE/#_7","title":"\u6709\u6548\u7684\u63d0\u793a\u8a5e\u7bc4\u4f8b","text":"<ol> <li> <p>\u958b\u59cb\u5be6\u4f5c\u524d\uff1a    <pre><code>\u6839\u64da TDD-001 \u7684\u6587\u4ef6\uff0c\u8acb\uff1a\n1. \u8b80\u53d6\u76f8\u95dc\u7684 TDD \u6587\u4ef6\n2. \u6aa2\u67e5\u73fe\u6709\u7684 codebase \u7d50\u69cb\n3. \u63d0\u4f9b\u5be6\u4f5c\u5efa\u8b70\u548c\u6ce8\u610f\u4e8b\u9805\n</code></pre></p> </li> <li> <p>\u5be6\u4f5c\u904e\u7a0b\u4e2d\uff1a    <pre><code>\u6211\u6b63\u5728\u5be6\u4f5c Comment Entity\uff0c\u8acb\uff1a\n1. \u6aa2\u67e5\u6211\u7684\u5be6\u4f5c\u662f\u5426\u7b26\u5408 TDD \u898f\u7bc4\n2. \u6aa2\u67e5\u662f\u5426\u6709\u907a\u6f0f\u7684\u529f\u80fd\n3. \u63d0\u4f9b\u6539\u9032\u5efa\u8b70\n</code></pre></p> </li> <li> <p>\u9047\u5230\u554f\u984c\u6642\uff1a    <pre><code>\u6211\u9047\u5230\u4e86\u4e00\u500b\u554f\u984c\uff1a[\u63cf\u8ff0\u554f\u984c]\n\u8acb\u5354\u52a9\u6211\uff1a\n1. \u5206\u6790\u554f\u984c\u7684\u6839\u672c\u539f\u56e0\n2. \u63d0\u4f9b\u89e3\u6c7a\u65b9\u6848\n3. \u6aa2\u67e5\u662f\u5426\u6709\u5176\u4ed6\u76f8\u95dc\u554f\u984c\n</code></pre></p> </li> <li> <p>\u6bcf\u5929\u7d50\u675f\u6642\uff1a    <pre><code>\u8acb\u5e6b\u6211\u7d71\u6574\u4eca\u5929\u7684\u5de5\u4f5c\uff1a\n1. \u6839\u64da\u4eca\u5929\u7684 git commits \u751f\u6210\u8b8a\u66f4\u8a18\u9304\n2. \u66f4\u65b0 implementation_status.md\n3. \u7d71\u6574\u4eca\u5929\u8207\u4f60\u7684\u5c0d\u8a71\uff0c\u63d0\u53d6\u91cd\u8981\u6c7a\u7b56\u548c\u5b78\u7fd2\u8981\u9ede\n</code></pre></p> </li> </ol>"},{"location":"16_Cursor_Workflow/WORKFLOW_GUIDE/#_8","title":"\ud83d\udd04 \u81ea\u52d5\u5316\u5efa\u8b70","text":"<p>\u53ef\u4ee5\u5efa\u7acb\u4e00\u500b alias \u4f86\u5feb\u901f\u57f7\u884c\u9019\u4e9b\u8173\u672c\uff1a</p> <pre><code># \u5728 ~/.zshrc \u6216 ~/.bashrc \u4e2d\u52a0\u5165\nalias daily-start=\"cd /path/to/TDDs/LiveChat\\&amp;PrematchComment &amp;&amp; ./scripts/generate_daily_plan.sh &amp;&amp; ./scripts/create_daily_log.sh\"\nalias daily-end=\"cd /path/to/TDDs/LiveChat\\&amp;PrematchComment &amp;&amp; ./scripts/summarize_daily_work.sh\"\n</code></pre> <p>\u7136\u5f8c\u6bcf\u5929\u958b\u59cb\u6642\u57f7\u884c <code>daily-start</code>\uff0c\u7d50\u675f\u6642\u57f7\u884c <code>daily-end</code>\u3002</p>"},{"location":"16_Cursor_Workflow/cursor_conversation_template/","title":"Cursor \u5c0d\u8a71\u8a18\u9304\u6a21\u677f","text":"<p>\u4f7f\u7528\u6b64\u6a21\u677f\u8a18\u9304\u8207 Cursor \u7684\u91cd\u8981\u5c0d\u8a71\u3002</p>"},{"location":"16_Cursor_Workflow/cursor_conversation_template/#_1","title":"\u5c0d\u8a71\u8cc7\u8a0a","text":"<ul> <li>\u65e5\u671f: YYYY-MM-DD</li> <li>\u6642\u9593: HH:MM</li> <li>\u4e3b\u984c: [\u5c0d\u8a71\u4e3b\u984c]</li> <li>\u76f8\u95dc Ticket: TDD-XXX</li> </ul>"},{"location":"16_Cursor_Workflow/cursor_conversation_template/#_2","title":"\u5c0d\u8a71\u5167\u5bb9","text":""},{"location":"16_Cursor_Workflow/cursor_conversation_template/#_3","title":"\u554f\u984c/\u9700\u6c42","text":"<p>\uff08\u63cf\u8ff0\u4f60\u5411 Cursor \u63d0\u51fa\u7684\u554f\u984c\u6216\u9700\u6c42\uff09</p>"},{"location":"16_Cursor_Workflow/cursor_conversation_template/#cursor_1","title":"Cursor \u7684\u56de\u61c9","text":"<p>\uff08\u8a18\u9304 Cursor \u7684\u56de\u61c9\u548c\u5efa\u8b70\uff09</p>"},{"location":"16_Cursor_Workflow/cursor_conversation_template/#_4","title":"\u6c7a\u7b56/\u7d50\u679c","text":"<p>\uff08\u8a18\u9304\u6700\u7d42\u7684\u6c7a\u7b56\u6216\u5be6\u4f5c\u7d50\u679c\uff09</p>"},{"location":"16_Cursor_Workflow/cursor_conversation_template/#_5","title":"\u5b78\u7fd2\u8981\u9ede","text":"<p>\uff08\u5f9e\u9019\u6b21\u5c0d\u8a71\u4e2d\u5b78\u5230\u7684\u91cd\u8981\u77e5\u8b58\uff09</p>"},{"location":"16_Cursor_Workflow/cursor_conversation_template/#_6","title":"\u76f8\u95dc\u6a94\u6848","text":"<ul> <li><code>\u8def\u5f91/\u6a94\u6848\u540d.swift</code></li> <li><code>\u8def\u5f91/\u6a94\u6848\u540d.swift</code></li> </ul>"},{"location":"16_Cursor_Workflow/cursor_conversation_template/#_7","title":"\u4f7f\u7528\u7bc4\u4f8b","text":""},{"location":"16_Cursor_Workflow/cursor_conversation_template/#_8","title":"\u5c0d\u8a71\u8cc7\u8a0a","text":"<ul> <li>\u65e5\u671f: 2025-11-28</li> <li>\u6642\u9593: 14:30</li> <li>\u4e3b\u984c: \u5982\u4f55\u5be6\u4f5c Comment Entity \u7684 Equatable</li> <li>\u76f8\u95dc Ticket: TDD-001</li> </ul>"},{"location":"16_Cursor_Workflow/cursor_conversation_template/#_9","title":"\u5c0d\u8a71\u5167\u5bb9","text":""},{"location":"16_Cursor_Workflow/cursor_conversation_template/#_10","title":"\u554f\u984c/\u9700\u6c42","text":"<p>\u6211\u9700\u8981\u5be6\u4f5c Comment Entity\uff0c\u4f46\u5c0d\u65bc\u5982\u4f55\u8655\u7406 Equatable \u6709\u7591\u554f\u3002Comment \u5305\u542b\u591a\u500b\u6b04\u4f4d\uff0c\u5305\u62ec\u53ef\u9078\u7684 createdAt\u3002</p>"},{"location":"16_Cursor_Workflow/cursor_conversation_template/#cursor_2","title":"Cursor \u7684\u56de\u61c9","text":"<p>\u5efa\u8b70\u4f7f\u7528 <code>@Equatable</code> macro\uff0c\u9019\u6a23\u53ef\u4ee5\u81ea\u52d5\u751f\u6210 Equatable conformance\u3002\u5c0d\u65bc\u53ef\u9078\u6b04\u4f4d\uff0cSwift \u6703\u81ea\u52d5\u8655\u7406\u3002</p> <pre><code>@Equatable\nstruct Comment {\n    let id: String\n    let content: String\n    let authorId: String\n    let createdAt: Date?\n}\n</code></pre>"},{"location":"16_Cursor_Workflow/cursor_conversation_template/#_11","title":"\u6c7a\u7b56/\u7d50\u679c","text":"<p>\u63a1\u7528 Cursor \u7684\u5efa\u8b70\uff0c\u4f7f\u7528 <code>@Equatable</code> macro\u3002\u5be6\u4f5c\u5b8c\u6210\uff0c\u6e2c\u8a66\u901a\u904e\u3002</p>"},{"location":"16_Cursor_Workflow/cursor_conversation_template/#_12","title":"\u5b78\u7fd2\u8981\u9ede","text":"<ul> <li><code>@Equatable</code> macro \u53ef\u4ee5\u7c21\u5316 Equatable \u7684\u5be6\u4f5c</li> <li>\u5c0d\u65bc\u53ef\u9078\u6b04\u4f4d\uff0cEquatable \u6703\u81ea\u52d5\u8655\u7406 nil \u7684\u60c5\u6cc1</li> </ul>"},{"location":"16_Cursor_Workflow/cursor_conversation_template/#_13","title":"\u76f8\u95dc\u6a94\u6848","text":"<ul> <li><code>MatchChat/Sources/Domain/Entities/Comment.swift</code></li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-11-27/","title":"\u5de5\u4f5c\u8a08\u5283 - 2025-11-27","text":"<p>\u751f\u6210\u6642\u9593: 2025-11-27</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-11-27/#_1","title":"\ud83d\udccb \u4eca\u65e5\u76ee\u6a19","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-11-27/#parent-tickets","title":"Parent Tickets\uff08\u4e3b\u8981\u5de5\u4f5c\u9805\u76ee\uff09","text":"<ul> <li>[ ] TDD-001: FOOTBALL-9171</li> <li>Jira: FOOTBALL-9171</li> <li>\u4f30\u6642: 2h 24m</li> <li>\u72c0\u614b: \u9032\u884c\u4e2d</li> <li>\u6642\u9593\u7bc4\u570d: 2025-11-27 ~ 2025-11-28</li> <li> <p>\u8aaa\u660e: \u5be6\u4f5c Comment Entity</p> </li> <li> <p>[ ] TDD-002: FOOTBALL-9172</p> </li> <li>Jira: FOOTBALL-9172</li> <li>\u4f30\u6642: 2h 24m</li> <li>\u72c0\u614b: \u9032\u884c\u4e2d</li> <li>\u6642\u9593\u7bc4\u570d: 2025-11-27 ~ 2025-11-28</li> <li> <p>\u8aaa\u660e: \u5be6\u4f5c CommentMeta Entity</p> </li> <li> <p>[ ] TDD-003: FOOTBALL-9173</p> </li> <li>Jira: FOOTBALL-9173</li> <li>\u4f30\u6642: 2h 24m</li> <li>\u72c0\u614b: \u9032\u884c\u4e2d</li> <li>\u6642\u9593\u7bc4\u570d: 2025-11-27 ~ 2025-11-28</li> <li>\u8aaa\u660e: \u5be6\u4f5c UserInfo Entity</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-11-27/#cursor","title":"\ud83e\udd16 \u8207 Cursor \u7684\u5354\u4f5c\u8a08\u5283","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-11-27/#_2","title":"\u958b\u59cb\u5be6\u4f5c\u524d","text":"<p>\u8acb Cursor \u5354\u52a9\uff1a 1. \u8b80\u53d6\u76f8\u95dc\u7684 TDD \u6587\u4ef6\uff08TDD-001, TDD-002, TDD-003\uff09 2. \u6aa2\u67e5\u73fe\u6709\u7684 codebase \u7d50\u69cb 3. \u63d0\u4f9b\u5be6\u4f5c\u5efa\u8b70\u548c\u6ce8\u610f\u4e8b\u9805 4. \u6aa2\u67e5\u4f9d\u8cf4\u95dc\u4fc2\u662f\u5426\u6eff\u8db3</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-11-27/#_3","title":"\u5be6\u4f5c\u904e\u7a0b\u4e2d","text":"<ul> <li>\u96a8\u6642\u8207 Cursor \u8a0e\u8ad6\u5be6\u4f5c\u7d30\u7bc0</li> <li>\u8a18\u9304\u91cd\u8981\u7684\u6c7a\u7b56\u548c\u5c0d\u8a71</li> <li>\u9047\u5230\u554f\u984c\u6642\u8acb Cursor \u5354\u52a9\u89e3\u6c7a</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-11-27/#_4","title":"\u5be6\u4f5c\u5b8c\u6210\u5f8c","text":"<p>\u8acb Cursor \u5354\u52a9\uff1a 1. \u6aa2\u67e5\u5be6\u4f5c\u662f\u5426\u7b26\u5408 TDD \u898f\u7bc4 2. \u6aa2\u67e5\u662f\u5426\u6709\u907a\u6f0f\u7684\u529f\u80fd 3. \u63d0\u4f9b\u6539\u9032\u5efa\u8b70 4. \u66f4\u65b0\u76f8\u95dc\u6587\u4ef6</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-11-27/#_5","title":"\ud83d\udcdd \u5de5\u4f5c\u8a18\u9304","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-11-27/#cursor_1","title":"\u8207 Cursor \u7684\u91cd\u8981\u5c0d\u8a71","text":"<p>\uff08\u5728\u6b64\u8a18\u9304\u8207 Cursor \u7684\u91cd\u8981\u5c0d\u8a71\u548c\u6c7a\u7b56\uff09</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-11-27/#_6","title":"\u5be6\u4f5c\u9032\u5ea6","text":"<p>\uff08\u5728\u6b64\u8a18\u9304\u5be6\u4f5c\u9032\u5ea6\uff09</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-11-27/#_7","title":"\u9047\u5230\u7684\u554f\u984c","text":"<p>\uff08\u5728\u6b64\u8a18\u9304\u9047\u5230\u7684\u554f\u984c\u548c\u89e3\u6c7a\u65b9\u6848\uff09</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-11-28/","title":"\u5de5\u4f5c\u8a08\u5283 - 2025-11-28","text":"<p>\u751f\u6210\u6642\u9593: 2025-11-28 16:00:56</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-11-28/#_1","title":"\ud83d\udccb \u4eca\u65e5\u76ee\u6a19","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-11-28/#parent-tickets","title":"Parent Tickets\uff08\u4e3b\u8981\u5de5\u4f5c\u9805\u76ee\uff09","text":"<ul> <li>[ ] TDD-001: FOOTBALL-9171</li> <li>Jira: FOOTBALL-9171</li> <li>\u4f30\u6642: 2h 24m</li> <li>\u72c0\u614b: \u9032\u884c\u4e2d</li> <li> <p>\u6642\u9593\u7bc4\u570d: 2025-11-27 ~ 2025-11-28</p> </li> <li> <p>[ ] TDD-002: FOOTBALL-9172</p> </li> <li>Jira: FOOTBALL-9172</li> <li>\u4f30\u6642: 2h 24m</li> <li>\u72c0\u614b: \u9032\u884c\u4e2d</li> <li> <p>\u6642\u9593\u7bc4\u570d: 2025-11-27 ~ 2025-11-28</p> </li> <li> <p>[ ] TDD-003: FOOTBALL-9173</p> </li> <li>Jira: FOOTBALL-9173</li> <li>\u4f30\u6642: 2h 24m</li> <li>\u72c0\u614b: \u9032\u884c\u4e2d</li> <li> <p>\u6642\u9593\u7bc4\u570d: 2025-11-27 ~ 2025-11-28</p> </li> <li> <p>[ ] TDD-004: FOOTBALL-9174</p> </li> <li>Jira: FOOTBALL-9174</li> <li>\u4f30\u6642: 2h 24m</li> <li>\u72c0\u614b: \u9032\u884c\u4e2d</li> <li> <p>\u6642\u9593\u7bc4\u570d: 2025-11-28 ~ 2025-12-01</p> </li> <li> <p>[ ] TDD-005: FOOTBALL-9175</p> </li> <li>Jira: FOOTBALL-9175</li> <li>\u4f30\u6642: 2h 24m</li> <li>\u72c0\u614b: \u9032\u884c\u4e2d</li> <li> <p>\u6642\u9593\u7bc4\u570d: 2025-11-28 ~ 2025-12-01</p> </li> <li> <p>[ ] TDD-006: FOOTBALL-9176</p> </li> <li>Jira: FOOTBALL-9176</li> <li>\u4f30\u6642: 1d</li> <li>\u72c0\u614b: \u9032\u884c\u4e2d</li> <li>\u6642\u9593\u7bc4\u570d: 2025-11-28 ~ 2025-12-01</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-11-28/#cursor","title":"\ud83e\udd16 \u8207 Cursor \u7684\u5354\u4f5c\u8a08\u5283","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-11-28/#_2","title":"\u958b\u59cb\u5be6\u4f5c\u524d","text":"<p>\u8acb Cursor \u5354\u52a9\uff1a 1. \u8b80\u53d6\u76f8\u95dc\u7684 TDD \u6587\u4ef6 2. \u6aa2\u67e5\u73fe\u6709\u7684 codebase \u7d50\u69cb 3. \u63d0\u4f9b\u5be6\u4f5c\u5efa\u8b70\u548c\u6ce8\u610f\u4e8b\u9805 4. \u6aa2\u67e5\u4f9d\u8cf4\u95dc\u4fc2\u662f\u5426\u6eff\u8db3</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-11-28/#_3","title":"\u5be6\u4f5c\u904e\u7a0b\u4e2d","text":"<ul> <li>\u96a8\u6642\u8207 Cursor \u8a0e\u8ad6\u5be6\u4f5c\u7d30\u7bc0</li> <li>\u8a18\u9304\u91cd\u8981\u7684\u6c7a\u7b56\u548c\u5c0d\u8a71</li> <li>\u9047\u5230\u554f\u984c\u6642\u8acb Cursor \u5354\u52a9\u89e3\u6c7a</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-11-28/#_4","title":"\u5be6\u4f5c\u5b8c\u6210\u5f8c","text":"<p>\u8acb Cursor \u5354\u52a9\uff1a 1. \u6aa2\u67e5\u5be6\u4f5c\u662f\u5426\u7b26\u5408 TDD \u898f\u7bc4 2. \u6aa2\u67e5\u662f\u5426\u6709\u907a\u6f0f\u7684\u529f\u80fd 3. \u63d0\u4f9b\u6539\u9032\u5efa\u8b70 4. \u66f4\u65b0\u76f8\u95dc\u6587\u4ef6</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-11-28/#_5","title":"\ud83d\udcdd \u5de5\u4f5c\u8a18\u9304","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-11-28/#cursor_1","title":"\u8207 Cursor \u7684\u91cd\u8981\u5c0d\u8a71","text":"<p>\uff08\u5728\u6b64\u8a18\u9304\u8207 Cursor \u7684\u91cd\u8981\u5c0d\u8a71\u548c\u6c7a\u7b56\uff09</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-11-28/#_6","title":"\u5be6\u4f5c\u9032\u5ea6","text":"<p>\uff08\u5728\u6b64\u8a18\u9304\u5be6\u4f5c\u9032\u5ea6\uff09</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-11-28/#_7","title":"\u9047\u5230\u7684\u554f\u984c","text":"<p>\uff08\u5728\u6b64\u8a18\u9304\u9047\u5230\u7684\u554f\u984c\u548c\u89e3\u6c7a\u65b9\u6848\uff09</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-01/","title":"\u5de5\u4f5c\u8a08\u5283 - 2025-12-01","text":"<p>\u751f\u6210\u6642\u9593: 2025-12-01</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-01/#_1","title":"\ud83d\udccb \u4eca\u65e5\u76ee\u6a19","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-01/#parent-tickets","title":"Parent Tickets\uff08\u4e3b\u8981\u5de5\u4f5c\u9805\u76ee\uff09","text":"<ul> <li>[ ] TDD-001: FOOTBALL-9171</li> <li>Jira: FOOTBALL-9171</li> <li>\u4f30\u6642: 2h 24m</li> <li>\u72c0\u614b: \u9032\u884c\u4e2d</li> <li>\u6642\u9593\u7bc4\u570d: 2025-11-27 ~ 2025-11-28</li> <li> <p>\u8aaa\u660e: \u5be6\u4f5c Comment Entity</p> </li> <li> <p>[ ] TDD-002: FOOTBALL-9172</p> </li> <li>Jira: FOOTBALL-9172</li> <li>\u4f30\u6642: 2h 24m</li> <li>\u72c0\u614b: \u9032\u884c\u4e2d</li> <li>\u6642\u9593\u7bc4\u570d: 2025-11-27 ~ 2025-11-28</li> <li> <p>\u8aaa\u660e: \u5be6\u4f5c CommentMeta Entity</p> </li> <li> <p>[ ] TDD-003: FOOTBALL-9173</p> </li> <li>Jira: FOOTBALL-9173</li> <li>\u4f30\u6642: 2h 24m</li> <li>\u72c0\u614b: \u9032\u884c\u4e2d</li> <li>\u6642\u9593\u7bc4\u570d: 2025-11-27 ~ 2025-11-28</li> <li> <p>\u8aaa\u660e: \u5be6\u4f5c UserInfo Entity</p> </li> <li> <p>[ ] TDD-004: FOOTBALL-9174</p> </li> <li>Jira: FOOTBALL-9174</li> <li>\u4f30\u6642: 2h 24m</li> <li>\u72c0\u614b: \u9032\u884c\u4e2d</li> <li>\u6642\u9593\u7bc4\u570d: 2025-11-28 ~ 2025-12-01</li> <li> <p>\u8aaa\u660e: \u5be6\u4f5c Message Entity</p> </li> <li> <p>[ ] TDD-005: FOOTBALL-9175</p> </li> <li>Jira: FOOTBALL-9175</li> <li>\u4f30\u6642: 2h 24m</li> <li>\u72c0\u614b: \u9032\u884c\u4e2d</li> <li>\u6642\u9593\u7bc4\u570d: 2025-11-28 ~ 2025-12-01</li> <li> <p>\u8aaa\u660e: \u5be6\u4f5c ChatroomInfo Entity</p> </li> <li> <p>[ ] TDD-006: FOOTBALL-9176</p> </li> <li>Jira: FOOTBALL-9176</li> <li>\u4f30\u6642: 1d</li> <li>\u72c0\u614b: \u9032\u884c\u4e2d</li> <li>\u6642\u9593\u7bc4\u570d: 2025-11-28 ~ 2025-12-01</li> <li> <p>\u8aaa\u660e: \u5be6\u4f5c Value Objects\uff08SortMode\u3001Cursor\u3001PagingInfo\uff09</p> </li> <li> <p>[ ] TDD-010: FOOTBALL-9178</p> </li> <li>Jira: FOOTBALL-9178</li> <li>\u4f30\u6642: 1d</li> <li>\u72c0\u614b: \u9032\u884c\u4e2d</li> <li>\u6642\u9593\u7bc4\u570d: 2025-12-01 ~ 2025-12-02</li> <li> <p>\u8aaa\u660e: \u5be6\u4f5c PrematchCommentAPI \u5b9a\u7fa9</p> </li> <li> <p>[ ] TDD-011: FOOTBALL-9179</p> </li> <li>Jira: FOOTBALL-9179</li> <li>\u4f30\u6642: 2d</li> <li>\u72c0\u614b: \u9032\u884c\u4e2d</li> <li>\u6642\u9593\u7bc4\u570d: 2025-12-01 ~ 2025-12-03</li> <li>\u8aaa\u660e: \u5be6\u4f5c ChatAPI \u5b9a\u7fa9</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-01/#cursor","title":"\ud83e\udd16 \u8207 Cursor \u7684\u5354\u4f5c\u8a08\u5283","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-01/#_2","title":"\u958b\u59cb\u5be6\u4f5c\u524d","text":"<p>\u8acb Cursor \u5354\u52a9\uff1a 1. \u8b80\u53d6\u76f8\u95dc\u7684 TDD \u6587\u4ef6 2. \u6aa2\u67e5\u73fe\u6709\u7684 codebase \u7d50\u69cb 3. \u63d0\u4f9b\u5be6\u4f5c\u5efa\u8b70\u548c\u6ce8\u610f\u4e8b\u9805 4. \u6aa2\u67e5\u4f9d\u8cf4\u95dc\u4fc2\u662f\u5426\u6eff\u8db3</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-01/#_3","title":"\u5be6\u4f5c\u904e\u7a0b\u4e2d","text":"<ul> <li>\u96a8\u6642\u8207 Cursor \u8a0e\u8ad6\u5be6\u4f5c\u7d30\u7bc0</li> <li>\u8a18\u9304\u91cd\u8981\u7684\u6c7a\u7b56\u548c\u5c0d\u8a71</li> <li>\u9047\u5230\u554f\u984c\u6642\u8acb Cursor \u5354\u52a9\u89e3\u6c7a</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-01/#_4","title":"\u5be6\u4f5c\u5b8c\u6210\u5f8c","text":"<p>\u8acb Cursor \u5354\u52a9\uff1a 1. \u6aa2\u67e5\u5be6\u4f5c\u662f\u5426\u7b26\u5408 TDD \u898f\u7bc4 2. \u6aa2\u67e5\u662f\u5426\u6709\u907a\u6f0f\u7684\u529f\u80fd 3. \u63d0\u4f9b\u6539\u9032\u5efa\u8b70 4. \u66f4\u65b0\u76f8\u95dc\u6587\u4ef6</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-01/#_5","title":"\ud83d\udcdd \u5de5\u4f5c\u8a18\u9304","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-01/#cursor_1","title":"\u8207 Cursor \u7684\u91cd\u8981\u5c0d\u8a71","text":"<p>\uff08\u5728\u6b64\u8a18\u9304\u8207 Cursor \u7684\u91cd\u8981\u5c0d\u8a71\u548c\u6c7a\u7b56\uff09</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-01/#_6","title":"\u5be6\u4f5c\u9032\u5ea6","text":"<p>\uff08\u5728\u6b64\u8a18\u9304\u5be6\u4f5c\u9032\u5ea6\uff09</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-01/#_7","title":"\u9047\u5230\u7684\u554f\u984c","text":"<p>\uff08\u5728\u6b64\u8a18\u9304\u9047\u5230\u7684\u554f\u984c\u548c\u89e3\u6c7a\u65b9\u6848\uff09</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-02/","title":"\u5de5\u4f5c\u8a08\u5283 - 2025-12-02","text":"<p>\u751f\u6210\u6642\u9593: 2025-12-02 19:25:14</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-02/#_1","title":"\ud83d\udccb \u4eca\u65e5\u76ee\u6a19","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-02/#parent-tickets","title":"Parent Tickets\uff08\u4e3b\u8981\u5de5\u4f5c\u9805\u76ee\uff09","text":"<ul> <li>[ ] TDD-010: FOOTBALL-9178</li> <li> <p>\u6642\u9593\u7bc4\u570d: 2025-12-01 ~ 2025-12-02</p> </li> <li> <p>[ ] TDD-011: FOOTBALL-9179</p> </li> <li> <p>\u6642\u9593\u7bc4\u570d: 2025-12-01 ~ 2025-12-03</p> </li> <li> <p>[ ] TDD-021: FOOTBALL-9182</p> </li> <li> <p>\u6642\u9593\u7bc4\u570d: 2025-12-02 ~ 2025-12-03</p> </li> <li> <p>[ ] TDD-020: FOOTBALL-9181</p> </li> <li>\u6642\u9593\u7bc4\u570d: 2025-12-02 ~ 2025-12-04</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-02/#cursor","title":"\ud83e\udd16 \u8207 Cursor \u7684\u5354\u4f5c\u8a08\u5283","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-02/#_2","title":"\u958b\u59cb\u5be6\u4f5c\u524d","text":"<p>\u8acb Cursor \u5354\u52a9\uff1a 1. \u8b80\u53d6\u76f8\u95dc\u7684 TDD \u6587\u4ef6 2. \u6aa2\u67e5\u73fe\u6709\u7684 codebase \u7d50\u69cb 3. \u63d0\u4f9b\u5be6\u4f5c\u5efa\u8b70\u548c\u6ce8\u610f\u4e8b\u9805 4. \u6aa2\u67e5\u4f9d\u8cf4\u95dc\u4fc2\u662f\u5426\u6eff\u8db3</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-02/#_3","title":"\u5be6\u4f5c\u904e\u7a0b\u4e2d","text":"<ul> <li>\u96a8\u6642\u8207 Cursor \u8a0e\u8ad6\u5be6\u4f5c\u7d30\u7bc0</li> <li>\u8a18\u9304\u91cd\u8981\u7684\u6c7a\u7b56\u548c\u5c0d\u8a71</li> <li>\u9047\u5230\u554f\u984c\u6642\u8acb Cursor \u5354\u52a9\u89e3\u6c7a</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-02/#_4","title":"\u5be6\u4f5c\u5b8c\u6210\u5f8c","text":"<p>\u8acb Cursor \u5354\u52a9\uff1a 1. \u6aa2\u67e5\u5be6\u4f5c\u662f\u5426\u7b26\u5408 TDD \u898f\u7bc4 2. \u6aa2\u67e5\u662f\u5426\u6709\u907a\u6f0f\u7684\u529f\u80fd 3. \u63d0\u4f9b\u6539\u9032\u5efa\u8b70 4. \u66f4\u65b0\u76f8\u95dc\u6587\u4ef6</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-02/#_5","title":"\ud83d\udcdd \u5de5\u4f5c\u8a18\u9304","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-02/#cursor_1","title":"\u8207 Cursor \u7684\u91cd\u8981\u5c0d\u8a71","text":"<p>\uff08\u5728\u6b64\u8a18\u9304\u8207 Cursor \u7684\u91cd\u8981\u5c0d\u8a71\u548c\u6c7a\u7b56\uff09</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-02/#_6","title":"\u5be6\u4f5c\u9032\u5ea6","text":"<p>\uff08\u5728\u6b64\u8a18\u9304\u5be6\u4f5c\u9032\u5ea6\uff09</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-02/#_7","title":"\u9047\u5230\u7684\u554f\u984c","text":"<p>\uff08\u5728\u6b64\u8a18\u9304\u9047\u5230\u7684\u554f\u984c\u548c\u89e3\u6c7a\u65b9\u6848\uff09</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03/","title":"\u5de5\u4f5c\u8a08\u5283 - 2025-12-03","text":"<p>\u751f\u6210\u6642\u9593: 2025-12-02\uff08Daily End \u6d41\u7a0b\uff09</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03/#_1","title":"\ud83d\udccb \u4eca\u65e5\u76ee\u6a19","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03/#1-chatwebsocketclient","title":"\u512a\u5148\u7d1a 1\uff1a\u8a2d\u8a08\u8207\u5be6\u4f5c ChatWebSocketClient\uff08\u9ad8\u512a\u5148\u7d1a\uff09","text":"<ul> <li>[ ] TDD-022: ChatWebSocketClient\uff08WebSocket\uff09\u8a2d\u8a08\u8207\u5be6\u4f5c</li> <li>\u6642\u9593\u7bc4\u570d: 2025-12-03 ~ 2025-12-05</li> <li>Story Point: 13</li> <li>\u4f30\u6642: \u6a19\u6e96 5 \u5929\uff0c\u6700\u56b4\u53b2 3 \u5929</li> <li>\u4f9d\u8cf4: TDD-011 (ChatAPI) \u2705 \u5df2\u5b8c\u6210</li> <li>\u6a94\u6848: <code>MatchChat/Sources/MatchChat/Services/API/ChatWebSocketClient.swift</code></li> <li>\u53c3\u8003\u5be6\u4f5c:<ul> <li><code>WebSocketStompManager.swift</code> - \u4f7f\u7528 SportyStomp\uff0cdelegate pattern</li> <li><code>EventDetail.WebSocketFeature</code> - TCA + AsyncStream \u6a21\u5f0f</li> <li><code>EventOddsWebSocketManager</code> - \u591a\u8a02\u95b1\u8005\u7ba1\u7406\uff0cAsyncStream</li> </ul> </li> <li>\u8a2d\u8a08\u91cd\u9ede:<ul> <li>\u4f7f\u7528 <code>actor</code> \u78ba\u4fdd\u7dda\u7a0b\u5b89\u5168</li> <li>\u4f7f\u7528 <code>AsyncStream</code> \u63d0\u4f9b\u8a0a\u606f\u6d41\uff08\u53c3\u8003 EventDetail \u6a21\u5f0f\uff09</li> <li>\u6574\u5408 SportyStomp \u6846\u67b6\uff08\u53c3\u8003 WebSocketStompManager\uff09</li> <li>\u5be6\u4f5c\u9023\u7dda\u7ba1\u7406\uff08\u91cd\u9023\u3001\u5fc3\u8df3\u7b49\uff09</li> <li>\u5be6\u4f5c\u8a02\u95b1 / \u53d6\u6d88\u8a02\u95b1\uff08\u652f\u63f4\u591a\u500b chatroom\uff09</li> <li>\u5be6\u4f5c\u8a0a\u606f\u63a5\u6536\u8207\u767c\u9001</li> <li>\u5be6\u4f5c\u6307\u6578\u9000\u907f\u91cd\u9023\u7b56\u7565</li> </ul> </li> <li>\u5099\u8a3b: <ul> <li>\u53c3\u8003\u73fe\u6709\u5c08\u6848\u4e2d\u7684 WebSocket \u5be6\u4f5c\u6a21\u5f0f</li> <li>\u9700\u8981\u6574\u5408 SportyStomp \u6846\u67b6</li> <li>\u8003\u616e\u4f7f\u7528 AsyncStream \u800c\u975e callback\uff0c\u4ee5\u7b26\u5408\u73fe\u4ee3 Swift \u4e26\u767c\u6a21\u5f0f</li> </ul> </li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03/#2","title":"\u512a\u5148\u7d1a 2\uff1a\u6587\u6a94\u5b8c\u5584\uff08\u4f4e\u512a\u5148\u7d1a\uff09","text":"<ul> <li>[ ] \u66f4\u65b0\u67b6\u69cb\u5716\u4ee5\u53cd\u6620 Client \u8207 API \u5c64\u7684\u5be6\u969b\u95dc\u4fc2</li> <li>[ ] \u5728 TDD \u6587\u4ef6\u4e2d\u8a3b\u660e\u5be6\u969b\u5c08\u6848\u7d50\u69cb\u5dee\u7570\uff08MatchChat \u7d71\u4e00 package\uff09</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03/#cursor","title":"\ud83e\udd16 \u8207 Cursor \u7684\u5354\u4f5c\u8a08\u5283","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03/#_2","title":"\u958b\u59cb\u5be6\u4f5c\u524d","text":"<p>\u8acb Cursor \u5354\u52a9\uff1a 1. \u8b80\u53d6 TDD-022 \u6587\u4ef6\uff08ChatWebSocketClient\uff09 2. \u5206\u6790\u53c3\u8003\u5be6\u4f5c\uff1a    - <code>WebSocketStompManager.swift</code> - \u4e86\u89e3 SportyStomp \u7684\u4f7f\u7528\u65b9\u5f0f    - <code>EventDetail.WebSocketFeature</code> - \u4e86\u89e3 TCA + AsyncStream \u6a21\u5f0f    - <code>EventOddsWebSocketManager</code> - \u4e86\u89e3\u591a\u8a02\u95b1\u8005\u7ba1\u7406\u7b56\u7565 3. \u8a2d\u8a08 ChatWebSocketClient \u67b6\u69cb\uff1a    - \u6c7a\u5b9a\u4f7f\u7528 <code>actor</code> \u9084\u662f <code>class</code>\uff08\u53c3\u8003\u73fe\u6709\u5be6\u4f5c\uff09    - \u6c7a\u5b9a\u4f7f\u7528 <code>AsyncStream</code> \u9084\u662f callback\uff08\u5efa\u8b70\u4f7f\u7528 AsyncStream\uff09    - \u8a2d\u8a08\u9023\u7dda\u72c0\u614b\u7ba1\u7406    - \u8a2d\u8a08\u91cd\u9023\u7b56\u7565\uff08\u6307\u6578\u9000\u907f\uff09    - \u8a2d\u8a08\u5fc3\u8df3\u6a5f\u5236 4. \u6aa2\u67e5\u4f9d\u8cf4\u95dc\u4fc2\uff1a    - ChatAPI.WebSocketEndpoint \u5df2\u5b9a\u7fa9 \u2705    - ChatAPI.WebSocketMessageDTO \u5df2\u5b9a\u7fa9 \u2705    - \u9700\u8981\u78ba\u8a8d SportyStomp \u662f\u5426\u53ef\u7528</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03/#_3","title":"\u5be6\u4f5c\u904e\u7a0b\u4e2d","text":"<ul> <li>\u96a8\u6642\u8207 Cursor \u8a0e\u8ad6\u5be6\u4f5c\u7d30\u7bc0</li> <li>\u8a18\u9304\u91cd\u8981\u7684\u6c7a\u7b56\u548c\u5c0d\u8a71\uff08\u8a18\u5f97\u52a0\u5165 User Prompt \u6b04\u4f4d\uff09</li> <li>\u9047\u5230\u554f\u984c\u6642\u8acb Cursor \u5354\u52a9\u89e3\u6c7a</li> <li>\u7279\u5225\u6ce8\u610f\uff1a</li> <li>WebSocket \u7684\u4e26\u767c\u5b89\u5168\uff08\u4f7f\u7528 actor \u6216\u9069\u7576\u7684\u9396\u6a5f\u5236\uff09</li> <li>\u932f\u8aa4\u8655\u7406\u548c\u91cd\u9023\u908f\u8f2f</li> <li>\u591a\u8a02\u95b1\u8005\u7ba1\u7406\uff08\u53c3\u8003 EventOddsWebSocketManager\uff09</li> <li>AsyncStream \u7684\u751f\u547d\u9031\u671f\u7ba1\u7406</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03/#_4","title":"\u5be6\u4f5c\u5b8c\u6210\u5f8c","text":"<p>\u8acb Cursor \u5354\u52a9\uff1a 1. \u6aa2\u67e5\u5be6\u4f5c\u662f\u5426\u7b26\u5408 TDD \u898f\u7bc4 2. \u6aa2\u67e5\u662f\u5426\u6709\u907a\u6f0f\u7684\u529f\u80fd 3. \u63d0\u4f9b\u6539\u9032\u5efa\u8b70 4. \u66f4\u65b0\u76f8\u95dc\u6587\u4ef6</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03/#_5","title":"\ud83d\udcdd \u5de5\u4f5c\u8a18\u9304","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03/#cursor_1","title":"\u8207 Cursor \u7684\u91cd\u8981\u5c0d\u8a71","text":"<p>\uff08\u5728\u6b64\u8a18\u9304\u8207 Cursor \u7684\u91cd\u8981\u5c0d\u8a71\u548c\u6c7a\u7b56\uff09</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03/#_6","title":"\u5be6\u4f5c\u9032\u5ea6","text":"<p>\uff08\u5728\u6b64\u8a18\u9304\u5be6\u4f5c\u9032\u5ea6\uff09</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03/#_7","title":"\u9047\u5230\u7684\u554f\u984c","text":"<p>\uff08\u5728\u6b64\u8a18\u9304\u9047\u5230\u7684\u554f\u984c\u548c\u89e3\u6c7a\u65b9\u6848\uff09</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03/#_8","title":"\ud83d\udca1 \u8a2d\u8a08\u5efa\u8b70","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03/#_9","title":"\u67b6\u69cb\u8a2d\u8a08\u53c3\u8003","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03/#1-websocketstompmanagerswift","title":"1. \u53c3\u8003 WebSocketStompManager.swift","text":"<ul> <li>\u4f7f\u7528 SportyStomp \u6846\u67b6: \u5c08\u6848\u5df2\u6709 SportyStomp\uff0c\u61c9\u76f4\u63a5\u4f7f\u7528</li> <li>Delegate Pattern: \u4f7f\u7528 <code>SwiftStompDelegate</code> \u8655\u7406\u9023\u7dda\u4e8b\u4ef6</li> <li>\u9023\u7dda\u7ba1\u7406: \u5728 <code>init</code> \u4e2d\u5efa\u7acb\u9023\u7dda\uff0c\u4f7f\u7528 <code>enableAutoPing()</code> \u555f\u7528\u5fc3\u8df3</li> <li>\u8a02\u95b1\u6a5f\u5236: \u4f7f\u7528 <code>swiftStomp.subscribe(to:id:headers:)</code> \u8a02\u95b1 topic</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03/#2-eventdetailwebsocketfeature","title":"2. \u53c3\u8003 EventDetail.WebSocketFeature","text":"<ul> <li>AsyncStream \u6a21\u5f0f: \u4f7f\u7528 <code>AsyncStream</code> \u63d0\u4f9b\u8a0a\u606f\u6d41\uff0c\u800c\u975e callback</li> <li>TCA \u6574\u5408: \u5728 Feature \u4e2d\u4f7f\u7528 <code>.run { send in ... }</code> \u8655\u7406 AsyncStream</li> <li>\u751f\u547d\u9031\u671f\u7ba1\u7406: \u4f7f\u7528 <code>cancellable(id:)</code> \u7ba1\u7406\u8a02\u95b1\u751f\u547d\u9031\u671f</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03/#3-eventoddswebsocketmanager","title":"3. \u53c3\u8003 EventOddsWebSocketManager","text":"<ul> <li>\u591a\u8a02\u95b1\u8005\u7ba1\u7406: \u4f7f\u7528 <code>NSLock</code> \u4fdd\u8b77\u5171\u4eab\u72c0\u614b</li> <li>\u8a02\u95b1\u8005\u8ffd\u8e64: \u4f7f\u7528 UUID \u8ffd\u8e64\u6bcf\u500b\u8a02\u95b1\u8005</li> <li>\u5ee3\u64ad\u6a5f\u5236: \u5c07\u8a0a\u606f\u5ee3\u64ad\u7d66\u6240\u6709\u8a02\u95b1\u8005</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03/#_10","title":"\u5efa\u8b70\u7684\u8a2d\u8a08\u65b9\u6848","text":"<pre><code>// \u65b9\u6848 1: \u4f7f\u7528 actor + AsyncStream\uff08\u63a8\u85a6\uff09\npublic actor ChatWebSocketClient {\n    private var swiftStomp: SportyStomp?\n    private var messageStreams: [String: AsyncStream&lt;ChatAPI.WebSocketMessageDTO&gt;.Continuation] = [:]\n\n    public func subscribe(chatroomId: String) -&gt; AsyncStream&lt;ChatAPI.WebSocketMessageDTO&gt; {\n        // \u8fd4\u56de AsyncStream\n    }\n}\n\n// \u65b9\u6848 2: \u4f7f\u7528 class + NSLock\uff08\u53c3\u8003 EventOddsWebSocketManager\uff09\npublic final class ChatWebSocketClient {\n    private let lock = NSLock()\n    private var subscriptions: [String: Subscription] = [:]\n\n    public func subscribe(chatroomId: String) -&gt; AsyncStream&lt;ChatAPI.WebSocketMessageDTO&gt; {\n        // \u8fd4\u56de AsyncStream\n    }\n}\n</code></pre>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03/#_11","title":"\u5be6\u4f5c\u9806\u5e8f","text":"<ol> <li>\u4e0a\u5348: \u5206\u6790\u53c3\u8003\u5be6\u4f5c\uff0c\u8a2d\u8a08 ChatWebSocketClient \u67b6\u69cb</li> <li>\u4e0b\u5348: \u958b\u59cb\u5be6\u4f5c ChatWebSocketClient\uff08TDD-022\uff09</li> </ol>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03/#_12","title":"\u6ce8\u610f\u4e8b\u9805","text":"<ul> <li>ChatWebSocketClient \u662f\u8f03\u8907\u96dc\u7684\u5be6\u4f5c\uff0c\u9700\u8981\u4ed4\u7d30\u8a2d\u8a08</li> <li>\u512a\u5148\u8003\u616e\u4f7f\u7528 <code>AsyncStream</code> \u800c\u975e callback\uff0c\u7b26\u5408\u73fe\u4ee3 Swift \u4e26\u767c\u6a21\u5f0f</li> <li>\u6ce8\u610f WebSocket \u7684\u4e26\u767c\u5b89\u5168\uff08\u4f7f\u7528 actor \u6216 NSLock\uff09</li> <li>\u53c3\u8003\u73fe\u6709\u5c08\u6848\u7684\u5be6\u4f5c\u6a21\u5f0f\uff0c\u4fdd\u6301\u4e00\u81f4\u6027</li> <li>\u78ba\u8a8d SportyStomp \u7684\u53ef\u7528\u6027\u548c API</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03/#_13","title":"\ud83d\udd17 \u76f8\u95dc\u6587\u4ef6","text":"<ul> <li>TDD-022: ChatWebSocketClient</li> <li>ChatWebSocketClient \u8a2d\u8a08\u65b9\u6848 - \u8a2d\u8a08\u6587\u6a94</li> <li>TDD-020: PrematchCommentClient</li> <li>TDD-021: LiveChatClient</li> <li>\u5be6\u4f5c\u72c0\u614b</li> <li>Changelog</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03/#_14","title":"\ud83d\udcda \u53c3\u8003\u5be6\u4f5c","text":"<ul> <li>WebSocketStompManager.swift - SportyStomp \u4f7f\u7528\u7bc4\u4f8b</li> <li>EventDetail.WebSocketFeature - TCA + AsyncStream \u6a21\u5f0f</li> <li>EventOddsWebSocketManager - \u591a\u8a02\u95b1\u8005\u7ba1\u7406\u7b56\u7565</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03_websocket_design/","title":"ChatWebSocketClient \u8a2d\u8a08\u65b9\u6848","text":"<p>\u751f\u6210\u6642\u9593: 2025-12-03</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03_websocket_design/#_1","title":"\ud83d\udccb \u53c3\u8003\u5be6\u4f5c\u5206\u6790","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03_websocket_design/#1-websocketstompmanagerswift","title":"1. WebSocketStompManager.swift","text":"<p>\u7279\u9ede: - \u4f7f\u7528 <code>SportyStomp</code> \u6846\u67b6 - \u4f7f\u7528 <code>SwiftStompDelegate</code> \u8655\u7406\u9023\u7dda\u4e8b\u4ef6 - \u4f7f\u7528 callback (<code>MessageHandler</code>) \u8655\u7406\u8a0a\u606f - \u5728 <code>init</code> \u4e2d\u5efa\u7acb\u9023\u7dda\u4e26\u555f\u7528\u5fc3\u8df3 (<code>enableAutoPing()</code>) - \u8a02\u95b1 topic: <code>/topic/user.{userId}</code></p> <p>\u95dc\u9375\u4ee3\u78bc: <pre><code>class WebSocketStompManager {\n    var swiftStomp: SportyStomp\n    var messageHandler: MessageHandler?\n\n    init(userId: String, messageHandler: @escaping MessageHandler) {\n        swiftStomp = SportyStomp(host: webSocketDomain, headers: headers)\n        swiftStomp.enableAutoPing()\n        swiftStomp.connectWithCustomHeaders()\n        swiftStomp.delegate = self\n    }\n\n    func onMessageReceived(swiftStomp: SportyStomp, message: Any?, ...) {\n        // \u89e3\u6790\u8a0a\u606f\u4e26\u8abf\u7528 messageHandler\n    }\n}\n</code></pre></p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03_websocket_design/#2-eventdetailwebsocketfeature","title":"2. EventDetail.WebSocketFeature","text":"<p>\u7279\u9ede: - \u4f7f\u7528 TCA Reducer \u6a21\u5f0f - \u4f7f\u7528 <code>AsyncStream</code> \u63d0\u4f9b\u8a0a\u606f\u6d41 - \u4f7f\u7528 <code>.run { send in ... }</code> \u8655\u7406 AsyncStream - \u4f7f\u7528 <code>cancellable(id:)</code> \u7ba1\u7406\u8a02\u95b1\u751f\u547d\u9031\u671f - \u652f\u63f4\u591a\u500b\u8a02\u95b1\uff08event status, market odds, market status\uff09</p> <p>\u95dc\u9375\u4ee3\u78bc: <pre><code>case .startMarketOddsSubscription(let event):\n    return .run(\n        operation: { send in\n            let marketOddsStream = try await eventDetailRepository.subscribeForAllMarketOddsChange(of: event)\n            for await marketMessage in marketOddsStream {\n                await send(.marketOddsUpdated(marketMessage))\n            }\n        }\n    )\n    .cancellable(id: CancelID.marketOddsSubscription(eventId: state.eventId), cancelInFlight: true)\n</code></pre></p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03_websocket_design/#3-eventoddswebsocketmanager","title":"3. EventOddsWebSocketManager","text":"<p>\u7279\u9ede: - \u4f7f\u7528 <code>class</code> + <code>NSLock</code> \u4fdd\u8b77\u5171\u4eab\u72c0\u614b - \u652f\u63f4\u591a\u8a02\u95b1\u8005\uff08\u4f7f\u7528 UUID \u8ffd\u8e64\uff09 - \u4f7f\u7528 <code>AsyncStream</code> \u63d0\u4f9b\u8a0a\u606f\u6d41 - \u5ee3\u64ad\u6a5f\u5236\uff1a\u5c07\u8a0a\u606f\u5ee3\u64ad\u7d66\u6240\u6709\u8a02\u95b1\u8005 - \u8a02\u95b1\u7ba1\u7406\uff1a\u8ffd\u8e64\u8a02\u95b1\u8005\u6578\u91cf\uff0c\u53ea\u6709\u7576\u6240\u6709\u8a02\u95b1\u8005\u90fd\u53d6\u6d88\u6642\u624d\u53d6\u6d88\u8a02\u95b1</p> <p>\u95dc\u9375\u4ee3\u78bc: <pre><code>public final class EventOddsWebSocketManager {\n    private var activeSubscriptions: [String: EventSubscription] = [:]\n    private let subscriptionsLock = NSLock()\n\n    private class EventSubscription {\n        private var messageContinuations: [UUID: AsyncStream&lt;MarketMessage&gt;.Continuation] = [:]\n        private let continuationsLock = NSLock()\n\n        func addSubscriber() -&gt; AsyncStream&lt;MarketMessage&gt; {\n            let id = UUID()\n            let messageStream = AsyncStream&lt;MarketMessage&gt; { continuation in\n                continuationsLock.lock()\n                defer { continuationsLock.unlock()}\n                messageContinuations[id] = continuation\n            }\n            return messageStream\n        }\n\n        func broadcastMessage(_ message: MarketMessage) {\n            // \u5ee3\u64ad\u7d66\u6240\u6709\u8a02\u95b1\u8005\n        }\n    }\n}\n</code></pre></p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03_websocket_design/#chatwebsocketclient_1","title":"\ud83c\udfaf ChatWebSocketClient \u8a2d\u8a08\u65b9\u6848","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03_websocket_design/#_2","title":"\u67b6\u69cb\u5c0d\u9f4a\u6aa2\u67e5","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03_websocket_design/#clean-architecture","title":"\u2705 \u7b26\u5408 Clean Architecture \u5c64\u7d1a\u95dc\u4fc2","text":"<p>\u6839\u64da <code>02_Architecture/01_clean_architecture_diagram.md</code>\uff1a - Client Layer \u2192 API Layer\uff1a<code>ChatWebSocketClient</code> \u4f7f\u7528 <code>ChatAPI.WebSocketEndpoint</code> \u548c <code>ChatAPI.WebSocketMessageDTO</code> - Repository Layer \u2192 Client Layer\uff1a<code>LiveChatRepository</code> \u4f7f\u7528 <code>ChatWebSocketClient</code> - UseCase Layer \u2192 Repository Layer\uff1a<code>JoinChatroomUseCase</code> / <code>LeaveChatroomUseCase</code> \u4f7f\u7528 <code>LiveChatRepository</code></p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03_websocket_design/#module-responsibility","title":"\u2705 \u7b26\u5408 Module Responsibility","text":"<p>\u6839\u64da <code>03_Module Responsibility/01_module_responsibility.md</code>\uff1a - <code>ChatWebSocketClient</code> \u8077\u8cac\uff1a   - WebSocket \u901a\u8a0a\uff08\u5373\u6642\u8a0a\u606f\uff09   - \u8a02\u95b1 / \u53d6\u6d88\u8a02\u95b1   - \u8a0a\u606f\u63a5\u6536\u8207\u767c\u9001   - \u9023\u7dda\u7ba1\u7406\uff08\u91cd\u9023\u3001\u5fc3\u8df3\u7b49\uff09 - \u88ab <code>LiveChatRepository</code> \u4f7f\u7528\uff0c\u4e0d\u88ab Feature \u76f4\u63a5\u4f7f\u7528</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03_websocket_design/#api-spec","title":"\u2705 \u7b26\u5408 API Spec","text":"<p>\u6839\u64da <code>08_API Spec &amp; Mapping/01_api_spec.md</code>\uff1a - WebSocket URL: <code>wss://www.encorebet.net/chat/websocket/web-chat</code> - \u5be6\u969b\u5be6\u4f5c\uff1a\u4f7f\u7528 STOMP \u5354\u8b70\uff0c\u9700\u8981\u8a02\u95b1 <code>/topic/chat_room.{chatroomId}</code> - Message DTO: <code>ChatAPI.WebSocketMessageDTO</code>\uff08\u5305\u542b <code>type</code> \u548c <code>data: MessageResponseDataDTO</code>\uff09</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03_websocket_design/#module-sequence-diagram","title":"\u2705 \u7b26\u5408 Module Sequence Diagram","text":"<p>\u6839\u64da <code>05. Module Sequence Diagram\uff08\u6a21\u7d44\u5e8f\u5217\u5716\uff09/LiveChat/Module Sequence Diagrams/01_data_initialization_initialize_chatroom.md</code>\uff1a - \u9023\u7dda\u6642\u6a5f\uff1a\u9032\u5165 Live Detail Page \u6642\u5efa\u7acb WebSocket \u9023\u7dda - \u8a02\u95b1\u6642\u6a5f\uff1a\u52a0\u5165\u804a\u5929\u5ba4\u6642\u8a02\u95b1 <code>/topic/chat_room.{chatroomId}</code> - \u53d6\u6d88\u8a02\u95b1\u6642\u6a5f\uff1a\u96e2\u958b Live Detail Page \u6642\u53d6\u6d88\u8a02\u95b1</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03_websocket_design/#feature-state","title":"\u2705 \u7b26\u5408 Feature State \u8a2d\u8a08","text":"<p>\u6839\u64da <code>06_Feature State &amp; Action (TCA)/01_feature_state_action.md</code>\uff1a - <code>LiveChatState</code> \u5305\u542b <code>isWebSocketConnected: Bool</code> \u548c <code>webSocketError: Error?</code> - <code>LiveChatAction</code> \u5305\u542b WebSocket \u76f8\u95dc\u7684 Action\uff08\u5982 <code>webSocketMessageReceived</code>\uff09</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03_websocket_design/#_3","title":"\u8a2d\u8a08\u6c7a\u7b56","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03_websocket_design/#1-actor-vs-class","title":"1. \u985e\u578b\u9078\u64c7\uff1a<code>actor</code> vs <code>class</code>","text":"<p>\u6c7a\u5b9a: \u4f7f\u7528 <code>actor</code>\uff08\u7b26\u5408 TDD \u898f\u7bc4\uff0c\u78ba\u4fdd\u7dda\u7a0b\u5b89\u5168\uff09</p> <p>\u7406\u7531: - TDD \u6587\u4ef6\u8981\u6c42\u4f7f\u7528 <code>actor</code> - <code>actor</code> \u63d0\u4f9b\u5167\u5efa\u7684\u7dda\u7a0b\u5b89\u5168\u4fdd\u8b49 - \u7b26\u5408\u73fe\u4ee3 Swift \u4e26\u767c\u6a21\u5f0f</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03_websocket_design/#2-asyncstream-vs-callback","title":"2. \u8a0a\u606f\u50b3\u905e\uff1a<code>AsyncStream</code> vs <code>callback</code>","text":"<p>\u6c7a\u5b9a: \u4f7f\u7528 <code>AsyncStream</code>\uff08\u53c3\u8003 EventDetail \u548c EventOddsWebSocketManager\uff09</p> <p>\u7406\u7531: - \u7b26\u5408\u73fe\u4ee3 Swift \u4e26\u767c\u6a21\u5f0f - \u66f4\u5bb9\u6613\u8207 TCA \u6574\u5408\uff08\u53c3\u8003 <code>EventDetail.WebSocketFeature</code>\uff09 - \u652f\u63f4\u591a\u8a02\u95b1\u8005\u6a21\u5f0f\uff08\u53c3\u8003 <code>EventOddsWebSocketManager</code>\uff09 - \u66f4\u597d\u7684\u751f\u547d\u9031\u671f\u7ba1\u7406</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03_websocket_design/#3-sportystomp","title":"3. \u6846\u67b6\u9078\u64c7\uff1a<code>SportyStomp</code>","text":"<p>\u6c7a\u5b9a: \u4f7f\u7528 <code>SportyStomp</code>\uff08\u53c3\u8003 WebSocketStompManager\uff09</p> <p>\u7406\u7531: - \u5c08\u6848\u5df2\u6709 SportyStomp \u6846\u67b6 - \u5df2\u5be6\u4f5c\u5fc3\u8df3\u6a5f\u5236 (<code>enableAutoPing()</code>) - \u5df2\u5be6\u4f5c STOMP \u5354\u8b70\u652f\u63f4 - \u6709\u5b8c\u6574\u7684 delegate \u6a5f\u5236</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03_websocket_design/#4-api","title":"4. API \u5c64\u7d1a\u4f7f\u7528","text":"<p>\u6c7a\u5b9a: \u4f7f\u7528 <code>ChatAPI.WebSocketEndpoint</code> \u548c <code>ChatAPI.WebSocketMessageDTO</code></p> <p>\u7406\u7531: - \u7b26\u5408 Clean Architecture\uff1aClient \u4f7f\u7528 API Layer \u5b9a\u7fa9\u7684 endpoint \u548c DTO - \u5be6\u969b\u5be6\u4f5c\u4e2d\u5df2\u5b9a\u7fa9 <code>ChatAPI.WebSocketEndpoint</code> \u548c <code>ChatAPI.WebSocketMessageDTO</code> - \u4fdd\u6301\u67b6\u69cb\u4e00\u81f4\u6027</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03_websocket_design/#_4","title":"\u67b6\u69cb\u8a2d\u8a08","text":"<pre><code>import Foundation\nimport SportyStomp\n\npublic actor ChatWebSocketClient {\n    // MARK: - Properties\n\n    private var swiftStomp: SportyStomp?\n    private var connectionState: ConnectionState = .disconnected\n    private var subscriptions: [String: ChatroomSubscription] = [:]\n    private var reconnectTask: Task&lt;Void, Never&gt;?\n    private var reconnectAttempts: Int = 0\n\n    // MARK: - Types\n\n    public enum ConnectionState: Equatable {\n        case disconnected\n        case connecting\n        case connected\n        case reconnecting\n        case error(String)\n    }\n\n    private class ChatroomSubscription {\n        let chatroomId: String\n        let subscriptionId: String\n        private var messageContinuations: [UUID: AsyncStream&lt;ChatAPI.WebSocketMessageDTO&gt;.Continuation] = [:]\n        private let continuationsLock = NSLock()\n\n        init(chatroomId: String, subscriptionId: String) {\n            self.chatroomId = chatroomId\n            self.subscriptionId = subscriptionId\n        }\n\n        func addSubscriber() -&gt; AsyncStream&lt;ChatAPI.WebSocketMessageDTO&gt; {\n            let id = UUID()\n            let messageStream = AsyncStream&lt;ChatAPI.WebSocketMessageDTO&gt; { continuation in\n                continuationsLock.lock()\n                defer { continuationsLock.unlock() }\n                messageContinuations[id] = continuation\n            }\n            return messageStream\n        }\n\n        func removeSubscriber(id: UUID) {\n            continuationsLock.lock()\n            defer { continuationsLock.unlock() }\n            messageContinuations.removeValue(forKey: id)\n        }\n\n        func broadcastMessage(_ message: ChatAPI.WebSocketMessageDTO) {\n            continuationsLock.lock()\n            defer { continuationsLock.unlock() }\n\n            messageContinuations = messageContinuations.compactMapValues { continuation in\n                switch continuation.yield(message) {\n                case .enqueued:\n                    return continuation\n                case .dropped, .terminated:\n                    return nil\n                @unknown default:\n                    return nil\n                }\n            }\n        }\n\n        var subscriberCount: Int {\n            continuationsLock.lock()\n            defer { continuationsLock.unlock() }\n            return messageContinuations.count\n        }\n\n        func finishAllStreams() {\n            continuationsLock.lock()\n            defer { continuationsLock.unlock() }\n            for continuation in messageContinuations.values {\n                continuation.finish()\n            }\n            messageContinuations.removeAll()\n        }\n    }\n\n    // MARK: - Initialization\n\n    public init() {}\n\n    // MARK: - Connection Management\n\n    /// \u5efa\u7acb WebSocket \u9023\u7dda\n    /// - Parameters:\n    ///   - userId: \u7528\u6236 ID\uff08\u7528\u65bc\u9023\u7dda headers\uff09\n    ///   - domain: WebSocket domain\uff08\u4f8b\u5982 \"www.encorebet.net\"\uff09\n    /// - Throws: \u9023\u7dda\u932f\u8aa4\n    /// \n    /// **\u6642\u6a5f**: \u9032\u5165 Live Detail Page \u6642\u547c\u53eb\uff08\u53c3\u8003 Module Sequence Diagram\uff09\n    /// **\u5be6\u4f5c**: \u4f7f\u7528 `ChatAPI.WebSocketEndpoint.url(for: domain)` \u53d6\u5f97 URL\n    public func connect(userId: String, domain: String) async throws {\n        // 1. \u4f7f\u7528 ChatAPI.WebSocketEndpoint.url(for: domain) \u53d6\u5f97 URL\n        // 2. \u5efa\u7acb SportyStomp \u9023\u7dda\uff08\u8a2d\u5b9a headers\uff0c\u5305\u542b userId\uff09\n        // 3. \u8a2d\u5b9a delegate\n        // 4. \u555f\u7528\u5fc3\u8df3 (enableAutoPing())\n        // 5. \u9023\u7dda (connectWithCustomHeaders())\n        // 6. \u66f4\u65b0 connectionState\n    }\n\n    /// \u65b7\u958b WebSocket \u9023\u7dda\n    /// \n    /// **\u6642\u6a5f**: \u96e2\u958b Live Detail Page \u6642\u547c\u53eb\uff08\u53c3\u8003 Module Sequence Diagram\uff09\n    public func disconnect() async {\n        // 1. \u53d6\u6d88\u6240\u6709\u8a02\u95b1\uff08finishAllStreams\uff09\n        // 2. \u53d6\u6d88\u91cd\u9023\u4efb\u52d9\n        // 3. \u65b7\u958b\u9023\u7dda (disconnect())\n        // 4. \u6e05\u7406\u8cc7\u6e90\n        // 5. \u66f4\u65b0 connectionState\n    }\n\n    // MARK: - Subscription Management\n\n    /// \u8a02\u95b1\u6307\u5b9a\u804a\u5929\u5ba4\u7684\u8a0a\u606f\n    /// - Parameter chatroomId: \u804a\u5929\u5ba4 ID\n    /// - Returns: AsyncStream&lt;ChatAPI.WebSocketMessageDTO&gt; \u8a0a\u606f\u6d41\n    /// \n    /// **\u6642\u6a5f**: \u52a0\u5165\u804a\u5929\u5ba4\u6642\u547c\u53eb\uff08\u53c3\u8003 Module Sequence Diagram\uff09\n    /// **\u5be6\u4f5c**: \u4f7f\u7528 `ChatAPI.WebSocketEndpoint.subscribeDestination(chatroomId:)` \u53d6\u5f97 topic\n    /// **STOMP \u8a02\u95b1**: \u4f7f\u7528 `SportyStomp.subscribe(to:destination, id:subscriptionId)`\n    public func subscribe(chatroomId: String) -&gt; AsyncStream&lt;ChatAPI.WebSocketMessageDTO&gt; {\n        // 1. \u6aa2\u67e5\u662f\u5426\u5df2\u8a02\u95b1\u8a72 chatroomId\n        // 2. \u5982\u679c\u672a\u8a02\u95b1\uff1a\n        //    - \u5efa\u7acb ChatroomSubscription\n        //    - \u4f7f\u7528 ChatAPI.WebSocketEndpoint.subscribeDestination(chatroomId:) \u53d6\u5f97 topic\n        //    - \u4f7f\u7528 SportyStomp.subscribe(to:topic, id:subscriptionId)\n        // 3. \u8fd4\u56de AsyncStream\uff08\u652f\u63f4\u591a\u8a02\u95b1\u8005\uff09\n    }\n\n    /// \u53d6\u6d88\u8a02\u95b1\u6307\u5b9a\u804a\u5929\u5ba4\n    /// - Parameter chatroomId: \u804a\u5929\u5ba4 ID\n    /// \n    /// **\u6642\u6a5f**: \u96e2\u958b\u804a\u5929\u5ba4\u6216\u96e2\u958b\u9801\u9762\u6642\u547c\u53eb\n    /// **\u5be6\u4f5c**: \u53ea\u6709\u7576\u6240\u6709\u8a02\u95b1\u8005\u90fd\u53d6\u6d88\u6642\u624d\u53d6\u6d88 STOMP \u8a02\u95b1\n    public func unsubscribe(chatroomId: String) async {\n        // 1. \u79fb\u9664\u8a02\u95b1\u8005\uff08removeSubscriber\uff09\n        // 2. \u5982\u679c\u6c92\u6709\u5176\u4ed6\u8a02\u95b1\u8005\uff1a\n        //    - \u53d6\u6d88 STOMP \u8a02\u95b1 (unsubscribe(id:subscriptionId))\n        //    - \u79fb\u9664 ChatroomSubscription\n    }\n\n    // MARK: - Message Sending\n\n    /// \u767c\u9001\u8a0a\u606f\u5230\u6307\u5b9a\u804a\u5929\u5ba4\n    /// - Parameters:\n    ///   - chatroomId: \u804a\u5929\u5ba4 ID\n    ///   - text: \u8a0a\u606f\u5167\u5bb9\n    /// - Throws: \u767c\u9001\u932f\u8aa4\n    /// \n    /// **\u6ce8\u610f**: \u8a0a\u606f\u767c\u9001\u61c9\u900f\u904e HTTP API\uff08`LiveChatClient.sendMessage`\uff09\uff0c\n    /// WebSocket \u4e3b\u8981\u7528\u65bc\u63a5\u6536\u5373\u6642\u8a0a\u606f\u3002\u6b64\u65b9\u6cd5\u70ba\u53ef\u9078\u529f\u80fd\u3002\n    public func sendMessage(chatroomId: String, text: String) async throws {\n        // \u4f7f\u7528 STOMP SEND \u6307\u4ee4\u767c\u9001\u8a0a\u606f\uff08\u5982\u679c\u9700\u8981\uff09\n        // \u6ce8\u610f\uff1a\u6839\u64da API Spec\uff0c\u8a0a\u606f\u767c\u9001\u4e3b\u8981\u900f\u904e HTTP API\n    }\n\n    // MARK: - Private Methods\n\n    private func reconnect() async {\n        // \u6307\u6578\u9000\u907f\u91cd\u9023\u7b56\u7565\n    }\n\n    private func startHeartbeat() {\n        // \u5fc3\u8df3\u6a5f\u5236\uff08\u7531 SportyStomp \u7684 enableAutoPing() \u8655\u7406\uff09\n    }\n}\n\n// MARK: - SwiftStompDelegate\n\nextension ChatWebSocketClient: SwiftStompDelegate {\n    nonisolated func onConnect(swiftStomp: SportyStomp, connectType: StompConnectType) {\n        Task { @MainActor in\n            await handleConnect(connectType: connectType)\n        }\n    }\n\n    nonisolated func onDisconnect(swiftStomp: SportyStomp, disconnectType: StompDisconnectType) {\n        Task { @MainActor in\n            await handleDisconnect(disconnectType: disconnectType)\n        }\n    }\n\n    nonisolated func onMessageReceived(swiftStomp: SportyStomp, message: Any?, messageId: String, destination: String, headers: [String: String]) {\n        Task { @MainActor in\n            await handleMessageReceived(message: message, destination: destination)\n        }\n    }\n\n    nonisolated func onError(swiftStomp: SportyStomp, briefDescription: String, fullDescription: String?, receiptId: String?, type: StompErrorType) {\n        Task { @MainActor in\n            await handleError(briefDescription: briefDescription, type: type)\n        }\n    }\n\n    // \u5176\u4ed6 delegate \u65b9\u6cd5...\n}\n</code></pre>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03_websocket_design/#_5","title":"\ud83d\udd11 \u95dc\u9375\u8a2d\u8a08\u8981\u9ede","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03_websocket_design/#1","title":"1. \u9023\u7dda\u7ba1\u7406","text":"<ul> <li>\u521d\u59cb\u9023\u7dda: \u5728 <code>connect()</code> \u4e2d\u5efa\u7acb SportyStomp \u9023\u7dda</li> <li>\u81ea\u52d5\u91cd\u9023: \u4f7f\u7528\u6307\u6578\u9000\u907f\u7b56\u7565</li> <li>\u5fc3\u8df3\u6a5f\u5236: \u4f7f\u7528 SportyStomp \u7684 <code>enableAutoPing()</code></li> <li>\u72c0\u614b\u7ba1\u7406: \u4f7f\u7528 <code>ConnectionState</code> enum \u8ffd\u8e64\u9023\u7dda\u72c0\u614b</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03_websocket_design/#2","title":"2. \u8a02\u95b1\u7ba1\u7406","text":"<ul> <li>\u591a\u8a02\u95b1\u8005\u652f\u63f4: \u53c3\u8003 EventOddsWebSocketManager\uff0c\u4f7f\u7528 UUID \u8ffd\u8e64\u8a02\u95b1\u8005</li> <li>\u8a02\u95b1\u751f\u547d\u9031\u671f: \u53ea\u6709\u7576\u6240\u6709\u8a02\u95b1\u8005\u90fd\u53d6\u6d88\u6642\u624d\u53d6\u6d88\u8a02\u95b1</li> <li>\u5ee3\u64ad\u6a5f\u5236: \u5c07\u8a0a\u606f\u5ee3\u64ad\u7d66\u6240\u6709\u8a02\u95b1\u8005</li> <li>STOMP Topic: \u4f7f\u7528 <code>ChatAPI.WebSocketEndpoint.subscribeDestination(chatroomId:)</code> \u53d6\u5f97 <code>/topic/chat_room.{chatroomId}</code></li> <li>\u8a02\u95b1\u6642\u6a5f: \u52a0\u5165\u804a\u5929\u5ba4\u6642\u8a02\u95b1\uff08\u53c3\u8003 Module Sequence Diagram\uff09</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03_websocket_design/#3","title":"3. \u8a0a\u606f\u8655\u7406","text":"<ul> <li>\u8a0a\u606f\u89e3\u6790: \u53c3\u8003 WebSocketStompManager\uff0c\u89e3\u6790 STOMP \u8a0a\u606f\u683c\u5f0f</li> <li>DTO \u7d50\u69cb: \u4f7f\u7528 <code>ChatAPI.WebSocketMessageDTO</code>\uff08\u5305\u542b <code>type: String</code> \u548c <code>data: MessageResponseDataDTO</code>\uff09</li> <li>\u8a0a\u606f\u8def\u7531: \u6839\u64da <code>destination</code> header \u5224\u65b7\u8a0a\u606f\u5c6c\u65bc\u54ea\u500b chatroom\uff0c\u4e26\u5ee3\u64ad\u7d66\u5c0d\u61c9\u7684\u8a02\u95b1\u8005</li> <li>\u932f\u8aa4\u8655\u7406: \u8655\u7406\u89e3\u6790\u932f\u8aa4\u548c\u9023\u7dda\u932f\u8aa4</li> <li>Mapping: DTO \u2192 Domain Model \u7684\u8f49\u63db\u5728 <code>LiveChatRepository</code> \u5c64\u5b8c\u6210\uff08\u7b26\u5408 Clean Architecture\uff09</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03_websocket_design/#4","title":"4. \u4e26\u767c\u5b89\u5168","text":"<ul> <li>Actor \u9694\u96e2: \u4f7f\u7528 <code>actor</code> \u78ba\u4fdd\u7dda\u7a0b\u5b89\u5168</li> <li>Delegate \u8655\u7406: \u4f7f\u7528 <code>nonisolated</code> + <code>Task</code> \u8655\u7406 delegate \u56de\u8abf</li> <li>\u9396\u6a5f\u5236: \u5728 <code>ChatroomSubscription</code> \u4e2d\u4f7f\u7528 <code>NSLock</code> \u4fdd\u8b77\u5171\u4eab\u72c0\u614b</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03_websocket_design/#_6","title":"\ud83d\udcdd \u5be6\u4f5c\u6b65\u9a5f","text":"<ol> <li>\u5efa\u7acb\u57fa\u672c\u7d50\u69cb</li> <li>\u5b9a\u7fa9 <code>ChatWebSocketClient</code> actor</li> <li>\u5b9a\u7fa9 <code>ConnectionState</code> enum</li> <li> <p>\u5b9a\u7fa9 <code>ChatroomSubscription</code> class</p> </li> <li> <p>\u5be6\u4f5c\u9023\u7dda\u7ba1\u7406</p> </li> <li>\u5be6\u4f5c <code>connect()</code> \u65b9\u6cd5</li> <li>\u5be6\u4f5c <code>disconnect()</code> \u65b9\u6cd5</li> <li> <p>\u5be6\u4f5c <code>SwiftStompDelegate</code> \u65b9\u6cd5</p> </li> <li> <p>\u5be6\u4f5c\u8a02\u95b1\u7ba1\u7406</p> </li> <li>\u5be6\u4f5c <code>subscribe()</code> \u65b9\u6cd5</li> <li>\u5be6\u4f5c <code>unsubscribe()</code> \u65b9\u6cd5</li> <li> <p>\u5be6\u4f5c\u5ee3\u64ad\u6a5f\u5236</p> </li> <li> <p>\u5be6\u4f5c\u8a0a\u606f\u767c\u9001</p> </li> <li> <p>\u5be6\u4f5c <code>sendMessage()</code> \u65b9\u6cd5</p> </li> <li> <p>\u5be6\u4f5c\u91cd\u9023\u6a5f\u5236</p> </li> <li> <p>\u5be6\u4f5c\u6307\u6578\u9000\u907f\u91cd\u9023\u7b56\u7565</p> </li> <li> <p>\u6e2c\u8a66\u8207\u9a57\u8b49</p> </li> <li>\u55ae\u5143\u6e2c\u8a66</li> <li>\u6574\u5408\u6e2c\u8a66</li> </ol>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03_websocket_design/#_7","title":"\ud83d\udd17 \u76f8\u95dc\u6587\u4ef6","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03_websocket_design/#tdd","title":"TDD \u67b6\u69cb\u6587\u4ef6","text":"<ul> <li>00_Overview: \u529f\u80fd\u6982\u8ff0</li> <li>02_Architecture: Clean Architecture \u67b6\u69cb\u5716</li> <li>03_Module Responsibility: \u6a21\u7d44\u8077\u8cac</li> <li>04_Domain Model: Domain Model \u5b9a\u7fa9</li> <li>05_Module Sequence Diagram: \u6a21\u7d44\u5e8f\u5217\u5716</li> <li>06_Feature State &amp; Action: TCA State/Action</li> <li>08_API Spec &amp; Mapping: API \u898f\u683c</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03_websocket_design/#tdd-ticket","title":"TDD Ticket","text":"<ul> <li>TDD-022: ChatWebSocketClient</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03_websocket_design/#_8","title":"\u53c3\u8003\u5be6\u4f5c","text":"<ul> <li>WebSocketStompManager \u53c3\u8003\u5be6\u4f5c</li> <li>EventDetail.WebSocketFeature</li> <li>EventOddsWebSocketManager</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-03_websocket_design/#api","title":"\u5be6\u969b API \u5be6\u4f5c","text":"<ul> <li>ChatAPI.WebSocketEndpoint</li> <li>ChatAPI.WebSocketMessageDTO</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-04/","title":"\u5de5\u4f5c\u8a08\u5283 - 2025-12-04","text":"<p>\u751f\u6210\u6642\u9593: 2025-12-04 10:31:42</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-04/#_1","title":"\ud83d\udccb \u4eca\u65e5\u76ee\u6a19","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-04/#parent-tickets","title":"Parent Tickets\uff08\u4e3b\u8981\u5de5\u4f5c\u9805\u76ee\uff09","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-04/#tdd-030-prematchcommentrepository-football-9185","title":"TDD-030 \u2014 \u5be6\u4f5c PrematchCommentRepository [FOOTBALL-9185]","text":"<p>Jira: FOOTBALL-9185</p> <p>\u4f30\u6642: \u6a19\u6e96\uff1a2 \u5929 / \u6700\u56b4\u53b2\uff1a1 \u5929</p> <p>\u72c0\u614b: \u5f85\u958b\u59cb</p> <p>\u6642\u9593\u7bc4\u570d: 2025-12-04 ~ 2025-12-08</p> <p>\u4f9d\u8cf4: TDD-001, TDD-002, TDD-006, TDD-020 \u2705 \u5df2\u5b8c\u6210</p> <p>Story Point: 5</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-04/#tdd-020-prematchcommentclient-football-9181","title":"TDD-020 \u2014 \u5be6\u4f5c PrematchCommentClient [FOOTBALL-9181] \u26a0\ufe0f \u9032\u884c\u4e2d","text":"<p>Jira: FOOTBALL-9181</p> <p>\u4f30\u6642: \u6a19\u6e96\uff1a2 \u5929 / \u6700\u56b4\u53b2\uff1a1 \u5929</p> <p>\u72c0\u614b: \u9032\u884c\u4e2d\uff08\u5df2\u5be6\u4f5c\uff0c\u9700\u9a57\u6536\uff09</p> <p>\u6642\u9593\u7bc4\u570d: 2025-12-02 ~ 2025-12-04</p> <p>Story Point: 5</p> <p>\u5099\u8a3b: \u5df2\u5be6\u4f5c <code>PrematchCommentClient.swift</code>\uff0c\u9700\u8981\u6aa2\u67e5\u662f\u5426\u7b26\u5408 TDD \u898f\u7bc4\u4e26\u5b8c\u6210\u9a57\u6536</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-04/#tdd-022-chatwebsocketclient-football-9183","title":"TDD-022 \u2014 \u5be6\u4f5c ChatWebSocketClient [FOOTBALL-9183] \u26a0\ufe0f \u9032\u884c\u4e2d","text":"<p>Jira: FOOTBALL-9183</p> <p>\u4f30\u6642: \u6a19\u6e96\uff1a5 \u5929 / \u6700\u56b4\u53b2\uff1a3 \u5929</p> <p>\u72c0\u614b: \u9032\u884c\u4e2d\uff08\u5df2\u5be6\u4f5c\uff0c\u9700\u9a57\u6536\uff09</p> <p>\u6642\u9593\u7bc4\u570d: 2025-12-03 ~ 2025-12-10</p> <p>Story Point: 13</p> <p>\u5099\u8a3b: \u5df2\u5be6\u4f5c <code>ChatWebSocketClient.swift</code>\uff0c\u9700\u8981\u6aa2\u67e5\u662f\u5426\u7b26\u5408 TDD \u898f\u7bc4\u4e26\u5b8c\u6210\u9a57\u6536</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-04/#tdd-031-livechatrepository-football-9186","title":"TDD-031 \u2014 \u5be6\u4f5c LiveChatRepository [FOOTBALL-9186] \ud83c\udd95 \u63d0\u524d\u958b\u59cb","text":"<p>Jira: FOOTBALL-9186</p> <p>\u4f30\u6642: \u6a19\u6e96\uff1a3 \u5929 / \u6700\u56b4\u53b2\uff1a2 \u5929</p> <p>\u72c0\u614b: \u5f85\u958b\u59cb\uff08\u539f\u8a02 2025-12-05 \u958b\u59cb\uff0c\u63d0\u524d\u5230\u4eca\u5929\uff09</p> <p>\u6642\u9593\u7bc4\u570d: 2025-12-04 ~ 2025-12-10\uff08\u539f\u8a02 2025-12-05 ~ 2025-12-10\uff09</p> <p>\u4f9d\u8cf4: TDD-004, TDD-005, TDD-021, TDD-022 \u2705 \u5df2\u5b8c\u6210</p> <p>Story Point: 8</p> <p>\u5099\u8a3b: \u539f\u8a02\u660e\u5929\uff082025-12-05\uff09\u958b\u59cb\uff0c\u63d0\u524d\u5230\u4eca\u5929\u958b\u59cb\u5be6\u4f5c</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-04/#cursor","title":"\ud83e\udd16 \u8207 Cursor \u7684\u5354\u4f5c\u8a08\u5283","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-04/#_2","title":"\u958b\u59cb\u5be6\u4f5c\u524d","text":"<p>\u8acb Cursor \u5354\u52a9\uff1a 1. \u8b80\u53d6\u76f8\u95dc\u7684 TDD \u6587\u4ef6 2. \u6aa2\u67e5\u73fe\u6709\u7684 codebase \u7d50\u69cb 3. \u63d0\u4f9b\u5be6\u4f5c\u5efa\u8b70\u548c\u6ce8\u610f\u4e8b\u9805 4. \u6aa2\u67e5\u4f9d\u8cf4\u95dc\u4fc2\u662f\u5426\u6eff\u8db3</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-04/#_3","title":"\u5be6\u4f5c\u904e\u7a0b\u4e2d","text":"<ul> <li>\u96a8\u6642\u8207 Cursor \u8a0e\u8ad6\u5be6\u4f5c\u7d30\u7bc0</li> <li>\u8a18\u9304\u91cd\u8981\u7684\u6c7a\u7b56\u548c\u5c0d\u8a71</li> <li>\u9047\u5230\u554f\u984c\u6642\u8acb Cursor \u5354\u52a9\u89e3\u6c7a</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-04/#_4","title":"\u5be6\u4f5c\u5b8c\u6210\u5f8c","text":"<p>\u8acb Cursor \u5354\u52a9\uff1a 1. \u6aa2\u67e5\u5be6\u4f5c\u662f\u5426\u7b26\u5408 TDD \u898f\u7bc4 2. \u6aa2\u67e5\u662f\u5426\u6709\u907a\u6f0f\u7684\u529f\u80fd 3. \u63d0\u4f9b\u6539\u9032\u5efa\u8b70 4. \u66f4\u65b0\u76f8\u95dc\u6587\u4ef6</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-04/#_5","title":"\ud83d\udcdd \u5de5\u4f5c\u8a18\u9304","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-04/#cursor_1","title":"\u8207 Cursor \u7684\u91cd\u8981\u5c0d\u8a71","text":"<p>\uff08\u5728\u6b64\u8a18\u9304\u8207 Cursor \u7684\u91cd\u8981\u5c0d\u8a71\u548c\u6c7a\u7b56\uff09</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-04/#_6","title":"\u5be6\u4f5c\u9032\u5ea6","text":"<p>\uff08\u5728\u6b64\u8a18\u9304\u5be6\u4f5c\u9032\u5ea6\uff09</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-04/#_7","title":"\u9047\u5230\u7684\u554f\u984c","text":"<p>\uff08\u5728\u6b64\u8a18\u9304\u9047\u5230\u7684\u554f\u984c\u548c\u89e3\u6c7a\u65b9\u6848\uff09</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-08/","title":"\u5de5\u4f5c\u8a08\u5283 - 2025-12-08","text":"<p>\u751f\u6210\u6642\u9593: 2025-12-09 23:35:07</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-08/#_1","title":"\ud83d\udccb \u4eca\u65e5\u76ee\u6a19","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-08/#parent-tickets","title":"Parent Tickets\uff08\u4e3b\u8981\u5de5\u4f5c\u9805\u76ee\uff09","text":"<ul> <li>[ ] TDD-030: FOOTBALL-9185</li> <li> <p>\u6642\u9593\u7bc4\u570d: 2025-12-04 ~ 2025-12-08</p> </li> <li> <p>[ ] TDD-022: FOOTBALL-9183</p> </li> <li> <p>\u6642\u9593\u7bc4\u570d: 2025-12-03 ~ 2025-12-10</p> </li> <li> <p>[ ] TDD-031: FOOTBALL-9186</p> </li> <li> <p>\u6642\u9593\u7bc4\u570d: 2025-12-05 ~ 2025-12-10</p> </li> <li> <p>[ ] TDD-040: FOOTBALL-9188</p> </li> <li>\u6642\u9593\u7bc4\u570d: 2025-12-08 ~ 2025-12-10</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-08/#cursor","title":"\ud83e\udd16 \u8207 Cursor \u7684\u5354\u4f5c\u8a08\u5283","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-08/#_2","title":"\u958b\u59cb\u5be6\u4f5c\u524d","text":"<p>\u8acb Cursor \u5354\u52a9\uff1a 1. \u8b80\u53d6\u76f8\u95dc\u7684 TDD \u6587\u4ef6 2. \u6aa2\u67e5\u73fe\u6709\u7684 codebase \u7d50\u69cb 3. \u63d0\u4f9b\u5be6\u4f5c\u5efa\u8b70\u548c\u6ce8\u610f\u4e8b\u9805 4. \u6aa2\u67e5\u4f9d\u8cf4\u95dc\u4fc2\u662f\u5426\u6eff\u8db3</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-08/#_3","title":"\u5be6\u4f5c\u904e\u7a0b\u4e2d","text":"<ul> <li>\u96a8\u6642\u8207 Cursor \u8a0e\u8ad6\u5be6\u4f5c\u7d30\u7bc0</li> <li>\u8a18\u9304\u91cd\u8981\u7684\u6c7a\u7b56\u548c\u5c0d\u8a71</li> <li>\u9047\u5230\u554f\u984c\u6642\u8acb Cursor \u5354\u52a9\u89e3\u6c7a</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-08/#_4","title":"\u5be6\u4f5c\u5b8c\u6210\u5f8c","text":"<p>\u8acb Cursor \u5354\u52a9\uff1a 1. \u6aa2\u67e5\u5be6\u4f5c\u662f\u5426\u7b26\u5408 TDD \u898f\u7bc4 2. \u6aa2\u67e5\u662f\u5426\u6709\u907a\u6f0f\u7684\u529f\u80fd 3. \u63d0\u4f9b\u6539\u9032\u5efa\u8b70 4. \u66f4\u65b0\u76f8\u95dc\u6587\u4ef6</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-08/#_5","title":"\ud83d\udcdd \u5de5\u4f5c\u8a18\u9304","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-08/#cursor_1","title":"\u8207 Cursor \u7684\u91cd\u8981\u5c0d\u8a71","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-08/#matchchat-integration-tests","title":"\u4e3b\u984c\uff1aMatchChat Integration Tests \u8a2d\u8a08\u8207\u5be6\u4f5c","text":"<p>\u5c0d\u8a71\u6642\u9593: 2025-12-08</p> <p>\u91cd\u8981\u6c7a\u7b56:</p> <ol> <li>\u6e2c\u8a66\u7b56\u7565\u9078\u64c7 - \u65b9\u6848 A + \u90e8\u5206\u65b9\u6848 B</li> <li>\u4f7f\u7528 <code>.test</code> \u74b0\u5883\uff08\u81ea\u52d5\u6307\u5411 <code>https://www.encorebet.net</code>\uff09</li> <li>\u6e2c\u8a66\u5e33\u865f\u8cc7\u8a0a\u914d\u7f6e\u5728 scheme \u74b0\u5883\u8b8a\u6578\u4e2d</li> <li> <p>\u4e0d\u9700\u8981\u81ea\u5b9a\u7fa9 <code>TEST_SERVER_URL</code>\uff0c\u76f4\u63a5\u4f7f\u7528 <code>ServerEnvironment.test</code></p> </li> <li> <p>\u6e2c\u8a66\u5c64\u7d1a\u6c7a\u7b56</p> </li> <li>\u4e3b\u8981\u6e2c\u8a66 API Layer (<code>ChatAPI.ChatRepository</code>, <code>PrematchCommentAPI.PrematchCommentRepository</code>)</li> <li>\u539f\u56e0\uff1a\u76f4\u63a5\u9a57\u8b49 API contract\uff0c\u5feb\u901f\u5b9a\u4f4d\u554f\u984c\uff0cROI \u6700\u9ad8</li> <li> <p>Repository Layer \u7684 Domain Model \u8f49\u63db\u66f4\u9069\u5408 unit test</p> </li> <li> <p>Scheme \u914d\u7f6e</p> </li> <li>\u5275\u5efa\u7368\u7acb\u7684 <code>MatchChatIntegrationTests.xcscheme</code></li> <li>\u53c3\u8003\u73fe\u6709\u7684 UI test schemes\uff08<code>SportyBetUITests</code>, <code>SportyBetUIPerformanceTests</code>\uff09</li> <li> <p>\u74b0\u5883\u8b8a\u6578\u914d\u7f6e\uff1a</p> <ul> <li><code>INTEGRATION_TEST_USERNAME=262001001</code></li> <li><code>INTEGRATION_TEST_PASSWORD=Test1234gh</code></li> <li><code>INTEGRATION_TEST_COUNTRY_CODE=gh</code></li> </ul> </li> <li> <p>\u8a8d\u8b49\u5be6\u4f5c</p> </li> <li>\u5275\u5efa <code>AuthenticationTestHelper</code>\uff08\u7528 NetworkService \u6539\u5beb <code>SportyAPI+getAccessToken</code>\uff09</li> <li>\u53ea\u653e\u5728 test target\uff0c\u4e0d\u6c61\u67d3 production code</li> <li> <p>\u5275\u5efa\u8f15\u91cf\u7d1a <code>TestCredentials</code> \u7d50\u69cb\uff0c\u907f\u514d\u4f9d\u8cf4\u6574\u500b <code>SportyAccount</code> module</p> </li> <li> <p>Package \u4f9d\u8cf4\u914d\u7f6e</p> </li> <li>\u6dfb\u52a0 <code>Crypto</code> package\uff08\u7368\u7acb package\uff0c\u7528\u65bc MD5 hashing\uff09</li> <li><code>MatchChatIntegrationTests</code> target \u4f9d\u8cf4\uff1a<ul> <li><code>NetworkService</code></li> <li><code>Crypto</code></li> <li><code>Models</code></li> <li><code>SportyFoundation</code></li> <li><code>SportyAccount</code> \u53ca\u76f8\u95dc test helpers</li> </ul> </li> </ol> <p>\u5b78\u7fd2\u8981\u9ede:</p> <ol> <li>Integration Tests \u6700\u4f73\u5be6\u8e10</li> <li>\u512a\u5148\u6e2c\u8a66 API Layer\uff0c\u9a57\u8b49 API contract</li> <li>\u4f7f\u7528 <code>.test</code> \u74b0\u5883\u800c\u975e\u81ea\u5b9a\u7fa9\u74b0\u5883\u8b8a\u6578</li> <li>\u7368\u7acb scheme \u914d\u7f6e\uff0c\u907f\u514d\u5728 CI \u4e2d\u57f7\u884c</li> <li> <p>\u5b8c\u5584\u7684\u6587\u6a94\uff08\u57f7\u884c\u6307\u5357\u3001\u6e2c\u8a66\u8cc7\u6599\u914d\u7f6e\uff09</p> </li> <li> <p>Swift Package \u4f9d\u8cf4\u7ba1\u7406</p> </li> <li><code>Crypto</code> \u662f\u7368\u7acb package\uff0c\u4e0d\u662f <code>Networking</code> \u7684 product</li> <li>Test target \u9700\u8981\u660e\u78ba\u8072\u660e\u6240\u6709\u4f9d\u8cf4</li> <li> <p>\u4f7f\u7528 <code>.product()</code> \u5f15\u7528\u5176\u4ed6 package \u7684 products</p> </li> <li> <p>\u6e2c\u8a66\u8cc7\u6599\u7ba1\u7406</p> </li> <li>\u9700\u8981\u771f\u5be6\u7684\u6e2c\u8a66\u8cc7\u6599\uff08refId, chatroomId\uff09</li> <li>\u5efa\u8b70\u5b9a\u671f\u66f4\u65b0\u6e2c\u8a66\u8cc7\u6599</li> <li> <p>\u63d0\u4f9b\u5b8c\u6574\u7684\u6e2c\u8a66\u8cc7\u6599\u53d6\u5f97\u6307\u5357</p> </li> <li> <p>Token Caching \u512a\u5316\uff08\u7528\u6236\u5f8c\u7e8c\u6539\u9032\uff09</p> </li> <li>\u5be6\u4f5c <code>IntegrationTestTokenCache</code> \u907f\u514d\u91cd\u8907\u547c\u53eb\u8a8d\u8b49 API</li> <li>Token \u6709\u6548\u671f\u8a2d\u70ba 8 \u5c0f\u6642</li> <li>\u986f\u8457\u63d0\u5347\u6e2c\u8a66\u57f7\u884c\u901f\u5ea6</li> </ol> <p>\u6539\u9032\u5efa\u8b70:</p> <ol> <li>\u6e2c\u8a66\u8cc7\u6599\u7ba1\u7406</li> <li>\u8003\u616e\u5efa\u7acb\u5c08\u7528\u7684\u6e2c\u8a66\u8cc7\u6599\u914d\u7f6e\u6a94</li> <li>\u8207 QA/Backend team \u5354\u8abf\u56fa\u5b9a\u7684\u6e2c\u8a66\u6bd4\u8cfd ID</li> <li> <p>\u5b9a\u671f\u6aa2\u67e5\u6e2c\u8a66\u8cc7\u6599\u6709\u6548\u6027</p> </li> <li> <p>\u932f\u8aa4\u8655\u7406</p> </li> <li>\u70ba\u7279\u5b9a\u7684\u932f\u8aa4\u60c5\u6cc1\u63d0\u4f9b\u66f4\u53cb\u5584\u7684\u63d0\u793a</li> <li> <p>\u5340\u5206\u6e2c\u8a66\u8cc7\u6599\u554f\u984c vs API \u5be6\u4f5c\u554f\u984c</p> </li> <li> <p>\u672a\u4f86\u6539\u9032\u65b9\u5411</p> </li> <li>\u8003\u616e\u5be6\u4f5c Repository Layer \u7684 End-to-End tests</li> <li>\u8003\u616e\u6dfb\u52a0 WebSocket \u7684 integration tests</li> <li>\u8a55\u4f30\u662f\u5426\u9700\u8981 VCR/Cassette pattern</li> </ol>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-08/#_6","title":"\u5be6\u4f5c\u9032\u5ea6","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-08/#_7","title":"\u2705 \u5df2\u5b8c\u6210","text":"<ol> <li>Scheme \u914d\u7f6e</li> <li>[x] \u5275\u5efa <code>MatchChatIntegrationTests.xcscheme</code></li> <li> <p>[x] \u914d\u7f6e\u74b0\u5883\u8b8a\u6578\uff08\u6e2c\u8a66\u5e33\u865f\u8cc7\u8a0a\uff09</p> </li> <li> <p>Test Helpers</p> </li> <li>[x] <code>AuthenticationTestHelper</code> - \u8a8d\u8b49 helper</li> <li>[x] <code>IntegrationTestSetup</code> - \u74b0\u5883\u8a2d\u5b9a helper</li> <li>[x] <code>IntegrationTestTokenCache</code> - Token \u7de9\u5b58\uff08\u7528\u6236\u5be6\u4f5c\uff09</li> <li> <p>[x] <code>ChatroomManager</code> - Chatroom ID \u7de9\u5b58\uff08\u7528\u6236\u5be6\u4f5c\uff09</p> </li> <li> <p>Integration Tests</p> </li> <li>[x] <code>ChatAPIIntegrationTests</code> - 7 \u500b endpoints<ul> <li>[x] getBatchCount</li> <li>[x] getChatroomInfo</li> <li>[x] getHistoricalMessages</li> <li>[x] sendMessage</li> <li>[x] joinChatroom</li> <li>[x] leaveChatroom</li> <li>[x] bulkLeaveChatroom</li> </ul> </li> <li> <p>[x] <code>PrematchCommentAPIIntegrationTests</code> - 7 \u500b endpoints</p> <ul> <li>[x] getBatchCommentInfo</li> <li>[x] getCommentMeta</li> <li>[x] getCommentsByPopular</li> <li>[x] getCommentsByNewest</li> <li>[x] getReplies</li> <li>[x] publishComment</li> <li>[x] toggleLike</li> </ul> </li> <li> <p>\u6587\u6a94</p> </li> <li>[x] <code>README.md</code> - \u5b8c\u6574\u7684\u57f7\u884c\u6307\u5357</li> <li> <p>[x] <code>TEST_DATA.md</code> - \u6e2c\u8a66\u8cc7\u6599\u914d\u7f6e\u6307\u5357</p> </li> <li> <p>\u4f9d\u8cf4\u4fee\u6b63</p> </li> <li>[x] \u4fee\u6b63 <code>Package.swift</code> \u4f9d\u8cf4\u914d\u7f6e</li> <li>[x] \u4fee\u6b63 import statements</li> <li>[x] \u79fb\u9664\u4e0d\u5fc5\u8981\u7684\u4f9d\u8cf4</li> </ol>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-08/#_8","title":"\ud83d\udd04 \u7528\u6236\u5f8c\u7e8c\u6539\u9032","text":"<ol> <li>\u512a\u5316\u5be6\u4f5c</li> <li>[x] \u6dfb\u52a0 Token \u7de9\u5b58\u6a5f\u5236\uff088 \u5c0f\u6642\u6709\u6548\u671f\uff09</li> <li>[x] \u6dfb\u52a0 Chatroom ID \u7de9\u5b58</li> <li>[x] \u6539\u9032\u6e2c\u8a66\u65e5\u8a8c\u8f38\u51fa</li> <li> <p>[x] \u6dfb\u52a0\u66f4\u8a73\u7d30\u7684\u932f\u8aa4\u8655\u7406</p> </li> <li> <p>\u6e2c\u8a66\u8cc7\u6599\u66f4\u65b0</p> </li> <li>[x] \u66f4\u65b0\u70ba\u771f\u5be6\u7684\u6e2c\u8a66\u8cc7\u6599\uff08refId\uff09</li> <li> <p>[x] \u6dfb\u52a0\u8de8\u570b\u5bb6\u56de\u8986\u6e2c\u8a66\uff08\u9810\u671f\u5931\u6557\uff09</p> </li> <li> <p>Package \u4f9d\u8cf4\u512a\u5316</p> </li> <li>[x] \u79fb\u9664\u4e0d\u5fc5\u8981\u7684\u4f9d\u8cf4\uff08UI components, Event tracking \u7b49\uff09</li> <li>[x] \u6dfb\u52a0\u5fc5\u8981\u7684 test helpers</li> </ol>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-08/#_9","title":"\u9047\u5230\u7684\u554f\u984c","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-08/#1-no-such-module-matchchat","title":"\u554f\u984c 1: <code>No such module 'MatchChat'</code> \u932f\u8aa4","text":"<p>\u554f\u984c\u63cf\u8ff0: Integration test target \u7121\u6cd5\u627e\u5230 <code>MatchChat</code>, <code>Models</code> \u7b49 modules</p> <p>\u539f\u56e0:  - Test target \u7f3a\u5c11\u5fc5\u8981\u7684 package dependencies - <code>Crypto</code> \u88ab\u8aa4\u8a8d\u70ba\u662f <code>Networking</code> \u7684 product\uff08\u5be6\u969b\u4e0a\u662f\u7368\u7acb package\uff09 - Import \u4e86\u4e0d\u9700\u8981\u7684 modules\uff08\u5982 <code>SportyAccount</code>, <code>NetworkServiceTestHelpers</code>\uff09</p> <p>\u89e3\u6c7a\u65b9\u6848: 1. \u5728 <code>Package.swift</code> \u4e2d\u6dfb\u52a0 <code>Crypto</code> package dependency 2. \u5728 <code>MatchChatIntegrationTests</code> target \u4e2d\u660e\u78ba\u8072\u660e\u6240\u6709\u4f9d\u8cf4 3. \u79fb\u9664\u4e0d\u6b63\u78ba\u7684 import statements 4. \u5275\u5efa\u8f15\u91cf\u7d1a\u7684 <code>TestCredentials</code> \u7d50\u69cb</p> <p>\u76f8\u95dc commit/changes: - \u66f4\u65b0 <code>Package.swift</code> \u4f9d\u8cf4\u914d\u7f6e - \u4fee\u6b63\u6240\u6709\u6e2c\u8a66\u6587\u4ef6\u7684 imports - \u5275\u5efa <code>TestCredentials</code> \u66ff\u4ee3 <code>SportyAccount.Credentials</code></p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-08/#2","title":"\u554f\u984c 2: \u6e2c\u8a66\u8cc7\u6599\u6709\u6548\u6027","text":"<p>\u554f\u984c\u63cf\u8ff0: \u521d\u59cb\u6e2c\u8a66\u8cc7\u6599\u70ba placeholder\uff0c\u9700\u8981\u771f\u5be6\u7684 match refId</p> <p>\u89e3\u6c7a\u65b9\u6848: 1. \u63d0\u4f9b\u5b8c\u6574\u7684\u6e2c\u8a66\u8cc7\u6599\u53d6\u5f97\u6307\u5357\uff08<code>TEST_DATA.md</code>\uff09 2. \u7528\u6236\u66f4\u65b0\u70ba\u771f\u5be6\u7684\u6e2c\u8a66\u8cc7\u6599 3. \u5efa\u8b70\u5b9a\u671f\u66f4\u65b0\u6e2c\u8a66\u8cc7\u6599</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-08/#3","title":"\u554f\u984c 3: \u6e2c\u8a66\u57f7\u884c\u6548\u7387","text":"<p>\u554f\u984c\u63cf\u8ff0: \u6bcf\u6b21\u6e2c\u8a66\u90fd\u91cd\u65b0\u547c\u53eb\u8a8d\u8b49 API\uff0c\u901f\u5ea6\u6162</p> <p>\u89e3\u6c7a\u65b9\u6848\uff08\u7528\u6236\u5be6\u4f5c\uff09: 1. \u5be6\u4f5c <code>IntegrationTestTokenCache</code> \u7de9\u5b58 access token 2. Token \u6709\u6548\u671f\u8a2d\u70ba 8 \u5c0f\u6642 3. \u5be6\u4f5c <code>ChatroomManager</code> \u7de9\u5b58 refId \u2192 chatroomId \u6620\u5c04</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-08/#_10","title":"\u5f85\u8fa6\u4e8b\u9805","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-08/#_11","title":"\u77ed\u671f\uff08\u672c\u9031\uff09","text":"<ul> <li>[ ] \u57f7\u884c\u5b8c\u6574\u7684 integration tests \u9a57\u8b49\u6240\u6709 API</li> <li>[ ] \u6839\u64da\u6e2c\u8a66\u7d50\u679c\u66f4\u65b0\u6e2c\u8a66\u8cc7\u6599</li> <li>[ ] \u8a18\u9304\u6e2c\u8a66\u57f7\u884c\u7d50\u679c\u548c\u767c\u73fe\u7684\u554f\u984c</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-08/#_12","title":"\u4e2d\u671f\uff08\u4e0b\u9031\uff09","text":"<ul> <li>[ ] \u8207 Backend team \u78ba\u8a8d\u6e2c\u8a66\u74b0\u5883\u548c\u6e2c\u8a66\u8cc7\u6599</li> <li>[ ] \u8a55\u4f30\u662f\u5426\u9700\u8981\u6dfb\u52a0\u66f4\u591a\u908a\u754c\u60c5\u6cc1\u6e2c\u8a66</li> <li>[ ] \u8003\u616e\u6dfb\u52a0 WebSocket integration tests</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-08/#_13","title":"\u9577\u671f","text":"<ul> <li>[ ] \u5efa\u7acb\u5b9a\u671f\u57f7\u884c integration tests \u7684\u6d41\u7a0b</li> <li>[ ] \u8a55\u4f30\u662f\u5426\u9700\u8981 Repository Layer \u7684 E2E tests</li> <li>[ ] \u8003\u616e\u5be6\u4f5c VCR/Cassette pattern \u63d0\u5347\u6e2c\u8a66\u7a69\u5b9a\u6027</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-08/#_14","title":"\u7e3d\u7d50","text":"<p>\u4eca\u5929\u6210\u529f\u5b8c\u6210\u4e86 MatchChat Integration Tests \u7684\u5b8c\u6574\u8a2d\u8a08\u548c\u5be6\u4f5c\uff0c\u5305\u542b\uff1a - \u6e2c\u8a66\u7b56\u7565\u8a2d\u8a08\uff08\u65b9\u6848 A + \u90e8\u5206\u65b9\u6848 B\uff09 - \u5b8c\u6574\u7684 test infrastructure\uff08helpers, setup, caching\uff09 - 14 \u500b endpoint \u7684 integration tests - \u5b8c\u5584\u7684\u6587\u6a94\u548c\u6e2c\u8a66\u8cc7\u6599\u6307\u5357</p> <p>\u7528\u6236\u5728\u521d\u59cb\u5be6\u4f5c\u57fa\u790e\u4e0a\u9032\u884c\u4e86\u591a\u9805\u512a\u5316\uff0c\u5305\u62ec token caching\u3001chatroom ID caching\u3001\u6539\u9032\u7684\u932f\u8aa4\u8655\u7406\u7b49\uff0c\u986f\u8457\u63d0\u5347\u4e86\u6e2c\u8a66\u7684\u53ef\u7dad\u8b77\u6027\u548c\u57f7\u884c\u6548\u7387\u3002</p> <p>\u4e0b\u4e00\u6b65\u91cd\u9ede\u662f\u57f7\u884c\u6e2c\u8a66\u4e26\u6839\u64da\u5be6\u969b\u7d50\u679c\u9032\u884c\u8abf\u6574\u548c\u512a\u5316\u3002</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/","title":"\u5de5\u4f5c\u8a08\u5283 - 2025-12-09","text":"<p>\u751f\u6210\u6642\u9593: 2025-12-09 23:36:14</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#_1","title":"\ud83d\udccb \u4eca\u65e5\u76ee\u6a19","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#tdd","title":"\u4e3b\u8981\u4efb\u52d9\uff1aTDD \u4e00\u81f4\u6027\u6aa2\u67e5\u8207\u6587\u6a94\u66f4\u65b0","text":"<p>\u6839\u64da\u5be6\u969b\u5be6\u4f5c\u60c5\u6cc1\uff0c\u4eca\u65e5\u91cd\u9ede\u70ba\u78ba\u4fdd TDD \u6587\u6a94\u8207\u5be6\u4f5c\u4e00\u81f4\uff0c\u4e26\u8a18\u9304\u8a2d\u8a08\u6539\u9032\u3002</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#_2","title":"\u2705 \u5df2\u5b8c\u6210","text":"<ul> <li>[x] \u57f7\u884c TDD \u4e00\u81f4\u6027\u6aa2\u67e5</li> <li>\u6aa2\u67e5\u7bc4\u570d\uff1aAPI Layer, Client Layer, Repository Layer</li> <li>\u751f\u6210\u5831\u544a\uff1a<code>13_Implementation_Status/tdd_consistency_check_2025-12-09.md</code></li> <li> <p>\u5b8c\u6210\u5ea6\u8a55\u4f30\uff1a\u6574\u9ad4 ~53%\uff08API/Client/Repository \u5df2\u5b8c\u6210\uff09</p> </li> <li> <p>[x] \u66f4\u65b0 TDD \u6587\u6a94\u4ee5\u53cd\u6620\u5be6\u4f5c\u6539\u9032</p> </li> <li>\u66f4\u65b0 TDD-010 (PrematchCommentAPI)\uff1aResponse \u683c\u5f0f\u3001\u65b9\u6cd5\u62c6\u5206</li> <li>\u66f4\u65b0 TDD-011 (ChatAPI)\uff1aHTTP Method \u4fee\u6b63\u3001Null Response \u8655\u7406</li> <li>\u66f4\u65b0 TDD-031 (LiveChatRepository)\uff1a\u5169\u5c64\u67b6\u69cb\u8aaa\u660e</li> <li>\u751f\u6210\u66f4\u65b0\u8a18\u9304\uff1a<code>13_Implementation_Status/tdd_updates_2025-12-09.md</code></li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#_3","title":"\u26a0\ufe0f \u5f85\u8655\u7406\uff08\u660e\u65e5\u512a\u5148\uff09","text":"<ul> <li>[ ] \u958b\u59cb\u5be6\u4f5c TDD-040: ReloadCommentListUseCase</li> <li>Due: 2025-12-10</li> <li>\u4f9d\u8cf4\uff1aPrematchCommentRepository\uff08\u2705 \u5df2\u5b8c\u6210\uff09</li> <li> <p>\u9810\u4f30\u6642\u9593\uff1a2 \u5929</p> </li> <li> <p>[ ] \u5b9a\u7fa9 Adapter Protocols</p> </li> <li>PersonalPageAdapter\uff08\u767b\u5165\u6aa2\u67e5\u3001nickname \u6aa2\u67e5\uff09</li> <li>FComSharedFlowAdapter\uff08nickname \u5efa\u7acb\uff09</li> <li>\u9810\u4f30\u6642\u9593\uff1a0.5 \u5929</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#parent-tickets","title":"\ud83d\udcca \u5f85\u8ddf\u9032\u7684 Parent Tickets","text":"<ul> <li>[ ] TDD-022: FOOTBALL-9183 (ChatWebSocketClient)</li> <li>\u72c0\u614b\uff1a\u2705 \u5df2\u5b8c\u6210\u5be6\u4f5c</li> <li>\u5f85\u88dc\uff1aUnit Tests, Integration Tests</li> <li> <p>\u6642\u9593\u7bc4\u570d: 2025-12-03 ~ 2025-12-10</p> </li> <li> <p>[ ] TDD-031: FOOTBALL-9186 (LiveChatRepository)</p> </li> <li>\u72c0\u614b\uff1a\u2705 \u5df2\u5b8c\u6210\u5be6\u4f5c</li> <li>\u5f85\u88dc\uff1aUnit Tests</li> <li> <p>\u6642\u9593\u7bc4\u570d: 2025-12-05 ~ 2025-12-10</p> </li> <li> <p>[ ] TDD-040: FOOTBALL-9188 (ReloadCommentListUseCase)</p> </li> <li>\u72c0\u614b\uff1a\u274c \u672a\u958b\u59cb</li> <li>\u963b\u585e\uff1a\u7121\uff08\u4f9d\u8cf4\u5df2\u5b8c\u6210\uff09</li> <li> <p>\u6642\u9593\u7bc4\u570d: 2025-12-08 ~ 2025-12-10</p> </li> <li> <p>[ ] TDD-041: FOOTBALL-9189 (PublishCommentUseCase)</p> </li> <li>\u72c0\u614b\uff1a\u274c \u672a\u958b\u59cb</li> <li>\u963b\u585e\uff1aAdapter Protocols \u672a\u5b9a\u7fa9</li> <li>\u6642\u9593\u7bc4\u570d: 2025-12-09 ~ 2025-12-16</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#cursor","title":"\ud83e\udd16 \u8207 Cursor \u7684\u5354\u4f5c\u8a08\u5283","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#_4","title":"\u958b\u59cb\u5be6\u4f5c\u524d","text":"<p>\u8acb Cursor \u5354\u52a9\uff1a 1. \u8b80\u53d6\u76f8\u95dc\u7684 TDD \u6587\u4ef6 2. \u6aa2\u67e5\u73fe\u6709\u7684 codebase \u7d50\u69cb 3. \u63d0\u4f9b\u5be6\u4f5c\u5efa\u8b70\u548c\u6ce8\u610f\u4e8b\u9805 4. \u6aa2\u67e5\u4f9d\u8cf4\u95dc\u4fc2\u662f\u5426\u6eff\u8db3</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#_5","title":"\u5be6\u4f5c\u904e\u7a0b\u4e2d","text":"<ul> <li>\u96a8\u6642\u8207 Cursor \u8a0e\u8ad6\u5be6\u4f5c\u7d30\u7bc0</li> <li>\u8a18\u9304\u91cd\u8981\u7684\u6c7a\u7b56\u548c\u5c0d\u8a71</li> <li>\u9047\u5230\u554f\u984c\u6642\u8acb Cursor \u5354\u52a9\u89e3\u6c7a</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#_6","title":"\u5be6\u4f5c\u5b8c\u6210\u5f8c","text":"<p>\u8acb Cursor \u5354\u52a9\uff1a 1. \u6aa2\u67e5\u5be6\u4f5c\u662f\u5426\u7b26\u5408 TDD \u898f\u7bc4 2. \u6aa2\u67e5\u662f\u5426\u6709\u907a\u6f0f\u7684\u529f\u80fd 3. \u63d0\u4f9b\u6539\u9032\u5efa\u8b70 4. \u66f4\u65b0\u76f8\u95dc\u6587\u4ef6</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#_7","title":"\ud83d\udcdd \u5de5\u4f5c\u8a18\u9304","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#cursor_1","title":"\u8207 Cursor \u7684\u91cd\u8981\u5c0d\u8a71","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#tdd_1","title":"\ud83d\udd0d TDD \u4e00\u81f4\u6027\u6aa2\u67e5","text":"<p>\u76ee\u6a19\uff1a\u78ba\u8a8d MatchChat \u5be6\u4f5c\u662f\u5426\u8207 TDD \u6587\u6a94\u4e00\u81f4</p> <p>\u57f7\u884c\u904e\u7a0b\uff1a 1. \u6aa2\u67e5 API Layer\uff08TDD-010, TDD-011\uff09 2. \u6aa2\u67e5 Client Layer\uff08TDD-022\uff09 3. \u6aa2\u67e5 Repository Layer\uff08TDD-031\uff09 4. \u8a55\u4f30 UseCase Layer \u72c0\u614b\uff08TDD-040, TDD-041\uff09</p> <p>\u4e3b\u8981\u767c\u73fe\uff1a - \u2705 API/Client/Repository \u5c64\u5df2\u5b8c\u6210\uff0c\u5b8c\u6210\u5ea6 ~53% - \u26a0\ufe0f UseCase \u5c64\u5b8c\u5168\u672a\u5be6\u4f5c\uff08\u963b\u585e Feature \u5c64\uff09 - \u26a0\ufe0f \u5be6\u4f5c\u4e2d\u6709\u591a\u8655\u512a\u65bc\u539f TDD \u8a2d\u8a08\u7684\u6539\u9032</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#_8","title":"\ud83d\udccb \u91cd\u8981\u6c7a\u7b56\u8a18\u9304","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#1-api-response","title":"1. API Response \u683c\u5f0f\u512a\u5316","text":"<p>\u6c7a\u7b56\uff1aAPI \u76f4\u63a5\u8fd4\u56de DTO/Array\uff0c\u79fb\u9664 <code>bizCode/data</code> \u5305\u88dd\u5c64</p> <p>\u539f\u56e0\uff1a - \u5be6\u969b API \u884c\u70ba\u8207\u898f\u5283\u4e0d\u540c - \u6e1b\u5c11\u4e0d\u5fc5\u8981\u7684\u5305\u88dd\u5c64 - \u7c21\u5316 Decoding \u908f\u8f2f</p> <p>\u5f71\u97ff\uff1a - \u79fb\u9664\u672a\u4f7f\u7528\u7684 Response Wrapper DTOs - \u66f4\u65b0 TDD-010 \u6587\u6a94</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#2-publishcomment","title":"2. <code>publishComment</code> \u65b9\u6cd5\u62c6\u5206","text":"<p>\u6c7a\u7b56\uff1a\u62c6\u5206\u70ba <code>publishComment</code>\uff08\u9802\u5c64\u8a55\u8ad6\uff09\u548c <code>publishReply</code>\uff08\u56de\u8986\uff09</p> <p>\u539f\u56e0\uff1a - \u660e\u78ba\u5340\u5206\u696d\u52d9\u908f\u8f2f - \u63d0\u9ad8\u985e\u578b\u5b89\u5168 - \u6e1b\u5c11\u53c3\u6578\u932f\u8aa4</p> <p>\u5f71\u97ff\uff1a - API\u3001Client\u3001Repository \u5c64\u90fd\u9700\u8981\u62c6\u5206 - \u66f4\u65b0 TDD-010 \u6587\u6a94</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#3-repository","title":"3. \u5169\u5c64 Repository \u67b6\u69cb","text":"<p>\u6c7a\u7b56\uff1a\u5206\u70ba API Repository\uff08\u8fd4\u56de DTOs\uff09\u548c Domain Repository\uff08\u8fd4\u56de Domain Models\uff09</p> <p>\u539f\u56e0\uff1a - \u66f4\u6e05\u6670\u7684\u8077\u8cac\u5206\u96e2 - \u63d0\u9ad8\u53ef\u6e2c\u8a66\u6027\u548c\u53ef\u7dad\u8b77\u6027 - \u7b26\u5408 Clean Architecture</p> <p>\u5f71\u97ff\uff1a - \u66f4\u65b0 TDD-031 \u6587\u6a94 - \u6e2c\u8a66\u7b56\u7565\u66f4\u9748\u6d3b</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#4-getbatchcount-http-method","title":"4. <code>getBatchCount</code> HTTP Method \u4fee\u6b63","text":"<p>\u6c7a\u7b56\uff1a\u5f9e GET \u6539\u70ba POST + JSON encoding</p> <p>\u539f\u56e0\uff1a - \u5be6\u969b API \u53ea\u652f\u63f4 POST - GET \u65b9\u6cd5\u8fd4\u56de 405 \u932f\u8aa4</p> <p>\u5f71\u97ff\uff1a - \u66f4\u65b0 TDD-011 \u6587\u6a94 - Integration Tests \u5df2\u9a57\u8b49</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#5-null-response","title":"5. Null Response \u8655\u7406","text":"<p>\u6c7a\u7b56\uff1a\u5275\u5efa <code>NullableResponse</code> DTO \u8655\u7406\u8fd4\u56de <code>null</code> \u7684 API</p> <p>\u539f\u56e0\uff1a - <code>toggleLike</code>, <code>joinChatroom</code> \u7b49 API \u8fd4\u56de raw <code>null</code> - \u63d0\u4f9b\u6e05\u6670\u7684\u8a9e\u610f - \u907f\u514d Decoding \u932f\u8aa4</p> <p>\u5f71\u97ff\uff1a - PrematchCommentAPI \u548c ChatAPI \u90fd\u6dfb\u52a0\u4e86 <code>NullableResponse</code></p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#6-matchchat-package","title":"6. \u7d71\u4e00 MatchChat Package","text":"<p>\u6c7a\u7b56\uff1a\u4f7f\u7528\u7d71\u4e00\u7684 <code>MatchChat</code> Package\uff0c\u800c\u975e\u5206\u96e2\u7684 PrematchComment \u548c LiveChat Packages</p> <p>\u539f\u56e0\uff1a - \u907f\u514d\u5faa\u74b0\u4f9d\u8cf4 - \u5171\u4eab\u4ee3\u78bc\u66f4\u5bb9\u6613 - \u7b26\u5408 FCom \u5c08\u6848\u7d50\u69cb - \u7c21\u5316\u69cb\u5efa\u548c\u6e2c\u8a66</p> <p>\u5f71\u97ff\uff1a - \u6574\u9ad4 Package \u7d50\u69cb\u8207\u539f TDD \u4e0d\u540c - Import \u8a9e\u53e5\u7d71\u4e00</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#_9","title":"\ud83d\udcca \u5be6\u4f5c\u9032\u5ea6\u7e3d\u7d50","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#api-layer-95","title":"API Layer (95% \u5b8c\u6210)","text":"<ul> <li>\u2705 PrematchCommentAPI - \u5b8c\u6210\uff0c\u512a\u65bc TDD</li> <li>\u2705 ChatAPI - \u5b8c\u6210\uff0c\u512a\u65bc TDD</li> <li>\u26a0\ufe0f Integration Tests \u901a\u904e\uff0c\u4f46\u9700\u88dc\u5145 Unit Tests</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#client-layer-90","title":"Client Layer (90% \u5b8c\u6210)","text":"<ul> <li>\u2705 PrematchCommentClient - \u5b8c\u6210</li> <li>\u2705 LiveChatClient - \u5b8c\u6210</li> <li>\u2705 ChatWebSocketClient - \u5b8c\u6210</li> <li>\u26a0\ufe0f \u9700\u88dc\u5145 Unit Tests \u548c WebSocket Integration Tests</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#repository-layer-80","title":"Repository Layer (80% \u5b8c\u6210)","text":"<ul> <li>\u2705 PrematchCommentRepository - \u5b8c\u6210</li> <li>\u2705 LiveChatRepository - \u5b8c\u6210</li> <li>\u26a0\ufe0f \u9700\u88dc\u5145 Unit Tests</li> <li>\u2139\ufe0f \u63a1\u7528\u5169\u5c64\u67b6\u69cb\uff08\u512a\u65bc TDD\uff09</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#usecase-layer-0","title":"UseCase Layer (0% \u5b8c\u6210)","text":"<ul> <li>\u274c ReloadCommentListUseCase - \u672a\u958b\u59cb</li> <li>\u274c PublishCommentUseCase - \u672a\u958b\u59cb\uff08\u9700\u5148\u5b9a\u7fa9 Adapters\uff09</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#feature-layer-0","title":"Feature Layer (0% \u5b8c\u6210)","text":"<ul> <li>\u274c \u672a\u958b\u59cb</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#view-layer-0","title":"View Layer (0% \u5b8c\u6210)","text":"<ul> <li>\u274c \u672a\u958b\u59cb</li> </ul>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#_10","title":"\ud83c\udfaf \u5b78\u7fd2\u8981\u9ede","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#1-api-vs","title":"1. \u5be6\u969b API \u884c\u70ba vs \u6587\u6a94\u898f\u5283","text":"<p>\u5b78\u5230\uff1a - API \u6587\u6a94\u53ef\u80fd\u8207\u5be6\u969b\u884c\u70ba\u4e0d\u4e00\u81f4 - Integration Tests \u662f\u9a57\u8b49 API \u898f\u683c\u7684\u6700\u4f73\u65b9\u5f0f - \u9700\u8981\u9748\u6d3b\u8abf\u6574 TDD \u4ee5\u53cd\u6620\u5be6\u969b\u60c5\u6cc1</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#2-clean-architecture","title":"2. Clean Architecture \u5be6\u8e10","text":"<p>\u5b78\u5230\uff1a - \u5169\u5c64 Repository \u6bd4\u55ae\u5c64\u66f4\u7b26\u5408\u8077\u8cac\u5206\u96e2 - API Repository \u8655\u7406\u7db2\u8def\uff0cDomain Repository \u8655\u7406\u696d\u52d9\u908f\u8f2f - \u5206\u5c64\u6e05\u6670\u53ef\u4ee5\u63d0\u9ad8\u53ef\u6e2c\u8a66\u6027</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#3-swift-concurrency","title":"3. Swift Concurrency \u6700\u4f73\u5be6\u8e10","text":"<p>\u5b78\u5230\uff1a - <code>Sendable</code> \u5354\u8b70\u5c0d\u65bc\u4e26\u767c\u5b89\u5168\u5f88\u91cd\u8981 - <code>@unchecked Sendable</code> \u7528\u65bc\u5305\u88dd\u975e Sendable \u7684\u985e\u578b\uff08\u5982 <code>[String: Any]</code>\uff09 - <code>actor</code> \u63d0\u4f9b\u5167\u5efa\u7684\u7dda\u7a0b\u5b89\u5168\u4fdd\u8b49</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#4-api-response","title":"4. API Response \u8655\u7406\u6a21\u5f0f","text":"<p>\u5b78\u5230\uff1a - \u4e0d\u662f\u6240\u6709 API \u90fd\u9075\u5faa\u7d71\u4e00\u7684 Response \u683c\u5f0f - <code>null</code> \u503c\u9700\u8981\u7279\u6b8a\u8655\u7406\uff08<code>NullableResponse</code>\uff09 - \u7c21\u5316 Response \u7d50\u69cb\u53ef\u4ee5\u6e1b\u5c11\u932f\u8aa4</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#5","title":"5. \u6e2c\u8a66\u7b56\u7565","text":"<p>\u5b78\u5230\uff1a - Integration Tests \u512a\u5148\u9a57\u8b49 API \u9023\u901a\u6027 - Unit Tests \u9a57\u8b49\u696d\u52d9\u908f\u8f2f\u548c\u8f49\u63db - \u6e2c\u8a66\u61c9\u8a72\u5305\u542b timeout \u548c\u8a73\u7d30\u65e5\u8a8c</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#_11","title":"\ud83d\udca1 \u6539\u9032\u5efa\u8b70","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#_12","title":"\u77ed\u671f\u6539\u9032\uff08\u672c\u9031\uff09","text":"<ol> <li>\u88dc\u5145 Unit Tests</li> <li>ChatWebSocketClient Unit Tests\uff08\u9023\u7dda\u3001\u8a02\u95b1\u3001\u91cd\u9023\u908f\u8f2f\uff09</li> <li>Repository Layer Unit Tests\uff08DTO \u2192 Domain Model \u8f49\u63db\uff09</li> <li> <p>\u9810\u4f30\u6642\u9593\uff1a1-2 \u5929</p> </li> <li> <p>\u5b9a\u7fa9 Adapter Protocols</p> </li> <li>PersonalPageAdapter</li> <li>FComSharedFlowAdapter</li> <li> <p>\u9810\u4f30\u6642\u9593\uff1a0.5 \u5929</p> </li> <li> <p>\u958b\u59cb\u5be6\u4f5c UseCase Layer</p> </li> <li>TDD-040: ReloadCommentListUseCase</li> <li>TDD-041: PublishCommentUseCase</li> <li>\u9810\u4f30\u6642\u9593\uff1a7 \u5929</li> </ol>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#_13","title":"\u4e2d\u671f\u6539\u9032\uff08\u4e0b\u9031\uff09","text":"<ol> <li>\u66f4\u65b0\u67b6\u69cb\u5716</li> <li>\u53cd\u6620\u5169\u5c64 Repository \u67b6\u69cb</li> <li> <p>\u6dfb\u52a0 Adapter \u5c64\u8aaa\u660e</p> </li> <li> <p>\u88dc\u5145 WebSocket Integration Tests</p> </li> <li>\u6e2c\u8a66\u5be6\u969b WebSocket \u9023\u7dda\u548c\u8a0a\u606f\u63a5\u6536</li> <li> <p>\u9810\u4f30\u6642\u9593\uff1a1 \u5929</p> </li> <li> <p>\u78ba\u8a8d Backend API \u6587\u6a94</p> </li> <li>\u8207 Backend \u5718\u968a\u78ba\u8a8d\u5be6\u969b API \u898f\u683c</li> <li>\u66f4\u65b0 API Spec \u6587\u6a94</li> </ol>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#_14","title":"\u9577\u671f\u6539\u9032\uff08\u5f8c\u7e8c\uff09","text":"<ol> <li>\u5b8c\u6210 Feature \u548c View Layer</li> <li>TDD-050, TDD-051 (Feature Layer)</li> <li> <p>TDD-060, TDD-061 (View Layer)</p> </li> <li> <p>\u6027\u80fd\u512a\u5316</p> </li> <li>\u8a55\u4f30 API \u8abf\u7528\u6548\u7387</li> <li>\u8003\u616e\u6dfb\u52a0\u672c\u5730\u7de9\u5b58\u7b56\u7565</li> </ol>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#_15","title":"\ud83d\udc1b \u767c\u73fe\u7684\u554f\u984c","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#1-chatwebsocketclient","title":"1. ChatWebSocketClient \u8a02\u95b1\u7ba1\u7406\u554f\u984c","text":"<p>\u554f\u984c\uff1a<code>subscribe</code> \u65b9\u6cd5\u4e0d\u8fd4\u56de <code>subscriberId</code>\uff0c\u7121\u6cd5\u7cbe\u78ba\u8ffd\u8e64\u8a02\u95b1</p> <p>\u5f71\u97ff\uff1a<code>unsubscribeWebSocket</code> \u4f7f\u7528 <code>unsubscribeAll</code>\uff0c\u6703\u5f71\u97ff\u6240\u6709\u8a02\u95b1\u8005</p> <p>\u5efa\u8b70\uff1a\u6539\u9032 <code>subscribe</code> \u8fd4\u56de <code>(AsyncStream, subscriberId)</code> tuple</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#2-rate-limit","title":"2. Rate Limit \u554f\u984c","text":"<p>\u554f\u984c\uff1aIntegration Tests \u9023\u7e8c\u57f7\u884c\u6703\u89f8\u767c Backend Rate Limit</p> <p>\u89e3\u6c7a\uff1a\u5be6\u4f5c Token Cache \u6a5f\u5236\uff0c\u907f\u514d\u91cd\u8907\u8a8d\u8b49</p> <p>\u72c0\u614b\uff1a\u2705 \u5df2\u89e3\u6c7a\uff0c\u4f7f\u7528 <code>.serialized</code> \u548c\u6301\u4e45\u5316 Token</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#3","title":"3. \u8de8\u570b\u56de\u8986\u9650\u5236","text":"<p>\u554f\u984c\uff1aBackend \u9650\u5236\u8de8\u570b\u5bb6\u7528\u6236\u4e4b\u9593\u7684\u56de\u8986</p> <p>\u5f71\u97ff\uff1a<code>publishReply</code> \u9700\u8981\u78ba\u4fdd\u56de\u8986\u540c\u570b\u5bb6\u7528\u6236</p> <p>\u72c0\u614b\uff1a\u2705 Tests \u5df2\u66f4\u65b0\uff0c\u512a\u5148\u56de\u8986\u540c\u570b\u5bb6\u7528\u6236</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#4-api-forbidden","title":"4. \u90e8\u5206 API \u8fd4\u56de Forbidden","text":"<p>\u554f\u984c\uff1a<code>sendMessage</code> \u5728\u67d0\u4e9b\u60c5\u6cc1\u4e0b\u8fd4\u56de Forbidden</p> <p>\u72c0\u614b\uff1a\u26a0\ufe0f \u5f85\u8207 Eason \u78ba\u8a8d\u539f\u56e0\uff08\u5df2\u6dfb\u52a0 TODO\uff09</p>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#_16","title":"\ud83d\uddc3\ufe0f \u751f\u6210\u7684\u6587\u6a94","text":"<ol> <li>TDD \u4e00\u81f4\u6027\u6aa2\u67e5\u5831\u544a</li> <li>\u8def\u5f91\uff1a<code>13_Implementation_Status/tdd_consistency_check_2025-12-09.md</code></li> <li> <p>\u5167\u5bb9\uff1a\u5b8c\u6574\u7684\u5be6\u4f5c\u72c0\u614b\u8a55\u4f30\u3001\u5dee\u7570\u5206\u6790\u3001\u98a8\u96aa\u8a55\u4f30</p> </li> <li> <p>TDD \u66f4\u65b0\u8a18\u9304</p> </li> <li>\u8def\u5f91\uff1a<code>13_Implementation_Status/tdd_updates_2025-12-09.md</code></li> <li> <p>\u5167\u5bb9\uff1a\u8a73\u7d30\u7684\u8b8a\u66f4\u8a18\u9304\u3001\u8a2d\u8a08\u6c7a\u7b56\u3001\u9077\u79fb\u6307\u5357</p> </li> <li> <p>\u5df2\u66f4\u65b0\u7684 TDD Tickets</p> </li> <li>TDD-010: PrematchCommentAPI</li> <li>TDD-011: ChatAPI</li> <li>TDD-031: LiveChatRepository</li> </ol>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#cursor_2","title":"\ud83c\udf93 \u8207 Cursor \u5354\u4f5c\u5fc3\u5f97","text":""},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#_17","title":"\u6709\u6548\u7684\u5354\u4f5c\u65b9\u5f0f","text":"<ol> <li>\u5148\u6aa2\u67e5\uff0c\u5f8c\u5be6\u4f5c</li> <li>\u900f\u904e\u4e00\u81f4\u6027\u6aa2\u67e5\u4e86\u89e3\u73fe\u72c0</li> <li> <p>\u767c\u73fe\u554f\u984c\u5f8c\u518d\u6c7a\u5b9a\u884c\u52d5\u65b9\u6848</p> </li> <li> <p>\u5145\u5206\u5229\u7528 codebase_search</p> </li> <li>\u5feb\u901f\u5b9a\u4f4d\u76f8\u95dc\u4ee3\u78bc</li> <li> <p>\u7406\u89e3\u73fe\u6709\u67b6\u69cb</p> </li> <li> <p>\u4e26\u884c\u8b80\u53d6\u591a\u500b\u6a94\u6848</p> </li> <li>\u63d0\u9ad8\u6548\u7387</li> <li> <p>\u5168\u9762\u4e86\u89e3\u7cfb\u7d71</p> </li> <li> <p>\u5373\u6642\u8a18\u9304\u6c7a\u7b56</p> </li> <li>\u751f\u6210\u8a73\u7d30\u7684\u5831\u544a\u548c\u8a18\u9304</li> <li>\u4fbf\u65bc\u65e5\u5f8c\u8ffd\u6eaf</li> </ol>"},{"location":"16_Cursor_Workflow/daily_plans/2025-12-09/#_18","title":"\u9700\u8981\u6539\u9032\u7684\u5730\u65b9","text":"<ol> <li>\u66f4\u65e9\u9032\u884c\u4e00\u81f4\u6027\u6aa2\u67e5</li> <li>\u5728\u5be6\u4f5c\u524d\u5c31\u61c9\u8a72\u505a\u6aa2\u67e5</li> <li> <p>\u907f\u514d\u4e8b\u5f8c\u5927\u91cf\u8abf\u6574</p> </li> <li> <p>\u66f4\u4e3b\u52d5\u5730\u66f4\u65b0\u6587\u6a94</p> </li> <li>\u5be6\u4f5c\u6642\u540c\u6b65\u66f4\u65b0 TDD</li> <li>\u6e1b\u5c11\u6587\u6a94\u8207\u5be6\u4f5c\u7684\u5dee\u7570</li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/","title":"\u5de5\u4f5c\u7d71\u6574 - 2025-12-02","text":"<p>\u751f\u6210\u6642\u9593: 2025-12-03 10:35:21</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#_1","title":"\ud83d\udccb \u4eca\u65e5\u8a08\u5283\u56de\u9867","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#_2","title":"\u539f\u5b9a\u8a08\u5283","text":"<ul> <li>TDD-010: FOOTBALL-9178</li> <li>TDD-011: FOOTBALL-9179</li> <li>TDD-021: FOOTBALL-9182</li> <li>TDD-020: FOOTBALL-9181</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#_3","title":"\u2705 \u5b8c\u6210\u9805\u76ee","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#_4","title":"\u5be6\u4f5c\u5b8c\u6210","text":"<ul> <li>\u2705 TDD-021: LiveChatClient\uff08HTTP\uff09\u5be6\u4f5c</li> <li>\u6642\u9593: \u7d04 30 \u5206\u9418</li> <li>\u6a94\u6848: <code>MatchChat/Sources/MatchChat/Services/API/LiveChatClient.swift</code></li> <li>\u6e2c\u8a66: \u2705 \u7121 linter \u932f\u8aa4</li> <li> <p>\u5099\u8a3b: \u5be6\u4f5c\u5b8c\u6210\uff0c\u5305\u542b 4 \u500b\u65b9\u6cd5\uff1agetBatchCount, getChatroomInfo, getHistoricalMessages, sendMessage</p> </li> <li> <p>\u2705 TDD-020: PrematchCommentClient\uff08HTTP\uff09\u5be6\u4f5c</p> </li> <li>\u6642\u9593: \u7d04 30 \u5206\u9418</li> <li>\u6a94\u6848: <code>MatchChat/Sources/MatchChat/Services/API/PrematchCommentClient.swift</code></li> <li>\u6e2c\u8a66: \u2705 \u7121 linter \u932f\u8aa4</li> <li>\u5099\u8a3b: \u5be6\u4f5c\u5b8c\u6210\uff0c\u5305\u542b 5 \u500b\u65b9\u6cd5\uff1agetCommentMeta, getComments, publishComment, toggleLike, getReplies</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#_5","title":"\u6aa2\u67e5\u8207\u9a57\u8b49","text":"<ul> <li>\u2705 \u6aa2\u67e5 API \u5b8c\u6574\u5ea6</li> <li>\u6642\u9593: \u7d04 20 \u5206\u9418</li> <li>\u7d50\u679c: \u2705 ChatAPI \u548c PrematchCommentAPI \u7d50\u69cb\u5b8c\u6574\uff0c\u6240\u6709\u5fc5\u8981\u6a94\u6848\u90fd\u5df2\u5b58\u5728</li> <li> <p>\u5099\u8a3b: \u78ba\u8a8d\u4e86 Endpoint\u3001Models\u3001Repository\u3001RepositoryProtocol \u90fd\u5df2\u6b63\u78ba\u5be6\u4f5c</p> </li> <li> <p>\u2705 TDD \u4e00\u81f4\u6027\u6aa2\u67e5</p> </li> <li>\u7d50\u679c: \u2705 \u5be6\u4f5c\u7b26\u5408 TDD \u898f\u7bc4\uff0c\u529f\u80fd\u5b8c\u6574\u5ea6 80%\uff08\u7f3a\u5c11\u6e2c\u8a66\uff09</li> <li>\u5831\u544a: <code>13_Implementation_Status/tdd_consistency_check_2025-12-02.md</code></li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#_6","title":"\u6587\u6a94\u8207\u90e8\u7f72","text":"<ul> <li>\u2705 \u767c\u5e03\u5de5\u4f5c\u8a08\u5283\u5230 GitHub Pages</li> <li>\u6642\u9593: \u7d04 10 \u5206\u9418</li> <li>\u7d50\u679c: \u2705 \u6210\u529f\u90e8\u7f72\u5230 gh-pages branch</li> <li> <p>URL: https://hsinchunghan.github.io/LiveChatAndCommentOngoingFeature/</p> </li> <li> <p>\u2705 \u66f4\u65b0\u5be6\u4f5c\u72c0\u614b\u548c Changelog</p> </li> <li>\u66f4\u65b0 <code>implementation_status.md</code></li> <li>\u66f4\u65b0 <code>CHANGELOG.md</code></li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#cursor","title":"\ud83e\udd16 \u8207 Cursor \u7684\u5c0d\u8a71\u7d71\u6574","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#_7","title":"\u91cd\u8981\u6c7a\u7b56","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#1","title":"1. \u67b6\u69cb\u8a2d\u8a08\u6c7a\u7b56","text":"<ul> <li>Client \u8a2d\u8a08\u6a21\u5f0f: \u63a1\u7528\u7c21\u55ae\u7684 <code>struct</code> \u8a2d\u8a08\uff0c\u76f4\u63a5\u59d4\u6d3e\u7d66 API \u5c64\u7684 Repository\uff08actor\uff09\uff0c\u7b26\u5408 TDD \u898f\u7bc4</li> <li>\u4f9d\u8cf4\u95dc\u4fc2: Client \u76f4\u63a5\u4f7f\u7528 API \u5c64\u7684 Repository\uff08<code>ChatAPI.ChatRepository</code> \u548c <code>PrematchCommentAPI.PrematchCommentRepository</code>\uff09\uff0c\u7121\u9700\u4e2d\u9593 protocol layer</li> <li>TCA \u6574\u5408: Client \u5b9a\u7fa9\u70ba Repository \u7684\u5167\u90e8\u4f9d\u8cf4\uff0c\u800c\u975e TCA Dependency\u3002\u5982\u9700\u5728\u6e2c\u8a66\u4e2d mock\uff0c\u53ef\u8003\u616e\u5be6\u4f5c <code>DependencyKey</code></li> <li>\u6a94\u6848\u7d50\u69cb: \u9075\u5faa\u73fe\u6709\u5c08\u6848\u7d50\u69cb\uff0c\u5c07 Client \u653e\u5728 <code>MatchChat/Sources/MatchChat/Services/API/</code> \u76ee\u9304\u4e0b</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#2","title":"2. \u5be6\u4f5c\u6c7a\u7b56","text":"<ul> <li>\u4f9d\u8cf4\u6ce8\u5165: \u4f7f\u7528\u9810\u8a2d\u53c3\u6578\u63d0\u4f9b Repository\uff0c\u540c\u6642\u652f\u63f4\u4f9d\u8cf4\u6ce8\u5165\u4ee5\u4fbf\u6e2c\u8a66</li> <li>Error Handling: \u900f\u904e <code>async throws</code> \u76f4\u63a5\u50b3\u905e\u932f\u8aa4\uff0c\u7531 Repository \u5c64\u8655\u7406</li> <li>\u65b9\u6cd5\u59d4\u6d3e: Client \u65b9\u6cd5\u76f4\u63a5\u59d4\u6d3e\u7d66 Repository\uff0c\u4fdd\u6301\u7c21\u55ae\u6e05\u6670\u7684\u8a2d\u8a08</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#3-git","title":"3. Git \u5de5\u4f5c\u6d41\u7a0b\u6c7a\u7b56","text":"<ul> <li>Commit \u7b56\u7565: \u5c07\u5169\u500b Client \u7684\u5be6\u4f5c\u5206\u6210\u5169\u500b\u7368\u7acb\u7684 commits\uff0c\u6bcf\u500b commit \u5c0d\u61c9\u5404\u81ea\u7684 Jira ticket</li> <li>Commit 1: <code>feat: implement LiveChatClient for HTTP communication [FOOTBALL-9182]</code></li> <li>Commit 2: <code>feat: implement PrematchCommentClient for HTTP communication [FOOTBALL-9181]</code></li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#4","title":"4. \u6587\u6a94\u7ba1\u7406\u6c7a\u7b56","text":"<ul> <li>\u8a3b\u89e3\u7b56\u7565: \u79fb\u9664\u6240\u6709\u8a73\u7d30\u8a3b\u89e3\uff0c\u50c5\u4fdd\u7559 TCA \u76f8\u95dc\u7684\u6ce8\u610f\u4e8b\u9805</li> <li>\u6587\u6a94\u90e8\u7f72: \u4f7f\u7528 MkDocs \u90e8\u7f72 TDD \u6587\u6a94\u5230 GitHub Pages\uff0c\u78ba\u4fdd\u6587\u6a94\u8207\u5be6\u4f5c\u540c\u6b65</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#_8","title":"\u5b78\u7fd2\u8981\u9ede","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#1_1","title":"1. \u67b6\u69cb\u7406\u89e3","text":"<ul> <li>Clean Architecture \u5c64\u7d1a: Client \u4f4d\u65bc Data &amp; Infrastructure \u5c64\uff0c\u76f4\u63a5\u4f9d\u8cf4 API \u5c64\u7684 Repository</li> <li>Actor \u4f7f\u7528: Repository \u4f7f\u7528 <code>actor</code> \u5be6\u4f5c\u4ee5\u78ba\u4fdd\u4e26\u767c\u5b89\u5168\uff0cClient \u9700\u8981\u6b63\u78ba\u4f7f\u7528 <code>await</code> \u547c\u53eb</li> <li>API \u7d50\u69cb: \u78ba\u8a8d\u4e86 ChatAPI \u548c PrematchCommentAPI \u7684\u5b8c\u6574\u7d50\u69cb\uff0c\u5305\u62ec Endpoint\u3001Models\u3001Repository\u3001RepositoryProtocol</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#2-tdd","title":"2. TDD \u5be6\u8e10","text":"<ul> <li>TDD \u4e00\u81f4\u6027\u6aa2\u67e5: \u5be6\u4f5c\u5b8c\u6210\u5f8c\u9032\u884c\u4e00\u81f4\u6027\u6aa2\u67e5\uff0c\u78ba\u4fdd\u7b26\u5408 TDD \u6587\u4ef6\u898f\u7bc4</li> <li>\u6e2c\u8a66\u7b56\u7565: Client \u4f5c\u70ba Repository \u7684\u5167\u90e8\u4f9d\u8cf4\uff0c\u5efa\u8b70\u5728 Repository \u5c64\u7d1a\u6e2c\u8a66\u6642\u4e00\u4f75\u6e2c\u8a66 Client</li> <li>\u5be6\u4f5c\u5b8c\u6210\u5ea6: \u529f\u80fd\u5be6\u4f5c\u5b8c\u6210\u5ea6 80%\uff08\u7f3a\u5c11\u6e2c\u8a66\u8986\u84cb\u7387\uff09</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#3","title":"3. \u5de5\u5177\u4f7f\u7528","text":"<ul> <li>MkDocs \u90e8\u7f72: \u4f7f\u7528 <code>mkdocs gh-deploy</code> \u81ea\u52d5\u90e8\u7f72\u6587\u6a94\u5230 GitHub Pages</li> <li>Git \u5de5\u4f5c\u6d41\u7a0b: \u4f7f\u7528 Conventional Commits \u683c\u5f0f\uff0c\u4e26\u5728 commit message \u4e2d\u5305\u542b Jira ticket \u7de8\u865f</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#_9","title":"\u554f\u984c\u89e3\u6c7a\u8a18\u9304","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#1_2","title":"1. \u7de8\u8b6f\u932f\u8aa4\u6aa2\u67e5","text":"<ul> <li>\u554f\u984c: \u57f7\u884c <code>swift build</code> \u6642\u51fa\u73fe macOS \u7248\u672c\u76f8\u5bb9\u6027\u932f\u8aa4</li> <li>\u539f\u56e0: \u5c08\u6848\u914d\u7f6e\u7684 macOS \u7248\u672c\u8981\u6c42\u554f\u984c\uff0c\u8207\u65b0\u5beb\u7684\u7a0b\u5f0f\u78bc\u7121\u95dc</li> <li>\u89e3\u6c7a: \u78ba\u8a8d\u65b0\u7a0b\u5f0f\u78bc\u7684\u8a9e\u6cd5\u548c\u7d50\u69cb\u6b63\u78ba\uff0c\u7de8\u8b6f\u932f\u8aa4\u70ba\u5c08\u6848\u5c64\u7d1a\u914d\u7f6e\u554f\u984c</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#2_1","title":"2. \u67b6\u69cb\u8a2d\u8a08\u78ba\u8a8d","text":"<ul> <li>\u554f\u984c: \u7528\u6236\u8a62\u554f Client \u548c API \u4e4b\u9593\u662f\u5426\u6709 protocol layer\uff0c\u4ee5\u53ca\u8a2d\u8a08\u662f\u5426\u7b26\u5408 TCA \u6587\u6a94</li> <li>\u89e3\u6c7a: \u78ba\u8a8d Client \u76f4\u63a5\u4f7f\u7528 API \u5c64\u7684 Repository\uff0c\u7121\u9700 protocol layer\u3002Client \u662f Repository \u7684\u5167\u90e8\u4f9d\u8cf4\uff0c\u4e0d\u662f TCA Dependency</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#3_1","title":"3. \u6e2c\u8a66\u7b56\u7565\u8a0e\u8ad6","text":"<ul> <li>\u554f\u984c: \u82e5\u6c92\u6709 protocol layer\uff0c\u5982\u4f55\u6e2c\u8a66 Client</li> <li>\u89e3\u6c7a: \u5728 Repository \u5c64\u7d1a\u6e2c\u8a66\u6642\u4e00\u4f75\u6e2c\u8a66 Client\uff0c\u6216\u4f7f\u7528 <code>MockedAPIClient</code> \u9032\u884c\u55ae\u5143\u6e2c\u8a66</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#_10","title":"\u6539\u9032\u5efa\u8b70","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#1_3","title":"1. \u6e2c\u8a66\u8986\u84cb\u7387","text":"<ul> <li>Unit Test: \u70ba\u5169\u500b Client \u6dfb\u52a0\u55ae\u5143\u6e2c\u8a66\uff0c\u76ee\u6a19\u8986\u84cb\u7387 \u2265 80%</li> <li>Integration Test: \u5be6\u4f5c\u6574\u5408\u6e2c\u8a66\u4f86\u9a57\u8b49 Client \u8207 Repository \u7684\u6574\u5408</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#2_2","title":"2. \u6587\u6a94\u5b8c\u5584","text":"<ul> <li>\u6a94\u6848\u8def\u5f91\u8aaa\u660e: \u5728 TDD \u6587\u4ef6\u4e2d\u8a3b\u660e\u5be6\u969b\u5c08\u6848\u7d50\u69cb\u5dee\u7570\uff08MatchChat \u7d71\u4e00 package\uff09</li> <li>\u67b6\u69cb\u5716\u66f4\u65b0: \u66f4\u65b0\u67b6\u69cb\u5716\u4ee5\u53cd\u6620 Client \u8207 API \u5c64\u7684\u5be6\u969b\u95dc\u4fc2</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#_11","title":"\u5c0d\u8a71\u8a18\u9304","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#1-livechatclient-prematchcommentclient","title":"\u5c0d\u8a71 1: \u5be6\u4f5c LiveChatClient \u548c PrematchCommentClient","text":"<ul> <li>\u6642\u9593: 2025-12-02 \u4e0a\u5348</li> <li>\u5167\u5bb9: \u8b80\u53d6 TDD-021 \u548c TDD-020 \u6587\u4ef6\uff0c\u6aa2\u67e5\u73fe\u6709\u7684 API \u5c64\u7d50\u69cb\uff0c\u5be6\u4f5c\u5169\u500b Client</li> <li>\u7d50\u679c: \u2705 \u6210\u529f\u5be6\u4f5c\u5169\u500b Client\uff0c\u901a\u904e linter \u6aa2\u67e5</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#2_3","title":"\u5c0d\u8a71 2: \u67b6\u69cb\u8a2d\u8a08\u78ba\u8a8d","text":"<ul> <li>\u6642\u9593: 2025-12-02 \u4e0a\u5348</li> <li>\u5167\u5bb9: \u8a0e\u8ad6 Client \u8207 API \u5c64\u7684\u95dc\u4fc2\uff0c\u78ba\u8a8d\u662f\u5426\u9700\u8981 protocol layer\uff0c\u78ba\u8a8d\u8a2d\u8a08\u662f\u5426\u7b26\u5408 TCA \u6587\u6a94</li> <li>\u7d50\u679c: \u2705 \u78ba\u8a8d Client \u76f4\u63a5\u4f7f\u7528 API \u5c64\u7684 Repository\uff0c\u7121\u9700 protocol layer</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#3-git_1","title":"\u5c0d\u8a71 3: \u7a0b\u5f0f\u78bc\u6e05\u7406\u548c Git \u63d0\u4ea4","text":"<ul> <li>\u6642\u9593: 2025-12-02 \u4e0b\u5348</li> <li>\u5167\u5bb9: \u79fb\u9664\u591a\u9918\u8a3b\u89e3\uff0c\u5206\u6210\u5169\u500b commits\uff0c\u5c0d\u61c9\u5404\u81ea\u7684 Jira ticket</li> <li>\u7d50\u679c: \u2705 \u6210\u529f\u63d0\u4ea4\u5169\u500b commits\uff0c\u66f4\u65b0\u5be6\u4f5c\u72c0\u614b\u548c changelog</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#4-tdd","title":"\u5c0d\u8a71 4: TDD \u4e00\u81f4\u6027\u6aa2\u67e5","text":"<ul> <li>\u6642\u9593: 2025-12-02 \u4e0b\u5348</li> <li>\u5167\u5bb9: \u6aa2\u67e5\u5be6\u4f5c\u662f\u5426\u7b26\u5408 TDD \u6587\u4ef6\u898f\u7bc4\uff0c\u9a57\u8b49\u65b9\u6cd5\u5c0d\u61c9\u95dc\u4fc2\uff0c\u751f\u6210\u4e00\u81f4\u6027\u6aa2\u67e5\u5831\u544a</li> <li>\u7d50\u679c: \u2705 \u5be6\u4f5c\u7b26\u5408 TDD \u898f\u7bc4\uff0c\u529f\u80fd\u5b8c\u6574\u5ea6 80%\uff08\u7f3a\u5c11\u6e2c\u8a66\uff09</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#5","title":"\u5c0d\u8a71 5: \u6587\u6a94\u90e8\u7f72","text":"<ul> <li>\u6642\u9593: 2025-12-02 \u4e0b\u5348</li> <li>\u5167\u5bb9: \u90e8\u7f72 TDD \u6587\u6a94\u5230 GitHub Pages\uff0c\u78ba\u8a8d\u90e8\u7f72\u6210\u529f</li> <li>\u7d50\u679c: \u2705 \u6210\u529f\u90e8\u7f72\u5230 gh-pages branch</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#_12","title":"\ud83d\udcca \u5de5\u4f5c\u7d71\u8a08","text":"<ul> <li>\u8a08\u5283\u7684 Tickets: 4 \u500b\uff08TDD-010, TDD-011, TDD-021, TDD-020\uff09</li> <li>\u5b8c\u6210\u7684 Tickets: 2 \u500b\uff08TDD-021, TDD-020\uff09</li> <li>\u9032\u884c\u4e2d\u7684 Tickets: 0 \u500b</li> <li>\u8207 Cursor \u7684\u5c0d\u8a71\u6b21\u6578: 5 \u6b21\u4e3b\u8981\u5c0d\u8a71</li> <li>\u89e3\u6c7a\u7684\u554f\u984c\u6578: 3 \u500b\uff08\u7de8\u8b6f\u932f\u8aa4\u6aa2\u67e5\u3001\u67b6\u69cb\u8a2d\u8a08\u78ba\u8a8d\u3001\u6e2c\u8a66\u7b56\u7565\u8a0e\u8ad6\uff09</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#_13","title":"\u7a0b\u5f0f\u78bc\u7d71\u8a08","text":"<ul> <li>\u65b0\u589e\u6587\u4ef6: 2 \u500b</li> <li><code>MatchChat/Sources/MatchChat/Services/API/LiveChatClient.swift</code> (30 lines)</li> <li><code>MatchChat/Sources/MatchChat/Services/API/PrematchCommentClient.swift</code> (34 lines)</li> <li>\u7e3d\u7a0b\u5f0f\u78bc\u884c\u6578: ~64 lines</li> <li>\u6e2c\u8a66\u7a0b\u5f0f\u78bc: 0 lines\uff08\u5f85\u88dc\u5f37\uff09</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#git","title":"Git \u7d71\u8a08","text":"<ul> <li>\u7e3d Commits: 2</li> <li><code>198f313a0a</code>: feat: implement LiveChatClient for HTTP communication [FOOTBALL-9182]</li> <li><code>b40e7fec84</code>: feat: implement PrematchCommentClient for HTTP communication [FOOTBALL-9181]</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#_14","title":"\u529f\u80fd\u5b8c\u6574\u6027","text":"<ul> <li>LiveChatClient: 4/4 \u65b9\u6cd5\u5be6\u4f5c\u5b8c\u6210 \u2705</li> <li>PrematchCommentClient: 5/5 \u65b9\u6cd5\u5be6\u4f5c\u5b8c\u6210 \u2705</li> <li>\u6e2c\u8a66\u8986\u84cb\u7387: 0% \u274c\uff08\u5f85\u88dc\u5f37\uff09</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#_15","title":"\ud83d\udca1 \u53cd\u601d\u8207\u5b78\u7fd2","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#_16","title":"\u4eca\u5929\u5b78\u5230\u4e86\u4ec0\u9ebc\uff1f","text":"<ol> <li>\u67b6\u69cb\u8a2d\u8a08: \u6df1\u5165\u7406\u89e3\u4e86 Clean Architecture \u4e2d Client \u5c64\u7684\u5b9a\u4f4d\u548c\u8077\u8cac\uff0c\u78ba\u8a8d\u4e86 Client \u8207 API \u5c64\u7684\u4f9d\u8cf4\u95dc\u4fc2</li> <li>Actor \u4f7f\u7528: \u5b78\u7fd2\u4e86\u5982\u4f55\u5728 Client \u4e2d\u6b63\u78ba\u4f7f\u7528 <code>actor</code> \u985e\u578b\u7684 Repository\uff0c\u78ba\u4fdd\u4e26\u767c\u5b89\u5168</li> <li>TDD \u5be6\u8e10: \u9ad4\u9a57\u4e86\u5b8c\u6574\u7684 TDD \u5de5\u4f5c\u6d41\u7a0b\uff0c\u5f9e\u5be6\u4f5c\u5230\u4e00\u81f4\u6027\u6aa2\u67e5\uff0c\u78ba\u4fdd\u7b26\u5408\u898f\u7bc4</li> <li>\u5de5\u5177\u4f7f\u7528: \u638c\u63e1\u4e86 MkDocs \u90e8\u7f72\u6d41\u7a0b\u548c Conventional Commits \u683c\u5f0f</li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#_17","title":"\u54ea\u4e9b\u5730\u65b9\u53ef\u4ee5\u505a\u5f97\u66f4\u597d\uff1f","text":"<ol> <li>\u6e2c\u8a66\u8986\u84cb\u7387: \u61c9\u8a72\u5728\u5be6\u4f5c\u529f\u80fd\u7684\u540c\u6642\u6216\u4e4b\u5f8c\u7acb\u5373\u6dfb\u52a0\u6e2c\u8a66\uff0c\u800c\u4e0d\u662f\u7559\u5230\u5f8c\u7e8c</li> <li>\u6587\u6a94\u540c\u6b65: \u53ef\u4ee5\u8003\u616e\u81ea\u52d5\u5316\u6587\u6a94\u66f4\u65b0\u6d41\u7a0b\uff0c\u78ba\u4fdd\u6587\u6a94\u8207\u5be6\u4f5c\u540c\u6b65</li> <li>\u67b6\u69cb\u5716: \u61c9\u8a72\u53ca\u6642\u66f4\u65b0\u67b6\u69cb\u5716\uff0c\u53cd\u6620\u5be6\u969b\u7684\u5be6\u4f5c\u7d50\u69cb</li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#cursor_1","title":"\u8207 Cursor \u7684\u5354\u4f5c\u6709\u4ec0\u9ebc\u6539\u9032\u7a7a\u9593\uff1f","text":"<ol> <li>\u5c0d\u8a71\u6548\u7387: \u53ef\u4ee5\u66f4\u660e\u78ba\u5730\u63d0\u51fa\u554f\u984c\uff0c\u6e1b\u5c11\u4f86\u56de\u78ba\u8a8d\u7684\u6b21\u6578</li> <li>\u6c7a\u7b56\u8a18\u9304: \u61c9\u8a72\u66f4\u53ca\u6642\u5730\u8a18\u9304\u91cd\u8981\u6c7a\u7b56\uff0c\u907f\u514d\u5f8c\u7e8c\u907a\u5fd8</li> <li>\u6e2c\u8a66\u7b56\u7565: \u53ef\u4ee5\u5728\u5be6\u4f5c\u524d\u5c31\u8a0e\u8ad6\u6e2c\u8a66\u7b56\u7565\uff0c\u800c\u4e0d\u662f\u5be6\u4f5c\u5f8c\u518d\u8003\u616e</li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#_18","title":"\ud83d\udd04 \u660e\u65e5\u8a08\u5283","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#_19","title":"\u5efa\u8b70\u7684\u5de5\u4f5c\u9805\u76ee","text":"<ol> <li>\u6e2c\u8a66\u8986\u84cb\u7387\u88dc\u5f37</li> <li>\u70ba LiveChatClient \u6dfb\u52a0\u55ae\u5143\u6e2c\u8a66\uff08\u76ee\u6a19\u8986\u84cb\u7387 \u2265 80%\uff09</li> <li>\u70ba PrematchCommentClient \u6dfb\u52a0\u55ae\u5143\u6e2c\u8a66\uff08\u76ee\u6a19\u8986\u84cb\u7387 \u2265 80%\uff09</li> <li> <p>\u5be6\u4f5c\u6574\u5408\u6e2c\u8a66\u4f86\u9a57\u8b49 Client \u8207 Repository \u7684\u6574\u5408</p> </li> <li> <p>\u7e7c\u7e8c\u5be6\u4f5c</p> </li> <li>\u5be6\u4f5c <code>ChatWebSocketClient</code> (TDD-022)</li> <li> <p>\u958b\u59cb\u5be6\u4f5c Repository \u5c64\uff08TDD-030, TDD-031\uff09</p> </li> <li> <p>\u6587\u6a94\u5b8c\u5584</p> </li> <li>\u66f4\u65b0\u67b6\u69cb\u5716\u4ee5\u53cd\u6620 Client \u8207 API \u5c64\u7684\u5be6\u969b\u95dc\u4fc2</li> <li>\u5728 TDD \u6587\u4ef6\u4e2d\u8a3b\u660e\u5be6\u969b\u5c08\u6848\u7d50\u69cb\u5dee\u7570</li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#_20","title":"\u512a\u5148\u9806\u5e8f","text":"<ol> <li>\u9ad8\u512a\u5148\u7d1a: \u6e2c\u8a66\u8986\u84cb\u7387\u88dc\u5f37\uff08\u78ba\u4fdd\u5be6\u4f5c\u54c1\u8cea\uff09</li> <li>\u4e2d\u512a\u5148\u7d1a: \u7e7c\u7e8c\u5be6\u4f5c ChatWebSocketClient\uff08\u63a8\u9032\u5c08\u6848\u9032\u5ea6\uff09</li> <li>\u4f4e\u512a\u5148\u7d1a: \u6587\u6a94\u5b8c\u5584\uff08\u6539\u5584\u53ef\u7dad\u8b77\u6027\uff09</li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02/#_21","title":"\u76f8\u95dc\u6587\u4ef6","text":"<ul> <li>\u5de5\u4f5c\u65e5\u8a8c</li> <li>\u5de5\u4f5c\u8a08\u5283\uff08\u5982\u679c\u5b58\u5728\uff09</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02_daily_end/","title":"Daily End \u7e3d\u7d50 - 2025-12-02","text":"<p>\u751f\u6210\u6642\u9593: 2025-12-02\uff08Daily End \u6d41\u7a0b\uff09</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02_daily_end/#_1","title":"\u2705 \u5b8c\u6210\u9805\u76ee\u6aa2\u67e5","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02_daily_end/#1","title":"1. \u7d71\u6574\u7576\u5929\u5de5\u4f5c \u2705","text":"<ul> <li>\u6587\u4ef6: <code>16_Cursor_Workflow/daily_summaries/2025-12-02.md</code></li> <li>\u72c0\u614b: \u2705 \u5df2\u5b8c\u6210</li> <li>\u5167\u5bb9: \u5305\u542b\u5b8c\u6210\u9805\u76ee\u3001\u5c0d\u8a71\u7d71\u6574\u3001\u5de5\u4f5c\u7d71\u8a08\u3001\u53cd\u601d\u8207\u5b78\u7fd2\u3001\u660e\u65e5\u8a08\u5283</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02_daily_end/#2","title":"2. \u66f4\u65b0\u5be6\u4f5c\u72c0\u614b \u2705","text":"<ul> <li>\u6587\u4ef6: <code>13_Implementation_Status/implementation_status.md</code></li> <li>\u72c0\u614b: \u2705 \u5df2\u66f4\u65b0</li> <li>\u66f4\u65b0\u5167\u5bb9:</li> <li>\u6a19\u8a18 TDD-020 \u548c TDD-021 \u70ba\u5df2\u5b8c\u6210</li> <li>\u66f4\u65b0\u5b8c\u6210\u5ea6\u7d71\u8a08\uff1a2/26 tickets (7.7%)</li> <li>\u66f4\u65b0 Client \u5c64\u7d71\u8a08\uff1a2/3 \u5df2\u5b8c\u6210</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02_daily_end/#3","title":"3. \u66f4\u65b0\u8b8a\u66f4\u65e5\u8a8c \u2705","text":"<ul> <li>\u6587\u4ef6: <code>14_Changelog/CHANGELOG.md</code></li> <li>\u72c0\u614b: \u2705 \u5df2\u66f4\u65b0</li> <li>\u66f4\u65b0\u5167\u5bb9:</li> <li>\u8a18\u9304 TDD-021 (LiveChatClient) \u5be6\u4f5c</li> <li>\u8a18\u9304 TDD-020 (PrematchCommentClient) \u5be6\u4f5c</li> <li>\u8a18\u9304\u6587\u4ef6\u66f4\u65b0</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02_daily_end/#4-cursor","title":"4. \u7d71\u6574\u8207 Cursor \u7684\u5c0d\u8a71 \u2705","text":"<ul> <li>\u6587\u4ef6: <code>15_Daily_Logs/2025-12-02.md</code> \u548c <code>16_Cursor_Workflow/daily_summaries/2025-12-02.md</code></li> <li>\u72c0\u614b: \u2705 \u5df2\u5b8c\u6210</li> <li>\u5167\u5bb9: \u5305\u542b\u91cd\u8981\u6c7a\u7b56\u3001\u5b78\u7fd2\u8981\u9ede\u3001\u554f\u984c\u89e3\u6c7a\u8a18\u9304\u3001\u6539\u9032\u5efa\u8b70\u3001\u5c0d\u8a71\u8a18\u9304</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02_daily_end/#5-git-commits","title":"5. \u6839\u64da Git Commits \u751f\u6210\u8b8a\u66f4\u8a18\u9304 \u2705","text":"<ul> <li>Commits:</li> <li><code>198f313a0a</code>: feat: implement LiveChatClient for HTTP communication [FOOTBALL-9182]</li> <li><code>b40e7fec84</code>: feat: implement PrematchCommentClient for HTTP communication [FOOTBALL-9181]</li> <li>\u72c0\u614b: \u2705 \u5df2\u8a18\u9304\u5728 Changelog \u4e2d</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02_daily_end/#6-tdd","title":"6. \u6aa2\u67e5\u5be6\u4f5c\u8207 TDD \u7684\u4e00\u81f4\u6027 \u2705","text":"<ul> <li>\u6587\u4ef6: <code>13_Implementation_Status/tdd_consistency_check_2025-12-02.md</code></li> <li>\u72c0\u614b: \u2705 \u5df2\u5b8c\u6210</li> <li>\u7d50\u679c: </li> <li>TDD-021 (LiveChatClient): \u2705 \u5be6\u4f5c\u5b8c\u6210\u5ea6 80%\uff08\u7f3a\u5c11\u6e2c\u8a66\uff09</li> <li>TDD-020 (PrematchCommentClient): \u2705 \u5be6\u4f5c\u5b8c\u6210\u5ea6 80%\uff08\u7f3a\u5c11\u6e2c\u8a66\uff09</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02_daily_end/#7","title":"7. \u751f\u6210\u660e\u5929\u7684\u8a08\u5283\u5efa\u8b70 \u2705","text":"<ul> <li>\u6587\u4ef6: <code>16_Cursor_Workflow/daily_plans/2025-12-03.md</code></li> <li>\u72c0\u614b: \u2705 \u5df2\u751f\u6210</li> <li>\u5167\u5bb9: \u5305\u542b\u512a\u5148\u7d1a\u6392\u5e8f\u7684\u5de5\u4f5c\u9805\u76ee\u3001\u8207 Cursor \u7684\u5354\u4f5c\u8a08\u5283\u3001\u5efa\u8b70\u548c\u6ce8\u610f\u4e8b\u9805</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02_daily_end/#_2","title":"\ud83d\udcca \u4eca\u65e5\u5de5\u4f5c\u7d71\u8a08","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02_daily_end/#_3","title":"\u5be6\u4f5c\u5b8c\u6210","text":"<ul> <li>Tickets \u5b8c\u6210: 2 \u500b\uff08TDD-020, TDD-021\uff09</li> <li>\u7a0b\u5f0f\u78bc\u884c\u6578: ~64 lines</li> <li>\u65b0\u589e\u6587\u4ef6: 2 \u500b</li> <li>Git Commits: 2 \u500b</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02_daily_end/#_4","title":"\u6587\u6a94\u66f4\u65b0","text":"<ul> <li>\u5de5\u4f5c\u65e5\u8a8c: \u2705 \u5df2\u66f4\u65b0</li> <li>\u5de5\u4f5c\u7d71\u6574: \u2705 \u5df2\u751f\u6210</li> <li>\u5be6\u4f5c\u72c0\u614b: \u2705 \u5df2\u66f4\u65b0</li> <li>Changelog: \u2705 \u5df2\u66f4\u65b0</li> <li>TDD \u4e00\u81f4\u6027\u6aa2\u67e5: \u2705 \u5df2\u5b8c\u6210</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02_daily_end/#_5","title":"\u5c0d\u8a71\u7d71\u8a08","text":"<ul> <li>\u8207 Cursor \u7684\u5c0d\u8a71\u6b21\u6578: 5 \u6b21\u4e3b\u8981\u5c0d\u8a71</li> <li>\u89e3\u6c7a\u7684\u554f\u984c\u6578: 3 \u500b</li> <li>\u91cd\u8981\u6c7a\u7b56\u6578: 4 \u500b</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02_daily_end/#_6","title":"\ud83c\udfaf \u4eca\u65e5\u6210\u679c","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02_daily_end/#_7","title":"\u529f\u80fd\u5be6\u4f5c","text":"<ul> <li>\u2705 LiveChatClient: 4/4 \u65b9\u6cd5\u5be6\u4f5c\u5b8c\u6210</li> <li>\u2705 PrematchCommentClient: 5/5 \u65b9\u6cd5\u5be6\u4f5c\u5b8c\u6210</li> <li>\u26a0\ufe0f \u6e2c\u8a66\u8986\u84cb\u7387: 0%\uff08\u5f85\u88dc\u5f37\uff09</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02_daily_end/#_8","title":"\u6587\u6a94\u8207\u90e8\u7f72","text":"<ul> <li>\u2705 \u767c\u5e03\u5de5\u4f5c\u8a08\u5283\u5230 GitHub Pages</li> <li>\u2705 \u66f4\u65b0\u6240\u6709\u76f8\u95dc\u6587\u6a94</li> <li>\u2705 \u5b8c\u6210 TDD \u4e00\u81f4\u6027\u6aa2\u67e5</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02_daily_end/#_9","title":"\u5b78\u7fd2\u8207\u6210\u9577","text":"<ul> <li>\u2705 \u6df1\u5165\u7406\u89e3 Clean Architecture \u4e2d Client \u5c64\u7684\u5b9a\u4f4d</li> <li>\u2705 \u5b78\u7fd2 Actor \u7684\u4f7f\u7528\u548c\u4e26\u767c\u5b89\u5168</li> <li>\u2705 \u638c\u63e1 TDD \u5de5\u4f5c\u6d41\u7a0b\u548c\u4e00\u81f4\u6027\u6aa2\u67e5</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02_daily_end/#_10","title":"\ud83d\udcdd \u5f85\u88dc\u5f37\u9805\u76ee","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02_daily_end/#_11","title":"\u77ed\u671f\uff08\u660e\u65e5\u512a\u5148\uff09","text":"<ol> <li>\u6e2c\u8a66\u8986\u84cb\u7387\u88dc\u5f37</li> <li>LiveChatClient \u55ae\u5143\u6e2c\u8a66\uff08\u76ee\u6a19\u8986\u84cb\u7387 \u2265 80%\uff09</li> <li> <p>PrematchCommentClient \u55ae\u5143\u6e2c\u8a66\uff08\u76ee\u6a19\u8986\u84cb\u7387 \u2265 80%\uff09</p> </li> <li> <p>\u7e7c\u7e8c\u5be6\u4f5c</p> </li> <li>ChatWebSocketClient (TDD-022) - \u8f03\u8907\u96dc\u7684\u5be6\u4f5c\uff0c\u9700\u8981\u4ed4\u7d30\u8a2d\u8a08</li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02_daily_end/#_12","title":"\u9577\u671f","text":"<ol> <li>\u6587\u6a94\u5b8c\u5584</li> <li>\u66f4\u65b0\u67b6\u69cb\u5716</li> <li> <p>\u8a3b\u660e\u5c08\u6848\u7d50\u69cb\u5dee\u7570</p> </li> <li> <p>\u6e2c\u8a66\u7b56\u7565</p> </li> <li>\u5be6\u4f5c\u6574\u5408\u6e2c\u8a66</li> <li>\u5efa\u7acb\u6e2c\u8a66\u6700\u4f73\u5be6\u8e10</li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02_daily_end/#_13","title":"\ud83d\udd04 \u660e\u65e5\u8a08\u5283","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02_daily_end/#1_1","title":"\u512a\u5148\u7d1a 1\uff1a\u6e2c\u8a66\u8986\u84cb\u7387\u88dc\u5f37\uff08\u9ad8\u512a\u5148\u7d1a\uff09","text":"<ul> <li>TDD-021: LiveChatClient \u55ae\u5143\u6e2c\u8a66</li> <li>TDD-020: PrematchCommentClient \u55ae\u5143\u6e2c\u8a66</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02_daily_end/#2_1","title":"\u512a\u5148\u7d1a 2\uff1a\u7e7c\u7e8c\u5be6\u4f5c\uff08\u4e2d\u512a\u5148\u7d1a\uff09","text":"<ul> <li>TDD-022: ChatWebSocketClient\uff08WebSocket\uff09\u5be6\u4f5c</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02_daily_end/#3_1","title":"\u512a\u5148\u7d1a 3\uff1a\u6587\u6a94\u5b8c\u5584\uff08\u4f4e\u512a\u5148\u7d1a\uff09","text":"<ul> <li>\u66f4\u65b0\u67b6\u69cb\u5716</li> <li>\u8a3b\u660e\u5c08\u6848\u7d50\u69cb\u5dee\u7570</li> </ul> <p>\u8a73\u7d30\u8a08\u5283\u8acb\u53c3\u8003\uff1a<code>16_Cursor_Workflow/daily_plans/2025-12-03.md</code></p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02_daily_end/#_14","title":"\ud83d\udcc1 \u76f8\u95dc\u6587\u4ef6","text":"<ul> <li>\u5de5\u4f5c\u65e5\u8a8c</li> <li>\u5de5\u4f5c\u7d71\u6574</li> <li>\u660e\u65e5\u8a08\u5283</li> <li>\u5be6\u4f5c\u72c0\u614b</li> <li>Changelog</li> <li>TDD \u4e00\u81f4\u6027\u6aa2\u67e5</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-02_daily_end/#daily-end","title":"\u2705 Daily End \u6d41\u7a0b\u5b8c\u6210\u78ba\u8a8d","text":"<ul> <li>[x] \u7d71\u6574\u7576\u5929\u5de5\u4f5c</li> <li>[x] \u66f4\u65b0\u5be6\u4f5c\u72c0\u614b</li> <li>[x] \u66f4\u65b0\u8b8a\u66f4\u65e5\u8a8c</li> <li>[x] \u7d71\u6574\u8207 Cursor \u7684\u5c0d\u8a71</li> <li>[x] \u6839\u64da Git Commits \u751f\u6210\u8b8a\u66f4\u8a18\u9304</li> <li>[x] \u6aa2\u67e5\u5be6\u4f5c\u8207 TDD \u7684\u4e00\u81f4\u6027</li> <li>[x] \u751f\u6210\u660e\u5929\u7684\u8a08\u5283\u5efa\u8b70</li> </ul> <p>\u6240\u6709\u9805\u76ee\u5df2\u5b8c\u6210\uff01 \ud83c\udf89</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/","title":"2025-12-03 \u5c0d\u8a71\u7d71\u6574","text":"<p>\u65e5\u671f: 2025-12-03 \u4e3b\u8981\u5de5\u4f5c: ChatWebSocketClient \u5be6\u4f5c\u8207\u4fee\u5fa9</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#key-decisions","title":"\ud83d\udccb \u91cd\u8981\u6c7a\u7b56 / Key Decisions","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#1","title":"1. \u6280\u8853\u9078\u578b\u6c7a\u7b56","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#sportystomp","title":"\u4f7f\u7528 SportyStomp \u6846\u67b6","text":"<ul> <li>\u6c7a\u7b56: \u4f7f\u7528 <code>SportyStomp</code> \u5be6\u4f5c <code>ChatWebSocketClient</code></li> <li>\u7406\u7531:</li> <li>\u5c08\u6848\u5df2\u6709 SportyStomp \u6846\u67b6</li> <li>\u5df2\u5be6\u4f5c\u5fc3\u8df3\u6a5f\u5236 (<code>enableAutoPing()</code>)</li> <li>\u5df2\u5be6\u4f5c STOMP \u5354\u8b70\u652f\u63f4</li> <li>\u6709\u5b8c\u6574\u7684 delegate \u6a5f\u5236</li> <li>\u4ee3\u78bc\u5eab\u4e2d\u5df2\u6709\u53c3\u8003\u5be6\u4f5c (<code>WebSocketStompManager</code>)</li> <li>\u4f86\u6e90: TDD \u6587\u4ef6\u660e\u78ba\u6307\u5b9a\uff0c\u53c3\u8003\u5be6\u4f5c\u5df2\u5b58\u5728</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#actor-class","title":"\u4f7f\u7528 actor \u800c\u975e class","text":"<ul> <li>\u6c7a\u7b56: <code>ChatWebSocketClient</code> \u4f7f\u7528 <code>actor</code> \u800c\u975e <code>class</code></li> <li>\u7406\u7531:</li> <li>TDD \u6587\u4ef6\u8981\u6c42\u4f7f\u7528 <code>actor</code></li> <li><code>actor</code> \u63d0\u4f9b\u5167\u5efa\u7684\u7dda\u7a0b\u5b89\u5168\u4fdd\u8b49</li> <li>\u7b26\u5408\u73fe\u4ee3 Swift \u4e26\u767c\u6a21\u5f0f</li> <li>\u5be6\u4f5c: \u2705 \u5df2\u5be6\u4f5c</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#asyncstream-callback","title":"\u4f7f\u7528 AsyncStream \u800c\u975e callback","text":"<ul> <li>\u6c7a\u7b56: \u4f7f\u7528 <code>AsyncStream&lt;ChatAPI.WebSocketMessageDTO&gt;</code> \u63d0\u4f9b\u8a0a\u606f\u6d41</li> <li>\u7406\u7531:</li> <li>\u7b26\u5408\u73fe\u4ee3 Swift \u4e26\u767c\u6a21\u5f0f</li> <li>\u66f4\u5bb9\u6613\u8207 TCA \u6574\u5408</li> <li>\u652f\u63f4\u591a\u8a02\u95b1\u8005\u6a21\u5f0f</li> <li>\u66f4\u597d\u7684\u751f\u547d\u9031\u671f\u7ba1\u7406</li> <li>\u5be6\u4f5c: \u2705 \u5df2\u5be6\u4f5c\uff0c\u53c3\u8003 <code>EventOddsWebSocketManager</code> \u6a21\u5f0f</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#2-api","title":"2. API \u8abf\u7528\u4fee\u6b63\u6c7a\u7b56","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#sportystomp-api","title":"SportyStomp API \u53c3\u6578\u4fee\u6b63","text":"<ul> <li>\u554f\u984c: \u521d\u59cb\u5be6\u4f5c\u4f7f\u7528\u4e86\u932f\u8aa4\u7684 API \u53c3\u6578\u540d\u7a31</li> <li>\u4fee\u6b63:</li> <li><code>SportyStomp(host:)</code> \u53c3\u6578\u985e\u578b\uff1a<code>URL</code> \u800c\u975e <code>String</code></li> <li><code>subscribe(to:id:headers:)</code> \u800c\u975e <code>subscribe(to:from:headers:)</code></li> <li><code>unsubscribe(from:)</code> \u800c\u975e <code>unsubscribe(id:)</code></li> <li><code>send(body:to:headers:)</code> \u800c\u975e <code>send(message:toDestination:withHeaders:)</code></li> <li>\u65b9\u6cd5: \u76f4\u63a5\u67e5\u770b <code>SportyStomp</code> \u6e90\u78bc\u78ba\u8a8d\u6b63\u78ba\u7684 API \u7c3d\u540d</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#3","title":"3. \u4e26\u767c\u5b89\u5168\u6c7a\u7b56","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#nonisolated-delegate","title":"\u8655\u7406 nonisolated delegate \u65b9\u6cd5","text":"<ul> <li>\u6c7a\u7b56: \u4f7f\u7528 <code>nonisolated</code> + <code>Task</code> \u8655\u7406 <code>SwiftStompDelegate</code> \u56de\u8abf</li> <li>\u5be6\u4f5c:</li> <li>\u6240\u6709 delegate \u65b9\u6cd5\u6a19\u8a18\u70ba <code>public nonisolated</code></li> <li>\u5728 <code>Task</code> \u9589\u5305\u4e2d\u8abf\u7528 actor \u65b9\u6cd5</li> <li>\u79fb\u9664 <code>@Sendable</code> \u6a19\u8a18\uff08\u503c\u985e\u578b\u5728 Task \u4e2d\u5df2\u5b89\u5168\uff09</li> <li>\u5b78\u7fd2: \u503c\u985e\u578b\uff08enum\u3001String\uff09\u5728 <code>Task</code> \u9589\u5305\u4e2d\u81ea\u52d5\u8907\u88fd\uff0c\u4e0d\u9700\u8981 <code>@Sendable</code></li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#sendable","title":"\u8655\u7406 Sendable \u8b66\u544a","text":"<ul> <li>\u6c7a\u7b56: \u70ba\u5916\u90e8\u5eab\u7684 enum \u6dfb\u52a0 <code>@unchecked @retroactive Sendable</code></li> <li>\u5be6\u4f5c:   <pre><code>extension StompConnectType: @unchecked @retroactive Sendable {}\nextension StompDisconnectType: @unchecked @retroactive Sendable {}\nextension StompErrorType: @unchecked @retroactive Sendable {}\n</code></pre></li> <li>\u7406\u7531: \u9019\u4e9b enum \u662f\u503c\u985e\u578b\uff0c\u5be6\u969b\u4e0a\u662f\u7dda\u7a0b\u5b89\u5168\u7684\uff0c\u4f46\u5916\u90e8\u5eab\u672a\u6a19\u8a18\u70ba <code>Sendable</code></li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#any","title":"\u8655\u7406 Any? \u985e\u578b\u8f49\u63db","text":"<ul> <li>\u6c7a\u7b56: \u5728 delegate \u65b9\u6cd5\u4e2d\u5c07 <code>message: Any?</code> \u8f49\u63db\u70ba <code>String?</code></li> <li>\u5be6\u4f5c:   <pre><code>let messageString = message as? String\nTask {\n    await handleMessageReceived(message: messageString, destination: destination)\n}\n</code></pre></li> <li>\u7406\u7531: <code>String</code> \u662f\u503c\u985e\u578b\u4e14 <code>Sendable</code>\uff0c\u907f\u514d\u6578\u64da\u7af6\u722d\u8b66\u544a</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#4","title":"4. \u65b9\u6cd5\u7c3d\u540d\u6539\u9032\u6c7a\u7b56","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#unsubscribe","title":"unsubscribe \u65b9\u6cd5\u8a2d\u8a08","text":"<ul> <li>TDD \u8981\u6c42: <code>unsubscribe(chatroomId: String)</code></li> <li>\u5be6\u969b\u5be6\u4f5c: <code>unsubscribe(subscriberId: UUID)</code> + <code>unsubscribeAll(chatroomId: String)</code></li> <li>\u7406\u7531: </li> <li>\u652f\u63f4\u591a\u8a02\u95b1\u8005\u6a21\u5f0f\uff0c\u9700\u8981\u901a\u904e <code>subscriberId</code> \u4f86\u53d6\u6d88\u7279\u5b9a\u8a02\u95b1</li> <li>\u63d0\u4f9b\u4e86 <code>unsubscribeAll()</code> \u4f5c\u70ba\u88dc\u5145\uff0c\u53ef\u4ee5\u53d6\u6d88\u6574\u500b chatroom \u7684\u6240\u6709\u8a02\u95b1</li> <li>\u8a55\u4f30: \u2705 \u5be6\u969b\u5be6\u4f5c\u66f4\u5408\u7406\uff0c\u7b26\u5408\u591a\u8a02\u95b1\u8005\u6a21\u5f0f\u9700\u6c42</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#key-learnings","title":"\ud83c\udf93 \u5b78\u7fd2\u8981\u9ede / Key Learnings","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#1-swift","title":"1. Swift \u4e26\u767c\u76f8\u95dc","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#task","title":"\u503c\u985e\u578b\u5728 Task \u4e2d\u7684\u884c\u70ba","text":"<ul> <li>\u5b78\u7fd2: \u503c\u985e\u578b\uff08enum\u3001String\u3001struct\uff09\u5728 <code>Task</code> \u9589\u5305\u4e2d\u6703\u81ea\u52d5\u8907\u88fd</li> <li>\u5be6\u4f5c\u5f71\u97ff: \u4e0d\u9700\u8981\u70ba\u503c\u985e\u578b\u6dfb\u52a0 <code>@Sendable</code> \u6a19\u8a18\u6216\u5275\u5efa\u672c\u5730\u526f\u672c</li> <li>\u7bc4\u4f8b:   <pre><code>// \u274c \u4e0d\u9700\u8981\u9019\u6a23\u505a\nlet connectType = connectType\nTask { @Sendable in\n    await handleConnect(connectType: connectType)\n}\n\n// \u2705 \u76f4\u63a5\u4f7f\u7528\u5373\u53ef\nTask {\n    await handleConnect(connectType: connectType)\n}\n</code></pre></li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#nonisolated","title":"nonisolated \u65b9\u6cd5\u7684\u4f7f\u7528","text":"<ul> <li>\u5b78\u7fd2: <code>nonisolated</code> \u65b9\u6cd5\u53ef\u4ee5\u5f9e\u4efb\u4f55\u9694\u96e2\u57df\u8abf\u7528\uff0c\u4f46\u4e0d\u80fd\u76f4\u63a5\u8a2a\u554f actor \u7684\u9694\u96e2\u72c0\u614b</li> <li>\u5be6\u4f5c\u6a21\u5f0f:    <pre><code>public nonisolated func onConnect(...) {\n    Task {\n        await handleConnect(...)  // \u901a\u904e Task \u9032\u5165 actor \u9694\u96e2\u57df\n    }\n}\n</code></pre></li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#sendable_1","title":"@Sendable \u7684\u4f5c\u7528","text":"<ul> <li>\u5b78\u7fd2: <code>@Sendable</code> \u4e3b\u8981\u7528\u65bc\u5f15\u7528\u985e\u578b\uff0c\u78ba\u4fdd\u5b83\u5011\u662f\u7dda\u7a0b\u5b89\u5168\u7684</li> <li>\u503c\u985e\u578b: \u503c\u985e\u578b\u5728\u50b3\u905e\u6642\u6703\u81ea\u52d5\u8907\u88fd\uff0c\u4e0d\u9700\u8981 <code>@Sendable</code></li> <li>\u5f15\u7528\u985e\u578b: \u5f15\u7528\u985e\u578b\u9700\u8981\u78ba\u4fdd\u7dda\u7a0b\u5b89\u5168\uff0c\u624d\u9700\u8981 <code>@Sendable</code></li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#2-sportystomp-api","title":"2. SportyStomp API \u4f7f\u7528","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#api","title":"API \u7c3d\u540d\u78ba\u8a8d\u65b9\u6cd5","text":"<ul> <li>\u5b78\u7fd2: \u76f4\u63a5\u67e5\u770b\u6e90\u78bc\u662f\u6700\u53ef\u9760\u7684\u65b9\u6cd5</li> <li>\u4f4d\u7f6e: <code>MatchChat/.build/checkouts/SportyStomp/Sources/SportyStomp/SportyStomp.swift</code></li> <li>\u95dc\u9375 API:</li> <li><code>init(host: URL, headers: [String: String]?)</code></li> <li><code>subscribe(to: String, id: String, mode: StompAckMode, headers: [String: String]?)</code></li> <li><code>unsubscribe(from: String, mode: StompAckMode, headers: [String: String]?)</code></li> <li><code>send(body: String, to: String, receiptId: String?, headers: [String: String]?)</code></li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#vs-stomp-frame-header","title":"\u53c3\u6578\u540d\u7a31 vs STOMP Frame Header","text":"<ul> <li>\u5b78\u7fd2: Swift \u65b9\u6cd5\u53c3\u6578\u540d\u7a31\u548c STOMP \u5354\u8b70\u7684 header \u540d\u7a31\u662f\u4e0d\u540c\u7684\u6982\u5ff5</li> <li>\u7bc4\u4f8b: </li> <li>Swift API: <code>unsubscribe(from: String)</code> - <code>from</code> \u662f\u53c3\u6578\u540d\u7a31</li> <li>STOMP Frame: <code>UNSUBSCRIBE id:{subscriptionId}</code> - <code>id</code> \u662f STOMP header</li> <li>\u5be6\u969b\u767c\u9001: <code>SportyStomp</code> \u5167\u90e8\u6703\u5c07 <code>from</code> \u53c3\u6578\u7684\u503c\u653e\u5165 <code>id</code> header</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#3-api-spec","title":"3. API Spec \u517c\u5bb9\u6027","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#accept-version","title":"accept-version \u683c\u5f0f","text":"<ul> <li>API Spec \u8981\u6c42: <code>accept-version:1,2,1,1,1.0</code></li> <li>SportyStomp \u9ed8\u8a8d: <code>\"1.1,1.2\"</code></li> <li>\u72c0\u614b: \u26a0\ufe0f \u5f85\u9a57\u8b49</li> <li>TODO: \u6e2c\u8a66 <code>connectWithCustomHeaders(acceptVersion: \"1,2,1,1,1.0\")</code> \u662f\u5426\u6b63\u5e38\u5de5\u4f5c</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#heart-beat-header","title":"heart-beat header","text":"<ul> <li>API Spec \u8981\u6c42: <code>heart-beat:4000,4000</code> (\u5728 CONNECT frame \u4e2d)</li> <li>SportyStomp: \u4f7f\u7528 <code>enableAutoPing()</code> \u63d0\u4f9b WebSocket \u5c64\u7684 ping</li> <li>\u72c0\u614b: \u26a0\ufe0f \u5f85\u9a57\u8b49</li> <li>TODO: \u78ba\u8a8d\u670d\u52d9\u7aef\u662f\u5426\u9700\u8981 STOMP \u5c64\u7684 heart-beat header</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#_1","title":"\u8a0a\u606f\u683c\u5f0f\u9a57\u8b49","text":"<ul> <li>API Spec \u8981\u6c42: <code>{\"type\":\"MESSAGE\",\"data\":{...}}</code></li> <li>\u5be6\u4f5c: \u5df2\u5be6\u4f5c\u89e3\u6790\u908f\u8f2f\uff0c\u5305\u542b fallback \u8655\u7406</li> <li>\u72c0\u614b: \u26a0\ufe0f \u5f85\u9a57\u8b49\u5be6\u969b\u63a5\u6536\u5230\u7684\u8a0a\u606f\u683c\u5f0f</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#4_1","title":"4. \u6e2c\u8a66\u8207\u9a57\u8b49","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#tdd","title":"TDD \u4e00\u81f4\u6027\u6aa2\u67e5","text":"<ul> <li>\u5b8c\u6210\u5ea6: 95%</li> <li>\u4e3b\u8981\u7f3a\u5931: \u7f3a\u5c11 <code>ChatWebSocketClient</code> \u55ae\u5143\u6e2c\u8a66</li> <li>\u5efa\u8b70: \u6dfb\u52a0 <code>ChatWebSocketClientTests.swift</code>\uff0c\u8986\u84cb\u7387\u76ee\u6a19 \u2265 80%</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#_2","title":"\u6e2c\u8a66\u8986\u84cb\u7bc4\u570d","text":"<ul> <li>\u9700\u8981\u6e2c\u8a66:</li> <li>\u9023\u7dda\u7ba1\u7406\uff08\u6210\u529f/\u5931\u6557\u5834\u666f\uff09</li> <li>\u8a02\u95b1\u7ba1\u7406\uff08\u55ae\u4e00/\u591a\u8a02\u95b1\u8005\uff09</li> <li>\u8a0a\u606f\u63a5\u6536\u8207\u89e3\u6790</li> <li>\u91cd\u9023\u6a5f\u5236\uff08\u6307\u6578\u9000\u907f\uff09</li> <li>\u932f\u8aa4\u8655\u7406</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#improvement-suggestions","title":"\ud83d\udd27 \u6539\u9032\u5efa\u8b70 / Improvement Suggestions","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#1-priority-high","title":"1. \u512a\u5148\u7d1a\uff1a\u9ad8 / Priority: High","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#11","title":"1.1 \u6dfb\u52a0\u55ae\u5143\u6e2c\u8a66","text":"<ul> <li>\u6a94\u6848: <code>MatchChat/Tests/MatchChatTests/ChatWebSocketClientTests.swift</code></li> <li>\u6e2c\u8a66\u9805\u76ee:</li> <li>\u9023\u7dda\u7ba1\u7406\uff08\u6210\u529f/\u5931\u6557\u5834\u666f\uff09</li> <li>\u8a02\u95b1\u7ba1\u7406\uff08\u55ae\u4e00/\u591a\u8a02\u95b1\u8005\uff09</li> <li>\u8a0a\u606f\u63a5\u6536\u8207\u89e3\u6790</li> <li>\u91cd\u9023\u6a5f\u5236\uff08\u6307\u6578\u9000\u907f\uff09</li> <li>\u932f\u8aa4\u8655\u7406</li> <li>\u76ee\u6a19: \u8986\u84cb\u7387 \u2265 80%</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#12-api-spec","title":"1.2 \u9a57\u8b49 API Spec \u517c\u5bb9\u6027","text":"<ul> <li>\u9805\u76ee:</li> <li>\u6e2c\u8a66 <code>accept-version: \"1,2,1,1,1.0\"</code> \u662f\u5426\u6b63\u5e38\u5de5\u4f5c</li> <li>\u78ba\u8a8d\u670d\u52d9\u7aef\u662f\u5426\u9700\u8981 STOMP \u5c64\u7684 <code>heart-beat</code> header</li> <li>\u9a57\u8b49\u5be6\u969b\u63a5\u6536\u5230\u7684\u8a0a\u606f\u683c\u5f0f\u662f\u5426\u7b26\u5408 API Spec</li> <li>\u65b9\u6cd5: Integration Test</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#2-priority-medium","title":"2. \u512a\u5148\u7d1a\uff1a\u4e2d / Priority: Medium","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#21","title":"2.1 \u66f4\u65b0\u65b9\u6cd5\u8a3b\u89e3","text":"<ul> <li>\u6a94\u6848: <code>ChatWebSocketClient.swift</code></li> <li>\u9805\u76ee: \u66f4\u65b0 <code>unsubscribe(subscriberId:)</code> \u7684\u8a3b\u89e3</li> <li>\u5167\u5bb9: \u8aaa\u660e\u7576\u524d\u5be6\u4f5c\u5df2\u7d93\u89e3\u6c7a\u4e86 AsyncStream subscriberId \u7684\u554f\u984c</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#22-integration-test","title":"2.2 \u6dfb\u52a0 Integration Test","text":"<ul> <li>\u6a94\u6848: <code>MatchChat/Tests/MatchChatIntegrationTests/ChatWebSocketClientIntegrationTests.swift</code></li> <li>\u6e2c\u8a66\u9805\u76ee: \u5be6\u969b WebSocket \u9023\u7dda\u3001\u8a02\u95b1\u3001\u8a0a\u606f\u63a5\u6536</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#3-priority-low","title":"3. \u512a\u5148\u7d1a\uff1a\u4f4e / Priority: Low","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#31","title":"3.1 \u4ee3\u78bc\u512a\u5316","text":"<ul> <li>\u9805\u76ee:</li> <li>\u8003\u616e\u5c07 <code>extractChatroomId()</code> \u6539\u70ba\u66f4\u5065\u58ef\u7684\u6b63\u5247\u8868\u9054\u5f0f\u89e3\u6790</li> <li>\u8003\u616e\u6dfb\u52a0\u66f4\u8a73\u7d30\u7684\u932f\u8aa4\u65e5\u8a8c</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#conversation-summary","title":"\ud83d\udcdd \u5c0d\u8a71\u6458\u8981 / Conversation Summary","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#_3","title":"\u4e3b\u8981\u5de5\u4f5c\u6d41\u7a0b","text":"<ol> <li>\u4fee\u5fa9 ChatWebSocketClient \u932f\u8aa4</li> <li>\u4fee\u5fa9 <code>SportyStomp</code> API \u8abf\u7528\u932f\u8aa4\uff08\u53c3\u6578\u540d\u7a31\u548c\u985e\u578b\uff09</li> <li>\u89e3\u6c7a\u4e26\u767c\u76f8\u95dc\u7684\u6578\u64da\u7af6\u722d\u8b66\u544a</li> <li> <p>\u6dfb\u52a0\u5fc5\u8981\u7684\u4f9d\u8cf4\u548c Sendable conformance</p> </li> <li> <p>\u7406\u89e3\u6280\u8853\u9078\u578b</p> </li> <li>\u78ba\u8a8d\u4f7f\u7528 <code>SportyStomp</code> \u7684\u539f\u56e0\uff08\u5df2\u6709\u53c3\u8003\u5be6\u4f5c\u3001TDD \u6307\u5b9a\uff09</li> <li>\u7406\u89e3 <code>actor</code> vs <code>class</code> \u7684\u9078\u64c7</li> <li> <p>\u7406\u89e3 <code>AsyncStream</code> vs <code>callback</code> \u7684\u9078\u64c7</p> </li> <li> <p>API Spec \u517c\u5bb9\u6027\u6aa2\u67e5</p> </li> <li>\u6aa2\u67e5 <code>SportyStomp</code> \u662f\u5426\u6eff\u8db3 API Spec \u8981\u6c42</li> <li>\u8b58\u5225\u9700\u8981\u9a57\u8b49\u7684\u9805\u76ee\uff08accept-version\u3001heart-beat\u3001\u8a0a\u606f\u683c\u5f0f\uff09</li> <li> <p>\u6dfb\u52a0 TODO \u8a3b\u89e3\u6a19\u8a18</p> </li> <li> <p>TDD \u4e00\u81f4\u6027\u6aa2\u67e5</p> </li> <li>\u751f\u6210\u4e00\u81f4\u6027\u6aa2\u67e5\u5831\u544a</li> <li>\u8b58\u5225\u5be6\u4f5c\u5b8c\u6210\u5ea6\uff0895%\uff09</li> <li> <p>\u8b58\u5225\u7f3a\u5931\u9805\u76ee\uff08\u55ae\u5143\u6e2c\u8a66\uff09</p> </li> <li> <p>\u6587\u6a94\u90e8\u7f72</p> </li> <li>\u90e8\u7f72 TDD \u6587\u6a94\u5230 GitHub Pages</li> <li>\u6210\u529f\u63a8\u9001\u5230 <code>gh-pages</code> branch</li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#_4","title":"\u95dc\u9375\u6280\u8853\u6c7a\u7b56","text":"<ul> <li>\u2705 \u4f7f\u7528 <code>SportyStomp</code> \u6846\u67b6\uff08\u5df2\u6709\u3001\u6210\u719f\u3001\u7b26\u5408\u9700\u6c42\uff09</li> <li>\u2705 \u4f7f\u7528 <code>actor</code> \u78ba\u4fdd\u7dda\u7a0b\u5b89\u5168</li> <li>\u2705 \u4f7f\u7528 <code>AsyncStream</code> \u63d0\u4f9b\u8a0a\u606f\u6d41</li> <li>\u2705 \u4f7f\u7528 <code>nonisolated</code> + <code>Task</code> \u8655\u7406 delegate \u56de\u8abf</li> <li>\u2705 \u70ba\u5916\u90e8\u5eab enum \u6dfb\u52a0 <code>@unchecked @retroactive Sendable</code></li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#_5","title":"\u5f85\u5b8c\u6210\u9805\u76ee","text":"<ul> <li>\u26a0\ufe0f \u6dfb\u52a0 <code>ChatWebSocketClient</code> \u55ae\u5143\u6e2c\u8a66</li> <li>\u26a0\ufe0f \u9a57\u8b49 API Spec \u517c\u5bb9\u6027\uff08Integration Test\uff09</li> <li>\u26a0\ufe0f \u66f4\u65b0\u65b9\u6cd5\u8a3b\u89e3</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03/#related-documents","title":"\ud83d\udd17 \u76f8\u95dc\u6587\u4ef6 / Related Documents","text":"<ul> <li>TDD Ticket: <code>12_Tickets/03_client/TDD-022_ChatWebSocketClient.md</code></li> <li>\u4e00\u81f4\u6027\u6aa2\u67e5\u5831\u544a: <code>13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check.md</code></li> <li>\u5be6\u4f5c\u6a94\u6848: <code>MatchChat/Sources/MatchChat/Services/API/ChatWebSocketClient.swift</code></li> <li>API Spec: <code>08_API Spec &amp; Mapping/01_api_spec.md</code></li> <li>\u8a2d\u8a08\u65b9\u6848: <code>16_Cursor_Workflow/daily_plans/2025-12-03_websocket_design.md</code></li> </ul> <p>\u751f\u6210\u6642\u9593: 2025-12-03 \u4e0b\u6b21\u66f4\u65b0: \u5b8c\u6210\u55ae\u5143\u6e2c\u8a66\u5f8c</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03_daily_end/","title":"2025-12-03 \u5de5\u4f5c\u7d50\u675f\u6458\u8981","text":"<p>\u65e5\u671f: 2025-12-03 (\u9031\u4e09) \u751f\u6210\u6642\u9593: 2025-12-03 \u665a\u4e0a</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03_daily_end/#_1","title":"\u2705 \u4eca\u65e5\u5b8c\u6210\u9805\u76ee","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03_daily_end/#1-tdd-022-chatwebsocketclient","title":"1. TDD-022: ChatWebSocketClient \u5be6\u4f5c\u8207\u4fee\u5fa9","text":"<p>\u72c0\u614b: \u2705 \u5b8c\u6210\uff0895%\uff09</p> <p>\u4e3b\u8981\u5de5\u4f5c: - \u4fee\u5fa9 SportyStomp API \u8abf\u7528\u932f\u8aa4 - \u89e3\u6c7a\u4e26\u767c\u76f8\u95dc\u7684\u6578\u64da\u7af6\u722d\u8b66\u544a - \u6dfb\u52a0 TODO \u8a3b\u89e3\u6a19\u8a18\u9700\u8981\u9a57\u8b49\u7684\u9805\u76ee - \u6dfb\u52a0 SportyStomp \u4f9d\u8cf4</p> <p>Git Commit: - <code>09e4ac3ef8</code> - fix: correct SportyStomp API usage and resolve concurrency warnings [FOOTBALL-9180]</p> <p>\u6539\u52d5\u6587\u4ef6: - <code>MatchChat/Package.swift</code> (+6 lines) - <code>MatchChat/Sources/MatchChat/Models/PrematchComment/PrematchComment+PrematchCommentAPI.swift</code> (+3 lines) - <code>MatchChat/Sources/MatchChat/Services/API/Chat/ChatAPI+Repository.swift</code> (+9 lines) - <code>MatchChat/Sources/MatchChat/Services/API/ChatWebSocketClient.swift</code> (+55/-17 lines) - <code>MatchChat/Sources/MatchChat/Services/API/PrematchCommentClient.swift</code> (+2 lines)</p> <p>\u5b8c\u6210\u5ea6: 95% - \u2705 \u6838\u5fc3\u529f\u80fd\u5df2\u5be6\u4f5c - \u26a0\ufe0f \u55ae\u5143\u6e2c\u8a66\u5f85\u88dc - \u26a0\ufe0f API Spec \u517c\u5bb9\u6027\u5f85\u9a57\u8b49</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03_daily_end/#2-tdd","title":"2. TDD \u4e00\u81f4\u6027\u6aa2\u67e5","text":"<p>\u72c0\u614b: \u2705 \u5b8c\u6210</p> <p>\u5de5\u4f5c\u5167\u5bb9: - \u751f\u6210\u4e00\u81f4\u6027\u6aa2\u67e5\u5831\u544a - \u8b58\u5225\u5be6\u4f5c\u5b8c\u6210\u5ea6\uff0895%\uff09 - \u8b58\u5225\u7f3a\u5931\u9805\u76ee\uff08\u55ae\u5143\u6e2c\u8a66\uff09</p> <p>\u751f\u6210\u6587\u4ef6: - <code>13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check.md</code></p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03_daily_end/#3","title":"3. \u5c0d\u8a71\u7d71\u6574","text":"<p>\u72c0\u614b: \u2705 \u5b8c\u6210</p> <p>\u5de5\u4f5c\u5167\u5bb9: - \u7d71\u6574\u4eca\u5929\u8207 Cursor \u7684\u5c0d\u8a71 - \u63d0\u53d6\u91cd\u8981\u6c7a\u7b56\u548c\u5b78\u7fd2\u8981\u9ede - \u751f\u6210\u6539\u9032\u5efa\u8b70</p> <p>\u751f\u6210\u6587\u4ef6: - <code>16_Cursor_Workflow/daily_summaries/2025-12-03.md</code></p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03_daily_end/#4","title":"4. \u5de5\u4f5c\u65e5\u8a8c\u66f4\u65b0","text":"<p>\u72c0\u614b: \u2705 \u5b8c\u6210</p> <p>\u5de5\u4f5c\u5167\u5bb9: - \u8a18\u9304\u4eca\u5929\u7684\u5de5\u4f5c\u5167\u5bb9 - \u8a18\u9304\u9047\u5230\u7684\u554f\u984c\u548c\u89e3\u6c7a\u65b9\u6848 - \u8a18\u9304\u6642\u9593\u7d71\u8a08</p> <p>\u751f\u6210\u6587\u4ef6: - <code>15_Daily_Logs/2025-12-03.md</code></p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03_daily_end/#5","title":"5. \u6587\u6a94\u90e8\u7f72","text":"<p>\u72c0\u614b: \u2705 \u5b8c\u6210</p> <p>\u5de5\u4f5c\u5167\u5bb9: - \u90e8\u7f72 TDD \u6587\u6a94\u5230 GitHub Pages - \u6210\u529f\u63a8\u9001\u5230 gh-pages branch</p> <p>URL: https://hsinchunghan.github.io/LiveChatAndCommentOngoingFeature/</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03_daily_end/#_2","title":"\ud83d\udcca \u7d71\u8a08\u6578\u64da","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03_daily_end/#_3","title":"\u5be6\u4f5c\u9032\u5ea6","text":"<ul> <li>\u5b8c\u6210\u5ea6: 3/26 tickets (11.5%)</li> <li>Client \u5c64: 3/3 \u5df2\u5b8c\u6210 \u2705</li> <li>\u4eca\u65e5\u5b8c\u6210: TDD-022 (ChatWebSocketClient)</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03_daily_end/#_4","title":"\u4ee3\u78bc\u7d71\u8a08","text":"<ul> <li>\u7e3d Commits: 1</li> <li>\u65b0\u589e\u6587\u4ef6: 0</li> <li>\u4fee\u6539\u6587\u4ef6: 5</li> <li>\u7a0b\u5f0f\u78bc\u8b8a\u66f4: +58 insertions, -17 deletions</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03_daily_end/#_5","title":"\u6642\u9593\u7d71\u8a08","text":"<ul> <li>\u958b\u767c\u6642\u9593: 4 \u5c0f\u6642</li> <li>\u6e2c\u8a66\u6642\u9593: 0 \u5c0f\u6642\uff08\u5f85\u6dfb\u52a0\uff09</li> <li>\u6587\u4ef6\u66f4\u65b0: 1 \u5c0f\u6642</li> <li>\u554f\u984c\u89e3\u6c7a: 2 \u5c0f\u6642</li> <li>\u8207 Cursor \u5354\u4f5c\u6642\u9593: 1 \u5c0f\u6642</li> <li>\u7e3d\u8a08: 8 \u5c0f\u6642</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03_daily_end/#_6","title":"\ud83c\udf93 \u91cd\u8981\u5b78\u7fd2","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03_daily_end/#swift","title":"Swift \u4e26\u767c","text":"<ol> <li>\u503c\u985e\u578b\u5728 Task \u4e2d\u7684\u884c\u70ba</li> <li>\u503c\u985e\u578b\uff08enum\u3001String\u3001struct\uff09\u5728 <code>Task</code> \u9589\u5305\u4e2d\u6703\u81ea\u52d5\u8907\u88fd</li> <li>\u4e0d\u9700\u8981\u70ba\u503c\u985e\u578b\u6dfb\u52a0 <code>@Sendable</code> \u6a19\u8a18</li> <li> <p>\u4e0d\u9700\u8981\u5275\u5efa\u672c\u5730\u526f\u672c</p> </li> <li> <p>nonisolated \u65b9\u6cd5\u7684\u4f7f\u7528</p> </li> <li>\u4f7f\u7528 <code>nonisolated</code> + <code>Task</code> \u8655\u7406 delegate \u56de\u8abf</li> <li> <p>\u901a\u904e <code>Task</code> \u9032\u5165 actor \u9694\u96e2\u57df</p> </li> <li> <p>@Sendable \u7684\u4f5c\u7528</p> </li> <li>\u4e3b\u8981\u7528\u65bc\u5f15\u7528\u985e\u578b\uff0c\u78ba\u4fdd\u7dda\u7a0b\u5b89\u5168</li> <li>\u503c\u985e\u578b\u4e0d\u9700\u8981 <code>@Sendable</code></li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03_daily_end/#sportystomp-api","title":"SportyStomp API","text":"<ol> <li>API \u7c3d\u540d\u78ba\u8a8d\u65b9\u6cd5</li> <li>\u76f4\u63a5\u67e5\u770b\u6e90\u78bc\u662f\u6700\u53ef\u9760\u7684\u65b9\u6cd5</li> <li> <p>Swift \u65b9\u6cd5\u53c3\u6578\u540d\u7a31\u548c STOMP \u5354\u8b70\u7684 header \u540d\u7a31\u662f\u4e0d\u540c\u7684\u6982\u5ff5</p> </li> <li> <p>\u53c3\u6578\u540d\u7a31 vs STOMP Frame Header</p> </li> <li><code>unsubscribe(from:)</code> \u7684 <code>from</code> \u53c3\u6578\u6703\u88ab\u653e\u5165 STOMP \u7684 <code>id</code> header</li> <li>\u529f\u80fd\u6b63\u78ba\uff0c\u53ea\u662f\u547d\u540d\u5c64\u7d1a\u4e0d\u540c</li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03_daily_end/#_7","title":"\u26a0\ufe0f \u5f85\u5b8c\u6210\u9805\u76ee","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03_daily_end/#_8","title":"\u512a\u5148\u7d1a\uff1a\u9ad8","text":"<ol> <li>\u6dfb\u52a0 ChatWebSocketClient \u55ae\u5143\u6e2c\u8a66</li> <li>\u76ee\u6a19\uff1a\u8986\u84cb\u7387 \u2265 80%</li> <li> <p>\u9810\u4f30\u6642\u9593\uff1a4-6 \u5c0f\u6642</p> </li> <li> <p>\u9a57\u8b49 API Spec \u517c\u5bb9\u6027</p> </li> <li>\u9a57\u8b49 <code>accept-version</code> \u683c\u5f0f</li> <li>\u9a57\u8b49 <code>heart-beat</code> header</li> <li>\u9a57\u8b49\u8a0a\u606f\u683c\u5f0f</li> <li>\u9810\u4f30\u6642\u9593\uff1a3-4 \u5c0f\u6642</li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03_daily_end/#_9","title":"\u512a\u5148\u7d1a\uff1a\u4e2d","text":"<ol> <li>\u66f4\u65b0\u65b9\u6cd5\u8a3b\u89e3</li> <li>\u66f4\u65b0 <code>unsubscribe(subscriberId:)</code> \u7684\u8a3b\u89e3</li> <li>\u9810\u4f30\u6642\u9593\uff1a30 \u5206\u9418</li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03_daily_end/#_10","title":"\ud83d\udd04 \u660e\u65e5\u8a08\u5283","text":"<p>\u4e3b\u8981\u76ee\u6a19: \u5b8c\u5584 ChatWebSocketClient \u6e2c\u8a66\u8207\u9a57\u8b49</p> <p>\u8a08\u5283\u6587\u4ef6: <code>16_Cursor_Workflow/daily_plans/2025-12-04.md</code></p> <p>\u4e3b\u8981\u4efb\u52d9: 1. \u6dfb\u52a0 ChatWebSocketClient \u55ae\u5143\u6e2c\u8a66\uff08\u512a\u5148\u7d1a\uff1a\u9ad8\uff09 2. \u9a57\u8b49 API Spec \u517c\u5bb9\u6027\uff08\u512a\u5148\u7d1a\uff1a\u9ad8\uff09 3. \u66f4\u65b0\u65b9\u6cd5\u8a3b\u89e3\uff08\u512a\u5148\u7d1a\uff1a\u4e2d\uff09</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03_daily_end/#_11","title":"\ud83d\udcdd \u66f4\u65b0\u7684\u6587\u4ef6","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03_daily_end/#_12","title":"\u5be6\u4f5c\u72c0\u614b","text":"<ul> <li>\u2705 <code>13_Implementation_Status/implementation_status.md</code></li> <li>\u66f4\u65b0 TDD-022 \u72c0\u614b\u70ba\u5b8c\u6210\uff0895%\uff09</li> <li>\u66f4\u65b0\u5b8c\u6210\u5ea6\u7d71\u8a08\uff1a3/26 tickets (11.5%)</li> <li>\u66f4\u65b0 Client \u5c64\u7d71\u8a08\uff1a3/3 \u5df2\u5b8c\u6210</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03_daily_end/#_13","title":"\u8b8a\u66f4\u65e5\u8a8c","text":"<ul> <li>\u2705 <code>14_Changelog/CHANGELOG.md</code></li> <li>\u6dfb\u52a0 2025-12-03 \u7684\u8b8a\u66f4\u8a18\u9304</li> <li>\u8a18\u9304\u5b8c\u6210\u9805\u76ee\u3001Bug \u4fee\u5fa9\u3001\u6587\u4ef6\u66f4\u65b0</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03_daily_end/#_14","title":"\u5de5\u4f5c\u65e5\u8a8c","text":"<ul> <li>\u2705 <code>15_Daily_Logs/2025-12-03.md</code></li> <li>\u8a18\u9304\u4eca\u5929\u7684\u5de5\u4f5c\u5167\u5bb9</li> <li>\u8a18\u9304\u9047\u5230\u7684\u554f\u984c\u548c\u89e3\u6c7a\u65b9\u6848</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03_daily_end/#_15","title":"\u5c0d\u8a71\u7d71\u6574","text":"<ul> <li>\u2705 <code>16_Cursor_Workflow/daily_summaries/2025-12-03.md</code></li> <li>\u7d71\u6574\u4eca\u5929\u8207 Cursor \u7684\u5c0d\u8a71</li> <li>\u63d0\u53d6\u91cd\u8981\u6c7a\u7b56\u548c\u5b78\u7fd2\u8981\u9ede</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03_daily_end/#_16","title":"\u4e00\u81f4\u6027\u6aa2\u67e5","text":"<ul> <li>\u2705 <code>13_Implementation_Status/TDD-022_ChatWebSocketClient_Consistency_Check.md</code></li> <li>\u8a73\u7d30\u6aa2\u67e5\u5be6\u4f5c\u8207 TDD \u6587\u4ef6\u7684\u4e00\u81f4\u6027</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03_daily_end/#_17","title":"\u660e\u65e5\u8a08\u5283","text":"<ul> <li>\u2705 <code>16_Cursor_Workflow/daily_plans/2025-12-04.md</code></li> <li>\u751f\u6210\u660e\u5929\u7684\u5de5\u4f5c\u8a08\u5283</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03_daily_end/#_18","title":"\ud83c\udfaf \u6210\u5c31","text":"<ul> <li>\u2705 \u5b8c\u6210 Client \u5c64\u6240\u6709\u5be6\u4f5c\uff083/3\uff09</li> <li>\u2705 \u4fee\u5fa9\u6240\u6709\u7de8\u8b6f\u932f\u8aa4\u548c\u8b66\u544a</li> <li>\u2705 \u751f\u6210\u5b8c\u6574\u7684\u6587\u6a94\u548c\u5831\u544a</li> <li>\u2705 \u6210\u529f\u90e8\u7f72 TDD \u6587\u6a94\u5230 GitHub Pages</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03_daily_end/#_19","title":"\ud83d\udca1 \u53cd\u601d","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03_daily_end/#_20","title":"\u505a\u5f97\u597d\u7684\u5730\u65b9","text":"<ol> <li>\u7cfb\u7d71\u6027\u89e3\u6c7a\u554f\u984c: \u5f9e API \u8abf\u7528\u932f\u8aa4\u5230\u4e26\u767c\u8b66\u544a\uff0c\u7cfb\u7d71\u6027\u5730\u89e3\u6c7a\u4e86\u6240\u6709\u554f\u984c</li> <li>\u6587\u6a94\u5b8c\u6574: \u751f\u6210\u4e86\u5b8c\u6574\u7684\u5c0d\u8a71\u7d71\u6574\u3001\u4e00\u81f4\u6027\u6aa2\u67e5\u5831\u544a\u548c\u5de5\u4f5c\u65e5\u8a8c</li> <li>\u5b78\u7fd2\u8a18\u9304: \u8a73\u7d30\u8a18\u9304\u4e86\u5b78\u7fd2\u8981\u9ede\uff0c\u4fbf\u65bc\u5f8c\u7e8c\u53c3\u8003</li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-03_daily_end/#_21","title":"\u53ef\u4ee5\u6539\u9032\u7684\u5730\u65b9","text":"<ol> <li>\u6e2c\u8a66\u8986\u84cb: \u61c9\u8a72\u5728\u5be6\u4f5c\u6642\u540c\u6b65\u6dfb\u52a0\u6e2c\u8a66\uff0c\u800c\u4e0d\u662f\u5f8c\u88dc</li> <li>API \u9a57\u8b49: \u61c9\u8a72\u66f4\u65e9\u9a57\u8b49 API Spec \u517c\u5bb9\u6027</li> </ol> <p>\u751f\u6210\u6642\u9593: 2025-12-03 \u4e0b\u6b21\u66f4\u65b0: 2025-12-04</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/","title":"2025-12-04 \u5c0d\u8a71\u7d71\u6574","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#_1","title":"\ud83d\udcc5 \u5c0d\u8a71\u8cc7\u8a0a","text":"<ul> <li>\u65e5\u671f: 2025-12-04</li> <li>\u4e3b\u984c: Data Layer \u91cd\u69cb\u8207 TDD \u6587\u4ef6\u540c\u6b65</li> <li>Jira Tickets: FOOTBALL-9180-9184</li> <li>\u5c0d\u8a71\u6642\u9577: \u5168\u5929</li> <li>\u4e3b\u8981\u6210\u5c31: \u5b8c\u6210 4 \u500b commits + TDD \u6587\u4ef6\u66f4\u65b0</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#_2","title":"\ud83c\udfaf \u91cd\u8981\u6c7a\u7b56","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#1-git","title":"\u6c7a\u7b56 1: Git \u914d\u7f6e\u672c\u5730\u5316\u7b56\u7565","text":"<p>\u80cc\u666f:  - <code>buildServer.json</code> \u662f\u672c\u5730 Xcode Build Server \u914d\u7f6e - \u9700\u8981\u5728 rebase/merge \u6642\u4fdd\u7559</p> <p>\u6c7a\u7b56:  - \u5c07 <code>buildServer.json</code> \u52a0\u5165 <code>.gitignore</code> - \u9078\u64c7\u65b9\u6848 1\uff08\u5718\u968a\u5171\u4eab\u898f\u5247\uff09\u800c\u975e\u65b9\u6848 2\uff08\u500b\u4eba <code>.git/info/exclude</code>\uff09</p> <p>\u7406\u7531: - <code>buildServer.json</code> \u672c\u4f86\u5c31\u61c9\u8a72\u662f\u6bcf\u500b\u4eba\u7684\u672c\u5730\u8a2d\u5b9a - \u52a0\u5230 <code>.gitignore</code> \u5c0d\u5718\u968a\u4f86\u8aaa\u66f4\u5408\u7406 - \u985e\u4f3c <code>.vscode/settings.json</code> \u7684\u8655\u7406\u65b9\u5f0f</p> <p>\u5f71\u97ff:  - \u2705 \u6240\u6709 branch \u90fd\u6703\u5c0a\u91cd\u9019\u500b\u898f\u5247 - \u2705 Rebase/merge develop \u4e0d\u6703\u6709\u885d\u7a81 - \u2705 \u5718\u968a\u6210\u54e1\u53d7\u76ca</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#2-sharedbetsmetadata","title":"\u6c7a\u7b56 2: \u5f15\u5165 SharedBetsMetadata \u5305\u88dd\u578b\u5225","text":"<p>\u554f\u984c\u5206\u6790: <pre><code>\u274c \u539f\u59cb\u5be6\u4f5c:\npublishComment(..., sharedBetsMeta: [String: Any]?, ...)\n                                      \u2191\n                          \u4e0d\u7b26\u5408 Sendable \u5354\u8b70\n\n\u26a0\ufe0f \u7de8\u8b6f\u5668\u8b66\u544a:\nwarning: passing non-sendable type '[String: Any]?' \n         across actor boundary\n</code></pre></p> <p>\u89e3\u6c7a\u65b9\u6848: <pre><code>public struct SharedBetsMetadata: @unchecked Sendable {\n    public let value: [String: Any]\n\n    public init(_ value: [String: Any]) {\n        self.value = value\n    }\n}\n</code></pre></p> <p>\u8a2d\u8a08\u67b6\u69cb: <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Client Layer                                    \u2502\n\u2502 publishComment(..., sharedBetsMeta: SharedBets  \u2502\n\u2502                     Metadata?, ...)             \u2502\n\u2502         \u2193 \u7b26\u5408 Sendable                         \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Repository Layer                                \u2502\n\u2502 publishComment(..., sharedBetsMeta: SharedBets  \u2502\n\u2502                     Metadata?, ...)             \u2502\n\u2502         \u2193 \u89e3\u5305: metaDict = sharedBetsMeta.value \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Endpoint/API Layer                              \u2502\n\u2502 publishComment(..., sharedBetsMeta: [String:    \u2502\n\u2502                     Any]?, ...)                 \u2502\n\u2502         \u2193 JSON \u5e8f\u5217\u5316                           \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Network                                         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></p> <p>\u512a\u9ede: - \u2705 \u89e3\u6c7a Swift Concurrency \u8b66\u544a - \u2705 \u63d0\u5347\u578b\u5225\u5b89\u5168\u6027 - \u2705 \u660e\u78ba\u610f\u5716\uff0c\u5c01\u88dd\u5be6\u4f5c\u7d30\u7bc0 - \u2705 \u672a\u4f86\u53ef\u64f4\u5c55\uff08\u53ef\u589e\u52a0\u9a57\u8b49\u908f\u8f2f\uff09</p> <p>\u9650\u5236\u8207\u8003\u91cf: - \u26a0\ufe0f \u4f7f\u7528 <code>@unchecked Sendable</code>\uff08\u9700\u8981\u958b\u767c\u8005\u78ba\u4fdd\u5b89\u5168\u6027\uff09 - \u26a0\ufe0f Breaking Change\uff08\u8abf\u7528\u65b9\u9700\u66f4\u65b0\uff09 - \u2705 \u4f46\u6539\u9032\u662f\u503c\u5f97\u7684</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#3-chatwebsocketclientsubscribe-nonisolated","title":"\u6c7a\u7b56 3: ChatWebSocketClient.subscribe nonisolated \u5316","text":"<p>\u554f\u984c\u5206\u6790: <pre><code>// \u274c \u539f\u59cb\u5be6\u4f5c\uff08Actor-isolated\uff09\npublic actor ChatWebSocketClient {\n    public func subscribe(chatroomId: String) \n        -&gt; AsyncStream&lt;ChatAPI.WebSocketMessageDTO&gt; {\n        // ... \u5275\u5efa\u548c\u8fd4\u56de AsyncStream\n    }\n}\n\n// \u8abf\u7528\u6642\u9700\u8981 await\nlet stream = await client.subscribe(chatroomId: id)\n                  \u2191 \u9700\u8981 await\uff0c\u8abf\u7528\u65b9\u5fc5\u9808\u5728 async context\n</code></pre></p> <p>\u89e3\u6c7a\u65b9\u6848: <pre><code>// \u2705 \u6539\u9032\u5be6\u4f5c\uff08nonisolated\uff09\npublic actor ChatWebSocketClient {\n    public nonisolated func subscribe(chatroomId: String) \n        -&gt; AsyncStream&lt;ChatAPI.WebSocketMessageDTO&gt; {\n        AsyncStream { continuation in\n            Task {\n                await self.performSubscribe(\n                    chatroomId: chatroomId,\n                    continuation: continuation\n                )\n            }\n        }\n    }\n\n    private func performSubscribe(\n        chatroomId: String,\n        continuation: AsyncStream&lt;...&gt;.Continuation\n    ) {\n        // Actor-isolated \u8a02\u95b1\u908f\u8f2f\n    }\n}\n\n// \u8abf\u7528\u6642\u4e0d\u9700\u8981 await\nlet stream = client.subscribe(chatroomId: id)\n             \u2191 \u540c\u6b65\u5275\u5efa AsyncStream\n</code></pre></p> <p>\u8a2d\u8a08\u539f\u7406: 1. <code>nonisolated</code> \u65b9\u6cd5\u53ef\u540c\u6b65\u57f7\u884c 2. <code>AsyncStream</code> \u5728\u521d\u59cb\u5316\u6642\u540c\u6b65\u5275\u5efa 3. \u5be6\u969b\u8a02\u95b1\u908f\u8f2f\u5728 <code>Task</code> \u4e2d\u7570\u6b65\u57f7\u884c\uff08actor-isolated\uff09 4. \u4fdd\u6301\u7dda\u7a0b\u5b89\u5168\uff0c\u6539\u5584 API \u6613\u7528\u6027</p> <p>\u53c3\u8003: - Apple AsyncStream \u8a2d\u8a08\u6a21\u5f0f - EventOddsWebSocketManager \u5be6\u4f5c</p> <p>\u512a\u9ede: - \u2705 \u540c\u6b65\u5275\u5efa AsyncStream\uff0c\u6539\u5584 API \u6613\u7528\u6027 - \u2705 \u5be6\u969b\u908f\u8f2f\u4ecd\u5728 actor \u5167\u57f7\u884c\uff0c\u4fdd\u6301\u7dda\u7a0b\u5b89\u5168 - \u2705 \u7b26\u5408 Swift Concurrency \u6700\u4f73\u5be6\u8e10 - \u2705 \u5411\u5f8c\u517c\u5bb9\uff08\u53ef\u9078\u64c7\u6027\u79fb\u9664 await\uff09</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#4-tdd","title":"\u6c7a\u7b56 4: TDD \u6587\u4ef6\u540c\u6b65\u66f4\u65b0\u7b56\u7565","text":"<p>\u554f\u984c: - \u5be6\u4f5c\u5305\u542b\u512a\u65bc\u539f TDD \u7684\u8a2d\u8a08\u6539\u9032 - TDD \u6587\u4ef6\u672a\u53cd\u6620\u9019\u4e9b\u6539\u9032 - \u53ef\u80fd\u5c0e\u81f4\u5f8c\u7e8c\u958b\u767c\u8005\u56f0\u60d1</p> <p>\u6c7a\u7b56:  \u4e3b\u52d5\u66f4\u65b0 TDD \u6587\u4ef6\u4ee5\u53cd\u6620\u5be6\u4f5c\u6539\u9032</p> <p>\u66f4\u65b0\u539f\u5247: <pre><code>\u2705 \u61c9\u8a72\u66f4\u65b0\u7684\u60c5\u6cc1\uff1a\n1. \u5be6\u4f5c\u5f15\u5165\u66f4\u597d\u7684\u578b\u5225\u5b89\u5168\uff08\u5982 Sendable \u5305\u88dd\uff09\n2. \u5be6\u4f5c\u6539\u5584\u4f75\u767c\u6a21\u578b\uff08\u5982 nonisolated\uff09\n3. \u5be6\u4f5c\u9075\u5faa\u66f4\u597d\u7684\u8a2d\u8a08\u6a21\u5f0f\uff08\u5982 Protocol \u91cd\u69cb\uff09\n4. TDD \u4e2d\u7684\u578b\u5225\u6216 API \u4e0d\u7b26\u5408\u5be6\u969b\u9700\u6c42\n5. \u5be6\u4f5c\u4fee\u6b63\u4e86 TDD \u4e2d\u7684\u932f\u8aa4\n\n\u274c \u4e0d\u61c9\u66f4\u65b0\u7684\u60c5\u6cc1\uff1a\n1. \u5be6\u4f5c\u53ea\u662f\u5077\u61f6\u6216\u8d70\u6377\u5f91\n2. \u5be6\u4f5c\u964d\u4f4e\u4e86\u7a0b\u5f0f\u78bc\u54c1\u8cea\n3. \u5be6\u4f5c\u9055\u53cd\u67b6\u69cb\u539f\u5247\n4. \u50c5\u50c5\u662f\u547d\u540d\u6216\u683c\u5f0f\u5dee\u7570\n</code></pre></p> <p>\u57f7\u884c\u6b65\u9a5f: 1. \u8b58\u5225\u6240\u6709\u53d7\u5f71\u97ff\u7684 TDD tickets 2. \u66f4\u65b0\u7a0b\u5f0f\u78bc\u7bc4\u4f8b 3. \u66f4\u65b0\u547d\u540d\u898f\u7bc4\u8aaa\u660e 4. \u8a18\u9304\u8a2d\u8a08\u6c7a\u7b56\uff08\u70ba\u4f55\u504f\u96e2\u539f TDD\uff09 5. \u751f\u6210 TDD \u66f4\u65b0\u8a18\u9304\u6587\u6a94</p> <p>\u66f4\u65b0\u7684 Tickets: - TDD-010: PrematchCommentAPI - TDD-020: PrematchCommentClient - TDD-022: ChatWebSocketClient</p> <p>\u8f38\u51fa\u6587\u6a94: - <code>tdd_updates_2025-12-05.md</code> - \u8a73\u7d30\u66f4\u65b0\u8a18\u9304</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#5-commit","title":"\u6c7a\u7b56 5: Commit \u62c6\u5206\u7b56\u7565","text":"<p>\u539f\u5247: \u6309\u908f\u8f2f\u529f\u80fd\u62c6\u5206\uff0c\u800c\u975e\u6309\u6a94\u6848\u62c6\u5206</p> <p>\u5be6\u969b\u62c6\u5206: <pre><code>1. chore: update gitignore to exclude buildServer.json\n   \u21b3 \u4e0d\u76f8\u95dc\u65bc ticket\uff0c\u7368\u7acb commit\n\n2. refactor: wrap shared bets metadata in sendable type\n   [FOOTBALL-9180-9184]\n   \u21b3 Sendable \u578b\u5225\u5305\u88dd\u91cd\u69cb\n\n3. refactor: make websocket subscribe method nonisolated\n   [FOOTBALL-9180-9184]\n   \u21b3 WebSocket \u4f75\u767c\u6539\u9032\n\n4. chore: update xcode project configuration\n   [FOOTBALL-9180-9184]\n   \u21b3 \u9805\u76ee\u914d\u7f6e\u66f4\u65b0\n</code></pre></p> <p>\u8a55\u4f30:  - \u2705 \u6bcf\u500b commit \u4ee3\u8868\u4e00\u500b\u908f\u8f2f\u8b8a\u66f4 - \u2705 \u5bb9\u6613 review - \u2705 \u5bb9\u6613 cherry-pick \u6216 revert - \u2705 \u7b26\u5408 Conventional Commits</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#_3","title":"\ud83d\udca1 \u5b78\u7fd2\u8981\u9ede","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#1-swift-concurrency","title":"1. Swift Concurrency \u6df1\u5ea6\u7406\u89e3","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#sendable","title":"Sendable \u5354\u8b70\u7684\u6b63\u78ba\u61c9\u7528","text":"<pre><code>// \u274c \u932f\u8aa4\uff1a\u76f4\u63a5\u4f7f\u7528 non-Sendable \u578b\u5225\nfunc method(data: [String: Any]) async { }\n\n// \u2705 \u6b63\u78ba\uff1a\u5305\u88dd\u6210 Sendable\nstruct DataWrapper: @unchecked Sendable {\n    let value: [String: Any]\n}\nfunc method(data: DataWrapper) async { }\n</code></pre> <p>\u4f55\u6642\u4f7f\u7528 <code>@unchecked Sendable</code>: - \u5305\u88dd Foundation \u578b\u5225\uff08\u5982 Dictionary\uff09 - \u78ba\u4fdd\u5be6\u969b\u4f7f\u7528\u662f\u7dda\u7a0b\u5b89\u5168\u7684 - \u7121\u6cd5\u4fee\u6539\u578b\u5225\u672c\u8eab\u6642\uff08\u5982\u7b2c\u4e09\u65b9\u5eab\uff09</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#actor-isolation","title":"Actor Isolation \u7684\u7d30\u5fae\u5dee\u5225","text":"<pre><code>public actor MyActor {\n    // Actor-isolated: \u9700\u8981 await\n    public func method1() -&gt; String { \"value\" }\n\n    // Nonisolated: \u4e0d\u9700\u8981 await\n    public nonisolated func method2() -&gt; String { \"value\" }\n}\n\n// \u4f7f\u7528\nlet value1 = await actor.method1()  // \u9700\u8981 await\nlet value2 = actor.method2()         // \u4e0d\u9700\u8981 await\n</code></pre> <p>\u4f7f\u7528 nonisolated \u7684\u6642\u6a5f: - \u8fd4\u56de\u503c\u4e0d\u4f9d\u8cf4 actor \u5167\u90e8\u72c0\u614b - \u9700\u8981\u540c\u6b65\u5275\u5efa\u67d0\u4e9b\u7269\u4ef6\uff08\u5982 AsyncStream\uff09 - \u63d0\u4f9b\u66f4\u597d\u7684 API \u6613\u7528\u6027</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#2-git","title":"2. Git \u5de5\u4f5c\u6d41\u7a0b\u6700\u4f73\u5be6\u8e10","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#gitignore","title":".gitignore \u7b56\u7565","text":"<pre><code>\u65b9\u6848 1: .gitignore\uff08\u5718\u968a\u5171\u4eab\uff09\n\u2705 \u512a\u9ede\uff1a\u6240\u6709\u4eba\u53d7\u76ca\uff0c\u898f\u5247\u4e00\u81f4\n\u2705 \u9069\u7528\uff1a\u672c\u5c31\u61c9\u8a72\u662f\u672c\u5730\u914d\u7f6e\u7684\u6a94\u6848\n\n\u65b9\u6848 2: .git/info/exclude\uff08\u500b\u4eba\uff09\n\u2705 \u512a\u9ede\uff1a\u4e0d\u5f71\u97ff\u5176\u4ed6\u4eba\n\u2705 \u9069\u7528\uff1a\u7d14\u500b\u4eba\u504f\u597d\u7684\u5ffd\u7565\u898f\u5247\n</code></pre>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#commit-message","title":"Commit Message \u898f\u7bc4","text":"<pre><code>\u683c\u5f0f\uff1a&lt;type&gt;: &lt;description&gt; [TICKET-ID]\n\nType \u985e\u578b\uff1a\n- feat: \u65b0\u529f\u80fd\n- fix: Bug \u4fee\u5fa9\n- refactor: \u91cd\u69cb\n- chore: \u96dc\u9805\uff08\u914d\u7f6e\u3001\u5de5\u5177\u7b49\uff09\n- docs: \u6587\u4ef6\u66f4\u65b0\n- style: \u683c\u5f0f\u8abf\u6574\n- test: \u6e2c\u8a66\u76f8\u95dc\n- perf: \u6548\u80fd\u512a\u5316\n</code></pre>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#3-tdd","title":"3. TDD \u6587\u4ef6\u7ba1\u7406\u54f2\u5b78","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#_4","title":"\u6587\u4ef6\u8207\u5be6\u4f5c\u7684\u95dc\u4fc2","text":"<pre><code>TDD \u6587\u4ef6 \u2190\u2192 \u5be6\u4f5c\u7a0b\u5f0f\u78bc\n   \u2193           \u2193\n \u61c9\u8a72\u662f      \u53ef\u4ee5\u8d85\u8d8a\n \u6307\u5c0e       \u4e26\u56de\u994b\n   \u2191           \u2193\n   \u2514\u2500\u2500\u2500 \u4e92\u76f8\u6f14\u9032 \u2500\u2500\u2500\u2518\n</code></pre> <p>\u95dc\u9375\u539f\u5247: 1. TDD \u6587\u4ef6\u4e0d\u662f\u8056\u7d93\uff0c\u53ef\u4ee5\u4fee\u6b63 2. \u5be6\u4f5c\u6539\u9032\u61c9\u8a72\u56de\u994b\u5230 TDD 3. \u4fdd\u6301\u6587\u4ef6\u8207\u5be6\u4f5c\u540c\u6b65\u5f88\u91cd\u8981 4. \u8a18\u9304\u70ba\u4f55\u504f\u96e2\u539f TDD</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#_5","title":"\u8a2d\u8a08\u6c7a\u7b56\u8a18\u9304\u7684\u91cd\u8981\u6027","text":"<pre><code>## \u6c7a\u7b56 X: \u6a19\u984c\n\n**\u80cc\u666f**: \u70ba\u4f55\u9700\u8981\u505a\u6c7a\u7b56\n**\u6c7a\u7b56**: \u505a\u4e86\u4ec0\u9ebc\u6c7a\u5b9a\n**\u7406\u7531**: \u70ba\u4f55\u9078\u64c7\u9019\u500b\u65b9\u6848\n**\u5f71\u97ff**: \u6709\u4ec0\u9ebc\u5f71\u97ff\u548c\u9650\u5236\n**\u66ff\u4ee3\u65b9\u6848**: \u8003\u616e\u904e\u4f46\u672a\u63a1\u7528\u7684\u65b9\u6848\n</code></pre>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#4","title":"4. \u67b6\u69cb\u8a2d\u8a08\u539f\u5247","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#_6","title":"\u908a\u754c\u5c64\u7684\u578b\u5225\u8f49\u63db","text":"<pre><code>\u5916\u5c64\uff08Client\uff09     \u2192 \u5f37\u578b\u5225\u5305\u88dd\uff08Sendable\uff09\n      \u2193\n\u4e2d\u9593\u5c64\uff08Repository\uff09\u2192 \u89e3\u5305/\u8f49\u63db\n      \u2193\n\u5167\u5c64\uff08API/Network\uff09\u2192 \u539f\u59cb\u578b\u5225\uff08JSON \u76f8\u5bb9\uff09\n</code></pre> <p>\u539f\u5247: - \u5728\u908a\u754c\u8655\u9032\u884c\u578b\u5225\u8f49\u63db - \u5916\u5c64\u4f7f\u7528\u5f37\u578b\u5225\u4fdd\u8b49\u5b89\u5168 - \u5167\u5c64\u4f7f\u7528\u539f\u59cb\u578b\u5225\u4fdd\u8b49\u76f8\u5bb9</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#protocol","title":"Protocol \u5c0e\u5411\u8a2d\u8a08","text":"<pre><code>// \u2705 \u512a\u79c0\uff1aProtocol + \u5177\u9ad4\u5be6\u4f5c\npublic protocol ClientProtocol: Sendable {\n    func method() async throws -&gt; Data\n}\n\npublic struct Client: ClientProtocol {\n    func method() async throws -&gt; Data { ... }\n}\n\n// \u4f7f\u7528\u6642\u4f9d\u8cf4 Protocol\nfunc useClient(_ client: ClientProtocol) { ... }\n</code></pre> <p>\u512a\u9ede: - \u4f9d\u8cf4\u6ce8\u5165\u5bb9\u6613 - \u6e2c\u8a66 mock \u5bb9\u6613 - \u89e3\u8026\u5408</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#5","title":"5. \u5de5\u5177\u548c\u81ea\u52d5\u5316","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#cursor-commands","title":"Cursor Commands \u8a2d\u8a08","text":"<pre><code>\u597d\u7684 Command \u61c9\u8a72\u5305\u542b\uff1a\n1. \u6e05\u695a\u7684\u4f7f\u7528\u65b9\u5f0f\n2. \u5177\u9ad4\u7684\u57f7\u884c\u6b65\u9a5f\n3. \u8f38\u51fa\u683c\u5f0f\u5b9a\u7fa9\n4. \u4f7f\u7528\u7bc4\u4f8b\n5. \u76f8\u95dc\u6587\u4ef6\u9023\u7d50\n</code></pre> <p>\u4eca\u5929\u512a\u5316\u7684 Command: - <code>check-tdd-consistency.md</code>   - \u65b0\u589e TDD \u66f4\u65b0\u529f\u80fd   - \u65b0\u589e\u66f4\u65b0\u539f\u5247   - \u65b0\u589e\u8f38\u51fa\u6587\u4ef6\u8aaa\u660e</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#_7","title":"\ud83d\ude80 \u6539\u9032\u5efa\u8b70","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#1-p0","title":"1. \u6e2c\u8a66\u81ea\u52d5\u5316\uff08\u512a\u5148\u7d1a\uff1aP0\uff09","text":"<p>\u73fe\u72c0:  - Client Layer \u6e2c\u8a66\u8986\u84cb\u7387 0% - \u624b\u52d5\u6e2c\u8a66\u4e0d\u8db3</p> <p>\u5efa\u8b70: <pre><code>// \u70ba\u6bcf\u500b Client \u6dfb\u52a0\u55ae\u5143\u6e2c\u8a66\nclass PrematchCommentClientTests: XCTestCase {\n    func testPublishComment_withSharedBets() async throws {\n        let meta = SharedBetsMetadata([\"betId\": \"123\"])\n        // ... test implementation\n    }\n}\n</code></pre></p> <p>\u76ee\u6a19:  - \u4e0b\u9031\u5b8c\u6210 Client Layer Unit Test - \u8986\u84cb\u7387 \u2265 80%</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#2-api-p1","title":"2. API \u898f\u683c\u9a57\u8b49\uff08\u512a\u5148\u7d1a\uff1aP1\uff09","text":"<p>\u73fe\u72c0: - WebSocket \u9023\u7dda\u53c3\u6578\u672a\u8207\u5f8c\u7aef\u9a57\u8b49 - STOMP \u8a0a\u606f\u683c\u5f0f\u672a\u78ba\u8a8d</p> <p>\u5efa\u8b70: <pre><code>// Integration Test\nclass ChatWebSocketIntegrationTests: XCTestCase {\n    func testWebSocketConnection() async throws {\n        let client = ChatWebSocketClient(...)\n        try await client.connect()\n        // \u9a57\u8b49\u9023\u7dda\u53c3\u6578\u3001\u8a0a\u606f\u683c\u5f0f\n    }\n}\n</code></pre></p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#3-p2","title":"3. \u6587\u4ef6\u81ea\u52d5\u5316\uff08\u512a\u5148\u7d1a\uff1aP2\uff09","text":"<p>\u73fe\u72c0: - TDD \u6587\u4ef6\u9700\u624b\u52d5\u66f4\u65b0 - \u5bb9\u6613\u907a\u6f0f\u6216\u4e0d\u4e00\u81f4</p> <p>\u5efa\u8b70: \u8003\u616e\u8173\u672c\u81ea\u52d5\u5316\uff1a 1. \u6383\u63cf git diff \u8b58\u5225\u578b\u5225\u8b8a\u66f4 2. \u81ea\u52d5\u66f4\u65b0 TDD \u6587\u4ef6\u7a0b\u5f0f\u78bc\u7bc4\u4f8b 3. \u751f\u6210\u8b8a\u66f4\u8a18\u9304\u8349\u7a3f</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#4-p2","title":"4. \u8a2d\u8a08\u6587\u6a94\u6a21\u677f\u5316\uff08\u512a\u5148\u7d1a\uff1aP2\uff09","text":"<p>\u73fe\u72c0: - \u8a2d\u8a08\u6c7a\u7b56\u8a18\u9304\u683c\u5f0f\u4e0d\u7d71\u4e00</p> <p>\u5efa\u8b70: \u5275\u5efa\u6a19\u6e96\u6a21\u677f\uff1a <pre><code># \u8a2d\u8a08\u6c7a\u7b56\u8a18\u9304: [\u6a19\u984c]\n\n## \u80cc\u666f\n[\u554f\u984c\u63cf\u8ff0]\n\n## \u6c7a\u7b56\n[\u89e3\u6c7a\u65b9\u6848]\n\n## \u7406\u7531\n[\u70ba\u4f55\u9078\u64c7]\n\n## \u5f71\u97ff\n- \u512a\u9ede: ...\n- \u9650\u5236: ...\n- Breaking Changes: ...\n\n## \u66ff\u4ee3\u65b9\u6848\n[\u8003\u616e\u904e\u7684\u5176\u4ed6\u65b9\u6848]\n</code></pre></p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#5-cicd-p3","title":"5. CI/CD \u6574\u5408\uff08\u512a\u5148\u7d1a\uff1aP3\uff09","text":"<p>\u5efa\u8b70: - \u5728 CI \u4e2d\u904b\u884c TDD \u4e00\u81f4\u6027\u6aa2\u67e5 - \u81ea\u52d5\u751f\u6210\u6aa2\u67e5\u5831\u544a - PR \u6642\u986f\u793a\u8986\u84cb\u7387\u8b8a\u5316</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#_8","title":"\ud83d\udcc8 \u9032\u5ea6\u8ffd\u8e64","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#_9","title":"\u672c\u9031\u76ee\u6a19\u9054\u6210\u5ea6","text":"<pre><code>\u2705 Data Layer \u91cd\u69cb              100%\n\u2705 TDD \u6587\u4ef6\u540c\u6b65                 100%\n\u26a0\ufe0f \u6e2c\u8a66\u88dc\u5145                     0%   \u2190 \u4e0b\u9031\u91cd\u9ede\n\u26a0\ufe0f API \u9a57\u8b49                     0%   \u2190 \u4e0b\u9031\u91cd\u9ede\n</code></pre>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#_10","title":"\u4e0b\u9031\u8a08\u756b","text":"<pre><code>Week Focus: Repository Layer + Testing\n\nMon-Tue: Repository Layer \u5be6\u4f5c\nWed-Thu: Client Layer \u6e2c\u8a66\u88dc\u5145\nFri:     API \u6574\u5408\u9a57\u8b49\u8207\u9031\u5831\n</code></pre>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#_11","title":"\ud83c\udf93 \u6280\u8853\u6df1\u5ea6\u5b78\u7fd2","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#swift-concurrency","title":"Swift Concurrency \u5b78\u7fd2\u8cc7\u6e90","text":"<p>\u4eca\u5929\u6df1\u5165\u7406\u89e3\u7684\u6982\u5ff5: 1. <code>@unchecked Sendable</code> \u7684\u4f7f\u7528\u5834\u666f 2. Actor isolation \u8207 nonisolated \u7684\u53d6\u6368 3. AsyncStream \u7684\u6b63\u78ba\u5275\u5efa\u6a21\u5f0f</p> <p>\u63a8\u85a6\u95b1\u8b80: - SE-0302: Sendable and @Sendable closures - SE-0306: Actors - WWDC 2021: Protect mutable state with Swift actors</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#clean-architecture","title":"Clean Architecture \u5be6\u8e10","text":"<p>\u4eca\u5929\u7684\u5be6\u8e10: <pre><code>Presentation Layer\n       \u2193\nFeature Layer (TCA)\n       \u2193\nUseCase Layer (Business Logic)\n       \u2193\nRepository Layer (Data Abstraction)\n       \u2193\nClient Layer (HTTP/WebSocket)  \u2190 \u4eca\u5929\u91cd\u69cb\u7684\u5c64\u7d1a\n       \u2193\nAPI Layer (Endpoint Definition)\n       \u2193\nNetwork Layer\n</code></pre></p> <p>\u5b78\u5230\u7684: - \u908a\u754c\u5c64\u7684\u578b\u5225\u8f49\u63db\u7b56\u7565 - Protocol \u5c0e\u5411\u7684\u4f9d\u8cf4\u6ce8\u5165 - \u95dc\u6ce8\u9ede\u5206\u96e2\u7684\u91cd\u8981\u6027</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#_12","title":"\ud83e\udd1d \u5354\u4f5c\u8207\u6e9d\u901a","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#cursor-ai","title":"\u8207 Cursor AI \u7684\u5354\u4f5c\u6a21\u5f0f","text":"<p>\u6709\u6548\u7684\u5354\u4f5c\u65b9\u5f0f: 1. \u2705 \u63d0\u4f9b\u6e05\u6670\u7684\u4e0a\u4e0b\u6587\uff08\u6a94\u6848\u3001\u9700\u6c42\uff09 2. \u2705 \u4f7f\u7528\u7d50\u69cb\u5316\u7684 Command 3. \u2705 \u5206\u968e\u6bb5\u9a57\u8b49\u7d50\u679c 4. \u2705 \u4e3b\u52d5\u56de\u994b\u548c\u8abf\u6574</p> <p>\u4eca\u5929\u7684\u5354\u4f5c\u6d41\u7a0b: <pre><code>\u9700\u6c42 \u2192 Cursor \u5206\u6790 \u2192 \u65b9\u6848\u5efa\u8b70 \u2192 \n\u7528\u6236\u78ba\u8a8d \u2192 \u5be6\u4f5c \u2192 \u9a57\u8b49 \u2192 \n\u6587\u4ef6\u66f4\u65b0 \u2192 \u7d71\u6574\u5b78\u7fd2\n</code></pre></p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#code-snippets","title":"\ud83d\udcda \u503c\u5f97\u8a18\u9304\u7684 Code Snippets","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#1-sharedbetsmetadata","title":"1. SharedBetsMetadata \u5305\u88dd\u6a21\u5f0f","text":"<pre><code>// \u5b9a\u7fa9\u5305\u88dd\u578b\u5225\npublic struct SharedBetsMetadata: @unchecked Sendable {\n    public let value: [String: Any]\n\n    public init(_ value: [String: Any]) {\n        self.value = value\n    }\n}\n\n// Client \u5c64\u4f7f\u7528\nlet meta = SharedBetsMetadata([\"betId\": \"123\"])\ntry await client.publishComment(..., sharedBetsMeta: meta, ...)\n\n// Repository \u5c64\u89e3\u5305\nfunc publishComment(..., sharedBetsMeta: SharedBetsMetadata?, ...) {\n    let metaDict: [String: Any]? = sharedBetsMeta?.value\n    let endpoint = Endpoint.publishComment(..., sharedBetsMeta: metaDict, ...)\n}\n</code></pre>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#2-nonisolated-asyncstream","title":"2. Nonisolated AsyncStream \u6a21\u5f0f","text":"<pre><code>public actor MyActor {\n    // Nonisolated \u65b9\u6cd5\u540c\u6b65\u5275\u5efa stream\n    public nonisolated func subscribe(id: String) -&gt; AsyncStream&lt;Message&gt; {\n        AsyncStream { continuation in\n            Task {\n                await self.performSubscribe(id: id, continuation: continuation)\n            }\n        }\n    }\n\n    // Actor-isolated \u5be6\u969b\u908f\u8f2f\n    private func performSubscribe(id: String, continuation: AsyncStream&lt;Message&gt;.Continuation) {\n        // \u8a02\u95b1\u908f\u8f2f...\n        continuation.yield(message)\n    }\n}\n</code></pre>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#_13","title":"\ud83d\udcad \u53cd\u601d\u8207\u7e3d\u7d50","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#_14","title":"\u4eca\u5929\u505a\u5f97\u597d\u7684\u5730\u65b9","text":"<ol> <li>\u2705 \u7cfb\u7d71\u6027\u5730\u89e3\u6c7a Sendable \u554f\u984c</li> <li>\u2705 \u5b8c\u6574\u8a18\u9304\u8a2d\u8a08\u6c7a\u7b56</li> <li>\u2705 \u4e3b\u52d5\u66f4\u65b0 TDD \u6587\u4ef6\u4fdd\u6301\u540c\u6b65</li> <li>\u2705 Commit \u62c6\u5206\u6e05\u6670\u5408\u7406</li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#_15","title":"\u53ef\u4ee5\u6539\u9032\u7684\u5730\u65b9","text":"<ol> <li>\u26a0\ufe0f \u6e2c\u8a66\u61c9\u8a72\u8207\u5be6\u4f5c\u540c\u6b65\u5b8c\u6210</li> <li>\u26a0\ufe0f API \u9a57\u8b49\u61c9\u8a72\u66f4\u65e9\u9032\u884c</li> <li>\u26a0\ufe0f \u53ef\u4ee5\u66f4\u65e9\u8207\u5f8c\u7aef\u78ba\u8a8d\u898f\u683c</li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#_16","title":"\u660e\u5929\u7684\u91cd\u9ede","text":"<ol> <li>\u958b\u59cb Repository Layer \u5be6\u4f5c</li> <li>\u88dc\u5145 Client Layer \u6e2c\u8a66</li> <li>\u898f\u5283 Domain Model Layer</li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#_17","title":"\ud83d\udd17 \u76f8\u95dc\u8cc7\u6e90","text":"<ul> <li>Branch: feature/FOOTBALL-9180-9184-DataLayer</li> <li>Commits: 41c38d3, 1f97afa, 163d376, c00431a</li> <li>TDD Reports:</li> <li><code>tdd_consistency_check_2025-12-05.md</code></li> <li><code>tdd_updates_2025-12-05.md</code></li> <li>Changelog: <code>14_Changelog/CHANGELOG.md</code></li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#cursor-ios","title":"\ud83d\udda5\ufe0f Cursor iOS \u958b\u767c\u74b0\u5883\u8a2d\u7f6e\uff08\u4e0b\u5348\u6642\u6bb5\uff09","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#_18","title":"\u74b0\u5883\u8a2d\u7f6e\u76ee\u6a19","text":"<p>\u5efa\u7acb\u5b8c\u6574\u7684 Cursor iOS \u958b\u767c\u74b0\u5883\uff0c\u5be6\u73fe\u5728 Cursor \u4e2d\u76f4\u63a5\u69cb\u5efa\u3001\u904b\u884c\u548c\u8abf\u8a66 iOS app\uff0c\u7121\u9700\u5207\u63db\u5230 Xcode\u3002</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#6-cursor-ios","title":"\u6c7a\u7b56 6: Cursor iOS \u958b\u767c\u5de5\u5177\u93c8\u914d\u7f6e","text":"<p>\u80cc\u666f: - \u9700\u8981\u5728 Cursor \u4e2d\u5be6\u73fe\u5b8c\u6574\u7684 iOS \u958b\u767c\u5de5\u4f5c\u6d41 - \u53c3\u8003 Thomas Ricouard \u7684 Cursor iOS \u958b\u767c\u5be6\u8e10 - \u4f7f\u7528 SweetPad + Xcode Build Server \u6574\u5408</p> <p>\u5b89\u88dd\u7684\u5de5\u5177:</p> <ol> <li> <p>Homebrew \u5de5\u5177:    <pre><code>brew install xcode-build-server  # v1.2.0\nbrew install xcbeautify           # v3.1.1  \nbrew install swiftformat          # v0.58.7\n</code></pre></p> </li> <li> <p>Cursor Extensions:</p> </li> <li><code>sswg.swift-lang</code> (v1.11.4) - Swift \u8a9e\u8a00\u652f\u63f4</li> <li><code>vadimcn.vscode-lldb</code> (v1.12.0) - LLDB \u8abf\u8a66\u5668</li> <li> <p><code>SweetPad</code> - iOS/Swift \u958b\u767c\u6838\u5fc3\u63d2\u4ef6</p> </li> <li> <p>\u914d\u7f6e\u6587\u4ef6:</p> </li> <li><code>.cursor/launch.json</code> - \u8abf\u8a66\u914d\u7f6e</li> <li><code>buildServer.json</code> - Xcode Build Server \u914d\u7f6e</li> </ol> <p>\u914d\u7f6e\u5167\u5bb9:</p> <pre><code>// .cursor/launch.json\n{\n  \"version\": \"0.2.0\",\n  \"configurations\": [{\n    \"type\": \"sweetpad-lldb\",\n    \"request\": \"launch\",\n    \"name\": \"Attach to running app (SweetPad)\",\n    \"preLaunchTask\": \"sweetpad: launch\"\n  }]\n}\n\n// buildServer.json\n{\n  \"name\": \"FCom\",\n  \"uri\": \"file:///Users/reedhsin/Documents/codebase/fcom-iOS\",\n  \"project\": \"FCom.xcodeproj\",\n  \"scheme\": \"FCom\"\n}\n</code></pre>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#7-xcode-select","title":"\u6c7a\u7b56 7: xcode-select \u914d\u7f6e\u4fee\u5fa9","text":"<p>\u554f\u984c: <pre><code>xcode-select: error: tool 'xcodebuild' requires Xcode, \nbut active developer directory '/Library/Developer/CommandLineTools' \nis a command line tools instance\n</code></pre></p> <p>\u539f\u56e0: \u7cfb\u7d71\u6307\u5411 Command Line Tools \u800c\u975e\u5b8c\u6574\u7684 Xcode</p> <p>\u89e3\u6c7a\u65b9\u6848: <pre><code># \u5207\u63db\u5230\u5b8c\u6574\u7684 Xcode\nsudo xcode-select --switch /Applications/Xcode.app/Contents/Developer\n\n# \u9a57\u8b49\nxcode-select -p\nxcodebuild -version\n</code></pre></p> <p>\u7d50\u679c: - Xcode 16.1 (Build 16B40) \u6b63\u78ba\u914d\u7f6e - SweetPad \u53ef\u4ee5\u6b63\u5e38\u69cb\u5efa\u5c08\u6848</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#8-sourcekit-lsp","title":"\u6c7a\u7b56 8: SourceKit-LSP \u7d22\u5f15\u554f\u984c\u8655\u7406","text":"<p>\u554f\u984c: - <code>ChatAPI+WebSocket.swift</code> \u5831\u932f \"Cannot find type 'ChatAPI' in scope\" - \u4f46 <code>ChatAPI.swift</code> \u6587\u4ef6\u5b58\u5728\u4e14\u5176\u4ed6 extension \u6587\u4ef6\u6b63\u5e38</p> <p>\u5206\u6790: - \u6587\u4ef6\u7d50\u69cb\u6b63\u78ba\uff0c\u6240\u6709 extension \u5728\u540c\u4e00\u76ee\u9304 - \u5176\u4ed6 extension \u6587\u4ef6\uff08\u5982 <code>ChatAPI+Endpoint.swift</code>\uff09\u4f7f\u7528\u76f8\u540c\u6a21\u5f0f\u7121\u932f\u8aa4 - \u9019\u662f SourceKit-LSP \u7d22\u5f15\u7684\u66ab\u6642\u6027\u554f\u984c</p> <p>\u89e3\u6c7a\u6b65\u9a5f: <pre><code># 1. \u6e05\u7406\u7de9\u5b58\nrm -rf ~/Library/Caches/com.apple.dt.Xcode\n\n# 2. \u91cd\u555f SourceKit-LSP\nkillall sourcekit-lsp\n\n# 3. \u91cd\u65b0\u751f\u6210 buildServer.json\nxcode-build-server config -workspace FCom.xcodeproj/project.xcworkspace -scheme FCom\n\n# 4. \u91cd\u555f Cursor\n</code></pre></p> <p>\u5b78\u7fd2\u9ede: - SourceKit \u7d22\u5f15\u932f\u8aa4\u4e0d\u4e00\u5b9a\u4ee3\u8868\u4ee3\u78bc\u6709\u554f\u984c - \u6e05\u7406\u7de9\u5b58\u548c\u91cd\u555f\u662f\u5e38\u898b\u89e3\u6c7a\u65b9\u6848 - \u5be6\u969b\u69cb\u5efa\u6210\u529f\u624d\u662f\u771f\u6b63\u7684\u9a57\u8b49</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#_19","title":"\u6210\u529f\u69cb\u5efa\u9a57\u8b49","text":"<p>\u7b2c\u4e00\u6b21\u69cb\u5efa: - Target: FCom - Destination: iPhone 16 Plus, OS=18.1 - \u7d50\u679c: \u2705 Build Succeeded</p> <p>\u69cb\u5efa\u8f38\u51fa: <pre><code>\u2705 Swift Package \u4f9d\u8cf4\u89e3\u6790\u5b8c\u6210\n\u2705 \u7de8\u8b6f\u5b8c\u6210\n\u2705 \u6a21\u64ec\u5668\u555f\u52d5: xcrun simctl boot 581BF0ED...\n\u2705 App \u5b89\u88dd: xcrun simctl install ... FCom.app\n\u2705 App \u555f\u52d5: xcrun simctl launch ... com.sportybet.SportyBet\n\u2705 Firebase \u521d\u59cb\u5316: Version 10.29.0\n</code></pre></p> <p>Warnings \u5206\u6790: - 81 \u500b linter warnings\uff0c\u4e3b\u8981\u985e\u578b\uff1a   - ~50% \u68c4\u7528\u7684 API (iOS 15 UIButton APIs)   - ~20% Swift 6 \u4e26\u767c\u8b66\u544a   - ~20% \u672a\u4f7f\u7528\u7684\u8b8a\u6578   - ~10% \u5176\u4ed6 - \u9019\u4e9b\u662f\u8b66\u544a\u4e0d\u662f\u932f\u8aa4\uff0c\u4e0d\u5f71\u97ff\u904b\u884c - \u53ef\u4ee5\u9010\u6b65\u4fee\u5fa9\uff0c\u4e0d\u7dca\u6025</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#sweetpad","title":"SweetPad \u5de5\u4f5c\u6d41\u7a0b\u5b78\u7fd2","text":"<p>\u57fa\u672c\u64cd\u4f5c:</p> <ol> <li>\u69cb\u5efa\u4e26\u904b\u884c:</li> <li>Command Palette \u2192 <code>Sweetpad: Build &amp; Run (Launch)</code></li> <li>\u9078\u64c7 Target: <code>FCom</code></li> <li> <p>\u9078\u64c7 Destination: iPhone \u6a21\u64ec\u5668</p> </li> <li> <p>\u6e05\u7406\u69cb\u5efa:</p> </li> <li><code>Sweetpad: Clean</code> \u2192 \u6e05\u7406\u69cb\u5efa\u7522\u7269</li> <li> <p>\u6216\u624b\u52d5: <code>rm -rf ~/Library/Developer/Xcode/DerivedData/FCom-*</code></p> </li> <li> <p>\u8abf\u8a66:</p> </li> <li>F5 \u958b\u59cb\u8abf\u8a66</li> <li>\u4f7f\u7528 SweetPad LLDB \u914d\u7f6e</li> <li>\u652f\u63f4\u65b7\u9ede\u548c\u8abf\u7528\u5806\u758a</li> </ol> <p>\u6aa2\u67e5\u69cb\u5efa\u72c0\u614b:</p> <pre><code># \u6aa2\u67e5\u69cb\u5efa\u9032\u7a0b\nps aux | grep xcodebuild\n\n# \u6aa2\u67e5\u6a21\u64ec\u5668\u72c0\u614b  \nxcrun simctl list devices | grep Booted\n\n# \u6aa2\u67e5 App \u662f\u5426\u904b\u884c\nxcrun simctl spawn booted ps aux | grep FCom\n</code></pre>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#_20","title":"\u7d42\u7aef\u6a5f\u554f\u984c\u8655\u7406","text":"<p>\u554f\u984c: Cursor \u7d42\u7aef\u6a5f\u986f\u793a\u7a7a\u767d</p> <p>\u89e3\u6c7a\u65b9\u6848: <pre><code># \u65b9\u6cd5 1: \u91cd\u65b0\u555f\u52d5 shell\nexec zsh\n\n# \u65b9\u6cd5 2: \u5275\u5efa\u65b0\u7d42\u7aef\u6a5f\nCtrl+Shift+` (\u53cd\u5f15\u865f)\n\n# \u65b9\u6cd5 3: \u91cd\u65b0\u8f09\u5165\u8996\u7a97\nCmd+Shift+P \u2192 Developer: Reload Window\n</code></pre></p> <p>\u9a57\u8b49:  \u7d42\u7aef\u6a5f\u6b63\u5e38\u986f\u793a\u63d0\u793a\u7b26\uff1a<code>reedhsin@ReeddeMacBook-Pro fcom-iOS %</code></p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#_21","title":"\u5275\u5efa\u7684\u6587\u6a94","text":"<ol> <li>CURSOR_IOS_SETUP.md - \u5b8c\u6574\u8a2d\u7f6e\u6307\u5357</li> <li>\u5de5\u5177\u5b89\u88dd\u6b65\u9a5f</li> <li>\u914d\u7f6e\u8aaa\u660e</li> <li>\u9a57\u8b49\u6e05\u55ae</li> <li> <p>\u6545\u969c\u6392\u9664</p> </li> <li> <p>CURSOR_IOS_SETUP_PROMPT.md - AI Prompt \u7248\u672c</p> </li> <li>\u53ef\u76f4\u63a5\u8907\u88fd\u7d66 Cursor AI</li> <li> <p>\u81ea\u52d5\u57f7\u884c\u8a2d\u7f6e\u6b65\u9a5f</p> </li> <li> <p>SWEETPAD_BUILD_RUN.md - SweetPad \u4f7f\u7528\u6307\u5357</p> </li> <li>\u4e09\u7a2e\u69cb\u5efa\u65b9\u6cd5</li> <li>\u5e38\u7528\u547d\u4ee4\u53c3\u8003</li> <li> <p>\u6545\u969c\u6392\u9664</p> </li> <li> <p>FIX_XCODE_SELECT.md - xcode-select \u4fee\u5fa9\u6307\u5357</p> </li> <li>\u932f\u8aa4\u8a3a\u65b7</li> <li>\u4fee\u5fa9\u8173\u672c</li> <li> <p>\u9a57\u8b49\u6b65\u9a5f</p> </li> <li> <p>CHECK_SWEETPAD_STATUS.md - \u72c0\u614b\u6aa2\u67e5\u6307\u5357</p> </li> <li>\u591a\u7a2e\u6aa2\u67e5\u65b9\u6cd5</li> <li>\u5be6\u6642\u76e3\u63a7\u8173\u672c</li> <li> <p>\u5feb\u901f\u53c3\u8003\u547d\u4ee4</p> </li> <li> <p>FIX_TERMINAL_BLANK.md - \u7d42\u7aef\u6a5f\u4fee\u5fa9\u6307\u5357</p> </li> <li>\u5e38\u898b\u554f\u984c</li> <li>\u591a\u7a2e\u89e3\u6c7a\u65b9\u6848</li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#_22","title":"\u5b78\u7fd2\u8981\u9ede","text":"<p>1. Cursor + Xcode \u6574\u5408\u67b6\u69cb: <pre><code>Cursor IDE\n    \u2193\nSweetPad Extension\n    \u2193\nXcode Build Server (xcode-build-server)\n    \u2193\nxcodebuild CLI\n    \u2193\nxcbeautify (\u8f38\u51fa\u7f8e\u5316)\n    \u2193\nSimulator/Device\n</code></pre></p> <p>2. \u554f\u984c\u8a3a\u65b7\u6d41\u7a0b: <pre><code>1. \u6aa2\u67e5\u5de5\u5177\u662f\u5426\u5b89\u88dd\uff08brew list\uff09\n2. \u6aa2\u67e5\u914d\u7f6e\u6587\u4ef6\uff08buildServer.json, launch.json\uff09\n3. \u6aa2\u67e5 xcode-select \u914d\u7f6e\n4. \u6aa2\u67e5 SourceKit \u7d22\u5f15\u72c0\u614b\n5. \u67e5\u770b\u7d42\u7aef\u6a5f\u8f38\u51fa\n6. \u6aa2\u67e5 Problems \u9762\u677f\n</code></pre></p> <p>3. \u6700\u4f73\u5be6\u8e10: - \u9047\u5230\u932f\u8aa4\u5148\u770b\u7d42\u7aef\u6a5f\u8f38\u51fa - SourceKit \u932f\u8aa4\u4e0d\u4e00\u5b9a\u662f\u771f\u932f\u8aa4 - \u6e05\u7406\u7de9\u5b58\u662f\u842c\u80fd\u89e3\u6c7a\u65b9\u6848 - \u9a57\u8b49\u69cb\u5efa\u6210\u529f\u624d\u662f\u738b\u9053 - \u8a18\u9304\u8a2d\u7f6e\u6b65\u9a5f\u65b9\u4fbf\u5206\u4eab</p> <p>4. \u53c3\u8003\u8cc7\u6e90: - Cursor \u5b98\u65b9 Swift \u958b\u767c\u6307\u5357 - Thomas Ricouard \u7684 Cursor iOS \u958b\u767c\u5be6\u6230\u6307\u5357</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#_23","title":"\u74b0\u5883\u8a2d\u7f6e\u6210\u679c","text":"<p>\u2705 \u5b8c\u6210\u7684\u914d\u7f6e: - Homebrew \u5de5\u5177\u5b89\u88dd\u5b8c\u6210\uff083\u500b\uff09 - Cursor Extensions \u5b89\u88dd\u5b8c\u6210\uff083\u500b\uff09 - \u914d\u7f6e\u6587\u4ef6\u5275\u5efa\u5b8c\u6210\uff082\u500b\uff09 - xcode-select \u6b63\u78ba\u914d\u7f6e - \u9996\u6b21\u69cb\u5efa\u6210\u529f - App \u5728\u6a21\u64ec\u5668\u4e0a\u904b\u884c</p> <p>\u2705 \u5275\u5efa\u7684\u6587\u6a94: - 6 \u4efd\u5b8c\u6574\u7684\u8a2d\u7f6e\u548c\u4f7f\u7528\u6307\u5357 - \u53ef\u5206\u4eab\u7d66\u5176\u4ed6\u958b\u767c\u8005\u4f7f\u7528</p> <p>\u2705 \u9a57\u8b49\u7684\u529f\u80fd: - \u69cb\u5efa\u5c08\u6848 - \u904b\u884c\u5728\u6a21\u64ec\u5668 - \u7d42\u7aef\u6a5f\u8f38\u51fa - \u554f\u984c\u8a3a\u65b7 - \u72c0\u614b\u6aa2\u67e5</p> <p>\u4e0b\u4e00\u6b65: - \u5b78\u7fd2\u66f4\u591a SweetPad \u9ad8\u7d1a\u529f\u80fd - \u914d\u7f6e\u81ea\u5b9a\u7fa9\u5feb\u6377\u9375 - \u63a2\u7d22\u8abf\u8a66\u529f\u80fd - \u6574\u5408\u5176\u4ed6\u958b\u767c\u5de5\u5177</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#swift","title":"\ud83d\udd27 Swift \u4e26\u767c\u554f\u984c\u4fee\u5fa9\uff08\u665a\u9593\u6642\u6bb5\uff09","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#9-xcode-build-server","title":"\u6c7a\u7b56 9: xcode-build-server \u91cd\u65b0\u5b89\u88dd","text":"<p>\u554f\u984c: - \u9700\u8981\u78ba\u4fdd xcode-build-server \u6b63\u78ba\u5b89\u88dd - \u70ba\u6bcf\u500b Swift Package \u751f\u6210\u7368\u7acb\u7684 buildServer.json</p> <p>\u57f7\u884c: <pre><code># \u91cd\u65b0\u5b89\u88dd xcode-build-server\nbrew uninstall xcode-build-server\nbrew install xcode-build-server  # v1.2.0\n\n# \u70ba\u4e3b\u9805\u76ee\u751f\u6210\u914d\u7f6e\ncd /Users/reedhsin/Documents/codebase/fcom-iOS\nxcode-build-server config -project FCom.xcodeproj -scheme FCom\n\n# \u70ba MatchChat \u751f\u6210\u7368\u7acb\u914d\u7f6e\ncd MatchChat\nxcode-build-server config -project ../FCom.xcodeproj -scheme MatchChat\n</code></pre></p> <p>\u5b78\u7fd2\u9ede: - \u4e00\u500b workspace \u7684 buildServer.json \u5c31\u8db3\u5920 - \u5b50\u76ee\u9304\u7684 buildServer.json \u53ef\u6539\u5584 LSP \u9ad4\u9a57 - \u4f46\u9700\u8981\u5148\u6210\u529f\u7de8\u8b6f\u624d\u80fd\u751f\u6210</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#10-swift-6-concurrency","title":"\u6c7a\u7b56 10: \u4fee\u5fa9 Swift 6 Concurrency \u932f\u8aa4","text":"<p>\u80cc\u666f: MatchChat \u4f7f\u7528 Swift 6.0\uff0c\u555f\u7528\u56b4\u683c\u4e26\u767c\u6aa2\u67e5\uff0c\u5c0e\u81f4\u5169\u500b\u7de8\u8b6f\u932f\u8aa4\uff1a</p> <ol> <li> <p><code>PrematchCommentAPI+Repository.swift:42</code>:    <pre><code>error: non-sendable type '[String : Any]?' in parameter \ncannot cross actor boundary\n</code></pre></p> </li> <li> <p><code>ChatWebSocketClient.swift:178</code>:    <pre><code>error: actor-isolated instance method 'subscribe(chatroomId:)' \ncannot be used to satisfy nonisolated protocol requirement\n</code></pre></p> </li> </ol> <p>\u89e3\u6c7a\u65b9\u6848 1: SharedBetsMetadata Wrapper\uff08\u6700\u7d42\u7248\u672c\uff09</p> <pre><code>// \u5b9a\u7fa9 Sendable wrapper\npublic struct SharedBetsMetadata: @unchecked Sendable {\n    public let value: [String: Any]\n\n    public init(_ value: [String: Any]) {\n        self.value = value\n    }\n}\n\n// \u66f4\u65b0\u6240\u6709\u5c64\u7d1a\u7684\u7c3d\u540d\n// Protocol\nfunc publishComment(..., sharedBetsMeta: SharedBetsMetadata?, ...)\n\n// Repository  \nfunc publishComment(..., sharedBetsMeta: SharedBetsMetadata?, ...) {\n    let metaDict: [String: Any]? = sharedBetsMeta?.value\n    let endpoint = Endpoint.publishComment(..., sharedBetsMeta: metaDict, ...)\n}\n\n// Endpoint (\u4fdd\u6301\u539f\u6a23)\ncase publishComment(..., sharedBetsMeta: [String: Any]?, ...)\n</code></pre> <p>\u8a2d\u8a08\u8003\u91cf: - \u2705 \u7b26\u5408 TDD \u5b9a\u7fa9\uff1a<code>[String: AnyCodable]?</code> \u7684\u8a9e\u610f - \u2705 Response \u7684 <code>sharedBetsMeta: String?</code> \u4fdd\u6301\u4e0d\u8b8a - \u2705 \u652f\u63f4\u4efb\u610f JSON \u7d50\u69cb - \u26a0\ufe0f \u4f7f\u7528 <code>@unchecked Sendable</code>\uff08\u9700\u958b\u767c\u8005\u78ba\u4fdd\u7dda\u7a0b\u5b89\u5168\uff09</p> <p>\u89e3\u6c7a\u65b9\u6848 2: ChatWebSocketClient.subscribe Nonisolated</p> <pre><code>// \u5c07 subscribe \u6a19\u8a18\u70ba nonisolated\npublic actor ChatWebSocketClient {\n    public nonisolated func subscribe(chatroomId: String) \n        -&gt; AsyncStream&lt;ChatAPI.WebSocketMessageDTO&gt; {\n        AsyncStream { continuation in\n            Task {\n                await self.performSubscribe(\n                    chatroomId: chatroomId,\n                    continuation: continuation\n                )\n            }\n        }\n    }\n\n    // Actor-isolated \u5be6\u969b\u908f\u8f2f\n    private func performSubscribe(\n        chatroomId: String,\n        continuation: AsyncStream&lt;...&gt;.Continuation\n    ) {\n        // \u8a02\u95b1\u908f\u8f2f...\n    }\n}\n\n// ChatroomSubscription \u4e5f\u9700\u8abf\u6574\nprivate class ChatroomSubscription {\n    func addSubscriber(id: UUID, continuation: AsyncStream&lt;...&gt;.Continuation) {\n        continuationsLock.lock()\n        defer { continuationsLock.unlock() }\n        messageContinuations[id] = continuation\n    }\n}\n</code></pre> <p>\u6539\u9032\u539f\u7406: 1. <code>nonisolated</code> \u65b9\u6cd5\u540c\u6b65\u5275\u5efa <code>AsyncStream</code> 2. \u5be6\u969b\u8a02\u95b1\u908f\u8f2f\u5728 <code>Task</code> \u4e2d\u7570\u6b65\u57f7\u884c 3. Protocol \u4e5f\u6a19\u8a18\u70ba <code>nonisolated</code> 4. \u6539\u5584 API \u6613\u7528\u6027\uff0c\u7121\u9700 <code>await</code></p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#11-tdd","title":"\u6c7a\u7b56 11: TDD \u6587\u4ef6\u4e00\u81f4\u6027\u6aa2\u67e5\u8207\u4fee\u6b63","text":"<p>\u554f\u984c\u767c\u73fe: \u7528\u6236\u8a62\u554f\uff1a\u300c\u9019\u500b\u4fee\u5fa9\u6709\u8207 TDDs \u6587\u4ef6\u5b9a\u7fa9\u4e00\u81f4\u55ce\uff1f\u300d</p> <p>\u6aa2\u67e5\u7d50\u679c: - TDD \u5b9a\u7fa9\uff08\u7b2c 294 \u884c\uff09\uff1a<code>sharedBetsMeta: [String: AnyCodable]?</code> - Response DTO\uff08\u7b2c 162 \u884c\uff09\uff1a<code>sharedBetsMeta: String?</code></p> <p>\u4e0d\u4e00\u81f4\u4e4b\u8655: - TDD \u4e2d Request \u548c Response \u7684\u578b\u5225\u5b9a\u7fa9\u4e0d\u4e00\u81f4 - Request \u662f Dictionary\uff0cResponse \u662f String</p> <p>\u4fee\u6b63\u65b9\u6848: \u6700\u7d42\u63a1\u7528 <code>SharedBetsMetadata</code> wrapper\uff0c\u56e0\u70ba\uff1a 1. \u8a9e\u610f\u4e0a\u7b49\u540c\u65bc <code>[String: AnyCodable]?</code> 2. \u89e3\u6c7a Sendable \u554f\u984c 3. \u578b\u5225\u66f4\u660e\u78ba</p> <p>\u4e00\u81f4\u6027\u78ba\u8a8d: \u2705  - Request: <code>SharedBetsMetadata</code> \u5c01\u88dd <code>[String: Any]</code> - Response: <code>String?</code> (JSON string) - \u7b26\u5408 API \u5be6\u969b\u884c\u70ba</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#12-gitignore","title":"\u6c7a\u7b56 12: .gitignore \u66f4\u65b0","text":"<p>\u80cc\u666f: - <code>buildServer.json</code> \u662f\u672c\u5730\u914d\u7f6e\u6587\u4ef6 - \u6bcf\u500b\u958b\u767c\u8005\u74b0\u5883\u4e0d\u540c - \u5728 git \u64cd\u4f5c\u4e2d\u6703\u9020\u6210\u885d\u7a81</p> <p>\u6c7a\u7b56: <pre><code># \u52a0\u5165 .gitignore\necho \"buildServer.json\" &gt;&gt; .gitignore\n\n# \u522a\u9664\u5df2\u8ffd\u8e64\u7684\u6587\u4ef6\ngit rm --cached buildServer.json\ngit rm --cached MatchChat/buildServer.json\n</code></pre></p> <p>\u539f\u56e0: - <code>buildServer.json</code> \u5305\u542b\u672c\u5730\u8def\u5f91\uff08DerivedData\uff09 - \u985e\u4f3c <code>.vscode/settings.json</code> \u7684\u6027\u8cea - \u61c9\u8a72\u662f\u6bcf\u500b\u958b\u767c\u8005\u81ea\u5df1\u751f\u6210</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#_24","title":"\u7de8\u8b6f\u9a57\u8b49","text":"<p>\u7b2c\u4e00\u6b21\u5617\u8a66: \u274c  <pre><code>error: non-sendable type '[String : Any]?' in parameter\n</code></pre></p> <p>\u7b2c\u4e8c\u6b21\u5617\u8a66: \u274c <pre><code>error: cannot convert value of type '[String : Any]?' \nto expected argument type '[String : String]?'\n</code></pre></p> <p>\u554f\u984c\u8a3a\u65b7: - <code>search_replace</code> \u5de5\u5177\u7684\u66f4\u65b0\u672a\u751f\u6548 - \u9700\u8981\u4f7f\u7528 <code>sed</code> \u76f4\u63a5\u4fee\u6539\u6587\u4ef6</p> <p>\u6700\u7d42\u4fee\u5fa9: <pre><code>sed -i '' 's/sharedBetsMeta: \\[String: String\\]/sharedBetsMeta: [String: Any]/g' \\\n  PrematchCommentAPI+Endpoint.swift\n</code></pre></p> <p>\u6700\u7d42\u7d50\u679c: \u2705 BUILD SUCCEEDED</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#_25","title":"\u66f4\u65b0\u7684\u6587\u4ef6","text":"<p>\u4fee\u6539\u7684\u6587\u4ef6: 1. <code>PrematchCommentAPI+RepositoryProtocol.swift</code> - \u65b0\u589e SharedBetsMetadata 2. <code>PrematchCommentAPI+Repository.swift</code> - \u4f7f\u7528 wrapper 3. <code>PrematchCommentAPI+Endpoint.swift</code> - \u4fdd\u6301 <code>[String: Any]</code> 4. <code>PrematchCommentClient.swift</code> - \u4f7f\u7528 wrapper 5. <code>PrematchCommentClientProtocol.swift</code> - \u4f7f\u7528 wrapper 6. <code>ChatWebSocketClient.swift</code> - nonisolated subscribe 7. <code>ChatWebSocketClientProtocol.swift</code> - nonisolated subscribe 8. <code>.gitignore</code> - \u52a0\u5165 buildServer.json</p> <p>\u65b0\u589e\u7684\u6587\u4ef6: - <code>buildServer.json</code> (\u6839\u76ee\u9304) - <code>MatchChat/buildServer.json</code> (\u624b\u52d5\u5275\u5efa)</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#_26","title":"\u5b78\u7fd2\u8981\u9ede\u88dc\u5145","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#swift-6-strict-concurrency-mode","title":"Swift 6 Strict Concurrency Mode","text":"<p>\u555f\u7528\u65b9\u5f0f: <pre><code>// Package.swift\n// swift-tools-version: 6.0\n</code></pre></p> <p>\u5f71\u97ff: - \u56b4\u683c\u6aa2\u67e5 Sendable \u5354\u8b70 - Actor isolation \u898f\u5247 - \u8de8 actor boundary \u7684\u578b\u5225\u50b3\u905e</p> <p>\u5e38\u898b\u932f\u8aa4: 1. Non-sendable type crossing actor boundary 2. Actor-isolated method satisfying nonisolated protocol 3. Data race detection</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#unchecked-sendable","title":"@unchecked Sendable \u4f7f\u7528\u6642\u6a5f","text":"<p>\u9069\u7528\u5834\u666f: - \u2705 \u5305\u88dd Foundation \u578b\u5225\uff08\u5982 Dictionary\uff09 - \u2705 \u78ba\u4fdd\u5be6\u969b\u4f7f\u7528\u662f\u7dda\u7a0b\u5b89\u5168\u7684 - \u2705 \u7121\u6cd5\u4fee\u6539\u578b\u5225\u672c\u8eab\u6642</p> <p>\u4f7f\u7528\u539f\u5247: - \u26a0\ufe0f \u8b39\u614e\u4f7f\u7528\uff0c\u9700\u78ba\u4fdd\u7dda\u7a0b\u5b89\u5168 - \u26a0\ufe0f \u6dfb\u52a0\u8a3b\u91cb\u8aaa\u660e\u70ba\u4f55\u5b89\u5168 - \u26a0\ufe0f \u8003\u616e\u672a\u4f86\u662f\u5426\u6709\u66f4\u597d\u7684\u65b9\u6848</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#_27","title":"\u5de5\u5177\u4f7f\u7528\u6280\u5de7","text":"<p>search_replace \u5de5\u5177\u9650\u5236: - \u6709\u6642\u66f4\u65b0\u4e0d\u6703\u7acb\u5373\u751f\u6548 - \u53ef\u80fd\u662f\u7de9\u5b58\u6216\u6642\u5e8f\u554f\u984c - \u5099\u7528\u65b9\u6848\uff1a\u4f7f\u7528 terminal <code>sed</code> \u547d\u4ee4</p> <p>\u9a57\u8b49\u65b9\u6cd5: <pre><code># \u76f4\u63a5\u6aa2\u67e5\u6587\u4ef6\u5167\u5bb9\ngrep -n \"pattern\" file.swift\n\n# \u6216\u4f7f\u7528 cat\ncat file.swift | grep \"pattern\"\n</code></pre></p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#_28","title":"\u554f\u984c\u6392\u67e5\u6d41\u7a0b","text":"<p>\u7de8\u8b6f\u5931\u6557\u8a3a\u65b7\u6d41\u7a0b: <pre><code>1. \u770b\u932f\u8aa4\u8a0a\u606f\u627e\u51fa\u5177\u9ad4\u884c\u6578\n   \u2193\n2. \u6aa2\u67e5\u76f8\u95dc\u6587\u4ef6\u7684\u578b\u5225\u5b9a\u7fa9\n   \u2193\n3. \u78ba\u8a8d Protocol\u3001\u5be6\u4f5c\u3001\u8abf\u7528\u65b9\u4e00\u81f4\u6027\n   \u2193\n4. \u9a57\u8b49\u4fee\u6539\u662f\u5426\u771f\u7684\u751f\u6548\uff08grep \u6aa2\u67e5\uff09\n   \u2193\n5. \u6e05\u7406\u7de8\u8b6f\u7de9\u5b58\u5f8c\u91cd\u8a66\n   \u2193\n6. \u9010\u6b65\u9a57\u8b49\u6bcf\u5c64\u7684\u578b\u5225\u5339\u914d\n</code></pre></p> <p>\u672c\u6b21\u5be6\u969b\u6d41\u7a0b: <pre><code>\u932f\u8aa4 1: [String: Any]? \u4e0d\u662f Sendable\n  \u2193\n\u89e3\u6c7a: \u5275\u5efa SharedBetsMetadata wrapper\n  \u2193\n\u932f\u8aa4 2: [String: Any]? \u7121\u6cd5\u8f49\u63db\u70ba [String: String]?\n  \u2193\n\u6aa2\u67e5: Endpoint \u5b9a\u7fa9\u4ecd\u662f\u820a\u7684\n  \u2193\n\u89e3\u6c7a: \u4f7f\u7528 sed \u76f4\u63a5\u4fee\u6539\n  \u2193\n\u2705 BUILD SUCCEEDED\n</code></pre></p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-04/#_29","title":"\u4e0b\u6b21\u6539\u9032\u5efa\u8b70","text":"<ol> <li>\u5de5\u5177\u4f7f\u7528:</li> <li>search_replace \u5f8c\u7acb\u5373\u9a57\u8b49</li> <li>\u91cd\u8981\u4fee\u6539\u8003\u616e\u5148\u7528 sed</li> <li> <p>\u5efa\u7acb\u9a57\u8b49\u8173\u672c</p> </li> <li> <p>\u578b\u5225\u8a2d\u8a08:</p> </li> <li>\u63d0\u65e9\u8003\u616e Sendable \u9700\u6c42</li> <li>\u908a\u754c\u5c64\u578b\u5225\u8f49\u63db\u7b56\u7565</li> <li> <p>Protocol \u8a2d\u8a08\u8003\u616e\u4e26\u767c</p> </li> <li> <p>\u6e2c\u8a66\u8986\u84cb:</p> </li> <li>\u4e26\u767c\u5834\u666f\u7684\u6e2c\u8a66</li> <li>Actor boundary \u6e2c\u8a66</li> <li>\u578b\u5225\u5b89\u5168\u6e2c\u8a66</li> </ol> <p>\u7d71\u6574\u5b8c\u6210\u6642\u9593: 2025-12-05 00:30 \u4e0b\u6b21\u7d71\u6574: 2025-12-05 (\u4eca\u5929)</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/","title":"2025-12-08 \u5c0d\u8a71\u7d71\u6574","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#_1","title":"\ud83d\udcc5 \u5c0d\u8a71\u8cc7\u8a0a","text":"<ul> <li>\u65e5\u671f: 2025-12-08</li> <li>\u4e3b\u984c: MatchChat Integration Tests \u8a2d\u8a08\u8207\u5be6\u4f5c</li> <li>\u76f8\u95dc Tickets: TDD-030, TDD-022, TDD-031, TDD-040</li> <li>\u5c0d\u8a71\u6642\u9577: \u5168\u5929</li> <li>\u4e3b\u8981\u6210\u5c31: \u5b8c\u6210\u5b8c\u6574\u7684 Integration Tests \u6846\u67b6\u548c\u5be6\u4f5c</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#_2","title":"\ud83c\udfaf \u91cd\u8981\u6c7a\u7b56","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#1-a-b","title":"\u6c7a\u7b56 1: \u6e2c\u8a66\u7b56\u7565\u9078\u64c7 - \u65b9\u6848 A + \u90e8\u5206\u65b9\u6848 B","text":"<p>\u80cc\u666f: \u9700\u8981\u6e2c\u8a66 MatchChat \u6a21\u7d44\u7684 API Layer \u5be6\u4f5c\u662f\u5426\u6b63\u78ba\uff0c\u80fd\u5426\u6210\u529f\u6253\u771f\u5be6\u7684 server \u4e26\u6b63\u78ba parse response\u3002</p> <p>\u554f\u984c\u5206\u6790: - \u65b9\u6848 1: Pure Integration Test\uff08\u6253\u771f\u5be6 API\uff09 - \u65b9\u6848 2: Contract Test with Recorded Responses - \u65b9\u6848 3: Hybrid\uff08Unit Tests + Integration Tests\uff09 - \u65b9\u6848 4: VCR/Cassette Pattern</p> <p>\u6c7a\u7b56\u5167\u5bb9: \u63a1\u7528\u65b9\u6848 3\uff08Hybrid\uff09\u7684 Integration Tests \u90e8\u5206\uff1a - \u4f7f\u7528 <code>.test</code> \u74b0\u5883\uff08\u81ea\u52d5\u6307\u5411 <code>https://www.encorebet.net</code>\uff09 - \u6e2c\u8a66\u5e33\u865f\u8cc7\u8a0a\u914d\u7f6e\u5728 scheme \u74b0\u5883\u8b8a\u6578\u4e2d - \u4e0d\u9700\u8981\u81ea\u5b9a\u7fa9 <code>TEST_SERVER_URL</code></p> <p>\u74b0\u5883\u8b8a\u6578\u914d\u7f6e: <pre><code>&lt;EnvironmentVariable key=\"INTEGRATION_TEST_USERNAME\" value=\"262001001\" /&gt;\n&lt;EnvironmentVariable key=\"INTEGRATION_TEST_PASSWORD\" value=\"Test1234gh\" /&gt;\n&lt;EnvironmentVariable key=\"INTEGRATION_TEST_COUNTRY_CODE\" value=\"gh\" /&gt;\n</code></pre></p> <p>\u7406\u7531: - \u2705 \u6700\u771f\u5be6\uff0c\u53ef\u4ee5\u6293\u5230 API contract \u4e0d\u4e00\u81f4\u7684\u554f\u984c - \u2705 \u9a57\u8b49\u6574\u500b\u6d41\u7a0b\uff08network \u2192 parsing \u2192 model\uff09 - \u2705 \u7c21\u55ae\u76f4\u63a5\uff0c\u4e0d\u9700\u8981\u984d\u5916\u7684\u9304\u88fd/\u56de\u653e\u6a5f\u5236 - \u26a0\ufe0f \u4f46\u9700\u8981\u771f\u5be6 server \u548c\u6709\u6548\u7684\u6e2c\u8a66\u8cc7\u6599</p> <p>\u5f71\u97ff: - \u9700\u8981\u5b9a\u671f\u57f7\u884c\uff08\u6bcf\u9031\u6216 API \u8b8a\u66f4\u6642\uff09 - \u4e0d\u5728 CI pipeline \u4e2d\u57f7\u884c - \u9700\u8981\u7dad\u8b77\u6e2c\u8a66\u8cc7\u6599\u7684\u6709\u6548\u6027</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#2-api-layer","title":"\u6c7a\u7b56 2: \u6e2c\u8a66\u5c64\u7d1a\u9078\u64c7 - \u512a\u5148\u6e2c\u8a66 API Layer","text":"<p>\u554f\u984c\u5206\u6790: MatchChat \u6709\u5169\u5c64\u67b6\u69cb\uff1a <pre><code>Repository Layer (LiveChatRepository)\n    \u2193 \u7d44\u5408 HTTP + WebSocket\n    \u2193 DTO \u2192 Domain Model \u8f49\u63db\n    \u2193 \u696d\u52d9\u908f\u8f2f\uff08\u9ed1\u540d\u55ae\u904e\u6ffe\uff09\nAPI Layer (ChatAPI.ChatRepository)\n    \u2193 \u7d14\u7cb9 HTTP API \u547c\u53eb\n    \u2193 \u8fd4\u56de DTO\n</code></pre></p> <p>\u6c7a\u7b56\u5167\u5bb9: \u512a\u5148\u6e2c\u8a66 API Layer\uff08<code>ChatAPI.ChatRepository</code>, <code>PrematchCommentAPI.PrematchCommentRepository</code>\uff09</p> <p>\u7406\u7531: 1. \u2705 \u9a57\u8b49 API contract - \u78ba\u4fdd request \u683c\u5f0f\u3001response parsing \u6b63\u78ba 2. \u2705 \u7368\u7acb\u6e2c\u8a66 - \u4e0d\u9700\u8981 WebSocket\u3001\u4e0d\u9700\u8981 domain model \u8f49\u63db\u908f\u8f2f 3. \u2705 \u5feb\u901f\u5b9a\u4f4d\u554f\u984c - \u5982\u679c API \u6709\u8b8a\u52d5\uff0c\u76f4\u63a5\u5728\u9019\u5c64\u5c31\u80fd\u6293\u5230 4. \u2705 \u6e2c\u8a66\u6240\u6709 endpoint - \u5305\u62ec Repository Layer \u6c92\u7528\u5230\u7684\uff08\u5982 <code>bulkLeaveChatroom</code>\uff09 5. \u2705 ROI \u6700\u9ad8 - \u76f4\u63a5\u9a57\u8b49\u4f60\u8ddf backend \u7684 contract</p> <p>Repository Layer \u7684\u8003\u91cf: - DTO \u2192 Domain Model \u7684\u8f49\u63db\u66f4\u9069\u5408 unit test\uff08\u7528 mock DTO\uff09 - \u7279\u6b8a\u696d\u52d9\u908f\u8f2f\uff08\u9ed1\u540d\u55ae\u904e\u6ffe\uff09\u53ef\u4ee5\u5728 unit test \u4e2d\u6e2c\u8a66 - End-to-End \u6e2c\u8a66\u53ef\u4ee5\u5f8c\u7e8c\u518d\u8a55\u4f30</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#3-scheme-integration-tests-scheme","title":"\u6c7a\u7b56 3: Scheme \u914d\u7f6e - \u5275\u5efa\u7368\u7acb\u7684 Integration Tests Scheme","text":"<p>\u80cc\u666f: \u76ee\u524d\u53ea\u6709 <code>MatchChatTests</code> \u5728 <code>All Tests.xcscheme</code> \u4e2d\uff0c\u4f46 <code>MatchChatIntegrationTests</code> \u9084\u6c92\u88ab\u52a0\u9032\u4efb\u4f55 scheme\u3002</p> <p>\u6c7a\u7b56\u5167\u5bb9: \u5275\u5efa\u7368\u7acb\u7684 <code>MatchChatIntegrationTests.xcscheme</code></p> <p>\u53c3\u8003\u73fe\u6709\u6a21\u5f0f: <pre><code>All Tests.xcscheme\n\u2514\u2500\u2500 MatchChatTests \u2713           # Unit tests (CI \u8dd1)\n\nMatchChatIntegrationTests.xcscheme  \u2190 \u65b0\u5efa\n\u2514\u2500\u2500 MatchChatIntegrationTests \u2713     # Integration tests (\u624b\u52d5\u8dd1)\n</code></pre></p> <p>\u985e\u4f3c\u65bc\uff1a - <code>SportyBetUITests.xcscheme</code> - <code>SportyBetUIPerformanceTests.xcscheme</code> - <code>SportyBetSnapshotTests.xcscheme</code></p> <p>\u512a\u9ede: - \u2705 \u9694\u96e2\u624b\u52d5\u6e2c\u8a66 - \u4e0d\u6703\u5728\u8dd1 <code>All Tests</code> \u6642\u4e0d\u5c0f\u5fc3\u89f8\u767c - \u2705 \u5c08\u7528\u914d\u7f6e - \u53ef\u4ee5\u8a2d\u5b9a\u4e0d\u540c\u7684\u74b0\u5883\u8b8a\u6578 - \u2705 \u660e\u78ba\u610f\u5716 - \u5718\u968a\u6210\u54e1\u77e5\u9053\u9019\u662f\u9700\u8981\u624b\u52d5\u8dd1\u7684 integration tests - \u2705 CI \u53ef\u4ee5\u5ffd\u7565 - \u4e0d\u6703\u5f71\u97ff CI pipeline</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#4-networkservice","title":"\u6c7a\u7b56 4: \u8a8d\u8b49\u5be6\u4f5c\u8a2d\u8a08 - \u4f7f\u7528 NetworkService \u6539\u5beb","text":"<p>\u80cc\u666f: Integration tests \u9700\u8981\u8a8d\u8b49\u624d\u80fd\u547c\u53eb API\uff0c\u4f46\u4e0d\u61c9\u8a72\u4f9d\u8cf4\u6574\u500b production code \u7684\u8a8d\u8b49\u7cfb\u7d71\u3002</p> <p>\u539f\u59cb\u5be6\u4f5c\uff08SportyAPI\uff09: <pre><code>extension SportyAPI {\n    func getAccessTokenHashingPassword(username: String, password: String) {\n        let passwordHash = password.data(using: .utf8)!.md5Hash()\n        // ... \u4f7f\u7528 SportyAPI \u7684\u5167\u90e8\u6a5f\u5236\n    }\n}\n</code></pre></p> <p>\u6c7a\u7b56\u5167\u5bb9: \u5275\u5efa <code>AuthenticationTestHelper</code>\uff0c\u7528 NetworkService \u6539\u5beb\uff1a</p> <pre><code>actor AuthenticationTestHelper {\n    private enum AuthEndpoint: APIEndpoint {\n        case getAccessToken(username: String, passwordHash: String)\n        // \u5be6\u4f5c baseURL, path, method, parameters\n    }\n\n    func getAccessToken(username: String, password: String) async throws -&gt; TestCredentials {\n        let passwordHash = password.data(using: .utf8)!.md5Hash()\n        let endpoint = AuthEndpoint.getAccessToken(username: username, passwordHash: passwordHash)\n        let apiClient = APIClient()\n        let response: AccessTokenResponse = try await apiClient.request(endpoint)\n        return TestCredentials(accessToken: response.data.accessToken, userId: response.data.userId)\n    }\n}\n</code></pre> <p>\u95dc\u9375\u8a2d\u8a08: 1. \u53ea\u653e\u5728 test target - \u4e0d\u6c61\u67d3 production code 2. \u5275\u5efa\u8f15\u91cf\u7d1a <code>TestCredentials</code> - \u907f\u514d\u4f9d\u8cf4\u6574\u500b <code>SportyAccount</code> module 3. \u5f9e\u74b0\u5883\u8b8a\u6578\u8b80\u53d6 - <code>getAccessTokenFromEnvironment()</code></p> <p>\u512a\u9ede: - \u2705 \u6e2c\u8a66\u7368\u7acb\u6027\u9ad8 - \u2705 \u4e0d\u4f9d\u8cf4 production code \u7684\u5167\u90e8\u5be6\u4f5c - \u2705 \u6e05\u6670\u7684\u6e2c\u8a66\u610f\u5716 - \u2705 \u5bb9\u6613\u7dad\u8b77</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#5-package","title":"\u6c7a\u7b56 5: Package \u4f9d\u8cf4\u914d\u7f6e","text":"<p>\u554f\u984c\u5206\u6790: \u9047\u5230 <code>No such module 'MatchChat'</code> \u548c <code>No such module 'Models'</code> \u932f\u8aa4\u3002</p> <p>\u6839\u672c\u539f\u56e0: 1. <code>Crypto</code> \u88ab\u8aa4\u8a8d\u70ba\u662f <code>Networking</code> \u7684 product\uff08\u5be6\u969b\u4e0a\u662f\u7368\u7acb package\uff09 2. Test target \u7f3a\u5c11\u5fc5\u8981\u7684 package dependencies 3. Import \u4e86\u4e0d\u9700\u8981\u7684 modules</p> <p>\u6c7a\u7b56\u5167\u5bb9:</p> <pre><code>// Package.swift\ndependencies: [\n    // ... existing dependencies\n    .package(url: \"git@github.com:opennetltd/Crypto.git\", exact: \"1.0.0\"),  // \u65b0\u589e\n    .package(path: \"../SportyAccount\"),  // \u65b0\u589e\n    .package(path: \"../SportyAPI\"),      // \u65b0\u589e\n]\n\n.testTarget(\n    name: \"MatchChatIntegrationTests\",\n    dependencies: [\n        \"MatchChat\",\n        .product(name: \"NetworkService\", package: \"Networking\"),\n        \"Crypto\",                        // \u7368\u7acb package\n        \"Models\",\n        \"SportyFoundation\",\n        .product(name: \"SportyAccount\", package: \"SportyAccount\"),\n        .product(name: \"SportyAccountTestSupport\", package: \"SportyAccount\"),\n        .product(name: \"SportyAPI\", package: \"SportyAPI\"),\n        .product(name: \"SportyAPITestHelpers\", package: \"SportyAPI\"),\n    ]\n)\n</code></pre> <p>\u4fee\u6b63 imports: <pre><code>// \u79fb\u9664\nimport SportyAccount  // \u6539\u7528 TestCredentials\nimport NetworkServiceTestHelpers  // \u672a\u4f7f\u7528\n\n// \u4fdd\u7559\nimport Foundation\nimport Models\nimport NetworkService\nimport SportyFoundation\nimport Testing\n@testable import MatchChat\n</code></pre></p> <p>\u5b78\u7fd2\u8981\u9ede: - <code>Crypto</code> \u662f\u7368\u7acb package\uff0c\u4e0d\u662f <code>Networking</code> \u7684 product - Test target \u9700\u8981\u660e\u78ba\u8072\u660e\u6240\u6709\u4f9d\u8cf4 - \u4f7f\u7528 <code>.product()</code> \u5f15\u7528\u5176\u4ed6 package \u7684 products</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#_3","title":"\ud83d\udcda \u5b78\u7fd2\u8981\u9ede","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#1-integration-tests","title":"1. Integration Tests \u6700\u4f73\u5be6\u8e10","text":"<p>\u6e2c\u8a66\u5c64\u7d1a\u9078\u64c7: - \u512a\u5148\u6e2c\u8a66 API Layer\uff0c\u9a57\u8b49 API contract - Repository Layer \u7684\u8f49\u63db\u908f\u8f2f\u7528 unit test - End-to-End tests \u53ef\u4ee5\u5f8c\u7e8c\u518d\u8a55\u4f30</p> <p>\u74b0\u5883\u914d\u7f6e: - \u4f7f\u7528 <code>.test</code> \u74b0\u5883\u800c\u975e\u81ea\u5b9a\u7fa9\u74b0\u5883\u8b8a\u6578 - Scheme \u74b0\u5883\u8b8a\u6578\u914d\u7f6e\u6e2c\u8a66\u5e33\u865f - \u7368\u7acb scheme \u914d\u7f6e\uff0c\u907f\u514d\u5728 CI \u4e2d\u57f7\u884c</p> <p>\u6587\u6a94\u5b8c\u6574\u6027: - \u57f7\u884c\u6307\u5357\uff08\u5982\u4f55\u57f7\u884c\u3001\u74b0\u5883\u914d\u7f6e\uff09 - \u6e2c\u8a66\u8cc7\u6599\u914d\u7f6e\u6307\u5357\uff08\u5982\u4f55\u53d6\u5f97\u3001\u5982\u4f55\u66f4\u65b0\uff09 - Troubleshooting \u5e38\u898b\u554f\u984c</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#2-swift-package","title":"2. Swift Package \u4f9d\u8cf4\u7ba1\u7406","text":"<p>Package vs Product: <pre><code>// Package - \u7368\u7acb\u7684 dependency\n.package(url: \"git@github.com:opennetltd/Crypto.git\", exact: \"1.0.0\")\n\n// Product - package \u63d0\u4f9b\u7684 library/executable\n.product(name: \"NetworkService\", package: \"Networking\")\n</code></pre></p> <p>Test Target \u4f9d\u8cf4: - \u9700\u8981\u660e\u78ba\u8072\u660e\u6240\u6709\u4f9d\u8cf4 - \u5305\u62ec test helpers\uff08\u5982 <code>SportyAccountTestSupport</code>\uff09 - \u4e0d\u6703\u81ea\u52d5\u7e7c\u627f main target \u7684\u4f9d\u8cf4</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#3","title":"3. \u6e2c\u8a66\u8cc7\u6599\u7ba1\u7406","text":"<p>\u6e2c\u8a66\u8cc7\u6599\u8981\u6c42: - \u5fc5\u9808\u662f\u6709\u6548\u7684\u6bd4\u8cfd ID\uff08<code>sr:match:XXXXXXXX</code>\uff09 - \u6bd4\u8cfd\u72c0\u614b\u70ba\u300c\u5373\u5c07\u958b\u59cb\u300d\u6216\u300c\u9032\u884c\u4e2d\u300d - \u5efa\u8b70\u4f7f\u7528\u71b1\u9580\u6bd4\u8cfd\uff08\u6709\u8db3\u5920\u7684\u8a0a\u606f\u548c\u8a55\u8ad6\uff09</p> <p>\u53d6\u5f97\u65b9\u5f0f: 1. \u5f9e test server \u7db2\u7ad9\u53d6\u5f97\uff08https://www.encorebet.net\uff09 2. \u5f9e API response \u53d6\u5f97 3. \u806f\u7e6b QA/Backend team \u53d6\u5f97\u56fa\u5b9a\u7684\u6e2c\u8a66\u8cc7\u6599</p> <p>\u7dad\u8b77\u7b56\u7565: - \u5b9a\u671f\u66f4\u65b0\u6e2c\u8a66\u8cc7\u6599\uff08\u6bcf\u9031\u6216\u6bcf\u6708\uff09 - \u5728\u7a0b\u5f0f\u78bc\u8a3b\u89e3\u4e2d\u8a18\u9304\u6e2c\u8a66\u8cc7\u6599\u4f86\u6e90 - \u5efa\u7acb\u6e2c\u8a66\u8cc7\u6599\u6aa2\u67e5\u6e05\u55ae</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#4-token-caching","title":"4. Token Caching \u512a\u5316","text":"<p>\u554f\u984c: \u6bcf\u6b21\u6e2c\u8a66\u90fd\u91cd\u65b0\u547c\u53eb\u8a8d\u8b49 API\uff0c\u901f\u5ea6\u6162\u3002</p> <p>\u89e3\u6c7a\u65b9\u6848\uff08\u7528\u6236\u5f8c\u7e8c\u5be6\u4f5c\uff09: <pre><code>actor IntegrationTestTokenCache {\n    private static let cacheKey = \"IntegrationTestTokenCache\"\n    private static let validDuration: TimeInterval = 8 * 60 * 60  // 8 hours\n\n    static func getCachedToken() -&gt; CachedToken? {\n        // \u5f9e UserDefaults \u8b80\u53d6\u4e26\u6aa2\u67e5\u6709\u6548\u671f\n    }\n\n    static func saveToken(accessToken: String, userId: String) {\n        // \u4fdd\u5b58\u5230 UserDefaults with timestamp\n    }\n}\n</code></pre></p> <p>\u6548\u679c: - \u26a1\ufe0f \u986f\u8457\u63d0\u5347\u6e2c\u8a66\u57f7\u884c\u901f\u5ea6 - \u2705 \u6e1b\u5c11\u5c0d\u8a8d\u8b49 API \u7684\u58d3\u529b - \u2705 8 \u5c0f\u6642\u6709\u6548\u671f\u5e73\u8861\u4e86\u4fbf\u5229\u6027\u548c\u5b89\u5168\u6027</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#_4","title":"\ud83d\udee0\ufe0f \u5be6\u4f5c\u7d30\u7bc0","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#_5","title":"\u5b8c\u6210\u7684\u5de5\u4f5c\u9805\u76ee","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#1-scheme","title":"1. Scheme \u914d\u7f6e","text":"<ul> <li>[x] \u5275\u5efa <code>MatchChatIntegrationTests.xcscheme</code></li> <li>[x] \u914d\u7f6e TestAction \u5305\u542b <code>MatchChatIntegrationTests</code> target</li> <li>[x] \u8a2d\u5b9a\u74b0\u5883\u8b8a\u6578\uff08\u6e2c\u8a66\u5e33\u865f\u8cc7\u8a0a\uff09</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#2-test-helpers","title":"2. Test Helpers","text":"<ul> <li>[x] <code>AuthenticationTestHelper</code> - \u8a8d\u8b49 helper\uff08\u7528 NetworkService \u6539\u5beb\uff09</li> <li>[x] <code>IntegrationTestSetup</code> - \u74b0\u5883\u8a2d\u5b9a helper</li> <li>[x] <code>TestCredentials</code> - \u8f15\u91cf\u7d1a credentials \u7d50\u69cb</li> <li>[x] <code>IntegrationTestTokenCache</code> - Token \u7de9\u5b58\uff08\u7528\u6236\u5f8c\u7e8c\u5be6\u4f5c\uff09</li> <li>[x] <code>ChatroomManager</code> - Chatroom ID \u7de9\u5b58\uff08\u7528\u6236\u5f8c\u7e8c\u5be6\u4f5c\uff09</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#3-integration-tests","title":"3. Integration Tests","text":"<p>ChatAPI (7 \u500b endpoints): - [x] <code>getBatchCount</code> - POST <code>/api/{countryCode}/chat/match/batch/count</code> - [x] <code>getChatroomInfo</code> - GET <code>/api/{countryCode}/chat/match/{refId}</code> - [x] <code>getHistoricalMessages</code> - GET <code>/api/{countryCode}/chat/match/backward</code> - [x] <code>sendMessage</code> - POST <code>/api/{countryCode}/chat/match/message</code> - [x] <code>joinChatroom</code> - POST <code>/api/{countryCode}/chat/match/join</code> - [x] <code>leaveChatroom</code> - POST <code>/api/{countryCode}/chat/match/leave</code> - [x] <code>bulkLeaveChatroom</code> - POST <code>/api/{countryCode}/chat/match/leave/bulk</code></p> <p>PrematchCommentAPI (7 \u500b endpoints): - [x] <code>getBatchCommentInfo</code> - POST <code>/api/{countryCode}/chat/match/comment/batch/info</code> - [x] <code>getCommentMeta</code> - GET <code>/api/{countryCode}/chat/match/comment/info/{refId}</code> - [x] <code>getCommentsByPopular</code> - GET <code>/api/{countryCode}/chat/match/comment/popular</code> - [x] <code>getCommentsByNewest</code> - GET <code>/api/{countryCode}/chat/match/comment/newest</code> - [x] <code>getReplies</code> - GET <code>/api/{countryCode}/chat/match/comment/replies</code> - [x] <code>publishComment</code> - POST <code>/api/{countryCode}/chat/match/comment</code> - [x] <code>toggleLike</code> - POST <code>/api/{countryCode}/chat/match/comment/like</code></p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#4","title":"4. \u6587\u6a94","text":"<ul> <li>[x] <code>README.md</code> - \u5b8c\u6574\u7684\u57f7\u884c\u6307\u5357</li> <li>[x] <code>TEST_DATA.md</code> - \u6e2c\u8a66\u8cc7\u6599\u914d\u7f6e\u6307\u5357</li> <li>[x] \u8a73\u7d30\u7684\u8a3b\u89e3\u548c\u4f7f\u7528\u8aaa\u660e</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#5","title":"5. \u4f9d\u8cf4\u4fee\u6b63","text":"<ul> <li>[x] \u4fee\u6b63 <code>Package.swift</code> \u4f9d\u8cf4\u914d\u7f6e</li> <li>[x] \u6dfb\u52a0 <code>Crypto</code> package dependency</li> <li>[x] \u4fee\u6b63\u6240\u6709\u6e2c\u8a66\u6587\u4ef6\u7684 import statements</li> <li>[x] \u79fb\u9664\u4e0d\u5fc5\u8981\u7684\u4f9d\u8cf4</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#_6","title":"\u7528\u6236\u5f8c\u7e8c\u6539\u9032","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#_7","title":"\u512a\u5316\u5be6\u4f5c","text":"<ul> <li>[x] \u6dfb\u52a0 Token \u7de9\u5b58\u6a5f\u5236\uff088 \u5c0f\u6642\u6709\u6548\u671f\uff09</li> <li>[x] \u6dfb\u52a0 Chatroom ID \u7de9\u5b58\uff08<code>ChatroomManager</code>\uff09</li> <li>[x] \u6539\u9032\u6e2c\u8a66\u65e5\u8a8c\u8f38\u51fa\uff08emoji + \u7d50\u69cb\u5316\uff09</li> <li>[x] \u6dfb\u52a0\u66f4\u8a73\u7d30\u7684\u932f\u8aa4\u8655\u7406</li> <li>[x] \u6dfb\u52a0 <code>.serialized</code> \u78ba\u4fdd\u6e2c\u8a66\u9806\u5e8f\u57f7\u884c</li> <li>[x] \u6dfb\u52a0 <code>.timeLimit(.minutes(1))</code> \u9632\u6b62\u6e2c\u8a66\u5361\u4f4f</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#_8","title":"\u6e2c\u8a66\u8cc7\u6599\u66f4\u65b0","text":"<ul> <li>[x] \u66f4\u65b0\u70ba\u771f\u5be6\u7684\u6e2c\u8a66\u8cc7\u6599\uff08<code>sr:match:63014377</code> \u7b49\uff09</li> <li>[x] \u6dfb\u52a0\u8de8\u570b\u5bb6\u56de\u8986\u6e2c\u8a66\uff08\u9a57\u8b49\u696d\u52d9\u898f\u5247\u9650\u5236\uff09</li> <li>[x] \u6dfb\u52a0\u8a73\u7d30\u7684\u6e2c\u8a66\u8cc7\u6599\u5217\u5370</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#package","title":"Package \u4f9d\u8cf4\u512a\u5316","text":"<ul> <li>[x] \u79fb\u9664\u4e0d\u5fc5\u8981\u7684\u4f9d\u8cf4\uff08UI components, Event tracking \u7b49\uff09</li> <li>[x] \u6dfb\u52a0\u5fc5\u8981\u7684 test helpers</li> <li>[x] \u7cbe\u7c21 main target \u7684\u4f9d\u8cf4</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#_9","title":"\ud83d\udc1b \u9047\u5230\u7684\u554f\u984c\u8207\u89e3\u6c7a\u65b9\u6848","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#1-no-such-module-matchchat","title":"\u554f\u984c 1: <code>No such module 'MatchChat'</code> \u932f\u8aa4","text":"<p>\u932f\u8aa4\u8a0a\u606f: <pre><code>MatchChat/Tests/MatchChatIntegrationTests/PrematchCommentAPIIntegrationTests.swift:\n  L1:18: No such module 'MatchChat', severity: error\n\nMatchChat/Tests/MatchChatIntegrationTests/Helpers/IntegrationTestSetup.swift:\n  L2:8: No such module 'Models', severity: error\n</code></pre></p> <p>\u6839\u672c\u539f\u56e0: 1. Test target \u7f3a\u5c11\u5fc5\u8981\u7684 package dependencies 2. <code>Crypto</code> \u88ab\u8aa4\u8a8d\u70ba\u662f <code>Networking</code> \u7684 product\uff08\u5be6\u969b\u4e0a\u662f\u7368\u7acb package\uff09 3. Import \u4e86\u4e0d\u9700\u8981\u7684 modules\uff08\u5982 <code>SportyAccount</code>, <code>NetworkServiceTestHelpers</code>\uff09</p> <p>\u8a3a\u65b7\u904e\u7a0b: <pre><code>xcodebuild -resolvePackageDependencies -scheme MatchChatIntegrationTests\n# Error: product 'Crypto' required by package 'matchchat' target \n#        'MatchChatIntegrationTests' not found in package 'Networking'\n</code></pre></p> <p>\u89e3\u6c7a\u65b9\u6848:</p> <ol> <li> <p>\u5728 <code>Package.swift</code> \u4e2d\u6dfb\u52a0 <code>Crypto</code> package dependency: <pre><code>dependencies: [\n    .package(url: \"git@github.com:opennetltd/Crypto.git\", exact: \"1.0.0\"),\n]\n</code></pre></p> </li> <li> <p>\u5728 <code>MatchChatIntegrationTests</code> target \u4e2d\u660e\u78ba\u8072\u660e\u6240\u6709\u4f9d\u8cf4: <pre><code>.testTarget(\n    name: \"MatchChatIntegrationTests\",\n    dependencies: [\n        \"MatchChat\",\n        .product(name: \"NetworkService\", package: \"Networking\"),\n        \"Crypto\",  // \u7368\u7acb package\uff0c\u4e0d\u662f Networking \u7684 product\n        \"Models\",\n        \"SportyFoundation\",\n        // ... \u5176\u4ed6\u5fc5\u8981\u4f9d\u8cf4\n    ]\n)\n</code></pre></p> </li> <li> <p>\u4fee\u6b63 import statements: <pre><code>// \u79fb\u9664\u4e0d\u6b63\u78ba\u7684 imports\n// import SportyAccount  \n// import NetworkServiceTestHelpers\n\n// \u4fdd\u7559\u6b63\u78ba\u7684 imports\nimport Foundation\nimport Models\nimport NetworkService\nimport SportyFoundation\nimport Testing\n@testable import MatchChat\n</code></pre></p> </li> <li> <p>\u5275\u5efa\u8f15\u91cf\u7d1a\u7684 <code>TestCredentials</code> \u7d50\u69cb: <pre><code>struct TestCredentials: Sendable {\n    let accessToken: String\n    let userId: String\n}\n</code></pre></p> </li> </ol> <p>\u5b78\u7fd2\u8981\u9ede: - Swift Package \u7684 dependency vs product \u6982\u5ff5\u8981\u6e05\u695a - Test target \u4e0d\u6703\u81ea\u52d5\u7e7c\u627f main target \u7684\u4f9d\u8cf4 - Xcode \u7684\u932f\u8aa4\u8a0a\u606f\u6709\u6642\u4e0d\u5920\u660e\u78ba\uff0c\u9700\u8981\u7528 command line \u8a3a\u65b7</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#2","title":"\u554f\u984c 2: \u6e2c\u8a66\u8cc7\u6599\u6709\u6548\u6027","text":"<p>\u554f\u984c\u63cf\u8ff0: \u521d\u59cb\u6e2c\u8a66\u8cc7\u6599\u70ba placeholder\uff08<code>sr:match:12345678</code>\uff09\uff0c\u7121\u6cd5\u57f7\u884c\u771f\u5be6\u6e2c\u8a66\u3002</p> <p>\u5f71\u97ff: - \u7121\u6cd5\u9a57\u8b49 API \u662f\u5426\u6b63\u5e38\u5de5\u4f5c - \u6e2c\u8a66\u7d50\u679c\u4e0d\u53ef\u9760</p> <p>\u89e3\u6c7a\u65b9\u6848:</p> <ol> <li>\u63d0\u4f9b\u5b8c\u6574\u7684\u6e2c\u8a66\u8cc7\u6599\u53d6\u5f97\u6307\u5357\uff08<code>TEST_DATA.md</code>\uff09:</li> <li>\u5f9e test server \u7db2\u7ad9\u53d6\u5f97</li> <li>\u5f9e API response \u53d6\u5f97</li> <li> <p>\u806f\u7e6b QA/Backend team</p> </li> <li> <p>\u7528\u6236\u66f4\u65b0\u70ba\u771f\u5be6\u7684\u6e2c\u8a66\u8cc7\u6599: <pre><code>private enum TestData {\n    static let testRefId = \"sr:match:63014377\"  // Ghana Premier League\n    static let testRefIdList = [\"sr:match:63014377\", \"sr:match:63014379\"]\n}\n</code></pre></p> </li> <li> <p>\u5efa\u7acb\u6e2c\u8a66\u8cc7\u6599\u7dad\u8b77\u6d41\u7a0b:</p> </li> <li>\u6bcf\u9031\u6aa2\u67e5\u6e2c\u8a66\u8cc7\u6599\u662f\u5426\u6709\u6548</li> <li>\u5728\u7a0b\u5f0f\u78bc\u8a3b\u89e3\u4e2d\u8a18\u9304\u6e2c\u8a66\u8cc7\u6599\u4f86\u6e90\u548c\u66f4\u65b0\u65e5\u671f</li> <li>\u63d0\u4f9b\u5feb\u901f\u66f4\u65b0\u6b65\u9a5f</li> </ol> <p>\u6700\u4f73\u5be6\u8e10: - \u9078\u64c7\u71b1\u9580\u6bd4\u8cfd\uff08\u6709\u8db3\u5920\u7684\u8a0a\u606f\u548c\u8a55\u8ad6\uff09 - \u9078\u64c7\u9032\u884c\u4e2d\u6216\u5373\u5c07\u958b\u59cb\u7684\u6bd4\u8cfd - \u6e96\u5099\u591a\u500b\u5099\u7528\u7684\u6e2c\u8a66\u8cc7\u6599</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#3_1","title":"\u554f\u984c 3: \u6e2c\u8a66\u57f7\u884c\u6548\u7387","text":"<p>\u554f\u984c\u63cf\u8ff0: \u6bcf\u6b21\u6e2c\u8a66\u90fd\u91cd\u65b0\u547c\u53eb\u8a8d\u8b49 API\uff0c\u5c0e\u81f4\uff1a - \u6e2c\u8a66\u57f7\u884c\u901f\u5ea6\u6162 - \u5c0d\u8a8d\u8b49 API \u9020\u6210\u4e0d\u5fc5\u8981\u7684\u58d3\u529b - \u53ef\u80fd\u89f8\u767c rate limiting</p> <p>\u89e3\u6c7a\u65b9\u6848\uff08\u7528\u6236\u5be6\u4f5c\uff09:</p> <ol> <li> <p>\u5be6\u4f5c <code>IntegrationTestTokenCache</code>: <pre><code>actor IntegrationTestTokenCache {\n    private static let cacheKey = \"IntegrationTestTokenCache\"\n    private static let validDuration: TimeInterval = 8 * 60 * 60  // 8 hours\n\n    struct CachedToken: Codable {\n        let accessToken: String\n        let userId: String\n        let timestamp: TimeInterval\n    }\n\n    static func getCachedToken() -&gt; CachedToken? {\n        guard let data = UserDefaults.standard.data(forKey: cacheKey),\n              let cached = try? JSONDecoder().decode(CachedToken.self, from: data) else {\n            return nil\n        }\n\n        let now = Date().timeIntervalSince1970\n        if now - cached.timestamp &lt; validDuration {\n            return cached\n        }\n        return nil\n    }\n\n    static func saveToken(accessToken: String, userId: String) {\n        let cached = CachedToken(\n            accessToken: accessToken,\n            userId: userId,\n            timestamp: Date().timeIntervalSince1970\n        )\n        if let data = try? JSONEncoder().encode(cached) {\n            UserDefaults.standard.set(data, forKey: cacheKey)\n        }\n    }\n}\n</code></pre></p> </li> <li> <p>\u5728 <code>IntegrationTestSetup</code> \u4e2d\u4f7f\u7528\u7de9\u5b58: <pre><code>static func performCompleteSetup() async throws {\n    // Try to get cached token first\n    if let cachedToken = IntegrationTestTokenCache.getCachedToken() {\n        print(\"\u26a1\ufe0f Using cached access token\")\n        let credentials = TestCredentials(\n            accessToken: cachedToken.accessToken,\n            userId: cachedToken.userId\n        )\n        setupAPIClient(with: credentials)\n        return\n    }\n\n    // No valid cache - fetch new token from API\n    print(\"\ud83c\udf10 Fetching new access token from API...\")\n    let credentials = try await authHelper.getAccessTokenFromEnvironment()\n\n    // Cache the new token\n    IntegrationTestTokenCache.saveToken(\n        accessToken: credentials.accessToken,\n        userId: credentials.userId\n    )\n\n    setupAPIClient(with: credentials)\n}\n</code></pre></p> </li> <li> <p>\u5be6\u4f5c <code>ChatroomManager</code> \u7de9\u5b58 refId \u2192 chatroomId \u6620\u5c04: <pre><code>actor ChatroomManager {\n    private var chatroomCache: [String: String] = [:]\n\n    func getChatroomId(for refId: String) async throws -&gt; String {\n        if let cached = chatroomCache[refId] {\n            return cached\n        }\n\n        let chatroomInfo = try await repository.getChatroomInfo(refId: refId, userId: nil)\n        chatroomCache[refId] = chatroomInfo.chatRoomId\n        return chatroomInfo.chatRoomId\n    }\n}\n</code></pre></p> </li> </ol> <p>\u6548\u679c: - \u26a1\ufe0f \u6e2c\u8a66\u57f7\u884c\u901f\u5ea6\u986f\u8457\u63d0\u5347 - \u2705 \u6e1b\u5c11\u5c0d API \u7684\u58d3\u529b - \u2705 8 \u5c0f\u6642\u6709\u6548\u671f\u5e73\u8861\u4e86\u4fbf\u5229\u6027\u548c\u5b89\u5168\u6027</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#_10","title":"\ud83d\udca1 \u6539\u9032\u5efa\u8b70","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#_11","title":"\u77ed\u671f\u6539\u9032","text":"<ol> <li>\u6e2c\u8a66\u8cc7\u6599\u7ba1\u7406\u81ea\u52d5\u5316</li> <li>\u5efa\u7acb script \u81ea\u52d5\u6aa2\u67e5\u6e2c\u8a66\u8cc7\u6599\u6709\u6548\u6027</li> <li>\u5f9e API \u81ea\u52d5\u53d6\u5f97\u9032\u884c\u4e2d\u7684\u6bd4\u8cfd\u4f5c\u70ba\u6e2c\u8a66\u8cc7\u6599</li> <li> <p>\u5728\u6e2c\u8a66\u5931\u6557\u6642\u63d0\u4f9b\u66f4\u660e\u78ba\u7684\u6e2c\u8a66\u8cc7\u6599\u66f4\u65b0\u6307\u5f15</p> </li> <li> <p>\u932f\u8aa4\u8655\u7406\u512a\u5316</p> </li> <li>\u70ba\u4e0d\u540c\u7684\u932f\u8aa4\u60c5\u6cc1\u63d0\u4f9b\u4e0d\u540c\u7684\u8655\u7406\u7b56\u7565</li> <li>\u5340\u5206\u6e2c\u8a66\u8cc7\u6599\u554f\u984c vs API \u5be6\u4f5c\u554f\u984c vs \u74b0\u5883\u554f\u984c</li> <li> <p>\u6dfb\u52a0\u66f4\u591a\u7684\u932f\u8aa4\u6062\u5fa9\u6a5f\u5236</p> </li> <li> <p>\u6e2c\u8a66\u5831\u544a\u6539\u9032</p> </li> <li>\u751f\u6210\u7d50\u69cb\u5316\u7684\u6e2c\u8a66\u5831\u544a</li> <li>\u8a18\u9304\u6bcf\u6b21\u6e2c\u8a66\u7684\u57f7\u884c\u6642\u9593</li> <li>\u8ffd\u8e64\u6e2c\u8a66\u6210\u529f\u7387\u8da8\u52e2</li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#_12","title":"\u4e2d\u671f\u6539\u9032","text":"<ol> <li>Repository Layer \u6e2c\u8a66</li> <li>\u8a55\u4f30\u662f\u5426\u9700\u8981 Repository Layer \u7684 End-to-End tests</li> <li>\u6e2c\u8a66 DTO \u2192 Domain Model \u8f49\u63db</li> <li> <p>\u6e2c\u8a66\u696d\u52d9\u908f\u8f2f\uff08\u5982\u9ed1\u540d\u55ae\u904e\u6ffe\uff09</p> </li> <li> <p>WebSocket Integration Tests</p> </li> <li>\u6e2c\u8a66 WebSocket \u9023\u63a5\u548c\u8a02\u95b1</li> <li>\u6e2c\u8a66\u5be6\u6642\u8a0a\u606f\u63a5\u6536</li> <li> <p>\u6e2c\u8a66\u91cd\u9023\u6a5f\u5236</p> </li> <li> <p>\u6e2c\u8a66\u8cc7\u6599 fixtures</p> </li> <li>\u5efa\u7acb\u56fa\u5b9a\u7684\u6e2c\u8a66\u8cc7\u6599\u96c6</li> <li>\u8207 Backend team \u5354\u8abf\u4fdd\u7559\u6e2c\u8a66\u7528\u7684\u6bd4\u8cfd</li> <li>\u8003\u616e\u5efa\u7acb\u6e2c\u8a66\u5c08\u7528\u7684 match IDs</li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#_13","title":"\u9577\u671f\u6539\u9032","text":"<ol> <li>VCR/Cassette Pattern</li> <li>\u8a55\u4f30\u662f\u5426\u9700\u8981\u5be6\u4f5c VCR pattern</li> <li>\u7b2c\u4e00\u6b21\u57f7\u884c\u6642\u9304\u88fd API responses</li> <li>\u5f8c\u7e8c\u57f7\u884c\u6642\u56de\u653e\u9304\u88fd\u7684 responses</li> <li> <p>\u63d0\u5347\u6e2c\u8a66\u7a69\u5b9a\u6027\u548c\u901f\u5ea6</p> </li> <li> <p>\u81ea\u52d5\u5316\u6e2c\u8a66\u6d41\u7a0b</p> </li> <li>\u5efa\u7acb\u5b9a\u671f\u57f7\u884c\u7684 integration tests\uff08\u6bcf\u9031\uff09</li> <li>\u81ea\u52d5\u901a\u77e5\u6e2c\u8a66\u7d50\u679c</li> <li> <p>\u6574\u5408\u5230 Release checklist</p> </li> <li> <p>\u6e2c\u8a66\u8986\u84cb\u7387\u8ffd\u8e64</p> </li> <li>\u8ffd\u8e64 API endpoints \u7684\u6e2c\u8a66\u8986\u84cb\u7387</li> <li>\u8ffd\u8e64\u4e0d\u540c\u932f\u8aa4\u60c5\u6cc1\u7684\u6e2c\u8a66\u8986\u84cb\u7387</li> <li>\u5b9a\u671f review \u4e26\u88dc\u5145\u6e2c\u8a66</li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#_14","title":"\ud83d\udcca \u5de5\u4f5c\u7d71\u8a08","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#_15","title":"\u5b8c\u6210\u9805\u76ee\u7d71\u8a08","text":"<ul> <li>Scheme \u914d\u7f6e: 1 \u500b</li> <li>Test Helpers: 5 \u500b\uff08\u542b\u7528\u6236\u512a\u5316\uff09</li> <li>Integration Tests: 14 \u500b\uff087 + 7\uff09</li> <li>\u6587\u6a94: 2 \u500b\uff08README + TEST_DATA\uff09</li> <li>Bug \u4fee\u6b63: 3 \u500b\u4e3b\u8981\u554f\u984c</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#_16","title":"\u6642\u9593\u5206\u914d\u4f30\u8a08","text":"<ul> <li>\u8a2d\u8a08\u8a0e\u8ad6: 30%</li> <li>\u5be6\u4f5c: 40%</li> <li>\u554f\u984c\u4fee\u6b63: 20%</li> <li>\u6587\u6a94\u64b0\u5beb: 10%</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#_17","title":"\u7a0b\u5f0f\u78bc\u7d71\u8a08","text":"<ul> <li>\u65b0\u589e\u6a94\u6848: 7 \u500b</li> <li>\u4fee\u6539\u6a94\u6848: 3 \u500b\uff08Package.swift \u7b49\uff09</li> <li>\u7e3d\u884c\u6578: \u7d04 1500+ \u884c\uff08\u5305\u542b\u8a3b\u89e3\u548c\u6587\u6a94\uff09</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#_18","title":"\ud83c\udf93 \u53cd\u601d\u8207\u5b78\u7fd2","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#_19","title":"\u505a\u5f97\u597d\u7684\u5730\u65b9","text":"<ol> <li>\u7cfb\u7d71\u6027\u7684\u8a2d\u8a08\u601d\u8003</li> <li>\u5148\u8a0e\u8ad6\u65b9\u6848\u9078\u64c7\uff0c\u518d\u958b\u59cb\u5be6\u4f5c</li> <li>\u8003\u616e\u4e86\u591a\u7a2e\u6e2c\u8a66\u7b56\u7565\u4e26\u9078\u64c7\u6700\u9069\u5408\u7684</li> <li> <p>\u53c3\u8003\u73fe\u6709\u7684\u6700\u4f73\u5be6\u8e10\uff08UI test schemes\uff09</p> </li> <li> <p>\u5b8c\u6574\u7684\u6587\u6a94</p> </li> <li>\u8a73\u7d30\u7684\u57f7\u884c\u6307\u5357</li> <li>\u6e2c\u8a66\u8cc7\u6599\u914d\u7f6e\u6307\u5357</li> <li>Troubleshooting \u5e38\u898b\u554f\u984c</li> <li> <p>\u5927\u5e45\u964d\u4f4e\u672a\u4f86\u7dad\u8b77\u6210\u672c</p> </li> <li> <p>\u6e2c\u8a66\u7368\u7acb\u6027</p> </li> <li>\u4e0d\u4f9d\u8cf4 production code \u7684\u5167\u90e8\u5be6\u4f5c</li> <li>\u5275\u5efa\u8f15\u91cf\u7d1a\u7684\u6e2c\u8a66\u5c08\u7528\u7d50\u69cb</li> <li> <p>\u6e05\u6670\u7684\u6e2c\u8a66\u908a\u754c</p> </li> <li> <p>\u7528\u6236\u7684\u512a\u5316\u610f\u8b58</p> </li> <li>\u4e3b\u52d5\u6dfb\u52a0 Token \u7de9\u5b58</li> <li>\u5be6\u4f5c Chatroom ID \u7de9\u5b58</li> <li>\u6539\u9032\u6e2c\u8a66\u65e5\u8a8c\u8f38\u51fa</li> <li>\u986f\u8457\u63d0\u5347\u4f7f\u7528\u9ad4\u9a57</li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#_20","title":"\u53ef\u4ee5\u6539\u9032\u7684\u5730\u65b9","text":"<ol> <li>\u521d\u671f\u5c0d\u4f9d\u8cf4\u914d\u7f6e\u4e0d\u5920\u719f\u6089</li> <li>\u82b1\u8cbb\u8f03\u591a\u6642\u9593\u5728\u4fee\u6b63 module \u627e\u4e0d\u5230\u7684\u554f\u984c</li> <li>\u9700\u8981\u66f4\u6df1\u5165\u7406\u89e3 Swift Package Manager</li> <li> <p>\u53ef\u4ee5\u66f4\u65e9\u9032\u884c dependency \u7684\u5b8c\u6574\u6aa2\u67e5</p> </li> <li> <p>\u6e2c\u8a66\u8cc7\u6599\u7ba1\u7406\u53ef\u4ee5\u66f4\u81ea\u52d5\u5316</p> </li> <li>\u76ee\u524d\u9700\u8981\u624b\u52d5\u66f4\u65b0\u6e2c\u8a66\u8cc7\u6599</li> <li>\u53ef\u4ee5\u8003\u616e\u5f9e API \u52d5\u614b\u53d6\u5f97</li> <li> <p>\u6216\u8207 Backend \u5354\u8abf\u56fa\u5b9a\u7684\u6e2c\u8a66\u8cc7\u6599</p> </li> <li> <p>\u932f\u8aa4\u8655\u7406\u53ef\u4ee5\u66f4\u7d30\u7dfb</p> </li> <li>\u90e8\u5206\u6e2c\u8a66\u53ea\u662f\u7c21\u55ae throw error</li> <li>\u53ef\u4ee5\u70ba\u4e0d\u540c\u932f\u8aa4\u63d0\u4f9b\u4e0d\u540c\u7684\u8655\u7406</li> <li>\u53ef\u4ee5\u6dfb\u52a0\u66f4\u591a\u7684 error recovery</li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#_21","title":"\u7d93\u9a57\u7e3d\u7d50","text":"<ol> <li>Integration Tests \u7684\u50f9\u503c</li> <li>\u76f4\u63a5\u9a57\u8b49 API contract\uff0cROI \u6700\u9ad8</li> <li>\u80fd\u6293\u5230 production code \u7121\u6cd5\u767c\u73fe\u7684\u554f\u984c</li> <li> <p>\u9700\u8981\u5b9a\u671f\u57f7\u884c\u624d\u80fd\u767c\u63ee\u50f9\u503c</p> </li> <li> <p>\u6e2c\u8a66\u57fa\u790e\u8a2d\u65bd\u7684\u91cd\u8981\u6027</p> </li> <li>\u597d\u7684 test helpers \u80fd\u5927\u5e45\u63d0\u5347\u6e2c\u8a66\u6548\u7387</li> <li>Token \u7de9\u5b58\u7b49\u512a\u5316\u80fd\u986f\u8457\u6539\u5584\u4f7f\u7528\u9ad4\u9a57</li> <li> <p>\u5b8c\u5584\u7684\u6587\u6a94\u964d\u4f4e\u7dad\u8b77\u6210\u672c</p> </li> <li> <p>Swift Package \u4f9d\u8cf4\u7ba1\u7406</p> </li> <li>Package vs Product \u8981\u5206\u6e05\u695a</li> <li>Test target \u7684\u4f9d\u8cf4\u8981\u660e\u78ba\u8072\u660e</li> <li> <p>\u5584\u7528 command line \u5de5\u5177\u8a3a\u65b7\u554f\u984c</p> </li> <li> <p>\u6e2c\u8a66\u8cc7\u6599\u7ba1\u7406</p> </li> <li>\u6e2c\u8a66\u8cc7\u6599\u7684\u6709\u6548\u6027\u81f3\u95dc\u91cd\u8981</li> <li>\u9700\u8981\u5efa\u7acb\u660e\u78ba\u7684\u7dad\u8b77\u6d41\u7a0b</li> <li>\u8003\u616e\u8207 QA/Backend team \u5354\u8abf</li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#_22","title":"\ud83d\udd17 \u76f8\u95dc\u9023\u7d50","text":"<ul> <li>\u5be6\u4f5c\u6a94\u6848:</li> <li><code>MatchChat/Tests/MatchChatIntegrationTests/</code></li> <li><code>MatchChat/Package.swift</code></li> <li> <p><code>FCom.xcodeproj/xcshareddata/xcschemes/MatchChatIntegrationTests.xcscheme</code></p> </li> <li> <p>\u6587\u6a94:</p> </li> <li><code>MatchChat/Tests/MatchChatIntegrationTests/README.md</code></li> <li> <p><code>MatchChat/Tests/MatchChatIntegrationTests/TEST_DATA.md</code></p> </li> <li> <p>\u76f8\u95dc TDD:</p> </li> <li>TDD-030: FOOTBALL-9185</li> <li>TDD-022: FOOTBALL-9183</li> <li>TDD-031: FOOTBALL-9186</li> <li>TDD-040: FOOTBALL-9188</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#_23","title":"\ud83d\udcdd \u5f8c\u7e8c\u884c\u52d5\u9805\u76ee","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#_24","title":"\u7acb\u5373\u57f7\u884c","text":"<ul> <li>[ ] \u57f7\u884c\u5b8c\u6574\u7684 integration tests</li> <li>[ ] \u9a57\u8b49\u6240\u6709 14 \u500b endpoints</li> <li>[ ] \u8a18\u9304\u6e2c\u8a66\u7d50\u679c\u548c\u767c\u73fe\u7684\u554f\u984c</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#_25","title":"\u672c\u9031\u5167","text":"<ul> <li>[ ] \u8207 Backend team \u78ba\u8a8d\u6e2c\u8a66\u74b0\u5883</li> <li>[ ] \u53d6\u5f97\u56fa\u5b9a\u7684\u6e2c\u8a66\u8cc7\u6599\u6216\u5efa\u7acb\u81ea\u52d5\u53d6\u5f97\u6a5f\u5236</li> <li>[ ] \u6839\u64da\u6e2c\u8a66\u7d50\u679c\u8abf\u6574\u6e2c\u8a66\u5be6\u4f5c</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-08/#_26","title":"\u672a\u4f86\u898f\u5283","text":"<ul> <li>[ ] \u8a55\u4f30\u662f\u5426\u9700\u8981 Repository Layer E2E tests</li> <li>[ ] \u8003\u616e\u6dfb\u52a0 WebSocket integration tests</li> <li>[ ] \u5efa\u7acb\u5b9a\u671f\u57f7\u884c integration tests \u7684\u6d41\u7a0b</li> <li>[ ] \u8a55\u4f30 VCR pattern \u7684\u5fc5\u8981\u6027</li> </ul> <p>\u6587\u4ef6\u7248\u672c: 1.0 \u6700\u5f8c\u66f4\u65b0: 2025-12-09 \u66f4\u65b0\u8005: Cursor AI Assistant</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/","title":"\u5de5\u4f5c\u7e3d\u7d50 - 2025-12-09","text":"<p>\u751f\u6210\u6642\u9593: 2025-12-10 00:11:10</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_1","title":"\ud83d\udccb \u4eca\u65e5\u8a08\u5283\u56de\u9867","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_2","title":"\u539f\u5b9a\u8a08\u5283","text":"<ul> <li>TDD-022: FOOTBALL-9183 (ChatWebSocketClient)</li> <li>TDD-031: FOOTBALL-9186 (LiveChatRepository)</li> <li>TDD-040: FOOTBALL-9188 (ReloadCommentListUseCase)</li> <li>TDD-041: FOOTBALL-9189 (PublishCommentUseCase)</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_3","title":"\u2705 \u5b8c\u6210\u9805\u76ee","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_4","title":"\u4e3b\u8981\u6210\u679c","text":"<ol> <li>TDD \u4e00\u81f4\u6027\u6aa2\u67e5\u5831\u544a</li> <li>\u2705 \u5168\u9762\u6aa2\u67e5 MatchChat \u5be6\u4f5c\u8207 TDD \u6587\u6a94\u7684\u4e00\u81f4\u6027</li> <li>\u2705 \u751f\u6210 53 \u9801\u8a73\u7d30\u5831\u544a</li> <li>\u2705 \u8a55\u4f30\u6574\u9ad4\u5b8c\u6210\u5ea6\uff1a~53%\uff08API/Client/Repository \u5df2\u5b8c\u6210\uff09</li> <li> <p>\ud83d\udcc4 \u6587\u6a94\uff1a<code>13_Implementation_Status/tdd_consistency_check_2025-12-09.md</code></p> </li> <li> <p>TDD \u6587\u6a94\u66f4\u65b0</p> </li> <li>\u2705 \u66f4\u65b0 TDD-010 (PrematchCommentAPI)<ul> <li>API Response \u683c\u5f0f\u512a\u5316</li> <li><code>publishComment</code> \u65b9\u6cd5\u62c6\u5206</li> <li><code>toggleLike</code> \u8fd4\u56de\u503c\u8655\u7406</li> <li>\u6dfb\u52a0 <code>NullableResponse</code> \u8aaa\u660e</li> </ul> </li> <li>\u2705 \u66f4\u65b0 TDD-011 (ChatAPI)<ul> <li>\u4fee\u6b63 <code>getBatchCount</code> HTTP Method\uff08GET \u2192 POST\uff09</li> <li>\u6dfb\u52a0 Null Response \u8655\u7406\u8aaa\u660e</li> </ul> </li> <li>\u2705 \u66f4\u65b0 TDD-031 (LiveChatRepository)<ul> <li>\u8aaa\u660e\u5169\u5c64 Repository \u67b6\u69cb</li> <li>\u8a18\u9304\u67b6\u69cb\u512a\u9ede\u548c\u8a2d\u8a08\u6c7a\u7b56</li> </ul> </li> <li> <p>\ud83d\udcc4 \u6587\u6a94\uff1a<code>13_Implementation_Status/tdd_updates_2025-12-09.md</code></p> </li> <li> <p>\u5de5\u4f5c\u8a08\u5283\u66f4\u65b0</p> </li> <li>\u2705 \u91cd\u7d44\u4eca\u65e5\u76ee\u6a19\uff0c\u53cd\u6620\u5be6\u969b\u5de5\u4f5c\u5167\u5bb9</li> <li>\u2705 \u8a73\u7d30\u8a18\u9304\u8207 Cursor \u7684\u5c0d\u8a71\u548c\u6c7a\u7b56\uff086 \u500b\u91cd\u8981\u6c7a\u7b56\uff09</li> <li>\u2705 \u63d0\u53d6\u5b78\u7fd2\u8981\u9ede\uff085 \u500b\uff09\u548c\u6539\u9032\u5efa\u8b70\uff088 \u500b\uff09</li> <li>\u2705 \u8a18\u9304\u767c\u73fe\u7684\u554f\u984c\uff084 \u500b\uff09</li> <li>\ud83d\udcc4 \u6587\u6a94\uff1a<code>16_Cursor_Workflow/daily_plans/2025-12-09.md</code></li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_5","title":"\u95dc\u9375\u767c\u73fe","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#tdd-6","title":"\u5be6\u4f5c\u512a\u65bc TDD \u7684\u6539\u9032\uff086 \u9805\uff09","text":"<ol> <li>API Response \u683c\u5f0f\u512a\u5316</li> <li>\u76f4\u63a5\u8fd4\u56de DTO/Array\uff0c\u79fb\u9664 <code>bizCode/data</code> \u5305\u88dd\u5c64</li> <li> <p>\u7c21\u5316 Decoding \u908f\u8f2f</p> </li> <li> <p><code>publishComment</code> \u65b9\u6cd5\u62c6\u5206</p> </li> <li>\u62c6\u5206\u70ba <code>publishComment</code>\uff08\u9802\u5c64\u8a55\u8ad6\uff09\u548c <code>publishReply</code>\uff08\u56de\u8986\uff09</li> <li> <p>\u63d0\u9ad8\u985e\u578b\u5b89\u5168\u548c\u53ef\u8b80\u6027</p> </li> <li> <p>\u5169\u5c64 Repository \u67b6\u69cb</p> </li> <li>API Repository\uff08\u8fd4\u56de DTOs\uff09+ Domain Repository\uff08\u8fd4\u56de Domain Models\uff09</li> <li> <p>\u66f4\u6e05\u6670\u7684\u8077\u8cac\u5206\u96e2</p> </li> <li> <p><code>getBatchCount</code> HTTP Method \u4fee\u6b63</p> </li> <li>GET \u2192 POST + JSON encoding</li> <li> <p>\u7b26\u5408\u5be6\u969b API \u898f\u683c</p> </li> <li> <p>Null Response \u8655\u7406</p> </li> <li>\u5275\u5efa <code>NullableResponse</code> DTO</li> <li> <p>\u6b63\u78ba\u8655\u7406\u8fd4\u56de <code>null</code> \u7684 API</p> </li> <li> <p>\u7d71\u4e00 MatchChat Package</p> </li> <li>\u4f7f\u7528\u7d71\u4e00 Package \u800c\u975e\u5206\u96e2\u7684 PrematchComment \u548c LiveChat</li> <li>\u907f\u514d\u5faa\u74b0\u4f9d\u8cf4\uff0c\u7c21\u5316\u7ba1\u7406</li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_6","title":"\u5be6\u4f5c\u72c0\u614b\u8a55\u4f30","text":"\u5c64\u7d1a \u5b8c\u6210\u5ea6 \u72c0\u614b API Layer 95% \u2705 \u5b8c\u6210\uff0c\u512a\u65bc TDD Client Layer 90% \u2705 \u5b8c\u6210 Repository Layer 80% \u2705 \u5b8c\u6210\uff0c\u63a1\u7528\u5169\u5c64\u67b6\u69cb UseCase Layer 0% \u274c \u672a\u958b\u59cb\uff08\u963b\u585e Feature \u5c64\uff09 Feature Layer 0% \u274c \u672a\u958b\u59cb View Layer 0% \u274c \u672a\u958b\u59cb"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#cursor","title":"\ud83e\udd16 \u8207 Cursor \u7684\u5c0d\u8a71\u7d71\u6574","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_7","title":"\u5c0d\u8a71\u6d41\u7a0b","text":"<ol> <li>\u555f\u52d5\u4e00\u81f4\u6027\u6aa2\u67e5\uff08\u7d04 23:36\uff09</li> <li>\u7528\u6236\u8acb\u6c42\uff1a\u78ba\u8a8d MatchChat \u5be6\u4f5c\u662f\u5426\u8207 TDD \u6587\u6a94\u4e00\u81f4</li> <li>Cursor \u57f7\u884c\uff1a\u5168\u9762\u6aa2\u67e5 API\u3001Client\u3001Repository \u5c64</li> <li> <p>\u7d50\u679c\uff1a\u751f\u6210 53 \u9801\u8a73\u7d30\u5831\u544a</p> </li> <li> <p>\u66f4\u65b0 TDD \u6587\u6a94\uff08\u7d04 23:50\uff09</p> </li> <li>\u7528\u6236\u6c7a\u7b56\uff1a\u5148\u66f4\u65b0 TDD \u6587\u6a94\uff0c\u66ab\u4e0d\u5be6\u4f5c\u65b0 tickets</li> <li>Cursor \u57f7\u884c\uff1a\u66f4\u65b0 3 \u500b TDD tickets\uff0c\u751f\u6210\u66f4\u65b0\u8a18\u9304</li> <li> <p>\u7d50\u679c\uff1a\u6587\u6a94\u8207\u5be6\u4f5c\u9054\u6210\u4e00\u81f4</p> </li> <li> <p>\u7d71\u6574\u5de5\u4f5c\uff08\u7d04 00:10\uff09</p> </li> <li>\u7528\u6236\u8acb\u6c42\uff1a\u7d71\u6574\u4eca\u65e5\u5c0d\u8a71\uff0c\u66f4\u65b0 daily plan</li> <li>Cursor \u57f7\u884c\uff1a\u63d0\u53d6\u6c7a\u7b56\u3001\u5b78\u7fd2\u8981\u9ede\u3001\u6539\u9032\u5efa\u8b70</li> <li>\u7d50\u679c\uff1a\u5b8c\u6574\u7684\u5de5\u4f5c\u8a18\u9304\u548c\u7d71\u6574\u6587\u6a94</li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_8","title":"\u91cd\u8981\u6c7a\u7b56\u8a18\u9304","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#1-api-response","title":"1. API Response \u683c\u5f0f\u512a\u5316","text":"<p>\u80cc\u666f\uff1a\u5be6\u969b API \u8fd4\u56de\u76f4\u63a5\u7684 DTO/Array\uff0c\u800c\u975e\u5305\u88dd\u5728 <code>bizCode/data</code> \u7d50\u69cb\u4e2d</p> <p>\u6c7a\u7b56\uff1a\u79fb\u9664 Response Wrapper DTOs\uff0c\u76f4\u63a5\u89e3\u6790 API Response</p> <p>\u7406\u7531\uff1a - \u5be6\u969b API \u884c\u70ba\u8207\u898f\u5283\u4e0d\u540c - \u6e1b\u5c11\u4e0d\u5fc5\u8981\u7684\u5305\u88dd\u5c64 - \u7c21\u5316 Decoding \u908f\u8f2f - \u63d0\u9ad8\u6027\u80fd</p> <p>\u5f71\u97ff\uff1a - \u522a\u9664 5 \u500b\u672a\u4f7f\u7528\u7684 Response Wrapper DTOs - \u66f4\u65b0 TDD-010 \u6587\u6a94 - Integration Tests \u5df2\u9a57\u8b49</p> <p>\u8a55\u4f30\uff1a\u2705 \u6b63\u78ba\u6c7a\u7b56\uff0c\u5be6\u4f5c\u66f4\u7c21\u6f54</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#2-publishcomment","title":"2. <code>publishComment</code> \u65b9\u6cd5\u62c6\u5206","text":"<p>\u80cc\u666f\uff1a\u539f\u8a2d\u8a08\u4f7f\u7528\u55ae\u4e00\u65b9\u6cd5 + \u53ef\u9078\u53c3\u6578\u8655\u7406\u9802\u5c64\u8a55\u8ad6\u548c\u56de\u8986</p> <p>\u6c7a\u7b56\uff1a\u62c6\u5206\u70ba <code>publishComment</code> \u548c <code>publishReply</code> \u5169\u500b\u65b9\u6cd5</p> <p>\u7406\u7531\uff1a - \u660e\u78ba\u5340\u5206\u696d\u52d9\u908f\u8f2f\uff08\u9802\u5c64\u8a55\u8ad6 vs \u56de\u8986\uff09 - \u63d0\u9ad8\u985e\u578b\u5b89\u5168\uff08<code>publishComment</code> \u4e0d\u9700\u8981\u53ef\u9078\u53c3\u6578\uff09 - \u6e1b\u5c11\u53c3\u6578\u932f\u8aa4 - \u7b26\u5408\u5be6\u969b\u696d\u52d9\u898f\u5247\uff08\u5982\u8de8\u570b\u56de\u8986\u9650\u5236\uff09</p> <p>\u5f71\u97ff\uff1a - API\u3001Client\u3001Repository \u5c64\u90fd\u9700\u8981\u62c6\u5206 - \u66f4\u65b0 TDD-010 \u6587\u6a94 - UseCase \u5c64\u5be6\u4f5c\u6642\u66f4\u6e05\u6670</p> <p>\u8a55\u4f30\uff1a\u2705 \u512a\u79c0\u6c7a\u7b56\uff0c\u63d0\u9ad8\u4e86 API \u53ef\u8b80\u6027\u548c\u5b89\u5168\u6027</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#3-repository","title":"3. \u5169\u5c64 Repository \u67b6\u69cb","text":"<p>\u80cc\u666f\uff1a\u539f TDD \u898f\u5283\u55ae\u4e00 Repository \u5c64</p> <p>\u6c7a\u7b56\uff1a\u63a1\u7528\u5169\u5c64\u67b6\u69cb - API Repository\uff1a\u8655\u7406 HTTP \u8acb\u6c42\uff0c\u8fd4\u56de DTOs - Domain Repository\uff1a\u4f7f\u7528 Client\uff0c\u8fd4\u56de Domain Models\uff0c\u5305\u542b\u696d\u52d9\u908f\u8f2f</p> <p>\u7406\u7531\uff1a - \u8077\u8cac\u5206\u96e2\uff08\u7db2\u8def vs \u696d\u52d9\u908f\u8f2f\uff09 - \u63d0\u9ad8\u53ef\u6e2c\u8a66\u6027\uff08\u53ef\u4ee5\u7368\u7acb\u6e2c\u8a66\uff09 - \u63d0\u9ad8\u53ef\u7dad\u8b77\u6027\uff08API \u8b8a\u66f4\u548c\u696d\u52d9\u908f\u8f2f\u8b8a\u66f4\u4e92\u4e0d\u5f71\u97ff\uff09 - \u7b26\u5408 Clean Architecture</p> <p>\u5f71\u97ff\uff1a - \u66f4\u65b0 TDD-031 \u6587\u6a94 - \u6e2c\u8a66\u7b56\u7565\u66f4\u9748\u6d3b - \u6574\u9ad4\u67b6\u69cb\u66f4\u6e05\u6670</p> <p>\u8a55\u4f30\uff1a\u2705 \u5353\u8d8a\u6c7a\u7b56\uff0c\u7b26\u5408 SOLID \u539f\u5247</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#4-getbatchcount-http-method","title":"4. <code>getBatchCount</code> HTTP Method \u4fee\u6b63","text":"<p>\u80cc\u666f\uff1a\u539f\u898f\u5283\u70ba GET \u65b9\u6cd5\uff0c\u4f46\u5be6\u969b API \u53ea\u652f\u63f4 POST</p> <p>\u6c7a\u7b56\uff1a\u4fee\u6b63\u70ba POST + JSON encoding</p> <p>\u7406\u7531\uff1a - Integration Tests \u767c\u73fe GET \u8fd4\u56de 405 \u932f\u8aa4 - \u7b26\u5408\u5be6\u969b API \u898f\u683c</p> <p>\u5f71\u97ff\uff1a - \u66f4\u65b0 TDD-011 \u6587\u6a94 - \u66f4\u65b0 <code>ChatAPI+Endpoint.swift</code></p> <p>\u8a55\u4f30\uff1a\u2705 \u5fc5\u8981\u4fee\u6b63\uff0cIntegration Tests \u767c\u63ee\u4f5c\u7528</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#5-null-response","title":"5. Null Response \u8655\u7406","text":"<p>\u80cc\u666f\uff1a\u90e8\u5206 API \u8fd4\u56de raw <code>null</code>\uff0c\u5c0e\u81f4 Decoding \u932f\u8aa4</p> <p>\u6c7a\u7b56\uff1a\u5275\u5efa <code>NullableResponse</code> DTO \u4f86\u8655\u7406 <code>null</code> \u503c</p> <pre><code>struct NullableResponse: Decodable {\n    init(from decoder: Decoder) throws {\n        // \u5141\u8a31\u89e3\u6790 null \u503c\uff0c\u4e0d\u505a\u4efb\u4f55\u8655\u7406\n    }\n}\n</code></pre> <p>\u7406\u7531\uff1a - \u6b63\u78ba\u8655\u7406 API \u8fd4\u56de <code>null</code> \u7684\u60c5\u6cc1 - \u63d0\u4f9b\u6e05\u6670\u7684\u8a9e\u610f - \u907f\u514d Decoding \u932f\u8aa4</p> <p>\u5f71\u97ff\uff1a - <code>toggleLike</code>, <code>joinChatroom</code>, <code>leaveChatroom</code> \u7b49 API - \u66f4\u65b0 TDD-010 \u548c TDD-011 \u6587\u6a94</p> <p>\u8a55\u4f30\uff1a\u2705 \u5be6\u7528\u89e3\u6c7a\u65b9\u6848\uff0c\u89e3\u6c7a\u5be6\u969b\u554f\u984c</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#6-matchchat-package","title":"6. \u7d71\u4e00 MatchChat Package","text":"<p>\u80cc\u666f\uff1a\u539f\u898f\u5283\u5206\u96e2\u7684 PrematchComment \u548c LiveChat Packages</p> <p>\u6c7a\u7b56\uff1a\u4f7f\u7528\u7d71\u4e00\u7684 <code>MatchChat</code> Package</p> <p>\u7406\u7531\uff1a - \u907f\u514d\u5faa\u74b0\u4f9d\u8cf4\u554f\u984c - \u5171\u4eab\u4ee3\u78bc\u66f4\u5bb9\u6613 - \u7b26\u5408 FCom \u5c08\u6848\u7d50\u69cb - \u7c21\u5316\u69cb\u5efa\u548c\u6e2c\u8a66</p> <p>\u5f71\u97ff\uff1a - \u6574\u9ad4 Package \u7d50\u69cb\u8207\u539f TDD \u4e0d\u540c - Import \u8a9e\u53e5\u7d71\u4e00\u70ba <code>import MatchChat</code></p> <p>\u8a55\u4f30\uff1a\u2705 \u52d9\u5be6\u6c7a\u7b56\uff0c\u7c21\u5316\u5c08\u6848\u7ba1\u7406</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_9","title":"\u5b78\u7fd2\u8981\u9ede","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#1-tdd","title":"1. TDD \u8207\u5be6\u969b\u5be6\u4f5c\u7684\u5e73\u8861","text":"<p>\u5b78\u5230\uff1a - TDD \u662f\u6307\u5c0e\u65b9\u91dd\uff0c\u4e0d\u662f\u7d55\u5c0d\u898f\u7bc4 - \u5be6\u969b API \u884c\u70ba\u53ef\u80fd\u8207\u6587\u6a94\u4e0d\u4e00\u81f4 - Integration Tests \u662f\u9a57\u8b49 API \u898f\u683c\u7684\u6700\u4f73\u65b9\u5f0f - \u9700\u8981\u9748\u6d3b\u8abf\u6574 TDD \u4ee5\u53cd\u6620\u5be6\u969b\u60c5\u6cc1</p> <p>\u555f\u793a\uff1a - \u5148\u505a\u4e00\u81f4\u6027\u6aa2\u67e5\uff0c\u518d\u958b\u59cb\u5be6\u4f5c - \u53ca\u6642\u66f4\u65b0 TDD \u6587\u6a94\uff0c\u4fdd\u6301\u540c\u6b65 - \u8a18\u9304\u8a2d\u8a08\u6c7a\u7b56\uff0c\u4fbf\u65bc\u8ffd\u6eaf</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#2-clean-architecture","title":"2. Clean Architecture \u7684\u5be6\u8e10","text":"<p>\u5b78\u5230\uff1a - \u5169\u5c64 Repository \u6bd4\u55ae\u5c64\u66f4\u7b26\u5408\u8077\u8cac\u5206\u96e2 - \u6bcf\u5c64\u61c9\u6709\u660e\u78ba\u7684\u8077\u8cac\u548c\u908a\u754c - \u5206\u5c64\u6e05\u6670\u53ef\u4ee5\u63d0\u9ad8\u53ef\u6e2c\u8a66\u6027\u548c\u53ef\u7dad\u8b77\u6027</p> <p>\u555f\u793a\uff1a - \u4e0d\u8981\u5bb3\u6015\u504f\u96e2\u539f\u8a2d\u8a08\uff0c\u5982\u679c\u65b0\u8a2d\u8a08\u66f4\u597d - \u67b6\u69cb\u6539\u9032\u61c9\u8a72\u8a18\u9304\u5728\u6587\u6a94\u4e2d - \u6e2c\u8a66\u7b56\u7565\u61c9\u8a72\u8207\u67b6\u69cb\u5339\u914d</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#3-swift-concurrency","title":"3. Swift Concurrency \u6700\u4f73\u5be6\u8e10","text":"<p>\u5b78\u5230\uff1a - <code>Sendable</code> \u5354\u8b70\u5c0d\u4e26\u767c\u5b89\u5168\u5f88\u91cd\u8981 - <code>@unchecked Sendable</code> \u7528\u65bc\u5305\u88dd\u975e Sendable \u7684\u985e\u578b - <code>actor</code> \u63d0\u4f9b\u5167\u5efa\u7684\u7dda\u7a0b\u5b89\u5168\u4fdd\u8b49 - <code>nonisolated</code> \u53ef\u4ee5\u8b93 actor \u65b9\u6cd5\u540c\u6b65\u57f7\u884c</p> <p>\u555f\u793a\uff1a - Swift 6 \u56b4\u683c\u4f75\u767c\u6aa2\u67e5\u9700\u8981\u4ed4\u7d30\u8655\u7406 - \u5305\u88dd\u578b\u5225\u662f\u89e3\u6c7a <code>Sendable</code> \u554f\u984c\u7684\u597d\u65b9\u6cd5</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#4-api-response","title":"4. API Response \u8655\u7406\u6a21\u5f0f","text":"<p>\u5b78\u5230\uff1a - \u4e0d\u662f\u6240\u6709 API \u90fd\u9075\u5faa\u7d71\u4e00\u7684 Response \u683c\u5f0f - <code>null</code> \u503c\u9700\u8981\u7279\u6b8a\u8655\u7406 - \u7c21\u5316 Response \u7d50\u69cb\u53ef\u4ee5\u6e1b\u5c11\u932f\u8aa4 - \u76f4\u63a5\u89e3\u6790 DTO \u6bd4\u5305\u88dd\u5c64\u66f4\u7c21\u55ae</p> <p>\u555f\u793a\uff1a - \u512a\u5148\u6e2c\u8a66\u5be6\u969b API \u884c\u70ba - \u4e0d\u8981\u5047\u8a2d API \u6587\u6a94\u662f\u7d55\u5c0d\u6b63\u78ba\u7684 - Integration Tests \u53ef\u4ee5\u767c\u73fe\u5f88\u591a\u554f\u984c</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#5","title":"5. \u6587\u6a94\u7ba1\u7406\u7684\u91cd\u8981\u6027","text":"<p>\u5b78\u5230\uff1a - \u8a73\u7d30\u7684\u4e00\u81f4\u6027\u6aa2\u67e5\u5831\u544a\u5f88\u6709\u50f9\u503c - \u8a2d\u8a08\u6c7a\u7b56\u8a18\u9304\uff08ADR\uff09\u5e6b\u52a9\u7406\u89e3\u67b6\u69cb\u6f14\u9032 - TDD \u66f4\u65b0\u8a18\u9304\u63d0\u4f9b\u5b8c\u6574\u7684\u8b8a\u66f4\u8ffd\u6eaf - Daily Plan \u7d71\u6574\u662f\u5f88\u597d\u7684\u56de\u9867\u65b9\u5f0f</p> <p>\u555f\u793a\uff1a - \u6295\u8cc7\u6642\u9593\u5728\u6587\u6a94\u4e0a\u662f\u503c\u5f97\u7684 - \u6587\u6a94\u61c9\u8a72\u8207\u5be6\u4f5c\u4fdd\u6301\u540c\u6b65 - \u8a73\u7d30\u8a18\u9304\u6c7a\u7b56\u904e\u7a0b\uff0c\u4e0d\u53ea\u662f\u7d50\u679c</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_10","title":"\u5354\u4f5c\u6548\u7387\u5206\u6790","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_11","title":"\u6709\u6548\u7684\u5354\u4f5c\u65b9\u5f0f","text":"<ol> <li>\u7d50\u69cb\u5316\u7684\u4efb\u52d9\u5206\u89e3</li> <li>\u5148\u6aa2\u67e5\uff08\u4e00\u81f4\u6027\u6aa2\u67e5\uff09</li> <li>\u518d\u6c7a\u7b56\uff08\u8981\u4e0d\u8981\u66f4\u65b0\uff09</li> <li>\u5f8c\u57f7\u884c\uff08\u66f4\u65b0\u6587\u6a94\uff09</li> <li> <p>\u6e05\u6670\u7684\u6d41\u7a0b</p> </li> <li> <p>\u4e26\u884c\u5de5\u5177\u8abf\u7528</p> </li> <li>\u540c\u6642\u8b80\u53d6\u591a\u500b\u76f8\u95dc\u6a94\u6848</li> <li> <p>\u63d0\u9ad8\u6548\u7387\uff0c\u7bc0\u7701\u6642\u9593</p> </li> <li> <p>\u5145\u5206\u5229\u7528 codebase_search</p> </li> <li>\u5feb\u901f\u5b9a\u4f4d\u76f8\u95dc\u4ee3\u78bc</li> <li> <p>\u7406\u89e3\u73fe\u6709\u67b6\u69cb</p> </li> <li> <p>\u5373\u6642\u8a18\u9304\u6c7a\u7b56</p> </li> <li>\u751f\u6210\u8a73\u7d30\u7684\u5831\u544a\u548c\u8a18\u9304</li> <li> <p>\u4fbf\u65bc\u65e5\u5f8c\u8ffd\u6eaf</p> </li> <li> <p>\u9748\u6d3b\u8abf\u6574\u8a08\u5283</p> </li> <li>\u6839\u64da\u5be6\u969b\u60c5\u6cc1\u8abf\u6574\u4efb\u52d9</li> <li>\u4eca\u5929\u66ab\u4e0d\u5be6\u4f5c\uff0c\u5148\u7d71\u6574</li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_12","title":"\u53ef\u6539\u9032\u7684\u5730\u65b9","text":"<ol> <li>\u66f4\u65e9\u9032\u884c\u4e00\u81f4\u6027\u6aa2\u67e5</li> <li>\u61c9\u8a72\u5728\u5be6\u4f5c\u524d\u5c31\u505a\u6aa2\u67e5</li> <li> <p>\u907f\u514d\u4e8b\u5f8c\u5927\u91cf\u8abf\u6574</p> </li> <li> <p>\u66f4\u4e3b\u52d5\u5730\u66f4\u65b0\u6587\u6a94</p> </li> <li>\u5be6\u4f5c\u6642\u540c\u6b65\u66f4\u65b0 TDD</li> <li> <p>\u6e1b\u5c11\u6587\u6a94\u8207\u5be6\u4f5c\u7684\u5dee\u7570</p> </li> <li> <p>\u5b9a\u671f\u56de\u9867\u548c\u7d71\u6574</p> </li> <li>\u4e0d\u8981\u7b49\u5230\u6700\u5f8c\u624d\u7d71\u6574</li> <li>\u6bcf\u5929\u6216\u6bcf\u9031\u90fd\u61c9\u8a72\u56de\u9867</li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_13","title":"\u554f\u984c\u89e3\u6c7a\u904e\u7a0b","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#1-tdd_1","title":"\u554f\u984c 1\uff1a\u5982\u4f55\u9a57\u8b49\u5be6\u4f5c\u8207 TDD \u7684\u4e00\u81f4\u6027\uff1f","text":"<p>\u89e3\u6c7a\u904e\u7a0b\uff1a 1. \u8b80\u53d6\u6240\u6709\u76f8\u95dc TDD tickets 2. \u6aa2\u67e5\u5be6\u969b\u6a94\u6848\u7d50\u69cb 3. \u6bd4\u5c0d\u7a0b\u5f0f\u78bc\u8207 TDD \u898f\u7bc4 4. \u8a55\u4f30\u5b8c\u6210\u5ea6\u548c\u5dee\u7570 5. \u751f\u6210\u8a73\u7d30\u5831\u544a</p> <p>\u7d50\u679c\uff1a\u767c\u73fe\u5be6\u4f5c\u6574\u9ad4\u7b26\u5408 TDD\uff0c\u4f46\u6709\u591a\u8655\u512a\u65bc TDD \u7684\u6539\u9032</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#2-tdd","title":"\u554f\u984c 2\uff1a\u767c\u73fe\u5be6\u4f5c\u512a\u65bc TDD \u6642\u600e\u9ebc\u8fa6\uff1f","text":"<p>\u89e3\u6c7a\u904e\u7a0b\uff1a 1. \u5206\u6790\u6539\u9032\u7684\u5408\u7406\u6027 2. \u8a55\u4f30\u5f71\u97ff\u7bc4\u570d 3. \u6c7a\u5b9a\u66f4\u65b0 TDD \u6587\u6a94 4. \u8a18\u9304\u8a2d\u8a08\u6c7a\u7b56 5. \u751f\u6210\u66f4\u65b0\u8a18\u9304</p> <p>\u7d50\u679c\uff1aTDD \u6587\u6a94\u66f4\u65b0\uff0c\u8207\u5be6\u4f5c\u9054\u6210\u4e00\u81f4</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#3","title":"\u554f\u984c 3\uff1a\u5982\u4f55\u7d44\u7e54\u5927\u91cf\u7684\u6aa2\u67e5\u7d50\u679c\uff1f","text":"<p>\u89e3\u6c7a\u904e\u7a0b\uff1a 1. \u4f7f\u7528\u7d50\u69cb\u5316\u7684\u5831\u544a\u683c\u5f0f 2. \u5206\u5c64\u6b21\u5448\u73fe\uff08\u6458\u8981 \u2192 \u8a73\u7d30\uff09 3. \u4f7f\u7528\u8868\u683c\u548c\u6a19\u8a18\u6e05\u6670\u5448\u73fe\u72c0\u614b 4. \u63d0\u4f9b\u884c\u52d5\u5efa\u8b70</p> <p>\u7d50\u679c\uff1a\u751f\u6210 53 \u9801\u7684\u8a73\u7d30\u5831\u544a\uff0c\u6e05\u6670\u6613\u8b80</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_14","title":"\ud83d\udcca \u5de5\u4f5c\u7d71\u8a08","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_15","title":"\u4efb\u52d9\u7d71\u8a08","text":"<ul> <li>\u539f\u8a08\u5283\u7684 Tickets: 4 \u500b\uff08TDD-022, TDD-031, TDD-040, TDD-041\uff09</li> <li>\u5be6\u969b\u5b8c\u6210\u7684\u4efb\u52d9: 3 \u500b\u6587\u6a94\u4efb\u52d9</li> <li>TDD \u4e00\u81f4\u6027\u6aa2\u67e5\u5831\u544a\uff081 \u500b\uff09</li> <li>TDD \u6587\u6a94\u66f4\u65b0\uff083 \u500b tickets\uff09</li> <li>TDD \u66f4\u65b0\u8a18\u9304\uff081 \u500b\uff09</li> <li>\u9032\u884c\u4e2d\u7684 Tickets: 0 \u500b\uff08\u4eca\u65e5\u672a\u5be6\u4f5c\u4ee3\u78bc\uff09</li> <li>\u963b\u585e\u7684 Tickets: 2 \u500b\uff08TDD-040, TDD-041 \u7b49\u5f85\u660e\u65e5\u958b\u59cb\uff09</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_16","title":"\u6587\u6a94\u7d71\u8a08","text":"<ul> <li>\u751f\u6210\u7684\u65b0\u6587\u6a94: 2 \u500b</li> <li><code>tdd_consistency_check_2025-12-09.md</code>\uff0853 \u9801\uff09</li> <li><code>tdd_updates_2025-12-09.md</code>\uff08\u8a73\u7d30\u8b8a\u66f4\u8a18\u9304\uff09</li> <li>\u66f4\u65b0\u7684 TDD \u6587\u6a94: 3 \u500b</li> <li>TDD-010: PrematchCommentAPI</li> <li>TDD-011: ChatAPI</li> <li>TDD-031: LiveChatRepository</li> <li>\u66f4\u65b0\u7684\u5de5\u4f5c\u6587\u6a94: 2 \u500b</li> <li><code>daily_plans/2025-12-09.md</code></li> <li><code>daily_summaries/2025-12-09.md</code></li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_17","title":"\u5c0d\u8a71\u7d71\u8a08","text":"<ul> <li>\u8207 Cursor \u7684\u4e3b\u8981\u5c0d\u8a71\u968e\u6bb5: 3 \u500b</li> <li>TDD \u4e00\u81f4\u6027\u6aa2\u67e5</li> <li>TDD \u6587\u6a94\u66f4\u65b0</li> <li>\u5de5\u4f5c\u7d71\u6574</li> <li>\u91cd\u8981\u6c7a\u7b56\u6578: 6 \u500b</li> <li>\u767c\u73fe\u7684\u554f\u984c\u6578: 4 \u500b</li> <li>\u63d0\u53d6\u7684\u5b78\u7fd2\u8981\u9ede\u6578: 5 \u500b</li> <li>\u63d0\u4f9b\u7684\u6539\u9032\u5efa\u8b70\u6578: 8 \u500b</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_18","title":"\u4ee3\u78bc\u7d71\u8a08","text":"<ul> <li>\u6aa2\u67e5\u7684\u4ee3\u78bc\u6a94\u6848: ~20 \u500b</li> <li>\u8b80\u53d6\u7684 TDD \u6587\u6a94: ~10 \u500b</li> <li>\u5be6\u969b\u4fee\u6539\u7684\u4ee3\u78bc: 0 \u884c\uff08\u4eca\u65e5\u50c5\u66f4\u65b0\u6587\u6a94\uff09</li> <li>\u5be6\u4f5c\u5b8c\u6210\u5ea6\u8a55\u4f30: 53%\uff08\u6574\u9ad4\u5c08\u6848\uff09</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_19","title":"\u6642\u9593\u5206\u914d\u4f30\u8a08","text":"<ul> <li>TDD \u4e00\u81f4\u6027\u6aa2\u67e5: ~1.5 \u5c0f\u6642</li> <li>TDD \u6587\u6a94\u66f4\u65b0: ~1 \u5c0f\u6642</li> <li>\u5de5\u4f5c\u7d71\u6574\u548c\u8a18\u9304: ~0.5 \u5c0f\u6642</li> <li>\u7e3d\u8a08: ~3 \u5c0f\u6642 </li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_20","title":"\ud83d\udca1 \u53cd\u601d\u8207\u5b78\u7fd2","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_21","title":"\u4eca\u5929\u5b78\u5230\u4e86\u4ec0\u9ebc\uff1f","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#1-tdd_2","title":"1. TDD \u6587\u6a94\u7ba1\u7406\u7684\u91cd\u8981\u6027","text":"<p>\u5b78\u7fd2\uff1a - TDD \u6587\u6a94\u4e0d\u61c9\u8a72\u662f\u300c\u4e00\u6b21\u6027\u300d\u7684\u898f\u5283\u5de5\u5177 - \u9700\u8981\u96a8\u8457\u5be6\u4f5c\u4e0d\u65b7\u66f4\u65b0\u548c\u8abf\u6574 - \u8a73\u7d30\u7684\u4e00\u81f4\u6027\u6aa2\u67e5\u53ef\u4ee5\u767c\u73fe\u5f88\u591a\u96b1\u85cf\u7684\u554f\u984c</p> <p>\u61c9\u7528\uff1a - \u5efa\u7acb\u5b9a\u671f\u6aa2\u67e5\u6a5f\u5236\uff08\u6bcf\u9031\u6216\u6bcf\u500b Sprint\uff09 - \u5be6\u4f5c\u6642\u540c\u6b65\u66f4\u65b0\u6587\u6a94 - \u8a18\u9304\u6240\u6709\u504f\u96e2\u539f\u8a2d\u8a08\u7684\u6c7a\u7b56</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#2","title":"2. \u5be6\u4f5c\u512a\u65bc\u6587\u6a94\u7684\u5224\u65b7\u6a19\u6e96","text":"<p>\u5b78\u7fd2\uff1a - \u4e0d\u662f\u6240\u6709\u504f\u96e2\u90fd\u662f\u932f\u8aa4\uff0c\u6709\u4e9b\u662f\u6539\u9032 - \u95dc\u9375\u662f\u8981\u8a18\u9304\u300c\u70ba\u4ec0\u9ebc\u300d\u504f\u96e2 - \u597d\u7684\u6539\u9032\u61c9\u8a72\u66f4\u65b0\u6587\u6a94\uff0c\u800c\u4e0d\u662f\u4fee\u6539\u5be6\u4f5c</p> <p>\u5224\u65b7\u6a19\u6e96\uff1a - \u2705 \u66f4\u7b26\u5408\u5be6\u969b API \u884c\u70ba \u2192 \u66f4\u65b0\u6587\u6a94 - \u2705 \u63d0\u9ad8\u4ee3\u78bc\u54c1\u8cea \u2192 \u66f4\u65b0\u6587\u6a94 - \u2705 \u7b26\u5408 Clean Architecture \u2192 \u66f4\u65b0\u6587\u6a94 - \u274c \u53ea\u662f\u5077\u61f6 \u2192 \u4fee\u6539\u5be6\u4f5c</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#3_1","title":"3. \u67b6\u69cb\u8a2d\u8a08\u7684\u9748\u6d3b\u6027","text":"<p>\u5b78\u7fd2\uff1a - \u5169\u5c64 Repository \u6bd4\u55ae\u5c64\u66f4\u7b26\u5408\u8077\u8cac\u5206\u96e2 - \u67b6\u69cb\u8a2d\u8a08\u61c9\u8a72\u96a8\u8457\u7406\u89e3\u52a0\u6df1\u800c\u6f14\u9032 - \u4e0d\u8981\u5bb3\u6015\u91cd\u69cb\uff0c\u5982\u679c\u6709\u5145\u5206\u7684\u7406\u7531</p> <p>\u555f\u793a\uff1a - \u67b6\u69cb\u4e0d\u662f\u4e00\u6210\u4e0d\u8b8a\u7684 - \u597d\u7684\u67b6\u69cb\u61c9\u8a72\u6613\u65bc\u6e2c\u8a66\u548c\u7dad\u8b77 - \u8a18\u9304\u67b6\u69cb\u6f14\u9032\u904e\u7a0b\u5f88\u91cd\u8981</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#4-integration-tests","title":"4. Integration Tests \u7684\u50f9\u503c","text":"<p>\u5b78\u7fd2\uff1a - Integration Tests \u53ef\u4ee5\u767c\u73fe\u6587\u6a94\u8207\u5be6\u969b\u7684\u5dee\u7570 - \u61c9\u8a72\u512a\u5148\u5beb Integration Tests \u9a57\u8b49 API - Rate Limit \u554f\u984c\u9700\u8981\u7279\u6b8a\u8655\u7406\uff08Token Cache\uff09</p> <p>\u5be6\u8e10\uff1a - \u4f7f\u7528 <code>.serialized</code> \u907f\u514d\u4e26\u767c\u554f\u984c - \u5be6\u4f5c Token Cache \u907f\u514d\u91cd\u8907\u8a8d\u8b49 - \u6dfb\u52a0\u8a73\u7d30\u7684\u65e5\u8a8c\u4fbf\u65bc debugging</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#5-ai","title":"5. \u8207 AI \u5354\u4f5c\u7684\u6700\u4f73\u5be6\u8e10","text":"<p>\u5b78\u7fd2\uff1a - \u7d50\u69cb\u5316\u7684\u4efb\u52d9\u5206\u89e3\u5f88\u91cd\u8981 - \u5373\u6642\u8a18\u9304\u6c7a\u7b56\u548c\u5b78\u7fd2\u8981\u9ede - \u5b9a\u671f\u7d71\u6574\u548c\u56de\u9867</p> <p>\u6280\u5de7\uff1a - \u4f7f\u7528 codebase_search \u5feb\u901f\u5b9a\u4f4d - \u4e26\u884c\u8b80\u53d6\u591a\u500b\u76f8\u95dc\u6a94\u6848 - \u751f\u6210\u7d50\u69cb\u5316\u7684\u5831\u544a\u548c\u8a18\u9304</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_22","title":"\u54ea\u4e9b\u5730\u65b9\u53ef\u4ee5\u505a\u5f97\u66f4\u597d\uff1f","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#1","title":"1. \u66f4\u65e9\u9032\u884c\u4e00\u81f4\u6027\u6aa2\u67e5","text":"<p>\u73fe\u72c0\uff1a\u5728\u5be6\u4f5c\u5b8c\u6210\u5f8c\u624d\u505a\u4e00\u81f4\u6027\u6aa2\u67e5</p> <p>\u6539\u9032\uff1a - \u5728\u958b\u59cb\u5be6\u4f5c\u524d\u5c31\u505a\u4e00\u6b21\u6aa2\u67e5 - \u78ba\u4fdd\u7406\u89e3 TDD \u8981\u6c42 - \u767c\u73fe\u554f\u984c\u53ef\u4ee5\u63d0\u65e9\u89e3\u6c7a</p> <p>\u884c\u52d5\uff1a\u4e0b\u6b21\u958b\u59cb\u65b0 ticket \u524d\u5148\u505a\u6aa2\u67e5</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#2_1","title":"2. \u5be6\u4f5c\u6642\u540c\u6b65\u66f4\u65b0\u6587\u6a94","text":"<p>\u73fe\u72c0\uff1a\u5be6\u4f5c\u5b8c\u6210\u5f8c\u96c6\u4e2d\u66f4\u65b0\u6587\u6a94</p> <p>\u6539\u9032\uff1a - \u6bcf\u5b8c\u6210\u4e00\u500b\u529f\u80fd\u5c31\u66f4\u65b0\u76f8\u95dc TDD - \u907f\u514d\u7d2f\u7a4d\u5927\u91cf\u5dee\u7570 - \u4fdd\u6301\u6587\u6a94\u8207\u5be6\u4f5c\u540c\u6b65</p> <p>\u884c\u52d5\uff1a\u5efa\u7acb\u300c\u5be6\u4f5c \u2192 \u6e2c\u8a66 \u2192 \u66f4\u65b0\u6587\u6a94\u300d\u7684\u6d41\u7a0b</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#3_2","title":"3. \u66f4\u7cfb\u7d71\u5316\u7684\u6e2c\u8a66\u7b56\u7565","text":"<p>\u73fe\u72c0\uff1a\u4e3b\u8981\u6709 Integration Tests\uff0cUnit Tests \u4e0d\u8db3</p> <p>\u6539\u9032\uff1a - \u70ba\u6bcf\u5c64\u90fd\u6dfb\u52a0 Unit Tests - Integration Tests + Unit Tests \u7d50\u5408 - \u6e2c\u8a66\u8986\u84cb\u7387\u76ee\u6a19\uff1a\u2265 80%</p> <p>\u884c\u52d5\uff1a\u660e\u5929\u958b\u59cb\u5be6\u4f5c UseCase \u6642\u540c\u6b65\u5beb Unit Tests</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#4","title":"4. \u66f4\u4e3b\u52d5\u7684\u554f\u984c\u8ffd\u8e64","text":"<p>\u73fe\u72c0\uff1a\u767c\u73fe\u554f\u984c\u5f8c\u6dfb\u52a0 TODO\uff0c\u4f46\u6c92\u6709\u660e\u78ba\u7684\u8ffd\u8e64\u6a5f\u5236</p> <p>\u6539\u9032\uff1a - \u70ba\u6bcf\u500b TODO \u5275\u5efa\u5c0d\u61c9\u7684 issue - \u5b9a\u671f\u56de\u9867\u548c\u8655\u7406 TODOs - \u512a\u5148\u7d1a\u6392\u5e8f</p> <p>\u884c\u52d5\uff1a\u6574\u7406\u6240\u6709 TODOs\uff0c\u5275\u5efa GitHub Issues</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#5_1","title":"5. \u66f4\u983b\u7e41\u7684\u5de5\u4f5c\u7d71\u6574","text":"<p>\u73fe\u72c0\uff1a\u4e00\u5929\u7d50\u675f\u6642\u624d\u7d71\u6574</p> <p>\u6539\u9032\uff1a - \u6bcf\u5b8c\u6210\u4e00\u500b\u968e\u6bb5\u5c31\u505a\u5c0f\u7d71\u6574 - \u4e0d\u8981\u7b49\u5230\u6700\u5f8c - \u4fdd\u6301\u8a18\u9304\u7684\u65b0\u9bae\u5ea6</p> <p>\u884c\u52d5\uff1a\u5efa\u7acb\u300c\u756a\u8304\u5de5\u4f5c\u6cd5 + \u5c0f\u7d71\u6574\u300d\u7684\u7fd2\u6163</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#cursor_1","title":"\u8207 Cursor \u7684\u5354\u4f5c\u6709\u4ec0\u9ebc\u6539\u9032\u7a7a\u9593\uff1f","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#1_1","title":"1. \u66f4\u6e05\u6670\u7684\u4efb\u52d9\u63cf\u8ff0","text":"<p>\u73fe\u72c0\uff1a\u6709\u6642\u4efb\u52d9\u63cf\u8ff0\u4e0d\u5920\u5177\u9ad4</p> <p>\u6539\u9032\uff1a - \u63d0\u4f9b\u66f4\u5177\u9ad4\u7684\u4e0a\u4e0b\u6587 - \u660e\u78ba\u671f\u5f85\u7684\u8f38\u51fa\u683c\u5f0f - \u63d0\u524d\u8aaa\u660e\u7d04\u675f\u689d\u4ef6</p> <p>\u7bc4\u4f8b\uff1a <pre><code>\u274c \u4e0d\u597d\uff1a\u5e6b\u6211\u6aa2\u67e5\u5be6\u4f5c\u662f\u5426\u8207 TDD \u4e00\u81f4\n\u2705 \u597d\uff1a\u5e6b\u6211\u6aa2\u67e5 MatchChat \u7684\u5be6\u4f5c\u662f\u5426\u8207 TDD \u6587\u6a94\u5b8c\u5168\u4e00\u81f4\uff0c\n      \u4ee5 codebase \u70ba\u4e3b\u66f4\u65b0\u6587\u6a94\uff0c\u751f\u6210\u8a73\u7d30\u5831\u544a\n</code></pre></p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#2_2","title":"2. \u66f4\u6709\u6548\u7684\u8fed\u4ee3\u65b9\u5f0f","text":"<p>\u73fe\u72c0\uff1a\u6709\u6642\u4e00\u6b21\u8acb\u6c42\u592a\u591a\uff0c\u5c0e\u81f4\u56de\u61c9\u5197\u9577</p> <p>\u6539\u9032\uff1a - \u5206\u968e\u6bb5\u9032\u884c\uff08\u5148\u6aa2\u67e5 \u2192 \u518d\u6c7a\u7b56 \u2192 \u5f8c\u57f7\u884c\uff09 - \u6bcf\u500b\u968e\u6bb5\u78ba\u8a8d\u5f8c\u518d\u9032\u884c\u4e0b\u4e00\u968e\u6bb5 - \u907f\u514d\u4e00\u6b21\u6027\u5b8c\u6210\u6240\u6709\u5de5\u4f5c</p> <p>\u7bc4\u4f8b\uff1a <pre><code>\u968e\u6bb5 1\uff1a\u8acb\u6aa2\u67e5 API Layer \u7684\u4e00\u81f4\u6027\n\u968e\u6bb5 2\uff1a\u57fa\u65bc\u6aa2\u67e5\u7d50\u679c\uff0c\u66f4\u65b0\u76f8\u95dc\u6587\u6a94\n\u968e\u6bb5 3\uff1a\u751f\u6210\u66f4\u65b0\u8a18\u9304\n</code></pre></p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#3_3","title":"3. \u66f4\u597d\u7684\u6587\u6a94\u7d44\u7e54","text":"<p>\u73fe\u72c0\uff1a\u751f\u6210\u7684\u6587\u6a94\u6709\u6642\u7d50\u69cb\u4e0d\u5920\u6e05\u6670</p> <p>\u6539\u9032\uff1a - \u63d0\u4f9b\u6587\u6a94\u6a21\u677f\u6216\u7bc4\u4f8b - \u660e\u78ba\u6307\u5b9a\u7ae0\u7bc0\u7d50\u69cb - \u8981\u6c42\u4f7f\u7528\u7279\u5b9a\u683c\u5f0f\uff08\u5982\u8868\u683c\u3001\u5217\u8868\uff09</p> <p>\u884c\u52d5\uff1a\u6e96\u5099\u5e38\u7528\u7684\u6587\u6a94\u6a21\u677f</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#4_1","title":"4. \u66f4\u4e3b\u52d5\u7684\u8ffd\u554f\u548c\u78ba\u8a8d","text":"<p>\u73fe\u72c0\uff1a\u6709\u6642\u5047\u8a2d\u7528\u6236\u610f\u5716\uff0c\u4f46\u53ef\u80fd\u7406\u89e3\u932f\u8aa4</p> <p>\u6539\u9032\uff1a - \u9047\u5230\u6a21\u7cca\u9700\u6c42\u6642\u4e3b\u52d5\u78ba\u8a8d - \u63d0\u4f9b\u591a\u500b\u65b9\u6848\u8b93\u7528\u6236\u9078\u64c7 - \u8aaa\u660e\u6bcf\u500b\u6c7a\u7b56\u7684\u5229\u5f0a</p> <p>\u671f\u5f85\uff1aCursor \u80fd\u66f4\u4e3b\u52d5\u5730\u63d0\u51fa\u7591\u554f</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#5_2","title":"5. \u66f4\u5b8c\u6574\u7684\u4e0a\u4e0b\u6587\u7ba1\u7406","text":"<p>\u73fe\u72c0\uff1a\u6709\u6642\u9700\u8981\u91cd\u8907\u63d0\u4f9b\u4e0a\u4e0b\u6587</p> <p>\u6539\u9032\uff1a - \u4f7f\u7528 Memory \u529f\u80fd\u8a18\u4f4f\u5e38\u7528\u8cc7\u8a0a - \u53c3\u8003\u4e4b\u524d\u7684\u5c0d\u8a71\u8a18\u9304 - \u4e3b\u52d5\u95dc\u806f\u76f8\u95dc\u6587\u4ef6</p> <p>\u884c\u52d5\uff1a\u5584\u7528 @ \u63d0\u53ca\u529f\u80fd\u548c Memory</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_23","title":"\u4eca\u5929\u6700\u6709\u50f9\u503c\u7684\u6536\u7a6b","text":"<p>\u6280\u8853\u5c64\u9762\uff1a - \u7406\u89e3\u4e86\u5169\u5c64 Repository \u67b6\u69cb\u7684\u512a\u9ede - \u5b78\u6703\u4e86\u5982\u4f55\u8655\u7406 API \u8fd4\u56de <code>null</code> \u7684\u60c5\u6cc1 - \u638c\u63e1\u4e86 Swift Concurrency \u7684 <code>Sendable</code> \u4f7f\u7528</p> <p>\u6d41\u7a0b\u5c64\u9762\uff1a - \u5efa\u7acb\u4e86 TDD \u4e00\u81f4\u6027\u6aa2\u67e5\u7684\u65b9\u6cd5\u8ad6 - \u5b78\u6703\u4e86\u5982\u4f55\u8a18\u9304\u8a2d\u8a08\u6c7a\u7b56 - \u7406\u89e3\u4e86\u6587\u6a94\u8207\u5be6\u4f5c\u540c\u6b65\u7684\u91cd\u8981\u6027</p> <p>\u5354\u4f5c\u5c64\u9762\uff1a - \u8207 AI \u5354\u4f5c\u7684\u6700\u4f73\u5be6\u8e10 - \u7d50\u69cb\u5316\u4efb\u52d9\u5206\u89e3\u7684\u6280\u5de7 - \u8a73\u7d30\u8a18\u9304\u7684\u50f9\u503c</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_24","title":"\u5c0d\u672a\u4f86\u5de5\u4f5c\u7684\u555f\u793a","text":"<ol> <li>\u990a\u6210\u5b9a\u671f\u6aa2\u67e5\u7684\u7fd2\u6163</li> <li>\u6bcf\u9031\u505a\u4e00\u6b21 TDD \u4e00\u81f4\u6027\u6aa2\u67e5</li> <li> <p>\u53ca\u6642\u767c\u73fe\u548c\u89e3\u6c7a\u554f\u984c</p> </li> <li> <p>\u4fdd\u6301\u6587\u6a94\u8207\u5be6\u4f5c\u540c\u6b65</p> </li> <li>\u5be6\u4f5c\u6642\u540c\u6b65\u66f4\u65b0\u6587\u6a94</li> <li> <p>\u8a18\u9304\u6240\u6709\u91cd\u8981\u6c7a\u7b56</p> </li> <li> <p>\u6295\u8cc7\u6642\u9593\u5728\u6e2c\u8a66\u4e0a</p> </li> <li>Unit Tests \u548c Integration Tests \u90fd\u5f88\u91cd\u8981</li> <li> <p>\u6e2c\u8a66\u662f\u4fdd\u8b49\u54c1\u8cea\u7684\u95dc\u9375</p> </li> <li> <p>\u5584\u7528 AI \u5354\u4f5c</p> </li> <li>\u7d50\u69cb\u5316\u7684\u4efb\u52d9\u5206\u89e3</li> <li>\u8a73\u7d30\u7684\u8a18\u9304\u548c\u7d71\u6574</li> <li>\u5b9a\u671f\u56de\u9867\u548c\u5b78\u7fd2</li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_25","title":"\ud83d\udd04 \u660e\u65e5\u8a08\u5283","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_26","title":"\u4e3b\u8981\u76ee\u6a19","text":"<p>\u6839\u64da\u4eca\u65e5\u7684\u4e00\u81f4\u6027\u6aa2\u67e5\u7d50\u679c\uff0c\u660e\u65e5\uff082025-12-10\uff09\u7684\u91cd\u9ede\u662f\u958b\u59cb\u5be6\u4f5c UseCase Layer\u3002</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#p0","title":"\u512a\u5148\u4efb\u52d9\uff08P0\uff09","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#1-tdd-040-reloadcommentlistusecase","title":"1. \u958b\u59cb\u5be6\u4f5c TDD-040: ReloadCommentListUseCase","text":"<p>Due Date: 2025-12-10 \u9810\u4f30\u6642\u9593: 2 \u5929</p> <p>\u6e96\u5099\u5de5\u4f5c\uff1a - \u2705 \u4f9d\u8cf4\u5df2\u5b8c\u6210\uff1aPrematchCommentRepository - \u2705 TDD \u6587\u6a94\u5df2\u66f4\u65b0 - \u2705 \u7406\u89e3\u5be6\u4f5c\u67b6\u69cb</p> <p>\u5be6\u4f5c\u6b65\u9a5f\uff1a</p> <ol> <li> <p>\u8b80\u53d6 TDD-040 \u6587\u6a94</p> </li> <li> <p>\u5275\u5efa UseCase \u6a94\u6848\u7d50\u69cb</p> </li> <li> <p>\u5be6\u4f5c Input/Output Models</p> </li> <li> <p>\u5be6\u4f5c <code>execute</code> \u65b9\u6cd5</p> </li> <li> <p>\u5beb Unit Tests</p> </li> <li> <p>\u66f4\u65b0\u6587\u6a94</p> </li> </ol> <p>\u9a57\u6536\u689d\u4ef6\uff1a</p> <ul> <li> <p>Input/Output Model \u5b9a\u7fa9\u5b8c\u6210</p> </li> <li> <p>UseCase \u5546\u696d\u908f\u8f2f\u5be6\u4f5c\u5b8c\u6210</p> </li> <li> <p>Unit Test \u8986\u84cb\u7387 \u2265 90%</p> </li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#2-adapter-protocols","title":"2. \u5b9a\u7fa9 Adapter Protocols","text":"<p>\u76ee\u7684: \u70ba TDD-041 (PublishCommentUseCase) \u505a\u6e96\u5099 \u9810\u4f30\u6642\u9593: 0.5 \u5929</p> <p>\u9700\u8981\u5b9a\u7fa9\u7684 Protocols\uff1a</p> <ol> <li>PersonalPageAdapter</li> </ol> <pre><code>protocol PersonalPageAdapter {\n    var isLoggedIn: Bool { get }\n    var hasNickname: Bool { get }\n}\n</code></pre> <ol> <li>FComSharedFlowAdapter</li> </ol> <pre><code>protocol FComSharedFlowAdapter {\n    func createNickname() async throws\n}\n</code></pre> <p>\u5be6\u4f5c\u6b65\u9a5f\uff1a</p> <ol> <li> <p>\u5728 MatchChat Package \u4e2d\u5b9a\u7fa9 Protocols</p> </li> <li> <p>\u6dfb\u52a0\u6587\u6a94\u8aaa\u660e</p> </li> <li> <p>\u6e96\u5099 Mock \u5be6\u4f5c\u4f9b\u6e2c\u8a66\u4f7f\u7528</p> </li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#p1","title":"\u6b21\u8981\u4efb\u52d9\uff08P1\uff09","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#3-chatwebsocketclient-unit-tests","title":"3. \u88dc\u5145 ChatWebSocketClient Unit Tests","text":"<p>\u9810\u4f30\u6642\u9593: 1 \u5929\uff08\u53ef\u9078\uff0c\u5982\u679c\u6642\u9593\u5141\u8a31\uff09</p> <p>\u6e2c\u8a66\u7bc4\u570d\uff1a</p> <ul> <li> <p>\u9023\u7dda\u7ba1\u7406\uff08connect, disconnect\uff09</p> </li> <li> <p>\u8a02\u95b1\u7ba1\u7406\uff08subscribe, unsubscribe\uff09</p> </li> <li> <p>\u91cd\u9023\u908f\u8f2f\uff08\u6307\u6578\u9000\u907f\uff09</p> </li> <li> <p>\u932f\u8aa4\u8655\u7406</p> </li> </ul> <p>\u76ee\u6a19\u8986\u84cb\u7387: \u2265 80%</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#4-repository-layer-unit-tests","title":"4. \u88dc\u5145 Repository Layer Unit Tests","text":"<p>\u9810\u4f30\u6642\u9593: 1 \u5929\uff08\u53ef\u9078\uff0c\u5982\u679c\u6642\u9593\u5141\u8a31\uff09</p> <p>\u6e2c\u8a66\u7bc4\u570d\uff1a</p> <ul> <li> <p>DTO \u2192 Domain Model \u8f49\u63db</p> </li> <li> <p>\u932f\u8aa4\u8655\u7406</p> </li> <li> <p>Cursor \u5206\u9801\u908f\u8f2f</p> </li> </ul> <p>\u76ee\u6a19\u8986\u84cb\u7387: \u2265 80%</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_27","title":"\u98a8\u96aa\u548c\u963b\u585e\u9805","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_28","title":"\u98a8\u96aa","text":"<ol> <li> <p>TDD-040 \u8907\u96dc\u5ea6\u53ef\u80fd\u88ab\u4f4e\u4f30</p> </li> <li> <p>\u539f\u4f30\u8a08 2 \u5929\uff0c\u53ef\u80fd\u9700\u8981\u66f4\u591a\u6642\u9593</p> </li> <li> <p>\u7de9\u89e3\uff1a\u5c08\u6ce8\u6838\u5fc3\u529f\u80fd\uff0c\u6b21\u8981\u529f\u80fd\u53ef\u4ee5\u5f8c\u7e8c\u88dc\u5145</p> </li> <li> <p>Adapter \u6574\u5408\u53ef\u80fd\u9047\u5230\u554f\u984c</p> </li> <li> <p>FCom \u4e3b\u61c9\u7528\u7684\u4ecb\u9762\u53ef\u80fd\u9700\u8981\u8abf\u6574</p> </li> <li>\u7de9\u89e3\uff1a\u5148\u5b9a\u7fa9 Protocol\uff0c\u5be6\u969b\u6574\u5408\u53ef\u4ee5\u5f8c\u7e8c\u8655\u7406</li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_29","title":"\u963b\u585e\u9805","text":"<p>\u76ee\u524d\u7121\u963b\u585e\u9805\uff0c\u6240\u6709\u4f9d\u8cf4\u90fd\u5df2\u5b8c\u6210\u3002</p>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_30","title":"\u5de5\u4f5c\u6d41\u7a0b\u5efa\u8b70","text":""},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#900-1200","title":"\u4e0a\u5348\uff089:00 - 12:00\uff09","text":"<ol> <li> <p>\u8b80\u53d6\u548c\u7406\u89e3 TDD-040\uff0830 \u5206\u9418\uff09</p> </li> <li> <p>\u8b80\u53d6\u5b8c\u6574 TDD \u6587\u6a94</p> </li> <li>\u7406\u89e3 Input/Output Model</li> <li> <p>\u78ba\u8a8d\u9a57\u6536\u689d\u4ef6</p> </li> <li> <p>\u5be6\u4f5c ReloadCommentListUseCase\uff082.5 \u5c0f\u6642\uff09</p> </li> <li> <p>\u5275\u5efa\u6a94\u6848\u7d50\u69cb</p> </li> <li>\u5be6\u4f5c Input/Output Models</li> <li>\u5be6\u4f5c <code>execute</code> \u65b9\u6cd5</li> <li>\u8655\u7406 triggerType \u548c mode \u908f\u8f2f</li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#1300-1800","title":"\u4e0b\u5348\uff0813:00 - 18:00\uff09","text":"<ol> <li> <p>\u5beb Unit Tests\uff082 \u5c0f\u6642\uff09</p> </li> <li> <p>\u6e2c\u8a66\u57fa\u672c\u5834\u666f\uff08init, refresh\uff09</p> </li> <li>\u6e2c\u8a66\u5206\u9801\u908f\u8f2f\uff08cursor \u8655\u7406\uff09</li> <li> <p>\u6e2c\u8a66\u932f\u8aa4\u8655\u7406</p> </li> <li> <p>\u5b9a\u7fa9 Adapter Protocols\uff081 \u5c0f\u6642\uff09</p> </li> <li> <p>\u5275\u5efa PersonalPageAdapter</p> </li> <li>\u5275\u5efa FComSharedFlowAdapter</li> <li> <p>\u6dfb\u52a0\u6587\u6a94\u8aaa\u660e</p> </li> <li> <p>\u7d71\u6574\u548c\u66f4\u65b0\u6587\u6a94\uff081 \u5c0f\u6642\uff09</p> </li> <li> <p>\u66f4\u65b0 implementation_status.md</p> </li> <li>\u66f4\u65b0 daily_log</li> <li> <p>\u63d0\u4ea4 commits</p> </li> <li> <p>\u9810\u7559\u7de9\u885d\u6642\u9593\uff081 \u5c0f\u6642\uff09</p> </li> <li> <p>\u8655\u7406\u610f\u5916\u554f\u984c</p> </li> <li>Code Review</li> <li>\u88dc\u5145\u6e2c\u8a66</li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_31","title":"\u6210\u529f\u6307\u6a19","text":"<ul> <li>\u2705 TDD-040 \u6838\u5fc3\u529f\u80fd\u5be6\u4f5c\u5b8c\u6210</li> <li>\u2705 Unit Tests \u8986\u84cb\u7387 \u2265 90%</li> <li>\u2705 Adapter Protocols \u5b9a\u7fa9\u5b8c\u6210</li> <li>\u2705 \u6240\u6709 commits \u63d0\u4ea4</li> <li>\u2705 \u6587\u6a94\u66f4\u65b0\u5b8c\u6210</li> </ul>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_32","title":"\u5099\u7528\u8a08\u5283","text":"<p>\u5982\u679c TDD-040 \u9032\u5ea6\u843d\u5f8c\uff1a</p> <ol> <li> <p>\u512a\u5148\u5b8c\u6210\u6838\u5fc3\u529f\u80fd</p> </li> <li> <p>Unit Tests \u53ef\u4ee5\u7c21\u5316\uff08\u5148\u8986\u84cb\u4e3b\u8981\u8def\u5f91\uff09</p> </li> <li> <p>Adapter Protocols \u53ef\u4ee5\u5ef6\u5f8c\u5230\u660e\u5929</p> </li> </ol> <p>\u5982\u679c TDD-040 \u63d0\u524d\u5b8c\u6210\uff1a</p> <ol> <li> <p>\u88dc\u5145 ChatWebSocketClient Unit Tests</p> </li> <li> <p>\u958b\u59cb\u5be6\u4f5c TDD-041 (PublishCommentUseCase)</p> </li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_33","title":"\u5354\u4f5c\u63d0\u9192","text":"<p>\u8207 Cursor \u7684\u5354\u4f5c\u91cd\u9ede\uff1a</p> <ol> <li> <p>\u5be6\u4f5c\u524d\u5148\u8acb Cursor \u6aa2\u67e5 TDD \u8981\u6c42</p> </li> <li> <p>\u9047\u5230\u554f\u984c\u53ca\u6642\u8207 Cursor \u8a0e\u8ad6</p> </li> <li> <p>\u5b8c\u6210\u5f8c\u8acb Cursor \u6aa2\u67e5\u662f\u5426\u7b26\u5408\u9a57\u6536\u689d\u4ef6</p> </li> <li> <p>\u8a18\u9304\u6240\u6709\u91cd\u8981\u6c7a\u7b56</p> </li> </ol> <p>\u907f\u514d\u7684\u9677\u9631\uff1a</p> <ol> <li> <p>\u274c \u4e0d\u8981\u904e\u5ea6\u8a2d\u8a08\uff0c\u5c08\u6ce8\u6838\u5fc3\u529f\u80fd</p> </li> <li> <p>\u274c \u4e0d\u8981\u5ffd\u7565\u6e2c\u8a66\uff0c\u6e2c\u8a66\u8207\u5be6\u4f5c\u540c\u7b49\u91cd\u8981</p> </li> <li> <p>\u274c \u4e0d\u8981\u5fd8\u8a18\u66f4\u65b0\u6587\u6a94</p> </li> <li> <p>\u274c \u4e0d\u8981\u6025\u65bc\u5b8c\u6210\uff0c\u54c1\u8cea\u512a\u5148\u65bc\u901f\u5ea6</p> </li> </ol>"},{"location":"16_Cursor_Workflow/daily_summaries/2025-12-09/#_34","title":"\u76f8\u95dc\u6587\u4ef6","text":"<ul> <li>\u5de5\u4f5c\u65e5\u8a8c</li> <li>\u5de5\u4f5c\u8a08\u5283\uff08\u5982\u679c\u5b58\u5728\uff09</li> </ul>"},{"location":"17_Cursor_Commands/","title":"Cursor \u5de5\u4f5c\u6d41\u547d\u4ee4","text":"<p>\u672c\u76ee\u9304\u5305\u542b MatchChat feature \u958b\u767c\u7684\u5e38\u7528 Cursor \u547d\u4ee4\u3002</p>"},{"location":"17_Cursor_Commands/#_1","title":"\ud83d\udccb \u547d\u4ee4\u5217\u8868","text":""},{"location":"17_Cursor_Commands/#_2","title":"\u6bcf\u5929\u958b\u59cb\u6642","text":"<ol> <li>daily-start - \u958b\u59cb\u4eca\u5929\u7684\u5de5\u4f5c</li> <li>\u751f\u6210\u5de5\u4f5c\u8a08\u5283</li> <li>\u5efa\u7acb\u5de5\u4f5c\u65e5\u8a8c</li> <li> <p>\u63d0\u4f9b\u5be6\u4f5c\u5efa\u8b70</p> </li> <li> <p>generate-daily-plan - \u751f\u6210\u4eca\u5929\u7684\u5de5\u4f5c\u8a08\u5283</p> </li> <li>\u6839\u64da\u65e5\u671f\u627e\u51fa\u5c0d\u61c9\u7684 Jira tickets</li> <li> <p>\u751f\u6210\u5de5\u4f5c\u8a08\u5283\u6587\u4ef6</p> </li> <li> <p>create-daily-log - \u5efa\u7acb\u4eca\u5929\u7684\u5de5\u4f5c\u65e5\u8a8c</p> </li> <li>\u4f7f\u7528\u9810\u8a2d\u6a21\u677f\u5efa\u7acb\u5de5\u4f5c\u65e5\u8a8c</li> </ol>"},{"location":"17_Cursor_Commands/#_3","title":"\u6bcf\u5929\u7d50\u675f\u6642","text":"<ol> <li>daily-end - \u7d50\u675f\u4eca\u5929\u7684\u5de5\u4f5c</li> <li>\u7d71\u6574\u7576\u5929\u5de5\u4f5c</li> <li>\u66f4\u65b0\u5be6\u4f5c\u72c0\u614b</li> <li>\u66f4\u65b0\u8b8a\u66f4\u65e5\u8a8c</li> <li> <p>\u7d71\u6574\u5c0d\u8a71</p> </li> <li> <p>summarize-daily-work - \u7d71\u6574\u7576\u5929\u5de5\u4f5c</p> </li> <li>\u751f\u6210\u5de5\u4f5c\u7d71\u6574\u6587\u4ef6</li> </ol>"},{"location":"17_Cursor_Commands/#_4","title":"\u90e8\u7f72\u8207\u767c\u5e03","text":"<ol> <li>deploy-tdd-to-mkdocs - \u90e8\u7f72 TDD \u5230 MkDocs</li> <li>\u5efa\u7f6e MkDocs \u6587\u6a94</li> <li>\u90e8\u7f72\u5230 GitHub Pages (gh-pages branch)</li> <li>\u986f\u793a\u90e8\u7f72\u72c0\u614b\u548c\u7db2\u7ad9 URL</li> <li> <p>\u5305\u542b\u5c0d\u8a71\u7d71\u6574\u6a21\u677f</p> </li> <li> <p>review-cursor-conversations - \u7d71\u6574\u5c0d\u8a71</p> </li> <li>\u63d0\u53d6\u91cd\u8981\u6c7a\u7b56</li> <li>\u63d0\u53d6\u5b78\u7fd2\u8981\u9ede</li> <li>\u751f\u6210\u5c0d\u8a71\u6458\u8981</li> </ol>"},{"location":"17_Cursor_Commands/#_5","title":"\u5be6\u4f5c\u904e\u7a0b\u4e2d","text":"<ol> <li>update-implementation-status - \u66f4\u65b0\u5be6\u4f5c\u72c0\u614b</li> <li>\u6aa2\u67e5\u5be6\u4f5c\u9032\u5ea6</li> <li>\u66f4\u65b0\u72c0\u614b\u8ffd\u8e64\u8868</li> <li> <p>\u6aa2\u67e5 TDD \u4e00\u81f4\u6027</p> </li> <li> <p>update-changelog - \u66f4\u65b0\u8b8a\u66f4\u65e5\u8a8c</p> </li> <li>\u6839\u64da git commits \u751f\u6210\u8b8a\u66f4\u8a18\u9304</li> <li> <p>\u66f4\u65b0 CHANGELOG.md</p> </li> <li> <p>check-tdd-consistency - \u6aa2\u67e5 TDD \u4e00\u81f4\u6027</p> </li> <li>\u6aa2\u67e5\u5be6\u4f5c\u6a94\u6848\u662f\u5426\u5b58\u5728</li> <li>\u6aa2\u67e5\u662f\u5426\u7b26\u5408 TDD \u898f\u7bc4</li> <li>\u63d0\u4f9b\u6539\u9032\u5efa\u8b70</li> </ol>"},{"location":"17_Cursor_Commands/#_6","title":"\ud83d\ude80 \u5feb\u901f\u4f7f\u7528","text":""},{"location":"17_Cursor_Commands/#_7","title":"\u6bcf\u5929\u958b\u59cb\u6642","text":"<p>\u5728 Cursor \u4e2d\u8aaa\uff1a\u300c\u958b\u59cb\u4eca\u5929\u7684\u5de5\u4f5c\u300d\u6216\u57f7\u884c <code>daily-start</code> \u547d\u4ee4</p>"},{"location":"17_Cursor_Commands/#_8","title":"\u6bcf\u5929\u7d50\u675f\u6642","text":"<p>\u5728 Cursor \u4e2d\u8aaa\uff1a\u300c\u7d50\u675f\u4eca\u5929\u7684\u5de5\u4f5c\u300d\u6216\u57f7\u884c <code>daily-end</code> \u547d\u4ee4</p>"},{"location":"17_Cursor_Commands/#_9","title":"\u5be6\u4f5c\u904e\u7a0b\u4e2d","text":"<ul> <li>\u300c\u66f4\u65b0\u5be6\u4f5c\u72c0\u614b\u300d- \u66f4\u65b0\u72c0\u614b\u8ffd\u8e64</li> <li>\u300c\u66f4\u65b0\u8b8a\u66f4\u65e5\u8a8c\u300d- \u66f4\u65b0\u8b8a\u66f4\u8a18\u9304</li> <li>\u300c\u6aa2\u67e5 TDD \u4e00\u81f4\u6027\u300d- \u6aa2\u67e5\u5be6\u4f5c\u8207 TDD \u7684\u4e00\u81f4\u6027</li> </ul>"},{"location":"17_Cursor_Commands/#_10","title":"\ud83d\udcc1 \u76f8\u95dc\u6587\u4ef6","text":""},{"location":"17_Cursor_Commands/#_11","title":"\u672c\u76ee\u9304\u6587\u4ef6","text":"<ul> <li>\u5de5\u4f5c\u6d41\u7a0b\u6307\u5357: <code>WORKFLOW_GUIDE.md</code> - \u5b8c\u6574\u6d41\u7a0b\u5716\u548c\u4f7f\u7528\u6642\u6a5f\u8aaa\u660e</li> <li>\u5feb\u901f\u53c3\u8003: <code>QUICK_REFERENCE.md</code> - \u547d\u4ee4\u5feb\u901f\u53c3\u8003\u8868</li> </ul>"},{"location":"17_Cursor_Commands/#tdd","title":"TDD \u76ee\u9304\u6587\u4ef6","text":"<ul> <li>\u5de5\u4f5c\u6d41\u7a0b\u6307\u5357: <code>/Users/reedhsin/Documents/codebase/fcom-iOS/TDDs/LiveChat&amp;PrematchComment/16_Cursor_Workflow/WORKFLOW_GUIDE.md</code></li> <li>\u5feb\u901f\u958b\u59cb: <code>/Users/reedhsin/Documents/codebase/fcom-iOS/TDDs/LiveChat&amp;PrematchComment/16_Cursor_Workflow/QUICK_START.md</code></li> </ul>"},{"location":"17_Cursor_Commands/QUICK_REFERENCE/","title":"Cursor Commands \u5feb\u901f\u53c3\u8003","text":""},{"location":"17_Cursor_Commands/QUICK_REFERENCE/#_1","title":"\ud83d\ude80 \u4e00\u9375\u547d\u4ee4","text":""},{"location":"17_Cursor_Commands/QUICK_REFERENCE/#_2","title":"\u6bcf\u5929\u958b\u59cb","text":"<p><pre><code>@daily-start\n</code></pre> \u81ea\u52d5\u57f7\u884c\uff1a\u751f\u6210\u8a08\u5283 + \u5efa\u7acb\u65e5\u8a8c</p>"},{"location":"17_Cursor_Commands/QUICK_REFERENCE/#_3","title":"\u6bcf\u5929\u7d50\u675f","text":"<p><pre><code>@daily-end\n</code></pre> \u81ea\u52d5\u57f7\u884c\uff1a\u7d71\u6574\u5de5\u4f5c + \u7d71\u6574\u5c0d\u8a71</p>"},{"location":"17_Cursor_Commands/QUICK_REFERENCE/#_4","title":"\ud83d\udccb \u5b8c\u6574\u547d\u4ee4\u5217\u8868","text":""},{"location":"17_Cursor_Commands/QUICK_REFERENCE/#_5","title":"\u65e9\u4e0a\u6d41\u7a0b","text":"<ol> <li><code>@daily-start</code> - \u958b\u59cb\u4eca\u5929\u7684\u5de5\u4f5c</li> <li><code>@generate-daily-plan</code> - \u751f\u6210\u5de5\u4f5c\u8a08\u5283</li> <li><code>@create-daily-log</code> - \u5efa\u7acb\u5de5\u4f5c\u65e5\u8a8c</li> </ol>"},{"location":"17_Cursor_Commands/QUICK_REFERENCE/#_6","title":"\u5be6\u4f5c\u6d41\u7a0b","text":"<ol> <li><code>@update-implementation-status</code> - \u66f4\u65b0\u5be6\u4f5c\u72c0\u614b</li> <li><code>@update-changelog</code> - \u66f4\u65b0\u8b8a\u66f4\u65e5\u8a8c</li> <li><code>@check-tdd-consistency</code> - \u6aa2\u67e5 TDD \u4e00\u81f4\u6027</li> <li><code>@deploy-tdd-to-mkdocs</code> - \u90e8\u7f72\u5230 MkDocs</li> </ol>"},{"location":"17_Cursor_Commands/QUICK_REFERENCE/#_7","title":"\u665a\u4e0a\u6d41\u7a0b","text":"<ol> <li><code>@review-cursor-conversations</code> - \u7d71\u6574\u5c0d\u8a71</li> <li><code>@summarize-daily-work</code> - \u7d71\u6574\u7576\u5929\u5de5\u4f5c</li> <li><code>@daily-end</code> - \u7d50\u675f\u4eca\u5929\u7684\u5de5\u4f5c</li> </ol>"},{"location":"17_Cursor_Commands/QUICK_REFERENCE/#_8","title":"\u23f0 \u4f7f\u7528\u6642\u6a5f","text":"<pre><code>09:00 \u2500\u2500&gt; @daily-start\n         \u251c\u2500&gt; @generate-daily-plan\n         \u2514\u2500&gt; @create-daily-log\n\n09:30-17:00 \u2500\u2500&gt; \u5be6\u4f5c\u5faa\u74b0\n         \u251c\u2500&gt; @update-implementation-status (\u5b8c\u6210 ticket)\n         \u251c\u2500&gt; @update-changelog (\u6709\u8b8a\u66f4)\n         \u251c\u2500&gt; @check-tdd-consistency (\u5b8c\u6210\u529f\u80fd)\n         \u2514\u2500&gt; @deploy-tdd-to-mkdocs (\u9700\u8981\u767c\u5e03)\n\n17:30 \u2500\u2500&gt; @daily-end\n         \u251c\u2500&gt; @review-cursor-conversations\n         \u2514\u2500&gt; @summarize-daily-work\n</code></pre>"},{"location":"17_Cursor_Commands/QUICK_REFERENCE/#_9","title":"\ud83d\udcca \u6d41\u7a0b\u5716","text":"<pre><code>\u958b\u59cb \u2192 daily-start \u2192 \u5be6\u4f5c\u5faa\u74b0 \u2192 daily-end \u2192 \u7d50\u675f\n         \u2193              \u2193            \u2193\n     \u751f\u6210\u8a08\u5283      \u66f4\u65b0\u72c0\u614b      \u7d71\u6574\u5de5\u4f5c\n     \u5efa\u7acb\u65e5\u8a8c      \u8a18\u9304\u8b8a\u66f4      \u7d71\u6574\u5c0d\u8a71\n                 \u6aa2\u67e5\u4e00\u81f4\u6027      \u66f4\u65b0 mkdocs.yml\n                 \u90e8\u7f72\u6587\u6a94        \u90e8\u7f72\u5230 GitHub Pages\n</code></pre>"},{"location":"17_Cursor_Commands/QUICK_REFERENCE/#_10","title":"\ud83c\udfaf \u5feb\u901f\u53c3\u8003\u8868","text":"\u6642\u6a5f \u547d\u4ee4 \u983b\u7387 \u8aaa\u660e \u6bcf\u5929\u958b\u59cb <code>daily-start</code> \u6bcf\u59291\u6b21 \u958b\u59cb\u5de5\u4f5c \u6bcf\u5929\u958b\u59cb <code>generate-daily-plan</code> \u6bcf\u59291\u6b21 \u751f\u6210\u8a08\u5283 \u6bcf\u5929\u958b\u59cb <code>create-daily-log</code> \u6bcf\u59291\u6b21 \u5efa\u7acb\u65e5\u8a8c \u5be6\u4f5c\u4e2d <code>update-implementation-status</code> \u5b8c\u6210 ticket \u5f8c \u66f4\u65b0\u72c0\u614b \u5be6\u4f5c\u4e2d <code>update-changelog</code> \u6709\u8b8a\u66f4\u6642 \u8a18\u9304\u8b8a\u66f4 \u5be6\u4f5c\u4e2d <code>check-tdd-consistency</code> \u5b8c\u6210\u529f\u80fd\u5f8c \u6aa2\u67e5\u4e00\u81f4\u6027 \u5be6\u4f5c\u4e2d <code>deploy-tdd-to-mkdocs</code> \u9700\u8981\u767c\u5e03\u6642 \u90e8\u7f72\u6587\u6a94 \u6bcf\u5929\u7d50\u675f <code>review-cursor-conversations</code> \u6bcf\u59291\u6b21 \u7d71\u6574\u5c0d\u8a71 \u6bcf\u5929\u7d50\u675f <code>summarize-daily-work</code> \u6bcf\u59291\u6b21 \u7d71\u6574\u5de5\u4f5c \u6bcf\u5929\u7d50\u675f <code>daily-end</code> \u6bcf\u59291\u6b21 \u7d50\u675f\u5de5\u4f5c\uff08\u9700\u624b\u52d5\u66f4\u65b0 mkdocs.yml \u4e26\u90e8\u7f72\uff09"},{"location":"17_Cursor_Commands/QUICK_REFERENCE/#_11","title":"\u2705 \u81ea\u52d5\u5316\u8aaa\u660e","text":"<p><code>daily-end</code> \u547d\u4ee4\u73fe\u5728\u6703\u81ea\u52d5\u66f4\u65b0 <code>mkdocs.yml</code>\uff1a</p> <ol> <li>\u81ea\u52d5\u66f4\u65b0: <code>summarize_daily_work.sh</code> \u6703\u81ea\u52d5\u6383\u63cf <code>15_Daily_Logs/</code> \u76ee\u9304\u4e26\u66f4\u65b0 <code>mkdocs.yml</code></li> <li>\u624b\u52d5\u90e8\u7f72: \u4ecd\u9700\u624b\u52d5\u57f7\u884c <code>@deploy-tdd-to-mkdocs</code> \u90e8\u7f72\u5230 GitHub Pages</li> </ol> <p>\u66f4\u65b0\u8173\u672c: <code>scripts/update_mkdocs_nav.sh</code> - \u53ef\u55ae\u7368\u57f7\u884c\u4ee5\u66f4\u65b0\u5c0e\u822a\u914d\u7f6e</p>"},{"location":"17_Cursor_Commands/WORKFLOW_GUIDE/","title":"Cursor Commands \u5de5\u4f5c\u6d41\u7a0b\u5716\u8207\u4f7f\u7528\u6642\u6a5f","text":""},{"location":"17_Cursor_Commands/WORKFLOW_GUIDE/#_1","title":"\ud83d\udcca \u5b8c\u6574\u5de5\u4f5c\u6d41\u7a0b\u5716","text":"<pre><code>graph TD\n    Start([\u958b\u59cb\u65b0\u7684\u4e00\u5929]) --&gt; DailyStart[daily-start&lt;br/&gt;\u958b\u59cb\u4eca\u5929\u7684\u5de5\u4f5c]\n\n    DailyStart --&gt; GeneratePlan[generate-daily-plan&lt;br/&gt;\u751f\u6210\u5de5\u4f5c\u8a08\u5283]\n    GeneratePlan --&gt; CreateLog[create-daily-log&lt;br/&gt;\u5efa\u7acb\u5de5\u4f5c\u65e5\u8a8c]\n\n    CreateLog --&gt; WorkLoop{\u5be6\u4f5c\u5faa\u74b0}\n\n    WorkLoop --&gt;|\u5be6\u4f5c\u904e\u7a0b\u4e2d| UpdateStatus[update-implementation-status&lt;br/&gt;\u66f4\u65b0\u5be6\u4f5c\u72c0\u614b]\n    WorkLoop --&gt;|\u6709\u4ee3\u78bc\u8b8a\u66f4| UpdateChangelog[update-changelog&lt;br/&gt;\u66f4\u65b0\u8b8a\u66f4\u65e5\u8a8c]\n    WorkLoop --&gt;|\u6aa2\u67e5\u4e00\u81f4\u6027| CheckConsistency[check-tdd-consistency&lt;br/&gt;\u6aa2\u67e5 TDD \u4e00\u81f4\u6027]\n    WorkLoop --&gt;|\u9700\u8981\u767c\u5e03| DeployMkDocs[deploy-tdd-to-mkdocs&lt;br/&gt;\u90e8\u7f72\u5230 MkDocs]\n\n    UpdateStatus --&gt; WorkLoop\n    UpdateChangelog --&gt; WorkLoop\n    CheckConsistency --&gt; WorkLoop\n    DeployMkDocs --&gt; WorkLoop\n\n    WorkLoop --&gt;|\u4e00\u5929\u7d50\u675f| ReviewConversations[review-cursor-conversations&lt;br/&gt;\u7d71\u6574\u5c0d\u8a71]\n    ReviewConversations --&gt; SummarizeWork[summarize-daily-work&lt;br/&gt;\u7d71\u6574\u7576\u5929\u5de5\u4f5c]\n    SummarizeWork --&gt; DailyEnd[daily-end&lt;br/&gt;\u7d50\u675f\u4eca\u5929\u7684\u5de5\u4f5c]\n\n    DailyEnd --&gt; End([\u7d50\u675f])\n\n    style Start fill:#e1f5ff\n    style End fill:#ffe1f5\n    style DailyStart fill:#fff4e1\n    style DailyEnd fill:#fff4e1\n    style GeneratePlan fill:#e8f5e9\n    style CreateLog fill:#e8f5e9\n    style WorkLoop fill:#f3e5f5\n    style UpdateStatus fill:#e3f2fd\n    style UpdateChangelog fill:#e3f2fd\n    style CheckConsistency fill:#e3f2fd\n    style DeployMkDocs fill:#e3f2fd\n    style ReviewConversations fill:#fff9c4\n    style SummarizeWork fill:#fff9c4</code></pre>"},{"location":"17_Cursor_Commands/WORKFLOW_GUIDE/#_2","title":"\ud83d\udd50 \u4f7f\u7528\u6642\u6a5f\u8a73\u7d30\u8aaa\u660e","text":""},{"location":"17_Cursor_Commands/WORKFLOW_GUIDE/#morning-routine","title":"\ud83c\udf05 \u6bcf\u5929\u958b\u59cb\u6642\uff08Morning Routine\uff09","text":""},{"location":"17_Cursor_Commands/WORKFLOW_GUIDE/#1-daily-start-","title":"1. daily-start - \u958b\u59cb\u4eca\u5929\u7684\u5de5\u4f5c","text":"<p>\u4f7f\u7528\u6642\u6a5f: \u6bcf\u5929\u958b\u59cb\u5de5\u4f5c\u6642\u7684\u7b2c\u4e00\u500b\u547d\u4ee4</p> <p>\u529f\u80fd: - \u81ea\u52d5\u57f7\u884c <code>generate-daily-plan</code> \u548c <code>create-daily-log</code> - \u63d0\u4f9b\u7576\u5929\u7684\u5be6\u4f5c\u5efa\u8b70 - \u6aa2\u67e5\u4f9d\u8cf4\u95dc\u4fc2</p> <p>\u89f8\u767c\u65b9\u5f0f: <pre><code>\u5728 Cursor \u4e2d\u8aaa\uff1a\u300c\u958b\u59cb\u4eca\u5929\u7684\u5de5\u4f5c\u300d\u6216\u300c@daily-start\u300d\n</code></pre></p>"},{"location":"17_Cursor_Commands/WORKFLOW_GUIDE/#2-generate-daily-plan-","title":"2. generate-daily-plan - \u751f\u6210\u4eca\u5929\u7684\u5de5\u4f5c\u8a08\u5283","text":"<p>\u4f7f\u7528\u6642\u6a5f:  - \u6bcf\u5929\u958b\u59cb\u5de5\u4f5c\u6642 - \u9700\u8981\u67e5\u770b\u7576\u5929\u8a08\u5283\u6642 - \u8a08\u5283\u8b8a\u66f4\u9700\u8981\u91cd\u65b0\u751f\u6210\u6642</p> <p>\u529f\u80fd: - \u6839\u64da\u4eca\u5929\u7684\u65e5\u671f\u627e\u51fa\u5c0d\u61c9\u7684 Jira tickets - \u8b58\u5225 parent tickets \u548c child tickets - \u751f\u6210\u5305\u542b Jira \u9023\u7d50\u3001\u4f30\u6642\u3001\u72c0\u614b\u7684\u5de5\u4f5c\u8a08\u5283</p> <p>\u89f8\u767c\u65b9\u5f0f: <pre><code>\u5728 Cursor \u4e2d\u8aaa\uff1a\u300c\u751f\u6210\u4eca\u5929\u7684\u5de5\u4f5c\u8a08\u5283\u300d\u6216\u300c@generate-daily-plan\u300d\n</code></pre></p> <p>\u751f\u6210\u6587\u4ef6: <code>16_Cursor_Workflow/daily_plans/YYYY-MM-DD.md</code></p>"},{"location":"17_Cursor_Commands/WORKFLOW_GUIDE/#3-create-daily-log-","title":"3. create-daily-log - \u5efa\u7acb\u4eca\u5929\u7684\u5de5\u4f5c\u65e5\u8a8c","text":"<p>\u4f7f\u7528\u6642\u6a5f: - \u6bcf\u5929\u958b\u59cb\u5de5\u4f5c\u6642 - \u9700\u8981\u8a18\u9304\u7576\u5929\u5de5\u4f5c\u6642</p> <p>\u529f\u80fd: - \u4f7f\u7528\u9810\u8a2d\u6a21\u677f\u5efa\u7acb\u5de5\u4f5c\u65e5\u8a8c - \u5305\u542b\u65e5\u671f\u3001\u8a08\u5283\u3001\u5b8c\u6210\u9805\u76ee\u7b49\u6b04\u4f4d</p> <p>\u89f8\u767c\u65b9\u5f0f: <pre><code>\u5728 Cursor \u4e2d\u8aaa\uff1a\u300c\u5efa\u7acb\u4eca\u5929\u7684\u5de5\u4f5c\u65e5\u8a8c\u300d\u6216\u300c@create-daily-log\u300d\n</code></pre></p> <p>\u751f\u6210\u6587\u4ef6: <code>15_Daily_Logs/YYYY-MM-DD.md</code></p>"},{"location":"17_Cursor_Commands/WORKFLOW_GUIDE/#during-development","title":"\ud83d\udcbb \u5be6\u4f5c\u904e\u7a0b\u4e2d\uff08During Development\uff09","text":""},{"location":"17_Cursor_Commands/WORKFLOW_GUIDE/#4-update-implementation-status-","title":"4. update-implementation-status - \u66f4\u65b0\u5be6\u4f5c\u72c0\u614b","text":"<p>\u4f7f\u7528\u6642\u6a5f: - \u5b8c\u6210\u4e00\u500b ticket \u7684\u5be6\u4f5c\u5f8c - \u9700\u8981\u8ffd\u8e64\u5be6\u4f5c\u9032\u5ea6\u6642 - \u5b9a\u671f\u6aa2\u67e5\u5be6\u4f5c\u72c0\u614b\u6642\uff08\u5efa\u8b70\u6bcf\u5929\u81f3\u5c11\u4e00\u6b21\uff09</p> <p>\u529f\u80fd: - \u6aa2\u67e5\u5be6\u4f5c\u9032\u5ea6 - \u66f4\u65b0\u72c0\u614b\u8ffd\u8e64\u8868 - \u6aa2\u67e5 TDD \u4e00\u81f4\u6027</p> <p>\u89f8\u767c\u65b9\u5f0f: <pre><code>\u5728 Cursor \u4e2d\u8aaa\uff1a\u300c\u66f4\u65b0\u5be6\u4f5c\u72c0\u614b\u300d\u6216\u300c@update-implementation-status\u300d\n</code></pre></p> <p>\u66f4\u65b0\u6587\u4ef6: <code>13_Implementation_Status/implementation_status.md</code></p>"},{"location":"17_Cursor_Commands/WORKFLOW_GUIDE/#5-update-changelog-","title":"5. update-changelog - \u66f4\u65b0\u8b8a\u66f4\u65e5\u8a8c","text":"<p>\u4f7f\u7528\u6642\u6a5f: - \u5b8c\u6210\u4e00\u500b\u529f\u80fd\u6216\u4fee\u5fa9\u5f8c - \u6709\u4ee3\u78bc\u8b8a\u66f4\u9700\u8981\u8a18\u9304\u6642 - \u6e96\u5099 commit \u524d</p> <p>\u529f\u80fd: - \u6839\u64da git commits \u751f\u6210\u8b8a\u66f4\u8a18\u9304 - \u66f4\u65b0 CHANGELOG.md - \u5c0d\u61c9\u5230\u76f8\u95dc\u7684 TDD ticket</p> <p>\u89f8\u767c\u65b9\u5f0f: <pre><code>\u5728 Cursor \u4e2d\u8aaa\uff1a\u300c\u66f4\u65b0\u8b8a\u66f4\u65e5\u8a8c\u300d\u6216\u300c@update-changelog\u300d\n</code></pre></p> <p>\u66f4\u65b0\u6587\u4ef6: <code>14_Changelog/CHANGELOG.md</code></p>"},{"location":"17_Cursor_Commands/WORKFLOW_GUIDE/#6-check-tdd-consistency-tdd","title":"6. check-tdd-consistency - \u6aa2\u67e5 TDD \u4e00\u81f4\u6027","text":"<p>\u4f7f\u7528\u6642\u6a5f: - \u5be6\u4f5c\u5b8c\u6210\u5f8c\u9700\u8981\u9a57\u8b49\u6642 - \u5b9a\u671f\u6aa2\u67e5\u6642\uff08\u5efa\u8b70\u6bcf\u9031\u4e00\u6b21\uff09 - \u6e96\u5099\u63d0\u4ea4 PR \u524d</p> <p>\u529f\u80fd: - \u6aa2\u67e5\u5be6\u4f5c\u6a94\u6848\u662f\u5426\u5b58\u5728 - \u6aa2\u67e5\u662f\u5426\u7b26\u5408 TDD \u898f\u7bc4 - \u63d0\u4f9b\u6539\u9032\u5efa\u8b70</p> <p>\u89f8\u767c\u65b9\u5f0f: <pre><code>\u5728 Cursor \u4e2d\u8aaa\uff1a\u300c\u6aa2\u67e5 TDD \u4e00\u81f4\u6027\u300d\u6216\u300c@check-tdd-consistency\u300d\n</code></pre></p>"},{"location":"17_Cursor_Commands/WORKFLOW_GUIDE/#7-deploy-tdd-to-mkdocs-tdd-mkdocs","title":"7. deploy-tdd-to-mkdocs - \u90e8\u7f72 TDD \u5230 MkDocs","text":"<p>\u4f7f\u7528\u6642\u6a5f: - \u5b8c\u6210\u91cd\u8981\u7ae0\u7bc0\u7684\u66f4\u65b0\u5f8c - \u9700\u8981\u767c\u5e03\u6700\u65b0\u6587\u6a94\u6642 - \u6e96\u5099\u5206\u4eab TDD \u7d66\u5718\u968a\u6642 - \u5b9a\u671f\u767c\u5e03\u6642\uff08\u5efa\u8b70\u6bcf\u9031\u4e00\u6b21\uff09</p> <p>\u529f\u80fd: - \u5efa\u7f6e MkDocs \u6587\u6a94 - \u90e8\u7f72\u5230 GitHub Pages (gh-pages branch) - \u986f\u793a\u90e8\u7f72\u72c0\u614b\u548c\u7db2\u7ad9 URL</p> <p>\u89f8\u767c\u65b9\u5f0f: <pre><code>\u5728 Cursor \u4e2d\u8aaa\uff1a\u300c\u90e8\u7f72 TDD \u5230 MkDocs\u300d\u6216\u300c\u767c\u5e03 TDD \u6587\u6a94\u300d\u6216\u300c@deploy-tdd-to-mkdocs\u300d\n</code></pre></p> <p>\u7db2\u7ad9 URL: <code>https://hsinchunghan.github.io/LiveChatAndCommentOngoingFeature/</code></p>"},{"location":"17_Cursor_Commands/WORKFLOW_GUIDE/#evening-routine","title":"\ud83c\udf19 \u6bcf\u5929\u7d50\u675f\u6642\uff08Evening Routine\uff09","text":""},{"location":"17_Cursor_Commands/WORKFLOW_GUIDE/#8-review-cursor-conversations-","title":"8. review-cursor-conversations - \u7d71\u6574\u5c0d\u8a71","text":"<p>\u4f7f\u7528\u6642\u6a5f: - \u6bcf\u5929\u7d50\u675f\u5de5\u4f5c\u524d - \u9700\u8981\u63d0\u53d6\u91cd\u8981\u6c7a\u7b56\u6642 - \u9700\u8981\u8a18\u9304\u5b78\u7fd2\u8981\u9ede\u6642</p> <p>\u529f\u80fd: - \u63d0\u53d6\u91cd\u8981\u6c7a\u7b56 - \u63d0\u53d6\u5b78\u7fd2\u8981\u9ede - \u751f\u6210\u5c0d\u8a71\u6458\u8981</p> <p>\u89f8\u767c\u65b9\u5f0f: <pre><code>\u5728 Cursor \u4e2d\u8aaa\uff1a\u300c\u7d71\u6574\u5c0d\u8a71\u300d\u6216\u300c@review-cursor-conversations\u300d\n</code></pre></p>"},{"location":"17_Cursor_Commands/WORKFLOW_GUIDE/#9-summarize-daily-work-","title":"9. summarize-daily-work - \u7d71\u6574\u7576\u5929\u5de5\u4f5c","text":"<p>\u4f7f\u7528\u6642\u6a5f: - \u6bcf\u5929\u7d50\u675f\u5de5\u4f5c\u6642 - \u9700\u8981\u751f\u6210\u5de5\u4f5c\u5831\u544a\u6642</p> <p>\u529f\u80fd: - \u751f\u6210\u5de5\u4f5c\u7d71\u6574\u6587\u4ef6 - \u5305\u542b\u5c0d\u8a71\u7d71\u6574\u6a21\u677f - \u66f4\u65b0\u5be6\u4f5c\u72c0\u614b\u548c\u8b8a\u66f4\u65e5\u8a8c</p> <p>\u89f8\u767c\u65b9\u5f0f: <pre><code>\u5728 Cursor \u4e2d\u8aaa\uff1a\u300c\u7d71\u6574\u7576\u5929\u5de5\u4f5c\u300d\u6216\u300c@summarize-daily-work\u300d\n</code></pre></p>"},{"location":"17_Cursor_Commands/WORKFLOW_GUIDE/#10-daily-end-","title":"10. daily-end - \u7d50\u675f\u4eca\u5929\u7684\u5de5\u4f5c","text":"<p>\u4f7f\u7528\u6642\u6a5f: \u6bcf\u5929\u7d50\u675f\u5de5\u4f5c\u6642\u7684\u6700\u5f8c\u4e00\u500b\u547d\u4ee4</p> <p>\u529f\u80fd: - \u81ea\u52d5\u57f7\u884c <code>summarize-daily-work</code> \u548c <code>review-cursor-conversations</code> - \u66f4\u65b0\u5be6\u4f5c\u72c0\u614b - \u66f4\u65b0\u8b8a\u66f4\u65e5\u8a8c - \u7d71\u6574\u5c0d\u8a71</p> <p>\u89f8\u767c\u65b9\u5f0f: <pre><code>\u5728 Cursor \u4e2d\u8aaa\uff1a\u300c\u7d50\u675f\u4eca\u5929\u7684\u5de5\u4f5c\u300d\u6216\u300c@daily-end\u300d\n</code></pre></p>"},{"location":"17_Cursor_Commands/WORKFLOW_GUIDE/#_3","title":"\ud83d\udcc5 \u5178\u578b\u5de5\u4f5c\u65e5\u6d41\u7a0b","text":""},{"location":"17_Cursor_Commands/WORKFLOW_GUIDE/#900-am","title":"\u65e9\u4e0a\uff089:00 AM\uff09","text":"<pre><code>1. @daily-start\n   \u2514\u2500&gt; \u81ea\u52d5\u57f7\u884c generate-daily-plan \u548c create-daily-log\n   \u2514\u2500&gt; \u67e5\u770b\u4eca\u5929\u7684\u5de5\u4f5c\u8a08\u5283\n</code></pre>"},{"location":"17_Cursor_Commands/WORKFLOW_GUIDE/#930-am-500-pm","title":"\u5be6\u4f5c\u904e\u7a0b\u4e2d\uff089:30 AM - 5:00 PM\uff09","text":"<pre><code>2. \u5be6\u4f5c\u529f\u80fd A\n   \u2514\u2500&gt; @update-implementation-status (\u5b8c\u6210\u5f8c)\n   \u2514\u2500&gt; @update-changelog (\u6709\u4ee3\u78bc\u8b8a\u66f4\u6642)\n\n3. \u5be6\u4f5c\u529f\u80fd B\n   \u2514\u2500&gt; @check-tdd-consistency (\u5be6\u4f5c\u5b8c\u6210\u5f8c)\n   \u2514\u2500&gt; @update-implementation-status\n\n4. \u5b8c\u6210\u91cd\u8981\u7ae0\u7bc0\n   \u2514\u2500&gt; @deploy-tdd-to-mkdocs (\u9700\u8981\u767c\u5e03\u6642)\n</code></pre>"},{"location":"17_Cursor_Commands/WORKFLOW_GUIDE/#530-pm","title":"\u665a\u4e0a\uff085:30 PM\uff09","text":"<pre><code>5. @daily-end\n   \u2514\u2500&gt; \u81ea\u52d5\u57f7\u884c summarize-daily-work \u548c review-cursor-conversations\n   \u2514\u2500&gt; \u7d71\u6574\u7576\u5929\u5de5\u4f5c\n</code></pre>"},{"location":"17_Cursor_Commands/WORKFLOW_GUIDE/#_4","title":"\ud83c\udfaf \u5feb\u901f\u53c3\u8003\u8868","text":"\u6642\u6a5f \u547d\u4ee4 \u983b\u7387 \u8aaa\u660e \u6bcf\u5929\u958b\u59cb <code>daily-start</code> \u6bcf\u5929 1 \u6b21 \u958b\u59cb\u5de5\u4f5c \u6bcf\u5929\u958b\u59cb <code>generate-daily-plan</code> \u6bcf\u5929 1 \u6b21 \u751f\u6210\u8a08\u5283 \u6bcf\u5929\u958b\u59cb <code>create-daily-log</code> \u6bcf\u5929 1 \u6b21 \u5efa\u7acb\u65e5\u8a8c \u5be6\u4f5c\u4e2d <code>update-implementation-status</code> \u5b8c\u6210 ticket \u5f8c \u66f4\u65b0\u72c0\u614b \u5be6\u4f5c\u4e2d <code>update-changelog</code> \u6709\u8b8a\u66f4\u6642 \u8a18\u9304\u8b8a\u66f4 \u5be6\u4f5c\u4e2d <code>check-tdd-consistency</code> \u5b8c\u6210\u529f\u80fd\u5f8c \u6aa2\u67e5\u4e00\u81f4\u6027 \u5be6\u4f5c\u4e2d <code>deploy-tdd-to-mkdocs</code> \u9700\u8981\u767c\u5e03\u6642 \u90e8\u7f72\u6587\u6a94 \u6bcf\u5929\u7d50\u675f <code>review-cursor-conversations</code> \u6bcf\u5929 1 \u6b21 \u7d71\u6574\u5c0d\u8a71 \u6bcf\u5929\u7d50\u675f <code>summarize-daily-work</code> \u6bcf\u5929 1 \u6b21 \u7d71\u6574\u5de5\u4f5c \u6bcf\u5929\u7d50\u675f <code>daily-end</code> \u6bcf\u5929 1 \u6b21 \u7d50\u675f\u5de5\u4f5c"},{"location":"17_Cursor_Commands/WORKFLOW_GUIDE/#_5","title":"\ud83d\udca1 \u6700\u4f73\u5be6\u8e10\u5efa\u8b70","text":""},{"location":"17_Cursor_Commands/WORKFLOW_GUIDE/#1","title":"1. \u5efa\u7acb\u7fd2\u6163","text":"<ul> <li>\u6bcf\u5929\u65e9\u4e0a\u57f7\u884c <code>daily-start</code></li> <li>\u6bcf\u5929\u665a\u4e0a\u57f7\u884c <code>daily-end</code></li> <li>\u5f62\u6210\u56fa\u5b9a\u7684\u5de5\u4f5c\u7bc0\u594f</li> </ul>"},{"location":"17_Cursor_Commands/WORKFLOW_GUIDE/#2","title":"2. \u53ca\u6642\u66f4\u65b0","text":"<ul> <li>\u5b8c\u6210\u529f\u80fd\u5f8c\u7acb\u5373\u66f4\u65b0\u72c0\u614b</li> <li>\u6709\u4ee3\u78bc\u8b8a\u66f4\u6642\u7acb\u5373\u8a18\u9304</li> <li>\u4e0d\u8981\u7d2f\u7a4d\u5230\u6700\u5f8c\u624d\u66f4\u65b0</li> </ul>"},{"location":"17_Cursor_Commands/WORKFLOW_GUIDE/#3","title":"3. \u5b9a\u671f\u6aa2\u67e5","text":"<ul> <li>\u6bcf\u9031\u81f3\u5c11\u6aa2\u67e5\u4e00\u6b21 TDD \u4e00\u81f4\u6027</li> <li>\u6bcf\u9031\u81f3\u5c11\u767c\u5e03\u4e00\u6b21\u6587\u6a94</li> <li>\u4fdd\u6301\u6587\u6a94\u8207\u4ee3\u78bc\u540c\u6b65</li> </ul>"},{"location":"17_Cursor_Commands/WORKFLOW_GUIDE/#4","title":"4. \u5584\u7528\u5c0d\u8a71\u7d71\u6574","text":"<ul> <li>\u6bcf\u5929\u7d50\u675f\u6642\u7d71\u6574\u91cd\u8981\u6c7a\u7b56</li> <li>\u8a18\u9304\u5b78\u7fd2\u8981\u9ede</li> <li>\u65b9\u4fbf\u5f8c\u7e8c\u67e5\u95b1</li> </ul>"},{"location":"17_Cursor_Commands/WORKFLOW_GUIDE/#_6","title":"\ud83d\udd17 \u76f8\u95dc\u6587\u4ef6","text":"<ul> <li>\u547d\u4ee4\u76ee\u9304: <code>~/.cursor/commands/</code></li> <li>\u5de5\u4f5c\u6d41\u7a0b\u6307\u5357: <code>/Users/reedhsin/Documents/codebase/fcom-iOS/TDDs/LiveChat&amp;PrematchComment/16_Cursor_Workflow/WORKFLOW_GUIDE.md</code></li> <li>\u5feb\u901f\u958b\u59cb: <code>/Users/reedhsin/Documents/codebase/fcom-iOS/TDDs/LiveChat&amp;PrematchComment/16_Cursor_Workflow/QUICK_START.md</code></li> </ul>"},{"location":"17_Cursor_Commands/check-tdd-consistency/","title":"Check TDD Consistency","text":"<p>\u6aa2\u67e5\u5be6\u4f5c\u8207 TDD \u6587\u4ef6\u7684\u4e00\u81f4\u6027\u3002</p>"},{"location":"17_Cursor_Commands/check-tdd-consistency/#_1","title":"\u4f7f\u7528\u65b9\u5f0f","text":"<p>\u76f4\u63a5\u5728 Cursor \u4e2d\u57f7\u884c\u6b64\u547d\u4ee4\uff0c\u6216\u8aaa\u300c\u6aa2\u67e5 TDD \u4e00\u81f4\u6027\u300d</p>"},{"location":"17_Cursor_Commands/check-tdd-consistency/#_2","title":"\u529f\u80fd","text":"<ul> <li>\u6aa2\u67e5\u5be6\u4f5c\u6a94\u6848\u662f\u5426\u5b58\u5728</li> <li>\u6aa2\u67e5\u5be6\u4f5c\u662f\u5426\u7b26\u5408 TDD \u898f\u7bc4</li> <li>\u6aa2\u67e5\u662f\u5426\u6709\u907a\u6f0f\u7684\u529f\u80fd</li> <li>\u63d0\u4f9b\u6539\u9032\u5efa\u8b70</li> </ul>"},{"location":"17_Cursor_Commands/check-tdd-consistency/#_3","title":"\u57f7\u884c","text":"<p>\u8acb\u5354\u52a9\u6211\u6aa2\u67e5\u6307\u5b9a ticket \u7684\u5be6\u4f5c\u8207 TDD \u4e00\u81f4\u6027\uff1a</p> <ol> <li>\u8b80\u53d6 TDD ticket \u6587\u4ef6\uff08\u4f8b\u5982\uff1a<code>12_Tickets/01_domain_model/TDD-001_Comment_Entity.md</code>\uff09</li> <li>\u6aa2\u67e5\u5be6\u4f5c\u6a94\u6848\u662f\u5426\u5b58\u5728\uff08\u6839\u64da TDD \u6587\u4ef6\u4e2d\u7684\u6a94\u6848\u7d50\u69cb\uff09</li> <li>\u6aa2\u67e5\u5be6\u4f5c\u662f\u5426\u7b26\u5408 TDD \u898f\u7bc4\uff1a</li> <li>\u547d\u540d\u898f\u7bc4</li> <li>\u6a94\u6848\u7d50\u69cb</li> <li>\u529f\u80fd\u5b8c\u6574\u6027</li> <li>\u6e2c\u8a66\u8986\u84cb\u7387</li> <li>\u6aa2\u67e5\u662f\u5426\u6709\u907a\u6f0f\u7684\u529f\u80fd</li> <li>\u63d0\u4f9b\u6539\u9032\u5efa\u8b70</li> </ol>"},{"location":"17_Cursor_Commands/check-tdd-consistency/#_4","title":"\u4f7f\u7528\u7bc4\u4f8b","text":"<p>\u6aa2\u67e5 TDD-001\uff1a <pre><code>\u8acb\u6aa2\u67e5 TDD-001 \u7684\u5be6\u4f5c\u662f\u5426\u8207 TDD \u6587\u4ef6\u4e00\u81f4\n</code></pre></p> <p>\u6aa2\u67e5\u591a\u500b tickets\uff1a <pre><code>\u8acb\u6aa2\u67e5 TDD-001, TDD-002, TDD-003 \u7684\u5be6\u4f5c\u662f\u5426\u8207 TDD \u6587\u4ef6\u4e00\u81f4\n</code></pre></p>"},{"location":"17_Cursor_Commands/check-tdd-consistency/#_5","title":"\u76f8\u95dc\u6587\u4ef6","text":"<ul> <li><code>12_Tickets/</code> - TDD ticket \u6587\u4ef6</li> <li><code>13_Implementation_Status/implementation_status.md</code> - \u5be6\u4f5c\u72c0\u614b</li> </ul>"},{"location":"17_Cursor_Commands/create-daily-log/","title":"Create Daily Log","text":"<p>\u5efa\u7acb\u4eca\u5929\u7684\u5de5\u4f5c\u65e5\u8a8c\u6587\u4ef6\u3002</p>"},{"location":"17_Cursor_Commands/create-daily-log/#_1","title":"\u4f7f\u7528\u65b9\u5f0f","text":"<p>\u76f4\u63a5\u5728 Cursor \u4e2d\u57f7\u884c\u6b64\u547d\u4ee4\uff0c\u6216\u8aaa\u300c\u5efa\u7acb\u4eca\u5929\u7684\u5de5\u4f5c\u65e5\u8a8c\u300d</p>"},{"location":"17_Cursor_Commands/create-daily-log/#_2","title":"\u529f\u80fd","text":"<ul> <li>\u6839\u64da\u4eca\u5929\u7684\u65e5\u671f\u5efa\u7acb\u5de5\u4f5c\u65e5\u8a8c\u6587\u4ef6</li> <li>\u4f7f\u7528\u9810\u8a2d\u6a21\u677f\uff0c\u5305\u542b\u8207 Cursor \u5c0d\u8a71\u7d71\u6574\u90e8\u5206</li> </ul>"},{"location":"17_Cursor_Commands/create-daily-log/#_3","title":"\u57f7\u884c","text":"<pre><code>cd /Users/reedhsin/Documents/codebase/fcom-iOS/TDDs/LiveChat\\&amp;PrematchComment &amp;&amp; ./scripts/create_daily_log.sh\n</code></pre>"},{"location":"17_Cursor_Commands/create-daily-log/#_4","title":"\u751f\u6210\u7684\u6587\u4ef6","text":"<ul> <li><code>15_Daily_Logs/YYYY-MM-DD.md</code></li> </ul>"},{"location":"17_Cursor_Commands/daily-end/","title":"Daily End","text":"<p>\u6bcf\u5929\u7d50\u675f\u6642\u57f7\u884c\u7684\u5de5\u4f5c\u6d41\u7a0b\u3002</p>"},{"location":"17_Cursor_Commands/daily-end/#_1","title":"\u4f7f\u7528\u65b9\u5f0f","text":"<p>\u76f4\u63a5\u5728 Cursor \u4e2d\u57f7\u884c\u6b64\u547d\u4ee4\uff0c\u6216\u8aaa\u300c\u7d50\u675f\u4eca\u5929\u7684\u5de5\u4f5c\u300d</p>"},{"location":"17_Cursor_Commands/daily-end/#_2","title":"\u529f\u80fd","text":"<p>\u4e00\u6b21\u6027\u57f7\u884c\uff1a 1. \u7d71\u6574\u7576\u5929\u5de5\u4f5c 2. \u66f4\u65b0\u5be6\u4f5c\u72c0\u614b 3. \u66f4\u65b0\u8b8a\u66f4\u65e5\u8a8c 4. \u7d71\u6574\u8207 Cursor \u7684\u5c0d\u8a71</p>"},{"location":"17_Cursor_Commands/daily-end/#_3","title":"\u57f7\u884c","text":"<pre><code>cd /Users/reedhsin/Documents/codebase/fcom-iOS/TDDs/LiveChat\\&amp;PrematchComment &amp;&amp; \\\n./scripts/summarize_daily_work.sh\n</code></pre> <p>\u7136\u5f8c\u8acb\u5354\u52a9\u6211\uff1a 1. \u6839\u64da\u4eca\u5929\u7684 git commits \u751f\u6210\u8b8a\u66f4\u8a18\u9304 2. \u66f4\u65b0 <code>13_Implementation_Status/implementation_status.md</code> 3. \u66f4\u65b0 <code>14_Changelog/CHANGELOG.md</code> 4. \u6aa2\u67e5\u5be6\u4f5c\u8207 TDD \u7684\u4e00\u81f4\u6027 5. \u7d71\u6574\u4eca\u5929\u8207\u4f60\u7684\u5c0d\u8a71\uff0c\u63d0\u53d6\u91cd\u8981\u6c7a\u7b56\u548c\u5b78\u7fd2\u8981\u9ede 6. \u751f\u6210\u660e\u5929\u7684\u8a08\u5283\u5efa\u8b70</p>"},{"location":"17_Cursor_Commands/daily-end/#_4","title":"\u751f\u6210\u7684\u6587\u4ef6","text":"<ul> <li><code>16_Cursor_Workflow/daily_summaries/YYYY-MM-DD.md</code></li> <li>\u66f4\u65b0\u7684 <code>13_Implementation_Status/implementation_status.md</code></li> <li>\u66f4\u65b0\u7684 <code>14_Changelog/CHANGELOG.md</code></li> </ul>"},{"location":"17_Cursor_Commands/daily-start/","title":"Daily Start","text":"<p>\u6bcf\u5929\u958b\u59cb\u6642\u57f7\u884c\u7684\u5de5\u4f5c\u6d41\u7a0b\u3002</p>"},{"location":"17_Cursor_Commands/daily-start/#_1","title":"\u4f7f\u7528\u65b9\u5f0f","text":"<p>\u76f4\u63a5\u5728 Cursor \u4e2d\u57f7\u884c\u6b64\u547d\u4ee4\uff0c\u6216\u8aaa\u300c\u958b\u59cb\u4eca\u5929\u7684\u5de5\u4f5c\u300d</p>"},{"location":"17_Cursor_Commands/daily-start/#_2","title":"\u529f\u80fd","text":"<p>\u4e00\u6b21\u6027\u57f7\u884c\uff1a 1. \u751f\u6210\u4eca\u5929\u7684\u5de5\u4f5c\u8a08\u5283 2. \u5efa\u7acb\u4eca\u5929\u7684\u5de5\u4f5c\u65e5\u8a8c 3. \u8b80\u53d6\u5de5\u4f5c\u8a08\u5283\u4e26\u63d0\u4f9b\u5be6\u4f5c\u5efa\u8b70</p>"},{"location":"17_Cursor_Commands/daily-start/#_3","title":"\u57f7\u884c","text":"<pre><code>cd /Users/reedhsin/Documents/codebase/fcom-iOS/TDDs/LiveChat\\&amp;PrematchComment &amp;&amp; \\\n./scripts/generate_daily_plan.sh &amp;&amp; \\\n./scripts/create_daily_log.sh\n</code></pre> <p>\u7136\u5f8c\u8acb\u5354\u52a9\u6211\uff1a 1. \u8b80\u53d6\u4eca\u5929\u7684\u5de5\u4f5c\u8a08\u5283\uff08<code>16_Cursor_Workflow/daily_plans/YYYY-MM-DD.md</code>\uff09 2. \u8b80\u53d6\u76f8\u95dc\u7684 TDD \u6587\u4ef6 3. \u6aa2\u67e5\u73fe\u6709\u7684 codebase \u7d50\u69cb 4. \u63d0\u4f9b\u5be6\u4f5c\u5efa\u8b70\u548c\u6ce8\u610f\u4e8b\u9805 5. \u6aa2\u67e5\u4f9d\u8cf4\u95dc\u4fc2\u662f\u5426\u6eff\u8db3</p>"},{"location":"17_Cursor_Commands/daily-start/#_4","title":"\u751f\u6210\u7684\u6587\u4ef6","text":"<ul> <li><code>16_Cursor_Workflow/daily_plans/YYYY-MM-DD.md</code></li> <li><code>15_Daily_Logs/YYYY-MM-DD.md</code></li> </ul>"},{"location":"17_Cursor_Commands/deploy-tdd-to-mkdocs/","title":"Deploy TDD to MkDocs","text":"<p>\u90e8\u7f72 TDD \u6587\u6a94\u5230 GitHub Pages\u3002</p>"},{"location":"17_Cursor_Commands/deploy-tdd-to-mkdocs/#_1","title":"\u4f7f\u7528\u65b9\u5f0f","text":"<p>\u5728 Cursor \u4e2d\u8f38\u5165\uff1a<code>@deploy-tdd-to-mkdocs</code></p> <p>\u6216\u76f4\u63a5\u8aaa\uff1a\u300c\u90e8\u7f72 TDD \u5230 MkDocs\u300d\u6216\u300c\u767c\u5e03 TDD \u6587\u6a94\u300d</p>"},{"location":"17_Cursor_Commands/deploy-tdd-to-mkdocs/#_2","title":"\u529f\u80fd\u8aaa\u660e","text":"<ol> <li>\u9032\u5165 TDD \u76ee\u9304</li> <li>\u5efa\u7f6e MkDocs \u6587\u6a94</li> <li>\u90e8\u7f72\u5230 GitHub Pages (gh-pages branch)</li> <li>\u986f\u793a\u90e8\u7f72\u72c0\u614b\u548c\u7db2\u7ad9 URL</li> </ol>"},{"location":"17_Cursor_Commands/deploy-tdd-to-mkdocs/#_3","title":"\u57f7\u884c\u6b65\u9a5f","text":"<pre><code>cd /Users/reedhsin/Documents/codebase/fcom-iOS/TDDs/LiveChat\\&amp;PrematchComment\n\n# 1. \u540c\u6b65 Cursor Commands\uff08\u53ef\u9078\uff0c\u5982\u679c\u5df2\u66f4\u65b0\u547d\u4ee4\u6587\u4ef6\uff09\n./scripts/sync_cursor_commands.sh\n\n# 2. \u5efa\u7f6e\u4e26\u90e8\u7f72\u5230 GitHub Pages\npython3 -m mkdocs gh-deploy\n</code></pre>"},{"location":"17_Cursor_Commands/deploy-tdd-to-mkdocs/#_4","title":"\u9810\u671f\u8f38\u51fa","text":"<ul> <li>MkDocs \u5efa\u7f6e\u6210\u529f\u8a0a\u606f</li> <li>\u63a8\u9001\u5230 gh-pages branch \u7684\u78ba\u8a8d</li> <li>\u7db2\u7ad9 URL: <code>https://hsinchunghan.github.io/LiveChatAndCommentOngoingFeature/</code></li> </ul>"},{"location":"17_Cursor_Commands/deploy-tdd-to-mkdocs/#_5","title":"\u6ce8\u610f\u4e8b\u9805","text":"<ul> <li>\u78ba\u4fdd repository \u5df2\u8a2d\u70ba\u516c\u958b</li> <li>\u78ba\u4fdd GitHub Pages \u8a2d\u7f6e\u9078\u64c7 \"Deploy from a branch\" \u548c <code>gh-pages</code> branch</li> <li>\u90e8\u7f72\u5f8c\u9700\u8981\u7b49\u5f85 5-10 \u5206\u9418\u8b93 GitHub Pages \u5b8c\u6210\u90e8\u7f72</li> <li>\u5982\u679c\u9047\u5230\u554f\u984c\uff0c\u53ef\u4ee5\u52a0\u4e0a <code>--force</code> \u53c3\u6578\u5f37\u5236\u91cd\u65b0\u90e8\u7f72</li> </ul>"},{"location":"17_Cursor_Commands/deploy-tdd-to-mkdocs/#_6","title":"\u76f8\u95dc\u9023\u7d50","text":"<ul> <li>TDD \u76ee\u9304: <code>/Users/reedhsin/Documents/codebase/fcom-iOS/TDDs/LiveChat&amp;PrematchComment</code></li> <li>GitHub Repository: <code>https://github.com/HsinChungHan/LiveChatAndCommentOngoingFeature</code></li> <li>GitHub Pages URL: <code>https://hsinchunghan.github.io/LiveChatAndCommentOngoingFeature/</code></li> <li>GitHub Pages \u8a2d\u7f6e: <code>https://github.com/HsinChungHan/LiveChatAndCommentOngoingFeature/settings/pages</code></li> </ul>"},{"location":"17_Cursor_Commands/deploy-tdd-to-mkdocs/#_7","title":"\u6545\u969c\u6392\u9664","text":"<p>\u5982\u679c\u90e8\u7f72\u5931\u6557\uff1a 1. \u6aa2\u67e5 repository \u662f\u5426\u70ba\u516c\u958b 2. \u78ba\u8a8d GitHub Pages \u8a2d\u7f6e\u6b63\u78ba 3. \u6aa2\u67e5 gh-pages branch \u662f\u5426\u5b58\u5728 4. \u5617\u8a66\u4f7f\u7528 <code>--force</code> \u53c3\u6578\u91cd\u65b0\u90e8\u7f72</p>"},{"location":"17_Cursor_Commands/generate-daily-plan/","title":"Generate Daily Plan","text":"<p>\u6839\u64da\u4eca\u5929\u7684\u65e5\u671f\uff0c\u81ea\u52d5\u751f\u6210\u7576\u5929\u7684\u5de5\u4f5c\u8a08\u5283\uff0c\u5305\u542b\u5c0d\u61c9\u7684 Jira parent tickets \u548c child tickets\u3002</p>"},{"location":"17_Cursor_Commands/generate-daily-plan/#_1","title":"\u4f7f\u7528\u65b9\u5f0f","text":"<p>\u76f4\u63a5\u5728 Cursor \u4e2d\u57f7\u884c\u6b64\u547d\u4ee4\uff0c\u6216\u8aaa\u300c\u751f\u6210\u4eca\u5929\u7684\u5de5\u4f5c\u8a08\u5283\u300d</p>"},{"location":"17_Cursor_Commands/generate-daily-plan/#_2","title":"\u529f\u80fd","text":"<ul> <li>\u6839\u64da\u4eca\u5929\u7684\u65e5\u671f\u627e\u51fa\u5c0d\u61c9\u7684 tickets</li> <li>\u5f9e\u8cc7\u6599\u5eab\u53d6\u5f97 Jira \u8cc7\u8a0a\uff08\u9023\u7d50\u3001\u4f30\u6642\u3001\u72c0\u614b\uff09</li> <li>\u8b58\u5225 parent tickets \u548c child tickets</li> <li>\u751f\u6210\u5305\u542b\u8207 Cursor \u5354\u4f5c\u8a08\u5283\u7684\u5de5\u4f5c\u8a08\u5283\u6587\u4ef6</li> </ul>"},{"location":"17_Cursor_Commands/generate-daily-plan/#_3","title":"\u57f7\u884c","text":"<pre><code>cd /Users/reedhsin/Documents/codebase/fcom-iOS/TDDs/LiveChat\\&amp;PrematchComment &amp;&amp; ./scripts/generate_daily_plan.sh\n</code></pre>"},{"location":"17_Cursor_Commands/generate-daily-plan/#_4","title":"\u751f\u6210\u7684\u6587\u4ef6","text":"<ul> <li><code>16_Cursor_Workflow/daily_plans/YYYY-MM-DD.md</code></li> </ul>"},{"location":"17_Cursor_Commands/review-cursor-conversations/","title":"Review Cursor Conversations","text":"<p>\u7d71\u6574\u8207 Cursor \u7684\u5c0d\u8a71\uff0c\u63d0\u53d6\u91cd\u8981\u6c7a\u7b56\u548c\u5b78\u7fd2\u8981\u9ede\u3002</p>"},{"location":"17_Cursor_Commands/review-cursor-conversations/#_1","title":"\u4f7f\u7528\u65b9\u5f0f","text":"<p>\u76f4\u63a5\u5728 Cursor \u4e2d\u57f7\u884c\u6b64\u547d\u4ee4\uff0c\u6216\u8aaa\u300c\u7d71\u6574\u5c0d\u8a71\u300d</p>"},{"location":"17_Cursor_Commands/review-cursor-conversations/#_2","title":"\u529f\u80fd","text":"<ul> <li>\u7d71\u6574\u4eca\u5929\u8207 Cursor \u7684\u91cd\u8981\u5c0d\u8a71</li> <li>\u63d0\u53d6\u91cd\u8981\u6c7a\u7b56</li> <li>\u63d0\u53d6\u5b78\u7fd2\u8981\u9ede</li> <li>\u751f\u6210\u5c0d\u8a71\u6458\u8981</li> </ul>"},{"location":"17_Cursor_Commands/review-cursor-conversations/#_3","title":"\u57f7\u884c","text":"<p>\u8acb\u5354\u52a9\u6211\u7d71\u6574\u4eca\u5929\u8207\u4f60\u7684\u5c0d\u8a71\uff1a</p> <ol> <li>\u56de\u9867\u4eca\u5929\u7684\u91cd\u8981\u5c0d\u8a71\uff08\u5982\u679c\u6709\u7684\u8a71\uff09</li> <li>\u63d0\u53d6\u91cd\u8981\u6c7a\u7b56\uff1a</li> <li>\u5be6\u4f5c\u6c7a\u7b56</li> <li>\u67b6\u69cb\u6c7a\u7b56</li> <li>\u6280\u8853\u9078\u578b</li> <li>\u63d0\u53d6\u5b78\u7fd2\u8981\u9ede\uff1a</li> <li>\u65b0\u5b78\u5230\u7684\u77e5\u8b58</li> <li>\u6700\u4f73\u5be6\u8e10</li> <li>\u6539\u9032\u5efa\u8b70</li> <li>\u751f\u6210\u5c0d\u8a71\u6458\u8981</li> <li>\u66f4\u65b0\u5de5\u4f5c\u65e5\u8a8c\u4e2d\u7684\u300c\u8207 Cursor \u7684\u5c0d\u8a71\u7d71\u6574\u300d\u90e8\u5206</li> </ol>"},{"location":"17_Cursor_Commands/review-cursor-conversations/#_4","title":"\u8f38\u51fa\u683c\u5f0f","text":""},{"location":"17_Cursor_Commands/review-cursor-conversations/#_5","title":"\u91cd\u8981\u6c7a\u7b56","text":""},{"location":"17_Cursor_Commands/review-cursor-conversations/#_6","title":"\u5b78\u7fd2\u8981\u9ede","text":""},{"location":"17_Cursor_Commands/review-cursor-conversations/#_7","title":"\u6539\u9032\u5efa\u8b70","text":""},{"location":"17_Cursor_Commands/review-cursor-conversations/#_8","title":"\u76f8\u95dc\u6587\u4ef6","text":"<ul> <li><code>15_Daily_Logs/YYYY-MM-DD.md</code> - \u5de5\u4f5c\u65e5\u8a8c</li> <li><code>16_Cursor_Workflow/daily_summaries/YYYY-MM-DD.md</code> - \u5de5\u4f5c\u7d71\u6574</li> </ul>"},{"location":"17_Cursor_Commands/summarize-daily-work/","title":"Summarize Daily Work","text":"<p>\u7d71\u6574\u7576\u5929\u7684\u5de5\u4f5c\uff0c\u5305\u542b\u8207 Cursor \u7684\u5c0d\u8a71\u7d71\u6574\u3002</p>"},{"location":"17_Cursor_Commands/summarize-daily-work/#_1","title":"\u4f7f\u7528\u65b9\u5f0f","text":"<p>\u76f4\u63a5\u5728 Cursor \u4e2d\u57f7\u884c\u6b64\u547d\u4ee4\uff0c\u6216\u8aaa\u300c\u7d71\u6574\u4eca\u5929\u7684\u5de5\u4f5c\u300d</p>"},{"location":"17_Cursor_Commands/summarize-daily-work/#_2","title":"\u529f\u80fd","text":"<ul> <li>\u8b80\u53d6\u7576\u5929\u7684\u5de5\u4f5c\u8a08\u5283\u548c\u5de5\u4f5c\u65e5\u8a8c</li> <li>\u751f\u6210\u5de5\u4f5c\u7d71\u6574\u6587\u4ef6</li> <li>\u5305\u542b\u8207 Cursor \u5c0d\u8a71\u7d71\u6574\u6a21\u677f</li> </ul>"},{"location":"17_Cursor_Commands/summarize-daily-work/#_3","title":"\u57f7\u884c","text":"<pre><code>cd /Users/reedhsin/Documents/codebase/fcom-iOS/TDDs/LiveChat\\&amp;PrematchComment &amp;&amp; ./scripts/summarize_daily_work.sh\n</code></pre>"},{"location":"17_Cursor_Commands/summarize-daily-work/#_4","title":"\u751f\u6210\u7684\u6587\u4ef6","text":"<ul> <li><code>16_Cursor_Workflow/daily_summaries/YYYY-MM-DD.md</code></li> </ul>"},{"location":"17_Cursor_Commands/summarize-daily-work/#_5","title":"\u5f8c\u7e8c\u6b65\u9a5f","text":"<p>\u57f7\u884c\u5f8c\uff0c\u8acb\u624b\u52d5\u586b\u5beb\uff1a 1. \u5b8c\u6210\u9805\u76ee\uff08\u5f9e\u5de5\u4f5c\u65e5\u8a8c\u4e2d\u63d0\u53d6\uff09 2. \u8207 Cursor \u7684\u5c0d\u8a71\u7d71\u6574 3. \u5de5\u4f5c\u7d71\u8a08 4. \u53cd\u601d\u8207\u5b78\u7fd2</p>"},{"location":"17_Cursor_Commands/update-changelog/","title":"Update Changelog","text":"<p>\u6839\u64da\u4eca\u5929\u7684 git commits \u66f4\u65b0\u8b8a\u66f4\u65e5\u8a8c\u3002</p>"},{"location":"17_Cursor_Commands/update-changelog/#_1","title":"\u4f7f\u7528\u65b9\u5f0f","text":"<p>\u76f4\u63a5\u5728 Cursor \u4e2d\u57f7\u884c\u6b64\u547d\u4ee4\uff0c\u6216\u8aaa\u300c\u66f4\u65b0\u8b8a\u66f4\u65e5\u8a8c\u300d</p>"},{"location":"17_Cursor_Commands/update-changelog/#_2","title":"\u529f\u80fd","text":"<ul> <li>\u8b80\u53d6\u4eca\u5929\u7684 git commits</li> <li>\u5c0d\u61c9\u5230\u76f8\u95dc\u7684 TDD ticket</li> <li>\u751f\u6210\u8b8a\u66f4\u8a18\u9304</li> <li>\u66f4\u65b0 CHANGELOG.md</li> </ul>"},{"location":"17_Cursor_Commands/update-changelog/#_3","title":"\u57f7\u884c","text":"<p>\u8acb\u5354\u52a9\u6211\uff1a 1. \u8b80\u53d6\u4eca\u5929\u7684 git commits\uff08\u4f7f\u7528 <code>git log --since=\"today 00:00\" --oneline</code>\uff09 2. \u5206\u6790\u6bcf\u500b commit \u5c0d\u61c9\u7684 TDD ticket 3. \u751f\u6210\u8b8a\u66f4\u8a18\u9304\u683c\u5f0f 4. \u66f4\u65b0 <code>14_Changelog/CHANGELOG.md</code> 5. \u66f4\u65b0 <code>13_Implementation_Status/implementation_status.md</code>\uff08\u5982\u679c ticket \u5b8c\u6210\uff09</p>"},{"location":"17_Cursor_Commands/update-changelog/#_4","title":"\u8b8a\u66f4\u985e\u578b","text":"<ul> <li>\u2705 \u5b8c\u6210\uff1a\u65b0\u529f\u80fd\u6216 Ticket \u5b8c\u6210</li> <li>\ud83d\udea7 \u9032\u884c\u4e2d\uff1a\u6b63\u5728\u9032\u884c\u7684\u529f\u80fd</li> <li>\ud83d\udc1b Bug \u4fee\u5fa9\uff1a\u4fee\u5fa9\u7684\u554f\u984c</li> <li>\u267b\ufe0f \u91cd\u69cb\uff1a\u7a0b\u5f0f\u78bc\u91cd\u69cb</li> <li>\ud83d\udcdd \u6587\u4ef6\u66f4\u65b0\uff1aTDD \u6216\u6587\u4ef6\u66f4\u65b0</li> <li>\u26a0\ufe0f \u554f\u984c\u767c\u73fe\uff1a\u767c\u73fe\u7684\u554f\u984c\u6216\u98a8\u96aa</li> </ul>"},{"location":"17_Cursor_Commands/update-changelog/#_5","title":"\u76f8\u95dc\u6587\u4ef6","text":"<ul> <li><code>14_Changelog/CHANGELOG.md</code></li> <li><code>13_Implementation_Status/implementation_status.md</code></li> </ul>"},{"location":"17_Cursor_Commands/update-implementation-status/","title":"Update Implementation Status","text":"<p>\u66f4\u65b0\u5be6\u4f5c\u72c0\u614b\u8ffd\u8e64\u8868\uff0c\u6aa2\u67e5\u5be6\u4f5c\u8207 TDD \u7684\u4e00\u81f4\u6027\u3002</p>"},{"location":"17_Cursor_Commands/update-implementation-status/#_1","title":"\u4f7f\u7528\u65b9\u5f0f","text":"<p>\u76f4\u63a5\u5728 Cursor \u4e2d\u57f7\u884c\u6b64\u547d\u4ee4\uff0c\u6216\u8aaa\u300c\u66f4\u65b0\u5be6\u4f5c\u72c0\u614b\u300d</p>"},{"location":"17_Cursor_Commands/update-implementation-status/#_2","title":"\u529f\u80fd","text":"<ul> <li>\u6aa2\u67e5\u4eca\u5929\u7684\u5be6\u4f5c\u9032\u5ea6</li> <li>\u66f4\u65b0 implementation_status.md</li> <li>\u6aa2\u67e5\u5be6\u4f5c\u6a94\u6848\u662f\u5426\u5b58\u5728</li> <li>\u6aa2\u67e5\u5be6\u4f5c\u662f\u5426\u7b26\u5408 TDD \u898f\u7bc4</li> </ul>"},{"location":"17_Cursor_Commands/update-implementation-status/#_3","title":"\u57f7\u884c","text":"<p>\u8acb\u5354\u52a9\u6211\uff1a 1. \u8b80\u53d6 <code>13_Implementation_Status/implementation_status.md</code> 2. \u6839\u64da\u4eca\u5929\u7684 git commits \u627e\u51fa\u76f8\u95dc\u7684 tickets 3. \u6aa2\u67e5\u5be6\u4f5c\u6a94\u6848\u662f\u5426\u5b58\u5728 4. \u66f4\u65b0\u5be6\u4f5c\u72c0\u614b\uff08\u9032\u884c\u4e2d/\u5df2\u5b8c\u6210\uff09 5. \u6aa2\u67e5\u5be6\u4f5c\u662f\u5426\u7b26\u5408 TDD \u898f\u7bc4 6. \u66f4\u65b0 implementation_status.md</p>"},{"location":"17_Cursor_Commands/update-implementation-status/#_4","title":"\u76f8\u95dc\u6587\u4ef6","text":"<ul> <li><code>13_Implementation_Status/implementation_status.md</code></li> <li><code>14_Changelog/CHANGELOG.md</code></li> </ul>"}]}